var u0=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports);var h0=u0((exports,module)=>{function _mergeNamespaces(s,a){for(var o=0;o<a.length;o++){const c=a[o];if(typeof c!="string"&&!Array.isArray(c)){for(const d in c)if(d!=="default"&&!(d in s)){const b=Object.getOwnPropertyDescriptor(c,d);b&&Object.defineProperty(s,d,b.get?b:{enumerable:!0,get:()=>c[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const b of d)if(b.type==="childList")for(const $ of b.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&c($)}).observe(document,{childList:!0,subtree:!0});function o(d){const b={};return d.integrity&&(b.integrity=d.integrity),d.referrerPolicy&&(b.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?b.credentials="include":d.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function c(d){if(d.ep)return;d.ep=!0;const b=o(d);fetch(d.href,b)}})();const input$1="";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var a=s.default;if(typeof a=="function"){var o=function c(){return this instanceof c?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};o.prototype=a.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(s).forEach(function(c){var d=Object.getOwnPropertyDescriptor(s,c);Object.defineProperty(o,c,d.get?d:{enumerable:!0,get:function(){return s[c]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(s){return s===null||typeof s!="object"?null:(s=z$1&&s[z$1]||s["@@iterator"],typeof s=="function"?s:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$1={};function E$1(s,a,o){this.props=s,this.context=a,this.refs=D$1,this.updater=o||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,a){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,a,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(s,a,o){this.props=s,this.context=a,this.refs=D$1,this.updater=o||B$2}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,a,o){var c,d={},b=null,$=null;if(a!=null)for(c in a.ref!==void 0&&($=a.ref),a.key!==void 0&&(b=""+a.key),a)J.call(a,c)&&!L$1.hasOwnProperty(c)&&(d[c]=a[c]);var j=arguments.length-2;if(j===1)d.children=o;else if(1<j){for(var _e=Array(j),et=0;et<j;et++)_e[et]=arguments[et+2];d.children=_e}if(s&&s.defaultProps)for(c in j=s.defaultProps,j)d[c]===void 0&&(d[c]=j[c]);return{$$typeof:l$2,type:s,key:b,ref:$,props:d,_owner:K$1.current}}function N$1(s,a){return{$$typeof:l$2,type:s.type,key:a,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$2}function escape$1(s){var a={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(o){return a[o]})}var P$1=/\/+/g;function Q$2(s,a){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):a.toString(36)}function R$1(s,a,o,c,d){var b=typeof s;(b==="undefined"||b==="boolean")&&(s=null);var $=!1;if(s===null)$=!0;else switch(b){case"string":case"number":$=!0;break;case"object":switch(s.$$typeof){case l$2:case n$3:$=!0}}if($)return $=s,d=d($),s=c===""?"."+Q$2($,0):c,I$2(d)?(o="",s!=null&&(o=s.replace(P$1,"$&/")+"/"),R$1(d,a,o,"",function(et){return et})):d!=null&&(O$1(d)&&(d=N$1(d,o+(!d.key||$&&$.key===d.key?"":(""+d.key).replace(P$1,"$&/")+"/")+s)),a.push(d)),1;if($=0,c=c===""?".":c+":",I$2(s))for(var j=0;j<s.length;j++){b=s[j];var _e=c+Q$2(b,j);$+=R$1(b,a,o,_e,d)}else if(_e=A$2(s),typeof _e=="function")for(s=_e.call(s),j=0;!(b=s.next()).done;)b=b.value,_e=c+Q$2(b,j++),$+=R$1(b,a,o,_e,d);else if(b==="object")throw a=String(s),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return $}function S$1(s,a,o){if(s==null)return s;var c=[],d=0;return R$1(s,c,"","",function(b){return a.call(o,b,d++)}),c}function T$1(s){if(s._status===-1){var a=s._result;a=a(),a.then(function(o){(s._status===0||s._status===-1)&&(s._status=1,s._result=o)},function(o){(s._status===0||s._status===-1)&&(s._status=2,s._result=o)}),s._status===-1&&(s._status=0,s._result=a)}if(s._status===1)return s._result.default;throw s._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(s,a,o){S$1(s,function(){a.apply(this,arguments)},o)},count:function(s){var a=0;return S$1(s,function(){a++}),a},toArray:function(s){return S$1(s,function(a){return a})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(s,a,o){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var c=C$2({},s.props),d=s.key,b=s.ref,$=s._owner;if(a!=null){if(a.ref!==void 0&&(b=a.ref,$=K$1.current),a.key!==void 0&&(d=""+a.key),s.type&&s.type.defaultProps)var j=s.type.defaultProps;for(_e in a)J.call(a,_e)&&!L$1.hasOwnProperty(_e)&&(c[_e]=a[_e]===void 0&&j!==void 0?j[_e]:a[_e])}var _e=arguments.length-2;if(_e===1)c.children=o;else if(1<_e){j=Array(_e);for(var et=0;et<_e;et++)j[et]=arguments[et+2];c.children=j}return{$$typeof:l$2,type:s.type,key:d,ref:b,props:c,_owner:$}};react_production_min.createContext=function(s){return s={$$typeof:u$2,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t$2,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var a=M$1.bind(null,s);return a.type=s,a};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$2,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y,_payload:{_status:-1,_result:s},_init:T$1}};react_production_min.memo=function(s,a){return{$$typeof:x,type:s,compare:a===void 0?null:a}};react_production_min.startTransition=function(s){var a=V$1.transition;V$1.transition={};try{s()}finally{V$1.transition=a}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(s,a){return U$1.current.useCallback(s,a)};react_production_min.useContext=function(s){return U$1.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$1.current.useDeferredValue(s)};react_production_min.useEffect=function(s,a){return U$1.current.useEffect(s,a)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(s,a,o){return U$1.current.useImperativeHandle(s,a,o)};react_production_min.useInsertionEffect=function(s,a){return U$1.current.useInsertionEffect(s,a)};react_production_min.useLayoutEffect=function(s,a){return U$1.current.useLayoutEffect(s,a)};react_production_min.useMemo=function(s,a){return U$1.current.useMemo(s,a)};react_production_min.useReducer=function(s,a,o){return U$1.current.useReducer(s,a,o)};react_production_min.useRef=function(s){return U$1.current.useRef(s)};react_production_min.useState=function(s){return U$1.current.useState(s)};react_production_min.useSyncExternalStore=function(s,a,o){return U$1.current.useSyncExternalStore(s,a,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(s,a,o){var c,d={},b=null,$=null;o!==void 0&&(b=""+o),a.key!==void 0&&(b=""+a.key),a.ref!==void 0&&($=a.ref);for(c in a)m$2.call(a,c)&&!p$3.hasOwnProperty(c)&&(d[c]=a[c]);if(s&&s.defaultProps)for(c in a=s.defaultProps,a)d[c]===void 0&&(d[c]=a[c]);return{$$typeof:k$1,type:s,key:b,ref:$,props:d,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client$1={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function a(bt,Pt){var Dt=bt.length;bt.push(Pt);e:for(;0<Dt;){var $t=Dt-1>>>1,Lt=bt[$t];if(0<d(Lt,Pt))bt[$t]=Pt,bt[Dt]=Lt,Dt=$t;else break e}}function o(bt){return bt.length===0?null:bt[0]}function c(bt){if(bt.length===0)return null;var Pt=bt[0],Dt=bt.pop();if(Dt!==Pt){bt[0]=Dt;e:for(var $t=0,Lt=bt.length,Jt=Lt>>>1;$t<Jt;){var Qt=2*($t+1)-1,or=bt[Qt],er=Qt+1,sr=bt[er];if(0>d(or,Dt))er<Lt&&0>d(sr,or)?(bt[$t]=sr,bt[er]=Dt,$t=er):(bt[$t]=or,bt[Qt]=Dt,$t=Qt);else if(er<Lt&&0>d(sr,Dt))bt[$t]=sr,bt[er]=Dt,$t=er;else break e}}return Pt}function d(bt,Pt){var Dt=bt.sortIndex-Pt.sortIndex;return Dt!==0?Dt:bt.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;s.unstable_now=function(){return b.now()}}else{var $=Date,j=$.now();s.unstable_now=function(){return $.now()-j}}var _e=[],et=[],tt=1,rt=null,nt=3,it=!1,at=!1,ct=!1,st=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dt(bt){for(var Pt=o(et);Pt!==null;){if(Pt.callback===null)c(et);else if(Pt.startTime<=bt)c(et),Pt.sortIndex=Pt.expirationTime,a(_e,Pt);else break;Pt=o(et)}}function ft(bt){if(ct=!1,dt(bt),!at)if(o(_e)!==null)at=!0,Bt(mt);else{var Pt=o(et);Pt!==null&&Rt(ft,Pt.startTime-bt)}}function mt(bt,Pt){at=!1,ct&&(ct=!1,ot(yt),yt=-1),it=!0;var Dt=nt;try{for(dt(Pt),rt=o(_e);rt!==null&&(!(rt.expirationTime>Pt)||bt&&!Ct());){var $t=rt.callback;if(typeof $t=="function"){rt.callback=null,nt=rt.priorityLevel;var Lt=$t(rt.expirationTime<=Pt);Pt=s.unstable_now(),typeof Lt=="function"?rt.callback=Lt:rt===o(_e)&&c(_e),dt(Pt)}else c(_e);rt=o(_e)}if(rt!==null)var Jt=!0;else{var Qt=o(et);Qt!==null&&Rt(ft,Qt.startTime-Pt),Jt=!1}return Jt}finally{rt=null,nt=Dt,it=!1}}var gt=!1,vt=null,yt=-1,Et=5,St=-1;function Ct(){return!(s.unstable_now()-St<Et)}function wt(){if(vt!==null){var bt=s.unstable_now();St=bt;var Pt=!0;try{Pt=vt(!0,bt)}finally{Pt?_t():(gt=!1,vt=null)}}else gt=!1}var _t;if(typeof ht=="function")_t=function(){ht(wt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,Mt=Tt.port2;Tt.port1.onmessage=wt,_t=function(){Mt.postMessage(null)}}else _t=function(){st(wt,0)};function Bt(bt){vt=bt,gt||(gt=!0,_t())}function Rt(bt,Pt){yt=st(function(){bt(s.unstable_now())},Pt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(bt){bt.callback=null},s.unstable_continueExecution=function(){at||it||(at=!0,Bt(mt))},s.unstable_forceFrameRate=function(bt){0>bt||125<bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<bt?Math.floor(1e3/bt):5},s.unstable_getCurrentPriorityLevel=function(){return nt},s.unstable_getFirstCallbackNode=function(){return o(_e)},s.unstable_next=function(bt){switch(nt){case 1:case 2:case 3:var Pt=3;break;default:Pt=nt}var Dt=nt;nt=Pt;try{return bt()}finally{nt=Dt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(bt,Pt){switch(bt){case 1:case 2:case 3:case 4:case 5:break;default:bt=3}var Dt=nt;nt=bt;try{return Pt()}finally{nt=Dt}},s.unstable_scheduleCallback=function(bt,Pt,Dt){var $t=s.unstable_now();switch(typeof Dt=="object"&&Dt!==null?(Dt=Dt.delay,Dt=typeof Dt=="number"&&0<Dt?$t+Dt:$t):Dt=$t,bt){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=Dt+Lt,bt={id:tt++,callback:Pt,priorityLevel:bt,startTime:Dt,expirationTime:Lt,sortIndex:-1},Dt>$t?(bt.sortIndex=Dt,a(et,bt),o(_e)===null&&bt===o(et)&&(ct?(ot(yt),yt=-1):ct=!0,Rt(ft,Dt-$t))):(bt.sortIndex=Lt,a(_e,bt),at||it||(at=!0,Bt(mt))),bt},s.unstable_shouldYield=Ct,s.unstable_wrapCallback=function(bt){var Pt=nt;return function(){var Dt=nt;nt=Pt;try{return bt.apply(this,arguments)}finally{nt=Dt}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$2(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,o=1;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,a){ha(s,a),ha(s+"Capture",a)}function ha(s,a){for(ea[s]=a,s=0;s<a.length;s++)da.add(a[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,a,o,c){if(o!==null&&o.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,a,o,c){if(a===null||typeof a>"u"||pa(s,a,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v$1(s,a,o,c,d,b,$){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=s,this.type=a,this.sanitizeURL=b,this.removeEmptyString=$}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new v$1(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];z[a]=new v$1(a,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new v$1(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new v$1(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new v$1(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z[s]=new v$1(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z[s]=new v$1(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z[s]=new v$1(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z[s]=new v$1(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(ra,sa);z[a]=new v$1(a,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(ra,sa);z[a]=new v$1(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(ra,sa);z[a]=new v$1(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z[s]=new v$1(s,1,!1,s.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z[s]=new v$1(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,a,o,c){var d=z.hasOwnProperty(a)?z[a]:null;(d!==null?d.type!==0:c||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(qa(a,o,d,c)&&(o=null),c||d===null?oa(a)&&(o===null?s.removeAttribute(a):s.setAttribute(a,""+o)):d.mustUseProperty?s[d.propertyName]=o===null?d.type===3?!1:"":o:(a=d.attributeName,c=d.attributeNamespace,o===null?s.removeAttribute(a):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,c?s.setAttributeNS(c,a,o):s.setAttribute(a,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A$1=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);La=a&&a[1]||""}return`
`+La+s}var Na=!1;function Oa(s,a){if(!s||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(et){var c=et}Reflect.construct(s,[],a)}else{try{a.call()}catch(et){c=et}s.call(a.prototype)}else{try{throw Error()}catch(et){c=et}s()}}catch(et){if(et&&c&&typeof et.stack=="string"){for(var d=et.stack.split(`
`),b=c.stack.split(`
`),$=d.length-1,j=b.length-1;1<=$&&0<=j&&d[$]!==b[j];)j--;for(;1<=$&&0<=j;$--,j--)if(d[$]!==b[j]){if($!==1||j!==1)do if($--,j--,0>j||d[$]!==b[j]){var _e=`
`+d[$].replace(" at new "," at ");return s.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",s.displayName)),_e}while(1<=$&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return a=s.displayName||null,a!==null?a:Qa(s.type)||"Memo";case Ha:a=s._payload,s=s._init;try{return Qa(s(a))}catch{}}return null}function Ra(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(a);case 8:return a===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ua(s){var a=Ta(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),c=""+s[a];if(!s.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,b=o.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return d.call(this)},set:function($){c=""+$,b.call(this,$)}}),Object.defineProperty(s,a,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function($){c=""+$},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var o=a.getValue(),c="";return s&&(c=Ta(s)?s.checked?"true":"false":s.value),s=c,s!==o?(a.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,a){var o=a.checked;return A$1({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??s._wrapperState.initialChecked})}function Za(s,a){var o=a.defaultValue==null?"":a.defaultValue,c=a.checked!=null?a.checked:a.defaultChecked;o=Sa(a.value!=null?a.value:o),s._wrapperState={initialChecked:c,initialValue:o,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ab(s,a){a=a.checked,a!=null&&ta(s,"checked",a,!1)}function bb(s,a){ab(s,a);var o=Sa(a.value),c=a.type;if(o!=null)c==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+o):s.value!==""+o&&(s.value=""+o);else if(c==="submit"||c==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?cb(s,a.type,o):a.hasOwnProperty("defaultValue")&&cb(s,a.type,Sa(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function db(s,a,o){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var c=a.type;if(!(c!=="submit"&&c!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,o||a===s.value||(s.value=a),s.defaultValue=a}o=s.name,o!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,o!==""&&(s.name=o)}function cb(s,a,o){(a!=="number"||Xa(s.ownerDocument)!==s)&&(o==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+o&&(s.defaultValue=""+o))}var eb=Array.isArray;function fb(s,a,o,c){if(s=s.options,a){a={};for(var d=0;d<o.length;d++)a["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=a.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&c&&(s[o].defaultSelected=!0)}else{for(o=""+Sa(o),a=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,c&&(s[d].defaultSelected=!0);return}a!==null||s[d].disabled||(a=s[d])}a!==null&&(a.selected=!0)}}function gb(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,a){var o=a.value;if(o==null){if(o=a.children,a=a.defaultValue,o!=null){if(a!=null)throw Error(p$2(92));if(eb(o)){if(1<o.length)throw Error(p$2(93));o=o[0]}a=o}a==null&&(a=""),o=a}s._wrapperState={initialValue:Sa(o)}}function ib(s,a){var o=Sa(a.value),c=Sa(a.defaultValue);o!=null&&(o=""+o,o!==s.value&&(s.value=o),a.defaultValue==null&&s.defaultValue!==o&&(s.defaultValue=o)),c!=null&&(s.defaultValue=""+c)}function jb(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,o,c,d){MSApp.execUnsafeLocalFunction(function(){return s(a,o,c,d)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ob(s,a){if(a){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=a;return}}s.textContent=a}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),pb[a]=pb[s]})});function rb(s,a,o){return a==null||typeof a=="boolean"||a===""?"":o||typeof a!="number"||a===0||pb.hasOwnProperty(s)&&pb[s]?(""+a).trim():a+"px"}function sb(s,a){s=s.style;for(var o in a)if(a.hasOwnProperty(o)){var c=o.indexOf("--")===0,d=rb(o,a[o],c);o==="float"&&(o="cssFloat"),c?s.setProperty(o,d):s[o]=d}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,a){if(a){if(tb[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(p$2(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(p$2(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(p$2(61))}if(a.style!=null&&typeof a.style!="object")throw Error(p$2(62))}}function vb(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p$2(280));var a=s.stateNode;a&&(a=Db(a),yb(s.stateNode,s.type,a))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,a=Ab;if(Ab=zb=null,Bb(s),a)for(s=0;s<a.length;s++)Bb(a[s])}}function Gb(s,a){return s(a)}function Hb(){}var Ib=!1;function Jb(s,a,o){if(Ib)return s(a,o);Ib=!0;try{return Gb(s,a,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,a){var o=s.stateNode;if(o===null)return null;var c=Db(o);if(c===null)return null;o=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(p$2(231,a,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,a,o,c,d,b,$,j,_e){var et=Array.prototype.slice.call(arguments,3);try{a.apply(o,et)}catch(tt){this.onError(tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,a,o,c,d,b,$,j,_e){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,a,o,c,d,b,$,j,_e){if(Tb.apply(this,arguments),Ob){if(Ob){var et=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=et)}}function Vb(s){var a=s,o=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(o=a.return),s=a.return;while(s)}return a.tag===3?o:null}function Wb(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p$2(188))}function Yb(s){var a=s.alternate;if(!a){if(a=Vb(s),a===null)throw Error(p$2(188));return a!==s?null:s}for(var o=s,c=a;;){var d=o.return;if(d===null)break;var b=d.alternate;if(b===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===b.child){for(b=d.child;b;){if(b===o)return Xb(d),s;if(b===c)return Xb(d),a;b=b.sibling}throw Error(p$2(188))}if(o.return!==c.return)o=d,c=b;else{for(var $=!1,j=d.child;j;){if(j===o){$=!0,o=d,c=b;break}if(j===c){$=!0,c=d,o=b;break}j=j.sibling}if(!$){for(j=b.child;j;){if(j===o){$=!0,o=b,c=d;break}if(j===c){$=!0,c=b,o=d;break}j=j.sibling}if(!$)throw Error(p$2(189))}}if(o.alternate!==c)throw Error(p$2(190))}if(o.tag!==3)throw Error(p$2(188));return o.stateNode.current===o?s:a}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=$b(s);if(a!==null)return a;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc$1=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,a){var o=s.pendingLanes;if(o===0)return 0;var c=0,d=s.suspendedLanes,b=s.pingedLanes,$=o&268435455;if($!==0){var j=$&~d;j!==0?c=tc(j):(b&=$,b!==0&&(c=tc(b)))}else $=o&~d,$!==0?c=tc($):b!==0&&(c=tc(b));if(c===0)return 0;if(a!==0&&a!==c&&!(a&d)&&(d=c&-c,b=a&-a,d>=b||d===16&&(b&4194240)!==0))return a;if(c&4&&(c|=o&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=c;0<a;)o=31-oc(a),d=1<<o,c|=s[o],a&=~d;return c}function vc(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,a){for(var o=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,b=s.pendingLanes;0<b;){var $=31-oc(b),j=1<<$,_e=d[$];_e===-1?(!(j&o)||j&c)&&(d[$]=vc(j,a)):_e<=a&&(s.expiredLanes|=j),b&=~j}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var a=[],o=0;31>o;o++)a.push(s);return a}function Ac(s,a,o){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-oc(a),s[a]=o}function Bc(s,a){var o=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var c=s.eventTimes;for(s=s.expirationTimes;0<o;){var d=31-oc(o),b=1<<d;a[d]=0,c[d]=-1,s[d]=-1,o&=~b}}function Cc(s,a){var o=s.entangledLanes|=a;for(s=s.entanglements;o;){var c=31-oc(o),d=1<<c;d&a|s[c]&a&&(s[c]|=a),o&=~d}}var C$1=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,a){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(a.pointerId)}}function Tc(s,a,o,c,d,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:o,eventSystemFlags:c,nativeEvent:b,targetContainers:[d]},a!==null&&(a=Cb(a),a!==null&&Fc(a)),s):(s.eventSystemFlags|=c,a=s.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),s)}function Uc(s,a,o,c,d){switch(a){case"focusin":return Lc=Tc(Lc,s,a,o,c,d),!0;case"dragenter":return Mc=Tc(Mc,s,a,o,c,d),!0;case"mouseover":return Nc=Tc(Nc,s,a,o,c,d),!0;case"pointerover":var b=d.pointerId;return Oc.set(b,Tc(Oc.get(b)||null,s,a,o,c,d)),!0;case"gotpointercapture":return b=d.pointerId,Pc.set(b,Tc(Pc.get(b)||null,s,a,o,c,d)),!0}return!1}function Vc(s){var a=Wc(s.target);if(a!==null){var o=Vb(a);if(o!==null){if(a=o.tag,a===13){if(a=Wb(o),a!==null){s.blockedOn=a,Ic(s.priority,function(){Gc(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var o=Yc(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);wb=c,o.target.dispatchEvent(c),wb=null}else return a=Cb(o),a!==null&&Fc(a),s.blockedOn=o,!1;a.shift()}return!0}function Zc(s,a,o){Xc(s)&&o.delete(a)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,a){s.blockedOn===a&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function a(d){return ad(d,s)}if(0<Kc.length){ad(Kc[0],s);for(var o=1;o<Kc.length;o++){var c=Kc[o];c.blockedOn===s&&(c.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(a),Pc.forEach(a),o=0;o<Qc.length;o++)c=Qc[o],c.blockedOn===s&&(c.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,a,o,c){var d=C$1,b=cd.transition;cd.transition=null;try{C$1=1,fd(s,a,o,c)}finally{C$1=d,cd.transition=b}}function gd(s,a,o,c){var d=C$1,b=cd.transition;cd.transition=null;try{C$1=4,fd(s,a,o,c)}finally{C$1=d,cd.transition=b}}function fd(s,a,o,c){if(dd){var d=Yc(s,a,o,c);if(d===null)hd(s,a,c,id$2,o),Sc(s,c);else if(Uc(d,s,a,o,c))c.stopPropagation();else if(Sc(s,c),a&4&&-1<Rc.indexOf(s)){for(;d!==null;){var b=Cb(d);if(b!==null&&Ec(b),b=Yc(s,a,o,c),b===null&&hd(s,a,c,id$2,o),b===d)break;d=b}d!==null&&c.stopPropagation()}else hd(s,a,c,null,o)}}var id$2=null;function Yc(s,a,o,c){if(id$2=null,s=xb(c),s=Wc(s),s!==null)if(a=Vb(s),a===null)s=null;else if(o=a.tag,o===13){if(s=Wb(a),s!==null)return s;s=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return id$2=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,a=ld,o=a.length,c,d="value"in kd?kd.value:kd.textContent,b=d.length;for(s=0;s<o&&a[s]===d[s];s++);var $=o-s;for(c=1;c<=$&&a[o-c]===d[b-c];c++);return md=d.slice(s,1<c?1-c:void 0)}function od(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function a(o,c,d,b,$){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=b,this.target=$,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(o=s[j],this[j]=o?o(b):b[j]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),a}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Od[s])?!!a[s]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(s){if(s.key){var a=Md[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(s,a){switch(s){case"keyup":return $d.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,a){switch(s){case"compositionend":return he(a);case"keypress":return a.which!==32?null:(fe=!0,ee);case"textInput":return s=a.data,s===ee&&fe?null:s;default:return null}}function ke(s,a){if(ie)return s==="compositionend"||!ae&&ge(s,a)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return de&&a.locale!=="ko"?null:a.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!le[s.type]:a==="textarea"}function ne(s,a,o,c){Eb(c),a=oe(a,"onChange"),0<a.length&&(o=new td("onChange","change",null,o,c),s.push({event:o,listeners:a}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var a=ue(s);if(Wa(a))return s}function ve(s,a){if(s==="change")return a}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var a=[];ne(a,qe,s,xb(s)),Jb(re,a)}}function Ce(s,a,o){s==="focusin"?(Ae(),pe=a,qe=o,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,a){if(s==="click")return te(a)}function Fe(s,a){if(s==="input"||s==="change")return te(a)}function Ge(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,a){if(He(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var o=Object.keys(s),c=Object.keys(a);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!ja.call(a,d)||!He(s[d],a[d]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,a){var o=Je(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=a&&c>=a)return{node:o,offset:a-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Le(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Me(){for(var s=window,a=Xa();a instanceof s.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)s=a.contentWindow;else break;a=Xa(s.document)}return a}function Ne(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Oe(s){var a=Me(),o=s.focusedElem,c=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(c!==null&&Ne(o)){if(a=c.start,s=c.end,s===void 0&&(s=a),"selectionStart"in o)o.selectionStart=a,o.selectionEnd=Math.min(s,o.value.length);else if(s=(a=o.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var d=o.textContent.length,b=Math.min(c.start,d);c=c.end===void 0?b:Math.min(c.end,d),!s.extend&&b>c&&(d=c,c=b,b=d),d=Ke(o,b);var $=Ke(o,c);d&&$&&(s.rangeCount!==1||s.anchorNode!==d.node||s.anchorOffset!==d.offset||s.focusNode!==$.node||s.focusOffset!==$.offset)&&(a=a.createRange(),a.setStart(d.node,d.offset),s.removeAllRanges(),b>c?(s.addRange(a),s.extend($.node,$.offset)):(a.setEnd($.node,$.offset),s.addRange(a)))}}for(a=[],s=o;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<a.length;o++)s=a[o],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,a,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(c)||(c=Qe,"selectionStart"in c&&Ne(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se&&Ie(Se,c)||(Se=c,c=oe(Re,"onSelect"),0<c.length&&(a=new td("onSelect","select",null,a,o),s.push({event:a,listeners:c}),a.target=Qe)))}function Ve(s,a){var o={};return o[s.toLowerCase()]=a.toLowerCase(),o["Webkit"+s]="webkit"+a,o["Moz"+s]="moz"+a,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var a=We[s],o;for(o in a)if(a.hasOwnProperty(o)&&o in Ye)return Xe[s]=a[o];return s}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,a){df.set(s,a),fa(a,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,a,o){var c=s.type||"unknown-event";s.currentTarget=o,Ub(c,a,void 0,s),s.currentTarget=null}function se(s,a){a=(a&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],d=c.event;c=c.listeners;e:{var b=void 0;if(a)for(var $=c.length-1;0<=$;$--){var j=c[$],_e=j.instance,et=j.currentTarget;if(j=j.listener,_e!==b&&d.isPropagationStopped())break e;nf(d,j,et),b=_e}else for($=0;$<c.length;$++){if(j=c[$],_e=j.instance,et=j.currentTarget,j=j.listener,_e!==b&&d.isPropagationStopped())break e;nf(d,j,et),b=_e}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,a){var o=a[of];o===void 0&&(o=a[of]=new Set);var c=s+"__bubble";o.has(c)||(pf(a,s,2,!1),o.add(c))}function qf(s,a,o){var c=0;a&&(c|=4),pf(o,s,c,a)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,s),qf(o,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[rf]||(a[rf]=!0,qf("selectionchange",!1,a))}}function pf(s,a,o,c){switch(jd(a)){case 1:var d=ed;break;case 4:d=gd;break;default:d=fd}o=d.bind(null,a,o,s),d=void 0,!Lb||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),c?d!==void 0?s.addEventListener(a,o,{capture:!0,passive:d}):s.addEventListener(a,o,!0):d!==void 0?s.addEventListener(a,o,{passive:d}):s.addEventListener(a,o,!1)}function hd(s,a,o,c,d){var b=c;if(!(a&1)&&!(a&2)&&c!==null)e:for(;;){if(c===null)return;var $=c.tag;if($===3||$===4){var j=c.stateNode.containerInfo;if(j===d||j.nodeType===8&&j.parentNode===d)break;if($===4)for($=c.return;$!==null;){var _e=$.tag;if((_e===3||_e===4)&&(_e=$.stateNode.containerInfo,_e===d||_e.nodeType===8&&_e.parentNode===d))return;$=$.return}for(;j!==null;){if($=Wc(j),$===null)return;if(_e=$.tag,_e===5||_e===6){c=b=$;continue e}j=j.parentNode}}c=c.return}Jb(function(){var et=b,tt=xb(o),rt=[];e:{var nt=df.get(s);if(nt!==void 0){var it=td,at=s;switch(s){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":it=Rd;break;case"focusin":at="focus",it=Fd;break;case"focusout":at="blur",it=Fd;break;case"beforeblur":case"afterblur":it=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Vd;break;case $e:case af:case bf:it=Hd;break;case cf:it=Xd;break;case"scroll":it=vd;break;case"wheel":it=Zd;break;case"copy":case"cut":case"paste":it=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Td}var ct=(a&4)!==0,st=!ct&&s==="scroll",ot=ct?nt!==null?nt+"Capture":null:nt;ct=[];for(var ht=et,dt;ht!==null;){dt=ht;var ft=dt.stateNode;if(dt.tag===5&&ft!==null&&(dt=ft,ot!==null&&(ft=Kb(ht,ot),ft!=null&&ct.push(tf(ht,ft,dt)))),st)break;ht=ht.return}0<ct.length&&(nt=new it(nt,at,null,o,tt),rt.push({event:nt,listeners:ct}))}}if(!(a&7)){e:{if(nt=s==="mouseover"||s==="pointerover",it=s==="mouseout"||s==="pointerout",nt&&o!==wb&&(at=o.relatedTarget||o.fromElement)&&(Wc(at)||at[uf]))break e;if((it||nt)&&(nt=tt.window===tt?tt:(nt=tt.ownerDocument)?nt.defaultView||nt.parentWindow:window,it?(at=o.relatedTarget||o.toElement,it=et,at=at?Wc(at):null,at!==null&&(st=Vb(at),at!==st||at.tag!==5&&at.tag!==6)&&(at=null)):(it=null,at=et),it!==at)){if(ct=Bd,ft="onMouseLeave",ot="onMouseEnter",ht="mouse",(s==="pointerout"||s==="pointerover")&&(ct=Td,ft="onPointerLeave",ot="onPointerEnter",ht="pointer"),st=it==null?nt:ue(it),dt=at==null?nt:ue(at),nt=new ct(ft,ht+"leave",it,o,tt),nt.target=st,nt.relatedTarget=dt,ft=null,Wc(tt)===et&&(ct=new ct(ot,ht+"enter",at,o,tt),ct.target=dt,ct.relatedTarget=st,ft=ct),st=ft,it&&at)t:{for(ct=it,ot=at,ht=0,dt=ct;dt;dt=vf(dt))ht++;for(dt=0,ft=ot;ft;ft=vf(ft))dt++;for(;0<ht-dt;)ct=vf(ct),ht--;for(;0<dt-ht;)ot=vf(ot),dt--;for(;ht--;){if(ct===ot||ot!==null&&ct===ot.alternate)break t;ct=vf(ct),ot=vf(ot)}ct=null}else ct=null;it!==null&&wf(rt,nt,it,ct,!1),at!==null&&st!==null&&wf(rt,st,at,ct,!0)}}e:{if(nt=et?ue(et):window,it=nt.nodeName&&nt.nodeName.toLowerCase(),it==="select"||it==="input"&&nt.type==="file")var mt=ve;else if(me(nt))if(we)mt=Fe;else{mt=De;var gt=Ce}else(it=nt.nodeName)&&it.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(mt=Ee);if(mt&&(mt=mt(s,et))){ne(rt,mt,o,tt);break e}gt&&gt(s,nt,et),s==="focusout"&&(gt=nt._wrapperState)&&gt.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(gt=et?ue(et):window,s){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=et,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rt,o,tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rt,o,tt)}var vt;if(ae)e:{switch(s){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie?ge(s,o)&&(yt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(de&&o.locale!=="ko"&&(ie||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie&&(vt=nd()):(kd=tt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),gt=oe(et,yt),0<gt.length&&(yt=new Ld(yt,s,null,o,tt),rt.push({event:yt,listeners:gt}),vt?yt.data=vt:(vt=he(o),vt!==null&&(yt.data=vt)))),(vt=ce?je(s,o):ke(s,o))&&(et=oe(et,"onBeforeInput"),0<et.length&&(tt=new Ld("onBeforeInput","beforeinput",null,o,tt),rt.push({event:tt,listeners:et}),tt.data=vt))}se(rt,a)})}function tf(s,a,o){return{instance:s,listener:a,currentTarget:o}}function oe(s,a){for(var o=a+"Capture",c=[];s!==null;){var d=s,b=d.stateNode;d.tag===5&&b!==null&&(d=b,b=Kb(s,o),b!=null&&c.unshift(tf(s,b,d)),b=Kb(s,a),b!=null&&c.push(tf(s,b,d))),s=s.return}return c}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,a,o,c,d){for(var b=a._reactName,$=[];o!==null&&o!==c;){var j=o,_e=j.alternate,et=j.stateNode;if(_e!==null&&_e===c)break;j.tag===5&&et!==null&&(j=et,d?(_e=Kb(o,b),_e!=null&&$.unshift(tf(o,_e,j))):d||(_e=Kb(o,b),_e!=null&&$.push(tf(o,_e,j)))),o=o.return}$.length!==0&&s.push({event:a,listeners:$})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,a,o){if(a=zf(a),zf(s)!==a&&o)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,a){var o=a,c=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){s.removeChild(d),bd(a);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);bd(a)}function Lf(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return s;a--}else o==="/$"&&a++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var a=s[Of];if(a)return a;for(var o=s.parentNode;o;){if(a=o[uf]||o[Of]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(s=Mf(s);s!==null;){if(o=s[Of])return o;s=Mf(s)}return a}s=o,o=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p$2(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,a){Tf++,Sf[Tf]=s.current,s.current=a}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,a){var o=s.type.contextTypes;if(!o)return Vf;var c=s.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===a)return c.__reactInternalMemoizedMaskedChildContext;var d={},b;for(b in o)d[b]=a[b];return c&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=d),d}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H)}function ag(s,a,o){if(H.current!==Vf)throw Error(p$2(168));G(H,a),G(Wf,o)}function bg(s,a,o){var c=s.stateNode;if(a=a.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var d in c)if(!(d in a))throw Error(p$2(108,Ra(s)||"Unknown",d));return A$1({},o,c)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,a,o){var c=s.stateNode;if(!c)throw Error(p$2(169));o?(s=bg(s,a,Xf),c.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H),G(H,s)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,a=C$1;try{var o=eg;for(C$1=1;s<o.length;s++){var c=o[s];do c=c(!0);while(c!==null)}eg=null,fg=!1}catch(d){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),d}finally{C$1=a,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,a){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=a}function ug(s,a,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var c=rg;s=sg;var d=32-oc(c)-1;c&=~(1<<d),o+=1;var b=32-oc(a)+d;if(30<b){var $=d-d%5;b=(c&(1<<$)-1).toString(32),c>>=$,d-=$,rg=1<<32-oc(a)+d|o<<d|c,sg=b+s}else rg=1<<b|o<<d|c,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(s,a){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=a,o.return=s,a=s.deletions,a===null?(s.deletions=[o],s.flags|=16):a.push(o)}function Cg(s,a){switch(s.tag){case 5:var o=s.type;return a=a.nodeType!==1||o.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,xg=s,yg=Lf(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,xg=s,yg=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(o=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:a,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=a,o.return=s,s.child=o,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I$1){var a=yg;if(a){var o=a;if(!Cg(s,a)){if(Dg(s))throw Error(p$2(418));a=Lf(o.nextSibling);var c=xg;a&&Cg(s,a)?Ag(c,o):(s.flags=s.flags&-4097|2,I$1=!1,xg=s)}}else{if(Dg(s))throw Error(p$2(418));s.flags=s.flags&-4097|2,I$1=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I$1)return Fg(s),I$1=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Ef(s.type,s.memoizedProps)),a&&(a=yg)){if(Dg(s))throw Hg(),Error(p$2(418));for(;a;)Ag(s,a),a=Lf(a.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p$2(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"){if(a===0){yg=Lf(s.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,a){if(s&&s.defaultProps){a=A$1({},a),s=s.defaultProps;for(var o in s)a[o]===void 0&&(a[o]=s[o]);return a}return a}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(s){var a=Mg.current;E(Mg),s._currentValue=a}function Sg(s,a,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),s===o)break;s=s.return}}function Tg(s,a){Ng=s,Pg=Og=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&a&&(Ug=!0),s.firstContext=null)}function Vg(s){var a=s._currentValue;if(Pg!==s)if(s={context:s,memoizedValue:a,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=s,Ng.dependencies={lanes:0,firstContext:s}}else Og=Og.next=s;return a}var Wg=null;function Xg(s){Wg===null?Wg=[s]:Wg.push(s)}function Yg(s,a,o,c){var d=a.interleaved;return d===null?(o.next=o,Xg(a)):(o.next=d.next,d.next=o),a.interleaved=o,Zg(s,c)}function Zg(s,a){s.lanes|=a;var o=s.alternate;for(o!==null&&(o.lanes|=a),o=s,s=s.return;s!==null;)s.childLanes|=a,o=s.alternate,o!==null&&(o.childLanes|=a),o=s,s=s.return;return o.tag===3?o.stateNode:null}var $g=!1;function ah(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ch(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function dh(s,a,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,K&2){var d=c.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a,Zg(s,o)}return d=c.interleaved,d===null?(a.next=a,Xg(c)):(a.next=d.next,d.next=a),c.interleaved=a,Zg(s,o)}function eh(s,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194240)!==0)){var c=a.lanes;c&=s.pendingLanes,o|=c,a.lanes=o,Cc(s,o)}}function fh(s,a){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,b=null;if(o=o.firstBaseUpdate,o!==null){do{var $={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};b===null?d=b=$:b=b.next=$,o=o.next}while(o!==null);b===null?d=b=a:b=b.next=a}else d=b=a;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:b,shared:c.shared,effects:c.effects},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=a:s.next=a,o.lastBaseUpdate=a}function gh(s,a,o,c){var d=s.updateQueue;$g=!1;var b=d.firstBaseUpdate,$=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var _e=j,et=_e.next;_e.next=null,$===null?b=et:$.next=et,$=_e;var tt=s.alternate;tt!==null&&(tt=tt.updateQueue,j=tt.lastBaseUpdate,j!==$&&(j===null?tt.firstBaseUpdate=et:j.next=et,tt.lastBaseUpdate=_e))}if(b!==null){var rt=d.baseState;$=0,tt=et=_e=null,j=b;do{var nt=j.lane,it=j.eventTime;if((c&nt)===nt){tt!==null&&(tt=tt.next={eventTime:it,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var at=s,ct=j;switch(nt=a,it=o,ct.tag){case 1:if(at=ct.payload,typeof at=="function"){rt=at.call(it,rt,nt);break e}rt=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ct.payload,nt=typeof at=="function"?at.call(it,rt,nt):at,nt==null)break e;rt=A$1({},rt,nt);break e;case 2:$g=!0}}j.callback!==null&&j.lane!==0&&(s.flags|=64,nt=d.effects,nt===null?d.effects=[j]:nt.push(j))}else it={eventTime:it,lane:nt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},tt===null?(et=tt=it,_e=rt):tt=tt.next=it,$|=nt;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;nt=j,j=nt.next,nt.next=null,d.lastBaseUpdate=nt,d.shared.pending=null}}while(1);if(tt===null&&(_e=rt),d.baseState=_e,d.firstBaseUpdate=et,d.lastBaseUpdate=tt,a=d.shared.interleaved,a!==null){d=a;do $|=d.lane,d=d.next;while(d!==a)}else b===null&&(d.shared.lanes=0);hh|=$,s.lanes=$,s.memoizedState=rt}}function ih(s,a,o){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var c=s[a],d=c.callback;if(d!==null){if(c.callback=null,c=o,typeof d!="function")throw Error(p$2(191,d));d.call(c)}}}var jh=new aa.Component().refs;function kh(s,a,o,c){a=s.memoizedState,o=o(c,a),o=o==null?a:A$1({},a,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var nh={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,a,o){s=s._reactInternals;var c=L(),d=lh(s),b=ch(c,d);b.payload=a,o!=null&&(b.callback=o),a=dh(s,b,d),a!==null&&(mh(a,s,d,c),eh(a,s,d))},enqueueReplaceState:function(s,a,o){s=s._reactInternals;var c=L(),d=lh(s),b=ch(c,d);b.tag=1,b.payload=a,o!=null&&(b.callback=o),a=dh(s,b,d),a!==null&&(mh(a,s,d,c),eh(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var o=L(),c=lh(s),d=ch(o,c);d.tag=2,a!=null&&(d.callback=a),a=dh(s,d,c),a!==null&&(mh(a,s,c,o),eh(a,s,c))}};function oh(s,a,o,c,d,b,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,b,$):a.prototype&&a.prototype.isPureReactComponent?!Ie(o,c)||!Ie(d,b):!0}function ph(s,a,o){var c=!1,d=Vf,b=a.contextType;return typeof b=="object"&&b!==null?b=Vg(b):(d=Zf(a)?Xf:H.current,c=a.contextTypes,b=(c=c!=null)?Yf(s,d):Vf),a=new a(o,b),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=nh,s.stateNode=a,a._reactInternals=s,c&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=d,s.__reactInternalMemoizedMaskedChildContext=b),a}function qh(s,a,o,c){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,c),a.state!==s&&nh.enqueueReplaceState(a,a.state,null)}function rh(s,a,o,c){var d=s.stateNode;d.props=o,d.state=s.memoizedState,d.refs=jh,ah(s);var b=a.contextType;typeof b=="object"&&b!==null?d.context=Vg(b):(b=Zf(a)?Xf:H.current,d.context=Yf(s,b)),d.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(kh(s,a,b,o),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(a=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),a!==d.state&&nh.enqueueReplaceState(d,d.state,null),gh(s,o,d,c),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308)}function sh(s,a,o){if(s=o.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p$2(309));var c=o.stateNode}if(!c)throw Error(p$2(147,s));var d=c,b=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function($){var j=d.refs;j===jh&&(j=d.refs={}),$===null?delete j[b]:j[b]=$},a._stringRef=b,a)}if(typeof s!="string")throw Error(p$2(284));if(!o._owner)throw Error(p$2(290,s))}return s}function th(s,a){throw s=Object.prototype.toString.call(a),Error(p$2(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function uh(s){var a=s._init;return a(s._payload)}function vh$1(s){function a(ot,ht){if(s){var dt=ot.deletions;dt===null?(ot.deletions=[ht],ot.flags|=16):dt.push(ht)}}function o(ot,ht){if(!s)return null;for(;ht!==null;)a(ot,ht),ht=ht.sibling;return null}function c(ot,ht){for(ot=new Map;ht!==null;)ht.key!==null?ot.set(ht.key,ht):ot.set(ht.index,ht),ht=ht.sibling;return ot}function d(ot,ht){return ot=wh(ot,ht),ot.index=0,ot.sibling=null,ot}function b(ot,ht,dt){return ot.index=dt,s?(dt=ot.alternate,dt!==null?(dt=dt.index,dt<ht?(ot.flags|=2,ht):dt):(ot.flags|=2,ht)):(ot.flags|=1048576,ht)}function $(ot){return s&&ot.alternate===null&&(ot.flags|=2),ot}function j(ot,ht,dt,ft){return ht===null||ht.tag!==6?(ht=xh(dt,ot.mode,ft),ht.return=ot,ht):(ht=d(ht,dt),ht.return=ot,ht)}function _e(ot,ht,dt,ft){var mt=dt.type;return mt===ya?tt(ot,ht,dt.props.children,ft,dt.key):ht!==null&&(ht.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===ht.type)?(ft=d(ht,dt.props),ft.ref=sh(ot,ht,dt),ft.return=ot,ft):(ft=yh(dt.type,dt.key,dt.props,null,ot.mode,ft),ft.ref=sh(ot,ht,dt),ft.return=ot,ft)}function et(ot,ht,dt,ft){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==dt.containerInfo||ht.stateNode.implementation!==dt.implementation?(ht=zh(dt,ot.mode,ft),ht.return=ot,ht):(ht=d(ht,dt.children||[]),ht.return=ot,ht)}function tt(ot,ht,dt,ft,mt){return ht===null||ht.tag!==7?(ht=Ah(dt,ot.mode,ft,mt),ht.return=ot,ht):(ht=d(ht,dt),ht.return=ot,ht)}function rt(ot,ht,dt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=xh(""+ht,ot.mode,dt),ht.return=ot,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return dt=yh(ht.type,ht.key,ht.props,null,ot.mode,dt),dt.ref=sh(ot,null,ht),dt.return=ot,dt;case wa:return ht=zh(ht,ot.mode,dt),ht.return=ot,ht;case Ha:var ft=ht._init;return rt(ot,ft(ht._payload),dt)}if(eb(ht)||Ka(ht))return ht=Ah(ht,ot.mode,dt,null),ht.return=ot,ht;th(ot,ht)}return null}function nt(ot,ht,dt,ft){var mt=ht!==null?ht.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return mt!==null?null:j(ot,ht,""+dt,ft);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return dt.key===mt?_e(ot,ht,dt,ft):null;case wa:return dt.key===mt?et(ot,ht,dt,ft):null;case Ha:return mt=dt._init,nt(ot,ht,mt(dt._payload),ft)}if(eb(dt)||Ka(dt))return mt!==null?null:tt(ot,ht,dt,ft,null);th(ot,dt)}return null}function it(ot,ht,dt,ft,mt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ot=ot.get(dt)||null,j(ht,ot,""+ft,mt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ot=ot.get(ft.key===null?dt:ft.key)||null,_e(ht,ot,ft,mt);case wa:return ot=ot.get(ft.key===null?dt:ft.key)||null,et(ht,ot,ft,mt);case Ha:var gt=ft._init;return it(ot,ht,dt,gt(ft._payload),mt)}if(eb(ft)||Ka(ft))return ot=ot.get(dt)||null,tt(ht,ot,ft,mt,null);th(ht,ft)}return null}function at(ot,ht,dt,ft){for(var mt=null,gt=null,vt=ht,yt=ht=0,Et=null;vt!==null&&yt<dt.length;yt++){vt.index>yt?(Et=vt,vt=null):Et=vt.sibling;var St=nt(ot,vt,dt[yt],ft);if(St===null){vt===null&&(vt=Et);break}s&&vt&&St.alternate===null&&a(ot,vt),ht=b(St,ht,yt),gt===null?mt=St:gt.sibling=St,gt=St,vt=Et}if(yt===dt.length)return o(ot,vt),I$1&&tg(ot,yt),mt;if(vt===null){for(;yt<dt.length;yt++)vt=rt(ot,dt[yt],ft),vt!==null&&(ht=b(vt,ht,yt),gt===null?mt=vt:gt.sibling=vt,gt=vt);return I$1&&tg(ot,yt),mt}for(vt=c(ot,vt);yt<dt.length;yt++)Et=it(vt,ot,yt,dt[yt],ft),Et!==null&&(s&&Et.alternate!==null&&vt.delete(Et.key===null?yt:Et.key),ht=b(Et,ht,yt),gt===null?mt=Et:gt.sibling=Et,gt=Et);return s&&vt.forEach(function(Ct){return a(ot,Ct)}),I$1&&tg(ot,yt),mt}function ct(ot,ht,dt,ft){var mt=Ka(dt);if(typeof mt!="function")throw Error(p$2(150));if(dt=mt.call(dt),dt==null)throw Error(p$2(151));for(var gt=mt=null,vt=ht,yt=ht=0,Et=null,St=dt.next();vt!==null&&!St.done;yt++,St=dt.next()){vt.index>yt?(Et=vt,vt=null):Et=vt.sibling;var Ct=nt(ot,vt,St.value,ft);if(Ct===null){vt===null&&(vt=Et);break}s&&vt&&Ct.alternate===null&&a(ot,vt),ht=b(Ct,ht,yt),gt===null?mt=Ct:gt.sibling=Ct,gt=Ct,vt=Et}if(St.done)return o(ot,vt),I$1&&tg(ot,yt),mt;if(vt===null){for(;!St.done;yt++,St=dt.next())St=rt(ot,St.value,ft),St!==null&&(ht=b(St,ht,yt),gt===null?mt=St:gt.sibling=St,gt=St);return I$1&&tg(ot,yt),mt}for(vt=c(ot,vt);!St.done;yt++,St=dt.next())St=it(vt,ot,yt,St.value,ft),St!==null&&(s&&St.alternate!==null&&vt.delete(St.key===null?yt:St.key),ht=b(St,ht,yt),gt===null?mt=St:gt.sibling=St,gt=St);return s&&vt.forEach(function(wt){return a(ot,wt)}),I$1&&tg(ot,yt),mt}function st(ot,ht,dt,ft){if(typeof dt=="object"&&dt!==null&&dt.type===ya&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:e:{for(var mt=dt.key,gt=ht;gt!==null;){if(gt.key===mt){if(mt=dt.type,mt===ya){if(gt.tag===7){o(ot,gt.sibling),ht=d(gt,dt.props.children),ht.return=ot,ot=ht;break e}}else if(gt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===gt.type){o(ot,gt.sibling),ht=d(gt,dt.props),ht.ref=sh(ot,gt,dt),ht.return=ot,ot=ht;break e}o(ot,gt);break}else a(ot,gt);gt=gt.sibling}dt.type===ya?(ht=Ah(dt.props.children,ot.mode,ft,dt.key),ht.return=ot,ot=ht):(ft=yh(dt.type,dt.key,dt.props,null,ot.mode,ft),ft.ref=sh(ot,ht,dt),ft.return=ot,ot=ft)}return $(ot);case wa:e:{for(gt=dt.key;ht!==null;){if(ht.key===gt)if(ht.tag===4&&ht.stateNode.containerInfo===dt.containerInfo&&ht.stateNode.implementation===dt.implementation){o(ot,ht.sibling),ht=d(ht,dt.children||[]),ht.return=ot,ot=ht;break e}else{o(ot,ht);break}else a(ot,ht);ht=ht.sibling}ht=zh(dt,ot.mode,ft),ht.return=ot,ot=ht}return $(ot);case Ha:return gt=dt._init,st(ot,ht,gt(dt._payload),ft)}if(eb(dt))return at(ot,ht,dt,ft);if(Ka(dt))return ct(ot,ht,dt,ft);th(ot,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,ht!==null&&ht.tag===6?(o(ot,ht.sibling),ht=d(ht,dt),ht.return=ot,ot=ht):(o(ot,ht),ht=xh(dt,ot.mode,ft),ht.return=ot,ot=ht),$(ot)):o(ot,ht)}return st}var Bh=vh$1(!0),Ch=vh$1(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(s){if(s===Dh)throw Error(p$2(174));return s}function Ih(s,a){switch(G(Gh,a),G(Fh,s),G(Eh,Dh),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lb(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=lb(a,s)}E(Eh),G(Eh,a)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(s){Hh(Gh.current);var a=Hh(Eh.current),o=lb(a,s.type);a!==o&&(G(Fh,s),G(Eh,o))}function Lh(s){Fh.current===s&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(s){for(var a=s;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Nh=[];function Oh(){for(var s=0;s<Nh.length;s++)Nh[s]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(s,a){if(a===null)return!1;for(var o=0;o<a.length&&o<s.length;o++)if(!He(s[o],a[o]))return!1;return!0}function Xh(s,a,o,c,d,b){if(Rh=b,N=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ph.current=s===null||s.memoizedState===null?Yh:Zh,s=o(c,d),Th){b=0;do{if(Th=!1,Uh=0,25<=b)throw Error(p$2(301));b+=1,P=O=null,a.updateQueue=null,Ph.current=$h,s=o(c,d)}while(Th)}if(Ph.current=ai,a=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,a)throw Error(p$2(300));return s}function bi(){var s=Uh!==0;return Uh=0,s}function ci(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=s:P=P.next=s,P}function di(){if(O===null){var s=N.alternate;s=s!==null?s.memoizedState:null}else s=O.next;var a=P===null?N.memoizedState:P.next;if(a!==null)P=a,O=s;else{if(s===null)throw Error(p$2(310));O=s,s={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=s:P=P.next=s}return P}function ei(s,a){return typeof a=="function"?a(s):a}function fi(s){var a=di(),o=a.queue;if(o===null)throw Error(p$2(311));o.lastRenderedReducer=s;var c=O,d=c.baseQueue,b=o.pending;if(b!==null){if(d!==null){var $=d.next;d.next=b.next,b.next=$}c.baseQueue=d=b,o.pending=null}if(d!==null){b=d.next,c=c.baseState;var j=$=null,_e=null,et=b;do{var tt=et.lane;if((Rh&tt)===tt)_e!==null&&(_e=_e.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),c=et.hasEagerState?et.eagerState:s(c,et.action);else{var rt={lane:tt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};_e===null?(j=_e=rt,$=c):_e=_e.next=rt,N.lanes|=tt,hh|=tt}et=et.next}while(et!==null&&et!==b);_e===null?$=c:_e.next=j,He(c,a.memoizedState)||(Ug=!0),a.memoizedState=c,a.baseState=$,a.baseQueue=_e,o.lastRenderedState=c}if(s=o.interleaved,s!==null){d=s;do b=d.lane,N.lanes|=b,hh|=b,d=d.next;while(d!==s)}else d===null&&(o.lanes=0);return[a.memoizedState,o.dispatch]}function gi(s){var a=di(),o=a.queue;if(o===null)throw Error(p$2(311));o.lastRenderedReducer=s;var c=o.dispatch,d=o.pending,b=a.memoizedState;if(d!==null){o.pending=null;var $=d=d.next;do b=s(b,$.action),$=$.next;while($!==d);He(b,a.memoizedState)||(Ug=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),o.lastRenderedState=b}return[b,c]}function hi(){}function ii(s,a){var o=N,c=di(),d=a(),b=!He(c.memoizedState,d);if(b&&(c.memoizedState=d,Ug=!0),c=c.queue,ji(ki.bind(null,o,c,s),[s]),c.getSnapshot!==a||b||P!==null&&P.memoizedState.tag&1){if(o.flags|=2048,li(9,mi.bind(null,o,c,d,a),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni(o,a,d)}return d}function ni(s,a,o){s.flags|=16384,s={getSnapshot:a,value:o},a=N.updateQueue,a===null?(a={lastEffect:null,stores:null},N.updateQueue=a,a.stores=[s]):(o=a.stores,o===null?a.stores=[s]:o.push(s))}function mi(s,a,o,c){a.value=o,a.getSnapshot=c,oi(a)&&pi(s)}function ki(s,a,o){return o(function(){oi(a)&&pi(s)})}function oi(s){var a=s.getSnapshot;s=s.value;try{var o=a();return!He(s,o)}catch{return!0}}function pi(s){var a=Zg(s,1);a!==null&&mh(a,s,1,-1)}function qi(s){var a=ci();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:s},a.queue=s,s=s.dispatch=ri.bind(null,N,s),[a.memoizedState,s]}function li(s,a,o,c){return s={tag:s,create:a,destroy:o,deps:c,next:null},a=N.updateQueue,a===null?(a={lastEffect:null,stores:null},N.updateQueue=a,a.lastEffect=s.next=s):(o=a.lastEffect,o===null?a.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,a.lastEffect=s)),s}function si(){return di().memoizedState}function ti(s,a,o,c){var d=ci();N.flags|=s,d.memoizedState=li(1|a,o,void 0,c===void 0?null:c)}function ui(s,a,o,c){var d=di();c=c===void 0?null:c;var b=void 0;if(O!==null){var $=O.memoizedState;if(b=$.destroy,c!==null&&Wh(c,$.deps)){d.memoizedState=li(a,o,b,c);return}}N.flags|=s,d.memoizedState=li(1|a,o,b,c)}function vi(s,a){return ti(8390656,8,s,a)}function ji(s,a){return ui(2048,8,s,a)}function wi(s,a){return ui(4,2,s,a)}function xi(s,a){return ui(4,4,s,a)}function yi(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function zi(s,a,o){return o=o!=null?o.concat([s]):null,ui(4,4,yi.bind(null,a,s),o)}function Ai(){}function Bi(s,a){var o=di();a=a===void 0?null:a;var c=o.memoizedState;return c!==null&&a!==null&&Wh(a,c[1])?c[0]:(o.memoizedState=[s,a],s)}function Ci(s,a){var o=di();a=a===void 0?null:a;var c=o.memoizedState;return c!==null&&a!==null&&Wh(a,c[1])?c[0]:(s=s(),o.memoizedState=[s,a],s)}function Di(s,a,o){return Rh&21?(He(o,a)||(o=yc(),N.lanes|=o,hh|=o,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,Ug=!0),s.memoizedState=o)}function Ei(s,a){var o=C$1;C$1=o!==0&&4>o?o:4,s(!0);var c=Qh.transition;Qh.transition={};try{s(!1),a()}finally{C$1=o,Qh.transition=c}}function Fi(){return di().memoizedState}function Gi(s,a,o){var c=lh(s);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Hi(s))Ii(a,o);else if(o=Yg(s,a,o,c),o!==null){var d=L();mh(o,s,c,d),Ji(o,a,c)}}function ri(s,a,o){var c=lh(s),d={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hi(s))Ii(a,d);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var $=a.lastRenderedState,j=b($,o);if(d.hasEagerState=!0,d.eagerState=j,He(j,$)){var _e=a.interleaved;_e===null?(d.next=d,Xg(a)):(d.next=_e.next,_e.next=d),a.interleaved=d;return}}catch{}finally{}o=Yg(s,a,d,c),o!==null&&(d=L(),mh(o,s,c,d),Ji(o,a,c))}}function Hi(s){var a=s.alternate;return s===N||a!==null&&a===N}function Ii(s,a){Th=Sh=!0;var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}function Ji(s,a,o){if(o&4194240){var c=a.lanes;c&=s.pendingLanes,o|=c,a.lanes=o,Cc(s,o)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(s,a){return ci().memoizedState=[s,a===void 0?null:a],s},useContext:Vg,useEffect:vi,useImperativeHandle:function(s,a,o){return o=o!=null?o.concat([s]):null,ti(4194308,4,yi.bind(null,a,s),o)},useLayoutEffect:function(s,a){return ti(4194308,4,s,a)},useInsertionEffect:function(s,a){return ti(4,2,s,a)},useMemo:function(s,a){var o=ci();return a=a===void 0?null:a,s=s(),o.memoizedState=[s,a],s},useReducer:function(s,a,o){var c=ci();return a=o!==void 0?o(a):a,c.memoizedState=c.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},c.queue=s,s=s.dispatch=Gi.bind(null,N,s),[c.memoizedState,s]},useRef:function(s){var a=ci();return s={current:s},a.memoizedState=s},useState:qi,useDebugValue:Ai,useDeferredValue:function(s){return ci().memoizedState=s},useTransition:function(){var s=qi(!1),a=s[0];return s=Ei.bind(null,s[1]),ci().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,o){var c=N,d=ci();if(I$1){if(o===void 0)throw Error(p$2(407));o=o()}else{if(o=a(),R===null)throw Error(p$2(349));Rh&30||ni(c,a,o)}d.memoizedState=o;var b={value:o,getSnapshot:a};return d.queue=b,vi(ki.bind(null,c,b,s),[s]),c.flags|=2048,li(9,mi.bind(null,c,b,o,a),void 0,null),o},useId:function(){var s=ci(),a=R.identifierPrefix;if(I$1){var o=sg,c=rg;o=(c&~(1<<32-oc(c)-1)).toString(32)+o,a=":"+a+"R"+o,o=Uh++,0<o&&(a+="H"+o.toString(32)),a+=":"}else o=Vh++,a=":"+a+"r"+o.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(s){var a=di();return Di(a,O.memoizedState,s)},useTransition:function(){var s=fi(ei)[0],a=di().memoizedState;return[s,a]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(s){var a=di();return O===null?a.memoizedState=s:Di(a,O.memoizedState,s)},useTransition:function(){var s=gi(ei)[0],a=di().memoizedState;return[s,a]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(s,a){try{var o="",c=a;do o+=Pa(c),c=c.return;while(c);var d=o}catch(b){d=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:a,stack:d,digest:null}}function Li(s,a,o){return{value:s,source:null,stack:o??null,digest:a??null}}function Mi(s,a){try{console.error(a.value)}catch(o){setTimeout(function(){throw o})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(s,a,o){o=ch(-1,o),o.tag=3,o.payload={element:null};var c=a.value;return o.callback=function(){Pi||(Pi=!0,Qi=c),Mi(s,a)},o}function Ri(s,a,o){o=ch(-1,o),o.tag=3;var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var d=a.value;o.payload=function(){return c(d)},o.callback=function(){Mi(s,a)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(o.callback=function(){Mi(s,a),typeof c!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var $=a.stack;this.componentDidCatch(a.value,{componentStack:$!==null?$:""})}),o}function Ti(s,a,o){var c=s.pingCache;if(c===null){c=s.pingCache=new Ni;var d=new Set;c.set(a,d)}else d=c.get(a),d===void 0&&(d=new Set,c.set(a,d));d.has(o)||(d.add(o),s=Ui.bind(null,s,a,o),a.then(s,s))}function Vi(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Wi(s,a,o,c,d){return s.mode&1?(s.flags|=65536,s.lanes=d,s):(s===a?s.flags|=65536:(s.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(a=ch(-1,1),a.tag=2,dh(o,a,1))),o.lanes|=1),s)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(s,a,o,c){a.child=s===null?Ch(a,null,o,c):Bh(a,s.child,o,c)}function Zi(s,a,o,c,d){o=o.render;var b=a.ref;return Tg(a,d),c=Xh(s,a,o,c,b,d),o=bi(),s!==null&&!Ug?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~d,$i(s,a,d)):(I$1&&o&&vg(a),a.flags|=1,Yi(s,a,c,d),a.child)}function aj(s,a,o,c,d){if(s===null){var b=o.type;return typeof b=="function"&&!bj(b)&&b.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(a.tag=15,a.type=b,cj(s,a,b,c,d)):(s=yh(o.type,null,c,a,a.mode,d),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!(s.lanes&d)){var $=b.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o($,c)&&s.ref===a.ref)return $i(s,a,d)}return a.flags|=1,s=wh(b,c),s.ref=a.ref,s.return=a,a.child=s}function cj(s,a,o,c,d){if(s!==null){var b=s.memoizedProps;if(Ie(b,c)&&s.ref===a.ref)if(Ug=!1,a.pendingProps=c=b,(s.lanes&d)!==0)s.flags&131072&&(Ug=!0);else return a.lanes=s.lanes,$i(s,a,d)}return dj(s,a,o,c,d)}function ej(s,a,o){var c=a.pendingProps,d=c.children,b=s!==null?s.memoizedState:null;if(c.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=o;else{if(!(o&1073741824))return s=b!==null?b.baseLanes|o:o,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,G(fj,gj),gj|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=b!==null?b.baseLanes:o,G(fj,gj),gj|=c}else b!==null?(c=b.baseLanes|o,a.memoizedState=null):c=o,G(fj,gj),gj|=c;return Yi(s,a,d,o),a.child}function hj(s,a){var o=a.ref;(s===null&&o!==null||s!==null&&s.ref!==o)&&(a.flags|=512,a.flags|=2097152)}function dj(s,a,o,c,d){var b=Zf(o)?Xf:H.current;return b=Yf(a,b),Tg(a,d),o=Xh(s,a,o,c,b,d),c=bi(),s!==null&&!Ug?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~d,$i(s,a,d)):(I$1&&c&&vg(a),a.flags|=1,Yi(s,a,o,d),a.child)}function ij(s,a,o,c,d){if(Zf(o)){var b=!0;cg(a)}else b=!1;if(Tg(a,d),a.stateNode===null)jj(s,a),ph(a,o,c),rh(a,o,c,d),c=!0;else if(s===null){var $=a.stateNode,j=a.memoizedProps;$.props=j;var _e=$.context,et=o.contextType;typeof et=="object"&&et!==null?et=Vg(et):(et=Zf(o)?Xf:H.current,et=Yf(a,et));var tt=o.getDerivedStateFromProps,rt=typeof tt=="function"||typeof $.getSnapshotBeforeUpdate=="function";rt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(j!==c||_e!==et)&&qh(a,$,c,et),$g=!1;var nt=a.memoizedState;$.state=nt,gh(a,c,$,d),_e=a.memoizedState,j!==c||nt!==_e||Wf.current||$g?(typeof tt=="function"&&(kh(a,o,tt,c),_e=a.memoizedState),(j=$g||oh(a,o,j,c,nt,_e,et))?(rt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(a.flags|=4194308)):(typeof $.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=_e),$.props=c,$.state=_e,$.context=et,c=j):(typeof $.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{$=a.stateNode,bh(s,a),j=a.memoizedProps,et=a.type===a.elementType?j:Lg(a.type,j),$.props=et,rt=a.pendingProps,nt=$.context,_e=o.contextType,typeof _e=="object"&&_e!==null?_e=Vg(_e):(_e=Zf(o)?Xf:H.current,_e=Yf(a,_e));var it=o.getDerivedStateFromProps;(tt=typeof it=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(j!==rt||nt!==_e)&&qh(a,$,c,_e),$g=!1,nt=a.memoizedState,$.state=nt,gh(a,c,$,d);var at=a.memoizedState;j!==rt||nt!==at||Wf.current||$g?(typeof it=="function"&&(kh(a,o,it,c),at=a.memoizedState),(et=$g||oh(a,o,et,c,nt,at,_e)||!1)?(tt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(c,at,_e),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(c,at,_e)),typeof $.componentDidUpdate=="function"&&(a.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof $.componentDidUpdate!="function"||j===s.memoizedProps&&nt===s.memoizedState||(a.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&nt===s.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=at),$.props=c,$.state=at,$.context=_e,c=et):(typeof $.componentDidUpdate!="function"||j===s.memoizedProps&&nt===s.memoizedState||(a.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&nt===s.memoizedState||(a.flags|=1024),c=!1)}return kj(s,a,o,c,b,d)}function kj(s,a,o,c,d,b){hj(s,a);var $=(a.flags&128)!==0;if(!c&&!$)return d&&dg(a,o,!1),$i(s,a,b);c=a.stateNode,Xi.current=a;var j=$&&typeof o.getDerivedStateFromError!="function"?null:c.render();return a.flags|=1,s!==null&&$?(a.child=Bh(a,s.child,null,b),a.child=Bh(a,null,j,b)):Yi(s,a,j,b),a.memoizedState=c.state,d&&dg(a,o,!0),a.child}function lj(s){var a=s.stateNode;a.pendingContext?ag(s,a.pendingContext,a.pendingContext!==a.context):a.context&&ag(s,a.context,!1),Ih(s,a.containerInfo)}function mj(s,a,o,c,d){return Ig(),Jg(d),a.flags|=256,Yi(s,a,o,c),a.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(s){return{baseLanes:s,cachePool:null,transitions:null}}function pj(s,a,o){var c=a.pendingProps,d=M.current,b=!1,$=(a.flags&128)!==0,j;if((j=$)||(j=s!==null&&s.memoizedState===null?!1:(d&2)!==0),j?(b=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(d|=1),G(M,d&1),s===null)return Eg(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(a.mode&1?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):($=c.children,s=c.fallback,b?(c=a.mode,b=a.child,$={mode:"hidden",children:$},!(c&1)&&b!==null?(b.childLanes=0,b.pendingProps=$):b=qj($,c,0,null),s=Ah(s,c,o,null),b.return=a,s.return=a,b.sibling=s,a.child=b,a.child.memoizedState=oj(o),a.memoizedState=nj,s):rj(a,$));if(d=s.memoizedState,d!==null&&(j=d.dehydrated,j!==null))return sj(s,a,$,c,j,d,o);if(b){b=c.fallback,$=a.mode,d=s.child,j=d.sibling;var _e={mode:"hidden",children:c.children};return!($&1)&&a.child!==d?(c=a.child,c.childLanes=0,c.pendingProps=_e,a.deletions=null):(c=wh(d,_e),c.subtreeFlags=d.subtreeFlags&14680064),j!==null?b=wh(j,b):(b=Ah(b,$,o,null),b.flags|=2),b.return=a,c.return=a,c.sibling=b,a.child=c,c=b,b=a.child,$=s.child.memoizedState,$=$===null?oj(o):{baseLanes:$.baseLanes|o,cachePool:null,transitions:$.transitions},b.memoizedState=$,b.childLanes=s.childLanes&~o,a.memoizedState=nj,c}return b=s.child,s=b.sibling,c=wh(b,{mode:"visible",children:c.children}),!(a.mode&1)&&(c.lanes=o),c.return=a,c.sibling=null,s!==null&&(o=a.deletions,o===null?(a.deletions=[s],a.flags|=16):o.push(s)),a.child=c,a.memoizedState=null,c}function rj(s,a){return a=qj({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function tj(s,a,o,c){return c!==null&&Jg(c),Bh(a,s.child,null,o),s=rj(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function sj(s,a,o,c,d,b,$){if(o)return a.flags&256?(a.flags&=-257,c=Li(Error(p$2(422))),tj(s,a,$,c)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(b=c.fallback,d=a.mode,c=qj({mode:"visible",children:c.children},d,0,null),b=Ah(b,d,$,null),b.flags|=2,c.return=a,b.return=a,c.sibling=b,a.child=c,a.mode&1&&Bh(a,s.child,null,$),a.child.memoizedState=oj($),a.memoizedState=nj,b);if(!(a.mode&1))return tj(s,a,$,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var j=c.dgst;return c=j,b=Error(p$2(419)),c=Li(b,c,void 0),tj(s,a,$,c)}if(j=($&s.childLanes)!==0,Ug||j){if(c=R,c!==null){switch($&-$){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|$)?0:d,d!==0&&d!==b.retryLane&&(b.retryLane=d,Zg(s,d),mh(c,s,d,-1))}return uj(),c=Li(Error(p$2(421))),tj(s,a,$,c)}return d.data==="$?"?(a.flags|=128,a.child=s.child,a=vj.bind(null,s),d._reactRetry=a,null):(s=b.treeContext,yg=Lf(d.nextSibling),xg=a,I$1=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=a),a=rj(a,c.children),a.flags|=4096,a)}function wj(s,a,o){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a),Sg(s.return,a,o)}function xj(s,a,o,c,d){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=d)}function yj(s,a,o){var c=a.pendingProps,d=c.revealOrder,b=c.tail;if(Yi(s,a,c.children,o),c=M.current,c&2)c=c&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wj(s,o,a);else if(s.tag===19)wj(s,o,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}if(G(M,c),!(a.mode&1))a.memoizedState=null;else switch(d){case"forwards":for(o=a.child,d=null;o!==null;)s=o.alternate,s!==null&&Mh(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=a.child,a.child=null):(d=o.sibling,o.sibling=null),xj(a,!1,d,o,b);break;case"backwards":for(o=null,d=a.child,a.child=null;d!==null;){if(s=d.alternate,s!==null&&Mh(s)===null){a.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}xj(a,!0,o,null,b);break;case"together":xj(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jj(s,a){!(a.mode&1)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function $i(s,a,o){if(s!==null&&(a.dependencies=s.dependencies),hh|=a.lanes,!(o&a.childLanes))return null;if(s!==null&&a.child!==s.child)throw Error(p$2(153));if(a.child!==null){for(s=a.child,o=wh(s,s.pendingProps),a.child=o,o.return=a;s.sibling!==null;)s=s.sibling,o=o.sibling=wh(s,s.pendingProps),o.return=a;o.sibling=null}return a.child}function zj(s,a,o){switch(a.tag){case 3:lj(a),Ig();break;case 5:Kh(a);break;case 1:Zf(a.type)&&cg(a);break;case 4:Ih(a,a.stateNode.containerInfo);break;case 10:var c=a.type._context,d=a.memoizedProps.value;G(Mg,c._currentValue),c._currentValue=d;break;case 13:if(c=a.memoizedState,c!==null)return c.dehydrated!==null?(G(M,M.current&1),a.flags|=128,null):o&a.child.childLanes?pj(s,a,o):(G(M,M.current&1),s=$i(s,a,o),s!==null?s.sibling:null);G(M,M.current&1);break;case 19:if(c=(o&a.childLanes)!==0,s.flags&128){if(c)return yj(s,a,o);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(M,M.current),c)break;return null;case 22:case 23:return a.lanes=0,ej(s,a,o)}return $i(s,a,o)}var Aj,Bj,Cj,Dj;Aj=function(s,a){for(var o=a.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Bj=function(){};Cj=function(s,a,o,c){var d=s.memoizedProps;if(d!==c){s=a.stateNode,Hh(Eh.current);var b=null;switch(o){case"input":d=Ya(s,d),c=Ya(s,c),b=[];break;case"select":d=A$1({},d,{value:void 0}),c=A$1({},c,{value:void 0}),b=[];break;case"textarea":d=gb(s,d),c=gb(s,c),b=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(s.onclick=Bf)}ub(o,c);var $;o=null;for(et in d)if(!c.hasOwnProperty(et)&&d.hasOwnProperty(et)&&d[et]!=null)if(et==="style"){var j=d[et];for($ in j)j.hasOwnProperty($)&&(o||(o={}),o[$]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?b||(b=[]):(b=b||[]).push(et,null));for(et in c){var _e=c[et];if(j=d!=null?d[et]:void 0,c.hasOwnProperty(et)&&_e!==j&&(_e!=null||j!=null))if(et==="style")if(j){for($ in j)!j.hasOwnProperty($)||_e&&_e.hasOwnProperty($)||(o||(o={}),o[$]="");for($ in _e)_e.hasOwnProperty($)&&j[$]!==_e[$]&&(o||(o={}),o[$]=_e[$])}else o||(b||(b=[]),b.push(et,o)),o=_e;else et==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,j=j?j.__html:void 0,_e!=null&&j!==_e&&(b=b||[]).push(et,_e)):et==="children"?typeof _e!="string"&&typeof _e!="number"||(b=b||[]).push(et,""+_e):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(ea.hasOwnProperty(et)?(_e!=null&&et==="onScroll"&&D("scroll",s),b||j===_e||(b=[])):(b=b||[]).push(et,_e))}o&&(b=b||[]).push("style",o);var et=b;(a.updateQueue=et)&&(a.flags|=4)}};Dj=function(s,a,o,c){o!==c&&(a.flags|=4)};function Ej(s,a){if(!I$1)switch(s.tailMode){case"hidden":a=s.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function S(s){var a=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(a)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=c,s.childLanes=o,a}function Fj(s,a,o){var c=a.pendingProps;switch(wg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(a),null;case 1:return Zf(a.type)&&$f(),S(a),null;case 3:return c=a.stateNode,Jh(),E(Wf),E(H),Oh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Gg(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(s,a),S(a),null;case 5:Lh(a);var d=Hh(Gh.current);if(o=a.type,s!==null&&a.stateNode!=null)Cj(s,a,o,c,d),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!c){if(a.stateNode===null)throw Error(p$2(166));return S(a),null}if(s=Hh(Eh.current),Gg(a)){c=a.stateNode,o=a.type;var b=a.memoizedProps;switch(c[Of]=a,c[Pf]=b,s=(a.mode&1)!==0,o){case"dialog":D("cancel",c),D("close",c);break;case"iframe":case"object":case"embed":D("load",c);break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],c);break;case"source":D("error",c);break;case"img":case"image":case"link":D("error",c),D("load",c);break;case"details":D("toggle",c);break;case"input":Za(c,b),D("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!b.multiple},D("invalid",c);break;case"textarea":hb(c,b),D("invalid",c)}ub(o,b),d=null;for(var $ in b)if(b.hasOwnProperty($)){var j=b[$];$==="children"?typeof j=="string"?c.textContent!==j&&(b.suppressHydrationWarning!==!0&&Af(c.textContent,j,s),d=["children",j]):typeof j=="number"&&c.textContent!==""+j&&(b.suppressHydrationWarning!==!0&&Af(c.textContent,j,s),d=["children",""+j]):ea.hasOwnProperty($)&&j!=null&&$==="onScroll"&&D("scroll",c)}switch(o){case"input":Va(c),db(c,b,!0);break;case"textarea":Va(c),jb(c);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(c.onclick=Bf)}c=d,a.updateQueue=c,c!==null&&(a.flags|=4)}else{$=d.nodeType===9?d:d.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(o)),s==="http://www.w3.org/1999/xhtml"?o==="script"?(s=$.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof c.is=="string"?s=$.createElement(o,{is:c.is}):(s=$.createElement(o),o==="select"&&($=s,c.multiple?$.multiple=!0:c.size&&($.size=c.size))):s=$.createElementNS(s,o),s[Of]=a,s[Pf]=c,Aj(s,a,!1,!1),a.stateNode=s;e:{switch($=vb(o,c),o){case"dialog":D("cancel",s),D("close",s),d=c;break;case"iframe":case"object":case"embed":D("load",s),d=c;break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],s);d=c;break;case"source":D("error",s),d=c;break;case"img":case"image":case"link":D("error",s),D("load",s),d=c;break;case"details":D("toggle",s),d=c;break;case"input":Za(s,c),d=Ya(s,c),D("invalid",s);break;case"option":d=c;break;case"select":s._wrapperState={wasMultiple:!!c.multiple},d=A$1({},c,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,c),d=gb(s,c),D("invalid",s);break;default:d=c}ub(o,d),j=d;for(b in j)if(j.hasOwnProperty(b)){var _e=j[b];b==="style"?sb(s,_e):b==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&nb(s,_e)):b==="children"?typeof _e=="string"?(o!=="textarea"||_e!=="")&&ob(s,_e):typeof _e=="number"&&ob(s,""+_e):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?_e!=null&&b==="onScroll"&&D("scroll",s):_e!=null&&ta(s,b,_e,$))}switch(o){case"input":Va(s),db(s,c,!1);break;case"textarea":Va(s),jb(s);break;case"option":c.value!=null&&s.setAttribute("value",""+Sa(c.value));break;case"select":s.multiple=!!c.multiple,b=c.value,b!=null?fb(s,!!c.multiple,b,!1):c.defaultValue!=null&&fb(s,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(s.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return S(a),null;case 6:if(s&&a.stateNode!=null)Dj(s,a,s.memoizedProps,c);else{if(typeof c!="string"&&a.stateNode===null)throw Error(p$2(166));if(o=Hh(Gh.current),Hh(Eh.current),Gg(a)){if(c=a.stateNode,o=a.memoizedProps,c[Of]=a,(b=c.nodeValue!==o)&&(s=xg,s!==null))switch(s.tag){case 3:Af(c.nodeValue,o,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(c.nodeValue,o,(s.mode&1)!==0)}b&&(a.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Of]=a,a.stateNode=c}return S(a),null;case 13:if(E(M),c=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&a.mode&1&&!(a.flags&128))Hg(),Ig(),a.flags|=98560,b=!1;else if(b=Gg(a),c!==null&&c.dehydrated!==null){if(s===null){if(!b)throw Error(p$2(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(p$2(317));b[Of]=a}else Ig(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;S(a),b=!1}else zg!==null&&(Gj(zg),zg=null),b=!0;if(!b)return a.flags&65536?a:null}return a.flags&128?(a.lanes=o,a):(c=c!==null,c!==(s!==null&&s.memoizedState!==null)&&c&&(a.child.flags|=8192,a.mode&1&&(s===null||M.current&1?T===0&&(T=3):uj())),a.updateQueue!==null&&(a.flags|=4),S(a),null);case 4:return Jh(),Bj(s,a),s===null&&sf(a.stateNode.containerInfo),S(a),null;case 10:return Rg(a.type._context),S(a),null;case 17:return Zf(a.type)&&$f(),S(a),null;case 19:if(E(M),b=a.memoizedState,b===null)return S(a),null;if(c=(a.flags&128)!==0,$=b.rendering,$===null)if(c)Ej(b,!1);else{if(T!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if($=Mh(s),$!==null){for(a.flags|=128,Ej(b,!1),c=$.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),a.subtreeFlags=0,c=o,o=a.child;o!==null;)b=o,s=c,b.flags&=14680066,$=b.alternate,$===null?(b.childLanes=0,b.lanes=s,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=$.childLanes,b.lanes=$.lanes,b.child=$.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=$.memoizedProps,b.memoizedState=$.memoizedState,b.updateQueue=$.updateQueue,b.type=$.type,s=$.dependencies,b.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o=o.sibling;return G(M,M.current&1|2),a.child}s=s.sibling}b.tail!==null&&B$1()>Hj&&(a.flags|=128,c=!0,Ej(b,!1),a.lanes=4194304)}else{if(!c)if(s=Mh($),s!==null){if(a.flags|=128,c=!0,o=s.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),Ej(b,!0),b.tail===null&&b.tailMode==="hidden"&&!$.alternate&&!I$1)return S(a),null}else 2*B$1()-b.renderingStartTime>Hj&&o!==1073741824&&(a.flags|=128,c=!0,Ej(b,!1),a.lanes=4194304);b.isBackwards?($.sibling=a.child,a.child=$):(o=b.last,o!==null?o.sibling=$:a.child=$,b.last=$)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=B$1(),a.sibling=null,o=M.current,G(M,c?o&1|2:o&1),a):(S(a),null);case 22:case 23:return Ij(),c=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==c&&(a.flags|=8192),c&&a.mode&1?gj&1073741824&&(S(a),a.subtreeFlags&6&&(a.flags|=8192)):S(a),null;case 24:return null;case 25:return null}throw Error(p$2(156,a.tag))}function Jj(s,a){switch(wg(a),a.tag){case 1:return Zf(a.type)&&$f(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Jh(),E(Wf),E(H),Oh(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 5:return Lh(a),null;case 13:if(E(M),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(p$2(340));Ig()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(a.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(s,a){var o=s.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){W(s,a,c)}else o.current=null}function Nj(s,a,o){try{o()}catch(c){W(s,a,c)}}var Oj=!1;function Pj(s,a){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{o.nodeType,b.nodeType}catch{o=null;break e}var $=0,j=-1,_e=-1,et=0,tt=0,rt=s,nt=null;t:for(;;){for(var it;rt!==o||d!==0&&rt.nodeType!==3||(j=$+d),rt!==b||c!==0&&rt.nodeType!==3||(_e=$+c),rt.nodeType===3&&($+=rt.nodeValue.length),(it=rt.firstChild)!==null;)nt=rt,rt=it;for(;;){if(rt===s)break t;if(nt===o&&++et===d&&(j=$),nt===b&&++tt===c&&(_e=$),(it=rt.nextSibling)!==null)break;rt=nt,nt=rt.parentNode}rt=it}o=j===-1||_e===-1?null:{start:j,end:_e}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:s,selectionRange:o},dd=!1,V=a;V!==null;)if(a=V,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,V=s;else for(;V!==null;){a=V;try{var at=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ct=at.memoizedProps,st=at.memoizedState,ot=a.stateNode,ht=ot.getSnapshotBeforeUpdate(a.elementType===a.type?ct:Lg(a.type,ct),st);ot.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var dt=a.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(ft){W(a,a.return,ft)}if(s=a.sibling,s!==null){s.return=a.return,V=s;break}V=a.return}return at=Oj,Oj=!1,at}function Qj(s,a,o){var c=a.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&s)===s){var b=d.destroy;d.destroy=void 0,b!==void 0&&Nj(a,o,b)}d=d.next}while(d!==c)}}function Rj(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&s)===s){var c=o.create;o.destroy=c()}o=o.next}while(o!==a)}}function Sj(s){var a=s.ref;if(a!==null){var o=s.stateNode;switch(s.tag){case 5:s=o;break;default:s=o}typeof a=="function"?a(s):a.current=s}}function Tj(s){var a=s.alternate;a!==null&&(s.alternate=null,Tj(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Of],delete a[Pf],delete a[of],delete a[Qf],delete a[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Uj(s){return s.tag===5||s.tag===3||s.tag===4}function Vj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Uj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Wj(s,a,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?o.nodeType===8?o.parentNode.insertBefore(s,a):o.insertBefore(s,a):(o.nodeType===8?(a=o.parentNode,a.insertBefore(s,o)):(a=o,a.appendChild(s)),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Bf));else if(c!==4&&(s=s.child,s!==null))for(Wj(s,a,o),s=s.sibling;s!==null;)Wj(s,a,o),s=s.sibling}function Xj(s,a,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?o.insertBefore(s,a):o.appendChild(s);else if(c!==4&&(s=s.child,s!==null))for(Xj(s,a,o),s=s.sibling;s!==null;)Xj(s,a,o),s=s.sibling}var X=null,Yj=!1;function Zj(s,a,o){for(o=o.child;o!==null;)ak(s,a,o),o=o.sibling}function ak(s,a,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Mj(o,a);case 6:var c=X,d=Yj;X=null,Zj(s,a,o),X=c,Yj=d,X!==null&&(Yj?(s=X,o=o.stateNode,s.nodeType===8?s.parentNode.removeChild(o):s.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Yj?(s=X,o=o.stateNode,s.nodeType===8?Kf(s.parentNode,o):s.nodeType===1&&Kf(s,o),bd(s)):Kf(X,o.stateNode));break;case 4:c=X,d=Yj,X=o.stateNode.containerInfo,Yj=!0,Zj(s,a,o),X=c,Yj=d;break;case 0:case 11:case 14:case 15:if(!U&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var b=d,$=b.destroy;b=b.tag,$!==void 0&&(b&2||b&4)&&Nj(o,a,$),d=d.next}while(d!==c)}Zj(s,a,o);break;case 1:if(!U&&(Mj(o,a),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(j){W(o,a,j)}Zj(s,a,o);break;case 21:Zj(s,a,o);break;case 22:o.mode&1?(U=(c=U)||o.memoizedState!==null,Zj(s,a,o),U=c):Zj(s,a,o);break;default:Zj(s,a,o)}}function bk(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var o=s.stateNode;o===null&&(o=s.stateNode=new Lj),a.forEach(function(c){var d=ck.bind(null,s,c);o.has(c)||(o.add(c),c.then(d,d))})}}function dk(s,a){var o=a.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];try{var b=s,$=a,j=$;e:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Yj=!1;break e;case 3:X=j.stateNode.containerInfo,Yj=!0;break e;case 4:X=j.stateNode.containerInfo,Yj=!0;break e}j=j.return}if(X===null)throw Error(p$2(160));ak(b,$,d),X=null,Yj=!1;var _e=d.alternate;_e!==null&&(_e.return=null),d.return=null}catch(et){W(d,a,et)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ek(a,s),a=a.sibling}function ek(s,a){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(dk(a,s),fk(s),c&4){try{Qj(3,s,s.return),Rj(3,s)}catch(ct){W(s,s.return,ct)}try{Qj(5,s,s.return)}catch(ct){W(s,s.return,ct)}}break;case 1:dk(a,s),fk(s),c&512&&o!==null&&Mj(o,o.return);break;case 5:if(dk(a,s),fk(s),c&512&&o!==null&&Mj(o,o.return),s.flags&32){var d=s.stateNode;try{ob(d,"")}catch(ct){W(s,s.return,ct)}}if(c&4&&(d=s.stateNode,d!=null)){var b=s.memoizedProps,$=o!==null?o.memoizedProps:b,j=s.type,_e=s.updateQueue;if(s.updateQueue=null,_e!==null)try{j==="input"&&b.type==="radio"&&b.name!=null&&ab(d,b),vb(j,$);var et=vb(j,b);for($=0;$<_e.length;$+=2){var tt=_e[$],rt=_e[$+1];tt==="style"?sb(d,rt):tt==="dangerouslySetInnerHTML"?nb(d,rt):tt==="children"?ob(d,rt):ta(d,tt,rt,et)}switch(j){case"input":bb(d,b);break;case"textarea":ib(d,b);break;case"select":var nt=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!b.multiple;var it=b.value;it!=null?fb(d,!!b.multiple,it,!1):nt!==!!b.multiple&&(b.defaultValue!=null?fb(d,!!b.multiple,b.defaultValue,!0):fb(d,!!b.multiple,b.multiple?[]:"",!1))}d[Pf]=b}catch(ct){W(s,s.return,ct)}}break;case 6:if(dk(a,s),fk(s),c&4){if(s.stateNode===null)throw Error(p$2(162));d=s.stateNode,b=s.memoizedProps;try{d.nodeValue=b}catch(ct){W(s,s.return,ct)}}break;case 3:if(dk(a,s),fk(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(a.containerInfo)}catch(ct){W(s,s.return,ct)}break;case 4:dk(a,s),fk(s);break;case 13:dk(a,s),fk(s),d=s.child,d.flags&8192&&(b=d.memoizedState!==null,d.stateNode.isHidden=b,!b||d.alternate!==null&&d.alternate.memoizedState!==null||(gk=B$1())),c&4&&bk(s);break;case 22:if(tt=o!==null&&o.memoizedState!==null,s.mode&1?(U=(et=U)||tt,dk(a,s),U=et):dk(a,s),fk(s),c&8192){if(et=s.memoizedState!==null,(s.stateNode.isHidden=et)&&!tt&&s.mode&1)for(V=s,tt=s.child;tt!==null;){for(rt=V=tt;V!==null;){switch(nt=V,it=nt.child,nt.tag){case 0:case 11:case 14:case 15:Qj(4,nt,nt.return);break;case 1:Mj(nt,nt.return);var at=nt.stateNode;if(typeof at.componentWillUnmount=="function"){c=nt,o=nt.return;try{a=c,at.props=a.memoizedProps,at.state=a.memoizedState,at.componentWillUnmount()}catch(ct){W(c,o,ct)}}break;case 5:Mj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){hk(rt);continue}}it!==null?(it.return=nt,V=it):hk(rt)}tt=tt.sibling}e:for(tt=null,rt=s;;){if(rt.tag===5){if(tt===null){tt=rt;try{d=rt.stateNode,et?(b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(j=rt.stateNode,_e=rt.memoizedProps.style,$=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,j.style.display=rb("display",$))}catch(ct){W(s,s.return,ct)}}}else if(rt.tag===6){if(tt===null)try{rt.stateNode.nodeValue=et?"":rt.memoizedProps}catch(ct){W(s,s.return,ct)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===s)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===s)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===s)break e;tt===rt&&(tt=null),rt=rt.return}tt===rt&&(tt=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:dk(a,s),fk(s),c&4&&bk(s);break;case 21:break;default:dk(a,s),fk(s)}}function fk(s){var a=s.flags;if(a&2){try{e:{for(var o=s.return;o!==null;){if(Uj(o)){var c=o;break e}o=o.return}throw Error(p$2(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ob(d,""),c.flags&=-33);var b=Vj(s);Xj(s,b,d);break;case 3:case 4:var $=c.stateNode.containerInfo,j=Vj(s);Wj(s,j,$);break;default:throw Error(p$2(161))}}catch(_e){W(s,s.return,_e)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function ik(s,a,o){V=s,jk(s)}function jk(s,a,o){for(var c=(s.mode&1)!==0;V!==null;){var d=V,b=d.child;if(d.tag===22&&c){var $=d.memoizedState!==null||Kj;if(!$){var j=d.alternate,_e=j!==null&&j.memoizedState!==null||U;j=Kj;var et=U;if(Kj=$,(U=_e)&&!et)for(V=d;V!==null;)$=V,_e=$.child,$.tag===22&&$.memoizedState!==null?kk(d):_e!==null?(_e.return=$,V=_e):kk(d);for(;b!==null;)V=b,jk(b),b=b.sibling;V=d,Kj=j,U=et}lk(s)}else d.subtreeFlags&8772&&b!==null?(b.return=d,V=b):lk(s)}}function lk(s){for(;V!==null;){var a=V;if(a.flags&8772){var o=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:U||Rj(5,a);break;case 1:var c=a.stateNode;if(a.flags&4&&!U)if(o===null)c.componentDidMount();else{var d=a.elementType===a.type?o.memoizedProps:Lg(a.type,o.memoizedProps);c.componentDidUpdate(d,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&ih(a,b,c);break;case 3:var $=a.updateQueue;if($!==null){if(o=null,a.child!==null)switch(a.child.tag){case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}ih(a,$,o)}break;case 5:var j=a.stateNode;if(o===null&&a.flags&4){o=j;var _e=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&o.focus();break;case"img":_e.src&&(o.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var et=a.alternate;if(et!==null){var tt=et.memoizedState;if(tt!==null){var rt=tt.dehydrated;rt!==null&&bd(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||a.flags&512&&Sj(a)}catch(nt){W(a,a.return,nt)}}if(a===s){V=null;break}if(o=a.sibling,o!==null){o.return=a.return,V=o;break}V=a.return}}function hk(s){for(;V!==null;){var a=V;if(a===s){V=null;break}var o=a.sibling;if(o!==null){o.return=a.return,V=o;break}V=a.return}}function kk(s){for(;V!==null;){var a=V;try{switch(a.tag){case 0:case 11:case 15:var o=a.return;try{Rj(4,a)}catch(_e){W(a,o,_e)}break;case 1:var c=a.stateNode;if(typeof c.componentDidMount=="function"){var d=a.return;try{c.componentDidMount()}catch(_e){W(a,d,_e)}}var b=a.return;try{Sj(a)}catch(_e){W(a,b,_e)}break;case 5:var $=a.return;try{Sj(a)}catch(_e){W(a,$,_e)}}}catch(_e){W(a,a.return,_e)}if(a===s){V=null;break}var j=a.sibling;if(j!==null){j.return=a.return,V=j;break}V=a.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(s){return s.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(s=C$1,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function mh(s,a,o,c){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(s,o,c),(!(K&2)||s!==R)&&(s===R&&(!(K&2)&&(rk|=o),T===4&&Dk(s,Z)),Ek(s,c),o===1&&K===0&&!(a.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(s,a){var o=s.callbackNode;wc(s,a);var c=uc(s,s===R?Z:0);if(c===0)o!==null&&bc(o),s.callbackNode=null,s.callbackPriority=0;else if(a=c&-c,s.callbackPriority!==a){if(o!=null&&bc(o),a===1)s.tag===0?ig(Fk.bind(null,s)):hg(Fk.bind(null,s)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(c)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Gk(o,Hk.bind(null,s))}s.callbackPriority=a,s.callbackNode=o}}function Hk(s,a){if(Bk=-1,Ck=0,K&6)throw Error(p$2(327));var o=s.callbackNode;if(Ik()&&s.callbackNode!==o)return null;var c=uc(s,s===R?Z:0);if(c===0)return null;if(c&30||c&s.expiredLanes||a)a=Jk(s,c);else{a=c;var d=K;K|=2;var b=Kk();(R!==s||Z!==a)&&(vk=null,Hj=B$1()+500,Lk(s,a));do try{Mk();break}catch(j){Nk(s,j)}while(1);Qg(),nk.current=b,K=d,Y!==null?a=0:(R=null,Z=0,a=T)}if(a!==0){if(a===2&&(d=xc(s),d!==0&&(c=d,a=Ok(s,d))),a===1)throw o=qk,Lk(s,0),Dk(s,c),Ek(s,B$1()),o;if(a===6)Dk(s,c);else{if(d=s.current.alternate,!(c&30)&&!Pk(d)&&(a=Jk(s,c),a===2&&(b=xc(s),b!==0&&(c=b,a=Ok(s,b))),a===1))throw o=qk,Lk(s,0),Dk(s,c),Ek(s,B$1()),o;switch(s.finishedWork=d,s.finishedLanes=c,a){case 0:case 1:throw Error(p$2(345));case 2:Qk(s,uk,vk);break;case 3:if(Dk(s,c),(c&130023424)===c&&(a=gk+500-B$1(),10<a)){if(uc(s,0)!==0)break;if(d=s.suspendedLanes,(d&c)!==c){L(),s.pingedLanes|=s.suspendedLanes&d;break}s.timeoutHandle=Ff(Qk.bind(null,s,uk,vk),a);break}Qk(s,uk,vk);break;case 4:if(Dk(s,c),(c&4194240)===c)break;for(a=s.eventTimes,d=-1;0<c;){var $=31-oc(c);b=1<<$,$=a[$],$>d&&(d=$),c&=~b}if(c=d,c=B$1()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*mk(c/1960))-c,10<c){s.timeoutHandle=Ff(Qk.bind(null,s,uk,vk),c);break}Qk(s,uk,vk);break;case 5:Qk(s,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(s,B$1()),s.callbackNode===o?Hk.bind(null,s):null}function Ok(s,a){var o=tk;return s.current.memoizedState.isDehydrated&&(Lk(s,a).flags|=256),s=Jk(s,a),s!==2&&(a=uk,uk=o,a!==null&&Gj(a)),s}function Gj(s){uk===null?uk=s:uk.push.apply(uk,s)}function Pk(s){for(var a=s;;){if(a.flags&16384){var o=a.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var d=o[c],b=d.getSnapshot;d=d.value;try{if(!He(b(),d))return!1}catch{return!1}}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Dk(s,a){for(a&=~sk,a&=~rk,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var o=31-oc(a),c=1<<o;s[o]=-1,a&=~c}}function Fk(s){if(K&6)throw Error(p$2(327));Ik();var a=uc(s,0);if(!(a&1))return Ek(s,B$1()),null;var o=Jk(s,a);if(s.tag!==0&&o===2){var c=xc(s);c!==0&&(a=c,o=Ok(s,c))}if(o===1)throw o=qk,Lk(s,0),Dk(s,a),Ek(s,B$1()),o;if(o===6)throw Error(p$2(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Qk(s,uk,vk),Ek(s,B$1()),null}function Rk(s,a){var o=K;K|=1;try{return s(a)}finally{K=o,K===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(s){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var a=K;K|=1;var o=pk.transition,c=C$1;try{if(pk.transition=null,C$1=1,s)return s()}finally{C$1=c,pk.transition=o,K=a,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(s,a){s.finishedWork=null,s.finishedLanes=0;var o=s.timeoutHandle;if(o!==-1&&(s.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var c=o;switch(wg(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(c);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(c.type._context);break;case 22:case 23:Ij()}o=o.return}if(R=s,Y=s=wh(s.current,null),Z=gj=a,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(a=0;a<Wg.length;a++)if(o=Wg[a],c=o.interleaved,c!==null){o.interleaved=null;var d=c.next,b=o.pending;if(b!==null){var $=b.next;b.next=d,c.next=$}o.pending=c}Wg=null}return s}function Nk(s,a){do{var o=Y;try{if(Qg(),Ph.current=ai,Sh){for(var c=N.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,o===null||o.return===null){T=1,qk=a,Y=null;break}e:{var b=s,$=o.return,j=o,_e=a;if(a=Z,j.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var et=_e,tt=j,rt=tt.tag;if(!(tt.mode&1)&&(rt===0||rt===11||rt===15)){var nt=tt.alternate;nt?(tt.updateQueue=nt.updateQueue,tt.memoizedState=nt.memoizedState,tt.lanes=nt.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var it=Vi($);if(it!==null){it.flags&=-257,Wi(it,$,j,b,a),it.mode&1&&Ti(b,et,a),a=it,_e=et;var at=a.updateQueue;if(at===null){var ct=new Set;ct.add(_e),a.updateQueue=ct}else at.add(_e);break e}else{if(!(a&1)){Ti(b,et,a),uj();break e}_e=Error(p$2(426))}}else if(I$1&&j.mode&1){var st=Vi($);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Wi(st,$,j,b,a),Jg(Ki(_e,j));break e}}b=_e=Ki(_e,j),T!==4&&(T=2),tk===null?tk=[b]:tk.push(b),b=$;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var ot=Oi(b,_e,a);fh(b,ot);break e;case 1:j=_e;var ht=b.type,dt=b.stateNode;if(!(b.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(Si===null||!Si.has(dt)))){b.flags|=65536,a&=-a,b.lanes|=a;var ft=Ri(b,j,a);fh(b,ft);break e}}b=b.return}while(b!==null)}Tk(o)}catch(mt){a=mt,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(1)}function Kk(){var s=nk.current;return nk.current=ai,s===null?ai:s}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(s,a){var o=K;K|=2;var c=Kk();(R!==s||Z!==a)&&(vk=null,Lk(s,a));do try{Uk();break}catch(d){Nk(s,d)}while(1);if(Qg(),K=o,nk.current=c,Y!==null)throw Error(p$2(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc$1();)Vk(Y)}function Vk(s){var a=Wk(s.alternate,s,gj);s.memoizedProps=s.pendingProps,a===null?Tk(s):Y=a,ok.current=null}function Tk(s){var a=s;do{var o=a.alternate;if(s=a.return,a.flags&32768){if(o=Jj(o,a),o!==null){o.flags&=32767,Y=o;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T=6,Y=null;return}}else if(o=Fj(o,a,gj),o!==null){Y=o;return}if(a=a.sibling,a!==null){Y=a;return}Y=a=s}while(a!==null);T===0&&(T=5)}function Qk(s,a,o){var c=C$1,d=pk.transition;try{pk.transition=null,C$1=1,Xk(s,a,o,c)}finally{pk.transition=d,C$1=c}return null}function Xk(s,a,o,c){do Ik();while(xk!==null);if(K&6)throw Error(p$2(327));o=s.finishedWork;var d=s.finishedLanes;if(o===null)return null;if(s.finishedWork=null,s.finishedLanes=0,o===s.current)throw Error(p$2(177));s.callbackNode=null,s.callbackPriority=0;var b=o.lanes|o.childLanes;if(Bc(s,b),s===R&&(Y=R=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),b=(o.flags&15990)!==0,o.subtreeFlags&15990||b){b=pk.transition,pk.transition=null;var $=C$1;C$1=1;var j=K;K|=4,ok.current=null,Pj(s,o),ek(o,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=o,ik(o),dc(),K=j,C$1=$,pk.transition=b}else s.current=o;if(wk&&(wk=!1,xk=s,yk=d),b=s.pendingLanes,b===0&&(Si=null),mc(o.stateNode),Ek(s,B$1()),a!==null)for(c=s.onRecoverableError,o=0;o<a.length;o++)d=a[o],c(d.value,{componentStack:d.stack,digest:d.digest});if(Pi)throw Pi=!1,s=Qi,Qi=null,s;return yk&1&&s.tag!==0&&Ik(),b=s.pendingLanes,b&1?s===Ak?zk++:(zk=0,Ak=s):zk=0,jg(),null}function Ik(){if(xk!==null){var s=Dc(yk),a=pk.transition,o=C$1;try{if(pk.transition=null,C$1=16>s?16:s,xk===null)var c=!1;else{if(s=xk,xk=null,yk=0,K&6)throw Error(p$2(331));var d=K;for(K|=4,V=s.current;V!==null;){var b=V,$=b.child;if(V.flags&16){var j=b.deletions;if(j!==null){for(var _e=0;_e<j.length;_e++){var et=j[_e];for(V=et;V!==null;){var tt=V;switch(tt.tag){case 0:case 11:case 15:Qj(8,tt,b)}var rt=tt.child;if(rt!==null)rt.return=tt,V=rt;else for(;V!==null;){tt=V;var nt=tt.sibling,it=tt.return;if(Tj(tt),tt===et){V=null;break}if(nt!==null){nt.return=it,V=nt;break}V=it}}}var at=b.alternate;if(at!==null){var ct=at.child;if(ct!==null){at.child=null;do{var st=ct.sibling;ct.sibling=null,ct=st}while(ct!==null)}}V=b}}if(b.subtreeFlags&2064&&$!==null)$.return=b,V=$;else e:for(;V!==null;){if(b=V,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Qj(9,b,b.return)}var ot=b.sibling;if(ot!==null){ot.return=b.return,V=ot;break e}V=b.return}}var ht=s.current;for(V=ht;V!==null;){$=V;var dt=$.child;if($.subtreeFlags&2064&&dt!==null)dt.return=$,V=dt;else e:for($=ht;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Rj(9,j)}}catch(mt){W(j,j.return,mt)}if(j===$){V=null;break e}var ft=j.sibling;if(ft!==null){ft.return=j.return,V=ft;break e}V=j.return}}if(K=d,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}c=!0}return c}finally{C$1=o,pk.transition=a}}return!1}function Yk(s,a,o){a=Ki(o,a),a=Oi(s,a,1),s=dh(s,a,1),a=L(),s!==null&&(Ac(s,1,a),Ek(s,a))}function W(s,a,o){if(s.tag===3)Yk(s,s,o);else for(;a!==null;){if(a.tag===3){Yk(a,s,o);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Si===null||!Si.has(c))){s=Ki(o,s),s=Ri(a,s,1),a=dh(a,s,1),s=L(),a!==null&&(Ac(a,1,s),Ek(a,s));break}}a=a.return}}function Ui(s,a,o){var c=s.pingCache;c!==null&&c.delete(a),a=L(),s.pingedLanes|=s.suspendedLanes&o,R===s&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B$1()-gk?Lk(s,0):sk|=o),Ek(s,a)}function Zk(s,a){a===0&&(s.mode&1?(a=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):a=1);var o=L();s=Zg(s,a),s!==null&&(Ac(s,a,o),Ek(s,o))}function vj(s){var a=s.memoizedState,o=0;a!==null&&(o=a.retryLane),Zk(s,o)}function ck(s,a){var o=0;switch(s.tag){case 13:var c=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=s.stateNode;break;default:throw Error(p$2(314))}c!==null&&c.delete(a),Zk(s,o)}var Wk;Wk=function(s,a,o){if(s!==null)if(s.memoizedProps!==a.pendingProps||Wf.current)Ug=!0;else{if(!(s.lanes&o)&&!(a.flags&128))return Ug=!1,zj(s,a,o);Ug=!!(s.flags&131072)}else Ug=!1,I$1&&a.flags&1048576&&ug(a,ng,a.index);switch(a.lanes=0,a.tag){case 2:var c=a.type;jj(s,a),s=a.pendingProps;var d=Yf(a,H.current);Tg(a,o),d=Xh(null,a,c,s,d,o);var b=bi();return a.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zf(c)?(b=!0,cg(a)):b=!1,a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ah(a),d.updater=nh,a.stateNode=d,d._reactInternals=a,rh(a,c,s,o),a=kj(null,a,c,!0,b,o)):(a.tag=0,I$1&&b&&vg(a),Yi(null,a,d,o),a=a.child),a;case 16:c=a.elementType;e:{switch(jj(s,a),s=a.pendingProps,d=c._init,c=d(c._payload),a.type=c,d=a.tag=$k(c),s=Lg(c,s),d){case 0:a=dj(null,a,c,s,o);break e;case 1:a=ij(null,a,c,s,o);break e;case 11:a=Zi(null,a,c,s,o);break e;case 14:a=aj(null,a,c,Lg(c.type,s),o);break e}throw Error(p$2(306,c,""))}return a;case 0:return c=a.type,d=a.pendingProps,d=a.elementType===c?d:Lg(c,d),dj(s,a,c,d,o);case 1:return c=a.type,d=a.pendingProps,d=a.elementType===c?d:Lg(c,d),ij(s,a,c,d,o);case 3:e:{if(lj(a),s===null)throw Error(p$2(387));c=a.pendingProps,b=a.memoizedState,d=b.element,bh(s,a),gh(a,c,null,o);var $=a.memoizedState;if(c=$.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){d=Ki(Error(p$2(423)),a),a=mj(s,a,c,o,d);break e}else if(c!==d){d=Ki(Error(p$2(424)),a),a=mj(s,a,c,o,d);break e}else for(yg=Lf(a.stateNode.containerInfo.firstChild),xg=a,I$1=!0,zg=null,o=Ch(a,null,c,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),c===d){a=$i(s,a,o);break e}Yi(s,a,c,o)}a=a.child}return a;case 5:return Kh(a),s===null&&Eg(a),c=a.type,d=a.pendingProps,b=s!==null?s.memoizedProps:null,$=d.children,Ef(c,d)?$=null:b!==null&&Ef(c,b)&&(a.flags|=32),hj(s,a),Yi(s,a,$,o),a.child;case 6:return s===null&&Eg(a),null;case 13:return pj(s,a,o);case 4:return Ih(a,a.stateNode.containerInfo),c=a.pendingProps,s===null?a.child=Bh(a,null,c,o):Yi(s,a,c,o),a.child;case 11:return c=a.type,d=a.pendingProps,d=a.elementType===c?d:Lg(c,d),Zi(s,a,c,d,o);case 7:return Yi(s,a,a.pendingProps,o),a.child;case 8:return Yi(s,a,a.pendingProps.children,o),a.child;case 12:return Yi(s,a,a.pendingProps.children,o),a.child;case 10:e:{if(c=a.type._context,d=a.pendingProps,b=a.memoizedProps,$=d.value,G(Mg,c._currentValue),c._currentValue=$,b!==null)if(He(b.value,$)){if(b.children===d.children&&!Wf.current){a=$i(s,a,o);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var j=b.dependencies;if(j!==null){$=b.child;for(var _e=j.firstContext;_e!==null;){if(_e.context===c){if(b.tag===1){_e=ch(-1,o&-o),_e.tag=2;var et=b.updateQueue;if(et!==null){et=et.shared;var tt=et.pending;tt===null?_e.next=_e:(_e.next=tt.next,tt.next=_e),et.pending=_e}}b.lanes|=o,_e=b.alternate,_e!==null&&(_e.lanes|=o),Sg(b.return,o,a),j.lanes|=o;break}_e=_e.next}}else if(b.tag===10)$=b.type===a.type?null:b.child;else if(b.tag===18){if($=b.return,$===null)throw Error(p$2(341));$.lanes|=o,j=$.alternate,j!==null&&(j.lanes|=o),Sg($,o,a),$=b.sibling}else $=b.child;if($!==null)$.return=b;else for($=b;$!==null;){if($===a){$=null;break}if(b=$.sibling,b!==null){b.return=$.return,$=b;break}$=$.return}b=$}Yi(s,a,d.children,o),a=a.child}return a;case 9:return d=a.type,c=a.pendingProps.children,Tg(a,o),d=Vg(d),c=c(d),a.flags|=1,Yi(s,a,c,o),a.child;case 14:return c=a.type,d=Lg(c,a.pendingProps),d=Lg(c.type,d),aj(s,a,c,d,o);case 15:return cj(s,a,a.type,a.pendingProps,o);case 17:return c=a.type,d=a.pendingProps,d=a.elementType===c?d:Lg(c,d),jj(s,a),a.tag=1,Zf(c)?(s=!0,cg(a)):s=!1,Tg(a,o),ph(a,c,d),rh(a,c,d,o),kj(null,a,c,!0,s,o);case 19:return yj(s,a,o);case 22:return ej(s,a,o)}throw Error(p$2(156,a.tag))};function Gk(s,a){return ac(s,a)}function al(s,a,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,a,o,c){return new al(s,a,o,c)}function bj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $k(s){if(typeof s=="function")return bj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function wh(s,a){var o=s.alternate;return o===null?(o=Bg(s.tag,a,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=a,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&14680064,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,a=s.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o}function yh(s,a,o,c,d,b){var $=2;if(c=s,typeof s=="function")bj(s)&&($=1);else if(typeof s=="string")$=5;else e:switch(s){case ya:return Ah(o.children,d,b,a);case za:$=8,d|=8;break;case Aa:return s=Bg(12,o,a,d|2),s.elementType=Aa,s.lanes=b,s;case Ea:return s=Bg(13,o,a,d),s.elementType=Ea,s.lanes=b,s;case Fa:return s=Bg(19,o,a,d),s.elementType=Fa,s.lanes=b,s;case Ia:return qj(o,d,b,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:$=10;break e;case Ca:$=9;break e;case Da:$=11;break e;case Ga:$=14;break e;case Ha:$=16,c=null;break e}throw Error(p$2(130,s==null?s:typeof s,""))}return a=Bg($,o,a,d),a.elementType=s,a.type=c,a.lanes=b,a}function Ah(s,a,o,c){return s=Bg(7,s,c,a),s.lanes=o,s}function qj(s,a,o,c){return s=Bg(22,s,c,a),s.elementType=Ia,s.lanes=o,s.stateNode={isHidden:!1},s}function xh(s,a,o){return s=Bg(6,s,null,a),s.lanes=o,s}function zh(s,a,o){return a=Bg(4,s.children!==null?s.children:[],s.key,a),a.lanes=o,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function bl(s,a,o,c,d){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function cl(s,a,o,c,d,b,$,j,_e){return s=new bl(s,a,o,j,_e),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Bg(3,null,null,a),s.current=b,b.stateNode=s,b.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(b),s}function dl(s,a,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:c==null?null:""+c,children:s,containerInfo:a,implementation:o}}function el(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p$2(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zf(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(p$2(171))}if(s.tag===1){var o=s.type;if(Zf(o))return bg(s,o,a)}return a}function fl(s,a,o,c,d,b,$,j,_e){return s=cl(o,c,!0,s,d,b,$,j,_e),s.context=el(null),o=s.current,c=L(),d=lh(o),b=ch(c,d),b.callback=a??null,dh(o,b,d),s.current.lanes=d,Ac(s,d,c),Ek(s,c),s}function gl(s,a,o,c){var d=a.current,b=L(),$=lh(d);return o=el(o),a.context===null?a.context=o:a.pendingContext=o,a=ch(b,$),a.payload={element:s},c=c===void 0?null:c,c!==null&&(a.callback=c),s=dh(d,a,$),s!==null&&(mh(s,d,$,b),eh(s,d,$)),$}function hl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function il(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<a?o:a}}function jl(s,a){il(s,a),(s=s.alternate)&&il(s,a)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(s){console.error(s)};function ml(s){this._internalRoot=s}nl.prototype.render=ml.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(p$2(409));gl(s,a,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Sk(function(){gl(null,s,null,null)}),a[uf]=null}};function nl(s){this._internalRoot=s}nl.prototype.unstable_scheduleHydration=function(s){if(s){var a=Hc();s={blockedOn:null,target:s,priority:a};for(var o=0;o<Qc.length&&a!==0&&a<Qc[o].priority;o++);Qc.splice(o,0,s),o===0&&Vc(s)}};function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function pl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(s,a,o,c,d){if(d){if(typeof c=="function"){var b=c;c=function(){var et=hl($);b.call(et)}}var $=fl(a,c,s,0,null,!1,!1,"",ql);return s._reactRootContainer=$,s[uf]=$.current,sf(s.nodeType===8?s.parentNode:s),Sk(),$}for(;d=s.lastChild;)s.removeChild(d);if(typeof c=="function"){var j=c;c=function(){var et=hl(_e);j.call(et)}}var _e=cl(s,0,!1,null,null,!1,!1,"",ql);return s._reactRootContainer=_e,s[uf]=_e.current,sf(s.nodeType===8?s.parentNode:s),Sk(function(){gl(a,_e,o,c)}),_e}function sl(s,a,o,c,d){var b=o._reactRootContainer;if(b){var $=b;if(typeof d=="function"){var j=d;d=function(){var _e=hl($);j.call(_e)}}gl(a,$,s,d)}else $=rl(o,a,s,d,c);return hl($)}Ec=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var o=tc(a.pendingLanes);o!==0&&(Cc(a,o|1),Ek(a,B$1()),!(K&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var c=Zg(s,1);if(c!==null){var d=L();mh(c,s,1,d)}}),jl(s,1)}};Fc=function(s){if(s.tag===13){var a=Zg(s,134217728);if(a!==null){var o=L();mh(a,s,134217728,o)}jl(s,134217728)}};Gc=function(s){if(s.tag===13){var a=lh(s),o=Zg(s,a);if(o!==null){var c=L();mh(o,s,a,c)}jl(s,a)}};Hc=function(){return C$1};Ic=function(s,a){var o=C$1;try{return C$1=s,a()}finally{C$1=o}};yb=function(s,a,o){switch(a){case"input":if(bb(s,o),a=o.name,o.type==="radio"&&a!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<o.length;a++){var c=o[a];if(c!==s&&c.form===s.form){var d=Db(c);if(!d)throw Error(p$2(90));Wa(c),bb(c,d)}}}break;case"textarea":ib(s,o);break;case"select":a=o.value,a!=null&&fb(s,!!o.multiple,a,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(s,a){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(a))throw Error(p$2(200));return dl(s,a,null,o)};reactDom_production_min.createRoot=function(s,a){if(!ol(s))throw Error(p$2(299));var o=!1,c="",d=ll;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(d=a.onRecoverableError)),a=cl(s,1,!1,null,null,o,!1,c,d),s[uf]=a.current,sf(s.nodeType===8?s.parentNode:s),new ml(a)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(p$2(188)):(s=Object.keys(s).join(","),Error(p$2(268,s)));return s=Zb(a),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Sk(s)};reactDom_production_min.hydrate=function(s,a,o){if(!pl(a))throw Error(p$2(200));return sl(null,s,a,!0,o)};reactDom_production_min.hydrateRoot=function(s,a,o){if(!ol(s))throw Error(p$2(405));var c=o!=null&&o.hydratedSources||null,d=!1,b="",$=ll;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(b=o.identifierPrefix),o.onRecoverableError!==void 0&&($=o.onRecoverableError)),a=fl(a,null,s,1,o??null,d,!1,b,$),s[uf]=a.current,sf(s),c)for(s=0;s<c.length;s++)o=c[s],d=o._getVersion,d=d(o._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[o,d]:a.mutableSourceEagerHydrationData.push(o,d);return new nl(a)};reactDom_production_min.render=function(s,a,o){if(!pl(a))throw Error(p$2(200));return sl(null,s,a,!1,o)};reactDom_production_min.unmountComponentAtNode=function(s){if(!pl(s))throw Error(p$2(40));return s._reactRootContainer?(Sk(function(){sl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,a,o,c){if(!pl(o))throw Error(p$2(200));if(s==null||s._reactInternals===void 0)throw Error(p$2(38));return sl(s,a,o,!1,c)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client$1.createRoot=m$1.createRoot,client$1.hydrateRoot=m$1.hydrateRoot;class Subscribable{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){const o={listener:a};return this.listeners.add(o),this.onSubscribe(),()=>{this.listeners.delete(o),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const isServer=typeof window>"u"||"Deno"in window;function noop$4(){}function functionalUpdate(s,a){return typeof s=="function"?s(a):s}function isValidTimeout(s){return typeof s=="number"&&s>=0&&s!==1/0}function timeUntilStale(s,a){return Math.max(s+(a||0)-Date.now(),0)}function parseQueryArgs(s,a,o){return isQueryKey(s)?typeof a=="function"?{...o,queryKey:s,queryFn:a}:{...a,queryKey:s}:s}function parseMutationArgs(s,a,o){return isQueryKey(s)?typeof a=="function"?{...o,mutationKey:s,mutationFn:a}:{...a,mutationKey:s}:typeof s=="function"?{...a,mutationFn:s}:{...s}}function parseFilterArgs(s,a,o){return isQueryKey(s)?[{...a,queryKey:s},o]:[s||{},a]}function matchQuery(s,a){const{type:o="all",exact:c,fetchStatus:d,predicate:b,queryKey:$,stale:j}=s;if(isQueryKey($)){if(c){if(a.queryHash!==hashQueryKeyByOptions($,a.options))return!1}else if(!partialMatchKey(a.queryKey,$))return!1}if(o!=="all"){const _e=a.isActive();if(o==="active"&&!_e||o==="inactive"&&_e)return!1}return!(typeof j=="boolean"&&a.isStale()!==j||typeof d<"u"&&d!==a.state.fetchStatus||b&&!b(a))}function matchMutation(s,a){const{exact:o,fetching:c,predicate:d,mutationKey:b}=s;if(isQueryKey(b)){if(!a.options.mutationKey)return!1;if(o){if(hashQueryKey(a.options.mutationKey)!==hashQueryKey(b))return!1}else if(!partialMatchKey(a.options.mutationKey,b))return!1}return!(typeof c=="boolean"&&a.state.status==="loading"!==c||d&&!d(a))}function hashQueryKeyByOptions(s,a){return((a==null?void 0:a.queryKeyHashFn)||hashQueryKey)(s)}function hashQueryKey(s){return JSON.stringify(s,(a,o)=>isPlainObject$3(o)?Object.keys(o).sort().reduce((c,d)=>(c[d]=o[d],c),{}):o)}function partialMatchKey(s,a){return partialDeepEqual(s,a)}function partialDeepEqual(s,a){return s===a?!0:typeof s!=typeof a?!1:s&&a&&typeof s=="object"&&typeof a=="object"?!Object.keys(a).some(o=>!partialDeepEqual(s[o],a[o])):!1}function replaceEqualDeep(s,a){if(s===a)return s;const o=isPlainArray(s)&&isPlainArray(a);if(o||isPlainObject$3(s)&&isPlainObject$3(a)){const c=o?s.length:Object.keys(s).length,d=o?a:Object.keys(a),b=d.length,$=o?[]:{};let j=0;for(let _e=0;_e<b;_e++){const et=o?_e:d[_e];$[et]=replaceEqualDeep(s[et],a[et]),$[et]===s[et]&&j++}return c===b&&j===c?s:$}return a}function shallowEqualObjects(s,a){if(s&&!a||a&&!s)return!1;for(const o in s)if(s[o]!==a[o])return!1;return!0}function isPlainArray(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function isPlainObject$3(s){if(!hasObjectPrototype(s))return!1;const a=s.constructor;if(typeof a>"u")return!0;const o=a.prototype;return!(!hasObjectPrototype(o)||!o.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(s){return Object.prototype.toString.call(s)==="[object Object]"}function isQueryKey(s){return Array.isArray(s)}function sleep(s){return new Promise(a=>{setTimeout(a,s)})}function scheduleMicrotask(s){sleep(0).then(s)}function getAbortController(){if(typeof AbortController=="function")return new AbortController}function replaceData(s,a,o){return o.isDataEqual!=null&&o.isDataEqual(s,a)?s:typeof o.structuralSharing=="function"?o.structuralSharing(s,a):o.structuralSharing!==!1?replaceEqualDeep(s,a):a}class FocusManager extends Subscribable{constructor(){super(),this.setup=a=>{if(!isServer&&window.addEventListener){const o=()=>a();return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),()=>{window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}}setEventListener(a){var o;this.setup=a,(o=this.cleanup)==null||o.call(this),this.cleanup=a(c=>{typeof c=="boolean"?this.setFocused(c):this.onFocus()})}setFocused(a){this.focused!==a&&(this.focused=a,this.onFocus())}onFocus(){this.listeners.forEach(({listener:a})=>{a()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const focusManager=new FocusManager,onlineEvents=["online","offline"];class OnlineManager extends Subscribable{constructor(){super(),this.setup=a=>{if(!isServer&&window.addEventListener){const o=()=>a();return onlineEvents.forEach(c=>{window.addEventListener(c,o,!1)}),()=>{onlineEvents.forEach(c=>{window.removeEventListener(c,o)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}}setEventListener(a){var o;this.setup=a,(o=this.cleanup)==null||o.call(this),this.cleanup=a(c=>{typeof c=="boolean"?this.setOnline(c):this.onOnline()})}setOnline(a){this.online!==a&&(this.online=a,this.onOnline())}onOnline(){this.listeners.forEach(({listener:a})=>{a()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const onlineManager=new OnlineManager;function defaultRetryDelay(s){return Math.min(1e3*2**s,3e4)}function canFetch(s){return(s??"online")==="online"?onlineManager.isOnline():!0}class CancelledError{constructor(a){this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent}}function isCancelledError(s){return s instanceof CancelledError}function createRetryer(s){let a=!1,o=0,c=!1,d,b,$;const j=new Promise((st,ot)=>{b=st,$=ot}),_e=st=>{c||(it(new CancelledError(st)),s.abort==null||s.abort())},et=()=>{a=!0},tt=()=>{a=!1},rt=()=>!focusManager.isFocused()||s.networkMode!=="always"&&!onlineManager.isOnline(),nt=st=>{c||(c=!0,s.onSuccess==null||s.onSuccess(st),d==null||d(),b(st))},it=st=>{c||(c=!0,s.onError==null||s.onError(st),d==null||d(),$(st))},at=()=>new Promise(st=>{d=ot=>{const ht=c||!rt();return ht&&st(ot),ht},s.onPause==null||s.onPause()}).then(()=>{d=void 0,c||s.onContinue==null||s.onContinue()}),ct=()=>{if(c)return;let st;try{st=s.fn()}catch(ot){st=Promise.reject(ot)}Promise.resolve(st).then(nt).catch(ot=>{var ht,dt;if(c)return;const ft=(ht=s.retry)!=null?ht:3,mt=(dt=s.retryDelay)!=null?dt:defaultRetryDelay,gt=typeof mt=="function"?mt(o,ot):mt,vt=ft===!0||typeof ft=="number"&&o<ft||typeof ft=="function"&&ft(o,ot);if(a||!vt){it(ot);return}o++,s.onFail==null||s.onFail(o,ot),sleep(gt).then(()=>{if(rt())return at()}).then(()=>{a?it(ot):ct()})})};return canFetch(s.networkMode)?ct():at().then(ct),{promise:j,cancel:_e,continue:()=>(d==null?void 0:d())?j:Promise.resolve(),cancelRetry:et,continueRetry:tt}}const defaultLogger=console;function createNotifyManager(){let s=[],a=0,o=tt=>{tt()},c=tt=>{tt()};const d=tt=>{let rt;a++;try{rt=tt()}finally{a--,a||j()}return rt},b=tt=>{a?s.push(tt):scheduleMicrotask(()=>{o(tt)})},$=tt=>(...rt)=>{b(()=>{tt(...rt)})},j=()=>{const tt=s;s=[],tt.length&&scheduleMicrotask(()=>{c(()=>{tt.forEach(rt=>{o(rt)})})})};return{batch:d,batchCalls:$,schedule:b,setNotifyFunction:tt=>{o=tt},setBatchNotifyFunction:tt=>{c=tt}}}const notifyManager=createNotifyManager();class Removable{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(a){this.cacheTime=Math.max(this.cacheTime||0,a??(isServer?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Query extends Removable{constructor(a){super(),this.abortSignalConsumed=!1,this.defaultOptions=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.cache=a.cache,this.logger=a.logger||defaultLogger,this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.initialState=a.state||getDefaultState$1(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(a){this.options={...this.defaultOptions,...a},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(a,o){const c=replaceData(this.state.data,a,this.options);return this.dispatch({data:c,type:"success",dataUpdatedAt:o==null?void 0:o.updatedAt,manual:o==null?void 0:o.manual}),c}setState(a,o){this.dispatch({type:"setState",state:a,setStateOptions:o})}cancel(a){var o;const c=this.promise;return(o=this.retryer)==null||o.cancel(a),c?c.then(noop$4).catch(noop$4):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(a=>a.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(a=>a.getCurrentResult().isStale)}isStaleByTime(a=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,a)}onFocus(){var a;const o=this.observers.find(c=>c.shouldFetchOnWindowFocus());o&&o.refetch({cancelRefetch:!1}),(a=this.retryer)==null||a.continue()}onOnline(){var a;const o=this.observers.find(c=>c.shouldFetchOnReconnect());o&&o.refetch({cancelRefetch:!1}),(a=this.retryer)==null||a.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(o=>o!==a),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(a,o){var c,d;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&o!=null&&o.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var b;return(b=this.retryer)==null||b.continueRetry(),this.promise}}if(a&&this.setOptions(a),!this.options.queryFn){const it=this.observers.find(at=>at.options.queryFn);it&&this.setOptions(it.options)}const $=getAbortController(),j={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},_e=it=>{Object.defineProperty(it,"signal",{enumerable:!0,get:()=>{if($)return this.abortSignalConsumed=!0,$.signal}})};_e(j);const et=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(j)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),tt={fetchOptions:o,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:et};if(_e(tt),(c=this.options.behavior)==null||c.onFetch(tt),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=tt.fetchOptions)==null?void 0:d.meta)){var rt;this.dispatch({type:"fetch",meta:(rt=tt.fetchOptions)==null?void 0:rt.meta})}const nt=it=>{if(isCancelledError(it)&&it.silent||this.dispatch({type:"error",error:it}),!isCancelledError(it)){var at,ct,st,ot;(at=(ct=this.cache.config).onError)==null||at.call(ct,it,this),(st=(ot=this.cache.config).onSettled)==null||st.call(ot,this.state.data,it,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=createRetryer({fn:tt.fetchFn,abort:$==null?void 0:$.abort.bind($),onSuccess:it=>{var at,ct,st,ot;if(typeof it>"u"){nt(new Error(this.queryHash+" data is undefined"));return}this.setData(it),(at=(ct=this.cache.config).onSuccess)==null||at.call(ct,it,this),(st=(ot=this.cache.config).onSettled)==null||st.call(ot,it,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:nt,onFail:(it,at)=>{this.dispatch({type:"failed",failureCount:it,error:at})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:tt.options.retry,retryDelay:tt.options.retryDelay,networkMode:tt.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(a){const o=c=>{var d,b;switch(a.type){case"failed":return{...c,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...c,fetchStatus:"paused"};case"continue":return{...c,fetchStatus:"fetching"};case"fetch":return{...c,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(d=a.meta)!=null?d:null,fetchStatus:canFetch(this.options.networkMode)?"fetching":"paused",...!c.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...c,data:a.data,dataUpdateCount:c.dataUpdateCount+1,dataUpdatedAt:(b=a.dataUpdatedAt)!=null?b:Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const $=a.error;return isCancelledError($)&&$.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...c,error:$,errorUpdateCount:c.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:c.fetchFailureCount+1,fetchFailureReason:$,fetchStatus:"idle",status:"error"};case"invalidate":return{...c,isInvalidated:!0};case"setState":return{...c,...a.state}}};this.state=o(this.state),notifyManager.batch(()=>{this.observers.forEach(c=>{c.onQueryUpdate(a)}),this.cache.notify({query:this,type:"updated",action:a})})}}function getDefaultState$1(s){const a=typeof s.initialData=="function"?s.initialData():s.initialData,o=typeof a<"u",c=o?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:o?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:o?"success":"loading",fetchStatus:"idle"}}class QueryCache extends Subscribable{constructor(a){super(),this.config=a||{},this.queries=[],this.queriesMap={}}build(a,o,c){var d;const b=o.queryKey,$=(d=o.queryHash)!=null?d:hashQueryKeyByOptions(b,o);let j=this.get($);return j||(j=new Query({cache:this,logger:a.getLogger(),queryKey:b,queryHash:$,options:a.defaultQueryOptions(o),state:c,defaultOptions:a.getQueryDefaults(b)}),this.add(j)),j}add(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"added",query:a}))}remove(a){const o=this.queriesMap[a.queryHash];o&&(a.destroy(),this.queries=this.queries.filter(c=>c!==a),o===a&&delete this.queriesMap[a.queryHash],this.notify({type:"removed",query:a}))}clear(){notifyManager.batch(()=>{this.queries.forEach(a=>{this.remove(a)})})}get(a){return this.queriesMap[a]}getAll(){return this.queries}find(a,o){const[c]=parseFilterArgs(a,o);return typeof c.exact>"u"&&(c.exact=!0),this.queries.find(d=>matchQuery(c,d))}findAll(a,o){const[c]=parseFilterArgs(a,o);return Object.keys(c).length>0?this.queries.filter(d=>matchQuery(c,d)):this.queries}notify(a){notifyManager.batch(()=>{this.listeners.forEach(({listener:o})=>{o(a)})})}onFocus(){notifyManager.batch(()=>{this.queries.forEach(a=>{a.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.queries.forEach(a=>{a.onOnline()})})}}class Mutation extends Removable{constructor(a){super(),this.defaultOptions=a.defaultOptions,this.mutationId=a.mutationId,this.mutationCache=a.mutationCache,this.logger=a.logger||defaultLogger,this.observers=[],this.state=a.state||getDefaultState(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options={...this.defaultOptions,...a},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(a){this.dispatch({type:"setState",state:a})}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.observers=this.observers.filter(o=>o!==a),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var a,o;return(a=(o=this.retryer)==null?void 0:o.continue())!=null?a:this.execute()}async execute(){const a=()=>{var vt;return this.retryer=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(yt,Et)=>{this.dispatch({type:"failed",failureCount:yt,error:Et})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(vt=this.options.retry)!=null?vt:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},o=this.state.status==="loading";try{var c,d,b,$,j,_e,et,tt;if(!o){var rt,nt,it,at;this.dispatch({type:"loading",variables:this.options.variables}),await((rt=(nt=this.mutationCache.config).onMutate)==null?void 0:rt.call(nt,this.state.variables,this));const yt=await((it=(at=this.options).onMutate)==null?void 0:it.call(at,this.state.variables));yt!==this.state.context&&this.dispatch({type:"loading",context:yt,variables:this.state.variables})}const vt=await a();return await((c=(d=this.mutationCache.config).onSuccess)==null?void 0:c.call(d,vt,this.state.variables,this.state.context,this)),await((b=($=this.options).onSuccess)==null?void 0:b.call($,vt,this.state.variables,this.state.context)),await((j=(_e=this.mutationCache.config).onSettled)==null?void 0:j.call(_e,vt,null,this.state.variables,this.state.context,this)),await((et=(tt=this.options).onSettled)==null?void 0:et.call(tt,vt,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:vt}),vt}catch(vt){try{var ct,st,ot,ht,dt,ft,mt,gt;throw await((ct=(st=this.mutationCache.config).onError)==null?void 0:ct.call(st,vt,this.state.variables,this.state.context,this)),await((ot=(ht=this.options).onError)==null?void 0:ot.call(ht,vt,this.state.variables,this.state.context)),await((dt=(ft=this.mutationCache.config).onSettled)==null?void 0:dt.call(ft,void 0,vt,this.state.variables,this.state.context,this)),await((mt=(gt=this.options).onSettled)==null?void 0:mt.call(gt,void 0,vt,this.state.variables,this.state.context)),vt}finally{this.dispatch({type:"error",error:vt})}}}dispatch(a){const o=c=>{switch(a.type){case"failed":return{...c,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...c,isPaused:!0};case"continue":return{...c,isPaused:!1};case"loading":return{...c,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"loading",variables:a.variables};case"success":return{...c,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...c,data:void 0,error:a.error,failureCount:c.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"};case"setState":return{...c,...a.state}}};this.state=o(this.state),notifyManager.batch(()=>{this.observers.forEach(c=>{c.onMutationUpdate(a)}),this.mutationCache.notify({mutation:this,type:"updated",action:a})})}}function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class MutationCache extends Subscribable{constructor(a){super(),this.config=a||{},this.mutations=[],this.mutationId=0}build(a,o,c){const d=new Mutation({mutationCache:this,logger:a.getLogger(),mutationId:++this.mutationId,options:a.defaultMutationOptions(o),state:c,defaultOptions:o.mutationKey?a.getMutationDefaults(o.mutationKey):void 0});return this.add(d),d}add(a){this.mutations.push(a),this.notify({type:"added",mutation:a})}remove(a){this.mutations=this.mutations.filter(o=>o!==a),this.notify({type:"removed",mutation:a})}clear(){notifyManager.batch(()=>{this.mutations.forEach(a=>{this.remove(a)})})}getAll(){return this.mutations}find(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(o=>matchMutation(a,o))}findAll(a){return this.mutations.filter(o=>matchMutation(a,o))}notify(a){notifyManager.batch(()=>{this.listeners.forEach(({listener:o})=>{o(a)})})}resumePausedMutations(){var a;return this.resuming=((a=this.resuming)!=null?a:Promise.resolve()).then(()=>{const o=this.mutations.filter(c=>c.state.isPaused);return notifyManager.batch(()=>o.reduce((c,d)=>c.then(()=>d.continue().catch(noop$4)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function infiniteQueryBehavior(){return{onFetch:s=>{s.fetchFn=()=>{var a,o,c,d,b,$;const j=(a=s.fetchOptions)==null||(o=a.meta)==null?void 0:o.refetchPage,_e=(c=s.fetchOptions)==null||(d=c.meta)==null?void 0:d.fetchMore,et=_e==null?void 0:_e.pageParam,tt=(_e==null?void 0:_e.direction)==="forward",rt=(_e==null?void 0:_e.direction)==="backward",nt=((b=s.state.data)==null?void 0:b.pages)||[],it=(($=s.state.data)==null?void 0:$.pageParams)||[];let at=it,ct=!1;const st=gt=>{Object.defineProperty(gt,"signal",{enumerable:!0,get:()=>{var vt;if((vt=s.signal)!=null&&vt.aborted)ct=!0;else{var yt;(yt=s.signal)==null||yt.addEventListener("abort",()=>{ct=!0})}return s.signal}})},ot=s.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+s.options.queryHash+"'")),ht=(gt,vt,yt,Et)=>(at=Et?[vt,...at]:[...at,vt],Et?[yt,...gt]:[...gt,yt]),dt=(gt,vt,yt,Et)=>{if(ct)return Promise.reject("Cancelled");if(typeof yt>"u"&&!vt&&gt.length)return Promise.resolve(gt);const St={queryKey:s.queryKey,pageParam:yt,meta:s.options.meta};st(St);const Ct=ot(St);return Promise.resolve(Ct).then(_t=>ht(gt,yt,_t,Et))};let ft;if(!nt.length)ft=dt([]);else if(tt){const gt=typeof et<"u",vt=gt?et:getNextPageParam(s.options,nt);ft=dt(nt,gt,vt)}else if(rt){const gt=typeof et<"u",vt=gt?et:getPreviousPageParam(s.options,nt);ft=dt(nt,gt,vt,!0)}else{at=[];const gt=typeof s.options.getNextPageParam>"u";ft=(j&&nt[0]?j(nt[0],0,nt):!0)?dt([],gt,it[0]):Promise.resolve(ht([],it[0],nt[0]));for(let yt=1;yt<nt.length;yt++)ft=ft.then(Et=>{if(j&&nt[yt]?j(nt[yt],yt,nt):!0){const Ct=gt?it[yt]:getNextPageParam(s.options,Et);return dt(Et,gt,Ct)}return Promise.resolve(ht(Et,it[yt],nt[yt]))})}return ft.then(gt=>({pages:gt,pageParams:at}))}}}}function getNextPageParam(s,a){return s.getNextPageParam==null?void 0:s.getNextPageParam(a[a.length-1],a)}function getPreviousPageParam(s,a){return s.getPreviousPageParam==null?void 0:s.getPreviousPageParam(a[0],a)}class QueryClient{constructor(a={}){this.queryCache=a.queryCache||new QueryCache,this.mutationCache=a.mutationCache||new MutationCache,this.logger=a.logger||defaultLogger,this.defaultOptions=a.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=focusManager.subscribe(()=>{focusManager.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(()=>{onlineManager.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var a,o;this.mountCount--,this.mountCount===0&&((a=this.unsubscribeFocus)==null||a.call(this),this.unsubscribeFocus=void 0,(o=this.unsubscribeOnline)==null||o.call(this),this.unsubscribeOnline=void 0)}isFetching(a,o){const[c]=parseFilterArgs(a,o);return c.fetchStatus="fetching",this.queryCache.findAll(c).length}isMutating(a){return this.mutationCache.findAll({...a,fetching:!0}).length}getQueryData(a,o){var c;return(c=this.queryCache.find(a,o))==null?void 0:c.state.data}ensureQueryData(a,o,c){const d=parseQueryArgs(a,o,c),b=this.getQueryData(d.queryKey);return b?Promise.resolve(b):this.fetchQuery(d)}getQueriesData(a){return this.getQueryCache().findAll(a).map(({queryKey:o,state:c})=>{const d=c.data;return[o,d]})}setQueryData(a,o,c){const d=this.queryCache.find(a),b=d==null?void 0:d.state.data,$=functionalUpdate(o,b);if(typeof $>"u")return;const j=parseQueryArgs(a),_e=this.defaultQueryOptions(j);return this.queryCache.build(this,_e).setData($,{...c,manual:!0})}setQueriesData(a,o,c){return notifyManager.batch(()=>this.getQueryCache().findAll(a).map(({queryKey:d})=>[d,this.setQueryData(d,o,c)]))}getQueryState(a,o){var c;return(c=this.queryCache.find(a,o))==null?void 0:c.state}removeQueries(a,o){const[c]=parseFilterArgs(a,o),d=this.queryCache;notifyManager.batch(()=>{d.findAll(c).forEach(b=>{d.remove(b)})})}resetQueries(a,o,c){const[d,b]=parseFilterArgs(a,o,c),$=this.queryCache,j={type:"active",...d};return notifyManager.batch(()=>($.findAll(d).forEach(_e=>{_e.reset()}),this.refetchQueries(j,b)))}cancelQueries(a,o,c){const[d,b={}]=parseFilterArgs(a,o,c);typeof b.revert>"u"&&(b.revert=!0);const $=notifyManager.batch(()=>this.queryCache.findAll(d).map(j=>j.cancel(b)));return Promise.all($).then(noop$4).catch(noop$4)}invalidateQueries(a,o,c){const[d,b]=parseFilterArgs(a,o,c);return notifyManager.batch(()=>{var $,j;if(this.queryCache.findAll(d).forEach(et=>{et.invalidate()}),d.refetchType==="none")return Promise.resolve();const _e={...d,type:($=(j=d.refetchType)!=null?j:d.type)!=null?$:"active"};return this.refetchQueries(_e,b)})}refetchQueries(a,o,c){const[d,b]=parseFilterArgs(a,o,c),$=notifyManager.batch(()=>this.queryCache.findAll(d).filter(_e=>!_e.isDisabled()).map(_e=>{var et;return _e.fetch(void 0,{...b,cancelRefetch:(et=b==null?void 0:b.cancelRefetch)!=null?et:!0,meta:{refetchPage:d.refetchPage}})}));let j=Promise.all($).then(noop$4);return b!=null&&b.throwOnError||(j=j.catch(noop$4)),j}fetchQuery(a,o,c){const d=parseQueryArgs(a,o,c),b=this.defaultQueryOptions(d);typeof b.retry>"u"&&(b.retry=!1);const $=this.queryCache.build(this,b);return $.isStaleByTime(b.staleTime)?$.fetch(b):Promise.resolve($.state.data)}prefetchQuery(a,o,c){return this.fetchQuery(a,o,c).then(noop$4).catch(noop$4)}fetchInfiniteQuery(a,o,c){const d=parseQueryArgs(a,o,c);return d.behavior=infiniteQueryBehavior(),this.fetchQuery(d)}prefetchInfiniteQuery(a,o,c){return this.fetchInfiniteQuery(a,o,c).then(noop$4).catch(noop$4)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(a){this.defaultOptions=a}setQueryDefaults(a,o){const c=this.queryDefaults.find(d=>hashQueryKey(a)===hashQueryKey(d.queryKey));c?c.defaultOptions=o:this.queryDefaults.push({queryKey:a,defaultOptions:o})}getQueryDefaults(a){if(!a)return;const o=this.queryDefaults.find(c=>partialMatchKey(a,c.queryKey));return o==null?void 0:o.defaultOptions}setMutationDefaults(a,o){const c=this.mutationDefaults.find(d=>hashQueryKey(a)===hashQueryKey(d.mutationKey));c?c.defaultOptions=o:this.mutationDefaults.push({mutationKey:a,defaultOptions:o})}getMutationDefaults(a){if(!a)return;const o=this.mutationDefaults.find(c=>partialMatchKey(a,c.mutationKey));return o==null?void 0:o.defaultOptions}defaultQueryOptions(a){if(a!=null&&a._defaulted)return a;const o={...this.defaultOptions.queries,...this.getQueryDefaults(a==null?void 0:a.queryKey),...a,_defaulted:!0};return!o.queryHash&&o.queryKey&&(o.queryHash=hashQueryKeyByOptions(o.queryKey,o)),typeof o.refetchOnReconnect>"u"&&(o.refetchOnReconnect=o.networkMode!=="always"),typeof o.useErrorBoundary>"u"&&(o.useErrorBoundary=!!o.suspense),o}defaultMutationOptions(a){return a!=null&&a._defaulted?a:{...this.defaultOptions.mutations,...this.getMutationDefaults(a==null?void 0:a.mutationKey),...a,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class QueryObserver extends Subscribable{constructor(a,o){super(),this.client=a,this.options=o,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(o)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(a,o){const c=this.options,d=this.currentQuery;if(this.options=this.client.defaultQueryOptions(a),shallowEqualObjects(c,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=c.queryKey),this.updateQuery();const b=this.hasListeners();b&&shouldFetchOptionally(this.currentQuery,d,this.options,c)&&this.executeFetch(),this.updateResult(o),b&&(this.currentQuery!==d||this.options.enabled!==c.enabled||this.options.staleTime!==c.staleTime)&&this.updateStaleTimeout();const $=this.computeRefetchInterval();b&&(this.currentQuery!==d||this.options.enabled!==c.enabled||$!==this.currentRefetchInterval)&&this.updateRefetchInterval($)}getOptimisticResult(a){const o=this.client.getQueryCache().build(this.client,a),c=this.createResult(o,a);return shouldAssignObserverCurrentProperties(this,c,a)&&(this.currentResult=c,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),c}getCurrentResult(){return this.currentResult}trackResult(a){const o={};return Object.keys(a).forEach(c=>{Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(c),a[c])})}),o}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:a,...o}={}){return this.fetch({...o,meta:{refetchPage:a}})}fetchOptimistic(a){const o=this.client.defaultQueryOptions(a),c=this.client.getQueryCache().build(this.client,o);return c.isFetchingOptimistic=!0,c.fetch().then(()=>this.createResult(c,o))}fetch(a){var o;return this.executeFetch({...a,cancelRefetch:(o=a.cancelRefetch)!=null?o:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(a){this.updateQuery();let o=this.currentQuery.fetch(this.options,a);return a!=null&&a.throwOnError||(o=o.catch(noop$4)),o}updateStaleTimeout(){if(this.clearStaleTimeout(),isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))return;const o=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},o)}computeRefetchInterval(){var a;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(a=this.options.refetchInterval)!=null?a:!1}updateRefetchInterval(a){this.clearRefetchInterval(),this.currentRefetchInterval=a,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(a,o){const c=this.currentQuery,d=this.options,b=this.currentResult,$=this.currentResultState,j=this.currentResultOptions,_e=a!==c,et=_e?a.state:this.currentQueryInitialState,tt=_e?this.currentResult:this.previousQueryResult,{state:rt}=a;let{dataUpdatedAt:nt,error:it,errorUpdatedAt:at,fetchStatus:ct,status:st}=rt,ot=!1,ht=!1,dt;if(o._optimisticResults){const yt=this.hasListeners(),Et=!yt&&shouldFetchOnMount(a,o),St=yt&&shouldFetchOptionally(a,c,o,d);(Et||St)&&(ct=canFetch(a.options.networkMode)?"fetching":"paused",nt||(st="loading")),o._optimisticResults==="isRestoring"&&(ct="idle")}if(o.keepPreviousData&&!rt.dataUpdatedAt&&tt!=null&&tt.isSuccess&&st!=="error")dt=tt.data,nt=tt.dataUpdatedAt,st=tt.status,ot=!0;else if(o.select&&typeof rt.data<"u")if(b&&rt.data===($==null?void 0:$.data)&&o.select===this.selectFn)dt=this.selectResult;else try{this.selectFn=o.select,dt=o.select(rt.data),dt=replaceData(b==null?void 0:b.data,dt,o),this.selectResult=dt,this.selectError=null}catch(yt){this.selectError=yt}else dt=rt.data;if(typeof o.placeholderData<"u"&&typeof dt>"u"&&st==="loading"){let yt;if(b!=null&&b.isPlaceholderData&&o.placeholderData===(j==null?void 0:j.placeholderData))yt=b.data;else if(yt=typeof o.placeholderData=="function"?o.placeholderData():o.placeholderData,o.select&&typeof yt<"u")try{yt=o.select(yt),this.selectError=null}catch(Et){this.selectError=Et}typeof yt<"u"&&(st="success",dt=replaceData(b==null?void 0:b.data,yt,o),ht=!0)}this.selectError&&(it=this.selectError,dt=this.selectResult,at=Date.now(),st="error");const ft=ct==="fetching",mt=st==="loading",gt=st==="error";return{status:st,fetchStatus:ct,isLoading:mt,isSuccess:st==="success",isError:gt,isInitialLoading:mt&&ft,data:dt,dataUpdatedAt:nt,error:it,errorUpdatedAt:at,failureCount:rt.fetchFailureCount,failureReason:rt.fetchFailureReason,errorUpdateCount:rt.errorUpdateCount,isFetched:rt.dataUpdateCount>0||rt.errorUpdateCount>0,isFetchedAfterMount:rt.dataUpdateCount>et.dataUpdateCount||rt.errorUpdateCount>et.errorUpdateCount,isFetching:ft,isRefetching:ft&&!mt,isLoadingError:gt&&rt.dataUpdatedAt===0,isPaused:ct==="paused",isPlaceholderData:ht,isPreviousData:ot,isRefetchError:gt&&rt.dataUpdatedAt!==0,isStale:isStale(a,o),refetch:this.refetch,remove:this.remove}}updateResult(a){const o=this.currentResult,c=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,shallowEqualObjects(c,o))return;this.currentResult=c;const d={cache:!0},b=()=>{if(!o)return!0;const{notifyOnChangeProps:$}=this.options,j=typeof $=="function"?$():$;if(j==="all"||!j&&!this.trackedProps.size)return!0;const _e=new Set(j??this.trackedProps);return this.options.useErrorBoundary&&_e.add("error"),Object.keys(this.currentResult).some(et=>{const tt=et;return this.currentResult[tt]!==o[tt]&&_e.has(tt)})};(a==null?void 0:a.listeners)!==!1&&b()&&(d.listeners=!0),this.notify({...d,...a})}updateQuery(){const a=this.client.getQueryCache().build(this.client,this.options);if(a===this.currentQuery)return;const o=this.currentQuery;this.currentQuery=a,this.currentQueryInitialState=a.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(o==null||o.removeObserver(this),a.addObserver(this))}onQueryUpdate(a){const o={};a.type==="success"?o.onSuccess=!a.manual:a.type==="error"&&!isCancelledError(a.error)&&(o.onError=!0),this.updateResult(o),this.hasListeners()&&this.updateTimers()}notify(a){notifyManager.batch(()=>{if(a.onSuccess){var o,c,d,b;(o=(c=this.options).onSuccess)==null||o.call(c,this.currentResult.data),(d=(b=this.options).onSettled)==null||d.call(b,this.currentResult.data,null)}else if(a.onError){var $,j,_e,et;($=(j=this.options).onError)==null||$.call(j,this.currentResult.error),(_e=(et=this.options).onSettled)==null||_e.call(et,void 0,this.currentResult.error)}a.listeners&&this.listeners.forEach(({listener:tt})=>{tt(this.currentResult)}),a.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function shouldLoadOnMount(s,a){return a.enabled!==!1&&!s.state.dataUpdatedAt&&!(s.state.status==="error"&&a.retryOnMount===!1)}function shouldFetchOnMount(s,a){return shouldLoadOnMount(s,a)||s.state.dataUpdatedAt>0&&shouldFetchOn(s,a,a.refetchOnMount)}function shouldFetchOn(s,a,o){if(a.enabled!==!1){const c=typeof o=="function"?o(s):o;return c==="always"||c!==!1&&isStale(s,a)}return!1}function shouldFetchOptionally(s,a,o,c){return o.enabled!==!1&&(s!==a||c.enabled===!1)&&(!o.suspense||s.state.status!=="error")&&isStale(s,o)}function isStale(s,a){return s.isStaleByTime(a.staleTime)}function shouldAssignObserverCurrentProperties(s,a,o){return o.keepPreviousData?!1:o.placeholderData!==void 0?a.isPlaceholderData:!shallowEqualObjects(s.getCurrentResult(),a)}let MutationObserver$1=class extends Subscribable{constructor(a,o){super(),this.client=a,this.setOptions(o),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){var o;const c=this.options;this.options=this.client.defaultMutationOptions(a),shallowEqualObjects(c,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(o=this.currentMutation)==null||o.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var a;(a=this.currentMutation)==null||a.removeObserver(this)}}onMutationUpdate(a){this.updateResult();const o={listeners:!0};a.type==="success"?o.onSuccess=!0:a.type==="error"&&(o.onError=!0),this.notify(o)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(a,o){return this.mutateOptions=o,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof a<"u"?a:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const a=this.currentMutation?this.currentMutation.state:getDefaultState(),o={...a,isLoading:a.status==="loading",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=o}notify(a){notifyManager.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(a.onSuccess){var o,c,d,b;(o=(c=this.mutateOptions).onSuccess)==null||o.call(c,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(d=(b=this.mutateOptions).onSettled)==null||d.call(b,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(a.onError){var $,j,_e,et;($=(j=this.mutateOptions).onError)==null||$.call(j,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(_e=(et=this.mutateOptions).onSettled)==null||_e.call(et,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}a.listeners&&this.listeners.forEach(({listener:tt})=>{tt(this.currentResult)})})}};var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var k=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m=e.useEffect,n$1=e.useLayoutEffect,p$1=e.useDebugValue;function q$1(s,a){var o=a(),c=l({inst:{value:o,getSnapshot:a}}),d=c[0].inst,b=c[1];return n$1(function(){d.value=o,d.getSnapshot=a,r$1(d)&&b({inst:d})},[s,o,a]),m(function(){return r$1(d)&&b({inst:d}),s(function(){r$1(d)&&b({inst:d})})},[s]),p$1(o),o}function r$1(s){var a=s.getSnapshot;s=s.value;try{var o=a();return!k(s,o)}catch{return!0}}function t$1(s,a){return a()}var u$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$1;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const useSyncExternalStore=shimExports.useSyncExternalStore,defaultContext=reactExports.createContext(void 0),QueryClientSharingContext=reactExports.createContext(!1);function getQueryClientContext(s,a){return s||(a&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext)}const useQueryClient=({context:s}={})=>{const a=reactExports.useContext(getQueryClientContext(s,reactExports.useContext(QueryClientSharingContext)));if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},QueryClientProvider=({client:s,children:a,context:o,contextSharing:c=!1})=>{reactExports.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]);const d=getQueryClientContext(o,c);return reactExports.createElement(QueryClientSharingContext.Provider,{value:!o&&c},reactExports.createElement(d.Provider,{value:s},a))},IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}const QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(s,a){return typeof s=="function"?s(...a):!!s}const ensurePreventErrorBoundaryRetry=(s,a)=>{(s.suspense||s.useErrorBoundary)&&(a.isReset()||(s.retryOnMount=!1))},useClearResetErrorBoundary=s=>{reactExports.useEffect(()=>{s.clearReset()},[s])},getHasError=({result:s,errorResetBoundary:a,useErrorBoundary:o,query:c})=>s.isError&&!a.isReset()&&!s.isFetching&&shouldThrowError(o,[s.error,c]),ensureStaleTime=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},willFetch=(s,a)=>s.isLoading&&s.isFetching&&!a,shouldSuspend=(s,a,o)=>(s==null?void 0:s.suspense)&&willFetch(a,o),fetchOptimistic=(s,a,o)=>a.fetchOptimistic(s).then(({data:c})=>{s.onSuccess==null||s.onSuccess(c),s.onSettled==null||s.onSettled(c,null)}).catch(c=>{o.clearReset(),s.onError==null||s.onError(c),s.onSettled==null||s.onSettled(void 0,c)});function useBaseQuery(s,a){const o=useQueryClient({context:s.context}),c=useIsRestoring(),d=useQueryErrorResetBoundary(),b=o.defaultQueryOptions(s);b._optimisticResults=c?"isRestoring":"optimistic",b.onError&&(b.onError=notifyManager.batchCalls(b.onError)),b.onSuccess&&(b.onSuccess=notifyManager.batchCalls(b.onSuccess)),b.onSettled&&(b.onSettled=notifyManager.batchCalls(b.onSettled)),ensureStaleTime(b),ensurePreventErrorBoundaryRetry(b,d),useClearResetErrorBoundary(d);const[$]=reactExports.useState(()=>new a(o,b)),j=$.getOptimisticResult(b);if(useSyncExternalStore(reactExports.useCallback(_e=>{const et=c?()=>{}:$.subscribe(notifyManager.batchCalls(_e));return $.updateResult(),et},[$,c]),()=>$.getCurrentResult(),()=>$.getCurrentResult()),reactExports.useEffect(()=>{$.setOptions(b,{listeners:!1})},[b,$]),shouldSuspend(b,j,c))throw fetchOptimistic(b,$,d);if(getHasError({result:j,errorResetBoundary:d,useErrorBoundary:b.useErrorBoundary,query:$.getCurrentQuery()}))throw j.error;return b.notifyOnChangeProps?j:$.trackResult(j)}function useQuery(s,a,o){const c=parseQueryArgs(s,a,o);return useBaseQuery(c,QueryObserver)}function useMutation(s,a,o){const c=parseMutationArgs(s,a,o),d=useQueryClient({context:c.context}),[b]=reactExports.useState(()=>new MutationObserver$1(d,c));reactExports.useEffect(()=>{b.setOptions(c)},[b,c]);const $=useSyncExternalStore(reactExports.useCallback(_e=>b.subscribe(notifyManager.batchCalls(_e)),[b]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),j=reactExports.useCallback((_e,et)=>{b.mutate(_e,et).catch(noop$3)},[b]);if($.error&&shouldThrowError(b.options.useErrorBoundary,[$.error]))throw $.error;return{...$,mutate:j,mutateAsync:$.mutate}}function noop$3(){}/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},_extends$3.apply(this,arguments)}var Action;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(s){s===void 0&&(s={});function a(c,d){let{pathname:b,search:$,hash:j}=c.location;return createLocation("",{pathname:b,search:$,hash:j},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(c,d){return typeof d=="string"?d:createPath$1(d)}return getUrlBasedHistory(a,o,null,s)}function invariant$1(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function warning$1(s,a){if(!s){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(s,a){return{usr:s.state,key:s.key,idx:a}}function createLocation(s,a,o,c){return o===void 0&&(o=null),_extends$3({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof a=="string"?parsePath(a):a,{state:o,key:a&&a.key||c||createKey()})}function createPath$1(s){let{pathname:a="/",search:o="",hash:c=""}=s;return o&&o!=="?"&&(a+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(a+=c.charAt(0)==="#"?c:"#"+c),a}function parsePath(s){let a={};if(s){let o=s.indexOf("#");o>=0&&(a.hash=s.substr(o),s=s.substr(0,o));let c=s.indexOf("?");c>=0&&(a.search=s.substr(c),s=s.substr(0,c)),s&&(a.pathname=s)}return a}function getUrlBasedHistory(s,a,o,c){c===void 0&&(c={});let{window:d=document.defaultView,v5Compat:b=!1}=c,$=d.history,j=Action.Pop,_e=null,et=tt();et==null&&(et=0,$.replaceState(_extends$3({},$.state,{idx:et}),""));function tt(){return($.state||{idx:null}).idx}function rt(){j=Action.Pop;let st=tt(),ot=st==null?null:st-et;et=st,_e&&_e({action:j,location:ct.location,delta:ot})}function nt(st,ot){j=Action.Push;let ht=createLocation(ct.location,st,ot);o&&o(ht,st),et=tt()+1;let dt=getHistoryState(ht,et),ft=ct.createHref(ht);try{$.pushState(dt,"",ft)}catch(mt){if(mt instanceof DOMException&&mt.name==="DataCloneError")throw mt;d.location.assign(ft)}b&&_e&&_e({action:j,location:ct.location,delta:1})}function it(st,ot){j=Action.Replace;let ht=createLocation(ct.location,st,ot);o&&o(ht,st),et=tt();let dt=getHistoryState(ht,et),ft=ct.createHref(ht);$.replaceState(dt,"",ft),b&&_e&&_e({action:j,location:ct.location,delta:0})}function at(st){let ot=d.location.origin!=="null"?d.location.origin:d.location.href,ht=typeof st=="string"?st:createPath$1(st);return invariant$1(ot,"No window.location.(origin|href) available to create URL for href: "+ht),new URL(ht,ot)}let ct={get action(){return j},get location(){return s(d,$)},listen(st){if(_e)throw new Error("A history only accepts one active listener");return d.addEventListener(PopStateEventType,rt),_e=st,()=>{d.removeEventListener(PopStateEventType,rt),_e=null}},createHref(st){return a(d,st)},createURL:at,encodeLocation(st){let ot=at(st);return{pathname:ot.pathname,search:ot.search,hash:ot.hash}},push:nt,replace:it,go(st){return $.go(st)}};return ct}var ResultType;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(s){return s.index===!0}function convertRoutesToDataRoutes(s,a,o,c){return o===void 0&&(o=[]),c===void 0&&(c={}),s.map((d,b)=>{let $=[...o,b],j=typeof d.id=="string"?d.id:$.join("-");if(invariant$1(d.index!==!0||!d.children,"Cannot specify children on an index route"),invariant$1(!c[j],'Found a route id collision on id "'+j+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(d)){let _e=_extends$3({},d,a(d),{id:j});return c[j]=_e,_e}else{let _e=_extends$3({},d,a(d),{id:j,children:void 0});return c[j]=_e,d.children&&(_e.children=convertRoutesToDataRoutes(d.children,a,$,c)),_e}})}function matchRoutes(s,a,o){o===void 0&&(o="/");let c=typeof a=="string"?parsePath(a):a,d=stripBasename(c.pathname||"/",o);if(d==null)return null;let b=flattenRoutes(s);rankRouteBranches(b);let $=null;for(let j=0;$==null&&j<b.length;++j)$=matchRouteBranch(b[j],safelyDecodeURI(d));return $}function convertRouteMatchToUiMatch(s,a){let{route:o,pathname:c,params:d}=s;return{id:o.id,pathname:c,params:d,data:a[o.id],handle:o.handle}}function flattenRoutes(s,a,o,c){a===void 0&&(a=[]),o===void 0&&(o=[]),c===void 0&&(c="");let d=(b,$,j)=>{let _e={relativePath:j===void 0?b.path||"":j,caseSensitive:b.caseSensitive===!0,childrenIndex:$,route:b};_e.relativePath.startsWith("/")&&(invariant$1(_e.relativePath.startsWith(c),'Absolute route path "'+_e.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_e.relativePath=_e.relativePath.slice(c.length));let et=joinPaths([c,_e.relativePath]),tt=o.concat(_e);b.children&&b.children.length>0&&(invariant$1(b.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+et+'".')),flattenRoutes(b.children,a,tt,et)),!(b.path==null&&!b.index)&&a.push({path:et,score:computeScore(et,b.index),routesMeta:tt})};return s.forEach((b,$)=>{var j;if(b.path===""||!((j=b.path)!=null&&j.includes("?")))d(b,$);else for(let _e of explodeOptionalSegments(b.path))d(b,$,_e)}),a}function explodeOptionalSegments(s){let a=s.split("/");if(a.length===0)return[];let[o,...c]=a,d=o.endsWith("?"),b=o.replace(/\?$/,"");if(c.length===0)return d?[b,""]:[b];let $=explodeOptionalSegments(c.join("/")),j=[];return j.push(...$.map(_e=>_e===""?b:[b,_e].join("/"))),d&&j.push(...$),j.map(_e=>s.startsWith("/")&&_e===""?"/":_e)}function rankRouteBranches(s){s.sort((a,o)=>a.score!==o.score?o.score-a.score:compareIndexes(a.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,a){let o=s.split("/"),c=o.length;return o.some(isSplat)&&(c+=splatPenalty),a&&(c+=indexRouteValue),o.filter(d=>!isSplat(d)).reduce((d,b)=>d+(paramRe.test(b)?dynamicSegmentValue:b===""?emptySegmentValue:staticSegmentValue),c)}function compareIndexes(s,a){return s.length===a.length&&s.slice(0,-1).every((c,d)=>c===a[d])?s[s.length-1]-a[a.length-1]:0}function matchRouteBranch(s,a){let{routesMeta:o}=s,c={},d="/",b=[];for(let $=0;$<o.length;++$){let j=o[$],_e=$===o.length-1,et=d==="/"?a:a.slice(d.length)||"/",tt=matchPath({path:j.relativePath,caseSensitive:j.caseSensitive,end:_e},et);if(!tt)return null;Object.assign(c,tt.params);let rt=j.route;b.push({params:c,pathname:joinPaths([d,tt.pathname]),pathnameBase:normalizePathname(joinPaths([d,tt.pathnameBase])),route:rt}),tt.pathnameBase!=="/"&&(d=joinPaths([d,tt.pathnameBase]))}return b}function matchPath(s,a){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[o,c]=compilePath(s.path,s.caseSensitive,s.end),d=a.match(o);if(!d)return null;let b=d[0],$=b.replace(/(.)\/+$/,"$1"),j=d.slice(1);return{params:c.reduce((et,tt,rt)=>{if(tt==="*"){let nt=j[rt]||"";$=b.slice(0,b.length-nt.length).replace(/(.)\/+$/,"$1")}return et[tt]=safelyDecodeURIComponent(j[rt]||"",tt),et},{}),pathname:b,pathnameBase:$,pattern:s}}function compilePath(s,a,o){a===void 0&&(a=!1),o===void 0&&(o=!0),warning$1(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let c=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,($,j)=>(c.push(j),"/([^\\/]+)"));return s.endsWith("*")?(c.push("*"),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,a?void 0:"i"),c]}function safelyDecodeURI(s){try{return decodeURI(s)}catch(a){return warning$1(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),s}}function safelyDecodeURIComponent(s,a){try{return decodeURIComponent(s)}catch(o){return warning$1(!1,'The value for the URL param "'+a+'" will not be decoded because'+(' the string "'+s+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),s}}function stripBasename(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let o=a.endsWith("/")?a.length-1:a.length,c=s.charAt(o);return c&&c!=="/"?null:s.slice(o)||"/"}function resolvePath(s,a){a===void 0&&(a="/");let{pathname:o,search:c="",hash:d=""}=typeof s=="string"?parsePath(s):s;return{pathname:o?o.startsWith("/")?o:resolvePathname(o,a):a,search:normalizeSearch(c),hash:normalizeHash(d)}}function resolvePathname(s,a){let o=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?o.length>1&&o.pop():d!=="."&&o.push(d)}),o.length>1?o.join("/"):"/"}function getInvalidPathError(s,a,o,c){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(s){return s.filter((a,o)=>o===0||a.route.path&&a.route.path.length>0)}function resolveTo(s,a,o,c){c===void 0&&(c=!1);let d;typeof s=="string"?d=parsePath(s):(d=_extends$3({},s),invariant$1(!d.pathname||!d.pathname.includes("?"),getInvalidPathError("?","pathname","search",d)),invariant$1(!d.pathname||!d.pathname.includes("#"),getInvalidPathError("#","pathname","hash",d)),invariant$1(!d.search||!d.search.includes("#"),getInvalidPathError("#","search","hash",d)));let b=s===""||d.pathname==="",$=b?"/":d.pathname,j;if(c||$==null)j=o;else{let rt=a.length-1;if($.startsWith("..")){let nt=$.split("/");for(;nt[0]==="..";)nt.shift(),rt-=1;d.pathname=nt.join("/")}j=rt>=0?a[rt]:"/"}let _e=resolvePath(d,j),et=$&&$!=="/"&&$.endsWith("/"),tt=(b||$===".")&&o.endsWith("/");return!_e.pathname.endsWith("/")&&(et||tt)&&(_e.pathname+="/"),_e}const joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;class ErrorResponseImpl{constructor(a,o,c,d){d===void 0&&(d=!1),this.status=a,this.statusText=o||"",this.internal=d,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}}function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=s=>({hasErrorBoundary:!!s.hasErrorBoundary});function createRouter(s){const a=s.window?s.window:typeof window<"u"?window:void 0,o=typeof a<"u"&&typeof a.document<"u"&&typeof a.document.createElement<"u",c=!o;invariant$1(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let d;if(s.mapRouteProperties)d=s.mapRouteProperties;else if(s.detectErrorBoundary){let Vt=s.detectErrorBoundary;d=Ht=>({hasErrorBoundary:Vt(Ht)})}else d=defaultMapRouteProperties;let b={},$=convertRoutesToDataRoutes(s.routes,d,void 0,b),j,_e=s.basename||"/",et=_extends$3({v7_normalizeFormMethod:!1,v7_prependBasename:!1},s.future),tt=null,rt=new Set,nt=null,it=null,at=null,ct=s.hydrationData!=null,st=matchRoutes($,s.history.location,_e),ot=null;if(st==null){let Vt=getInternalRouterError(404,{pathname:s.history.location.pathname}),{matches:Ht,route:Kt}=getShortCircuitMatches($);st=Ht,ot={[Kt.id]:Vt}}let ht=!st.some(Vt=>Vt.route.lazy)&&(!st.some(Vt=>Vt.route.loader)||s.hydrationData!=null),dt,ft={historyAction:s.history.action,location:s.history.location,matches:st,initialized:ht,navigation:IDLE_NAVIGATION,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||ot,fetchers:new Map,blockers:new Map},mt=Action.Pop,gt=!1,vt,yt=!1,Et=!1,St=[],Ct=[],wt=new Map,_t=0,Tt=-1,Mt=new Map,Bt=new Set,Rt=new Map,bt=new Map,Pt=new Map,Dt=!1;function $t(){return tt=s.history.listen(Vt=>{let{action:Ht,location:Kt,delta:vr}=Vt;if(Dt){Dt=!1;return}warning$1(Pt.size===0||vr!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let wr=xr({currentLocation:ft.location,nextLocation:Kt,historyAction:Ht});if(wr&&vr!=null){Dt=!0,s.history.go(vr*-1),Sr(wr,{state:"blocked",location:Kt,proceed(){Sr(wr,{state:"proceeding",proceed:void 0,reset:void 0,location:Kt}),s.history.go(vr)},reset(){let Gt=new Map(ft.blockers);Gt.set(wr,IDLE_BLOCKER),Qt({blockers:Gt})}});return}return Ar(Ht,Kt)}),ft.initialized||Ar(Action.Pop,ft.location),dt}function Lt(){tt&&tt(),rt.clear(),vt&&vt.abort(),ft.fetchers.forEach((Vt,Ht)=>br(Ht)),ft.blockers.forEach((Vt,Ht)=>ir(Ht))}function Jt(Vt){return rt.add(Vt),()=>rt.delete(Vt)}function Qt(Vt){ft=_extends$3({},ft,Vt),rt.forEach(Ht=>Ht(ft))}function or(Vt,Ht){var Kt,vr;let wr=ft.actionData!=null&&ft.navigation.formMethod!=null&&isMutationMethod(ft.navigation.formMethod)&&ft.navigation.state==="loading"&&((Kt=Vt.state)==null?void 0:Kt._isRedirect)!==!0,Gt;Ht.actionData?Object.keys(Ht.actionData).length>0?Gt=Ht.actionData:Gt=null:wr?Gt=ft.actionData:Gt=null;let pr=Ht.loaderData?mergeLoaderData(ft.loaderData,Ht.loaderData,Ht.matches||[],Ht.errors):ft.loaderData,Wt=ft.blockers;Wt.size>0&&(Wt=new Map(Wt),Wt.forEach((Cr,Vr)=>Wt.set(Vr,IDLE_BLOCKER)));let nr=gt===!0||ft.navigation.formMethod!=null&&isMutationMethod(ft.navigation.formMethod)&&((vr=Vt.state)==null?void 0:vr._isRedirect)!==!0;j&&($=j,j=void 0),yt||mt===Action.Pop||(mt===Action.Push?s.history.push(Vt,Vt.state):mt===Action.Replace&&s.history.replace(Vt,Vt.state)),Qt(_extends$3({},Ht,{actionData:Gt,loaderData:pr,historyAction:mt,location:Vt,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:zt(Vt,Ht.matches||ft.matches),preventScrollReset:nr,blockers:Wt})),mt=Action.Pop,gt=!1,yt=!1,Et=!1,St=[],Ct=[]}async function er(Vt,Ht){if(typeof Vt=="number"){s.history.go(Vt);return}let Kt=normalizeTo(ft.location,ft.matches,_e,et.v7_prependBasename,Vt,Ht==null?void 0:Ht.fromRouteId,Ht==null?void 0:Ht.relative),{path:vr,submission:wr,error:Gt}=normalizeNavigateOptions(et.v7_normalizeFormMethod,!1,Kt,Ht),pr=ft.location,Wt=createLocation(ft.location,vr,Ht&&Ht.state);Wt=_extends$3({},Wt,s.history.encodeLocation(Wt));let nr=Ht&&Ht.replace!=null?Ht.replace:void 0,Cr=Action.Push;nr===!0?Cr=Action.Replace:nr===!1||wr!=null&&isMutationMethod(wr.formMethod)&&wr.formAction===ft.location.pathname+ft.location.search&&(Cr=Action.Replace);let Vr=Ht&&"preventScrollReset"in Ht?Ht.preventScrollReset===!0:void 0,Ur=xr({currentLocation:pr,nextLocation:Wt,historyAction:Cr});if(Ur){Sr(Ur,{state:"blocked",location:Wt,proceed(){Sr(Ur,{state:"proceeding",proceed:void 0,reset:void 0,location:Wt}),er(Vt,Ht)},reset(){let Qr=new Map(ft.blockers);Qr.set(Ur,IDLE_BLOCKER),Qt({blockers:Qr})}});return}return await Ar(Cr,Wt,{submission:wr,pendingError:Gt,preventScrollReset:Vr,replace:Ht&&Ht.replace})}function sr(){if(Br(),Qt({revalidation:"loading"}),ft.navigation.state!=="submitting"){if(ft.navigation.state==="idle"){Ar(ft.historyAction,ft.location,{startUninterruptedRevalidation:!0});return}Ar(mt||ft.historyAction,ft.navigation.location,{overrideNavigation:ft.navigation})}}async function Ar(Vt,Ht,Kt){vt&&vt.abort(),vt=null,mt=Vt,yt=(Kt&&Kt.startUninterruptedRevalidation)===!0,cr(ft.location,ft.matches),gt=(Kt&&Kt.preventScrollReset)===!0;let vr=j||$,wr=Kt&&Kt.overrideNavigation,Gt=matchRoutes(vr,Ht,_e);if(!Gt){let Qr=getInternalRouterError(404,{pathname:Ht.pathname}),{matches:sn,route:an}=getShortCircuitMatches(vr);Ir(),or(Ht,{matches:sn,loaderData:{},errors:{[an.id]:Qr}});return}if(ft.initialized&&!Et&&isHashChangeOnly(ft.location,Ht)&&!(Kt&&Kt.submission&&isMutationMethod(Kt.submission.formMethod))){or(Ht,{matches:Gt});return}vt=new AbortController;let pr=createClientSideRequest(s.history,Ht,vt.signal,Kt&&Kt.submission),Wt,nr;if(Kt&&Kt.pendingError)nr={[findNearestBoundary(Gt).route.id]:Kt.pendingError};else if(Kt&&Kt.submission&&isMutationMethod(Kt.submission.formMethod)){let Qr=await Er(pr,Ht,Kt.submission,Gt,{replace:Kt.replace});if(Qr.shortCircuited)return;Wt=Qr.pendingActionData,nr=Qr.pendingActionError,wr=getLoadingNavigation(Ht,Kt.submission),pr=new Request(pr.url,{signal:pr.signal})}let{shortCircuited:Cr,loaderData:Vr,errors:Ur}=await Tr(pr,Ht,Gt,wr,Kt&&Kt.submission,Kt&&Kt.fetcherSubmission,Kt&&Kt.replace,Wt,nr);Cr||(vt=null,or(Ht,_extends$3({matches:Gt},Wt?{actionData:Wt}:{},{loaderData:Vr,errors:Ur})))}async function Er(Vt,Ht,Kt,vr,wr){wr===void 0&&(wr={}),Br();let Gt=getSubmittingNavigation(Ht,Kt);Qt({navigation:Gt});let pr,Wt=getTargetMatch(vr,Ht);if(!Wt.route.action&&!Wt.route.lazy)pr={type:ResultType.error,error:getInternalRouterError(405,{method:Vt.method,pathname:Ht.pathname,routeId:Wt.route.id})};else if(pr=await callLoaderOrAction("action",Vt,Wt,vr,b,d,_e),Vt.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(pr)){let nr;return wr&&wr.replace!=null?nr=wr.replace:nr=pr.location===ft.location.pathname+ft.location.search,await yr(ft,pr,{submission:Kt,replace:nr}),{shortCircuited:!0}}if(isErrorResult(pr)){let nr=findNearestBoundary(vr,Wt.route.id);return(wr&&wr.replace)!==!0&&(mt=Action.Push),{pendingActionData:{},pendingActionError:{[nr.route.id]:pr.error}}}if(isDeferredResult(pr))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Wt.route.id]:pr.data}}}async function Tr(Vt,Ht,Kt,vr,wr,Gt,pr,Wt,nr){let Cr=vr||getLoadingNavigation(Ht,wr),Vr=wr||Gt||getSubmissionFromNavigation(Cr),Ur=j||$,[Qr,sn]=getMatchesToLoad(s.history,ft,Kt,Vr,Ht,Et,St,Ct,Rt,Bt,Ur,_e,Wt,nr);if(Ir(on=>!(Kt&&Kt.some(Un=>Un.route.id===on))||Qr&&Qr.some(Un=>Un.route.id===on)),Tt=++_t,Qr.length===0&&sn.length===0){let on=Wr();return or(Ht,_extends$3({matches:Kt,loaderData:{},errors:nr||null},Wt?{actionData:Wt}:{},on?{fetchers:new Map(ft.fetchers)}:{})),{shortCircuited:!0}}if(!yt){sn.forEach(Un=>{let ga=ft.fetchers.get(Un.key),Nt=getLoadingFetcher(void 0,ga?ga.data:void 0);ft.fetchers.set(Un.key,Nt)});let on=Wt||ft.actionData;Qt(_extends$3({navigation:Cr},on?Object.keys(on).length===0?{actionData:null}:{actionData:on}:{},sn.length>0?{fetchers:new Map(ft.fetchers)}:{}))}sn.forEach(on=>{wt.has(on.key)&&Pr(on.key),on.controller&&wt.set(on.key,on.controller)});let an=()=>sn.forEach(on=>Pr(on.key));vt&&vt.signal.addEventListener("abort",an);let{results:xn,loaderResults:An,fetcherResults:Cs}=await mr(ft.matches,Kt,Qr,sn,Vt);if(Vt.signal.aborted)return{shortCircuited:!0};vt&&vt.signal.removeEventListener("abort",an),sn.forEach(on=>wt.delete(on.key));let Vn=findRedirect(xn);if(Vn){if(Vn.idx>=Qr.length){let on=sn[Vn.idx-Qr.length].key;Bt.add(on)}return await yr(ft,Vn.result,{replace:pr}),{shortCircuited:!0}}let{loaderData:Hn,errors:Kn}=processLoaderData(ft,Kt,Qr,An,nr,sn,Cs,bt);bt.forEach((on,Un)=>{on.subscribe(ga=>{(ga||on.done)&&bt.delete(Un)})});let _s=Wr(),zn=Ot(Tt),bs=_s||zn||sn.length>0;return _extends$3({loaderData:Hn,errors:Kn},bs?{fetchers:new Map(ft.fetchers)}:{})}function ur(Vt){return ft.fetchers.get(Vt)||IDLE_FETCHER}function kt(Vt,Ht,Kt,vr){if(c)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");wt.has(Vt)&&Pr(Vt);let wr=j||$,Gt=normalizeTo(ft.location,ft.matches,_e,et.v7_prependBasename,Kt,Ht,vr==null?void 0:vr.relative),pr=matchRoutes(wr,Gt,_e);if(!pr){_r(Vt,Ht,getInternalRouterError(404,{pathname:Gt}));return}let{path:Wt,submission:nr,error:Cr}=normalizeNavigateOptions(et.v7_normalizeFormMethod,!0,Gt,vr);if(Cr){_r(Vt,Ht,Cr);return}let Vr=getTargetMatch(pr,Wt);if(gt=(vr&&vr.preventScrollReset)===!0,nr&&isMutationMethod(nr.formMethod)){Xt(Vt,Ht,Wt,Vr,pr,nr);return}Rt.set(Vt,{routeId:Ht,path:Wt}),ar(Vt,Ht,Wt,Vr,pr,nr)}async function Xt(Vt,Ht,Kt,vr,wr,Gt){if(Br(),Rt.delete(Vt),!vr.route.action&&!vr.route.lazy){let Yt=getInternalRouterError(405,{method:Gt.formMethod,pathname:Kt,routeId:Ht});_r(Vt,Ht,Yt);return}let pr=ft.fetchers.get(Vt),Wt=getSubmittingFetcher(Gt,pr);ft.fetchers.set(Vt,Wt),Qt({fetchers:new Map(ft.fetchers)});let nr=new AbortController,Cr=createClientSideRequest(s.history,Kt,nr.signal,Gt);wt.set(Vt,nr);let Vr=_t,Ur=await callLoaderOrAction("action",Cr,vr,wr,b,d,_e);if(Cr.signal.aborted){wt.get(Vt)===nr&&wt.delete(Vt);return}if(isRedirectResult(Ur))if(wt.delete(Vt),Tt>Vr){let Yt=getDoneFetcher(void 0);ft.fetchers.set(Vt,Yt),Qt({fetchers:new Map(ft.fetchers)});return}else{Bt.add(Vt);let Yt=getLoadingFetcher(Gt);return ft.fetchers.set(Vt,Yt),Qt({fetchers:new Map(ft.fetchers)}),yr(ft,Ur,{fetcherSubmission:Gt})}if(isErrorResult(Ur)){_r(Vt,Ht,Ur.error);return}if(isDeferredResult(Ur))throw getInternalRouterError(400,{type:"defer-action"});let Qr=ft.navigation.location||ft.location,sn=createClientSideRequest(s.history,Qr,nr.signal),an=j||$,xn=ft.navigation.state!=="idle"?matchRoutes(an,ft.navigation.location,_e):ft.matches;invariant$1(xn,"Didn't find any matches after fetcher action");let An=++_t;Mt.set(Vt,An);let Cs=getLoadingFetcher(Gt,Ur.data);ft.fetchers.set(Vt,Cs);let[Vn,Hn]=getMatchesToLoad(s.history,ft,xn,Gt,Qr,Et,St,Ct,Rt,Bt,an,_e,{[vr.route.id]:Ur.data},void 0);Hn.filter(Yt=>Yt.key!==Vt).forEach(Yt=>{let dr=Yt.key,Zt=ft.fetchers.get(dr),gr=getLoadingFetcher(void 0,Zt?Zt.data:void 0);ft.fetchers.set(dr,gr),wt.has(dr)&&Pr(dr),Yt.controller&&wt.set(dr,Yt.controller)}),Qt({fetchers:new Map(ft.fetchers)});let Kn=()=>Hn.forEach(Yt=>Pr(Yt.key));nr.signal.addEventListener("abort",Kn);let{results:_s,loaderResults:zn,fetcherResults:bs}=await mr(ft.matches,xn,Vn,Hn,sn);if(nr.signal.aborted)return;nr.signal.removeEventListener("abort",Kn),Mt.delete(Vt),wt.delete(Vt),Hn.forEach(Yt=>wt.delete(Yt.key));let on=findRedirect(_s);if(on){if(on.idx>=Vn.length){let Yt=Hn[on.idx-Vn.length].key;Bt.add(Yt)}return yr(ft,on.result)}let{loaderData:Un,errors:ga}=processLoaderData(ft,ft.matches,Vn,zn,void 0,Hn,bs,bt);if(ft.fetchers.has(Vt)){let Yt=getDoneFetcher(Ur.data);ft.fetchers.set(Vt,Yt)}let Nt=Ot(An);ft.navigation.state==="loading"&&An>Tt?(invariant$1(mt,"Expected pending action"),vt&&vt.abort(),or(ft.navigation.location,{matches:xn,loaderData:Un,errors:ga,fetchers:new Map(ft.fetchers)})):(Qt(_extends$3({errors:ga,loaderData:mergeLoaderData(ft.loaderData,Un,xn,ga)},Nt||Hn.length>0?{fetchers:new Map(ft.fetchers)}:{})),Et=!1)}async function ar(Vt,Ht,Kt,vr,wr,Gt){let pr=ft.fetchers.get(Vt),Wt=getLoadingFetcher(Gt,pr?pr.data:void 0);ft.fetchers.set(Vt,Wt),Qt({fetchers:new Map(ft.fetchers)});let nr=new AbortController,Cr=createClientSideRequest(s.history,Kt,nr.signal);wt.set(Vt,nr);let Vr=_t,Ur=await callLoaderOrAction("loader",Cr,vr,wr,b,d,_e);if(isDeferredResult(Ur)&&(Ur=await resolveDeferredData(Ur,Cr.signal,!0)||Ur),wt.get(Vt)===nr&&wt.delete(Vt),Cr.signal.aborted)return;if(isRedirectResult(Ur))if(Tt>Vr){let sn=getDoneFetcher(void 0);ft.fetchers.set(Vt,sn),Qt({fetchers:new Map(ft.fetchers)});return}else{Bt.add(Vt),await yr(ft,Ur);return}if(isErrorResult(Ur)){let sn=findNearestBoundary(ft.matches,Ht);ft.fetchers.delete(Vt),Qt({fetchers:new Map(ft.fetchers),errors:{[sn.route.id]:Ur.error}});return}invariant$1(!isDeferredResult(Ur),"Unhandled fetcher deferred data");let Qr=getDoneFetcher(Ur.data);ft.fetchers.set(Vt,Qr),Qt({fetchers:new Map(ft.fetchers)})}async function yr(Vt,Ht,Kt){let{submission:vr,fetcherSubmission:wr,replace:Gt}=Kt===void 0?{}:Kt;Ht.revalidate&&(Et=!0);let pr=createLocation(Vt.location,Ht.location,{_isRedirect:!0});if(invariant$1(pr,"Expected a location on the redirect navigation"),o){let Qr=!1;if(Ht.reloadDocument)Qr=!0;else if(ABSOLUTE_URL_REGEX$1.test(Ht.location)){const sn=s.history.createURL(Ht.location);Qr=sn.origin!==a.location.origin||stripBasename(sn.pathname,_e)==null}if(Qr){Gt?a.location.replace(Ht.location):a.location.assign(Ht.location);return}}vt=null;let Wt=Gt===!0?Action.Replace:Action.Push,{formMethod:nr,formAction:Cr,formEncType:Vr}=Vt.navigation;!vr&&!wr&&nr&&Cr&&Vr&&(vr=getSubmissionFromNavigation(Vt.navigation));let Ur=vr||wr;if(redirectPreserveMethodStatusCodes.has(Ht.status)&&Ur&&isMutationMethod(Ur.formMethod))await Ar(Wt,pr,{submission:_extends$3({},Ur,{formAction:Ht.location}),preventScrollReset:gt});else{let Qr=getLoadingNavigation(pr,vr);await Ar(Wt,pr,{overrideNavigation:Qr,fetcherSubmission:wr,preventScrollReset:gt})}}async function mr(Vt,Ht,Kt,vr,wr){let Gt=await Promise.all([...Kt.map(nr=>callLoaderOrAction("loader",wr,nr,Ht,b,d,_e)),...vr.map(nr=>nr.matches&&nr.match&&nr.controller?callLoaderOrAction("loader",createClientSideRequest(s.history,nr.path,nr.controller.signal),nr.match,nr.matches,b,d,_e):{type:ResultType.error,error:getInternalRouterError(404,{pathname:nr.path})})]),pr=Gt.slice(0,Kt.length),Wt=Gt.slice(Kt.length);return await Promise.all([resolveDeferredResults(Vt,Kt,pr,pr.map(()=>wr.signal),!1,ft.loaderData),resolveDeferredResults(Vt,vr.map(nr=>nr.match),Wt,vr.map(nr=>nr.controller?nr.controller.signal:null),!0)]),{results:Gt,loaderResults:pr,fetcherResults:Wt}}function Br(){Et=!0,St.push(...Ir()),Rt.forEach((Vt,Ht)=>{wt.has(Ht)&&(Ct.push(Ht),Pr(Ht))})}function _r(Vt,Ht,Kt){let vr=findNearestBoundary(ft.matches,Ht);br(Vt),Qt({errors:{[vr.route.id]:Kt},fetchers:new Map(ft.fetchers)})}function br(Vt){let Ht=ft.fetchers.get(Vt);wt.has(Vt)&&!(Ht&&Ht.state==="loading"&&Mt.has(Vt))&&Pr(Vt),Rt.delete(Vt),Mt.delete(Vt),Bt.delete(Vt),ft.fetchers.delete(Vt)}function Pr(Vt){let Ht=wt.get(Vt);invariant$1(Ht,"Expected fetch controller: "+Vt),Ht.abort(),wt.delete(Vt)}function Or(Vt){for(let Ht of Vt){let Kt=ur(Ht),vr=getDoneFetcher(Kt.data);ft.fetchers.set(Ht,vr)}}function Wr(){let Vt=[],Ht=!1;for(let Kt of Bt){let vr=ft.fetchers.get(Kt);invariant$1(vr,"Expected fetcher: "+Kt),vr.state==="loading"&&(Bt.delete(Kt),Vt.push(Kt),Ht=!0)}return Or(Vt),Ht}function Ot(Vt){let Ht=[];for(let[Kt,vr]of Mt)if(vr<Vt){let wr=ft.fetchers.get(Kt);invariant$1(wr,"Expected fetcher: "+Kt),wr.state==="loading"&&(Pr(Kt),Mt.delete(Kt),Ht.push(Kt))}return Or(Ht),Ht.length>0}function Ft(Vt,Ht){let Kt=ft.blockers.get(Vt)||IDLE_BLOCKER;return Pt.get(Vt)!==Ht&&Pt.set(Vt,Ht),Kt}function ir(Vt){ft.blockers.delete(Vt),Pt.delete(Vt)}function Sr(Vt,Ht){let Kt=ft.blockers.get(Vt)||IDLE_BLOCKER;invariant$1(Kt.state==="unblocked"&&Ht.state==="blocked"||Kt.state==="blocked"&&Ht.state==="blocked"||Kt.state==="blocked"&&Ht.state==="proceeding"||Kt.state==="blocked"&&Ht.state==="unblocked"||Kt.state==="proceeding"&&Ht.state==="unblocked","Invalid blocker state transition: "+Kt.state+" -> "+Ht.state);let vr=new Map(ft.blockers);vr.set(Vt,Ht),Qt({blockers:vr})}function xr(Vt){let{currentLocation:Ht,nextLocation:Kt,historyAction:vr}=Vt;if(Pt.size===0)return;Pt.size>1&&warning$1(!1,"A router only supports one blocker at a time");let wr=Array.from(Pt.entries()),[Gt,pr]=wr[wr.length-1],Wt=ft.blockers.get(Gt);if(!(Wt&&Wt.state==="proceeding")&&pr({currentLocation:Ht,nextLocation:Kt,historyAction:vr}))return Gt}function Ir(Vt){let Ht=[];return bt.forEach((Kt,vr)=>{(!Vt||Vt(vr))&&(Kt.cancel(),Ht.push(vr),bt.delete(vr))}),Ht}function Fr(Vt,Ht,Kt){if(nt=Vt,at=Ht,it=Kt||null,!ct&&ft.navigation===IDLE_NAVIGATION){ct=!0;let vr=zt(ft.location,ft.matches);vr!=null&&Qt({restoreScrollPosition:vr})}return()=>{nt=null,at=null,it=null}}function Mr(Vt,Ht){return it&&it(Vt,Ht.map(vr=>convertRouteMatchToUiMatch(vr,ft.loaderData)))||Vt.key}function cr(Vt,Ht){if(nt&&at){let Kt=Mr(Vt,Ht);nt[Kt]=at()}}function zt(Vt,Ht){if(nt){let Kt=Mr(Vt,Ht),vr=nt[Kt];if(typeof vr=="number")return vr}return null}function hr(Vt){b={},j=convertRoutesToDataRoutes(Vt,d,void 0,b)}return dt={get basename(){return _e},get state(){return ft},get routes(){return $},initialize:$t,subscribe:Jt,enableScrollRestoration:Fr,navigate:er,fetch:kt,revalidate:sr,createHref:Vt=>s.history.createHref(Vt),encodeLocation:Vt=>s.history.encodeLocation(Vt),getFetcher:ur,deleteFetcher:br,dispose:Lt,getBlocker:Ft,deleteBlocker:ir,_internalFetchControllers:wt,_internalActiveDeferreds:bt,_internalSetRoutes:hr},dt}function isSubmissionNavigation(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function normalizeTo(s,a,o,c,d,b,$){let j,_e;if(b!=null&&$!=="path"){j=[];for(let tt of a)if(j.push(tt),tt.route.id===b){_e=tt;break}}else j=a,_e=a[a.length-1];let et=resolveTo(d||".",getPathContributingMatches(j).map(tt=>tt.pathnameBase),stripBasename(s.pathname,o)||s.pathname,$==="path");return d==null&&(et.search=s.search,et.hash=s.hash),(d==null||d===""||d===".")&&_e&&_e.route.index&&!hasNakedIndexQuery(et.search)&&(et.search=et.search?et.search.replace(/^\?/,"?index&"):"?index"),c&&o!=="/"&&(et.pathname=et.pathname==="/"?o:joinPaths([o,et.pathname])),createPath$1(et)}function normalizeNavigateOptions(s,a,o,c){if(!c||!isSubmissionNavigation(c))return{path:o};if(c.formMethod&&!isValidMethod(c.formMethod))return{path:o,error:getInternalRouterError(405,{method:c.formMethod})};let d=()=>({path:o,error:getInternalRouterError(400,{type:"invalid-body"})}),b=c.formMethod||"get",$=s?b.toUpperCase():b.toLowerCase(),j=stripHashFromPath(o);if(c.body!==void 0){if(c.formEncType==="text/plain"){if(!isMutationMethod($))return d();let nt=typeof c.body=="string"?c.body:c.body instanceof FormData||c.body instanceof URLSearchParams?Array.from(c.body.entries()).reduce((it,at)=>{let[ct,st]=at;return""+it+ct+"="+st+`
`},""):String(c.body);return{path:o,submission:{formMethod:$,formAction:j,formEncType:c.formEncType,formData:void 0,json:void 0,text:nt}}}else if(c.formEncType==="application/json"){if(!isMutationMethod($))return d();try{let nt=typeof c.body=="string"?JSON.parse(c.body):c.body;return{path:o,submission:{formMethod:$,formAction:j,formEncType:c.formEncType,formData:void 0,json:nt,text:void 0}}}catch{return d()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let _e,et;if(c.formData)_e=convertFormDataToSearchParams(c.formData),et=c.formData;else if(c.body instanceof FormData)_e=convertFormDataToSearchParams(c.body),et=c.body;else if(c.body instanceof URLSearchParams)_e=c.body,et=convertSearchParamsToFormData(_e);else if(c.body==null)_e=new URLSearchParams,et=new FormData;else try{_e=new URLSearchParams(c.body),et=convertSearchParamsToFormData(_e)}catch{return d()}let tt={formMethod:$,formAction:j,formEncType:c&&c.formEncType||"application/x-www-form-urlencoded",formData:et,json:void 0,text:void 0};if(isMutationMethod(tt.formMethod))return{path:o,submission:tt};let rt=parsePath(o);return a&&rt.search&&hasNakedIndexQuery(rt.search)&&_e.append("index",""),rt.search="?"+_e,{path:createPath$1(rt),submission:tt}}function getLoaderMatchesUntilBoundary(s,a){let o=s;if(a){let c=s.findIndex(d=>d.route.id===a);c>=0&&(o=s.slice(0,c))}return o}function getMatchesToLoad(s,a,o,c,d,b,$,j,_e,et,tt,rt,nt,it){let at=it?Object.values(it)[0]:nt?Object.values(nt)[0]:void 0,ct=s.createURL(a.location),st=s.createURL(d),ot=it?Object.keys(it)[0]:void 0,dt=getLoaderMatchesUntilBoundary(o,ot).filter((mt,gt)=>{if(mt.route.lazy)return!0;if(mt.route.loader==null)return!1;if(isNewLoader(a.loaderData,a.matches[gt],mt)||$.some(Et=>Et===mt.route.id))return!0;let vt=a.matches[gt],yt=mt;return shouldRevalidateLoader(mt,_extends$3({currentUrl:ct,currentParams:vt.params,nextUrl:st,nextParams:yt.params},c,{actionResult:at,defaultShouldRevalidate:b||ct.pathname+ct.search===st.pathname+st.search||ct.search!==st.search||isNewRouteInstance(vt,yt)}))}),ft=[];return _e.forEach((mt,gt)=>{if(!o.some(Ct=>Ct.route.id===mt.routeId))return;let vt=matchRoutes(tt,mt.path,rt);if(!vt){ft.push({key:gt,routeId:mt.routeId,path:mt.path,matches:null,match:null,controller:null});return}let yt=a.fetchers.get(gt),Et=getTargetMatch(vt,mt.path),St=!1;et.has(gt)?St=!1:j.includes(gt)?St=!0:yt&&yt.state!=="idle"&&yt.data===void 0?St=b:St=shouldRevalidateLoader(Et,_extends$3({currentUrl:ct,currentParams:a.matches[a.matches.length-1].params,nextUrl:st,nextParams:o[o.length-1].params},c,{actionResult:at,defaultShouldRevalidate:b})),St&&ft.push({key:gt,routeId:mt.routeId,path:mt.path,matches:vt,match:Et,controller:new AbortController})}),[dt,ft]}function isNewLoader(s,a,o){let c=!a||o.route.id!==a.route.id,d=s[o.route.id]===void 0;return c||d}function isNewRouteInstance(s,a){let o=s.route.path;return s.pathname!==a.pathname||o!=null&&o.endsWith("*")&&s.params["*"]!==a.params["*"]}function shouldRevalidateLoader(s,a){if(s.route.shouldRevalidate){let o=s.route.shouldRevalidate(a);if(typeof o=="boolean")return o}return a.defaultShouldRevalidate}async function loadLazyRouteModule(s,a,o){if(!s.lazy)return;let c=await s.lazy();if(!s.lazy)return;let d=o[s.id];invariant$1(d,"No route found in manifest");let b={};for(let $ in c){let _e=d[$]!==void 0&&$!=="hasErrorBoundary";warning$1(!_e,'Route "'+d.id+'" has a static property "'+$+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+$+'" will be ignored.')),!_e&&!immutableRouteKeys.has($)&&(b[$]=c[$])}Object.assign(d,b),Object.assign(d,_extends$3({},a(d),{lazy:void 0}))}async function callLoaderOrAction(s,a,o,c,d,b,$,j){j===void 0&&(j={});let _e,et,tt,rt=at=>{let ct,st=new Promise((ot,ht)=>ct=ht);return tt=()=>ct(),a.signal.addEventListener("abort",tt),Promise.race([at({request:a,params:o.params,context:j.requestContext}),st])};try{let at=o.route[s];if(o.route.lazy)if(at){let ct,st=await Promise.all([rt(at).catch(ot=>{ct=ot}),loadLazyRouteModule(o.route,b,d)]);if(ct)throw ct;et=st[0]}else if(await loadLazyRouteModule(o.route,b,d),at=o.route[s],at)et=await rt(at);else if(s==="action"){let ct=new URL(a.url),st=ct.pathname+ct.search;throw getInternalRouterError(405,{method:a.method,pathname:st,routeId:o.route.id})}else return{type:ResultType.data,data:void 0};else if(at)et=await rt(at);else{let ct=new URL(a.url),st=ct.pathname+ct.search;throw getInternalRouterError(404,{pathname:st})}invariant$1(et!==void 0,"You defined "+(s==="action"?"an action":"a loader")+" for route "+('"'+o.route.id+"\" but didn't return anything from your `"+s+"` ")+"function. Please return a value or `null`.")}catch(at){_e=ResultType.error,et=at}finally{tt&&a.signal.removeEventListener("abort",tt)}if(isResponse(et)){let at=et.status;if(redirectStatusCodes.has(at)){let ot=et.headers.get("Location");if(invariant$1(ot,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(ot))ot=normalizeTo(new URL(a.url),c.slice(0,c.indexOf(o)+1),$,!0,ot);else if(!j.isStaticRequest){let ht=new URL(a.url),dt=ot.startsWith("//")?new URL(ht.protocol+ot):new URL(ot),ft=stripBasename(dt.pathname,$)!=null;dt.origin===ht.origin&&ft&&(ot=dt.pathname+dt.search+dt.hash)}if(j.isStaticRequest)throw et.headers.set("Location",ot),et;return{type:ResultType.redirect,status:at,location:ot,revalidate:et.headers.get("X-Remix-Revalidate")!==null,reloadDocument:et.headers.get("X-Remix-Reload-Document")!==null}}if(j.isRouteRequest)throw{type:_e===ResultType.error?ResultType.error:ResultType.data,response:et};let ct,st=et.headers.get("Content-Type");return st&&/\bapplication\/json\b/.test(st)?ct=await et.json():ct=await et.text(),_e===ResultType.error?{type:_e,error:new ErrorResponseImpl(at,et.statusText,ct),headers:et.headers}:{type:ResultType.data,data:ct,statusCode:et.status,headers:et.headers}}if(_e===ResultType.error)return{type:_e,error:et};if(isDeferredData(et)){var nt,it;return{type:ResultType.deferred,deferredData:et,statusCode:(nt=et.init)==null?void 0:nt.status,headers:((it=et.init)==null?void 0:it.headers)&&new Headers(et.init.headers)}}return{type:ResultType.data,data:et}}function createClientSideRequest(s,a,o,c){let d=s.createURL(stripHashFromPath(a)).toString(),b={signal:o};if(c&&isMutationMethod(c.formMethod)){let{formMethod:$,formEncType:j}=c;b.method=$.toUpperCase(),j==="application/json"?(b.headers=new Headers({"Content-Type":j}),b.body=JSON.stringify(c.json)):j==="text/plain"?b.body=c.text:j==="application/x-www-form-urlencoded"&&c.formData?b.body=convertFormDataToSearchParams(c.formData):b.body=c.formData}return new Request(d,b)}function convertFormDataToSearchParams(s){let a=new URLSearchParams;for(let[o,c]of s.entries())a.append(o,typeof c=="string"?c:c.name);return a}function convertSearchParamsToFormData(s){let a=new FormData;for(let[o,c]of s.entries())a.append(o,c);return a}function processRouteLoaderData(s,a,o,c,d){let b={},$=null,j,_e=!1,et={};return o.forEach((tt,rt)=>{let nt=a[rt].route.id;if(invariant$1(!isRedirectResult(tt),"Cannot handle redirect results in processLoaderData"),isErrorResult(tt)){let it=findNearestBoundary(s,nt),at=tt.error;c&&(at=Object.values(c)[0],c=void 0),$=$||{},$[it.route.id]==null&&($[it.route.id]=at),b[nt]=void 0,_e||(_e=!0,j=isRouteErrorResponse(tt.error)?tt.error.status:500),tt.headers&&(et[nt]=tt.headers)}else isDeferredResult(tt)?(d.set(nt,tt.deferredData),b[nt]=tt.deferredData.data):b[nt]=tt.data,tt.statusCode!=null&&tt.statusCode!==200&&!_e&&(j=tt.statusCode),tt.headers&&(et[nt]=tt.headers)}),c&&($=c,b[Object.keys(c)[0]]=void 0),{loaderData:b,errors:$,statusCode:j||200,loaderHeaders:et}}function processLoaderData(s,a,o,c,d,b,$,j){let{loaderData:_e,errors:et}=processRouteLoaderData(a,o,c,d,j);for(let tt=0;tt<b.length;tt++){let{key:rt,match:nt,controller:it}=b[tt];invariant$1($!==void 0&&$[tt]!==void 0,"Did not find corresponding fetcher result");let at=$[tt];if(!(it&&it.signal.aborted))if(isErrorResult(at)){let ct=findNearestBoundary(s.matches,nt==null?void 0:nt.route.id);et&&et[ct.route.id]||(et=_extends$3({},et,{[ct.route.id]:at.error})),s.fetchers.delete(rt)}else if(isRedirectResult(at))invariant$1(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(at))invariant$1(!1,"Unhandled fetcher deferred data");else{let ct=getDoneFetcher(at.data);s.fetchers.set(rt,ct)}}return{loaderData:_e,errors:et}}function mergeLoaderData(s,a,o,c){let d=_extends$3({},a);for(let b of o){let $=b.route.id;if(a.hasOwnProperty($)?a[$]!==void 0&&(d[$]=a[$]):s[$]!==void 0&&b.route.loader&&(d[$]=s[$]),c&&c.hasOwnProperty($))break}return d}function findNearestBoundary(s,a){return(a?s.slice(0,s.findIndex(c=>c.route.id===a)+1):[...s]).reverse().find(c=>c.route.hasErrorBoundary===!0)||s[0]}function getShortCircuitMatches(s){let a=s.find(o=>o.index||!o.path||o.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:a}],route:a}}function getInternalRouterError(s,a){let{pathname:o,routeId:c,method:d,type:b}=a===void 0?{}:a,$="Unknown Server Error",j="Unknown @remix-run/router error";return s===400?($="Bad Request",d&&o&&c?j="You made a "+d+' request to "'+o+'" but '+('did not provide a `loader` for route "'+c+'", ')+"so there is no way to handle the request.":b==="defer-action"?j="defer() is not supported in actions":b==="invalid-body"&&(j="Unable to encode submission body")):s===403?($="Forbidden",j='Route "'+c+'" does not match URL "'+o+'"'):s===404?($="Not Found",j='No route matches URL "'+o+'"'):s===405&&($="Method Not Allowed",d&&o&&c?j="You made a "+d.toUpperCase()+' request to "'+o+'" but '+('did not provide an `action` for route "'+c+'", ')+"so there is no way to handle the request.":d&&(j='Invalid request method "'+d.toUpperCase()+'"')),new ErrorResponseImpl(s||500,$,new Error(j),!0)}function findRedirect(s){for(let a=s.length-1;a>=0;a--){let o=s[a];if(isRedirectResult(o))return{result:o,idx:a}}}function stripHashFromPath(s){let a=typeof s=="string"?parsePath(s):s;return createPath$1(_extends$3({},a,{hash:""}))}function isHashChangeOnly(s,a){return s.pathname!==a.pathname||s.search!==a.search?!1:s.hash===""?a.hash!=="":s.hash===a.hash?!0:a.hash!==""}function isDeferredResult(s){return s.type===ResultType.deferred}function isErrorResult(s){return s.type===ResultType.error}function isRedirectResult(s){return(s&&s.type)===ResultType.redirect}function isDeferredData(s){let a=s;return a&&typeof a=="object"&&typeof a.data=="object"&&typeof a.subscribe=="function"&&typeof a.cancel=="function"&&typeof a.resolveData=="function"}function isResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function isValidMethod(s){return validRequestMethods.has(s.toLowerCase())}function isMutationMethod(s){return validMutationMethods.has(s.toLowerCase())}async function resolveDeferredResults(s,a,o,c,d,b){for(let $=0;$<o.length;$++){let j=o[$],_e=a[$];if(!_e)continue;let et=s.find(rt=>rt.route.id===_e.route.id),tt=et!=null&&!isNewRouteInstance(et,_e)&&(b&&b[_e.route.id])!==void 0;if(isDeferredResult(j)&&(d||tt)){let rt=c[$];invariant$1(rt,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(j,rt,d).then(nt=>{nt&&(o[$]=nt||o[$])})}}}async function resolveDeferredData(s,a,o){if(o===void 0&&(o=!1),!await s.deferredData.resolveData(a)){if(o)try{return{type:ResultType.data,data:s.deferredData.unwrappedData}}catch(d){return{type:ResultType.error,error:d}}return{type:ResultType.data,data:s.deferredData.data}}}function hasNakedIndexQuery(s){return new URLSearchParams(s).getAll("index").some(a=>a==="")}function getTargetMatch(s,a){let o=typeof a=="string"?parsePath(a).search:a.search;if(s[s.length-1].route.index&&hasNakedIndexQuery(o||""))return s[s.length-1];let c=getPathContributingMatches(s);return c[c.length-1]}function getSubmissionFromNavigation(s){let{formMethod:a,formAction:o,formEncType:c,text:d,formData:b,json:$}=s;if(!(!a||!o||!c)){if(d!=null)return{formMethod:a,formAction:o,formEncType:c,formData:void 0,json:void 0,text:d};if(b!=null)return{formMethod:a,formAction:o,formEncType:c,formData:b,json:void 0,text:void 0};if($!==void 0)return{formMethod:a,formAction:o,formEncType:c,formData:void 0,json:$,text:void 0}}}function getLoadingNavigation(s,a){return a?{state:"loading",location:s,formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(s,a){return{state:"submitting",location:s,formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text}}function getLoadingFetcher(s,a){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:a}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function getSubmittingFetcher(s,a){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:a?a.data:void 0}}function getDoneFetcher(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(s,a){let{relative:o}=a===void 0?{}:a;useInRouterContext()||invariant$1(!1);let{basename:c,navigator:d}=reactExports.useContext(NavigationContext),{hash:b,pathname:$,search:j}=useResolvedPath(s,{relative:o}),_e=$;return c!=="/"&&(_e=$==="/"?c:joinPaths([c,$])),d.createHref({pathname:_e,search:j,hash:b})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$3(s){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(s)}function useNavigate(){let{isDataRoute:s}=reactExports.useContext(RouteContext);return s?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let s=reactExports.useContext(DataRouterContext),{basename:a,navigator:o}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),b=JSON.stringify(getPathContributingMatches(c).map(_e=>_e.pathnameBase)),$=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{$.current=!0}),reactExports.useCallback(function(_e,et){if(et===void 0&&(et={}),!$.current)return;if(typeof _e=="number"){o.go(_e);return}let tt=resolveTo(_e,JSON.parse(b),d,et.relative==="path");s==null&&a!=="/"&&(tt.pathname=tt.pathname==="/"?a:joinPaths([a,tt.pathname])),(et.replace?o.replace:o.push)(tt,et.state,et)},[a,o,b,d,s])}const OutletContext=reactExports.createContext(null);function useOutlet(s){let a=reactExports.useContext(RouteContext).outlet;return a&&reactExports.createElement(OutletContext.Provider,{value:s},a)}function useResolvedPath(s,a){let{relative:o}=a===void 0?{}:a,{matches:c}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),b=JSON.stringify(getPathContributingMatches(c).map($=>$.pathnameBase));return reactExports.useMemo(()=>resolveTo(s,JSON.parse(b),d,o==="path"),[s,b,d,o])}function useRoutesImpl(s,a,o){useInRouterContext()||invariant$1(!1);let{navigator:c}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),b=d[d.length-1],$=b?b.params:{};b&&b.pathname;let j=b?b.pathnameBase:"/";b&&b.route;let _e=useLocation(),et;if(a){var tt;let ct=typeof a=="string"?parsePath(a):a;j==="/"||(tt=ct.pathname)!=null&&tt.startsWith(j)||invariant$1(!1),et=ct}else et=_e;let rt=et.pathname||"/",nt=j==="/"?rt:rt.slice(j.length)||"/",it=matchRoutes(s,{pathname:nt}),at=_renderMatches(it&&it.map(ct=>Object.assign({},ct,{params:Object.assign({},$,ct.params),pathname:joinPaths([j,c.encodeLocation?c.encodeLocation(ct.pathname).pathname:ct.pathname]),pathnameBase:ct.pathnameBase==="/"?j:joinPaths([j,c.encodeLocation?c.encodeLocation(ct.pathnameBase).pathname:ct.pathnameBase])})),d,o);return a&&at?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},et),navigationType:Action.Pop}},at):at}function DefaultErrorComponent(){let s=useRouteError(),a=isRouteErrorResponse(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),o=s instanceof Error?s.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},b=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},a),o?reactExports.createElement("pre",{style:d},o):null,b)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,o){return o.location!==a.location||o.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error||o.error,location:o.location,revalidation:a.revalidation||o.revalidation}}componentDidCatch(a,o){console.error("React Router caught the following error during render",a,o)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(s){let{routeContext:a,match:o,children:c}=s,d=reactExports.useContext(DataRouterContext);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),reactExports.createElement(RouteContext.Provider,{value:a},c)}function _renderMatches(s,a,o){var c;if(a===void 0&&(a=[]),o===void 0&&(o=null),s==null){var d;if((d=o)!=null&&d.errors)s=o.matches;else return null}let b=s,$=(c=o)==null?void 0:c.errors;if($!=null){let j=b.findIndex(_e=>_e.route.id&&($==null?void 0:$[_e.route.id]));j>=0||invariant$1(!1),b=b.slice(0,Math.min(b.length,j+1))}return b.reduceRight((j,_e,et)=>{let tt=_e.route.id?$==null?void 0:$[_e.route.id]:null,rt=null;o&&(rt=_e.route.errorElement||defaultErrorElement);let nt=a.concat(b.slice(0,et+1)),it=()=>{let at;return tt?at=rt:_e.route.Component?at=reactExports.createElement(_e.route.Component,null):_e.route.element?at=_e.route.element:at=j,reactExports.createElement(RenderedRoute,{match:_e,routeContext:{outlet:j,matches:nt,isDataRoute:o!=null},children:at})};return o&&(_e.route.ErrorBoundary||_e.route.errorElement||et===0)?reactExports.createElement(RenderErrorBoundary,{location:o.location,revalidation:o.revalidation,component:rt,error:tt,children:it(),routeContext:{outlet:null,matches:nt,isDataRoute:!0}}):it()},null)}var DataRouterHook$1=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(DataRouterHook$1||{}),DataRouterStateHook$1=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(DataRouterStateHook$1||{});function useDataRouterContext(s){let a=reactExports.useContext(DataRouterContext);return a||invariant$1(!1),a}function useDataRouterState(s){let a=reactExports.useContext(DataRouterStateContext);return a||invariant$1(!1),a}function useRouteContext(s){let a=reactExports.useContext(RouteContext);return a||invariant$1(!1),a}function useCurrentRouteId(s){let a=useRouteContext(),o=a.matches[a.matches.length-1];return o.route.id||invariant$1(!1),o.route.id}function useRouteError(){var s;let a=reactExports.useContext(RouteErrorContext),o=useDataRouterState(DataRouterStateHook$1.UseRouteError),c=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return a||((s=o.errors)==null?void 0:s[c])}function useNavigateStable(){let{router:s}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),a=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{o.current=!0}),reactExports.useCallback(function(d,b){b===void 0&&(b={}),o.current&&(typeof d=="number"?s.navigate(d):s.navigate(d,_extends$2({fromRouteId:a},b)))},[s,a])}const START_TRANSITION="startTransition",startTransitionImpl=$2AODx$react[START_TRANSITION];function RouterProvider(s){let{fallbackElement:a,router:o,future:c}=s,[d,b]=reactExports.useState(o.state),{v7_startTransition:$}=c||{},j=reactExports.useCallback(rt=>{$&&startTransitionImpl?startTransitionImpl(()=>b(rt)):b(rt)},[b,$]);reactExports.useLayoutEffect(()=>o.subscribe(j),[o,j]);let _e=reactExports.useMemo(()=>({createHref:o.createHref,encodeLocation:o.encodeLocation,go:rt=>o.navigate(rt),push:(rt,nt,it)=>o.navigate(rt,{state:nt,preventScrollReset:it==null?void 0:it.preventScrollReset}),replace:(rt,nt,it)=>o.navigate(rt,{replace:!0,state:nt,preventScrollReset:it==null?void 0:it.preventScrollReset})}),[o]),et=o.basename||"/",tt=reactExports.useMemo(()=>({router:o,navigator:_e,static:!1,basename:et}),[o,_e,et]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:tt},reactExports.createElement(DataRouterStateContext.Provider,{value:d},reactExports.createElement(Router$1,{basename:et,location:d.location,navigationType:d.historyAction,navigator:_e},d.initialized?reactExports.createElement(DataRoutes,{routes:o.routes,state:d}):a))),null)}function DataRoutes(s){let{routes:a,state:o}=s;return useRoutesImpl(a,void 0,o)}function Outlet(s){return useOutlet(s.context)}function Route(s){invariant$1(!1)}function Router$1(s){let{basename:a="/",children:o=null,location:c,navigationType:d=Action.Pop,navigator:b,static:$=!1}=s;useInRouterContext()&&invariant$1(!1);let j=a.replace(/^\/*/,"/"),_e=reactExports.useMemo(()=>({basename:j,navigator:b,static:$}),[j,b,$]);typeof c=="string"&&(c=parsePath(c));let{pathname:et="/",search:tt="",hash:rt="",state:nt=null,key:it="default"}=c,at=reactExports.useMemo(()=>{let ct=stripBasename(et,j);return ct==null?null:{location:{pathname:ct,search:tt,hash:rt,state:nt,key:it},navigationType:d}},[j,et,tt,rt,nt,it,d]);return at==null?null:reactExports.createElement(NavigationContext.Provider,{value:_e},reactExports.createElement(LocationContext.Provider,{children:o,value:at}))}new Promise(()=>{});function createRoutesFromChildren(s,a){a===void 0&&(a=[]);let o=[];return reactExports.Children.forEach(s,(c,d)=>{if(!reactExports.isValidElement(c))return;let b=[...a,d];if(c.type===reactExports.Fragment){o.push.apply(o,createRoutesFromChildren(c.props.children,b));return}c.type!==Route&&invariant$1(!1),!c.props.index||!c.props.children||invariant$1(!1);let $={id:c.props.id||b.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&($.children=createRoutesFromChildren(c.props.children,b)),o.push($)}),o}function mapRouteProperties(s){let a={hasErrorBoundary:s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&Object.assign(a,{element:reactExports.createElement(s.Component),Component:void 0}),s.ErrorBoundary&&Object.assign(a,{errorElement:reactExports.createElement(s.ErrorBoundary),ErrorBoundary:void 0}),a}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(s,a){if(s==null)return{};var o={},c=Object.keys(s),d,b;for(b=0;b<c.length;b++)d=c[b],!(a.indexOf(d)>=0)&&(o[d]=s[d]);return o}function isModifiedEvent(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function shouldProcessLinkClick(s,a){return s.button===0&&(!a||a==="_self")&&!isModifiedEvent(s)}function createSearchParams(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((a,o)=>{let c=s[o];return a.concat(Array.isArray(c)?c.map(d=>[o,d]):[[o,c]])},[]))}function getSearchParamsForLocation(s,a){let o=createSearchParams(s);return a&&a.forEach((c,d)=>{o.has(d)||a.getAll(d).forEach(b=>{o.append(d,b)})}),o}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function createBrowserRouter(s,a){return createRouter({basename:a==null?void 0:a.basename,future:_extends$1({},a==null?void 0:a.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:a==null?void 0:a.window}),hydrationData:(a==null?void 0:a.hydrationData)||parseHydrationData(),routes:s,mapRouteProperties}).initialize()}function parseHydrationData(){var s;let a=(s=window)==null?void 0:s.__staticRouterHydrationData;return a&&a.errors&&(a=_extends$1({},a,{errors:deserializeErrors(a.errors)})),a}function deserializeErrors(s){if(!s)return null;let a=Object.entries(s),o={};for(let[c,d]of a)if(d&&d.__type==="RouteErrorResponse")o[c]=new ErrorResponseImpl(d.status,d.statusText,d.data,d.internal===!0);else if(d&&d.__type==="Error"){if(d.__subType){let b=window[d.__subType];if(typeof b=="function")try{let $=new b(d.message);$.stack="",o[c]=$}catch{}}if(o[c]==null){let b=new Error(d.message);b.stack="",o[c]=b}}else o[c]=d;return o}const isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(a,o){let{onClick:c,relative:d,reloadDocument:b,replace:$,state:j,target:_e,to:et,preventScrollReset:tt}=a,rt=_objectWithoutPropertiesLoose(a,_excluded),{basename:nt}=reactExports.useContext(NavigationContext),it,at=!1;if(typeof et=="string"&&ABSOLUTE_URL_REGEX.test(et)&&(it=et,isBrowser$3))try{let ht=new URL(window.location.href),dt=et.startsWith("//")?new URL(ht.protocol+et):new URL(et),ft=stripBasename(dt.pathname,nt);dt.origin===ht.origin&&ft!=null?et=ft+dt.search+dt.hash:at=!0}catch{}let ct=useHref(et,{relative:d}),st=useLinkClickHandler(et,{replace:$,state:j,target:_e,preventScrollReset:tt,relative:d});function ot(ht){c&&c(ht),ht.defaultPrevented||st(ht)}return reactExports.createElement("a",_extends$1({},rt,{href:it||ct,onClick:at||b?c:ot,ref:o,target:_e}))});var DataRouterHook;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(s){s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(s,a){let{target:o,replace:c,state:d,preventScrollReset:b,relative:$}=a===void 0?{}:a,j=useNavigate(),_e=useLocation(),et=useResolvedPath(s,{relative:$});return reactExports.useCallback(tt=>{if(shouldProcessLinkClick(tt,o)){tt.preventDefault();let rt=c!==void 0?c:createPath$1(_e)===createPath$1(et);j(s,{replace:rt,state:d,preventScrollReset:b,relative:$})}},[_e,j,et,c,d,o,s,b,$])}function useSearchParams(s){let a=reactExports.useRef(createSearchParams(s)),o=reactExports.useRef(!1),c=useLocation(),d=reactExports.useMemo(()=>getSearchParamsForLocation(c.search,o.current?null:a.current),[c.search]),b=useNavigate(),$=reactExports.useCallback((j,_e)=>{const et=createSearchParams(typeof j=="function"?j(d):j);o.current=!0,b("?"+et,_e)},[b,d]);return[d,$]}const queryClient$1=new QueryClient;function App$1(){return jsx("main",{children:jsx(QueryClientProvider,{client:queryClient$1,children:jsx(Outlet,{})})})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="153",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping$1=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping$1=1e3,ClampToEdgeWrapping$1=1001,MirroredRepeatWrapping$1=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter$1=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter$1=1008,LinearMipMapLinearFilter=1008,UnsignedByteType$1=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat$1=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding$1=3e3,sRGBEncoding$1=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace$1="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;let EventDispatcher$1=class{addEventListener(a,o){this._listeners===void 0&&(this._listeners={});const c=this._listeners;c[a]===void 0&&(c[a]=[]),c[a].indexOf(o)===-1&&c[a].push(o)}hasEventListener(a,o){if(this._listeners===void 0)return!1;const c=this._listeners;return c[a]!==void 0&&c[a].indexOf(o)!==-1}removeEventListener(a,o){if(this._listeners===void 0)return;const d=this._listeners[a];if(d!==void 0){const b=d.indexOf(o);b!==-1&&d.splice(b,1)}}dispatchEvent(a){if(this._listeners===void 0)return;const c=this._listeners[a.type];if(c!==void 0){a.target=this;const d=c.slice(0);for(let b=0,$=d.length;b<$;b++)d[b].call(this,a);a.target=null}}};const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const s=Math.random()*4294967295|0,a=Math.random()*4294967295|0,o=Math.random()*4294967295|0,c=Math.random()*4294967295|0;return(_lut$1[s&255]+_lut$1[s>>8&255]+_lut$1[s>>16&255]+_lut$1[s>>24&255]+"-"+_lut$1[a&255]+_lut$1[a>>8&255]+"-"+_lut$1[a>>16&15|64]+_lut$1[a>>24&255]+"-"+_lut$1[o&63|128]+_lut$1[o>>8&255]+"-"+_lut$1[o>>16&255]+_lut$1[o>>24&255]+_lut$1[c&255]+_lut$1[c>>8&255]+_lut$1[c>>16&255]+_lut$1[c>>24&255]).toLowerCase()}function clamp$2(s,a,o){return Math.max(a,Math.min(o,s))}function euclideanModulo(s,a){return(s%a+a)%a}function mapLinear(s,a,o,c,d){return c+(s-a)*(d-c)/(o-a)}function inverseLerp(s,a,o){return s!==a?(o-s)/(a-s):0}function lerp(s,a,o){return(1-o)*s+o*a}function damp(s,a,o,c){return lerp(s,a,1-Math.exp(-o*c))}function pingpong(s,a=1){return a-Math.abs(euclideanModulo(s,a*2)-a)}function smoothstep(s,a,o){return s<=a?0:s>=o?1:(s=(s-a)/(o-a),s*s*(3-2*s))}function smootherstep(s,a,o){return s<=a?0:s>=o?1:(s=(s-a)/(o-a),s*s*s*(s*(s*6-15)+10))}function randInt(s,a){return s+Math.floor(Math.random()*(a-s+1))}function randFloat(s,a){return s+Math.random()*(a-s)}function randFloatSpread(s){return s*(.5-Math.random())}function seededRandom(s){s!==void 0&&(_seed=s);let a=_seed+=1831565813;return a=Math.imul(a^a>>>15,a|1),a^=a+Math.imul(a^a>>>7,a|61),((a^a>>>14)>>>0)/4294967296}function degToRad(s){return s*DEG2RAD}function radToDeg(s){return s*RAD2DEG}function isPowerOfTwo(s){return(s&s-1)===0&&s!==0}function ceilPowerOfTwo(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function floorPowerOfTwo(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function setQuaternionFromProperEuler(s,a,o,c,d){const b=Math.cos,$=Math.sin,j=b(o/2),_e=$(o/2),et=b((a+c)/2),tt=$((a+c)/2),rt=b((a-c)/2),nt=$((a-c)/2),it=b((c-a)/2),at=$((c-a)/2);switch(d){case"XYX":s.set(j*tt,_e*rt,_e*nt,j*et);break;case"YZY":s.set(_e*nt,j*tt,_e*rt,j*et);break;case"ZXZ":s.set(_e*rt,_e*nt,j*tt,j*et);break;case"XZX":s.set(j*tt,_e*at,_e*it,j*et);break;case"YXY":s.set(_e*it,j*tt,_e*at,j*et);break;case"ZYZ":s.set(_e*at,_e*it,j*tt,j*et);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function denormalize(s,a){switch(a.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function normalize(s,a){switch(a.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$2,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};let Vector2$1=class vm{constructor(a=0,o=0){vm.prototype.isVector2=!0,this.x=a,this.y=o}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,o){return this.x=a,this.y=o,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a){return this.x+=a.x,this.y+=a.y,this}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this}sub(a){return this.x-=a.x,this.y-=a.y,this}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const o=this.x,c=this.y,d=a.elements;return this.x=d[0]*o+d[3]*c+d[6],this.y=d[1]*o+d[4]*c+d[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(a){const o=Math.sqrt(this.lengthSq()*a.lengthSq());if(o===0)return Math.PI/2;const c=this.dot(a)/o;return Math.acos(clamp$2(c,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y;return o*o+c*c}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a}fromBufferAttribute(a,o){return this.x=a.getX(o),this.y=a.getY(o),this}rotateAround(a,o){const c=Math.cos(o),d=Math.sin(o),b=this.x-a.x,$=this.y-a.y;return this.x=b*c-$*d+a.x,this.y=b*d+$*c+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Matrix3$1=class ym{constructor(a,o,c,d,b,$,j,_e,et){ym.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],a!==void 0&&this.set(a,o,c,d,b,$,j,_e,et)}set(a,o,c,d,b,$,j,_e,et){const tt=this.elements;return tt[0]=a,tt[1]=d,tt[2]=j,tt[3]=o,tt[4]=b,tt[5]=_e,tt[6]=c,tt[7]=$,tt[8]=et,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this}extractBasis(a,o,c){return a.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const o=a.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,d=o.elements,b=this.elements,$=c[0],j=c[3],_e=c[6],et=c[1],tt=c[4],rt=c[7],nt=c[2],it=c[5],at=c[8],ct=d[0],st=d[3],ot=d[6],ht=d[1],dt=d[4],ft=d[7],mt=d[2],gt=d[5],vt=d[8];return b[0]=$*ct+j*ht+_e*mt,b[3]=$*st+j*dt+_e*gt,b[6]=$*ot+j*ft+_e*vt,b[1]=et*ct+tt*ht+rt*mt,b[4]=et*st+tt*dt+rt*gt,b[7]=et*ot+tt*ft+rt*vt,b[2]=nt*ct+it*ht+at*mt,b[5]=nt*st+it*dt+at*gt,b[8]=nt*ot+it*ft+at*vt,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[3]*=a,o[6]*=a,o[1]*=a,o[4]*=a,o[7]*=a,o[2]*=a,o[5]*=a,o[8]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[1],d=a[2],b=a[3],$=a[4],j=a[5],_e=a[6],et=a[7],tt=a[8];return o*$*tt-o*j*et-c*b*tt+c*j*_e+d*b*et-d*$*_e}invert(){const a=this.elements,o=a[0],c=a[1],d=a[2],b=a[3],$=a[4],j=a[5],_e=a[6],et=a[7],tt=a[8],rt=tt*$-j*et,nt=j*_e-tt*b,it=et*b-$*_e,at=o*rt+c*nt+d*it;if(at===0)return this.set(0,0,0,0,0,0,0,0,0);const ct=1/at;return a[0]=rt*ct,a[1]=(d*et-tt*c)*ct,a[2]=(j*c-d*$)*ct,a[3]=nt*ct,a[4]=(tt*o-d*_e)*ct,a[5]=(d*b-j*o)*ct,a[6]=it*ct,a[7]=(c*_e-et*o)*ct,a[8]=($*o-c*b)*ct,this}transpose(){let a;const o=this.elements;return a=o[1],o[1]=o[3],o[3]=a,a=o[2],o[2]=o[6],o[6]=a,a=o[5],o[5]=o[7],o[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const o=this.elements;return a[0]=o[0],a[1]=o[3],a[2]=o[6],a[3]=o[1],a[4]=o[4],a[5]=o[7],a[6]=o[2],a[7]=o[5],a[8]=o[8],this}setUvTransform(a,o,c,d,b,$,j){const _e=Math.cos(b),et=Math.sin(b);return this.set(c*_e,c*et,-c*(_e*$+et*j)+$+a,-d*et,d*_e,-d*(-et*$+_e*j)+j+o,0,0,1),this}scale(a,o){return this.premultiply(_m3$1.makeScale(a,o)),this}rotate(a){return this.premultiply(_m3$1.makeRotation(-a)),this}translate(a,o){return this.premultiply(_m3$1.makeTranslation(a,o)),this}makeTranslation(a,o){return a.isVector2?this.set(1,0,a.x,0,1,a.y,0,0,1):this.set(1,0,a,0,1,o,0,0,1),this}makeRotation(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,-c,0,c,o,0,0,0,1),this}makeScale(a,o){return this.set(a,0,0,0,o,0,0,0,1),this}equals(a){const o=this.elements,c=a.elements;for(let d=0;d<9;d++)if(o[d]!==c[d])return!1;return!0}fromArray(a,o=0){for(let c=0;c<9;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a}clone(){return new this.constructor().fromArray(this.elements)}};const _m3$1=new Matrix3$1;function arrayNeedsUint32(s){for(let a=s.length-1;a>=0;--a)if(s[a]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(s,a){return new TYPED_ARRAYS[s](a)}function createElementNS$1(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}const _cache$1={};function warnOnce$1(s){s in _cache$1||(_cache$1[s]=!0,console.warn(s))}function SRGBToLinear$1(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function LinearToSRGB(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3$1().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3$1().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function DisplayP3ToLinearSRGB(s){return s.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB)}function LinearSRGBToDisplayP3(s){return s.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:s=>s,[SRGBColorSpace$1]:s=>s.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:s=>s,[SRGBColorSpace$1]:s=>s.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(s){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!s},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(s){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(s,a,o){if(this.enabled===!1||a===o||!a||!o)return s;const c=TO_LINEAR[a],d=FROM_LINEAR[o];if(c===void 0||d===void 0)throw new Error(`Unsupported color space conversion, "${a}" to "${o}".`);return d(c(s))},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)}};let _canvas$1,ImageUtils$1=class{static getDataURL(a){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement>"u")return a.src;let o;if(a instanceof HTMLCanvasElement)o=a;else{_canvas$1===void 0&&(_canvas$1=createElementNS$1("canvas")),_canvas$1.width=a.width,_canvas$1.height=a.height;const c=_canvas$1.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height),o=_canvas$1}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(a){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const o=createElementNS$1("canvas");o.width=a.width,o.height=a.height;const c=o.getContext("2d");c.drawImage(a,0,0,a.width,a.height);const d=c.getImageData(0,0,a.width,a.height),b=d.data;for(let $=0;$<b.length;$++)b[$]=SRGBToLinear$1(b[$]/255)*255;return c.putImageData(d,0,0),o}else if(a.data){const o=a.data.slice(0);for(let c=0;c<o.length;c++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[c]=Math.floor(SRGBToLinear$1(o[c]/255)*255):o[c]=SRGBToLinear$1(o[c]);return{data:o,width:a.width,height:a.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}},sourceId$1=0,Source$1=class{constructor(a=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sourceId$1++}),this.uuid=generateUUID$1(),this.data=a,this.version=0}set needsUpdate(a){a===!0&&this.version++}toJSON(a){const o=a===void 0||typeof a=="string";if(!o&&a.images[this.uuid]!==void 0)return a.images[this.uuid];const c={uuid:this.uuid,url:""},d=this.data;if(d!==null){let b;if(Array.isArray(d)){b=[];for(let $=0,j=d.length;$<j;$++)d[$].isDataTexture?b.push(serializeImage$1(d[$].image)):b.push(serializeImage$1(d[$]))}else b=serializeImage$1(d);c.url=b}return o||(a.images[this.uuid]=c),c}};function serializeImage$1(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?ImageUtils$1.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId$1=0,Texture$1=class Ol extends EventDispatcher$1{constructor(a=Ol.DEFAULT_IMAGE,o=Ol.DEFAULT_MAPPING,c=ClampToEdgeWrapping$1,d=ClampToEdgeWrapping$1,b=LinearFilter$1,$=LinearMipmapLinearFilter$1,j=RGBAFormat$1,_e=UnsignedByteType$1,et=Ol.DEFAULT_ANISOTROPY,tt=NoColorSpace$1){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId$1++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source$1(a),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=c,this.wrapT=d,this.magFilter=b,this.minFilter=$,this.anisotropy=et,this.format=j,this.internalFormat=null,this.type=_e,this.offset=new Vector2$1(0,0),this.repeat=new Vector2$1(1,1),this.center=new Vector2$1(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3$1,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof tt=="string"?this.colorSpace=tt:(warnOnce$1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=tt===sRGBEncoding$1?SRGBColorSpace$1:NoColorSpace$1),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(a=null){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(a){return this.name=a.name,this.source=a.source,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.channel=a.channel,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.colorSpace=a.colorSpace,this.userData=JSON.parse(JSON.stringify(a.userData)),this.needsUpdate=!0,this}toJSON(a){const o=a===void 0||typeof a=="string";if(!o&&a.textures[this.uuid]!==void 0)return a.textures[this.uuid];const c={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(c.userData=this.userData),o||(a.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(this.mapping!==UVMapping$1)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case RepeatWrapping$1:a.x=a.x-Math.floor(a.x);break;case ClampToEdgeWrapping$1:a.x=a.x<0?0:1;break;case MirroredRepeatWrapping$1:Math.abs(Math.floor(a.x)%2)===1?a.x=Math.ceil(a.x)-a.x:a.x=a.x-Math.floor(a.x);break}if(a.y<0||a.y>1)switch(this.wrapT){case RepeatWrapping$1:a.y=a.y-Math.floor(a.y);break;case ClampToEdgeWrapping$1:a.y=a.y<0?0:1;break;case MirroredRepeatWrapping$1:Math.abs(Math.floor(a.y)%2)===1?a.y=Math.ceil(a.y)-a.y:a.y=a.y-Math.floor(a.y);break}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){a===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce$1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace$1?sRGBEncoding$1:LinearEncoding$1}set encoding(a){warnOnce$1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=a===sRGBEncoding$1?SRGBColorSpace$1:NoColorSpace$1}};Texture$1.DEFAULT_IMAGE=null;Texture$1.DEFAULT_MAPPING=UVMapping$1;Texture$1.DEFAULT_ANISOTROPY=1;class Vector4{constructor(a=0,o=0,c=0,d=1){Vector4.prototype.isVector4=!0,this.x=a,this.y=o,this.z=c,this.w=d}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,o,c,d){return this.x=a,this.y=o,this.z=c,this.w=d,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w!==void 0?a.w:1,this}add(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this.w=a.w+o.w,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this.w+=a.w*o,this}sub(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this.w=a.w-o.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const o=this.x,c=this.y,d=this.z,b=this.w,$=a.elements;return this.x=$[0]*o+$[4]*c+$[8]*d+$[12]*b,this.y=$[1]*o+$[5]*c+$[9]*d+$[13]*b,this.z=$[2]*o+$[6]*c+$[10]*d+$[14]*b,this.w=$[3]*o+$[7]*c+$[11]*d+$[15]*b,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const o=Math.sqrt(1-a.w*a.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/o,this.y=a.y/o,this.z=a.z/o),this}setAxisAngleFromRotationMatrix(a){let o,c,d,b;const _e=a.elements,et=_e[0],tt=_e[4],rt=_e[8],nt=_e[1],it=_e[5],at=_e[9],ct=_e[2],st=_e[6],ot=_e[10];if(Math.abs(tt-nt)<.01&&Math.abs(rt-ct)<.01&&Math.abs(at-st)<.01){if(Math.abs(tt+nt)<.1&&Math.abs(rt+ct)<.1&&Math.abs(at+st)<.1&&Math.abs(et+it+ot-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const dt=(et+1)/2,ft=(it+1)/2,mt=(ot+1)/2,gt=(tt+nt)/4,vt=(rt+ct)/4,yt=(at+st)/4;return dt>ft&&dt>mt?dt<.01?(c=0,d=.707106781,b=.707106781):(c=Math.sqrt(dt),d=gt/c,b=vt/c):ft>mt?ft<.01?(c=.707106781,d=0,b=.707106781):(d=Math.sqrt(ft),c=gt/d,b=yt/d):mt<.01?(c=.707106781,d=.707106781,b=0):(b=Math.sqrt(mt),c=vt/b,d=yt/b),this.set(c,d,b,o),this}let ht=Math.sqrt((st-at)*(st-at)+(rt-ct)*(rt-ct)+(nt-tt)*(nt-tt));return Math.abs(ht)<.001&&(ht=1),this.x=(st-at)/ht,this.y=(rt-ct)/ht,this.z=(nt-tt)/ht,this.w=Math.acos((et+it+ot-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this.w=Math.max(a.w,Math.min(o.w,this.w)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this.w=Math.max(a,Math.min(o,this.w)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this.w+=(a.w-this.w)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this.w=a.w+(o.w-a.w)*c,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this.w=a[o+3],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a[o+3]=this.w,a}fromBufferAttribute(a,o){return this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this.w=a.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher$1{constructor(a=1,o=1,c={}){super(),this.isWebGLRenderTarget=!0,this.width=a,this.height=o,this.depth=1,this.scissor=new Vector4(0,0,a,o),this.scissorTest=!1,this.viewport=new Vector4(0,0,a,o);const d={width:a,height:o,depth:1};c.encoding!==void 0&&(warnOnce$1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),c.colorSpace=c.encoding===sRGBEncoding$1?SRGBColorSpace$1:NoColorSpace$1),this.texture=new Texture$1(d,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=c.generateMipmaps!==void 0?c.generateMipmaps:!1,this.texture.internalFormat=c.internalFormat!==void 0?c.internalFormat:null,this.texture.minFilter=c.minFilter!==void 0?c.minFilter:LinearFilter$1,this.depthBuffer=c.depthBuffer!==void 0?c.depthBuffer:!0,this.stencilBuffer=c.stencilBuffer!==void 0?c.stencilBuffer:!1,this.depthTexture=c.depthTexture!==void 0?c.depthTexture:null,this.samples=c.samples!==void 0?c.samples:0}setSize(a,o,c=1){(this.width!==a||this.height!==o||this.depth!==c)&&(this.width=a,this.height=o,this.depth=c,this.texture.image.width=a,this.texture.image.height=o,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o)}clone(){return new this.constructor().copy(this)}copy(a){this.width=a.width,this.height=a.height,this.depth=a.depth,this.scissor.copy(a.scissor),this.scissorTest=a.scissorTest,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},a.texture.image);return this.texture.source=new Source$1(o),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,a.depthTexture!==null&&(this.depthTexture=a.depthTexture.clone()),this.samples=a.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture$1{constructor(a=null,o=1,c=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:a,width:o,height:c,depth:d},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping$1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(a=1,o=1,c=1){super(a,o),this.isWebGLArrayRenderTarget=!0,this.depth=c,this.texture=new DataArrayTexture(null,a,o,c),this.texture.isRenderTargetTexture=!0}}let Data3DTexture$1=class extends Texture$1{constructor(a=null,o=1,c=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:a,width:o,height:c,depth:d},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping$1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(a=1,o=1,c=1){super(a,o),this.isWebGL3DRenderTarget=!0,this.depth=c,this.texture=new Data3DTexture$1(null,a,o,c),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(a=1,o=1,c=1,d={}){super(a,o,d),this.isWebGLMultipleRenderTargets=!0;const b=this.texture;this.texture=[];for(let $=0;$<c;$++)this.texture[$]=b.clone(),this.texture[$].isRenderTargetTexture=!0}setSize(a,o,c=1){if(this.width!==a||this.height!==o||this.depth!==c){this.width=a,this.height=o,this.depth=c;for(let d=0,b=this.texture.length;d<b;d++)this.texture[d].image.width=a,this.texture[d].image.height=o,this.texture[d].image.depth=c;this.dispose()}return this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o),this}copy(a){this.dispose(),this.width=a.width,this.height=a.height,this.depth=a.depth,this.scissor.copy(a.scissor),this.scissorTest=a.scissorTest,this.viewport.copy(a.viewport),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,a.depthTexture!==null&&(this.depthTexture=a.depthTexture.clone()),this.texture.length=0;for(let o=0,c=a.texture.length;o<c;o++)this.texture[o]=a.texture[o].clone(),this.texture[o].isRenderTargetTexture=!0;return this}}class Quaternion{constructor(a=0,o=0,c=0,d=1){this.isQuaternion=!0,this._x=a,this._y=o,this._z=c,this._w=d}static slerpFlat(a,o,c,d,b,$,j){let _e=c[d+0],et=c[d+1],tt=c[d+2],rt=c[d+3];const nt=b[$+0],it=b[$+1],at=b[$+2],ct=b[$+3];if(j===0){a[o+0]=_e,a[o+1]=et,a[o+2]=tt,a[o+3]=rt;return}if(j===1){a[o+0]=nt,a[o+1]=it,a[o+2]=at,a[o+3]=ct;return}if(rt!==ct||_e!==nt||et!==it||tt!==at){let st=1-j;const ot=_e*nt+et*it+tt*at+rt*ct,ht=ot>=0?1:-1,dt=1-ot*ot;if(dt>Number.EPSILON){const mt=Math.sqrt(dt),gt=Math.atan2(mt,ot*ht);st=Math.sin(st*gt)/mt,j=Math.sin(j*gt)/mt}const ft=j*ht;if(_e=_e*st+nt*ft,et=et*st+it*ft,tt=tt*st+at*ft,rt=rt*st+ct*ft,st===1-j){const mt=1/Math.sqrt(_e*_e+et*et+tt*tt+rt*rt);_e*=mt,et*=mt,tt*=mt,rt*=mt}}a[o]=_e,a[o+1]=et,a[o+2]=tt,a[o+3]=rt}static multiplyQuaternionsFlat(a,o,c,d,b,$){const j=c[d],_e=c[d+1],et=c[d+2],tt=c[d+3],rt=b[$],nt=b[$+1],it=b[$+2],at=b[$+3];return a[o]=j*at+tt*rt+_e*it-et*nt,a[o+1]=_e*at+tt*nt+et*rt-j*it,a[o+2]=et*at+tt*it+j*nt-_e*rt,a[o+3]=tt*at-j*rt-_e*nt-et*it,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,o,c,d){return this._x=a,this._y=o,this._z=c,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,o){const c=a._x,d=a._y,b=a._z,$=a._order,j=Math.cos,_e=Math.sin,et=j(c/2),tt=j(d/2),rt=j(b/2),nt=_e(c/2),it=_e(d/2),at=_e(b/2);switch($){case"XYZ":this._x=nt*tt*rt+et*it*at,this._y=et*it*rt-nt*tt*at,this._z=et*tt*at+nt*it*rt,this._w=et*tt*rt-nt*it*at;break;case"YXZ":this._x=nt*tt*rt+et*it*at,this._y=et*it*rt-nt*tt*at,this._z=et*tt*at-nt*it*rt,this._w=et*tt*rt+nt*it*at;break;case"ZXY":this._x=nt*tt*rt-et*it*at,this._y=et*it*rt+nt*tt*at,this._z=et*tt*at+nt*it*rt,this._w=et*tt*rt-nt*it*at;break;case"ZYX":this._x=nt*tt*rt-et*it*at,this._y=et*it*rt+nt*tt*at,this._z=et*tt*at-nt*it*rt,this._w=et*tt*rt+nt*it*at;break;case"YZX":this._x=nt*tt*rt+et*it*at,this._y=et*it*rt+nt*tt*at,this._z=et*tt*at-nt*it*rt,this._w=et*tt*rt-nt*it*at;break;case"XZY":this._x=nt*tt*rt-et*it*at,this._y=et*it*rt-nt*tt*at,this._z=et*tt*at+nt*it*rt,this._w=et*tt*rt+nt*it*at;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+$)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(a,o){const c=o/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(a){const o=a.elements,c=o[0],d=o[4],b=o[8],$=o[1],j=o[5],_e=o[9],et=o[2],tt=o[6],rt=o[10],nt=c+j+rt;if(nt>0){const it=.5/Math.sqrt(nt+1);this._w=.25/it,this._x=(tt-_e)*it,this._y=(b-et)*it,this._z=($-d)*it}else if(c>j&&c>rt){const it=2*Math.sqrt(1+c-j-rt);this._w=(tt-_e)/it,this._x=.25*it,this._y=(d+$)/it,this._z=(b+et)/it}else if(j>rt){const it=2*Math.sqrt(1+j-c-rt);this._w=(b-et)/it,this._x=(d+$)/it,this._y=.25*it,this._z=(_e+tt)/it}else{const it=2*Math.sqrt(1+rt-c-j);this._w=($-d)/it,this._x=(b+et)/it,this._y=(_e+tt)/it,this._z=.25*it}return this._onChangeCallback(),this}setFromUnitVectors(a,o){let c=a.dot(o)+1;return c<Number.EPSILON?(c=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=c):(this._x=0,this._y=-a.z,this._z=a.y,this._w=c)):(this._x=a.y*o.z-a.z*o.y,this._y=a.z*o.x-a.x*o.z,this._z=a.x*o.y-a.y*o.x,this._w=c),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(clamp$2(this.dot(a),-1,1)))}rotateTowards(a,o){const c=this.angleTo(a);if(c===0)return this;const d=Math.min(1,o/c);return this.slerp(a,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return a===0?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a){return this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,o){const c=a._x,d=a._y,b=a._z,$=a._w,j=o._x,_e=o._y,et=o._z,tt=o._w;return this._x=c*tt+$*j+d*et-b*_e,this._y=d*tt+$*_e+b*j-c*et,this._z=b*tt+$*et+c*_e-d*j,this._w=$*tt-c*j-d*_e-b*et,this._onChangeCallback(),this}slerp(a,o){if(o===0)return this;if(o===1)return this.copy(a);const c=this._x,d=this._y,b=this._z,$=this._w;let j=$*a._w+c*a._x+d*a._y+b*a._z;if(j<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,j=-j):this.copy(a),j>=1)return this._w=$,this._x=c,this._y=d,this._z=b,this;const _e=1-j*j;if(_e<=Number.EPSILON){const it=1-o;return this._w=it*$+o*this._w,this._x=it*c+o*this._x,this._y=it*d+o*this._y,this._z=it*b+o*this._z,this.normalize(),this._onChangeCallback(),this}const et=Math.sqrt(_e),tt=Math.atan2(et,j),rt=Math.sin((1-o)*tt)/et,nt=Math.sin(o*tt)/et;return this._w=$*rt+this._w*nt,this._x=c*rt+this._x*nt,this._y=d*rt+this._y*nt,this._z=b*rt+this._z*nt,this._onChangeCallback(),this}slerpQuaternions(a,o,c){return this.copy(a).slerp(o,c)}random(){const a=Math.random(),o=Math.sqrt(1-a),c=Math.sqrt(a),d=2*Math.PI*Math.random(),b=2*Math.PI*Math.random();return this.set(o*Math.cos(d),c*Math.sin(b),c*Math.cos(b),o*Math.sin(d))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,o=0){return this._x=a[o],this._y=a[o+1],this._z=a[o+2],this._w=a[o+3],this._onChangeCallback(),this}toArray(a=[],o=0){return a[o]=this._x,a[o+1]=this._y,a[o+2]=this._z,a[o+3]=this._w,a}fromBufferAttribute(a,o){return this._x=a.getX(o),this._y=a.getY(o),this._z=a.getZ(o),this._w=a.getW(o),this}toJSON(){return this.toArray()}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(a=0,o=0,c=0){Vector3.prototype.isVector3=!0,this.x=a,this.y=o,this.z=c}set(a,o,c){return c===void 0&&(c=this.z),this.x=a,this.y=o,this.z=c,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this}sub(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,o){return this.x=a.x*o.x,this.y=a.y*o.y,this.z=a.z*o.z,this}applyEuler(a){return this.applyQuaternion(_quaternion$4.setFromEuler(a))}applyAxisAngle(a,o){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(a,o))}applyMatrix3(a){const o=this.x,c=this.y,d=this.z,b=a.elements;return this.x=b[0]*o+b[3]*c+b[6]*d,this.y=b[1]*o+b[4]*c+b[7]*d,this.z=b[2]*o+b[5]*c+b[8]*d,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const o=this.x,c=this.y,d=this.z,b=a.elements,$=1/(b[3]*o+b[7]*c+b[11]*d+b[15]);return this.x=(b[0]*o+b[4]*c+b[8]*d+b[12])*$,this.y=(b[1]*o+b[5]*c+b[9]*d+b[13])*$,this.z=(b[2]*o+b[6]*c+b[10]*d+b[14])*$,this}applyQuaternion(a){const o=this.x,c=this.y,d=this.z,b=a.x,$=a.y,j=a.z,_e=a.w,et=_e*o+$*d-j*c,tt=_e*c+j*o-b*d,rt=_e*d+b*c-$*o,nt=-b*o-$*c-j*d;return this.x=et*_e+nt*-b+tt*-j-rt*-$,this.y=tt*_e+nt*-$+rt*-b-et*-j,this.z=rt*_e+nt*-j+et*-$-tt*-b,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const o=this.x,c=this.y,d=this.z,b=a.elements;return this.x=b[0]*o+b[4]*c+b[8]*d,this.y=b[1]*o+b[5]*c+b[9]*d,this.z=b[2]*o+b[6]*c+b[10]*d,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this}cross(a){return this.crossVectors(this,a)}crossVectors(a,o){const c=a.x,d=a.y,b=a.z,$=o.x,j=o.y,_e=o.z;return this.x=d*_e-b*j,this.y=b*$-c*_e,this.z=c*j-d*$,this}projectOnVector(a){const o=a.lengthSq();if(o===0)return this.set(0,0,0);const c=a.dot(this)/o;return this.copy(a).multiplyScalar(c)}projectOnPlane(a){return _vector$b.copy(this).projectOnVector(a),this.sub(_vector$b)}reflect(a){return this.sub(_vector$b.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const o=Math.sqrt(this.lengthSq()*a.lengthSq());if(o===0)return Math.PI/2;const c=this.dot(a)/o;return Math.acos(clamp$2(c,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return o*o+c*c+d*d}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,o,c){const d=Math.sin(o)*a;return this.x=d*Math.sin(c),this.y=Math.cos(o)*a,this.z=d*Math.cos(c),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,o,c){return this.x=a*Math.sin(o),this.y=c,this.z=a*Math.cos(o),this}setFromMatrixPosition(a){const o=a.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(a){const o=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length(),d=this.setFromMatrixColumn(a,2).length();return this.x=o,this.y=c,this.z=d,this}setFromMatrixColumn(a,o){return this.fromArray(a.elements,o*4)}setFromMatrix3Column(a,o){return this.fromArray(a.elements,o*3)}setFromEuler(a){return this.x=a._x,this.y=a._y,this.z=a._z,this}setFromColor(a){return this.x=a.r,this.y=a.g,this.z=a.b,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a}fromBufferAttribute(a,o){return this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const a=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,c=Math.sqrt(1-a**2);return this.x=c*Math.cos(o),this.y=c*Math.sin(o),this.z=a,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$b=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(a=new Vector3(1/0,1/0,1/0),o=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=a,this.max=o}set(a,o){return this.min.copy(a),this.max.copy(o),this}setFromArray(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o+=3)this.expandByPoint(_vector$a.fromArray(a,o));return this}setFromBufferAttribute(a){this.makeEmpty();for(let o=0,c=a.count;o<c;o++)this.expandByPoint(_vector$a.fromBufferAttribute(a,o));return this}setFromPoints(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o++)this.expandByPoint(a[o]);return this}setFromCenterAndSize(a,o){const c=_vector$a.copy(o).multiplyScalar(.5);return this.min.copy(a).sub(c),this.max.copy(a).add(c),this}setFromObject(a,o=!1){return this.makeEmpty(),this.expandByObject(a,o)}clone(){return new this.constructor().copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a,o=!1){if(a.updateWorldMatrix(!1,!1),a.boundingBox!==void 0)a.boundingBox===null&&a.computeBoundingBox(),_box$3.copy(a.boundingBox),_box$3.applyMatrix4(a.matrixWorld),this.union(_box$3);else{const d=a.geometry;if(d!==void 0)if(o&&d.attributes!==void 0&&d.attributes.position!==void 0){const b=d.attributes.position;for(let $=0,j=b.count;$<j;$++)_vector$a.fromBufferAttribute(b,$).applyMatrix4(a.matrixWorld),this.expandByPoint(_vector$a)}else d.boundingBox===null&&d.computeBoundingBox(),_box$3.copy(d.boundingBox),_box$3.applyMatrix4(a.matrixWorld),this.union(_box$3)}const c=a.children;for(let d=0,b=c.length;d<b;d++)this.expandByObject(c[d],o);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,o){return o.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,_vector$a),_vector$a.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let o,c;return a.normal.x>0?(o=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(o=a.normal.x*this.max.x,c=a.normal.x*this.min.x),a.normal.y>0?(o+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(o+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y),a.normal.z>0?(o+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(o+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z),o<=-a.constant&&c>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(a.a,_center),_v1$7.subVectors(a.b,_center),_v2$4.subVectors(a.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let o=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(o,_v0$2,_v1$7,_v2$4,_extents)||(o=[1,0,0,0,1,0,0,0,1],!satForAxes(o,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),o=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(o,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(a,o){return o.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,_vector$a).distanceTo(a)}getBoundingSphere(a){return this.isEmpty()?a.makeEmpty():(this.getCenter(a.center),a.radius=this.getSize(_vector$a).length()*.5),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(_points),this)}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$a=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(s,a,o,c,d){for(let b=0,$=s.length-3;b<=$;b+=3){_testAxis.fromArray(s,b);const j=d.x*Math.abs(_testAxis.x)+d.y*Math.abs(_testAxis.y)+d.z*Math.abs(_testAxis.z),_e=a.dot(_testAxis),et=o.dot(_testAxis),tt=c.dot(_testAxis);if(Math.max(-Math.max(_e,et,tt),Math.min(_e,et,tt))>j)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(a=new Vector3,o=-1){this.center=a,this.radius=o}set(a,o){return this.center.copy(a),this.radius=o,this}setFromPoints(a,o){const c=this.center;o!==void 0?c.copy(o):_box$2.setFromPoints(a).getCenter(c);let d=0;for(let b=0,$=a.length;b<$;b++)d=Math.max(d,c.distanceToSquared(a[b]));return this.radius=Math.sqrt(d),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const o=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=o*o}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,o){const c=this.center.distanceToSquared(a);return o.copy(a),c>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){if(this.isEmpty())return this.center.copy(a),this.radius=0,this;_v1$6.subVectors(a,this.center);const o=_v1$6.lengthSq();if(o>this.radius*this.radius){const c=Math.sqrt(o),d=(c-this.radius)*.5;this.center.addScaledVector(_v1$6,d/c),this.radius+=d}return this}union(a){return a.isEmpty()?this:this.isEmpty()?(this.copy(a),this):(this.center.equals(a.center)===!0?this.radius=Math.max(this.radius,a.radius):(_v2$3.subVectors(a.center,this.center).setLength(a.radius),this.expandByPoint(_v1$6.copy(a.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(a.center).sub(_v2$3))),this)}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$9=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(a=new Vector3,o=new Vector3(0,0,-1)){this.origin=a,this.direction=o}set(a,o){return this.origin.copy(a),this.direction.copy(o),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,o){return o.copy(this.origin).addScaledVector(this.direction,a)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,_vector$9)),this}closestPointToPoint(a,o){o.subVectors(a,this.origin);const c=o.dot(this.direction);return c<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,c)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const o=_vector$9.subVectors(a,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(a):(_vector$9.copy(this.origin).addScaledVector(this.direction,o),_vector$9.distanceToSquared(a))}distanceSqToSegment(a,o,c,d){_segCenter.copy(a).add(o).multiplyScalar(.5),_segDir.copy(o).sub(a).normalize(),_diff.copy(this.origin).sub(_segCenter);const b=a.distanceTo(o)*.5,$=-this.direction.dot(_segDir),j=_diff.dot(this.direction),_e=-_diff.dot(_segDir),et=_diff.lengthSq(),tt=Math.abs(1-$*$);let rt,nt,it,at;if(tt>0)if(rt=$*_e-j,nt=$*j-_e,at=b*tt,rt>=0)if(nt>=-at)if(nt<=at){const ct=1/tt;rt*=ct,nt*=ct,it=rt*(rt+$*nt+2*j)+nt*($*rt+nt+2*_e)+et}else nt=b,rt=Math.max(0,-($*nt+j)),it=-rt*rt+nt*(nt+2*_e)+et;else nt=-b,rt=Math.max(0,-($*nt+j)),it=-rt*rt+nt*(nt+2*_e)+et;else nt<=-at?(rt=Math.max(0,-(-$*b+j)),nt=rt>0?-b:Math.min(Math.max(-b,-_e),b),it=-rt*rt+nt*(nt+2*_e)+et):nt<=at?(rt=0,nt=Math.min(Math.max(-b,-_e),b),it=nt*(nt+2*_e)+et):(rt=Math.max(0,-($*b+j)),nt=rt>0?b:Math.min(Math.max(-b,-_e),b),it=-rt*rt+nt*(nt+2*_e)+et);else nt=$>0?-b:b,rt=Math.max(0,-($*nt+j)),it=-rt*rt+nt*(nt+2*_e)+et;return c&&c.copy(this.origin).addScaledVector(this.direction,rt),d&&d.copy(_segCenter).addScaledVector(_segDir,nt),it}intersectSphere(a,o){_vector$9.subVectors(a.center,this.origin);const c=_vector$9.dot(this.direction),d=_vector$9.dot(_vector$9)-c*c,b=a.radius*a.radius;if(d>b)return null;const $=Math.sqrt(b-d),j=c-$,_e=c+$;return _e<0?null:j<0?this.at(_e,o):this.at(j,o)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const o=a.normal.dot(this.direction);if(o===0)return a.distanceToPoint(this.origin)===0?0:null;const c=-(this.origin.dot(a.normal)+a.constant)/o;return c>=0?c:null}intersectPlane(a,o){const c=this.distanceToPlane(a);return c===null?null:this.at(c,o)}intersectsPlane(a){const o=a.distanceToPoint(this.origin);return o===0||a.normal.dot(this.direction)*o<0}intersectBox(a,o){let c,d,b,$,j,_e;const et=1/this.direction.x,tt=1/this.direction.y,rt=1/this.direction.z,nt=this.origin;return et>=0?(c=(a.min.x-nt.x)*et,d=(a.max.x-nt.x)*et):(c=(a.max.x-nt.x)*et,d=(a.min.x-nt.x)*et),tt>=0?(b=(a.min.y-nt.y)*tt,$=(a.max.y-nt.y)*tt):(b=(a.max.y-nt.y)*tt,$=(a.min.y-nt.y)*tt),c>$||b>d||((b>c||isNaN(c))&&(c=b),($<d||isNaN(d))&&(d=$),rt>=0?(j=(a.min.z-nt.z)*rt,_e=(a.max.z-nt.z)*rt):(j=(a.max.z-nt.z)*rt,_e=(a.min.z-nt.z)*rt),c>_e||j>d)||((j>c||c!==c)&&(c=j),(_e<d||d!==d)&&(d=_e),d<0)?null:this.at(c>=0?c:d,o)}intersectsBox(a){return this.intersectBox(a,_vector$9)!==null}intersectTriangle(a,o,c,d,b){_edge1.subVectors(o,a),_edge2.subVectors(c,a),_normal$1.crossVectors(_edge1,_edge2);let $=this.direction.dot(_normal$1),j;if($>0){if(d)return null;j=1}else if($<0)j=-1,$=-$;else return null;_diff.subVectors(this.origin,a);const _e=j*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(_e<0)return null;const et=j*this.direction.dot(_edge1.cross(_diff));if(et<0||_e+et>$)return null;const tt=-j*_diff.dot(_normal$1);return tt<0?null:this.at(tt/$,b)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(a,o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a!==void 0&&this.set(a,o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st)}set(a,o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st){const ot=this.elements;return ot[0]=a,ot[4]=o,ot[8]=c,ot[12]=d,ot[1]=b,ot[5]=$,ot[9]=j,ot[13]=_e,ot[2]=et,ot[6]=tt,ot[10]=rt,ot[14]=nt,ot[3]=it,ot[7]=at,ot[11]=ct,ot[15]=st,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],this}copyPosition(a){const o=this.elements,c=a.elements;return o[12]=c[12],o[13]=c[13],o[14]=c[14],this}setFromMatrix3(a){const o=a.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(a,o,c){return a.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(a,o,c){return this.set(a.x,o.x,c.x,0,a.y,o.y,c.y,0,a.z,o.z,c.z,0,0,0,0,1),this}extractRotation(a){const o=this.elements,c=a.elements,d=1/_v1$5.setFromMatrixColumn(a,0).length(),b=1/_v1$5.setFromMatrixColumn(a,1).length(),$=1/_v1$5.setFromMatrixColumn(a,2).length();return o[0]=c[0]*d,o[1]=c[1]*d,o[2]=c[2]*d,o[3]=0,o[4]=c[4]*b,o[5]=c[5]*b,o[6]=c[6]*b,o[7]=0,o[8]=c[8]*$,o[9]=c[9]*$,o[10]=c[10]*$,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(a){const o=this.elements,c=a.x,d=a.y,b=a.z,$=Math.cos(c),j=Math.sin(c),_e=Math.cos(d),et=Math.sin(d),tt=Math.cos(b),rt=Math.sin(b);if(a.order==="XYZ"){const nt=$*tt,it=$*rt,at=j*tt,ct=j*rt;o[0]=_e*tt,o[4]=-_e*rt,o[8]=et,o[1]=it+at*et,o[5]=nt-ct*et,o[9]=-j*_e,o[2]=ct-nt*et,o[6]=at+it*et,o[10]=$*_e}else if(a.order==="YXZ"){const nt=_e*tt,it=_e*rt,at=et*tt,ct=et*rt;o[0]=nt+ct*j,o[4]=at*j-it,o[8]=$*et,o[1]=$*rt,o[5]=$*tt,o[9]=-j,o[2]=it*j-at,o[6]=ct+nt*j,o[10]=$*_e}else if(a.order==="ZXY"){const nt=_e*tt,it=_e*rt,at=et*tt,ct=et*rt;o[0]=nt-ct*j,o[4]=-$*rt,o[8]=at+it*j,o[1]=it+at*j,o[5]=$*tt,o[9]=ct-nt*j,o[2]=-$*et,o[6]=j,o[10]=$*_e}else if(a.order==="ZYX"){const nt=$*tt,it=$*rt,at=j*tt,ct=j*rt;o[0]=_e*tt,o[4]=at*et-it,o[8]=nt*et+ct,o[1]=_e*rt,o[5]=ct*et+nt,o[9]=it*et-at,o[2]=-et,o[6]=j*_e,o[10]=$*_e}else if(a.order==="YZX"){const nt=$*_e,it=$*et,at=j*_e,ct=j*et;o[0]=_e*tt,o[4]=ct-nt*rt,o[8]=at*rt+it,o[1]=rt,o[5]=$*tt,o[9]=-j*tt,o[2]=-et*tt,o[6]=it*rt+at,o[10]=nt-ct*rt}else if(a.order==="XZY"){const nt=$*_e,it=$*et,at=j*_e,ct=j*et;o[0]=_e*tt,o[4]=-rt,o[8]=et*tt,o[1]=nt*rt+ct,o[5]=$*tt,o[9]=it*rt-at,o[2]=at*rt-it,o[6]=j*tt,o[10]=ct*rt+nt}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(a){return this.compose(_zero,a,_one)}lookAt(a,o,c){const d=this.elements;return _z.subVectors(a,o),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(c,_z),_x.lengthSq()===0&&(Math.abs(c.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(c,_z)),_x.normalize(),_y.crossVectors(_z,_x),d[0]=_x.x,d[4]=_y.x,d[8]=_z.x,d[1]=_x.y,d[5]=_y.y,d[9]=_z.y,d[2]=_x.z,d[6]=_y.z,d[10]=_z.z,this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,d=o.elements,b=this.elements,$=c[0],j=c[4],_e=c[8],et=c[12],tt=c[1],rt=c[5],nt=c[9],it=c[13],at=c[2],ct=c[6],st=c[10],ot=c[14],ht=c[3],dt=c[7],ft=c[11],mt=c[15],gt=d[0],vt=d[4],yt=d[8],Et=d[12],St=d[1],Ct=d[5],wt=d[9],_t=d[13],Tt=d[2],Mt=d[6],Bt=d[10],Rt=d[14],bt=d[3],Pt=d[7],Dt=d[11],$t=d[15];return b[0]=$*gt+j*St+_e*Tt+et*bt,b[4]=$*vt+j*Ct+_e*Mt+et*Pt,b[8]=$*yt+j*wt+_e*Bt+et*Dt,b[12]=$*Et+j*_t+_e*Rt+et*$t,b[1]=tt*gt+rt*St+nt*Tt+it*bt,b[5]=tt*vt+rt*Ct+nt*Mt+it*Pt,b[9]=tt*yt+rt*wt+nt*Bt+it*Dt,b[13]=tt*Et+rt*_t+nt*Rt+it*$t,b[2]=at*gt+ct*St+st*Tt+ot*bt,b[6]=at*vt+ct*Ct+st*Mt+ot*Pt,b[10]=at*yt+ct*wt+st*Bt+ot*Dt,b[14]=at*Et+ct*_t+st*Rt+ot*$t,b[3]=ht*gt+dt*St+ft*Tt+mt*bt,b[7]=ht*vt+dt*Ct+ft*Mt+mt*Pt,b[11]=ht*yt+dt*wt+ft*Bt+mt*Dt,b[15]=ht*Et+dt*_t+ft*Rt+mt*$t,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[4]*=a,o[8]*=a,o[12]*=a,o[1]*=a,o[5]*=a,o[9]*=a,o[13]*=a,o[2]*=a,o[6]*=a,o[10]*=a,o[14]*=a,o[3]*=a,o[7]*=a,o[11]*=a,o[15]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[4],d=a[8],b=a[12],$=a[1],j=a[5],_e=a[9],et=a[13],tt=a[2],rt=a[6],nt=a[10],it=a[14],at=a[3],ct=a[7],st=a[11],ot=a[15];return at*(+b*_e*rt-d*et*rt-b*j*nt+c*et*nt+d*j*it-c*_e*it)+ct*(+o*_e*it-o*et*nt+b*$*nt-d*$*it+d*et*tt-b*_e*tt)+st*(+o*et*rt-o*j*it-b*$*rt+c*$*it+b*j*tt-c*et*tt)+ot*(-d*j*tt-o*_e*rt+o*j*nt+d*$*rt-c*$*nt+c*_e*tt)}transpose(){const a=this.elements;let o;return o=a[1],a[1]=a[4],a[4]=o,o=a[2],a[2]=a[8],a[8]=o,o=a[6],a[6]=a[9],a[9]=o,o=a[3],a[3]=a[12],a[12]=o,o=a[7],a[7]=a[13],a[13]=o,o=a[11],a[11]=a[14],a[14]=o,this}setPosition(a,o,c){const d=this.elements;return a.isVector3?(d[12]=a.x,d[13]=a.y,d[14]=a.z):(d[12]=a,d[13]=o,d[14]=c),this}invert(){const a=this.elements,o=a[0],c=a[1],d=a[2],b=a[3],$=a[4],j=a[5],_e=a[6],et=a[7],tt=a[8],rt=a[9],nt=a[10],it=a[11],at=a[12],ct=a[13],st=a[14],ot=a[15],ht=rt*st*et-ct*nt*et+ct*_e*it-j*st*it-rt*_e*ot+j*nt*ot,dt=at*nt*et-tt*st*et-at*_e*it+$*st*it+tt*_e*ot-$*nt*ot,ft=tt*ct*et-at*rt*et+at*j*it-$*ct*it-tt*j*ot+$*rt*ot,mt=at*rt*_e-tt*ct*_e-at*j*nt+$*ct*nt+tt*j*st-$*rt*st,gt=o*ht+c*dt+d*ft+b*mt;if(gt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const vt=1/gt;return a[0]=ht*vt,a[1]=(ct*nt*b-rt*st*b-ct*d*it+c*st*it+rt*d*ot-c*nt*ot)*vt,a[2]=(j*st*b-ct*_e*b+ct*d*et-c*st*et-j*d*ot+c*_e*ot)*vt,a[3]=(rt*_e*b-j*nt*b-rt*d*et+c*nt*et+j*d*it-c*_e*it)*vt,a[4]=dt*vt,a[5]=(tt*st*b-at*nt*b+at*d*it-o*st*it-tt*d*ot+o*nt*ot)*vt,a[6]=(at*_e*b-$*st*b-at*d*et+o*st*et+$*d*ot-o*_e*ot)*vt,a[7]=($*nt*b-tt*_e*b+tt*d*et-o*nt*et-$*d*it+o*_e*it)*vt,a[8]=ft*vt,a[9]=(at*rt*b-tt*ct*b-at*c*it+o*ct*it+tt*c*ot-o*rt*ot)*vt,a[10]=($*ct*b-at*j*b+at*c*et-o*ct*et-$*c*ot+o*j*ot)*vt,a[11]=(tt*j*b-$*rt*b-tt*c*et+o*rt*et+$*c*it-o*j*it)*vt,a[12]=mt*vt,a[13]=(tt*ct*d-at*rt*d+at*c*nt-o*ct*nt-tt*c*st+o*rt*st)*vt,a[14]=(at*j*d-$*ct*d-at*c*_e+o*ct*_e+$*c*st-o*j*st)*vt,a[15]=($*rt*d-tt*j*d+tt*c*_e-o*rt*_e-$*c*nt+o*j*nt)*vt,this}scale(a){const o=this.elements,c=a.x,d=a.y,b=a.z;return o[0]*=c,o[4]*=d,o[8]*=b,o[1]*=c,o[5]*=d,o[9]*=b,o[2]*=c,o[6]*=d,o[10]*=b,o[3]*=c,o[7]*=d,o[11]*=b,this}getMaxScaleOnAxis(){const a=this.elements,o=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],c=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],d=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(o,c,d))}makeTranslation(a,o,c){return a.isVector3?this.set(1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1):this.set(1,0,0,a,0,1,0,o,0,0,1,c,0,0,0,1),this}makeRotationX(a){const o=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,o,-c,0,0,c,o,0,0,0,0,1),this}makeRotationY(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,0,c,0,0,1,0,0,-c,0,o,0,0,0,0,1),this}makeRotationZ(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,-c,0,0,c,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,o){const c=Math.cos(o),d=Math.sin(o),b=1-c,$=a.x,j=a.y,_e=a.z,et=b*$,tt=b*j;return this.set(et*$+c,et*j-d*_e,et*_e+d*j,0,et*j+d*_e,tt*j+c,tt*_e-d*$,0,et*_e-d*j,tt*_e+d*$,b*_e*_e+c,0,0,0,0,1),this}makeScale(a,o,c){return this.set(a,0,0,0,0,o,0,0,0,0,c,0,0,0,0,1),this}makeShear(a,o,c,d,b,$){return this.set(1,c,b,0,a,1,$,0,o,d,1,0,0,0,0,1),this}compose(a,o,c){const d=this.elements,b=o._x,$=o._y,j=o._z,_e=o._w,et=b+b,tt=$+$,rt=j+j,nt=b*et,it=b*tt,at=b*rt,ct=$*tt,st=$*rt,ot=j*rt,ht=_e*et,dt=_e*tt,ft=_e*rt,mt=c.x,gt=c.y,vt=c.z;return d[0]=(1-(ct+ot))*mt,d[1]=(it+ft)*mt,d[2]=(at-dt)*mt,d[3]=0,d[4]=(it-ft)*gt,d[5]=(1-(nt+ot))*gt,d[6]=(st+ht)*gt,d[7]=0,d[8]=(at+dt)*vt,d[9]=(st-ht)*vt,d[10]=(1-(nt+ct))*vt,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,this}decompose(a,o,c){const d=this.elements;let b=_v1$5.set(d[0],d[1],d[2]).length();const $=_v1$5.set(d[4],d[5],d[6]).length(),j=_v1$5.set(d[8],d[9],d[10]).length();this.determinant()<0&&(b=-b),a.x=d[12],a.y=d[13],a.z=d[14],_m1$2.copy(this);const et=1/b,tt=1/$,rt=1/j;return _m1$2.elements[0]*=et,_m1$2.elements[1]*=et,_m1$2.elements[2]*=et,_m1$2.elements[4]*=tt,_m1$2.elements[5]*=tt,_m1$2.elements[6]*=tt,_m1$2.elements[8]*=rt,_m1$2.elements[9]*=rt,_m1$2.elements[10]*=rt,o.setFromRotationMatrix(_m1$2),c.x=b,c.y=$,c.z=j,this}makePerspective(a,o,c,d,b,$,j=WebGLCoordinateSystem){const _e=this.elements,et=2*b/(o-a),tt=2*b/(c-d),rt=(o+a)/(o-a),nt=(c+d)/(c-d);let it,at;if(j===WebGLCoordinateSystem)it=-($+b)/($-b),at=-2*$*b/($-b);else if(j===WebGPUCoordinateSystem)it=-$/($-b),at=-$*b/($-b);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+j);return _e[0]=et,_e[4]=0,_e[8]=rt,_e[12]=0,_e[1]=0,_e[5]=tt,_e[9]=nt,_e[13]=0,_e[2]=0,_e[6]=0,_e[10]=it,_e[14]=at,_e[3]=0,_e[7]=0,_e[11]=-1,_e[15]=0,this}makeOrthographic(a,o,c,d,b,$,j=WebGLCoordinateSystem){const _e=this.elements,et=1/(o-a),tt=1/(c-d),rt=1/($-b),nt=(o+a)*et,it=(c+d)*tt;let at,ct;if(j===WebGLCoordinateSystem)at=($+b)*rt,ct=-2*rt;else if(j===WebGPUCoordinateSystem)at=b*rt,ct=-1*rt;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+j);return _e[0]=2*et,_e[4]=0,_e[8]=0,_e[12]=-nt,_e[1]=0,_e[5]=2*tt,_e[9]=0,_e[13]=-it,_e[2]=0,_e[6]=0,_e[10]=ct,_e[14]=-at,_e[3]=0,_e[7]=0,_e[11]=0,_e[15]=1,this}equals(a){const o=this.elements,c=a.elements;for(let d=0;d<16;d++)if(o[d]!==c[d])return!1;return!0}fromArray(a,o=0){for(let c=0;c<16;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a[o+9]=c[9],a[o+10]=c[10],a[o+11]=c[11],a[o+12]=c[12],a[o+13]=c[13],a[o+14]=c[14],a[o+15]=c[15],a}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(a=0,o=0,c=0,d=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=a,this._y=o,this._z=c,this._order=d}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,o,c,d=this._order){return this._x=a,this._y=o,this._z=c,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,o=this._order,c=!0){const d=a.elements,b=d[0],$=d[4],j=d[8],_e=d[1],et=d[5],tt=d[9],rt=d[2],nt=d[6],it=d[10];switch(o){case"XYZ":this._y=Math.asin(clamp$2(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(-tt,it),this._z=Math.atan2(-$,b)):(this._x=Math.atan2(nt,et),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$2(tt,-1,1)),Math.abs(tt)<.9999999?(this._y=Math.atan2(j,it),this._z=Math.atan2(_e,et)):(this._y=Math.atan2(-rt,b),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$2(nt,-1,1)),Math.abs(nt)<.9999999?(this._y=Math.atan2(-rt,it),this._z=Math.atan2(-$,et)):(this._y=0,this._z=Math.atan2(_e,b));break;case"ZYX":this._y=Math.asin(-clamp$2(rt,-1,1)),Math.abs(rt)<.9999999?(this._x=Math.atan2(nt,it),this._z=Math.atan2(_e,b)):(this._x=0,this._z=Math.atan2(-$,et));break;case"YZX":this._z=Math.asin(clamp$2(_e,-1,1)),Math.abs(_e)<.9999999?(this._x=Math.atan2(-tt,et),this._y=Math.atan2(-rt,b)):(this._x=0,this._y=Math.atan2(j,it));break;case"XZY":this._z=Math.asin(-clamp$2($,-1,1)),Math.abs($)<.9999999?(this._x=Math.atan2(nt,et),this._y=Math.atan2(j,b)):(this._x=Math.atan2(-tt,it),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,c===!0&&this._onChangeCallback(),this}setFromQuaternion(a,o,c){return _matrix.makeRotationFromQuaternion(a),this.setFromRotationMatrix(_matrix,o,c)}setFromVector3(a,o=this._order){return this.set(a.x,a.y,a.z,o)}reorder(a){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],a[3]!==void 0&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],o=0){return a[o]=this._x,a[o+1]=this._y,a[o+2]=this._z,a[o+3]=this._order,a}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return(this.mask&a.mask)!==0}isEnabled(a){return(this.mask&(1<<a|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const a=new Vector3,o=new Euler,c=new Quaternion,d=new Vector3(1,1,1);function b(){c.setFromEuler(o,!1)}function $(){o.setFromQuaternion(c,void 0,!1)}o._onChange(b),c._onChange($),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3$1}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,o){this.quaternion.setFromAxisAngle(a,o)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,o){return _q1.setFromAxisAngle(a,o),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(a,o){return _q1.setFromAxisAngle(a,o),this.quaternion.premultiply(_q1),this}rotateX(a){return this.rotateOnAxis(_xAxis,a)}rotateY(a){return this.rotateOnAxis(_yAxis,a)}rotateZ(a){return this.rotateOnAxis(_zAxis,a)}translateOnAxis(a,o){return _v1$4.copy(a).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(o)),this}translateX(a){return this.translateOnAxis(_xAxis,a)}translateY(a){return this.translateOnAxis(_yAxis,a)}translateZ(a){return this.translateOnAxis(_zAxis,a)}localToWorld(a){return this.updateWorldMatrix(!0,!1),a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return this.updateWorldMatrix(!0,!1),a.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(a,o,c){a.isVector3?_target.copy(a):_target.set(a,o,c);const d=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),d&&(_m1$1.extractRotation(d.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(a){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(a.parent!==null&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.remove(arguments[c]);return this}const o=this.children.indexOf(a);return o!==-1&&(a.parent=null,this.children.splice(o,1),a.dispatchEvent(_removedEvent)),this}removeFromParent(){const a=this.parent;return a!==null&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const o=this.children[a];o.parent=null,o.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),a.parent!==null&&(a.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(a.parent.matrixWorld)),a.applyMatrix4(_m1$1),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,o){if(this[a]===o)return this;for(let c=0,d=this.children.length;c<d;c++){const $=this.children[c].getObjectByProperty(a,o);if($!==void 0)return $}}getObjectsByProperty(a,o){let c=[];this[a]===o&&c.push(this);for(let d=0,b=this.children.length;d<b;d++){const $=this.children[d].getObjectsByProperty(a,o);$.length>0&&(c=c.concat($))}return c}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,a,_scale$2),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return a.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(a){a(this);const o=this.children;for(let c=0,d=o.length;c<d;c++)o[c].traverse(a)}traverseVisible(a){if(this.visible===!1)return;a(this);const o=this.children;for(let c=0,d=o.length;c<d;c++)o[c].traverseVisible(a)}traverseAncestors(a){const o=this.parent;o!==null&&(a(o),o.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const o=this.children;for(let c=0,d=o.length;c<d;c++){const b=o[c];(b.matrixWorldAutoUpdate===!0||a===!0)&&b.updateMatrixWorld(a)}}updateWorldMatrix(a,o){const c=this.parent;if(a===!0&&c!==null&&c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){const d=this.children;for(let b=0,$=d.length;b<$;b++){const j=d[b];j.matrixWorldAutoUpdate===!0&&j.updateWorldMatrix(!1,!0)}}}toJSON(a){const o=a===void 0||typeof a=="string",c={};o&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},c.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const d={};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.castShadow===!0&&(d.castShadow=!0),this.receiveShadow===!0&&(d.receiveShadow=!0),this.visible===!1&&(d.visible=!1),this.frustumCulled===!1&&(d.frustumCulled=!1),this.renderOrder!==0&&(d.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),d.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(d.instanceColor=this.instanceColor.toJSON()));function b(j,_e){return j[_e.uuid]===void 0&&(j[_e.uuid]=_e.toJSON(a)),_e.uuid}if(this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(d.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=b(a.geometries,this.geometry);const j=this.geometry.parameters;if(j!==void 0&&j.shapes!==void 0){const _e=j.shapes;if(Array.isArray(_e))for(let et=0,tt=_e.length;et<tt;et++){const rt=_e[et];b(a.shapes,rt)}else b(a.shapes,_e)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(b(a.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const j=[];for(let _e=0,et=this.material.length;_e<et;_e++)j.push(b(a.materials,this.material[_e]));d.material=j}else d.material=b(a.materials,this.material);if(this.children.length>0){d.children=[];for(let j=0;j<this.children.length;j++)d.children.push(this.children[j].toJSON(a).object)}if(this.animations.length>0){d.animations=[];for(let j=0;j<this.animations.length;j++){const _e=this.animations[j];d.animations.push(b(a.animations,_e))}}if(o){const j=$(a.geometries),_e=$(a.materials),et=$(a.textures),tt=$(a.images),rt=$(a.shapes),nt=$(a.skeletons),it=$(a.animations),at=$(a.nodes);j.length>0&&(c.geometries=j),_e.length>0&&(c.materials=_e),et.length>0&&(c.textures=et),tt.length>0&&(c.images=tt),rt.length>0&&(c.shapes=rt),nt.length>0&&(c.skeletons=nt),it.length>0&&(c.animations=it),at.length>0&&(c.nodes=at)}return c.object=d,c;function $(j){const _e=[];for(const et in j){const tt=j[et];delete tt.metadata,_e.push(tt)}return _e}}clone(a){return new this.constructor().copy(this,a)}copy(a,o=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=a.matrixWorldAutoUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.animations=a.animations,this.userData=JSON.parse(JSON.stringify(a.userData)),o===!0)for(let c=0;c<a.children.length;c++){const d=a.children[c];this.add(d.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1;class Triangle{constructor(a=new Vector3,o=new Vector3,c=new Vector3){this.a=a,this.b=o,this.c=c}static getNormal(a,o,c,d){d.subVectors(c,o),_v0$1.subVectors(a,o),d.cross(_v0$1);const b=d.lengthSq();return b>0?d.multiplyScalar(1/Math.sqrt(b)):d.set(0,0,0)}static getBarycoord(a,o,c,d,b){_v0$1.subVectors(d,o),_v1$3.subVectors(c,o),_v2$2.subVectors(a,o);const $=_v0$1.dot(_v0$1),j=_v0$1.dot(_v1$3),_e=_v0$1.dot(_v2$2),et=_v1$3.dot(_v1$3),tt=_v1$3.dot(_v2$2),rt=$*et-j*j;if(rt===0)return b.set(-2,-1,-1);const nt=1/rt,it=(et*_e-j*tt)*nt,at=($*tt-j*_e)*nt;return b.set(1-it-at,at,it)}static containsPoint(a,o,c,d){return this.getBarycoord(a,o,c,d,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(a,o,c,d,b,$,j,_e){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(a,o,c,d,b,$,j,_e)}static getInterpolation(a,o,c,d,b,$,j,_e){return this.getBarycoord(a,o,c,d,_v3$1),_e.setScalar(0),_e.addScaledVector(b,_v3$1.x),_e.addScaledVector($,_v3$1.y),_e.addScaledVector(j,_v3$1.z),_e}static isFrontFacing(a,o,c,d){return _v0$1.subVectors(c,o),_v1$3.subVectors(a,o),_v0$1.cross(_v1$3).dot(d)<0}set(a,o,c){return this.a.copy(a),this.b.copy(o),this.c.copy(c),this}setFromPointsAndIndices(a,o,c,d){return this.a.copy(a[o]),this.b.copy(a[c]),this.c.copy(a[d]),this}setFromAttributeAndIndices(a,o,c,d){return this.a.fromBufferAttribute(a,o),this.b.fromBufferAttribute(a,c),this.c.fromBufferAttribute(a,d),this}clone(){return new this.constructor().copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Triangle.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,o){return Triangle.getBarycoord(a,this.a,this.b,this.c,o)}getUV(a,o,c,d,b){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),Triangle.getInterpolation(a,this.a,this.b,this.c,o,c,d,b)}getInterpolation(a,o,c,d,b){return Triangle.getInterpolation(a,this.a,this.b,this.c,o,c,d,b)}containsPoint(a){return Triangle.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Triangle.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,o){const c=this.a,d=this.b,b=this.c;let $,j;_vab.subVectors(d,c),_vac.subVectors(b,c),_vap.subVectors(a,c);const _e=_vab.dot(_vap),et=_vac.dot(_vap);if(_e<=0&&et<=0)return o.copy(c);_vbp.subVectors(a,d);const tt=_vab.dot(_vbp),rt=_vac.dot(_vbp);if(tt>=0&&rt<=tt)return o.copy(d);const nt=_e*rt-tt*et;if(nt<=0&&_e>=0&&tt<=0)return $=_e/(_e-tt),o.copy(c).addScaledVector(_vab,$);_vcp.subVectors(a,b);const it=_vab.dot(_vcp),at=_vac.dot(_vcp);if(at>=0&&it<=at)return o.copy(b);const ct=it*et-_e*at;if(ct<=0&&et>=0&&at<=0)return j=et/(et-at),o.copy(c).addScaledVector(_vac,j);const st=tt*at-it*rt;if(st<=0&&rt-tt>=0&&it-at>=0)return _vbc.subVectors(b,d),j=(rt-tt)/(rt-tt+(it-at)),o.copy(d).addScaledVector(_vbc,j);const ot=1/(st+ct+nt);return $=ct*ot,j=nt*ot,o.copy(c).addScaledVector(_vab,$).addScaledVector(_vac,j)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(a!==void 0)for(const o in a){const c=a[o];if(c===void 0){console.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const d=this[o];if(d===void 0){console.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`);continue}d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[o]=c}}toJSON(a){const o=a===void 0||typeof a=="string";o&&(a={textures:{},images:{}});const c={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),this.roughness!==void 0&&(c.roughness=this.roughness),this.metalness!==void 0&&(c.metalness=this.metalness),this.sheen!==void 0&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(c.shininess=this.shininess),this.clearcoat!==void 0&&(c.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(c.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(c.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(c.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(c.iridescenceMap=this.iridescenceMap.toJSON(a).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(c.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid),this.anisotropy!==void 0&&(c.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(c.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(c.anisotropyMap=this.anisotropyMap.toJSON(a).uuid),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(a).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(a).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(a).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(a).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(a).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(a).uuid,this.combine!==void 0&&(c.combine=this.combine)),this.envMapIntensity!==void 0&&(c.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(c.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(a).uuid),this.transmission!==void 0&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(a).uuid),this.thickness!==void 0&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(a).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(c.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(c.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(c.size=this.size),this.shadowSide!==null&&(c.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(c.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(c.blending=this.blending),this.side!==FrontSide&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),this.transparent===!0&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(c.rotation=this.rotation),this.polygonOffset===!0&&(c.polygonOffset=!0),this.polygonOffsetFactor!==0&&(c.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(c.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(c.linewidth=this.linewidth),this.dashSize!==void 0&&(c.dashSize=this.dashSize),this.gapSize!==void 0&&(c.gapSize=this.gapSize),this.scale!==void 0&&(c.scale=this.scale),this.dithering===!0&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(c.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(c.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(c.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(c.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(c.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(c.flatShading=this.flatShading),this.visible===!1&&(c.visible=!1),this.toneMapped===!1&&(c.toneMapped=!1),this.fog===!1&&(c.fog=!1),Object.keys(this.userData).length>0&&(c.userData=this.userData);function d(b){const $=[];for(const j in b){const _e=b[j];delete _e.metadata,$.push(_e)}return $}if(o){const b=d(a.textures),$=d(a.images);b.length>0&&(c.textures=b),$.length>0&&(c.images=$)}return c}clone(){return new this.constructor().copy(this)}copy(a){this.name=a.name,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const o=a.clippingPlanes;let c=null;if(o!==null){const d=o.length;c=new Array(d);for(let b=0;b!==d;++b)c[b]=o[b].clone()}return this.clippingPlanes=c,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.forceSinglePass=a.forceSinglePass,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){a===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(s,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+(a-s)*6*o:o<1/2?a:o<2/3?s+(a-s)*6*(2/3-o):s}class Color{constructor(a,o,c){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(a,o,c)}set(a,o,c){if(o===void 0&&c===void 0){const d=a;d&&d.isColor?this.copy(d):typeof d=="number"?this.setHex(d):typeof d=="string"&&this.setStyle(d)}else this.setRGB(a,o,c);return this}setScalar(a){return this.r=a,this.g=a,this.b=a,this}setHex(a,o=SRGBColorSpace$1){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(a&255)/255,ColorManagement.toWorkingColorSpace(this,o),this}setRGB(a,o,c,d=ColorManagement.workingColorSpace){return this.r=a,this.g=o,this.b=c,ColorManagement.toWorkingColorSpace(this,d),this}setHSL(a,o,c,d=ColorManagement.workingColorSpace){if(a=euclideanModulo(a,1),o=clamp$2(o,0,1),c=clamp$2(c,0,1),o===0)this.r=this.g=this.b=c;else{const b=c<=.5?c*(1+o):c+o-c*o,$=2*c-b;this.r=hue2rgb($,b,a+1/3),this.g=hue2rgb($,b,a),this.b=hue2rgb($,b,a-1/3)}return ColorManagement.toWorkingColorSpace(this,d),this}setStyle(a,o=SRGBColorSpace$1){function c(b){b!==void 0&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}let d;if(d=/^(\w+)\(([^\)]*)\)/.exec(a)){let b;const $=d[1],j=d[2];switch($){case"rgb":case"rgba":if(b=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(j))return c(b[4]),this.setRGB(Math.min(255,parseInt(b[1],10))/255,Math.min(255,parseInt(b[2],10))/255,Math.min(255,parseInt(b[3],10))/255,o);if(b=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(j))return c(b[4]),this.setRGB(Math.min(100,parseInt(b[1],10))/100,Math.min(100,parseInt(b[2],10))/100,Math.min(100,parseInt(b[3],10))/100,o);break;case"hsl":case"hsla":if(b=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(j))return c(b[4]),this.setHSL(parseFloat(b[1])/360,parseFloat(b[2])/100,parseFloat(b[3])/100,o);break;default:console.warn("THREE.Color: Unknown color model "+a)}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(a)){const b=d[1],$=b.length;if($===3)return this.setRGB(parseInt(b.charAt(0),16)/15,parseInt(b.charAt(1),16)/15,parseInt(b.charAt(2),16)/15,o);if($===6)return this.setHex(parseInt(b,16),o);console.warn("THREE.Color: Invalid hex color "+a)}else if(a&&a.length>0)return this.setColorName(a,o);return this}setColorName(a,o=SRGBColorSpace$1){const c=_colorKeywords[a.toLowerCase()];return c!==void 0?this.setHex(c,o):console.warn("THREE.Color: Unknown color "+a),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){return this.r=a.r,this.g=a.g,this.b=a.b,this}copySRGBToLinear(a){return this.r=SRGBToLinear$1(a.r),this.g=SRGBToLinear$1(a.g),this.b=SRGBToLinear$1(a.b),this}copyLinearToSRGB(a){return this.r=LinearToSRGB(a.r),this.g=LinearToSRGB(a.g),this.b=LinearToSRGB(a.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(a=SRGBColorSpace$1){return ColorManagement.fromWorkingColorSpace(_color.copy(this),a),Math.round(clamp$2(_color.r*255,0,255))*65536+Math.round(clamp$2(_color.g*255,0,255))*256+Math.round(clamp$2(_color.b*255,0,255))}getHexString(a=SRGBColorSpace$1){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,o=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),o);const c=_color.r,d=_color.g,b=_color.b,$=Math.max(c,d,b),j=Math.min(c,d,b);let _e,et;const tt=(j+$)/2;if(j===$)_e=0,et=0;else{const rt=$-j;switch(et=tt<=.5?rt/($+j):rt/(2-$-j),$){case c:_e=(d-b)/rt+(d<b?6:0);break;case d:_e=(b-c)/rt+2;break;case b:_e=(c-d)/rt+4;break}_e/=6}return a.h=_e,a.s=et,a.l=tt,a}getRGB(a,o=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),o),a.r=_color.r,a.g=_color.g,a.b=_color.b,a}getStyle(a=SRGBColorSpace$1){ColorManagement.fromWorkingColorSpace(_color.copy(this),a);const o=_color.r,c=_color.g,d=_color.b;return a!==SRGBColorSpace$1?`color(${a} ${o.toFixed(3)} ${c.toFixed(3)} ${d.toFixed(3)})`:`rgb(${Math.round(o*255)},${Math.round(c*255)},${Math.round(d*255)})`}offsetHSL(a,o,c){return this.getHSL(_hslA),_hslA.h+=a,_hslA.s+=o,_hslA.l+=c,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this}addColors(a,o){return this.r=a.r+o.r,this.g=a.g+o.g,this.b=a.b+o.b,this}addScalar(a){return this.r+=a,this.g+=a,this.b+=a,this}sub(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this}multiply(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this}multiplyScalar(a){return this.r*=a,this.g*=a,this.b*=a,this}lerp(a,o){return this.r+=(a.r-this.r)*o,this.g+=(a.g-this.g)*o,this.b+=(a.b-this.b)*o,this}lerpColors(a,o,c){return this.r=a.r+(o.r-a.r)*c,this.g=a.g+(o.g-a.g)*c,this.b=a.b+(o.b-a.b)*c,this}lerpHSL(a,o){this.getHSL(_hslA),a.getHSL(_hslB);const c=lerp(_hslA.h,_hslB.h,o),d=lerp(_hslA.s,_hslB.s,o),b=lerp(_hslA.l,_hslB.l,o);return this.setHSL(c,d,b),this}setFromVector3(a){return this.r=a.x,this.g=a.y,this.b=a.z,this}applyMatrix3(a){const o=this.r,c=this.g,d=this.b,b=a.elements;return this.r=b[0]*o+b[3]*c+b[6]*d,this.g=b[1]*o+b[4]*c+b[7]*d,this.b=b[2]*o+b[5]*c+b[8]*d,this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,o=0){return this.r=a[o],this.g=a[o+1],this.b=a[o+2],this}toArray(a=[],o=0){return a[o]=this.r,a[o+1]=this.g,a[o+2]=this.b,a}fromBufferAttribute(a,o){return this.r=a.getX(o),this.g=a.getY(o),this.b=a.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(a){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const _tables=_generateTables();function _generateTables(){const s=new ArrayBuffer(4),a=new Float32Array(s),o=new Uint32Array(s),c=new Uint32Array(512),d=new Uint32Array(512);for(let _e=0;_e<256;++_e){const et=_e-127;et<-27?(c[_e]=0,c[_e|256]=32768,d[_e]=24,d[_e|256]=24):et<-14?(c[_e]=1024>>-et-14,c[_e|256]=1024>>-et-14|32768,d[_e]=-et-1,d[_e|256]=-et-1):et<=15?(c[_e]=et+15<<10,c[_e|256]=et+15<<10|32768,d[_e]=13,d[_e|256]=13):et<128?(c[_e]=31744,c[_e|256]=64512,d[_e]=24,d[_e|256]=24):(c[_e]=31744,c[_e|256]=64512,d[_e]=13,d[_e|256]=13)}const b=new Uint32Array(2048),$=new Uint32Array(64),j=new Uint32Array(64);for(let _e=1;_e<1024;++_e){let et=_e<<13,tt=0;for(;!(et&8388608);)et<<=1,tt-=8388608;et&=-8388609,tt+=947912704,b[_e]=et|tt}for(let _e=1024;_e<2048;++_e)b[_e]=939524096+(_e-1024<<13);for(let _e=1;_e<31;++_e)$[_e]=_e<<23;$[31]=1199570944,$[32]=2147483648;for(let _e=33;_e<63;++_e)$[_e]=2147483648+(_e-32<<23);$[63]=3347054592;for(let _e=1;_e<64;++_e)_e!==32&&(j[_e]=1024);return{floatView:a,uint32View:o,baseTable:c,shiftTable:d,mantissaTable:b,exponentTable:$,offsetTable:j}}function toHalfFloat(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=clamp$2(s,-65504,65504),_tables.floatView[0]=s;const a=_tables.uint32View[0],o=a>>23&511;return _tables.baseTable[o]+((a&8388607)>>_tables.shiftTable[o])}function fromHalfFloat(s){const a=s>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[a]+(s&1023)]+_tables.exponentTable[a],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$8=new Vector3,_vector2$1=new Vector2$1;class BufferAttribute{constructor(a,o,c=!1){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=o,this.count=a!==void 0?a.length/o:0,this.normalized=c,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(a){a===!0&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this.gpuType=a.gpuType,this}copyAt(a,o,c){a*=this.itemSize,c*=o.itemSize;for(let d=0,b=this.itemSize;d<b;d++)this.array[a+d]=o.array[c+d];return this}copyArray(a){return this.array.set(a),this}applyMatrix3(a){if(this.itemSize===2)for(let o=0,c=this.count;o<c;o++)_vector2$1.fromBufferAttribute(this,o),_vector2$1.applyMatrix3(a),this.setXY(o,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let o=0,c=this.count;o<c;o++)_vector$8.fromBufferAttribute(this,o),_vector$8.applyMatrix3(a),this.setXYZ(o,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyMatrix4(a){for(let o=0,c=this.count;o<c;o++)_vector$8.fromBufferAttribute(this,o),_vector$8.applyMatrix4(a),this.setXYZ(o,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(a){for(let o=0,c=this.count;o<c;o++)_vector$8.fromBufferAttribute(this,o),_vector$8.applyNormalMatrix(a),this.setXYZ(o,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(a){for(let o=0,c=this.count;o<c;o++)_vector$8.fromBufferAttribute(this,o),_vector$8.transformDirection(a),this.setXYZ(o,_vector$8.x,_vector$8.y,_vector$8.z);return this}set(a,o=0){return this.array.set(a,o),this}getX(a){let o=this.array[a*this.itemSize];return this.normalized&&(o=denormalize(o,this.array)),o}setX(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize]=o,this}getY(a){let o=this.array[a*this.itemSize+1];return this.normalized&&(o=denormalize(o,this.array)),o}setY(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+1]=o,this}getZ(a){let o=this.array[a*this.itemSize+2];return this.normalized&&(o=denormalize(o,this.array)),o}setZ(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+2]=o,this}getW(a){let o=this.array[a*this.itemSize+3];return this.normalized&&(o=denormalize(o,this.array)),o}setW(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+3]=o,this}setXY(a,o,c){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array)),this.array[a+0]=o,this.array[a+1]=c,this}setXYZ(a,o,c,d){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array)),this.array[a+0]=o,this.array[a+1]=c,this.array[a+2]=d,this}setXYZW(a,o,c,d,b){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array),b=normalize(b,this.array)),this.array[a+0]=o,this.array[a+1]=c,this.array[a+2]=d,this.array[a+3]=b,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(a.name=this.name),this.usage!==StaticDrawUsage&&(a.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(a.updateRange=this.updateRange),a}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Int8Array(a),o,c)}}class Uint8BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Uint8Array(a),o,c)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Uint8ClampedArray(a),o,c)}}class Int16BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Int16Array(a),o,c)}}class Uint16BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Uint16Array(a),o,c)}}class Int32BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Int32Array(a),o,c)}}class Uint32BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Uint32Array(a),o,c)}}class Float16BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Uint16Array(a),o,c),this.isFloat16BufferAttribute=!0}getX(a){let o=fromHalfFloat(this.array[a*this.itemSize]);return this.normalized&&(o=denormalize(o,this.array)),o}setX(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize]=toHalfFloat(o),this}getY(a){let o=fromHalfFloat(this.array[a*this.itemSize+1]);return this.normalized&&(o=denormalize(o,this.array)),o}setY(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+1]=toHalfFloat(o),this}getZ(a){let o=fromHalfFloat(this.array[a*this.itemSize+2]);return this.normalized&&(o=denormalize(o,this.array)),o}setZ(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+2]=toHalfFloat(o),this}getW(a){let o=fromHalfFloat(this.array[a*this.itemSize+3]);return this.normalized&&(o=denormalize(o,this.array)),o}setW(a,o){return this.normalized&&(o=normalize(o,this.array)),this.array[a*this.itemSize+3]=toHalfFloat(o),this}setXY(a,o,c){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array)),this.array[a+0]=toHalfFloat(o),this.array[a+1]=toHalfFloat(c),this}setXYZ(a,o,c,d){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array)),this.array[a+0]=toHalfFloat(o),this.array[a+1]=toHalfFloat(c),this.array[a+2]=toHalfFloat(d),this}setXYZW(a,o,c,d,b){return a*=this.itemSize,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array),b=normalize(b,this.array)),this.array[a+0]=toHalfFloat(o),this.array[a+1]=toHalfFloat(c),this.array[a+2]=toHalfFloat(d),this.array[a+3]=toHalfFloat(b),this}}class Float32BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Float32Array(a),o,c)}}class Float64BufferAttribute extends BufferAttribute{constructor(a,o,c){super(new Float64Array(a),o,c)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$7=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return Array.isArray(a)?this.index=new(arrayNeedsUint32(a)?Uint32BufferAttribute:Uint16BufferAttribute)(a,1):this.index=a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,o){return this.attributes[a]=o,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return this.attributes[a]!==void 0}addGroup(a,o,c=0){this.groups.push({start:a,count:o,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(a,o){this.drawRange.start=a,this.drawRange.count=o}applyMatrix4(a){const o=this.attributes.position;o!==void 0&&(o.applyMatrix4(a),o.needsUpdate=!0);const c=this.attributes.normal;if(c!==void 0){const b=new Matrix3$1().getNormalMatrix(a);c.applyNormalMatrix(b),c.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(a),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(a){return _m1.makeRotationFromQuaternion(a),this.applyMatrix4(_m1),this}rotateX(a){return _m1.makeRotationX(a),this.applyMatrix4(_m1),this}rotateY(a){return _m1.makeRotationY(a),this.applyMatrix4(_m1),this}rotateZ(a){return _m1.makeRotationZ(a),this.applyMatrix4(_m1),this}translate(a,o,c){return _m1.makeTranslation(a,o,c),this.applyMatrix4(_m1),this}scale(a,o,c){return _m1.makeScale(a,o,c),this.applyMatrix4(_m1),this}lookAt(a){return _obj.lookAt(a),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(a){const o=[];for(let c=0,d=a.length;c<d;c++){const b=a[c];o.push(b.x,b.y,b.z||0)}return this.setAttribute("position",new Float32BufferAttribute(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(a!==void 0){if(this.boundingBox.setFromBufferAttribute(a),o)for(let c=0,d=o.length;c<d;c++){const b=o[c];_box$1.setFromBufferAttribute(b),this.morphTargetsRelative?(_vector$7.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$7),_vector$7.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$7)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(a){const c=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(a),o)for(let b=0,$=o.length;b<$;b++){const j=o[b];_boxMorphTargets.setFromBufferAttribute(j),this.morphTargetsRelative?(_vector$7.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$7),_vector$7.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$7)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(c);let d=0;for(let b=0,$=a.count;b<$;b++)_vector$7.fromBufferAttribute(a,b),d=Math.max(d,c.distanceToSquared(_vector$7));if(o)for(let b=0,$=o.length;b<$;b++){const j=o[b],_e=this.morphTargetsRelative;for(let et=0,tt=j.count;et<tt;et++)_vector$7.fromBufferAttribute(j,et),_e&&(_offset.fromBufferAttribute(a,et),_vector$7.add(_offset)),d=Math.max(d,c.distanceToSquared(_vector$7))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,o=this.attributes;if(a===null||o.position===void 0||o.normal===void 0||o.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const c=a.array,d=o.position.array,b=o.normal.array,$=o.uv.array,j=d.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*j),4));const _e=this.getAttribute("tangent").array,et=[],tt=[];for(let St=0;St<j;St++)et[St]=new Vector3,tt[St]=new Vector3;const rt=new Vector3,nt=new Vector3,it=new Vector3,at=new Vector2$1,ct=new Vector2$1,st=new Vector2$1,ot=new Vector3,ht=new Vector3;function dt(St,Ct,wt){rt.fromArray(d,St*3),nt.fromArray(d,Ct*3),it.fromArray(d,wt*3),at.fromArray($,St*2),ct.fromArray($,Ct*2),st.fromArray($,wt*2),nt.sub(rt),it.sub(rt),ct.sub(at),st.sub(at);const _t=1/(ct.x*st.y-st.x*ct.y);isFinite(_t)&&(ot.copy(nt).multiplyScalar(st.y).addScaledVector(it,-ct.y).multiplyScalar(_t),ht.copy(it).multiplyScalar(ct.x).addScaledVector(nt,-st.x).multiplyScalar(_t),et[St].add(ot),et[Ct].add(ot),et[wt].add(ot),tt[St].add(ht),tt[Ct].add(ht),tt[wt].add(ht))}let ft=this.groups;ft.length===0&&(ft=[{start:0,count:c.length}]);for(let St=0,Ct=ft.length;St<Ct;++St){const wt=ft[St],_t=wt.start,Tt=wt.count;for(let Mt=_t,Bt=_t+Tt;Mt<Bt;Mt+=3)dt(c[Mt+0],c[Mt+1],c[Mt+2])}const mt=new Vector3,gt=new Vector3,vt=new Vector3,yt=new Vector3;function Et(St){vt.fromArray(b,St*3),yt.copy(vt);const Ct=et[St];mt.copy(Ct),mt.sub(vt.multiplyScalar(vt.dot(Ct))).normalize(),gt.crossVectors(yt,Ct);const _t=gt.dot(tt[St])<0?-1:1;_e[St*4]=mt.x,_e[St*4+1]=mt.y,_e[St*4+2]=mt.z,_e[St*4+3]=_t}for(let St=0,Ct=ft.length;St<Ct;++St){const wt=ft[St],_t=wt.start,Tt=wt.count;for(let Mt=_t,Bt=_t+Tt;Mt<Bt;Mt+=3)Et(c[Mt+0]),Et(c[Mt+1]),Et(c[Mt+2])}}computeVertexNormals(){const a=this.index,o=this.getAttribute("position");if(o!==void 0){let c=this.getAttribute("normal");if(c===void 0)c=new BufferAttribute(new Float32Array(o.count*3),3),this.setAttribute("normal",c);else for(let nt=0,it=c.count;nt<it;nt++)c.setXYZ(nt,0,0,0);const d=new Vector3,b=new Vector3,$=new Vector3,j=new Vector3,_e=new Vector3,et=new Vector3,tt=new Vector3,rt=new Vector3;if(a)for(let nt=0,it=a.count;nt<it;nt+=3){const at=a.getX(nt+0),ct=a.getX(nt+1),st=a.getX(nt+2);d.fromBufferAttribute(o,at),b.fromBufferAttribute(o,ct),$.fromBufferAttribute(o,st),tt.subVectors($,b),rt.subVectors(d,b),tt.cross(rt),j.fromBufferAttribute(c,at),_e.fromBufferAttribute(c,ct),et.fromBufferAttribute(c,st),j.add(tt),_e.add(tt),et.add(tt),c.setXYZ(at,j.x,j.y,j.z),c.setXYZ(ct,_e.x,_e.y,_e.z),c.setXYZ(st,et.x,et.y,et.z)}else for(let nt=0,it=o.count;nt<it;nt+=3)d.fromBufferAttribute(o,nt+0),b.fromBufferAttribute(o,nt+1),$.fromBufferAttribute(o,nt+2),tt.subVectors($,b),rt.subVectors(d,b),tt.cross(rt),c.setXYZ(nt+0,tt.x,tt.y,tt.z),c.setXYZ(nt+1,tt.x,tt.y,tt.z),c.setXYZ(nt+2,tt.x,tt.y,tt.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const a=this.attributes.normal;for(let o=0,c=a.count;o<c;o++)_vector$7.fromBufferAttribute(a,o),_vector$7.normalize(),a.setXYZ(o,_vector$7.x,_vector$7.y,_vector$7.z)}toNonIndexed(){function a(j,_e){const et=j.array,tt=j.itemSize,rt=j.normalized,nt=new et.constructor(_e.length*tt);let it=0,at=0;for(let ct=0,st=_e.length;ct<st;ct++){j.isInterleavedBufferAttribute?it=_e[ct]*j.data.stride+j.offset:it=_e[ct]*tt;for(let ot=0;ot<tt;ot++)nt[at++]=et[it++]}return new BufferAttribute(nt,tt,rt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new BufferGeometry,c=this.index.array,d=this.attributes;for(const j in d){const _e=d[j],et=a(_e,c);o.setAttribute(j,et)}const b=this.morphAttributes;for(const j in b){const _e=[],et=b[j];for(let tt=0,rt=et.length;tt<rt;tt++){const nt=et[tt],it=a(nt,c);_e.push(it)}o.morphAttributes[j]=_e}o.morphTargetsRelative=this.morphTargetsRelative;const $=this.groups;for(let j=0,_e=$.length;j<_e;j++){const et=$[j];o.addGroup(et.start,et.count,et.materialIndex)}return o}toJSON(){const a={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),this.parameters!==void 0){const _e=this.parameters;for(const et in _e)_e[et]!==void 0&&(a[et]=_e[et]);return a}a.data={attributes:{}};const o=this.index;o!==null&&(a.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const c=this.attributes;for(const _e in c){const et=c[_e];a.data.attributes[_e]=et.toJSON(a.data)}const d={};let b=!1;for(const _e in this.morphAttributes){const et=this.morphAttributes[_e],tt=[];for(let rt=0,nt=et.length;rt<nt;rt++){const it=et[rt];tt.push(it.toJSON(a.data))}tt.length>0&&(d[_e]=tt,b=!0)}b&&(a.data.morphAttributes=d,a.data.morphTargetsRelative=this.morphTargetsRelative);const $=this.groups;$.length>0&&(a.data.groups=JSON.parse(JSON.stringify($)));const j=this.boundingSphere;return j!==null&&(a.data.boundingSphere={center:j.center.toArray(),radius:j.radius}),a}clone(){return new this.constructor().copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=a.name;const c=a.index;c!==null&&this.setIndex(c.clone(o));const d=a.attributes;for(const et in d){const tt=d[et];this.setAttribute(et,tt.clone(o))}const b=a.morphAttributes;for(const et in b){const tt=[],rt=b[et];for(let nt=0,it=rt.length;nt<it;nt++)tt.push(rt[nt].clone(o));this.morphAttributes[et]=tt}this.morphTargetsRelative=a.morphTargetsRelative;const $=a.groups;for(let et=0,tt=$.length;et<tt;et++){const rt=$[et];this.addGroup(rt.start,rt.count,rt.materialIndex)}const j=a.boundingBox;j!==null&&(this.boundingBox=j.clone());const _e=a.boundingSphere;return _e!==null&&(this.boundingSphere=_e.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$5=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2$1,_uvB$1=new Vector2$1,_uvC$1=new Vector2$1,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(a=new BufferGeometry,o=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a,o){return super.copy(a,o),a.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),a.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,c=Object.keys(o);if(c.length>0){const d=o[c[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,$=d.length;b<$;b++){const j=d[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[j]=b}}}}getVertexPosition(a,o){const c=this.geometry,d=c.attributes.position,b=c.morphAttributes.position,$=c.morphTargetsRelative;o.fromBufferAttribute(d,a);const j=this.morphTargetInfluences;if(b&&j){_morphA.set(0,0,0);for(let _e=0,et=b.length;_e<et;_e++){const tt=j[_e],rt=b[_e];tt!==0&&(_tempA.fromBufferAttribute(rt,a),$?_morphA.addScaledVector(_tempA,tt):_morphA.addScaledVector(_tempA.sub(o),tt))}o.add(_morphA)}return o}raycast(a,o){const c=this.geometry,d=this.material,b=this.matrixWorld;d!==void 0&&(c.boundingSphere===null&&c.computeBoundingSphere(),_sphere$5.copy(c.boundingSphere),_sphere$5.applyMatrix4(b),_ray$3.copy(a.ray).recast(a.near),!(_sphere$5.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$5,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(a.far-a.near)**2))&&(_inverseMatrix$3.copy(b).invert(),_ray$3.copy(a.ray).applyMatrix4(_inverseMatrix$3),!(c.boundingBox!==null&&_ray$3.intersectsBox(c.boundingBox)===!1)&&this._computeIntersections(a,o,_ray$3)))}_computeIntersections(a,o,c){let d;const b=this.geometry,$=this.material,j=b.index,_e=b.attributes.position,et=b.attributes.uv,tt=b.attributes.uv1,rt=b.attributes.normal,nt=b.groups,it=b.drawRange;if(j!==null)if(Array.isArray($))for(let at=0,ct=nt.length;at<ct;at++){const st=nt[at],ot=$[st.materialIndex],ht=Math.max(st.start,it.start),dt=Math.min(j.count,Math.min(st.start+st.count,it.start+it.count));for(let ft=ht,mt=dt;ft<mt;ft+=3){const gt=j.getX(ft),vt=j.getX(ft+1),yt=j.getX(ft+2);d=checkGeometryIntersection(this,ot,a,c,et,tt,rt,gt,vt,yt),d&&(d.faceIndex=Math.floor(ft/3),d.face.materialIndex=st.materialIndex,o.push(d))}}else{const at=Math.max(0,it.start),ct=Math.min(j.count,it.start+it.count);for(let st=at,ot=ct;st<ot;st+=3){const ht=j.getX(st),dt=j.getX(st+1),ft=j.getX(st+2);d=checkGeometryIntersection(this,$,a,c,et,tt,rt,ht,dt,ft),d&&(d.faceIndex=Math.floor(st/3),o.push(d))}}else if(_e!==void 0)if(Array.isArray($))for(let at=0,ct=nt.length;at<ct;at++){const st=nt[at],ot=$[st.materialIndex],ht=Math.max(st.start,it.start),dt=Math.min(_e.count,Math.min(st.start+st.count,it.start+it.count));for(let ft=ht,mt=dt;ft<mt;ft+=3){const gt=ft,vt=ft+1,yt=ft+2;d=checkGeometryIntersection(this,ot,a,c,et,tt,rt,gt,vt,yt),d&&(d.faceIndex=Math.floor(ft/3),d.face.materialIndex=st.materialIndex,o.push(d))}}else{const at=Math.max(0,it.start),ct=Math.min(_e.count,it.start+it.count);for(let st=at,ot=ct;st<ot;st+=3){const ht=st,dt=st+1,ft=st+2;d=checkGeometryIntersection(this,$,a,c,et,tt,rt,ht,dt,ft),d&&(d.faceIndex=Math.floor(st/3),o.push(d))}}}}function checkIntersection(s,a,o,c,d,b,$,j){let _e;if(a.side===BackSide?_e=c.intersectTriangle($,b,d,!0,j):_e=c.intersectTriangle(d,b,$,a.side===FrontSide,j),_e===null)return null;_intersectionPointWorld.copy(j),_intersectionPointWorld.applyMatrix4(s.matrixWorld);const et=o.ray.origin.distanceTo(_intersectionPointWorld);return et<o.near||et>o.far?null:{distance:et,point:_intersectionPointWorld.clone(),object:s}}function checkGeometryIntersection(s,a,o,c,d,b,$,j,_e,et){s.getVertexPosition(j,_vA$1),s.getVertexPosition(_e,_vB$1),s.getVertexPosition(et,_vC$1);const tt=checkIntersection(s,a,o,c,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(tt){d&&(_uvA$1.fromBufferAttribute(d,j),_uvB$1.fromBufferAttribute(d,_e),_uvC$1.fromBufferAttribute(d,et),tt.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2$1)),b&&(_uvA$1.fromBufferAttribute(b,j),_uvB$1.fromBufferAttribute(b,_e),_uvC$1.fromBufferAttribute(b,et),tt.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2$1),tt.uv2=tt.uv1),$&&(_normalA.fromBufferAttribute($,j),_normalB.fromBufferAttribute($,_e),_normalC.fromBufferAttribute($,et),tt.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),tt.normal.dot(c.direction)>0&&tt.normal.multiplyScalar(-1));const rt={a:j,b:_e,c:et,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,rt.normal),tt.face=rt}return tt}class BoxGeometry extends BufferGeometry{constructor(a=1,o=1,c=1,d=1,b=1,$=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:o,depth:c,widthSegments:d,heightSegments:b,depthSegments:$};const j=this;d=Math.floor(d),b=Math.floor(b),$=Math.floor($);const _e=[],et=[],tt=[],rt=[];let nt=0,it=0;at("z","y","x",-1,-1,c,o,a,$,b,0),at("z","y","x",1,-1,c,o,-a,$,b,1),at("x","z","y",1,1,a,c,o,d,$,2),at("x","z","y",1,-1,a,c,-o,d,$,3),at("x","y","z",1,-1,a,o,c,d,b,4),at("x","y","z",-1,-1,a,o,-c,d,b,5),this.setIndex(_e),this.setAttribute("position",new Float32BufferAttribute(et,3)),this.setAttribute("normal",new Float32BufferAttribute(tt,3)),this.setAttribute("uv",new Float32BufferAttribute(rt,2));function at(ct,st,ot,ht,dt,ft,mt,gt,vt,yt,Et){const St=ft/vt,Ct=mt/yt,wt=ft/2,_t=mt/2,Tt=gt/2,Mt=vt+1,Bt=yt+1;let Rt=0,bt=0;const Pt=new Vector3;for(let Dt=0;Dt<Bt;Dt++){const $t=Dt*Ct-_t;for(let Lt=0;Lt<Mt;Lt++){const Jt=Lt*St-wt;Pt[ct]=Jt*ht,Pt[st]=$t*dt,Pt[ot]=Tt,et.push(Pt.x,Pt.y,Pt.z),Pt[ct]=0,Pt[st]=0,Pt[ot]=gt>0?1:-1,tt.push(Pt.x,Pt.y,Pt.z),rt.push(Lt/vt),rt.push(1-Dt/yt),Rt+=1}}for(let Dt=0;Dt<yt;Dt++)for(let $t=0;$t<vt;$t++){const Lt=nt+$t+Mt*Dt,Jt=nt+$t+Mt*(Dt+1),Qt=nt+($t+1)+Mt*(Dt+1),or=nt+($t+1)+Mt*Dt;_e.push(Lt,Jt,or),_e.push(Jt,Qt,or),bt+=6}j.addGroup(it,bt,Et),it+=bt,nt+=Rt}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new BoxGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function cloneUniforms(s){const a={};for(const o in s){a[o]={};for(const c in s[o]){const d=s[o][c];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),a[o][c]=null):a[o][c]=d.clone():Array.isArray(d)?a[o][c]=d.slice():a[o][c]=d}}return a}function mergeUniforms(s){const a={};for(let o=0;o<s.length;o++){const c=cloneUniforms(s[o]);for(const d in c)a[d]=c[d]}return a}function cloneUniformsGroups(s){const a=[];for(let o=0;o<s.length;o++)a.push(s[o].clone());return a}function getUnlitUniformColorSpace(s){return s.getRenderTarget()===null?s.outputColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(a){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,a!==void 0&&this.setValues(a)}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=cloneUniforms(a.uniforms),this.uniformsGroups=cloneUniformsGroups(a.uniformsGroups),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.fog=a.fog,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const o=super.toJSON(a);o.glslVersion=this.glslVersion,o.uniforms={};for(const d in this.uniforms){const $=this.uniforms[d].value;$&&$.isTexture?o.uniforms[d]={type:"t",value:$.toJSON(a).uuid}:$&&$.isColor?o.uniforms[d]={type:"c",value:$.getHex()}:$&&$.isVector2?o.uniforms[d]={type:"v2",value:$.toArray()}:$&&$.isVector3?o.uniforms[d]={type:"v3",value:$.toArray()}:$&&$.isVector4?o.uniforms[d]={type:"v4",value:$.toArray()}:$&&$.isMatrix3?o.uniforms[d]={type:"m3",value:$.toArray()}:$&&$.isMatrix4?o.uniforms[d]={type:"m4",value:$.toArray()}:o.uniforms[d]={value:$}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,o.lights=this.lights,o.clipping=this.clipping;const c={};for(const d in this.extensions)this.extensions[d]===!0&&(c[d]=!0);return Object.keys(c).length>0&&(o.extensions=c),o}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(a,o){return super.copy(a,o),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this.coordinateSystem=a.coordinateSystem,this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return a.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,o){super.updateWorldMatrix(a,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(a=50,o=1,c=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=c,this.far=d,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=a.view===null?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const o=.5*this.getFilmHeight()/a;this.fov=RAD2DEG*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/a}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,o,c,d,b,$){this.aspect=a/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=d,this.view.width=b,this.view.height=$,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let o=a*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,c=2*o,d=this.aspect*c,b=-.5*d;const $=this.view;if(this.view!==null&&this.view.enabled){const _e=$.fullWidth,et=$.fullHeight;b+=$.offsetX*d/_e,o-=$.offsetY*c/et,d*=$.width/_e,c*=$.height/et}const j=this.filmOffset;j!==0&&(b+=a*j/this.getFilmWidth()),this.projectionMatrix.makePerspective(b,b+d,o,o-c,a,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(a,o,c){super(),this.type="CubeCamera",this.renderTarget=c,this.coordinateSystem=null;const d=new PerspectiveCamera(fov,aspect,a,o);d.layers=this.layers,this.add(d);const b=new PerspectiveCamera(fov,aspect,a,o);b.layers=this.layers,this.add(b);const $=new PerspectiveCamera(fov,aspect,a,o);$.layers=this.layers,this.add($);const j=new PerspectiveCamera(fov,aspect,a,o);j.layers=this.layers,this.add(j);const _e=new PerspectiveCamera(fov,aspect,a,o);_e.layers=this.layers,this.add(_e);const et=new PerspectiveCamera(fov,aspect,a,o);et.layers=this.layers,this.add(et)}updateCoordinateSystem(){const a=this.coordinateSystem,o=this.children.concat(),[c,d,b,$,j,_e]=o;for(const et of o)this.remove(et);if(a===WebGLCoordinateSystem)c.up.set(0,1,0),c.lookAt(1,0,0),d.up.set(0,1,0),d.lookAt(-1,0,0),b.up.set(0,0,-1),b.lookAt(0,1,0),$.up.set(0,0,1),$.lookAt(0,-1,0),j.up.set(0,1,0),j.lookAt(0,0,1),_e.up.set(0,1,0),_e.lookAt(0,0,-1);else if(a===WebGPUCoordinateSystem)c.up.set(0,-1,0),c.lookAt(-1,0,0),d.up.set(0,-1,0),d.lookAt(1,0,0),b.up.set(0,0,1),b.lookAt(0,1,0),$.up.set(0,0,-1),$.lookAt(0,-1,0),j.up.set(0,-1,0),j.lookAt(0,0,1),_e.up.set(0,-1,0),_e.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+a);for(const et of o)this.add(et),et.updateMatrixWorld()}update(a,o){this.parent===null&&this.updateMatrixWorld();const c=this.renderTarget;this.coordinateSystem!==a.coordinateSystem&&(this.coordinateSystem=a.coordinateSystem,this.updateCoordinateSystem());const[d,b,$,j,_e,et]=this.children,tt=a.getRenderTarget(),rt=a.toneMapping,nt=a.xr.enabled;a.toneMapping=NoToneMapping,a.xr.enabled=!1;const it=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,a.setRenderTarget(c,0),a.render(o,d),a.setRenderTarget(c,1),a.render(o,b),a.setRenderTarget(c,2),a.render(o,$),a.setRenderTarget(c,3),a.render(o,j),a.setRenderTarget(c,4),a.render(o,_e),c.texture.generateMipmaps=it,a.setRenderTarget(c,5),a.render(o,et),a.setRenderTarget(tt),a.toneMapping=rt,a.xr.enabled=nt,c.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture$1{constructor(a,o,c,d,b,$,j,_e,et,tt){a=a!==void 0?a:[],o=o!==void 0?o:CubeReflectionMapping,super(a,o,c,d,b,$,j,_e,et,tt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(a=1,o={}){super(a,a,o),this.isWebGLCubeRenderTarget=!0;const c={width:a,height:a,depth:1},d=[c,c,c,c,c,c];o.encoding!==void 0&&(warnOnce$1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===sRGBEncoding$1?SRGBColorSpace$1:NoColorSpace$1),this.texture=new CubeTexture(d,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:LinearFilter$1}fromEquirectangularTexture(a,o){this.texture.type=o.type,this.texture.colorSpace=o.colorSpace,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const c={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},d=new BoxGeometry(5,5,5),b=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,side:BackSide,blending:NoBlending});b.uniforms.tEquirect.value=o;const $=new Mesh(d,b),j=o.minFilter;return o.minFilter===LinearMipmapLinearFilter$1&&(o.minFilter=LinearFilter$1),new CubeCamera(1,10,this).update(a,$),o.minFilter=j,$.geometry.dispose(),$.material.dispose(),this}clear(a,o,c,d){const b=a.getRenderTarget();for(let $=0;$<6;$++)a.setRenderTarget(this,$),a.clear(o,c,d);a.setRenderTarget(b)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3$1;class Plane{constructor(a=new Vector3(1,0,0),o=0){this.isPlane=!0,this.normal=a,this.constant=o}set(a,o){return this.normal.copy(a),this.constant=o,this}setComponents(a,o,c,d){return this.normal.set(a,o,c),this.constant=d,this}setFromNormalAndCoplanarPoint(a,o){return this.normal.copy(a),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(a,o,c){const d=_vector1.subVectors(c,o).cross(_vector2.subVectors(a,o)).normalize();return this.setFromNormalAndCoplanarPoint(d,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,o){return o.copy(a).addScaledVector(this.normal,-this.distanceToPoint(a))}intersectLine(a,o){const c=a.delta(_vector1),d=this.normal.dot(c);if(d===0)return this.distanceToPoint(a.start)===0?o.copy(a.start):null;const b=-(a.start.dot(this.normal)+this.constant)/d;return b<0||b>1?null:o.copy(a.start).addScaledVector(c,b)}intersectsLine(a){const o=this.distanceToPoint(a.start),c=this.distanceToPoint(a.end);return o<0&&c>0||c<0&&o>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,o){const c=o||_normalMatrix.getNormalMatrix(a),d=this.coplanarPoint(_vector1).applyMatrix4(a),b=this.normal.applyMatrix3(c).normalize();return this.constant=-d.dot(b),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$4=new Sphere,_vector$6=new Vector3;class Frustum{constructor(a=new Plane,o=new Plane,c=new Plane,d=new Plane,b=new Plane,$=new Plane){this.planes=[a,o,c,d,b,$]}set(a,o,c,d,b,$){const j=this.planes;return j[0].copy(a),j[1].copy(o),j[2].copy(c),j[3].copy(d),j[4].copy(b),j[5].copy($),this}copy(a){const o=this.planes;for(let c=0;c<6;c++)o[c].copy(a.planes[c]);return this}setFromProjectionMatrix(a,o=WebGLCoordinateSystem){const c=this.planes,d=a.elements,b=d[0],$=d[1],j=d[2],_e=d[3],et=d[4],tt=d[5],rt=d[6],nt=d[7],it=d[8],at=d[9],ct=d[10],st=d[11],ot=d[12],ht=d[13],dt=d[14],ft=d[15];if(c[0].setComponents(_e-b,nt-et,st-it,ft-ot).normalize(),c[1].setComponents(_e+b,nt+et,st+it,ft+ot).normalize(),c[2].setComponents(_e+$,nt+tt,st+at,ft+ht).normalize(),c[3].setComponents(_e-$,nt-tt,st-at,ft-ht).normalize(),c[4].setComponents(_e-j,nt-rt,st-ct,ft-dt).normalize(),o===WebGLCoordinateSystem)c[5].setComponents(_e+j,nt+rt,st+ct,ft+dt).normalize();else if(o===WebGPUCoordinateSystem)c[5].setComponents(j,rt,ct,dt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+o);return this}intersectsObject(a){if(a.boundingSphere!==void 0)a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$4.copy(a.boundingSphere).applyMatrix4(a.matrixWorld);else{const o=a.geometry;o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$4.copy(o.boundingSphere).applyMatrix4(a.matrixWorld)}return this.intersectsSphere(_sphere$4)}intersectsSprite(a){return _sphere$4.center.set(0,0,0),_sphere$4.radius=.7071067811865476,_sphere$4.applyMatrix4(a.matrixWorld),this.intersectsSphere(_sphere$4)}intersectsSphere(a){const o=this.planes,c=a.center,d=-a.radius;for(let b=0;b<6;b++)if(o[b].distanceToPoint(c)<d)return!1;return!0}intersectsBox(a){const o=this.planes;for(let c=0;c<6;c++){const d=o[c];if(_vector$6.x=d.normal.x>0?a.max.x:a.min.x,_vector$6.y=d.normal.y>0?a.max.y:a.min.y,_vector$6.z=d.normal.z>0?a.max.z:a.min.z,d.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(a){const o=this.planes;for(let c=0;c<6;c++)if(o[c].distanceToPoint(a)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let s=null,a=!1,o=null,c=null;function d(b,$){o(b,$),c=s.requestAnimationFrame(d)}return{start:function(){a!==!0&&o!==null&&(c=s.requestAnimationFrame(d),a=!0)},stop:function(){s.cancelAnimationFrame(c),a=!1},setAnimationLoop:function(b){o=b},setContext:function(b){s=b}}}function WebGLAttributes(s,a){const o=a.isWebGL2,c=new WeakMap;function d(et,tt){const rt=et.array,nt=et.usage,it=s.createBuffer();s.bindBuffer(tt,it),s.bufferData(tt,rt,nt),et.onUploadCallback();let at;if(rt instanceof Float32Array)at=s.FLOAT;else if(rt instanceof Uint16Array)if(et.isFloat16BufferAttribute)if(o)at=s.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else at=s.UNSIGNED_SHORT;else if(rt instanceof Int16Array)at=s.SHORT;else if(rt instanceof Uint32Array)at=s.UNSIGNED_INT;else if(rt instanceof Int32Array)at=s.INT;else if(rt instanceof Int8Array)at=s.BYTE;else if(rt instanceof Uint8Array)at=s.UNSIGNED_BYTE;else if(rt instanceof Uint8ClampedArray)at=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+rt);return{buffer:it,type:at,bytesPerElement:rt.BYTES_PER_ELEMENT,version:et.version}}function b(et,tt,rt){const nt=tt.array,it=tt.updateRange;s.bindBuffer(rt,et),it.count===-1?s.bufferSubData(rt,0,nt):(o?s.bufferSubData(rt,it.offset*nt.BYTES_PER_ELEMENT,nt,it.offset,it.count):s.bufferSubData(rt,it.offset*nt.BYTES_PER_ELEMENT,nt.subarray(it.offset,it.offset+it.count)),it.count=-1),tt.onUploadCallback()}function $(et){return et.isInterleavedBufferAttribute&&(et=et.data),c.get(et)}function j(et){et.isInterleavedBufferAttribute&&(et=et.data);const tt=c.get(et);tt&&(s.deleteBuffer(tt.buffer),c.delete(et))}function _e(et,tt){if(et.isGLBufferAttribute){const nt=c.get(et);(!nt||nt.version<et.version)&&c.set(et,{buffer:et.buffer,type:et.type,bytesPerElement:et.elementSize,version:et.version});return}et.isInterleavedBufferAttribute&&(et=et.data);const rt=c.get(et);rt===void 0?c.set(et,d(et,tt)):rt.version<et.version&&(b(rt.buffer,et,tt),rt.version=et.version)}return{get:$,remove:j,update:_e}}class PlaneGeometry extends BufferGeometry{constructor(a=1,o=1,c=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:o,widthSegments:c,heightSegments:d};const b=a/2,$=o/2,j=Math.floor(c),_e=Math.floor(d),et=j+1,tt=_e+1,rt=a/j,nt=o/_e,it=[],at=[],ct=[],st=[];for(let ot=0;ot<tt;ot++){const ht=ot*nt-$;for(let dt=0;dt<et;dt++){const ft=dt*rt-b;at.push(ft,-ht,0),ct.push(0,0,1),st.push(dt/j),st.push(1-ot/_e)}}for(let ot=0;ot<_e;ot++)for(let ht=0;ht<j;ht++){const dt=ht+et*ot,ft=ht+et*(ot+1),mt=ht+1+et*(ot+1),gt=ht+1+et*ot;it.push(dt,ft,gt),it.push(ft,mt,gt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3$1},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3$1}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3$1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3$1}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3$1},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3$1},normalScale:{value:new Vector2$1(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3$1},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3$1}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3$1}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3$1}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0},uvTransform:{value:new Matrix3$1}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2$1(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3$1},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3$1},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3$1},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3$1},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3$1},clearcoatNormalScale:{value:new Vector2$1(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3$1},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3$1},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3$1},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3$1},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3$1},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3$1},transmissionSamplerSize:{value:new Vector2$1},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3$1},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3$1},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3$1},anisotropyVector:{value:new Vector2$1},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3$1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(s,a,o,c,d,b,$){const j=new Color(0);let _e=b===!0?0:1,et,tt,rt=null,nt=0,it=null;function at(st,ot){let ht=!1,dt=ot.isScene===!0?ot.background:null;switch(dt&&dt.isTexture&&(dt=(ot.backgroundBlurriness>0?o:a).get(dt)),dt===null?ct(j,_e):dt&&dt.isColor&&(ct(dt,1),ht=!0),s.xr.getEnvironmentBlendMode()){case"opaque":ht=!0;break;case"additive":c.buffers.color.setClear(0,0,0,1,$),ht=!0;break;case"alpha-blend":c.buffers.color.setClear(0,0,0,0,$),ht=!0;break}(s.autoClear||ht)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),dt&&(dt.isCubeTexture||dt.mapping===CubeUVReflectionMapping)?(tt===void 0&&(tt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),tt.geometry.deleteAttribute("normal"),tt.geometry.deleteAttribute("uv"),tt.onBeforeRender=function(gt,vt,yt){this.matrixWorld.copyPosition(yt.matrixWorld)},Object.defineProperty(tt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),d.update(tt)),tt.material.uniforms.envMap.value=dt,tt.material.uniforms.flipEnvMap.value=dt.isCubeTexture&&dt.isRenderTargetTexture===!1?-1:1,tt.material.uniforms.backgroundBlurriness.value=ot.backgroundBlurriness,tt.material.uniforms.backgroundIntensity.value=ot.backgroundIntensity,tt.material.toneMapped=dt.colorSpace!==SRGBColorSpace$1,(rt!==dt||nt!==dt.version||it!==s.toneMapping)&&(tt.material.needsUpdate=!0,rt=dt,nt=dt.version,it=s.toneMapping),tt.layers.enableAll(),st.unshift(tt,tt.geometry,tt.material,0,0,null)):dt&&dt.isTexture&&(et===void 0&&(et=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),et.geometry.deleteAttribute("normal"),Object.defineProperty(et.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(et)),et.material.uniforms.t2D.value=dt,et.material.uniforms.backgroundIntensity.value=ot.backgroundIntensity,et.material.toneMapped=dt.colorSpace!==SRGBColorSpace$1,dt.matrixAutoUpdate===!0&&dt.updateMatrix(),et.material.uniforms.uvTransform.value.copy(dt.matrix),(rt!==dt||nt!==dt.version||it!==s.toneMapping)&&(et.material.needsUpdate=!0,rt=dt,nt=dt.version,it=s.toneMapping),et.layers.enableAll(),st.unshift(et,et.geometry,et.material,0,0,null))}function ct(st,ot){st.getRGB(_rgb,getUnlitUniformColorSpace(s)),c.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,ot,$)}return{getClearColor:function(){return j},setClearColor:function(st,ot=1){j.set(st),_e=ot,ct(j,_e)},getClearAlpha:function(){return _e},setClearAlpha:function(st){_e=st,ct(j,_e)},render:at}}function WebGLBindingStates(s,a,o,c){const d=s.getParameter(s.MAX_VERTEX_ATTRIBS),b=c.isWebGL2?null:a.get("OES_vertex_array_object"),$=c.isWebGL2||b!==null,j={},_e=st(null);let et=_e,tt=!1;function rt(Tt,Mt,Bt,Rt,bt){let Pt=!1;if($){const Dt=ct(Rt,Bt,Mt);et!==Dt&&(et=Dt,it(et.object)),Pt=ot(Tt,Rt,Bt,bt),Pt&&ht(Tt,Rt,Bt,bt)}else{const Dt=Mt.wireframe===!0;(et.geometry!==Rt.id||et.program!==Bt.id||et.wireframe!==Dt)&&(et.geometry=Rt.id,et.program=Bt.id,et.wireframe=Dt,Pt=!0)}bt!==null&&o.update(bt,s.ELEMENT_ARRAY_BUFFER),(Pt||tt)&&(tt=!1,yt(Tt,Mt,Bt,Rt),bt!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,o.get(bt).buffer))}function nt(){return c.isWebGL2?s.createVertexArray():b.createVertexArrayOES()}function it(Tt){return c.isWebGL2?s.bindVertexArray(Tt):b.bindVertexArrayOES(Tt)}function at(Tt){return c.isWebGL2?s.deleteVertexArray(Tt):b.deleteVertexArrayOES(Tt)}function ct(Tt,Mt,Bt){const Rt=Bt.wireframe===!0;let bt=j[Tt.id];bt===void 0&&(bt={},j[Tt.id]=bt);let Pt=bt[Mt.id];Pt===void 0&&(Pt={},bt[Mt.id]=Pt);let Dt=Pt[Rt];return Dt===void 0&&(Dt=st(nt()),Pt[Rt]=Dt),Dt}function st(Tt){const Mt=[],Bt=[],Rt=[];for(let bt=0;bt<d;bt++)Mt[bt]=0,Bt[bt]=0,Rt[bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mt,enabledAttributes:Bt,attributeDivisors:Rt,object:Tt,attributes:{},index:null}}function ot(Tt,Mt,Bt,Rt){const bt=et.attributes,Pt=Mt.attributes;let Dt=0;const $t=Bt.getAttributes();for(const Lt in $t)if($t[Lt].location>=0){const Qt=bt[Lt];let or=Pt[Lt];if(or===void 0&&(Lt==="instanceMatrix"&&Tt.instanceMatrix&&(or=Tt.instanceMatrix),Lt==="instanceColor"&&Tt.instanceColor&&(or=Tt.instanceColor)),Qt===void 0||Qt.attribute!==or||or&&Qt.data!==or.data)return!0;Dt++}return et.attributesNum!==Dt||et.index!==Rt}function ht(Tt,Mt,Bt,Rt){const bt={},Pt=Mt.attributes;let Dt=0;const $t=Bt.getAttributes();for(const Lt in $t)if($t[Lt].location>=0){let Qt=Pt[Lt];Qt===void 0&&(Lt==="instanceMatrix"&&Tt.instanceMatrix&&(Qt=Tt.instanceMatrix),Lt==="instanceColor"&&Tt.instanceColor&&(Qt=Tt.instanceColor));const or={};or.attribute=Qt,Qt&&Qt.data&&(or.data=Qt.data),bt[Lt]=or,Dt++}et.attributes=bt,et.attributesNum=Dt,et.index=Rt}function dt(){const Tt=et.newAttributes;for(let Mt=0,Bt=Tt.length;Mt<Bt;Mt++)Tt[Mt]=0}function ft(Tt){mt(Tt,0)}function mt(Tt,Mt){const Bt=et.newAttributes,Rt=et.enabledAttributes,bt=et.attributeDivisors;Bt[Tt]=1,Rt[Tt]===0&&(s.enableVertexAttribArray(Tt),Rt[Tt]=1),bt[Tt]!==Mt&&((c.isWebGL2?s:a.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Tt,Mt),bt[Tt]=Mt)}function gt(){const Tt=et.newAttributes,Mt=et.enabledAttributes;for(let Bt=0,Rt=Mt.length;Bt<Rt;Bt++)Mt[Bt]!==Tt[Bt]&&(s.disableVertexAttribArray(Bt),Mt[Bt]=0)}function vt(Tt,Mt,Bt,Rt,bt,Pt,Dt){Dt===!0?s.vertexAttribIPointer(Tt,Mt,Bt,bt,Pt):s.vertexAttribPointer(Tt,Mt,Bt,Rt,bt,Pt)}function yt(Tt,Mt,Bt,Rt){if(c.isWebGL2===!1&&(Tt.isInstancedMesh||Rt.isInstancedBufferGeometry)&&a.get("ANGLE_instanced_arrays")===null)return;dt();const bt=Rt.attributes,Pt=Bt.getAttributes(),Dt=Mt.defaultAttributeValues;for(const $t in Pt){const Lt=Pt[$t];if(Lt.location>=0){let Jt=bt[$t];if(Jt===void 0&&($t==="instanceMatrix"&&Tt.instanceMatrix&&(Jt=Tt.instanceMatrix),$t==="instanceColor"&&Tt.instanceColor&&(Jt=Tt.instanceColor)),Jt!==void 0){const Qt=Jt.normalized,or=Jt.itemSize,er=o.get(Jt);if(er===void 0)continue;const sr=er.buffer,Ar=er.type,Er=er.bytesPerElement,Tr=c.isWebGL2===!0&&(Ar===s.INT||Ar===s.UNSIGNED_INT||Jt.gpuType===IntType);if(Jt.isInterleavedBufferAttribute){const ur=Jt.data,kt=ur.stride,Xt=Jt.offset;if(ur.isInstancedInterleavedBuffer){for(let ar=0;ar<Lt.locationSize;ar++)mt(Lt.location+ar,ur.meshPerAttribute);Tt.isInstancedMesh!==!0&&Rt._maxInstanceCount===void 0&&(Rt._maxInstanceCount=ur.meshPerAttribute*ur.count)}else for(let ar=0;ar<Lt.locationSize;ar++)ft(Lt.location+ar);s.bindBuffer(s.ARRAY_BUFFER,sr);for(let ar=0;ar<Lt.locationSize;ar++)vt(Lt.location+ar,or/Lt.locationSize,Ar,Qt,kt*Er,(Xt+or/Lt.locationSize*ar)*Er,Tr)}else{if(Jt.isInstancedBufferAttribute){for(let ur=0;ur<Lt.locationSize;ur++)mt(Lt.location+ur,Jt.meshPerAttribute);Tt.isInstancedMesh!==!0&&Rt._maxInstanceCount===void 0&&(Rt._maxInstanceCount=Jt.meshPerAttribute*Jt.count)}else for(let ur=0;ur<Lt.locationSize;ur++)ft(Lt.location+ur);s.bindBuffer(s.ARRAY_BUFFER,sr);for(let ur=0;ur<Lt.locationSize;ur++)vt(Lt.location+ur,or/Lt.locationSize,Ar,Qt,or*Er,or/Lt.locationSize*ur*Er,Tr)}}else if(Dt!==void 0){const Qt=Dt[$t];if(Qt!==void 0)switch(Qt.length){case 2:s.vertexAttrib2fv(Lt.location,Qt);break;case 3:s.vertexAttrib3fv(Lt.location,Qt);break;case 4:s.vertexAttrib4fv(Lt.location,Qt);break;default:s.vertexAttrib1fv(Lt.location,Qt)}}}}gt()}function Et(){wt();for(const Tt in j){const Mt=j[Tt];for(const Bt in Mt){const Rt=Mt[Bt];for(const bt in Rt)at(Rt[bt].object),delete Rt[bt];delete Mt[Bt]}delete j[Tt]}}function St(Tt){if(j[Tt.id]===void 0)return;const Mt=j[Tt.id];for(const Bt in Mt){const Rt=Mt[Bt];for(const bt in Rt)at(Rt[bt].object),delete Rt[bt];delete Mt[Bt]}delete j[Tt.id]}function Ct(Tt){for(const Mt in j){const Bt=j[Mt];if(Bt[Tt.id]===void 0)continue;const Rt=Bt[Tt.id];for(const bt in Rt)at(Rt[bt].object),delete Rt[bt];delete Bt[Tt.id]}}function wt(){_t(),tt=!0,et!==_e&&(et=_e,it(et.object))}function _t(){_e.geometry=null,_e.program=null,_e.wireframe=!1}return{setup:rt,reset:wt,resetDefaultState:_t,dispose:Et,releaseStatesOfGeometry:St,releaseStatesOfProgram:Ct,initAttributes:dt,enableAttribute:ft,disableUnusedAttributes:gt}}function WebGLBufferRenderer(s,a,o,c){const d=c.isWebGL2;let b;function $(et){b=et}function j(et,tt){s.drawArrays(b,et,tt),o.update(tt,b,1)}function _e(et,tt,rt){if(rt===0)return;let nt,it;if(d)nt=s,it="drawArraysInstanced";else if(nt=a.get("ANGLE_instanced_arrays"),it="drawArraysInstancedANGLE",nt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}nt[it](b,et,tt,rt),o.update(tt,b,rt)}this.setMode=$,this.render=j,this.renderInstances=_e}function WebGLCapabilities(s,a,o){let c;function d(){if(c!==void 0)return c;if(a.has("EXT_texture_filter_anisotropic")===!0){const vt=a.get("EXT_texture_filter_anisotropic");c=s.getParameter(vt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c}function b(vt){if(vt==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";vt="mediump"}return vt==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const $=typeof WebGL2RenderingContext<"u"&&s.constructor.name==="WebGL2RenderingContext";let j=o.precision!==void 0?o.precision:"highp";const _e=b(j);_e!==j&&(console.warn("THREE.WebGLRenderer:",j,"not supported, using",_e,"instead."),j=_e);const et=$||a.has("WEBGL_draw_buffers"),tt=o.logarithmicDepthBuffer===!0,rt=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),nt=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),it=s.getParameter(s.MAX_TEXTURE_SIZE),at=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),ct=s.getParameter(s.MAX_VERTEX_ATTRIBS),st=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),ot=s.getParameter(s.MAX_VARYING_VECTORS),ht=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),dt=nt>0,ft=$||a.has("OES_texture_float"),mt=dt&&ft,gt=$?s.getParameter(s.MAX_SAMPLES):0;return{isWebGL2:$,drawBuffers:et,getMaxAnisotropy:d,getMaxPrecision:b,precision:j,logarithmicDepthBuffer:tt,maxTextures:rt,maxVertexTextures:nt,maxTextureSize:it,maxCubemapSize:at,maxAttributes:ct,maxVertexUniforms:st,maxVaryings:ot,maxFragmentUniforms:ht,vertexTextures:dt,floatFragmentTextures:ft,floatVertexTextures:mt,maxSamples:gt}}function WebGLClipping(s){const a=this;let o=null,c=0,d=!1,b=!1;const $=new Plane,j=new Matrix3$1,_e={value:null,needsUpdate:!1};this.uniform=_e,this.numPlanes=0,this.numIntersection=0,this.init=function(rt,nt){const it=rt.length!==0||nt||c!==0||d;return d=nt,c=rt.length,it},this.beginShadows=function(){b=!0,tt(null)},this.endShadows=function(){b=!1},this.setGlobalState=function(rt,nt){o=tt(rt,nt,0)},this.setState=function(rt,nt,it){const at=rt.clippingPlanes,ct=rt.clipIntersection,st=rt.clipShadows,ot=s.get(rt);if(!d||at===null||at.length===0||b&&!st)b?tt(null):et();else{const ht=b?0:c,dt=ht*4;let ft=ot.clippingState||null;_e.value=ft,ft=tt(at,nt,dt,it);for(let mt=0;mt!==dt;++mt)ft[mt]=o[mt];ot.clippingState=ft,this.numIntersection=ct?this.numPlanes:0,this.numPlanes+=ht}};function et(){_e.value!==o&&(_e.value=o,_e.needsUpdate=c>0),a.numPlanes=c,a.numIntersection=0}function tt(rt,nt,it,at){const ct=rt!==null?rt.length:0;let st=null;if(ct!==0){if(st=_e.value,at!==!0||st===null){const ot=it+ct*4,ht=nt.matrixWorldInverse;j.getNormalMatrix(ht),(st===null||st.length<ot)&&(st=new Float32Array(ot));for(let dt=0,ft=it;dt!==ct;++dt,ft+=4)$.copy(rt[dt]).applyMatrix4(ht,j),$.normal.toArray(st,ft),st[ft+3]=$.constant}_e.value=st,_e.needsUpdate=!0}return a.numPlanes=ct,a.numIntersection=0,st}}function WebGLCubeMaps(s){let a=new WeakMap;function o($,j){return j===EquirectangularReflectionMapping?$.mapping=CubeReflectionMapping:j===EquirectangularRefractionMapping&&($.mapping=CubeRefractionMapping),$}function c($){if($&&$.isTexture&&$.isRenderTargetTexture===!1){const j=$.mapping;if(j===EquirectangularReflectionMapping||j===EquirectangularRefractionMapping)if(a.has($)){const _e=a.get($).texture;return o(_e,$.mapping)}else{const _e=$.image;if(_e&&_e.height>0){const et=new WebGLCubeRenderTarget(_e.height/2);return et.fromEquirectangularTexture(s,$),a.set($,et),$.addEventListener("dispose",d),o(et.texture,$.mapping)}else return null}}return $}function d($){const j=$.target;j.removeEventListener("dispose",d);const _e=a.get(j);_e!==void 0&&(a.delete(j),_e.dispose())}function b(){a=new WeakMap}return{get:c,dispose:b}}class OrthographicCamera extends Camera{constructor(a=-1,o=1,c=1,d=-1,b=.1,$=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=o,this.top=c,this.bottom=d,this.near=b,this.far=$,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=a.view===null?null:Object.assign({},a.view),this}setViewOffset(a,o,c,d,b,$){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=d,this.view.width=b,this.view.height=$,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let b=c-a,$=c+a,j=d+o,_e=d-o;if(this.view!==null&&this.view.enabled){const et=(this.right-this.left)/this.view.fullWidth/this.zoom,tt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=et*this.view.offsetX,$=b+et*this.view.width,j-=tt*this.view.offsetY,_e=j-tt*this.view.height}this.projectionMatrix.makeOrthographic(b,$,j,_e,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(a,o=0,c=.1,d=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(a,c,d,b),o>0&&this._blur(b,0,0,o),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(a,o=null){return this._fromTexture(a,o)}fromCubemap(a,o=null){return this._fromTexture(a,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(_oldTarget),a.scissorTest=!1,_setViewport(a,0,0,a.width,a.height)}_fromTexture(a,o){a.mapping===CubeReflectionMapping||a.mapping===CubeRefractionMapping?this._setSize(a.image.length===0?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4),_oldTarget=this._renderer.getRenderTarget();const c=o||this._allocateTargets();return this._textureToCubeUV(a,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,c={magFilter:LinearFilter$1,minFilter:LinearFilter$1,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat$1,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},d=_createRenderTarget(a,o,c);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==a||this._pingPongRenderTarget.height!==o){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(a,o,c);const{_lodMax:b}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(b)),this._blurMaterial=_getBlurShader(b,a,o)}return d}_compileMaterial(a){const o=new Mesh(this._lodPlanes[0],a);this._renderer.compile(o,_flatCamera)}_sceneToCubeUV(a,o,c,d){const j=new PerspectiveCamera(90,1,o,c),_e=[1,-1,1,1,1,1],et=[1,1,1,-1,-1,-1],tt=this._renderer,rt=tt.autoClear,nt=tt.toneMapping;tt.getClearColor(_clearColor),tt.toneMapping=NoToneMapping,tt.autoClear=!1;const it=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),at=new Mesh(new BoxGeometry,it);let ct=!1;const st=a.background;st?st.isColor&&(it.color.copy(st),a.background=null,ct=!0):(it.color.copy(_clearColor),ct=!0);for(let ot=0;ot<6;ot++){const ht=ot%3;ht===0?(j.up.set(0,_e[ot],0),j.lookAt(et[ot],0,0)):ht===1?(j.up.set(0,0,_e[ot]),j.lookAt(0,et[ot],0)):(j.up.set(0,_e[ot],0),j.lookAt(0,0,et[ot]));const dt=this._cubeSize;_setViewport(d,ht*dt,ot>2?dt:0,dt,dt),tt.setRenderTarget(d),ct&&tt.render(at,j),tt.render(a,j)}at.geometry.dispose(),at.material.dispose(),tt.toneMapping=nt,tt.autoClear=rt,a.background=st}_textureToCubeUV(a,o){const c=this._renderer,d=a.mapping===CubeReflectionMapping||a.mapping===CubeRefractionMapping;d?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=a.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const b=d?this._cubemapMaterial:this._equirectMaterial,$=new Mesh(this._lodPlanes[0],b),j=b.uniforms;j.envMap.value=a;const _e=this._cubeSize;_setViewport(o,0,0,3*_e,2*_e),c.setRenderTarget(o),c.render($,_flatCamera)}_applyPMREM(a){const o=this._renderer,c=o.autoClear;o.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const b=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]),$=_axisDirections[(d-1)%_axisDirections.length];this._blur(a,d-1,d,b,$)}o.autoClear=c}_blur(a,o,c,d,b){const $=this._pingPongRenderTarget;this._halfBlur(a,$,o,c,d,"latitudinal",b),this._halfBlur($,a,c,c,d,"longitudinal",b)}_halfBlur(a,o,c,d,b,$,j){const _e=this._renderer,et=this._blurMaterial;$!=="latitudinal"&&$!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const tt=3,rt=new Mesh(this._lodPlanes[d],et),nt=et.uniforms,it=this._sizeLods[c]-1,at=isFinite(b)?Math.PI/(2*it):2*Math.PI/(2*MAX_SAMPLES-1),ct=b/at,st=isFinite(b)?1+Math.floor(tt*ct):MAX_SAMPLES;st>MAX_SAMPLES&&console.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${st} samples when the maximum is set to ${MAX_SAMPLES}`);const ot=[];let ht=0;for(let vt=0;vt<MAX_SAMPLES;++vt){const yt=vt/ct,Et=Math.exp(-yt*yt/2);ot.push(Et),vt===0?ht+=Et:vt<st&&(ht+=2*Et)}for(let vt=0;vt<ot.length;vt++)ot[vt]=ot[vt]/ht;nt.envMap.value=a.texture,nt.samples.value=st,nt.weights.value=ot,nt.latitudinal.value=$==="latitudinal",j&&(nt.poleAxis.value=j);const{_lodMax:dt}=this;nt.dTheta.value=at,nt.mipInt.value=dt-c;const ft=this._sizeLods[d],mt=3*ft*(d>dt-LOD_MIN?d-dt+LOD_MIN:0),gt=4*(this._cubeSize-ft);_setViewport(o,mt,gt,3*ft,2*ft),_e.setRenderTarget(o),_e.render(rt,_flatCamera)}}function _createPlanes(s){const a=[],o=[],c=[];let d=s;const b=s-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let $=0;$<b;$++){const j=Math.pow(2,d);o.push(j);let _e=1/j;$>s-LOD_MIN?_e=EXTRA_LOD_SIGMA[$-s+LOD_MIN-1]:$===0&&(_e=0),c.push(_e);const et=1/(j-2),tt=-et,rt=1+et,nt=[tt,tt,rt,tt,rt,rt,tt,tt,rt,rt,tt,rt],it=6,at=6,ct=3,st=2,ot=1,ht=new Float32Array(ct*at*it),dt=new Float32Array(st*at*it),ft=new Float32Array(ot*at*it);for(let gt=0;gt<it;gt++){const vt=gt%3*2/3-1,yt=gt>2?0:-1,Et=[vt,yt,0,vt+2/3,yt,0,vt+2/3,yt+1,0,vt,yt,0,vt+2/3,yt+1,0,vt,yt+1,0];ht.set(Et,ct*at*gt),dt.set(nt,st*at*gt);const St=[gt,gt,gt,gt,gt,gt];ft.set(St,ot*at*gt)}const mt=new BufferGeometry;mt.setAttribute("position",new BufferAttribute(ht,ct)),mt.setAttribute("uv",new BufferAttribute(dt,st)),mt.setAttribute("faceIndex",new BufferAttribute(ft,ot)),a.push(mt),d>LOD_MIN&&d--}return{lodPlanes:a,sizeLods:o,sigmas:c}}function _createRenderTarget(s,a,o){const c=new WebGLRenderTarget(s,a,o);return c.texture.mapping=CubeUVReflectionMapping,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function _setViewport(s,a,o,c,d){s.viewport.set(a,o,c,d),s.scissor.set(a,o,c,d)}function _getBlurShader(s,a,o){const c=new Float32Array(MAX_SAMPLES),d=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(s){let a=new WeakMap,o=null;function c(j){if(j&&j.isTexture){const _e=j.mapping,et=_e===EquirectangularReflectionMapping||_e===EquirectangularRefractionMapping,tt=_e===CubeReflectionMapping||_e===CubeRefractionMapping;if(et||tt)if(j.isRenderTargetTexture&&j.needsPMREMUpdate===!0){j.needsPMREMUpdate=!1;let rt=a.get(j);return o===null&&(o=new PMREMGenerator(s)),rt=et?o.fromEquirectangular(j,rt):o.fromCubemap(j,rt),a.set(j,rt),rt.texture}else{if(a.has(j))return a.get(j).texture;{const rt=j.image;if(et&&rt&&rt.height>0||tt&&rt&&d(rt)){o===null&&(o=new PMREMGenerator(s));const nt=et?o.fromEquirectangular(j):o.fromCubemap(j);return a.set(j,nt),j.addEventListener("dispose",b),nt.texture}else return null}}}return j}function d(j){let _e=0;const et=6;for(let tt=0;tt<et;tt++)j[tt]!==void 0&&_e++;return _e===et}function b(j){const _e=j.target;_e.removeEventListener("dispose",b);const et=a.get(_e);et!==void 0&&(a.delete(_e),et.dispose())}function $(){a=new WeakMap,o!==null&&(o.dispose(),o=null)}return{get:c,dispose:$}}function WebGLExtensions(s){const a={};function o(c){if(a[c]!==void 0)return a[c];let d;switch(c){case"WEBGL_depth_texture":d=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=s.getExtension(c)}return a[c]=d,d}return{has:function(c){return o(c)!==null},init:function(c){c.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(c){const d=o(c);return d===null&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),d}}}function WebGLGeometries(s,a,o,c){const d={},b=new WeakMap;function $(rt){const nt=rt.target;nt.index!==null&&a.remove(nt.index);for(const at in nt.attributes)a.remove(nt.attributes[at]);for(const at in nt.morphAttributes){const ct=nt.morphAttributes[at];for(let st=0,ot=ct.length;st<ot;st++)a.remove(ct[st])}nt.removeEventListener("dispose",$),delete d[nt.id];const it=b.get(nt);it&&(a.remove(it),b.delete(nt)),c.releaseStatesOfGeometry(nt),nt.isInstancedBufferGeometry===!0&&delete nt._maxInstanceCount,o.memory.geometries--}function j(rt,nt){return d[nt.id]===!0||(nt.addEventListener("dispose",$),d[nt.id]=!0,o.memory.geometries++),nt}function _e(rt){const nt=rt.attributes;for(const at in nt)a.update(nt[at],s.ARRAY_BUFFER);const it=rt.morphAttributes;for(const at in it){const ct=it[at];for(let st=0,ot=ct.length;st<ot;st++)a.update(ct[st],s.ARRAY_BUFFER)}}function et(rt){const nt=[],it=rt.index,at=rt.attributes.position;let ct=0;if(it!==null){const ht=it.array;ct=it.version;for(let dt=0,ft=ht.length;dt<ft;dt+=3){const mt=ht[dt+0],gt=ht[dt+1],vt=ht[dt+2];nt.push(mt,gt,gt,vt,vt,mt)}}else{const ht=at.array;ct=at.version;for(let dt=0,ft=ht.length/3-1;dt<ft;dt+=3){const mt=dt+0,gt=dt+1,vt=dt+2;nt.push(mt,gt,gt,vt,vt,mt)}}const st=new(arrayNeedsUint32(nt)?Uint32BufferAttribute:Uint16BufferAttribute)(nt,1);st.version=ct;const ot=b.get(rt);ot&&a.remove(ot),b.set(rt,st)}function tt(rt){const nt=b.get(rt);if(nt){const it=rt.index;it!==null&&nt.version<it.version&&et(rt)}else et(rt);return b.get(rt)}return{get:j,update:_e,getWireframeAttribute:tt}}function WebGLIndexedBufferRenderer(s,a,o,c){const d=c.isWebGL2;let b;function $(nt){b=nt}let j,_e;function et(nt){j=nt.type,_e=nt.bytesPerElement}function tt(nt,it){s.drawElements(b,it,j,nt*_e),o.update(it,b,1)}function rt(nt,it,at){if(at===0)return;let ct,st;if(d)ct=s,st="drawElementsInstanced";else if(ct=a.get("ANGLE_instanced_arrays"),st="drawElementsInstancedANGLE",ct===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ct[st](b,it,j,nt*_e,at),o.update(it,b,at)}this.setMode=$,this.setIndex=et,this.render=tt,this.renderInstances=rt}function WebGLInfo(s){const a={geometries:0,textures:0},o={frame:0,calls:0,triangles:0,points:0,lines:0};function c(b,$,j){switch(o.calls++,$){case s.TRIANGLES:o.triangles+=j*(b/3);break;case s.LINES:o.lines+=j*(b/2);break;case s.LINE_STRIP:o.lines+=j*(b-1);break;case s.LINE_LOOP:o.lines+=j*b;break;case s.POINTS:o.points+=j*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",$);break}}function d(){o.calls=0,o.triangles=0,o.points=0,o.lines=0}return{memory:a,render:o,programs:null,autoReset:!0,reset:d,update:c}}function numericalSort(s,a){return s[0]-a[0]}function absNumericalSort(s,a){return Math.abs(a[1])-Math.abs(s[1])}function WebGLMorphtargets(s,a,o){const c={},d=new Float32Array(8),b=new WeakMap,$=new Vector4,j=[];for(let et=0;et<8;et++)j[et]=[et,0];function _e(et,tt,rt){const nt=et.morphTargetInfluences;if(a.isWebGL2===!0){const at=tt.morphAttributes.position||tt.morphAttributes.normal||tt.morphAttributes.color,ct=at!==void 0?at.length:0;let st=b.get(tt);if(st===void 0||st.count!==ct){let Mt=function(){_t.dispose(),b.delete(tt),tt.removeEventListener("dispose",Mt)};var it=Mt;st!==void 0&&st.texture.dispose();const dt=tt.morphAttributes.position!==void 0,ft=tt.morphAttributes.normal!==void 0,mt=tt.morphAttributes.color!==void 0,gt=tt.morphAttributes.position||[],vt=tt.morphAttributes.normal||[],yt=tt.morphAttributes.color||[];let Et=0;dt===!0&&(Et=1),ft===!0&&(Et=2),mt===!0&&(Et=3);let St=tt.attributes.position.count*Et,Ct=1;St>a.maxTextureSize&&(Ct=Math.ceil(St/a.maxTextureSize),St=a.maxTextureSize);const wt=new Float32Array(St*Ct*4*ct),_t=new DataArrayTexture(wt,St,Ct,ct);_t.type=FloatType,_t.needsUpdate=!0;const Tt=Et*4;for(let Bt=0;Bt<ct;Bt++){const Rt=gt[Bt],bt=vt[Bt],Pt=yt[Bt],Dt=St*Ct*4*Bt;for(let $t=0;$t<Rt.count;$t++){const Lt=$t*Tt;dt===!0&&($.fromBufferAttribute(Rt,$t),wt[Dt+Lt+0]=$.x,wt[Dt+Lt+1]=$.y,wt[Dt+Lt+2]=$.z,wt[Dt+Lt+3]=0),ft===!0&&($.fromBufferAttribute(bt,$t),wt[Dt+Lt+4]=$.x,wt[Dt+Lt+5]=$.y,wt[Dt+Lt+6]=$.z,wt[Dt+Lt+7]=0),mt===!0&&($.fromBufferAttribute(Pt,$t),wt[Dt+Lt+8]=$.x,wt[Dt+Lt+9]=$.y,wt[Dt+Lt+10]=$.z,wt[Dt+Lt+11]=Pt.itemSize===4?$.w:1)}}st={count:ct,texture:_t,size:new Vector2$1(St,Ct)},b.set(tt,st),tt.addEventListener("dispose",Mt)}let ot=0;for(let dt=0;dt<nt.length;dt++)ot+=nt[dt];const ht=tt.morphTargetsRelative?1:1-ot;rt.getUniforms().setValue(s,"morphTargetBaseInfluence",ht),rt.getUniforms().setValue(s,"morphTargetInfluences",nt),rt.getUniforms().setValue(s,"morphTargetsTexture",st.texture,o),rt.getUniforms().setValue(s,"morphTargetsTextureSize",st.size)}else{const at=nt===void 0?0:nt.length;let ct=c[tt.id];if(ct===void 0||ct.length!==at){ct=[];for(let ft=0;ft<at;ft++)ct[ft]=[ft,0];c[tt.id]=ct}for(let ft=0;ft<at;ft++){const mt=ct[ft];mt[0]=ft,mt[1]=nt[ft]}ct.sort(absNumericalSort);for(let ft=0;ft<8;ft++)ft<at&&ct[ft][1]?(j[ft][0]=ct[ft][0],j[ft][1]=ct[ft][1]):(j[ft][0]=Number.MAX_SAFE_INTEGER,j[ft][1]=0);j.sort(numericalSort);const st=tt.morphAttributes.position,ot=tt.morphAttributes.normal;let ht=0;for(let ft=0;ft<8;ft++){const mt=j[ft],gt=mt[0],vt=mt[1];gt!==Number.MAX_SAFE_INTEGER&&vt?(st&&tt.getAttribute("morphTarget"+ft)!==st[gt]&&tt.setAttribute("morphTarget"+ft,st[gt]),ot&&tt.getAttribute("morphNormal"+ft)!==ot[gt]&&tt.setAttribute("morphNormal"+ft,ot[gt]),d[ft]=vt,ht+=vt):(st&&tt.hasAttribute("morphTarget"+ft)===!0&&tt.deleteAttribute("morphTarget"+ft),ot&&tt.hasAttribute("morphNormal"+ft)===!0&&tt.deleteAttribute("morphNormal"+ft),d[ft]=0)}const dt=tt.morphTargetsRelative?1:1-ht;rt.getUniforms().setValue(s,"morphTargetBaseInfluence",dt),rt.getUniforms().setValue(s,"morphTargetInfluences",d)}}return{update:_e}}function WebGLObjects(s,a,o,c){let d=new WeakMap;function b(_e){const et=c.render.frame,tt=_e.geometry,rt=a.get(_e,tt);return d.get(rt)!==et&&(a.update(rt),d.set(rt,et)),_e.isInstancedMesh&&(_e.hasEventListener("dispose",j)===!1&&_e.addEventListener("dispose",j),o.update(_e.instanceMatrix,s.ARRAY_BUFFER),_e.instanceColor!==null&&o.update(_e.instanceColor,s.ARRAY_BUFFER)),rt}function $(){d=new WeakMap}function j(_e){const et=_e.target;et.removeEventListener("dispose",j),o.remove(et.instanceMatrix),et.instanceColor!==null&&o.remove(et.instanceColor)}return{update:b,dispose:$}}const emptyTexture=new Texture$1,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture$1,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(s,a,o){const c=s[0];if(c<=0||c>0)return s;const d=a*o;let b=arrayCacheF32[d];if(b===void 0&&(b=new Float32Array(d),arrayCacheF32[d]=b),a!==0){c.toArray(b,0);for(let $=1,j=0;$!==a;++$)j+=o,s[$].toArray(b,j)}return b}function arraysEqual$1(s,a){if(s.length!==a.length)return!1;for(let o=0,c=s.length;o<c;o++)if(s[o]!==a[o])return!1;return!0}function copyArray$3(s,a){for(let o=0,c=a.length;o<c;o++)s[o]=a[o]}function allocTexUnits(s,a){let o=arrayCacheI32[a];o===void 0&&(o=new Int32Array(a),arrayCacheI32[a]=o);for(let c=0;c!==a;++c)o[c]=s.allocateTextureUnit();return o}function setValueV1f(s,a){const o=this.cache;o[0]!==a&&(s.uniform1f(this.addr,a),o[0]=a)}function setValueV2f(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y)&&(s.uniform2f(this.addr,a.x,a.y),o[0]=a.x,o[1]=a.y);else{if(arraysEqual$1(o,a))return;s.uniform2fv(this.addr,a),copyArray$3(o,a)}}function setValueV3f(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z)&&(s.uniform3f(this.addr,a.x,a.y,a.z),o[0]=a.x,o[1]=a.y,o[2]=a.z);else if(a.r!==void 0)(o[0]!==a.r||o[1]!==a.g||o[2]!==a.b)&&(s.uniform3f(this.addr,a.r,a.g,a.b),o[0]=a.r,o[1]=a.g,o[2]=a.b);else{if(arraysEqual$1(o,a))return;s.uniform3fv(this.addr,a),copyArray$3(o,a)}}function setValueV4f(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z||o[3]!==a.w)&&(s.uniform4f(this.addr,a.x,a.y,a.z,a.w),o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=a.w);else{if(arraysEqual$1(o,a))return;s.uniform4fv(this.addr,a),copyArray$3(o,a)}}function setValueM2(s,a){const o=this.cache,c=a.elements;if(c===void 0){if(arraysEqual$1(o,a))return;s.uniformMatrix2fv(this.addr,!1,a),copyArray$3(o,a)}else{if(arraysEqual$1(o,c))return;mat2array.set(c),s.uniformMatrix2fv(this.addr,!1,mat2array),copyArray$3(o,c)}}function setValueM3(s,a){const o=this.cache,c=a.elements;if(c===void 0){if(arraysEqual$1(o,a))return;s.uniformMatrix3fv(this.addr,!1,a),copyArray$3(o,a)}else{if(arraysEqual$1(o,c))return;mat3array.set(c),s.uniformMatrix3fv(this.addr,!1,mat3array),copyArray$3(o,c)}}function setValueM4(s,a){const o=this.cache,c=a.elements;if(c===void 0){if(arraysEqual$1(o,a))return;s.uniformMatrix4fv(this.addr,!1,a),copyArray$3(o,a)}else{if(arraysEqual$1(o,c))return;mat4array.set(c),s.uniformMatrix4fv(this.addr,!1,mat4array),copyArray$3(o,c)}}function setValueV1i(s,a){const o=this.cache;o[0]!==a&&(s.uniform1i(this.addr,a),o[0]=a)}function setValueV2i(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y)&&(s.uniform2i(this.addr,a.x,a.y),o[0]=a.x,o[1]=a.y);else{if(arraysEqual$1(o,a))return;s.uniform2iv(this.addr,a),copyArray$3(o,a)}}function setValueV3i(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z)&&(s.uniform3i(this.addr,a.x,a.y,a.z),o[0]=a.x,o[1]=a.y,o[2]=a.z);else{if(arraysEqual$1(o,a))return;s.uniform3iv(this.addr,a),copyArray$3(o,a)}}function setValueV4i(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z||o[3]!==a.w)&&(s.uniform4i(this.addr,a.x,a.y,a.z,a.w),o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=a.w);else{if(arraysEqual$1(o,a))return;s.uniform4iv(this.addr,a),copyArray$3(o,a)}}function setValueV1ui(s,a){const o=this.cache;o[0]!==a&&(s.uniform1ui(this.addr,a),o[0]=a)}function setValueV2ui(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y)&&(s.uniform2ui(this.addr,a.x,a.y),o[0]=a.x,o[1]=a.y);else{if(arraysEqual$1(o,a))return;s.uniform2uiv(this.addr,a),copyArray$3(o,a)}}function setValueV3ui(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z)&&(s.uniform3ui(this.addr,a.x,a.y,a.z),o[0]=a.x,o[1]=a.y,o[2]=a.z);else{if(arraysEqual$1(o,a))return;s.uniform3uiv(this.addr,a),copyArray$3(o,a)}}function setValueV4ui(s,a){const o=this.cache;if(a.x!==void 0)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z||o[3]!==a.w)&&(s.uniform4ui(this.addr,a.x,a.y,a.z,a.w),o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=a.w);else{if(arraysEqual$1(o,a))return;s.uniform4uiv(this.addr,a),copyArray$3(o,a)}}function setValueT1(s,a,o){const c=this.cache,d=o.allocateTextureUnit();c[0]!==d&&(s.uniform1i(this.addr,d),c[0]=d),o.setTexture2D(a||emptyTexture,d)}function setValueT3D1(s,a,o){const c=this.cache,d=o.allocateTextureUnit();c[0]!==d&&(s.uniform1i(this.addr,d),c[0]=d),o.setTexture3D(a||empty3dTexture,d)}function setValueT6(s,a,o){const c=this.cache,d=o.allocateTextureUnit();c[0]!==d&&(s.uniform1i(this.addr,d),c[0]=d),o.setTextureCube(a||emptyCubeTexture,d)}function setValueT2DArray1(s,a,o){const c=this.cache,d=o.allocateTextureUnit();c[0]!==d&&(s.uniform1i(this.addr,d),c[0]=d),o.setTexture2DArray(a||emptyArrayTexture,d)}function getSingularSetter(s){switch(s){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(s,a){s.uniform1fv(this.addr,a)}function setValueV2fArray(s,a){const o=flatten$2(a,this.size,2);s.uniform2fv(this.addr,o)}function setValueV3fArray(s,a){const o=flatten$2(a,this.size,3);s.uniform3fv(this.addr,o)}function setValueV4fArray(s,a){const o=flatten$2(a,this.size,4);s.uniform4fv(this.addr,o)}function setValueM2Array(s,a){const o=flatten$2(a,this.size,4);s.uniformMatrix2fv(this.addr,!1,o)}function setValueM3Array(s,a){const o=flatten$2(a,this.size,9);s.uniformMatrix3fv(this.addr,!1,o)}function setValueM4Array(s,a){const o=flatten$2(a,this.size,16);s.uniformMatrix4fv(this.addr,!1,o)}function setValueV1iArray(s,a){s.uniform1iv(this.addr,a)}function setValueV2iArray(s,a){s.uniform2iv(this.addr,a)}function setValueV3iArray(s,a){s.uniform3iv(this.addr,a)}function setValueV4iArray(s,a){s.uniform4iv(this.addr,a)}function setValueV1uiArray(s,a){s.uniform1uiv(this.addr,a)}function setValueV2uiArray(s,a){s.uniform2uiv(this.addr,a)}function setValueV3uiArray(s,a){s.uniform3uiv(this.addr,a)}function setValueV4uiArray(s,a){s.uniform4uiv(this.addr,a)}function setValueT1Array(s,a,o){const c=this.cache,d=a.length,b=allocTexUnits(o,d);arraysEqual$1(c,b)||(s.uniform1iv(this.addr,b),copyArray$3(c,b));for(let $=0;$!==d;++$)o.setTexture2D(a[$]||emptyTexture,b[$])}function setValueT3DArray(s,a,o){const c=this.cache,d=a.length,b=allocTexUnits(o,d);arraysEqual$1(c,b)||(s.uniform1iv(this.addr,b),copyArray$3(c,b));for(let $=0;$!==d;++$)o.setTexture3D(a[$]||empty3dTexture,b[$])}function setValueT6Array(s,a,o){const c=this.cache,d=a.length,b=allocTexUnits(o,d);arraysEqual$1(c,b)||(s.uniform1iv(this.addr,b),copyArray$3(c,b));for(let $=0;$!==d;++$)o.setTextureCube(a[$]||emptyCubeTexture,b[$])}function setValueT2DArrayArray(s,a,o){const c=this.cache,d=a.length,b=allocTexUnits(o,d);arraysEqual$1(c,b)||(s.uniform1iv(this.addr,b),copyArray$3(c,b));for(let $=0;$!==d;++$)o.setTexture2DArray(a[$]||emptyArrayTexture,b[$])}function getPureArraySetter(s){switch(s){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(a,o,c){this.id=a,this.addr=c,this.cache=[],this.setValue=getSingularSetter(o.type)}}class PureArrayUniform{constructor(a,o,c){this.id=a,this.addr=c,this.cache=[],this.size=o.size,this.setValue=getPureArraySetter(o.type)}}class StructuredUniform{constructor(a){this.id=a,this.seq=[],this.map={}}setValue(a,o,c){const d=this.seq;for(let b=0,$=d.length;b!==$;++b){const j=d[b];j.setValue(a,o[j.id],c)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(s,a){s.seq.push(a),s.map[a.id]=a}function parseUniform(s,a,o){const c=s.name,d=c.length;for(RePathPart.lastIndex=0;;){const b=RePathPart.exec(c),$=RePathPart.lastIndex;let j=b[1];const _e=b[2]==="]",et=b[3];if(_e&&(j=j|0),et===void 0||et==="["&&$+2===d){addUniform(o,et===void 0?new SingleUniform(j,s,a):new PureArrayUniform(j,s,a));break}else{let rt=o.map[j];rt===void 0&&(rt=new StructuredUniform(j),addUniform(o,rt)),o=rt}}}class WebGLUniforms{constructor(a,o){this.seq=[],this.map={};const c=a.getProgramParameter(o,a.ACTIVE_UNIFORMS);for(let d=0;d<c;++d){const b=a.getActiveUniform(o,d),$=a.getUniformLocation(o,b.name);parseUniform(b,$,this)}}setValue(a,o,c,d){const b=this.map[o];b!==void 0&&b.setValue(a,c,d)}setOptional(a,o,c){const d=o[c];d!==void 0&&this.setValue(a,c,d)}static upload(a,o,c,d){for(let b=0,$=o.length;b!==$;++b){const j=o[b],_e=c[j.id];_e.needsUpdate!==!1&&j.setValue(a,_e.value,d)}}static seqWithValue(a,o){const c=[];for(let d=0,b=a.length;d!==b;++d){const $=a[d];$.id in o&&c.push($)}return c}}function WebGLShader(s,a,o){const c=s.createShader(a);return s.shaderSource(c,o),s.compileShader(c),c}let programIdCount=0;function handleSource(s,a){const o=s.split(`
`),c=[],d=Math.max(a-6,0),b=Math.min(a+6,o.length);for(let $=d;$<b;$++){const j=$+1;c.push(`${j===a?">":" "} ${j}: ${o[$]}`)}return c.join(`
`)}function getEncodingComponents(s){switch(s){case LinearSRGBColorSpace:return["Linear","( value )"];case SRGBColorSpace$1:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",s),["Linear","( value )"]}}function getShaderErrors(s,a,o){const c=s.getShaderParameter(a,s.COMPILE_STATUS),d=s.getShaderInfoLog(a).trim();if(c&&d==="")return"";const b=/ERROR: 0:(\d+)/.exec(d);if(b){const $=parseInt(b[1]);return o.toUpperCase()+`

`+d+`

`+handleSource(s.getShaderSource(a),$)}else return d}function getTexelEncodingFunction(s,a){const o=getEncodingComponents(a);return"vec4 "+s+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function getToneMappingFunction(s,a){let o;switch(a){case LinearToneMapping:o="Linear";break;case ReinhardToneMapping:o="Reinhard";break;case CineonToneMapping:o="OptimizedCineon";break;case ACESFilmicToneMapping:o="ACESFilmic";break;case CustomToneMapping:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),o="Linear"}return"vec3 "+s+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function generateExtensions(s){return[s.extensionDerivatives||s.envMapCubeUVHeight||s.bumpMap||s.normalMapTangentSpace||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(s){const a=[];for(const o in s){const c=s[o];c!==!1&&a.push("#define "+o+" "+c)}return a.join(`
`)}function fetchAttributeLocations(s,a){const o={},c=s.getProgramParameter(a,s.ACTIVE_ATTRIBUTES);for(let d=0;d<c;d++){const b=s.getActiveAttrib(a,d),$=b.name;let j=1;b.type===s.FLOAT_MAT2&&(j=2),b.type===s.FLOAT_MAT3&&(j=3),b.type===s.FLOAT_MAT4&&(j=4),o[$]={type:b.type,location:s.getAttribLocation(a,$),locationSize:j}}return o}function filterEmptyLine(s){return s!==""}function replaceLightNums(s,a){const o=a.numSpotLightShadows+a.numSpotLightMaps-a.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,a.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,o).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,a.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function replaceClippingPlaneNums(s,a){return s.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(s){return s.replace(includePattern,includeReplacer)}function includeReplacer(s,a){const o=ShaderChunk[a];if(o===void 0)throw new Error("Can not resolve #include <"+a+">");return resolveIncludes(o)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(s){return s.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(s,a,o,c){let d="";for(let b=parseInt(a);b<parseInt(o);b++)d+=c.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return d}function generatePrecision(s){let a="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?a+=`
#define HIGH_PRECISION`:s.precision==="mediump"?a+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(a+=`
#define LOW_PRECISION`),a}function generateShadowMapTypeDefine(s){let a="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===PCFShadowMap?a="SHADOWMAP_TYPE_PCF":s.shadowMapType===PCFSoftShadowMap?a="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===VSMShadowMap&&(a="SHADOWMAP_TYPE_VSM"),a}function generateEnvMapTypeDefine(s){let a="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:a="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:a="ENVMAP_TYPE_CUBE_UV";break}return a}function generateEnvMapModeDefine(s){let a="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case CubeRefractionMapping:a="ENVMAP_MODE_REFRACTION";break}return a}function generateEnvMapBlendingDefine(s){let a="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case MultiplyOperation:a="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:a="ENVMAP_BLENDING_MIX";break;case AddOperation:a="ENVMAP_BLENDING_ADD";break}return a}function generateCubeUVSize(s){const a=s.envMapCubeUVHeight;if(a===null)return null;const o=Math.log2(a)-2,c=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,o),7*16)),texelHeight:c,maxMip:o}}function WebGLProgram(s,a,o,c){const d=s.getContext(),b=o.defines;let $=o.vertexShader,j=o.fragmentShader;const _e=generateShadowMapTypeDefine(o),et=generateEnvMapTypeDefine(o),tt=generateEnvMapModeDefine(o),rt=generateEnvMapBlendingDefine(o),nt=generateCubeUVSize(o),it=o.isWebGL2?"":generateExtensions(o),at=generateDefines(b),ct=d.createProgram();let st,ot,ht=o.glslVersion?"#version "+o.glslVersion+`
`:"";o.isRawShaderMaterial?(st=["#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,at].filter(filterEmptyLine).join(`
`),st.length>0&&(st+=`
`),ot=[it,"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,at].filter(filterEmptyLine).join(`
`),ot.length>0&&(ot+=`
`)):(st=[generatePrecision(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,at,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+tt:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.displacementMap?"#define USE_DISPLACEMENTMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.alphaMapUv?"#define ALPHAMAP_UV "+o.alphaMapUv:"",o.lightMapUv?"#define LIGHTMAP_UV "+o.lightMapUv:"",o.aoMapUv?"#define AOMAP_UV "+o.aoMapUv:"",o.emissiveMapUv?"#define EMISSIVEMAP_UV "+o.emissiveMapUv:"",o.bumpMapUv?"#define BUMPMAP_UV "+o.bumpMapUv:"",o.normalMapUv?"#define NORMALMAP_UV "+o.normalMapUv:"",o.displacementMapUv?"#define DISPLACEMENTMAP_UV "+o.displacementMapUv:"",o.metalnessMapUv?"#define METALNESSMAP_UV "+o.metalnessMapUv:"",o.roughnessMapUv?"#define ROUGHNESSMAP_UV "+o.roughnessMapUv:"",o.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+o.anisotropyMapUv:"",o.clearcoatMapUv?"#define CLEARCOATMAP_UV "+o.clearcoatMapUv:"",o.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+o.clearcoatNormalMapUv:"",o.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+o.clearcoatRoughnessMapUv:"",o.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+o.iridescenceMapUv:"",o.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+o.iridescenceThicknessMapUv:"",o.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+o.sheenColorMapUv:"",o.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+o.sheenRoughnessMapUv:"",o.specularMapUv?"#define SPECULARMAP_UV "+o.specularMapUv:"",o.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+o.specularColorMapUv:"",o.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+o.specularIntensityMapUv:"",o.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+o.transmissionMapUv:"",o.thicknessMapUv?"#define THICKNESSMAP_UV "+o.thicknessMapUv:"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+_e:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ot=[it,generatePrecision(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,at,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+et:"",o.envMap?"#define "+tt:"",o.envMap?"#define "+rt:"",nt?"#define CUBEUV_TEXEL_WIDTH "+nt.texelWidth:"",nt?"#define CUBEUV_TEXEL_HEIGHT "+nt.texelHeight:"",nt?"#define CUBEUV_MAX_MIP "+nt.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropy?"#define USE_ANISOTROPY":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+_e:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",o.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",o.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",o.outputColorSpace),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),$=resolveIncludes($),$=replaceLightNums($,o),$=replaceClippingPlaneNums($,o),j=resolveIncludes(j),j=replaceLightNums(j,o),j=replaceClippingPlaneNums(j,o),$=unrollLoops($),j=unrollLoops(j),o.isWebGL2&&o.isRawShaderMaterial!==!0&&(ht=`#version 300 es
`,st=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+st,ot=["#define varying in",o.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ot);const dt=ht+st+$,ft=ht+ot+j,mt=WebGLShader(d,d.VERTEX_SHADER,dt),gt=WebGLShader(d,d.FRAGMENT_SHADER,ft);if(d.attachShader(ct,mt),d.attachShader(ct,gt),o.index0AttributeName!==void 0?d.bindAttribLocation(ct,0,o.index0AttributeName):o.morphTargets===!0&&d.bindAttribLocation(ct,0,"position"),d.linkProgram(ct),s.debug.checkShaderErrors){const Et=d.getProgramInfoLog(ct).trim(),St=d.getShaderInfoLog(mt).trim(),Ct=d.getShaderInfoLog(gt).trim();let wt=!0,_t=!0;if(d.getProgramParameter(ct,d.LINK_STATUS)===!1)if(wt=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(d,ct,mt,gt);else{const Tt=getShaderErrors(d,mt,"vertex"),Mt=getShaderErrors(d,gt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(ct,d.VALIDATE_STATUS)+`

Program Info Log: `+Et+`
`+Tt+`
`+Mt)}else Et!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Et):(St===""||Ct==="")&&(_t=!1);_t&&(this.diagnostics={runnable:wt,programLog:Et,vertexShader:{log:St,prefix:st},fragmentShader:{log:Ct,prefix:ot}})}d.deleteShader(mt),d.deleteShader(gt);let vt;this.getUniforms=function(){return vt===void 0&&(vt=new WebGLUniforms(d,ct)),vt};let yt;return this.getAttributes=function(){return yt===void 0&&(yt=fetchAttributeLocations(d,ct)),yt},this.destroy=function(){c.releaseStatesOfProgram(this),d.deleteProgram(ct),this.program=void 0},this.type=o.shaderType,this.name=o.shaderName,this.id=programIdCount++,this.cacheKey=a,this.usedTimes=1,this.program=ct,this.vertexShader=mt,this.fragmentShader=gt,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){const o=a.vertexShader,c=a.fragmentShader,d=this._getShaderStage(o),b=this._getShaderStage(c),$=this._getShaderCacheForMaterial(a);return $.has(d)===!1&&($.add(d),d.usedTimes++),$.has(b)===!1&&($.add(b),b.usedTimes++),this}remove(a){const o=this.materialCache.get(a);for(const c of o)c.usedTimes--,c.usedTimes===0&&this.shaderCache.delete(c.code);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){const o=this.materialCache;let c=o.get(a);return c===void 0&&(c=new Set,o.set(a,c)),c}_getShaderStage(a){const o=this.shaderCache;let c=o.get(a);return c===void 0&&(c=new WebGLShaderStage(a),o.set(a,c)),c}}class WebGLShaderStage{constructor(a){this.id=_id++,this.code=a,this.usedTimes=0}}function WebGLPrograms(s,a,o,c,d,b,$){const j=new Layers,_e=new WebGLShaderCache,et=[],tt=d.isWebGL2,rt=d.logarithmicDepthBuffer,nt=d.vertexTextures;let it=d.precision;const at={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ct(Et){return Et===0?"uv":`uv${Et}`}function st(Et,St,Ct,wt,_t){const Tt=wt.fog,Mt=_t.geometry,Bt=Et.isMeshStandardMaterial?wt.environment:null,Rt=(Et.isMeshStandardMaterial?o:a).get(Et.envMap||Bt),bt=Rt&&Rt.mapping===CubeUVReflectionMapping?Rt.image.height:null,Pt=at[Et.type];Et.precision!==null&&(it=d.getMaxPrecision(Et.precision),it!==Et.precision&&console.warn("THREE.WebGLProgram.getParameters:",Et.precision,"not supported, using",it,"instead."));const Dt=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,$t=Dt!==void 0?Dt.length:0;let Lt=0;Mt.morphAttributes.position!==void 0&&(Lt=1),Mt.morphAttributes.normal!==void 0&&(Lt=2),Mt.morphAttributes.color!==void 0&&(Lt=3);let Jt,Qt,or,er;if(Pt){const Qr=ShaderLib[Pt];Jt=Qr.vertexShader,Qt=Qr.fragmentShader}else Jt=Et.vertexShader,Qt=Et.fragmentShader,_e.update(Et),or=_e.getVertexShaderID(Et),er=_e.getFragmentShaderID(Et);const sr=s.getRenderTarget(),Ar=_t.isInstancedMesh===!0,Er=!!Et.map,Tr=!!Et.matcap,ur=!!Rt,kt=!!Et.aoMap,Xt=!!Et.lightMap,ar=!!Et.bumpMap,yr=!!Et.normalMap,mr=!!Et.displacementMap,Br=!!Et.emissiveMap,_r=!!Et.metalnessMap,br=!!Et.roughnessMap,Pr=Et.anisotropy>0,Or=Et.clearcoat>0,Wr=Et.iridescence>0,Ot=Et.sheen>0,Ft=Et.transmission>0,ir=Pr&&!!Et.anisotropyMap,Sr=Or&&!!Et.clearcoatMap,xr=Or&&!!Et.clearcoatNormalMap,Ir=Or&&!!Et.clearcoatRoughnessMap,Fr=Wr&&!!Et.iridescenceMap,Mr=Wr&&!!Et.iridescenceThicknessMap,cr=Ot&&!!Et.sheenColorMap,zt=Ot&&!!Et.sheenRoughnessMap,hr=!!Et.specularMap,Vt=!!Et.specularColorMap,Ht=!!Et.specularIntensityMap,Kt=Ft&&!!Et.transmissionMap,vr=Ft&&!!Et.thicknessMap,wr=!!Et.gradientMap,Gt=!!Et.alphaMap,pr=Et.alphaTest>0,Wt=!!Et.extensions,nr=!!Mt.attributes.uv1,Cr=!!Mt.attributes.uv2,Vr=!!Mt.attributes.uv3;return{isWebGL2:tt,shaderID:Pt,shaderType:Et.type,shaderName:Et.name,vertexShader:Jt,fragmentShader:Qt,defines:Et.defines,customVertexShaderID:or,customFragmentShaderID:er,isRawShaderMaterial:Et.isRawShaderMaterial===!0,glslVersion:Et.glslVersion,precision:it,instancing:Ar,instancingColor:Ar&&_t.instanceColor!==null,supportsVertexTextures:nt,outputColorSpace:sr===null?s.outputColorSpace:sr.isXRRenderTarget===!0?sr.texture.colorSpace:LinearSRGBColorSpace,map:Er,matcap:Tr,envMap:ur,envMapMode:ur&&Rt.mapping,envMapCubeUVHeight:bt,aoMap:kt,lightMap:Xt,bumpMap:ar,normalMap:yr,displacementMap:nt&&mr,emissiveMap:Br,normalMapObjectSpace:yr&&Et.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:yr&&Et.normalMapType===TangentSpaceNormalMap,metalnessMap:_r,roughnessMap:br,anisotropy:Pr,anisotropyMap:ir,clearcoat:Or,clearcoatMap:Sr,clearcoatNormalMap:xr,clearcoatRoughnessMap:Ir,iridescence:Wr,iridescenceMap:Fr,iridescenceThicknessMap:Mr,sheen:Ot,sheenColorMap:cr,sheenRoughnessMap:zt,specularMap:hr,specularColorMap:Vt,specularIntensityMap:Ht,transmission:Ft,transmissionMap:Kt,thicknessMap:vr,gradientMap:wr,opaque:Et.transparent===!1&&Et.blending===NormalBlending,alphaMap:Gt,alphaTest:pr,combine:Et.combine,mapUv:Er&&ct(Et.map.channel),aoMapUv:kt&&ct(Et.aoMap.channel),lightMapUv:Xt&&ct(Et.lightMap.channel),bumpMapUv:ar&&ct(Et.bumpMap.channel),normalMapUv:yr&&ct(Et.normalMap.channel),displacementMapUv:mr&&ct(Et.displacementMap.channel),emissiveMapUv:Br&&ct(Et.emissiveMap.channel),metalnessMapUv:_r&&ct(Et.metalnessMap.channel),roughnessMapUv:br&&ct(Et.roughnessMap.channel),anisotropyMapUv:ir&&ct(Et.anisotropyMap.channel),clearcoatMapUv:Sr&&ct(Et.clearcoatMap.channel),clearcoatNormalMapUv:xr&&ct(Et.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ir&&ct(Et.clearcoatRoughnessMap.channel),iridescenceMapUv:Fr&&ct(Et.iridescenceMap.channel),iridescenceThicknessMapUv:Mr&&ct(Et.iridescenceThicknessMap.channel),sheenColorMapUv:cr&&ct(Et.sheenColorMap.channel),sheenRoughnessMapUv:zt&&ct(Et.sheenRoughnessMap.channel),specularMapUv:hr&&ct(Et.specularMap.channel),specularColorMapUv:Vt&&ct(Et.specularColorMap.channel),specularIntensityMapUv:Ht&&ct(Et.specularIntensityMap.channel),transmissionMapUv:Kt&&ct(Et.transmissionMap.channel),thicknessMapUv:vr&&ct(Et.thicknessMap.channel),alphaMapUv:Gt&&ct(Et.alphaMap.channel),vertexTangents:!!Mt.attributes.tangent&&(yr||Pr),vertexColors:Et.vertexColors,vertexAlphas:Et.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,vertexUv1s:nr,vertexUv2s:Cr,vertexUv3s:Vr,pointsUvs:_t.isPoints===!0&&!!Mt.attributes.uv&&(Er||Gt),fog:!!Tt,useFog:Et.fog===!0,fogExp2:Tt&&Tt.isFogExp2,flatShading:Et.flatShading===!0,sizeAttenuation:Et.sizeAttenuation===!0,logarithmicDepthBuffer:rt,skinning:_t.isSkinnedMesh===!0,morphTargets:Mt.morphAttributes.position!==void 0,morphNormals:Mt.morphAttributes.normal!==void 0,morphColors:Mt.morphAttributes.color!==void 0,morphTargetsCount:$t,morphTextureStride:Lt,numDirLights:St.directional.length,numPointLights:St.point.length,numSpotLights:St.spot.length,numSpotLightMaps:St.spotLightMap.length,numRectAreaLights:St.rectArea.length,numHemiLights:St.hemi.length,numDirLightShadows:St.directionalShadowMap.length,numPointLightShadows:St.pointShadowMap.length,numSpotLightShadows:St.spotShadowMap.length,numSpotLightShadowsWithMaps:St.numSpotLightShadowsWithMaps,numClippingPlanes:$.numPlanes,numClipIntersection:$.numIntersection,dithering:Et.dithering,shadowMapEnabled:s.shadowMap.enabled&&Ct.length>0,shadowMapType:s.shadowMap.type,toneMapping:Et.toneMapped?s.toneMapping:NoToneMapping,useLegacyLights:s.useLegacyLights,premultipliedAlpha:Et.premultipliedAlpha,doubleSided:Et.side===DoubleSide,flipSided:Et.side===BackSide,useDepthPacking:Et.depthPacking>=0,depthPacking:Et.depthPacking||0,index0AttributeName:Et.index0AttributeName,extensionDerivatives:Wt&&Et.extensions.derivatives===!0,extensionFragDepth:Wt&&Et.extensions.fragDepth===!0,extensionDrawBuffers:Wt&&Et.extensions.drawBuffers===!0,extensionShaderTextureLOD:Wt&&Et.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:tt||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:tt||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:tt||c.has("EXT_shader_texture_lod"),customProgramCacheKey:Et.customProgramCacheKey()}}function ot(Et){const St=[];if(Et.shaderID?St.push(Et.shaderID):(St.push(Et.customVertexShaderID),St.push(Et.customFragmentShaderID)),Et.defines!==void 0)for(const Ct in Et.defines)St.push(Ct),St.push(Et.defines[Ct]);return Et.isRawShaderMaterial===!1&&(ht(St,Et),dt(St,Et),St.push(s.outputColorSpace)),St.push(Et.customProgramCacheKey),St.join()}function ht(Et,St){Et.push(St.precision),Et.push(St.outputColorSpace),Et.push(St.envMapMode),Et.push(St.envMapCubeUVHeight),Et.push(St.mapUv),Et.push(St.alphaMapUv),Et.push(St.lightMapUv),Et.push(St.aoMapUv),Et.push(St.bumpMapUv),Et.push(St.normalMapUv),Et.push(St.displacementMapUv),Et.push(St.emissiveMapUv),Et.push(St.metalnessMapUv),Et.push(St.roughnessMapUv),Et.push(St.anisotropyMapUv),Et.push(St.clearcoatMapUv),Et.push(St.clearcoatNormalMapUv),Et.push(St.clearcoatRoughnessMapUv),Et.push(St.iridescenceMapUv),Et.push(St.iridescenceThicknessMapUv),Et.push(St.sheenColorMapUv),Et.push(St.sheenRoughnessMapUv),Et.push(St.specularMapUv),Et.push(St.specularColorMapUv),Et.push(St.specularIntensityMapUv),Et.push(St.transmissionMapUv),Et.push(St.thicknessMapUv),Et.push(St.combine),Et.push(St.fogExp2),Et.push(St.sizeAttenuation),Et.push(St.morphTargetsCount),Et.push(St.morphAttributeCount),Et.push(St.numDirLights),Et.push(St.numPointLights),Et.push(St.numSpotLights),Et.push(St.numSpotLightMaps),Et.push(St.numHemiLights),Et.push(St.numRectAreaLights),Et.push(St.numDirLightShadows),Et.push(St.numPointLightShadows),Et.push(St.numSpotLightShadows),Et.push(St.numSpotLightShadowsWithMaps),Et.push(St.shadowMapType),Et.push(St.toneMapping),Et.push(St.numClippingPlanes),Et.push(St.numClipIntersection),Et.push(St.depthPacking)}function dt(Et,St){j.disableAll(),St.isWebGL2&&j.enable(0),St.supportsVertexTextures&&j.enable(1),St.instancing&&j.enable(2),St.instancingColor&&j.enable(3),St.matcap&&j.enable(4),St.envMap&&j.enable(5),St.normalMapObjectSpace&&j.enable(6),St.normalMapTangentSpace&&j.enable(7),St.clearcoat&&j.enable(8),St.iridescence&&j.enable(9),St.alphaTest&&j.enable(10),St.vertexColors&&j.enable(11),St.vertexAlphas&&j.enable(12),St.vertexUv1s&&j.enable(13),St.vertexUv2s&&j.enable(14),St.vertexUv3s&&j.enable(15),St.vertexTangents&&j.enable(16),St.anisotropy&&j.enable(17),Et.push(j.mask),j.disableAll(),St.fog&&j.enable(0),St.useFog&&j.enable(1),St.flatShading&&j.enable(2),St.logarithmicDepthBuffer&&j.enable(3),St.skinning&&j.enable(4),St.morphTargets&&j.enable(5),St.morphNormals&&j.enable(6),St.morphColors&&j.enable(7),St.premultipliedAlpha&&j.enable(8),St.shadowMapEnabled&&j.enable(9),St.useLegacyLights&&j.enable(10),St.doubleSided&&j.enable(11),St.flipSided&&j.enable(12),St.useDepthPacking&&j.enable(13),St.dithering&&j.enable(14),St.transmission&&j.enable(15),St.sheen&&j.enable(16),St.opaque&&j.enable(17),St.pointsUvs&&j.enable(18),Et.push(j.mask)}function ft(Et){const St=at[Et.type];let Ct;if(St){const wt=ShaderLib[St];Ct=UniformsUtils.clone(wt.uniforms)}else Ct=Et.uniforms;return Ct}function mt(Et,St){let Ct;for(let wt=0,_t=et.length;wt<_t;wt++){const Tt=et[wt];if(Tt.cacheKey===St){Ct=Tt,++Ct.usedTimes;break}}return Ct===void 0&&(Ct=new WebGLProgram(s,St,Et,b),et.push(Ct)),Ct}function gt(Et){if(--Et.usedTimes===0){const St=et.indexOf(Et);et[St]=et[et.length-1],et.pop(),Et.destroy()}}function vt(Et){_e.remove(Et)}function yt(){_e.dispose()}return{getParameters:st,getProgramCacheKey:ot,getUniforms:ft,acquireProgram:mt,releaseProgram:gt,releaseShaderCache:vt,programs:et,dispose:yt}}function WebGLProperties(){let s=new WeakMap;function a(b){let $=s.get(b);return $===void 0&&($={},s.set(b,$)),$}function o(b){s.delete(b)}function c(b,$,j){s.get(b)[$]=j}function d(){s=new WeakMap}return{get:a,remove:o,update:c,dispose:d}}function painterSortStable(s,a){return s.groupOrder!==a.groupOrder?s.groupOrder-a.groupOrder:s.renderOrder!==a.renderOrder?s.renderOrder-a.renderOrder:s.material.id!==a.material.id?s.material.id-a.material.id:s.z!==a.z?s.z-a.z:s.id-a.id}function reversePainterSortStable(s,a){return s.groupOrder!==a.groupOrder?s.groupOrder-a.groupOrder:s.renderOrder!==a.renderOrder?s.renderOrder-a.renderOrder:s.z!==a.z?a.z-s.z:s.id-a.id}function WebGLRenderList(){const s=[];let a=0;const o=[],c=[],d=[];function b(){a=0,o.length=0,c.length=0,d.length=0}function $(rt,nt,it,at,ct,st){let ot=s[a];return ot===void 0?(ot={id:rt.id,object:rt,geometry:nt,material:it,groupOrder:at,renderOrder:rt.renderOrder,z:ct,group:st},s[a]=ot):(ot.id=rt.id,ot.object=rt,ot.geometry=nt,ot.material=it,ot.groupOrder=at,ot.renderOrder=rt.renderOrder,ot.z=ct,ot.group=st),a++,ot}function j(rt,nt,it,at,ct,st){const ot=$(rt,nt,it,at,ct,st);it.transmission>0?c.push(ot):it.transparent===!0?d.push(ot):o.push(ot)}function _e(rt,nt,it,at,ct,st){const ot=$(rt,nt,it,at,ct,st);it.transmission>0?c.unshift(ot):it.transparent===!0?d.unshift(ot):o.unshift(ot)}function et(rt,nt){o.length>1&&o.sort(rt||painterSortStable),c.length>1&&c.sort(nt||reversePainterSortStable),d.length>1&&d.sort(nt||reversePainterSortStable)}function tt(){for(let rt=a,nt=s.length;rt<nt;rt++){const it=s[rt];if(it.id===null)break;it.id=null,it.object=null,it.geometry=null,it.material=null,it.group=null}}return{opaque:o,transmissive:c,transparent:d,init:b,push:j,unshift:_e,finish:tt,sort:et}}function WebGLRenderLists(){let s=new WeakMap;function a(c,d){const b=s.get(c);let $;return b===void 0?($=new WebGLRenderList,s.set(c,[$])):d>=b.length?($=new WebGLRenderList,b.push($)):$=b[d],$}function o(){s=new WeakMap}return{get:a,dispose:o}}function UniformsCache(){const s={};return{get:function(a){if(s[a.id]!==void 0)return s[a.id];let o;switch(a.type){case"DirectionalLight":o={direction:new Vector3,color:new Color};break;case"SpotLight":o={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":o={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":o={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return s[a.id]=o,o}}}function ShadowUniformsCache(){const s={};return{get:function(a){if(s[a.id]!==void 0)return s[a.id];let o;switch(a.type){case"DirectionalLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1};break;case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2$1,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[a.id]=o,o}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(s,a){return(a.castShadow?2:0)-(s.castShadow?2:0)+(a.map?1:0)-(s.map?1:0)}function WebGLLights(s,a){const o=new UniformsCache,c=ShadowUniformsCache(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let tt=0;tt<9;tt++)d.probe.push(new Vector3);const b=new Vector3,$=new Matrix4,j=new Matrix4;function _e(tt,rt){let nt=0,it=0,at=0;for(let Ct=0;Ct<9;Ct++)d.probe[Ct].set(0,0,0);let ct=0,st=0,ot=0,ht=0,dt=0,ft=0,mt=0,gt=0,vt=0,yt=0;tt.sort(shadowCastingAndTexturingLightsFirst);const Et=rt===!0?Math.PI:1;for(let Ct=0,wt=tt.length;Ct<wt;Ct++){const _t=tt[Ct],Tt=_t.color,Mt=_t.intensity,Bt=_t.distance,Rt=_t.shadow&&_t.shadow.map?_t.shadow.map.texture:null;if(_t.isAmbientLight)nt+=Tt.r*Mt*Et,it+=Tt.g*Mt*Et,at+=Tt.b*Mt*Et;else if(_t.isLightProbe)for(let bt=0;bt<9;bt++)d.probe[bt].addScaledVector(_t.sh.coefficients[bt],Mt);else if(_t.isDirectionalLight){const bt=o.get(_t);if(bt.color.copy(_t.color).multiplyScalar(_t.intensity*Et),_t.castShadow){const Pt=_t.shadow,Dt=c.get(_t);Dt.shadowBias=Pt.bias,Dt.shadowNormalBias=Pt.normalBias,Dt.shadowRadius=Pt.radius,Dt.shadowMapSize=Pt.mapSize,d.directionalShadow[ct]=Dt,d.directionalShadowMap[ct]=Rt,d.directionalShadowMatrix[ct]=_t.shadow.matrix,ft++}d.directional[ct]=bt,ct++}else if(_t.isSpotLight){const bt=o.get(_t);bt.position.setFromMatrixPosition(_t.matrixWorld),bt.color.copy(Tt).multiplyScalar(Mt*Et),bt.distance=Bt,bt.coneCos=Math.cos(_t.angle),bt.penumbraCos=Math.cos(_t.angle*(1-_t.penumbra)),bt.decay=_t.decay,d.spot[ot]=bt;const Pt=_t.shadow;if(_t.map&&(d.spotLightMap[vt]=_t.map,vt++,Pt.updateMatrices(_t),_t.castShadow&&yt++),d.spotLightMatrix[ot]=Pt.matrix,_t.castShadow){const Dt=c.get(_t);Dt.shadowBias=Pt.bias,Dt.shadowNormalBias=Pt.normalBias,Dt.shadowRadius=Pt.radius,Dt.shadowMapSize=Pt.mapSize,d.spotShadow[ot]=Dt,d.spotShadowMap[ot]=Rt,gt++}ot++}else if(_t.isRectAreaLight){const bt=o.get(_t);bt.color.copy(Tt).multiplyScalar(Mt),bt.halfWidth.set(_t.width*.5,0,0),bt.halfHeight.set(0,_t.height*.5,0),d.rectArea[ht]=bt,ht++}else if(_t.isPointLight){const bt=o.get(_t);if(bt.color.copy(_t.color).multiplyScalar(_t.intensity*Et),bt.distance=_t.distance,bt.decay=_t.decay,_t.castShadow){const Pt=_t.shadow,Dt=c.get(_t);Dt.shadowBias=Pt.bias,Dt.shadowNormalBias=Pt.normalBias,Dt.shadowRadius=Pt.radius,Dt.shadowMapSize=Pt.mapSize,Dt.shadowCameraNear=Pt.camera.near,Dt.shadowCameraFar=Pt.camera.far,d.pointShadow[st]=Dt,d.pointShadowMap[st]=Rt,d.pointShadowMatrix[st]=_t.shadow.matrix,mt++}d.point[st]=bt,st++}else if(_t.isHemisphereLight){const bt=o.get(_t);bt.skyColor.copy(_t.color).multiplyScalar(Mt*Et),bt.groundColor.copy(_t.groundColor).multiplyScalar(Mt*Et),d.hemi[dt]=bt,dt++}}ht>0&&(a.isWebGL2||s.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,d.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(d.rectAreaLTC1=UniformsLib.LTC_HALF_1,d.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=nt,d.ambient[1]=it,d.ambient[2]=at;const St=d.hash;(St.directionalLength!==ct||St.pointLength!==st||St.spotLength!==ot||St.rectAreaLength!==ht||St.hemiLength!==dt||St.numDirectionalShadows!==ft||St.numPointShadows!==mt||St.numSpotShadows!==gt||St.numSpotMaps!==vt)&&(d.directional.length=ct,d.spot.length=ot,d.rectArea.length=ht,d.point.length=st,d.hemi.length=dt,d.directionalShadow.length=ft,d.directionalShadowMap.length=ft,d.pointShadow.length=mt,d.pointShadowMap.length=mt,d.spotShadow.length=gt,d.spotShadowMap.length=gt,d.directionalShadowMatrix.length=ft,d.pointShadowMatrix.length=mt,d.spotLightMatrix.length=gt+vt-yt,d.spotLightMap.length=vt,d.numSpotLightShadowsWithMaps=yt,St.directionalLength=ct,St.pointLength=st,St.spotLength=ot,St.rectAreaLength=ht,St.hemiLength=dt,St.numDirectionalShadows=ft,St.numPointShadows=mt,St.numSpotShadows=gt,St.numSpotMaps=vt,d.version=nextVersion++)}function et(tt,rt){let nt=0,it=0,at=0,ct=0,st=0;const ot=rt.matrixWorldInverse;for(let ht=0,dt=tt.length;ht<dt;ht++){const ft=tt[ht];if(ft.isDirectionalLight){const mt=d.directional[nt];mt.direction.setFromMatrixPosition(ft.matrixWorld),b.setFromMatrixPosition(ft.target.matrixWorld),mt.direction.sub(b),mt.direction.transformDirection(ot),nt++}else if(ft.isSpotLight){const mt=d.spot[at];mt.position.setFromMatrixPosition(ft.matrixWorld),mt.position.applyMatrix4(ot),mt.direction.setFromMatrixPosition(ft.matrixWorld),b.setFromMatrixPosition(ft.target.matrixWorld),mt.direction.sub(b),mt.direction.transformDirection(ot),at++}else if(ft.isRectAreaLight){const mt=d.rectArea[ct];mt.position.setFromMatrixPosition(ft.matrixWorld),mt.position.applyMatrix4(ot),j.identity(),$.copy(ft.matrixWorld),$.premultiply(ot),j.extractRotation($),mt.halfWidth.set(ft.width*.5,0,0),mt.halfHeight.set(0,ft.height*.5,0),mt.halfWidth.applyMatrix4(j),mt.halfHeight.applyMatrix4(j),ct++}else if(ft.isPointLight){const mt=d.point[it];mt.position.setFromMatrixPosition(ft.matrixWorld),mt.position.applyMatrix4(ot),it++}else if(ft.isHemisphereLight){const mt=d.hemi[st];mt.direction.setFromMatrixPosition(ft.matrixWorld),mt.direction.transformDirection(ot),st++}}}return{setup:_e,setupView:et,state:d}}function WebGLRenderState(s,a){const o=new WebGLLights(s,a),c=[],d=[];function b(){c.length=0,d.length=0}function $(rt){c.push(rt)}function j(rt){d.push(rt)}function _e(rt){o.setup(c,rt)}function et(rt){o.setupView(c,rt)}return{init:b,state:{lightsArray:c,shadowsArray:d,lights:o},setupLights:_e,setupLightsView:et,pushLight:$,pushShadow:j}}function WebGLRenderStates(s,a){let o=new WeakMap;function c(b,$=0){const j=o.get(b);let _e;return j===void 0?(_e=new WebGLRenderState(s,a),o.set(b,[_e])):$>=j.length?(_e=new WebGLRenderState(s,a),j.push(_e)):_e=j[$],_e}function d(){o=new WeakMap}return{get:c,dispose:d}}class MeshDepthMaterial extends Material{constructor(a){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(a){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(a)}copy(a){return super.copy(a),this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(s,a,o){let c=new Frustum;const d=new Vector2$1,b=new Vector2$1,$=new Vector4,j=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_e=new MeshDistanceMaterial,et={},tt=o.maxTextureSize,rt={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},nt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2$1},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),it=nt.clone();it.defines.HORIZONTAL_PASS=1;const at=new BufferGeometry;at.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ct=new Mesh(at,nt),st=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let ot=this.type;this.render=function(mt,gt,vt){if(st.enabled===!1||st.autoUpdate===!1&&st.needsUpdate===!1||mt.length===0)return;const yt=s.getRenderTarget(),Et=s.getActiveCubeFace(),St=s.getActiveMipmapLevel(),Ct=s.state;Ct.setBlending(NoBlending),Ct.buffers.color.setClear(1,1,1,1),Ct.buffers.depth.setTest(!0),Ct.setScissorTest(!1);const wt=ot!==VSMShadowMap&&this.type===VSMShadowMap,_t=ot===VSMShadowMap&&this.type!==VSMShadowMap;for(let Tt=0,Mt=mt.length;Tt<Mt;Tt++){const Bt=mt[Tt],Rt=Bt.shadow;if(Rt===void 0){console.warn("THREE.WebGLShadowMap:",Bt,"has no shadow.");continue}if(Rt.autoUpdate===!1&&Rt.needsUpdate===!1)continue;d.copy(Rt.mapSize);const bt=Rt.getFrameExtents();if(d.multiply(bt),b.copy(Rt.mapSize),(d.x>tt||d.y>tt)&&(d.x>tt&&(b.x=Math.floor(tt/bt.x),d.x=b.x*bt.x,Rt.mapSize.x=b.x),d.y>tt&&(b.y=Math.floor(tt/bt.y),d.y=b.y*bt.y,Rt.mapSize.y=b.y)),Rt.map===null||wt===!0||_t===!0){const Dt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Rt.map!==null&&Rt.map.dispose(),Rt.map=new WebGLRenderTarget(d.x,d.y,Dt),Rt.map.texture.name=Bt.name+".shadowMap",Rt.camera.updateProjectionMatrix()}s.setRenderTarget(Rt.map),s.clear();const Pt=Rt.getViewportCount();for(let Dt=0;Dt<Pt;Dt++){const $t=Rt.getViewport(Dt);$.set(b.x*$t.x,b.y*$t.y,b.x*$t.z,b.y*$t.w),Ct.viewport($),Rt.updateMatrices(Bt,Dt),c=Rt.getFrustum(),ft(gt,vt,Rt.camera,Bt,this.type)}Rt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&ht(Rt,vt),Rt.needsUpdate=!1}ot=this.type,st.needsUpdate=!1,s.setRenderTarget(yt,Et,St)};function ht(mt,gt){const vt=a.update(ct);nt.defines.VSM_SAMPLES!==mt.blurSamples&&(nt.defines.VSM_SAMPLES=mt.blurSamples,it.defines.VSM_SAMPLES=mt.blurSamples,nt.needsUpdate=!0,it.needsUpdate=!0),mt.mapPass===null&&(mt.mapPass=new WebGLRenderTarget(d.x,d.y)),nt.uniforms.shadow_pass.value=mt.map.texture,nt.uniforms.resolution.value=mt.mapSize,nt.uniforms.radius.value=mt.radius,s.setRenderTarget(mt.mapPass),s.clear(),s.renderBufferDirect(gt,null,vt,nt,ct,null),it.uniforms.shadow_pass.value=mt.mapPass.texture,it.uniforms.resolution.value=mt.mapSize,it.uniforms.radius.value=mt.radius,s.setRenderTarget(mt.map),s.clear(),s.renderBufferDirect(gt,null,vt,it,ct,null)}function dt(mt,gt,vt,yt){let Et=null;const St=vt.isPointLight===!0?mt.customDistanceMaterial:mt.customDepthMaterial;if(St!==void 0)Et=St;else if(Et=vt.isPointLight===!0?_e:j,s.localClippingEnabled&&gt.clipShadows===!0&&Array.isArray(gt.clippingPlanes)&&gt.clippingPlanes.length!==0||gt.displacementMap&&gt.displacementScale!==0||gt.alphaMap&&gt.alphaTest>0||gt.map&&gt.alphaTest>0){const Ct=Et.uuid,wt=gt.uuid;let _t=et[Ct];_t===void 0&&(_t={},et[Ct]=_t);let Tt=_t[wt];Tt===void 0&&(Tt=Et.clone(),_t[wt]=Tt),Et=Tt}if(Et.visible=gt.visible,Et.wireframe=gt.wireframe,yt===VSMShadowMap?Et.side=gt.shadowSide!==null?gt.shadowSide:gt.side:Et.side=gt.shadowSide!==null?gt.shadowSide:rt[gt.side],Et.alphaMap=gt.alphaMap,Et.alphaTest=gt.alphaTest,Et.map=gt.map,Et.clipShadows=gt.clipShadows,Et.clippingPlanes=gt.clippingPlanes,Et.clipIntersection=gt.clipIntersection,Et.displacementMap=gt.displacementMap,Et.displacementScale=gt.displacementScale,Et.displacementBias=gt.displacementBias,Et.wireframeLinewidth=gt.wireframeLinewidth,Et.linewidth=gt.linewidth,vt.isPointLight===!0&&Et.isMeshDistanceMaterial===!0){const Ct=s.properties.get(Et);Ct.light=vt}return Et}function ft(mt,gt,vt,yt,Et){if(mt.visible===!1)return;if(mt.layers.test(gt.layers)&&(mt.isMesh||mt.isLine||mt.isPoints)&&(mt.castShadow||mt.receiveShadow&&Et===VSMShadowMap)&&(!mt.frustumCulled||c.intersectsObject(mt))){mt.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,mt.matrixWorld);const wt=a.update(mt),_t=mt.material;if(Array.isArray(_t)){const Tt=wt.groups;for(let Mt=0,Bt=Tt.length;Mt<Bt;Mt++){const Rt=Tt[Mt],bt=_t[Rt.materialIndex];if(bt&&bt.visible){const Pt=dt(mt,bt,yt,Et);s.renderBufferDirect(vt,null,wt,Pt,mt,Rt)}}}else if(_t.visible){const Tt=dt(mt,_t,yt,Et);s.renderBufferDirect(vt,null,wt,Tt,mt,null)}}const Ct=mt.children;for(let wt=0,_t=Ct.length;wt<_t;wt++)ft(Ct[wt],gt,vt,yt,Et)}}function WebGLState(s,a,o){const c=o.isWebGL2;function d(){let Gt=!1;const pr=new Vector4;let Wt=null;const nr=new Vector4(0,0,0,0);return{setMask:function(Cr){Wt!==Cr&&!Gt&&(s.colorMask(Cr,Cr,Cr,Cr),Wt=Cr)},setLocked:function(Cr){Gt=Cr},setClear:function(Cr,Vr,Ur,Qr,sn){sn===!0&&(Cr*=Qr,Vr*=Qr,Ur*=Qr),pr.set(Cr,Vr,Ur,Qr),nr.equals(pr)===!1&&(s.clearColor(Cr,Vr,Ur,Qr),nr.copy(pr))},reset:function(){Gt=!1,Wt=null,nr.set(-1,0,0,0)}}}function b(){let Gt=!1,pr=null,Wt=null,nr=null;return{setTest:function(Cr){Cr?sr(s.DEPTH_TEST):Ar(s.DEPTH_TEST)},setMask:function(Cr){pr!==Cr&&!Gt&&(s.depthMask(Cr),pr=Cr)},setFunc:function(Cr){if(Wt!==Cr){switch(Cr){case NeverDepth:s.depthFunc(s.NEVER);break;case AlwaysDepth:s.depthFunc(s.ALWAYS);break;case LessDepth:s.depthFunc(s.LESS);break;case LessEqualDepth:s.depthFunc(s.LEQUAL);break;case EqualDepth:s.depthFunc(s.EQUAL);break;case GreaterEqualDepth:s.depthFunc(s.GEQUAL);break;case GreaterDepth:s.depthFunc(s.GREATER);break;case NotEqualDepth:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Wt=Cr}},setLocked:function(Cr){Gt=Cr},setClear:function(Cr){nr!==Cr&&(s.clearDepth(Cr),nr=Cr)},reset:function(){Gt=!1,pr=null,Wt=null,nr=null}}}function $(){let Gt=!1,pr=null,Wt=null,nr=null,Cr=null,Vr=null,Ur=null,Qr=null,sn=null;return{setTest:function(an){Gt||(an?sr(s.STENCIL_TEST):Ar(s.STENCIL_TEST))},setMask:function(an){pr!==an&&!Gt&&(s.stencilMask(an),pr=an)},setFunc:function(an,xn,An){(Wt!==an||nr!==xn||Cr!==An)&&(s.stencilFunc(an,xn,An),Wt=an,nr=xn,Cr=An)},setOp:function(an,xn,An){(Vr!==an||Ur!==xn||Qr!==An)&&(s.stencilOp(an,xn,An),Vr=an,Ur=xn,Qr=An)},setLocked:function(an){Gt=an},setClear:function(an){sn!==an&&(s.clearStencil(an),sn=an)},reset:function(){Gt=!1,pr=null,Wt=null,nr=null,Cr=null,Vr=null,Ur=null,Qr=null,sn=null}}}const j=new d,_e=new b,et=new $,tt=new WeakMap,rt=new WeakMap;let nt={},it={},at=new WeakMap,ct=[],st=null,ot=!1,ht=null,dt=null,ft=null,mt=null,gt=null,vt=null,yt=null,Et=!1,St=null,Ct=null,wt=null,_t=null,Tt=null;const Mt=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Bt=!1,Rt=0;const bt=s.getParameter(s.VERSION);bt.indexOf("WebGL")!==-1?(Rt=parseFloat(/^WebGL (\d)/.exec(bt)[1]),Bt=Rt>=1):bt.indexOf("OpenGL ES")!==-1&&(Rt=parseFloat(/^OpenGL ES (\d)/.exec(bt)[1]),Bt=Rt>=2);let Pt=null,Dt={};const $t=s.getParameter(s.SCISSOR_BOX),Lt=s.getParameter(s.VIEWPORT),Jt=new Vector4().fromArray($t),Qt=new Vector4().fromArray(Lt);function or(Gt,pr,Wt,nr){const Cr=new Uint8Array(4),Vr=s.createTexture();s.bindTexture(Gt,Vr),s.texParameteri(Gt,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(Gt,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Ur=0;Ur<Wt;Ur++)c&&(Gt===s.TEXTURE_3D||Gt===s.TEXTURE_2D_ARRAY)?s.texImage3D(pr,0,s.RGBA,1,1,nr,0,s.RGBA,s.UNSIGNED_BYTE,Cr):s.texImage2D(pr+Ur,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,Cr);return Vr}const er={};er[s.TEXTURE_2D]=or(s.TEXTURE_2D,s.TEXTURE_2D,1),er[s.TEXTURE_CUBE_MAP]=or(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),c&&(er[s.TEXTURE_2D_ARRAY]=or(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),er[s.TEXTURE_3D]=or(s.TEXTURE_3D,s.TEXTURE_3D,1,1)),j.setClear(0,0,0,1),_e.setClear(1),et.setClear(0),sr(s.DEPTH_TEST),_e.setFunc(LessEqualDepth),mr(!1),Br(CullFaceBack),sr(s.CULL_FACE),ar(NoBlending);function sr(Gt){nt[Gt]!==!0&&(s.enable(Gt),nt[Gt]=!0)}function Ar(Gt){nt[Gt]!==!1&&(s.disable(Gt),nt[Gt]=!1)}function Er(Gt,pr){return it[Gt]!==pr?(s.bindFramebuffer(Gt,pr),it[Gt]=pr,c&&(Gt===s.DRAW_FRAMEBUFFER&&(it[s.FRAMEBUFFER]=pr),Gt===s.FRAMEBUFFER&&(it[s.DRAW_FRAMEBUFFER]=pr)),!0):!1}function Tr(Gt,pr){let Wt=ct,nr=!1;if(Gt)if(Wt=at.get(pr),Wt===void 0&&(Wt=[],at.set(pr,Wt)),Gt.isWebGLMultipleRenderTargets){const Cr=Gt.texture;if(Wt.length!==Cr.length||Wt[0]!==s.COLOR_ATTACHMENT0){for(let Vr=0,Ur=Cr.length;Vr<Ur;Vr++)Wt[Vr]=s.COLOR_ATTACHMENT0+Vr;Wt.length=Cr.length,nr=!0}}else Wt[0]!==s.COLOR_ATTACHMENT0&&(Wt[0]=s.COLOR_ATTACHMENT0,nr=!0);else Wt[0]!==s.BACK&&(Wt[0]=s.BACK,nr=!0);nr&&(o.isWebGL2?s.drawBuffers(Wt):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(Wt))}function ur(Gt){return st!==Gt?(s.useProgram(Gt),st=Gt,!0):!1}const kt={[AddEquation]:s.FUNC_ADD,[SubtractEquation]:s.FUNC_SUBTRACT,[ReverseSubtractEquation]:s.FUNC_REVERSE_SUBTRACT};if(c)kt[MinEquation]=s.MIN,kt[MaxEquation]=s.MAX;else{const Gt=a.get("EXT_blend_minmax");Gt!==null&&(kt[MinEquation]=Gt.MIN_EXT,kt[MaxEquation]=Gt.MAX_EXT)}const Xt={[ZeroFactor]:s.ZERO,[OneFactor]:s.ONE,[SrcColorFactor]:s.SRC_COLOR,[SrcAlphaFactor]:s.SRC_ALPHA,[SrcAlphaSaturateFactor]:s.SRC_ALPHA_SATURATE,[DstColorFactor]:s.DST_COLOR,[DstAlphaFactor]:s.DST_ALPHA,[OneMinusSrcColorFactor]:s.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:s.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:s.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:s.ONE_MINUS_DST_ALPHA};function ar(Gt,pr,Wt,nr,Cr,Vr,Ur,Qr){if(Gt===NoBlending){ot===!0&&(Ar(s.BLEND),ot=!1);return}if(ot===!1&&(sr(s.BLEND),ot=!0),Gt!==CustomBlending){if(Gt!==ht||Qr!==Et){if((dt!==AddEquation||gt!==AddEquation)&&(s.blendEquation(s.FUNC_ADD),dt=AddEquation,gt=AddEquation),Qr)switch(Gt){case NormalBlending:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:s.blendFunc(s.ONE,s.ONE);break;case SubtractiveBlending:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case MultiplyBlending:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gt);break}else switch(Gt){case NormalBlending:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case SubtractiveBlending:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case MultiplyBlending:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gt);break}ft=null,mt=null,vt=null,yt=null,ht=Gt,Et=Qr}return}Cr=Cr||pr,Vr=Vr||Wt,Ur=Ur||nr,(pr!==dt||Cr!==gt)&&(s.blendEquationSeparate(kt[pr],kt[Cr]),dt=pr,gt=Cr),(Wt!==ft||nr!==mt||Vr!==vt||Ur!==yt)&&(s.blendFuncSeparate(Xt[Wt],Xt[nr],Xt[Vr],Xt[Ur]),ft=Wt,mt=nr,vt=Vr,yt=Ur),ht=Gt,Et=!1}function yr(Gt,pr){Gt.side===DoubleSide?Ar(s.CULL_FACE):sr(s.CULL_FACE);let Wt=Gt.side===BackSide;pr&&(Wt=!Wt),mr(Wt),Gt.blending===NormalBlending&&Gt.transparent===!1?ar(NoBlending):ar(Gt.blending,Gt.blendEquation,Gt.blendSrc,Gt.blendDst,Gt.blendEquationAlpha,Gt.blendSrcAlpha,Gt.blendDstAlpha,Gt.premultipliedAlpha),_e.setFunc(Gt.depthFunc),_e.setTest(Gt.depthTest),_e.setMask(Gt.depthWrite),j.setMask(Gt.colorWrite);const nr=Gt.stencilWrite;et.setTest(nr),nr&&(et.setMask(Gt.stencilWriteMask),et.setFunc(Gt.stencilFunc,Gt.stencilRef,Gt.stencilFuncMask),et.setOp(Gt.stencilFail,Gt.stencilZFail,Gt.stencilZPass)),br(Gt.polygonOffset,Gt.polygonOffsetFactor,Gt.polygonOffsetUnits),Gt.alphaToCoverage===!0?sr(s.SAMPLE_ALPHA_TO_COVERAGE):Ar(s.SAMPLE_ALPHA_TO_COVERAGE)}function mr(Gt){St!==Gt&&(Gt?s.frontFace(s.CW):s.frontFace(s.CCW),St=Gt)}function Br(Gt){Gt!==CullFaceNone?(sr(s.CULL_FACE),Gt!==Ct&&(Gt===CullFaceBack?s.cullFace(s.BACK):Gt===CullFaceFront?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Ar(s.CULL_FACE),Ct=Gt}function _r(Gt){Gt!==wt&&(Bt&&s.lineWidth(Gt),wt=Gt)}function br(Gt,pr,Wt){Gt?(sr(s.POLYGON_OFFSET_FILL),(_t!==pr||Tt!==Wt)&&(s.polygonOffset(pr,Wt),_t=pr,Tt=Wt)):Ar(s.POLYGON_OFFSET_FILL)}function Pr(Gt){Gt?sr(s.SCISSOR_TEST):Ar(s.SCISSOR_TEST)}function Or(Gt){Gt===void 0&&(Gt=s.TEXTURE0+Mt-1),Pt!==Gt&&(s.activeTexture(Gt),Pt=Gt)}function Wr(Gt,pr,Wt){Wt===void 0&&(Pt===null?Wt=s.TEXTURE0+Mt-1:Wt=Pt);let nr=Dt[Wt];nr===void 0&&(nr={type:void 0,texture:void 0},Dt[Wt]=nr),(nr.type!==Gt||nr.texture!==pr)&&(Pt!==Wt&&(s.activeTexture(Wt),Pt=Wt),s.bindTexture(Gt,pr||er[Gt]),nr.type=Gt,nr.texture=pr)}function Ot(){const Gt=Dt[Pt];Gt!==void 0&&Gt.type!==void 0&&(s.bindTexture(Gt.type,null),Gt.type=void 0,Gt.texture=void 0)}function Ft(){try{s.compressedTexImage2D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function ir(){try{s.compressedTexImage3D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function Sr(){try{s.texSubImage2D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function xr(){try{s.texSubImage3D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function Ir(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function Fr(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function Mr(){try{s.texStorage2D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function cr(){try{s.texStorage3D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function zt(){try{s.texImage2D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function hr(){try{s.texImage3D.apply(s,arguments)}catch(Gt){console.error("THREE.WebGLState:",Gt)}}function Vt(Gt){Jt.equals(Gt)===!1&&(s.scissor(Gt.x,Gt.y,Gt.z,Gt.w),Jt.copy(Gt))}function Ht(Gt){Qt.equals(Gt)===!1&&(s.viewport(Gt.x,Gt.y,Gt.z,Gt.w),Qt.copy(Gt))}function Kt(Gt,pr){let Wt=rt.get(pr);Wt===void 0&&(Wt=new WeakMap,rt.set(pr,Wt));let nr=Wt.get(Gt);nr===void 0&&(nr=s.getUniformBlockIndex(pr,Gt.name),Wt.set(Gt,nr))}function vr(Gt,pr){const nr=rt.get(pr).get(Gt);tt.get(pr)!==nr&&(s.uniformBlockBinding(pr,nr,Gt.__bindingPointIndex),tt.set(pr,nr))}function wr(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),c===!0&&(s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),nt={},Pt=null,Dt={},it={},at=new WeakMap,ct=[],st=null,ot=!1,ht=null,dt=null,ft=null,mt=null,gt=null,vt=null,yt=null,Et=!1,St=null,Ct=null,wt=null,_t=null,Tt=null,Jt.set(0,0,s.canvas.width,s.canvas.height),Qt.set(0,0,s.canvas.width,s.canvas.height),j.reset(),_e.reset(),et.reset()}return{buffers:{color:j,depth:_e,stencil:et},enable:sr,disable:Ar,bindFramebuffer:Er,drawBuffers:Tr,useProgram:ur,setBlending:ar,setMaterial:yr,setFlipSided:mr,setCullFace:Br,setLineWidth:_r,setPolygonOffset:br,setScissorTest:Pr,activeTexture:Or,bindTexture:Wr,unbindTexture:Ot,compressedTexImage2D:Ft,compressedTexImage3D:ir,texImage2D:zt,texImage3D:hr,updateUBOMapping:Kt,uniformBlockBinding:vr,texStorage2D:Mr,texStorage3D:cr,texSubImage2D:Sr,texSubImage3D:xr,compressedTexSubImage2D:Ir,compressedTexSubImage3D:Fr,scissor:Vt,viewport:Ht,reset:wr}}function WebGLTextures(s,a,o,c,d,b,$){const j=d.isWebGL2,_e=d.maxTextures,et=d.maxCubemapSize,tt=d.maxTextureSize,rt=d.maxSamples,nt=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,it=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),at=new WeakMap;let ct;const st=new WeakMap;let ot=!1;try{ot=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ht(Ot,Ft){return ot?new OffscreenCanvas(Ot,Ft):createElementNS$1("canvas")}function dt(Ot,Ft,ir,Sr){let xr=1;if((Ot.width>Sr||Ot.height>Sr)&&(xr=Sr/Math.max(Ot.width,Ot.height)),xr<1||Ft===!0)if(typeof HTMLImageElement<"u"&&Ot instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ot instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ot instanceof ImageBitmap){const Ir=Ft?floorPowerOfTwo:Math.floor,Fr=Ir(xr*Ot.width),Mr=Ir(xr*Ot.height);ct===void 0&&(ct=ht(Fr,Mr));const cr=ir?ht(Fr,Mr):ct;return cr.width=Fr,cr.height=Mr,cr.getContext("2d").drawImage(Ot,0,0,Fr,Mr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ot.width+"x"+Ot.height+") to ("+Fr+"x"+Mr+")."),cr}else return"data"in Ot&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ot.width+"x"+Ot.height+")."),Ot;return Ot}function ft(Ot){return isPowerOfTwo(Ot.width)&&isPowerOfTwo(Ot.height)}function mt(Ot){return j?!1:Ot.wrapS!==ClampToEdgeWrapping$1||Ot.wrapT!==ClampToEdgeWrapping$1||Ot.minFilter!==NearestFilter&&Ot.minFilter!==LinearFilter$1}function gt(Ot,Ft){return Ot.generateMipmaps&&Ft&&Ot.minFilter!==NearestFilter&&Ot.minFilter!==LinearFilter$1}function vt(Ot){s.generateMipmap(Ot)}function yt(Ot,Ft,ir,Sr,xr=!1){if(j===!1)return Ft;if(Ot!==null){if(s[Ot]!==void 0)return s[Ot];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ot+"'")}let Ir=Ft;return Ft===s.RED&&(ir===s.FLOAT&&(Ir=s.R32F),ir===s.HALF_FLOAT&&(Ir=s.R16F),ir===s.UNSIGNED_BYTE&&(Ir=s.R8)),Ft===s.RG&&(ir===s.FLOAT&&(Ir=s.RG32F),ir===s.HALF_FLOAT&&(Ir=s.RG16F),ir===s.UNSIGNED_BYTE&&(Ir=s.RG8)),Ft===s.RGBA&&(ir===s.FLOAT&&(Ir=s.RGBA32F),ir===s.HALF_FLOAT&&(Ir=s.RGBA16F),ir===s.UNSIGNED_BYTE&&(Ir=Sr===SRGBColorSpace$1&&xr===!1?s.SRGB8_ALPHA8:s.RGBA8),ir===s.UNSIGNED_SHORT_4_4_4_4&&(Ir=s.RGBA4),ir===s.UNSIGNED_SHORT_5_5_5_1&&(Ir=s.RGB5_A1)),(Ir===s.R16F||Ir===s.R32F||Ir===s.RG16F||Ir===s.RG32F||Ir===s.RGBA16F||Ir===s.RGBA32F)&&a.get("EXT_color_buffer_float"),Ir}function Et(Ot,Ft,ir){return gt(Ot,ir)===!0||Ot.isFramebufferTexture&&Ot.minFilter!==NearestFilter&&Ot.minFilter!==LinearFilter$1?Math.log2(Math.max(Ft.width,Ft.height))+1:Ot.mipmaps!==void 0&&Ot.mipmaps.length>0?Ot.mipmaps.length:Ot.isCompressedTexture&&Array.isArray(Ot.image)?Ft.mipmaps.length:1}function St(Ot){return Ot===NearestFilter||Ot===NearestMipmapNearestFilter||Ot===NearestMipmapLinearFilter?s.NEAREST:s.LINEAR}function Ct(Ot){const Ft=Ot.target;Ft.removeEventListener("dispose",Ct),_t(Ft),Ft.isVideoTexture&&at.delete(Ft)}function wt(Ot){const Ft=Ot.target;Ft.removeEventListener("dispose",wt),Mt(Ft)}function _t(Ot){const Ft=c.get(Ot);if(Ft.__webglInit===void 0)return;const ir=Ot.source,Sr=st.get(ir);if(Sr){const xr=Sr[Ft.__cacheKey];xr.usedTimes--,xr.usedTimes===0&&Tt(Ot),Object.keys(Sr).length===0&&st.delete(ir)}c.remove(Ot)}function Tt(Ot){const Ft=c.get(Ot);s.deleteTexture(Ft.__webglTexture);const ir=Ot.source,Sr=st.get(ir);delete Sr[Ft.__cacheKey],$.memory.textures--}function Mt(Ot){const Ft=Ot.texture,ir=c.get(Ot),Sr=c.get(Ft);if(Sr.__webglTexture!==void 0&&(s.deleteTexture(Sr.__webglTexture),$.memory.textures--),Ot.depthTexture&&Ot.depthTexture.dispose(),Ot.isWebGLCubeRenderTarget)for(let xr=0;xr<6;xr++)s.deleteFramebuffer(ir.__webglFramebuffer[xr]),ir.__webglDepthbuffer&&s.deleteRenderbuffer(ir.__webglDepthbuffer[xr]);else{if(s.deleteFramebuffer(ir.__webglFramebuffer),ir.__webglDepthbuffer&&s.deleteRenderbuffer(ir.__webglDepthbuffer),ir.__webglMultisampledFramebuffer&&s.deleteFramebuffer(ir.__webglMultisampledFramebuffer),ir.__webglColorRenderbuffer)for(let xr=0;xr<ir.__webglColorRenderbuffer.length;xr++)ir.__webglColorRenderbuffer[xr]&&s.deleteRenderbuffer(ir.__webglColorRenderbuffer[xr]);ir.__webglDepthRenderbuffer&&s.deleteRenderbuffer(ir.__webglDepthRenderbuffer)}if(Ot.isWebGLMultipleRenderTargets)for(let xr=0,Ir=Ft.length;xr<Ir;xr++){const Fr=c.get(Ft[xr]);Fr.__webglTexture&&(s.deleteTexture(Fr.__webglTexture),$.memory.textures--),c.remove(Ft[xr])}c.remove(Ft),c.remove(Ot)}let Bt=0;function Rt(){Bt=0}function bt(){const Ot=Bt;return Ot>=_e&&console.warn("THREE.WebGLTextures: Trying to use "+Ot+" texture units while this GPU supports only "+_e),Bt+=1,Ot}function Pt(Ot){const Ft=[];return Ft.push(Ot.wrapS),Ft.push(Ot.wrapT),Ft.push(Ot.wrapR||0),Ft.push(Ot.magFilter),Ft.push(Ot.minFilter),Ft.push(Ot.anisotropy),Ft.push(Ot.internalFormat),Ft.push(Ot.format),Ft.push(Ot.type),Ft.push(Ot.generateMipmaps),Ft.push(Ot.premultiplyAlpha),Ft.push(Ot.flipY),Ft.push(Ot.unpackAlignment),Ft.push(Ot.colorSpace),Ft.join()}function Dt(Ot,Ft){const ir=c.get(Ot);if(Ot.isVideoTexture&&Or(Ot),Ot.isRenderTargetTexture===!1&&Ot.version>0&&ir.__version!==Ot.version){const Sr=Ot.image;if(Sr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Sr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Er(ir,Ot,Ft);return}}o.bindTexture(s.TEXTURE_2D,ir.__webglTexture,s.TEXTURE0+Ft)}function $t(Ot,Ft){const ir=c.get(Ot);if(Ot.version>0&&ir.__version!==Ot.version){Er(ir,Ot,Ft);return}o.bindTexture(s.TEXTURE_2D_ARRAY,ir.__webglTexture,s.TEXTURE0+Ft)}function Lt(Ot,Ft){const ir=c.get(Ot);if(Ot.version>0&&ir.__version!==Ot.version){Er(ir,Ot,Ft);return}o.bindTexture(s.TEXTURE_3D,ir.__webglTexture,s.TEXTURE0+Ft)}function Jt(Ot,Ft){const ir=c.get(Ot);if(Ot.version>0&&ir.__version!==Ot.version){Tr(ir,Ot,Ft);return}o.bindTexture(s.TEXTURE_CUBE_MAP,ir.__webglTexture,s.TEXTURE0+Ft)}const Qt={[RepeatWrapping$1]:s.REPEAT,[ClampToEdgeWrapping$1]:s.CLAMP_TO_EDGE,[MirroredRepeatWrapping$1]:s.MIRRORED_REPEAT},or={[NearestFilter]:s.NEAREST,[NearestMipmapNearestFilter]:s.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:s.NEAREST_MIPMAP_LINEAR,[LinearFilter$1]:s.LINEAR,[LinearMipmapNearestFilter]:s.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter$1]:s.LINEAR_MIPMAP_LINEAR},er={[NeverCompare]:s.NEVER,[AlwaysCompare]:s.ALWAYS,[LessCompare]:s.LESS,[LessEqualCompare]:s.LEQUAL,[EqualCompare]:s.EQUAL,[GreaterEqualCompare]:s.GEQUAL,[GreaterCompare]:s.GREATER,[NotEqualCompare]:s.NOTEQUAL};function sr(Ot,Ft,ir){if(ir?(s.texParameteri(Ot,s.TEXTURE_WRAP_S,Qt[Ft.wrapS]),s.texParameteri(Ot,s.TEXTURE_WRAP_T,Qt[Ft.wrapT]),(Ot===s.TEXTURE_3D||Ot===s.TEXTURE_2D_ARRAY)&&s.texParameteri(Ot,s.TEXTURE_WRAP_R,Qt[Ft.wrapR]),s.texParameteri(Ot,s.TEXTURE_MAG_FILTER,or[Ft.magFilter]),s.texParameteri(Ot,s.TEXTURE_MIN_FILTER,or[Ft.minFilter])):(s.texParameteri(Ot,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(Ot,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),(Ot===s.TEXTURE_3D||Ot===s.TEXTURE_2D_ARRAY)&&s.texParameteri(Ot,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),(Ft.wrapS!==ClampToEdgeWrapping$1||Ft.wrapT!==ClampToEdgeWrapping$1)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(Ot,s.TEXTURE_MAG_FILTER,St(Ft.magFilter)),s.texParameteri(Ot,s.TEXTURE_MIN_FILTER,St(Ft.minFilter)),Ft.minFilter!==NearestFilter&&Ft.minFilter!==LinearFilter$1&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Ft.compareFunction&&(s.texParameteri(Ot,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(Ot,s.TEXTURE_COMPARE_FUNC,er[Ft.compareFunction])),a.has("EXT_texture_filter_anisotropic")===!0){const Sr=a.get("EXT_texture_filter_anisotropic");if(Ft.magFilter===NearestFilter||Ft.minFilter!==NearestMipmapLinearFilter&&Ft.minFilter!==LinearMipmapLinearFilter$1||Ft.type===FloatType&&a.has("OES_texture_float_linear")===!1||j===!1&&Ft.type===HalfFloatType&&a.has("OES_texture_half_float_linear")===!1)return;(Ft.anisotropy>1||c.get(Ft).__currentAnisotropy)&&(s.texParameterf(Ot,Sr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ft.anisotropy,d.getMaxAnisotropy())),c.get(Ft).__currentAnisotropy=Ft.anisotropy)}}function Ar(Ot,Ft){let ir=!1;Ot.__webglInit===void 0&&(Ot.__webglInit=!0,Ft.addEventListener("dispose",Ct));const Sr=Ft.source;let xr=st.get(Sr);xr===void 0&&(xr={},st.set(Sr,xr));const Ir=Pt(Ft);if(Ir!==Ot.__cacheKey){xr[Ir]===void 0&&(xr[Ir]={texture:s.createTexture(),usedTimes:0},$.memory.textures++,ir=!0),xr[Ir].usedTimes++;const Fr=xr[Ot.__cacheKey];Fr!==void 0&&(xr[Ot.__cacheKey].usedTimes--,Fr.usedTimes===0&&Tt(Ft)),Ot.__cacheKey=Ir,Ot.__webglTexture=xr[Ir].texture}return ir}function Er(Ot,Ft,ir){let Sr=s.TEXTURE_2D;(Ft.isDataArrayTexture||Ft.isCompressedArrayTexture)&&(Sr=s.TEXTURE_2D_ARRAY),Ft.isData3DTexture&&(Sr=s.TEXTURE_3D);const xr=Ar(Ot,Ft),Ir=Ft.source;o.bindTexture(Sr,Ot.__webglTexture,s.TEXTURE0+ir);const Fr=c.get(Ir);if(Ir.version!==Fr.__version||xr===!0){o.activeTexture(s.TEXTURE0+ir),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Ft.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ft.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Ft.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const Mr=mt(Ft)&&ft(Ft.image)===!1;let cr=dt(Ft.image,Mr,!1,tt);cr=Wr(Ft,cr);const zt=ft(cr)||j,hr=b.convert(Ft.format,Ft.colorSpace);let Vt=b.convert(Ft.type),Ht=yt(Ft.internalFormat,hr,Vt,Ft.colorSpace);sr(Sr,Ft,zt);let Kt;const vr=Ft.mipmaps,wr=j&&Ft.isVideoTexture!==!0,Gt=Fr.__version===void 0||xr===!0,pr=Et(Ft,cr,zt);if(Ft.isDepthTexture)Ht=s.DEPTH_COMPONENT,j?Ft.type===FloatType?Ht=s.DEPTH_COMPONENT32F:Ft.type===UnsignedIntType?Ht=s.DEPTH_COMPONENT24:Ft.type===UnsignedInt248Type?Ht=s.DEPTH24_STENCIL8:Ht=s.DEPTH_COMPONENT16:Ft.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ft.format===DepthFormat&&Ht===s.DEPTH_COMPONENT&&Ft.type!==UnsignedShortType&&Ft.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ft.type=UnsignedIntType,Vt=b.convert(Ft.type)),Ft.format===DepthStencilFormat&&Ht===s.DEPTH_COMPONENT&&(Ht=s.DEPTH_STENCIL,Ft.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ft.type=UnsignedInt248Type,Vt=b.convert(Ft.type))),Gt&&(wr?o.texStorage2D(s.TEXTURE_2D,1,Ht,cr.width,cr.height):o.texImage2D(s.TEXTURE_2D,0,Ht,cr.width,cr.height,0,hr,Vt,null));else if(Ft.isDataTexture)if(vr.length>0&&zt){wr&&Gt&&o.texStorage2D(s.TEXTURE_2D,pr,Ht,vr[0].width,vr[0].height);for(let Wt=0,nr=vr.length;Wt<nr;Wt++)Kt=vr[Wt],wr?o.texSubImage2D(s.TEXTURE_2D,Wt,0,0,Kt.width,Kt.height,hr,Vt,Kt.data):o.texImage2D(s.TEXTURE_2D,Wt,Ht,Kt.width,Kt.height,0,hr,Vt,Kt.data);Ft.generateMipmaps=!1}else wr?(Gt&&o.texStorage2D(s.TEXTURE_2D,pr,Ht,cr.width,cr.height),o.texSubImage2D(s.TEXTURE_2D,0,0,0,cr.width,cr.height,hr,Vt,cr.data)):o.texImage2D(s.TEXTURE_2D,0,Ht,cr.width,cr.height,0,hr,Vt,cr.data);else if(Ft.isCompressedTexture)if(Ft.isCompressedArrayTexture){wr&&Gt&&o.texStorage3D(s.TEXTURE_2D_ARRAY,pr,Ht,vr[0].width,vr[0].height,cr.depth);for(let Wt=0,nr=vr.length;Wt<nr;Wt++)Kt=vr[Wt],Ft.format!==RGBAFormat$1?hr!==null?wr?o.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Wt,0,0,0,Kt.width,Kt.height,cr.depth,hr,Kt.data,0,0):o.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Wt,Ht,Kt.width,Kt.height,cr.depth,0,Kt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wr?o.texSubImage3D(s.TEXTURE_2D_ARRAY,Wt,0,0,0,Kt.width,Kt.height,cr.depth,hr,Vt,Kt.data):o.texImage3D(s.TEXTURE_2D_ARRAY,Wt,Ht,Kt.width,Kt.height,cr.depth,0,hr,Vt,Kt.data)}else{wr&&Gt&&o.texStorage2D(s.TEXTURE_2D,pr,Ht,vr[0].width,vr[0].height);for(let Wt=0,nr=vr.length;Wt<nr;Wt++)Kt=vr[Wt],Ft.format!==RGBAFormat$1?hr!==null?wr?o.compressedTexSubImage2D(s.TEXTURE_2D,Wt,0,0,Kt.width,Kt.height,hr,Kt.data):o.compressedTexImage2D(s.TEXTURE_2D,Wt,Ht,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wr?o.texSubImage2D(s.TEXTURE_2D,Wt,0,0,Kt.width,Kt.height,hr,Vt,Kt.data):o.texImage2D(s.TEXTURE_2D,Wt,Ht,Kt.width,Kt.height,0,hr,Vt,Kt.data)}else if(Ft.isDataArrayTexture)wr?(Gt&&o.texStorage3D(s.TEXTURE_2D_ARRAY,pr,Ht,cr.width,cr.height,cr.depth),o.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,cr.width,cr.height,cr.depth,hr,Vt,cr.data)):o.texImage3D(s.TEXTURE_2D_ARRAY,0,Ht,cr.width,cr.height,cr.depth,0,hr,Vt,cr.data);else if(Ft.isData3DTexture)wr?(Gt&&o.texStorage3D(s.TEXTURE_3D,pr,Ht,cr.width,cr.height,cr.depth),o.texSubImage3D(s.TEXTURE_3D,0,0,0,0,cr.width,cr.height,cr.depth,hr,Vt,cr.data)):o.texImage3D(s.TEXTURE_3D,0,Ht,cr.width,cr.height,cr.depth,0,hr,Vt,cr.data);else if(Ft.isFramebufferTexture){if(Gt)if(wr)o.texStorage2D(s.TEXTURE_2D,pr,Ht,cr.width,cr.height);else{let Wt=cr.width,nr=cr.height;for(let Cr=0;Cr<pr;Cr++)o.texImage2D(s.TEXTURE_2D,Cr,Ht,Wt,nr,0,hr,Vt,null),Wt>>=1,nr>>=1}}else if(vr.length>0&&zt){wr&&Gt&&o.texStorage2D(s.TEXTURE_2D,pr,Ht,vr[0].width,vr[0].height);for(let Wt=0,nr=vr.length;Wt<nr;Wt++)Kt=vr[Wt],wr?o.texSubImage2D(s.TEXTURE_2D,Wt,0,0,hr,Vt,Kt):o.texImage2D(s.TEXTURE_2D,Wt,Ht,hr,Vt,Kt);Ft.generateMipmaps=!1}else wr?(Gt&&o.texStorage2D(s.TEXTURE_2D,pr,Ht,cr.width,cr.height),o.texSubImage2D(s.TEXTURE_2D,0,0,0,hr,Vt,cr)):o.texImage2D(s.TEXTURE_2D,0,Ht,hr,Vt,cr);gt(Ft,zt)&&vt(Sr),Fr.__version=Ir.version,Ft.onUpdate&&Ft.onUpdate(Ft)}Ot.__version=Ft.version}function Tr(Ot,Ft,ir){if(Ft.image.length!==6)return;const Sr=Ar(Ot,Ft),xr=Ft.source;o.bindTexture(s.TEXTURE_CUBE_MAP,Ot.__webglTexture,s.TEXTURE0+ir);const Ir=c.get(xr);if(xr.version!==Ir.__version||Sr===!0){o.activeTexture(s.TEXTURE0+ir),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Ft.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ft.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Ft.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const Fr=Ft.isCompressedTexture||Ft.image[0].isCompressedTexture,Mr=Ft.image[0]&&Ft.image[0].isDataTexture,cr=[];for(let Wt=0;Wt<6;Wt++)!Fr&&!Mr?cr[Wt]=dt(Ft.image[Wt],!1,!0,et):cr[Wt]=Mr?Ft.image[Wt].image:Ft.image[Wt],cr[Wt]=Wr(Ft,cr[Wt]);const zt=cr[0],hr=ft(zt)||j,Vt=b.convert(Ft.format,Ft.colorSpace),Ht=b.convert(Ft.type),Kt=yt(Ft.internalFormat,Vt,Ht,Ft.colorSpace),vr=j&&Ft.isVideoTexture!==!0,wr=Ir.__version===void 0||Sr===!0;let Gt=Et(Ft,zt,hr);sr(s.TEXTURE_CUBE_MAP,Ft,hr);let pr;if(Fr){vr&&wr&&o.texStorage2D(s.TEXTURE_CUBE_MAP,Gt,Kt,zt.width,zt.height);for(let Wt=0;Wt<6;Wt++){pr=cr[Wt].mipmaps;for(let nr=0;nr<pr.length;nr++){const Cr=pr[nr];Ft.format!==RGBAFormat$1?Vt!==null?vr?o.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr,0,0,Cr.width,Cr.height,Vt,Cr.data):o.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr,Kt,Cr.width,Cr.height,0,Cr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vr?o.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr,0,0,Cr.width,Cr.height,Vt,Ht,Cr.data):o.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr,Kt,Cr.width,Cr.height,0,Vt,Ht,Cr.data)}}}else{pr=Ft.mipmaps,vr&&wr&&(pr.length>0&&Gt++,o.texStorage2D(s.TEXTURE_CUBE_MAP,Gt,Kt,cr[0].width,cr[0].height));for(let Wt=0;Wt<6;Wt++)if(Mr){vr?o.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,0,0,0,cr[Wt].width,cr[Wt].height,Vt,Ht,cr[Wt].data):o.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,0,Kt,cr[Wt].width,cr[Wt].height,0,Vt,Ht,cr[Wt].data);for(let nr=0;nr<pr.length;nr++){const Vr=pr[nr].image[Wt].image;vr?o.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr+1,0,0,Vr.width,Vr.height,Vt,Ht,Vr.data):o.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr+1,Kt,Vr.width,Vr.height,0,Vt,Ht,Vr.data)}}else{vr?o.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,0,0,0,Vt,Ht,cr[Wt]):o.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,0,Kt,Vt,Ht,cr[Wt]);for(let nr=0;nr<pr.length;nr++){const Cr=pr[nr];vr?o.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr+1,0,0,Vt,Ht,Cr.image[Wt]):o.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Wt,nr+1,Kt,Vt,Ht,Cr.image[Wt])}}}gt(Ft,hr)&&vt(s.TEXTURE_CUBE_MAP),Ir.__version=xr.version,Ft.onUpdate&&Ft.onUpdate(Ft)}Ot.__version=Ft.version}function ur(Ot,Ft,ir,Sr,xr){const Ir=b.convert(ir.format,ir.colorSpace),Fr=b.convert(ir.type),Mr=yt(ir.internalFormat,Ir,Fr,ir.colorSpace);c.get(Ft).__hasExternalTextures||(xr===s.TEXTURE_3D||xr===s.TEXTURE_2D_ARRAY?o.texImage3D(xr,0,Mr,Ft.width,Ft.height,Ft.depth,0,Ir,Fr,null):o.texImage2D(xr,0,Mr,Ft.width,Ft.height,0,Ir,Fr,null)),o.bindFramebuffer(s.FRAMEBUFFER,Ot),Pr(Ft)?nt.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,Sr,xr,c.get(ir).__webglTexture,0,br(Ft)):(xr===s.TEXTURE_2D||xr>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&xr<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,Sr,xr,c.get(ir).__webglTexture,0),o.bindFramebuffer(s.FRAMEBUFFER,null)}function kt(Ot,Ft,ir){if(s.bindRenderbuffer(s.RENDERBUFFER,Ot),Ft.depthBuffer&&!Ft.stencilBuffer){let Sr=s.DEPTH_COMPONENT16;if(ir||Pr(Ft)){const xr=Ft.depthTexture;xr&&xr.isDepthTexture&&(xr.type===FloatType?Sr=s.DEPTH_COMPONENT32F:xr.type===UnsignedIntType&&(Sr=s.DEPTH_COMPONENT24));const Ir=br(Ft);Pr(Ft)?nt.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Ir,Sr,Ft.width,Ft.height):s.renderbufferStorageMultisample(s.RENDERBUFFER,Ir,Sr,Ft.width,Ft.height)}else s.renderbufferStorage(s.RENDERBUFFER,Sr,Ft.width,Ft.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,Ot)}else if(Ft.depthBuffer&&Ft.stencilBuffer){const Sr=br(Ft);ir&&Pr(Ft)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Sr,s.DEPTH24_STENCIL8,Ft.width,Ft.height):Pr(Ft)?nt.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Sr,s.DEPTH24_STENCIL8,Ft.width,Ft.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,Ft.width,Ft.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,Ot)}else{const Sr=Ft.isWebGLMultipleRenderTargets===!0?Ft.texture:[Ft.texture];for(let xr=0;xr<Sr.length;xr++){const Ir=Sr[xr],Fr=b.convert(Ir.format,Ir.colorSpace),Mr=b.convert(Ir.type),cr=yt(Ir.internalFormat,Fr,Mr,Ir.colorSpace),zt=br(Ft);ir&&Pr(Ft)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,zt,cr,Ft.width,Ft.height):Pr(Ft)?nt.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,zt,cr,Ft.width,Ft.height):s.renderbufferStorage(s.RENDERBUFFER,cr,Ft.width,Ft.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Xt(Ot,Ft){if(Ft&&Ft.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(s.FRAMEBUFFER,Ot),!(Ft.depthTexture&&Ft.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(Ft.depthTexture).__webglTexture||Ft.depthTexture.image.width!==Ft.width||Ft.depthTexture.image.height!==Ft.height)&&(Ft.depthTexture.image.width=Ft.width,Ft.depthTexture.image.height=Ft.height,Ft.depthTexture.needsUpdate=!0),Dt(Ft.depthTexture,0);const Sr=c.get(Ft.depthTexture).__webglTexture,xr=br(Ft);if(Ft.depthTexture.format===DepthFormat)Pr(Ft)?nt.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Sr,0,xr):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Sr,0);else if(Ft.depthTexture.format===DepthStencilFormat)Pr(Ft)?nt.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Sr,0,xr):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Sr,0);else throw new Error("Unknown depthTexture format")}function ar(Ot){const Ft=c.get(Ot),ir=Ot.isWebGLCubeRenderTarget===!0;if(Ot.depthTexture&&!Ft.__autoAllocateDepthBuffer){if(ir)throw new Error("target.depthTexture not supported in Cube render targets");Xt(Ft.__webglFramebuffer,Ot)}else if(ir){Ft.__webglDepthbuffer=[];for(let Sr=0;Sr<6;Sr++)o.bindFramebuffer(s.FRAMEBUFFER,Ft.__webglFramebuffer[Sr]),Ft.__webglDepthbuffer[Sr]=s.createRenderbuffer(),kt(Ft.__webglDepthbuffer[Sr],Ot,!1)}else o.bindFramebuffer(s.FRAMEBUFFER,Ft.__webglFramebuffer),Ft.__webglDepthbuffer=s.createRenderbuffer(),kt(Ft.__webglDepthbuffer,Ot,!1);o.bindFramebuffer(s.FRAMEBUFFER,null)}function yr(Ot,Ft,ir){const Sr=c.get(Ot);Ft!==void 0&&ur(Sr.__webglFramebuffer,Ot,Ot.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D),ir!==void 0&&ar(Ot)}function mr(Ot){const Ft=Ot.texture,ir=c.get(Ot),Sr=c.get(Ft);Ot.addEventListener("dispose",wt),Ot.isWebGLMultipleRenderTargets!==!0&&(Sr.__webglTexture===void 0&&(Sr.__webglTexture=s.createTexture()),Sr.__version=Ft.version,$.memory.textures++);const xr=Ot.isWebGLCubeRenderTarget===!0,Ir=Ot.isWebGLMultipleRenderTargets===!0,Fr=ft(Ot)||j;if(xr){ir.__webglFramebuffer=[];for(let Mr=0;Mr<6;Mr++)ir.__webglFramebuffer[Mr]=s.createFramebuffer()}else{if(ir.__webglFramebuffer=s.createFramebuffer(),Ir)if(d.drawBuffers){const Mr=Ot.texture;for(let cr=0,zt=Mr.length;cr<zt;cr++){const hr=c.get(Mr[cr]);hr.__webglTexture===void 0&&(hr.__webglTexture=s.createTexture(),$.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(j&&Ot.samples>0&&Pr(Ot)===!1){const Mr=Ir?Ft:[Ft];ir.__webglMultisampledFramebuffer=s.createFramebuffer(),ir.__webglColorRenderbuffer=[],o.bindFramebuffer(s.FRAMEBUFFER,ir.__webglMultisampledFramebuffer);for(let cr=0;cr<Mr.length;cr++){const zt=Mr[cr];ir.__webglColorRenderbuffer[cr]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,ir.__webglColorRenderbuffer[cr]);const hr=b.convert(zt.format,zt.colorSpace),Vt=b.convert(zt.type),Ht=yt(zt.internalFormat,hr,Vt,zt.colorSpace,Ot.isXRRenderTarget===!0),Kt=br(Ot);s.renderbufferStorageMultisample(s.RENDERBUFFER,Kt,Ht,Ot.width,Ot.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+cr,s.RENDERBUFFER,ir.__webglColorRenderbuffer[cr])}s.bindRenderbuffer(s.RENDERBUFFER,null),Ot.depthBuffer&&(ir.__webglDepthRenderbuffer=s.createRenderbuffer(),kt(ir.__webglDepthRenderbuffer,Ot,!0)),o.bindFramebuffer(s.FRAMEBUFFER,null)}}if(xr){o.bindTexture(s.TEXTURE_CUBE_MAP,Sr.__webglTexture),sr(s.TEXTURE_CUBE_MAP,Ft,Fr);for(let Mr=0;Mr<6;Mr++)ur(ir.__webglFramebuffer[Mr],Ot,Ft,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Mr);gt(Ft,Fr)&&vt(s.TEXTURE_CUBE_MAP),o.unbindTexture()}else if(Ir){const Mr=Ot.texture;for(let cr=0,zt=Mr.length;cr<zt;cr++){const hr=Mr[cr],Vt=c.get(hr);o.bindTexture(s.TEXTURE_2D,Vt.__webglTexture),sr(s.TEXTURE_2D,hr,Fr),ur(ir.__webglFramebuffer,Ot,hr,s.COLOR_ATTACHMENT0+cr,s.TEXTURE_2D),gt(hr,Fr)&&vt(s.TEXTURE_2D)}o.unbindTexture()}else{let Mr=s.TEXTURE_2D;(Ot.isWebGL3DRenderTarget||Ot.isWebGLArrayRenderTarget)&&(j?Mr=Ot.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(Mr,Sr.__webglTexture),sr(Mr,Ft,Fr),ur(ir.__webglFramebuffer,Ot,Ft,s.COLOR_ATTACHMENT0,Mr),gt(Ft,Fr)&&vt(Mr),o.unbindTexture()}Ot.depthBuffer&&ar(Ot)}function Br(Ot){const Ft=ft(Ot)||j,ir=Ot.isWebGLMultipleRenderTargets===!0?Ot.texture:[Ot.texture];for(let Sr=0,xr=ir.length;Sr<xr;Sr++){const Ir=ir[Sr];if(gt(Ir,Ft)){const Fr=Ot.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,Mr=c.get(Ir).__webglTexture;o.bindTexture(Fr,Mr),vt(Fr),o.unbindTexture()}}}function _r(Ot){if(j&&Ot.samples>0&&Pr(Ot)===!1){const Ft=Ot.isWebGLMultipleRenderTargets?Ot.texture:[Ot.texture],ir=Ot.width,Sr=Ot.height;let xr=s.COLOR_BUFFER_BIT;const Ir=[],Fr=Ot.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Mr=c.get(Ot),cr=Ot.isWebGLMultipleRenderTargets===!0;if(cr)for(let zt=0;zt<Ft.length;zt++)o.bindFramebuffer(s.FRAMEBUFFER,Mr.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+zt,s.RENDERBUFFER,null),o.bindFramebuffer(s.FRAMEBUFFER,Mr.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+zt,s.TEXTURE_2D,null,0);o.bindFramebuffer(s.READ_FRAMEBUFFER,Mr.__webglMultisampledFramebuffer),o.bindFramebuffer(s.DRAW_FRAMEBUFFER,Mr.__webglFramebuffer);for(let zt=0;zt<Ft.length;zt++){Ir.push(s.COLOR_ATTACHMENT0+zt),Ot.depthBuffer&&Ir.push(Fr);const hr=Mr.__ignoreDepthValues!==void 0?Mr.__ignoreDepthValues:!1;if(hr===!1&&(Ot.depthBuffer&&(xr|=s.DEPTH_BUFFER_BIT),Ot.stencilBuffer&&(xr|=s.STENCIL_BUFFER_BIT)),cr&&s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,Mr.__webglColorRenderbuffer[zt]),hr===!0&&(s.invalidateFramebuffer(s.READ_FRAMEBUFFER,[Fr]),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[Fr])),cr){const Vt=c.get(Ft[zt]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,Vt,0)}s.blitFramebuffer(0,0,ir,Sr,0,0,ir,Sr,xr,s.NEAREST),it&&s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Ir)}if(o.bindFramebuffer(s.READ_FRAMEBUFFER,null),o.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),cr)for(let zt=0;zt<Ft.length;zt++){o.bindFramebuffer(s.FRAMEBUFFER,Mr.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+zt,s.RENDERBUFFER,Mr.__webglColorRenderbuffer[zt]);const hr=c.get(Ft[zt]).__webglTexture;o.bindFramebuffer(s.FRAMEBUFFER,Mr.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+zt,s.TEXTURE_2D,hr,0)}o.bindFramebuffer(s.DRAW_FRAMEBUFFER,Mr.__webglMultisampledFramebuffer)}}function br(Ot){return Math.min(rt,Ot.samples)}function Pr(Ot){const Ft=c.get(Ot);return j&&Ot.samples>0&&a.has("WEBGL_multisampled_render_to_texture")===!0&&Ft.__useRenderToTexture!==!1}function Or(Ot){const Ft=$.render.frame;at.get(Ot)!==Ft&&(at.set(Ot,Ft),Ot.update())}function Wr(Ot,Ft){const ir=Ot.colorSpace,Sr=Ot.format,xr=Ot.type;return Ot.isCompressedTexture===!0||Ot.format===_SRGBAFormat||ir!==LinearSRGBColorSpace&&ir!==NoColorSpace$1&&(ir===SRGBColorSpace$1?j===!1?a.has("EXT_sRGB")===!0&&Sr===RGBAFormat$1?(Ot.format=_SRGBAFormat,Ot.minFilter=LinearFilter$1,Ot.generateMipmaps=!1):Ft=ImageUtils$1.sRGBToLinear(Ft):(Sr!==RGBAFormat$1||xr!==UnsignedByteType$1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ir)),Ft}this.allocateTextureUnit=bt,this.resetTextureUnits=Rt,this.setTexture2D=Dt,this.setTexture2DArray=$t,this.setTexture3D=Lt,this.setTextureCube=Jt,this.rebindTextures=yr,this.setupRenderTarget=mr,this.updateRenderTargetMipmap=Br,this.updateMultisampleRenderTarget=_r,this.setupDepthRenderbuffer=ar,this.setupFrameBufferTexture=ur,this.useMultisampledRTT=Pr}function WebGLUtils(s,a,o){const c=o.isWebGL2;function d(b,$=NoColorSpace$1){let j;if(b===UnsignedByteType$1)return s.UNSIGNED_BYTE;if(b===UnsignedShort4444Type)return s.UNSIGNED_SHORT_4_4_4_4;if(b===UnsignedShort5551Type)return s.UNSIGNED_SHORT_5_5_5_1;if(b===ByteType)return s.BYTE;if(b===ShortType)return s.SHORT;if(b===UnsignedShortType)return s.UNSIGNED_SHORT;if(b===IntType)return s.INT;if(b===UnsignedIntType)return s.UNSIGNED_INT;if(b===FloatType)return s.FLOAT;if(b===HalfFloatType)return c?s.HALF_FLOAT:(j=a.get("OES_texture_half_float"),j!==null?j.HALF_FLOAT_OES:null);if(b===AlphaFormat)return s.ALPHA;if(b===RGBAFormat$1)return s.RGBA;if(b===LuminanceFormat)return s.LUMINANCE;if(b===LuminanceAlphaFormat)return s.LUMINANCE_ALPHA;if(b===DepthFormat)return s.DEPTH_COMPONENT;if(b===DepthStencilFormat)return s.DEPTH_STENCIL;if(b===_SRGBAFormat)return j=a.get("EXT_sRGB"),j!==null?j.SRGB_ALPHA_EXT:null;if(b===RedFormat)return s.RED;if(b===RedIntegerFormat)return s.RED_INTEGER;if(b===RGFormat)return s.RG;if(b===RGIntegerFormat)return s.RG_INTEGER;if(b===RGBAIntegerFormat)return s.RGBA_INTEGER;if(b===RGB_S3TC_DXT1_Format||b===RGBA_S3TC_DXT1_Format||b===RGBA_S3TC_DXT3_Format||b===RGBA_S3TC_DXT5_Format)if($===SRGBColorSpace$1)if(j=a.get("WEBGL_compressed_texture_s3tc_srgb"),j!==null){if(b===RGB_S3TC_DXT1_Format)return j.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(b===RGBA_S3TC_DXT1_Format)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(b===RGBA_S3TC_DXT3_Format)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(b===RGBA_S3TC_DXT5_Format)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(j=a.get("WEBGL_compressed_texture_s3tc"),j!==null){if(b===RGB_S3TC_DXT1_Format)return j.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===RGBA_S3TC_DXT1_Format)return j.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===RGBA_S3TC_DXT3_Format)return j.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===RGBA_S3TC_DXT5_Format)return j.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(b===RGB_PVRTC_4BPPV1_Format||b===RGB_PVRTC_2BPPV1_Format||b===RGBA_PVRTC_4BPPV1_Format||b===RGBA_PVRTC_2BPPV1_Format)if(j=a.get("WEBGL_compressed_texture_pvrtc"),j!==null){if(b===RGB_PVRTC_4BPPV1_Format)return j.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===RGB_PVRTC_2BPPV1_Format)return j.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===RGBA_PVRTC_4BPPV1_Format)return j.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===RGBA_PVRTC_2BPPV1_Format)return j.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(b===RGB_ETC1_Format)return j=a.get("WEBGL_compressed_texture_etc1"),j!==null?j.COMPRESSED_RGB_ETC1_WEBGL:null;if(b===RGB_ETC2_Format||b===RGBA_ETC2_EAC_Format)if(j=a.get("WEBGL_compressed_texture_etc"),j!==null){if(b===RGB_ETC2_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ETC2:j.COMPRESSED_RGB8_ETC2;if(b===RGBA_ETC2_EAC_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:j.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(b===RGBA_ASTC_4x4_Format||b===RGBA_ASTC_5x4_Format||b===RGBA_ASTC_5x5_Format||b===RGBA_ASTC_6x5_Format||b===RGBA_ASTC_6x6_Format||b===RGBA_ASTC_8x5_Format||b===RGBA_ASTC_8x6_Format||b===RGBA_ASTC_8x8_Format||b===RGBA_ASTC_10x5_Format||b===RGBA_ASTC_10x6_Format||b===RGBA_ASTC_10x8_Format||b===RGBA_ASTC_10x10_Format||b===RGBA_ASTC_12x10_Format||b===RGBA_ASTC_12x12_Format)if(j=a.get("WEBGL_compressed_texture_astc"),j!==null){if(b===RGBA_ASTC_4x4_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:j.COMPRESSED_RGBA_ASTC_4x4_KHR;if(b===RGBA_ASTC_5x4_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:j.COMPRESSED_RGBA_ASTC_5x4_KHR;if(b===RGBA_ASTC_5x5_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:j.COMPRESSED_RGBA_ASTC_5x5_KHR;if(b===RGBA_ASTC_6x5_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:j.COMPRESSED_RGBA_ASTC_6x5_KHR;if(b===RGBA_ASTC_6x6_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:j.COMPRESSED_RGBA_ASTC_6x6_KHR;if(b===RGBA_ASTC_8x5_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:j.COMPRESSED_RGBA_ASTC_8x5_KHR;if(b===RGBA_ASTC_8x6_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:j.COMPRESSED_RGBA_ASTC_8x6_KHR;if(b===RGBA_ASTC_8x8_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:j.COMPRESSED_RGBA_ASTC_8x8_KHR;if(b===RGBA_ASTC_10x5_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:j.COMPRESSED_RGBA_ASTC_10x5_KHR;if(b===RGBA_ASTC_10x6_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:j.COMPRESSED_RGBA_ASTC_10x6_KHR;if(b===RGBA_ASTC_10x8_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:j.COMPRESSED_RGBA_ASTC_10x8_KHR;if(b===RGBA_ASTC_10x10_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:j.COMPRESSED_RGBA_ASTC_10x10_KHR;if(b===RGBA_ASTC_12x10_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:j.COMPRESSED_RGBA_ASTC_12x10_KHR;if(b===RGBA_ASTC_12x12_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:j.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(b===RGBA_BPTC_Format)if(j=a.get("EXT_texture_compression_bptc"),j!==null){if(b===RGBA_BPTC_Format)return $===SRGBColorSpace$1?j.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:j.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(b===RED_RGTC1_Format||b===SIGNED_RED_RGTC1_Format||b===RED_GREEN_RGTC2_Format||b===SIGNED_RED_GREEN_RGTC2_Format)if(j=a.get("EXT_texture_compression_rgtc"),j!==null){if(b===RGBA_BPTC_Format)return j.COMPRESSED_RED_RGTC1_EXT;if(b===SIGNED_RED_RGTC1_Format)return j.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(b===RED_GREEN_RGTC2_Format)return j.COMPRESSED_RED_GREEN_RGTC2_EXT;if(b===SIGNED_RED_GREEN_RGTC2_Format)return j.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return b===UnsignedInt248Type?c?s.UNSIGNED_INT_24_8:(j=a.get("WEBGL_depth_texture"),j!==null?j.UNSIGNED_INT_24_8_WEBGL:null):s[b]!==void 0?s[b]:null}return{convert:d}}class ArrayCamera extends PerspectiveCamera{constructor(a=[]){super(),this.isArrayCamera=!0,this.cameras=a}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(a){return this._targetRay!==null&&this._targetRay.dispatchEvent(a),this._grip!==null&&this._grip.dispatchEvent(a),this._hand!==null&&this._hand.dispatchEvent(a),this}connect(a){if(a&&a.hand){const o=this._hand;if(o)for(const c of a.hand.values())this._getHandJoint(o,c)}return this.dispatchEvent({type:"connected",data:a}),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(a,o,c){let d=null,b=null,$=null;const j=this._targetRay,_e=this._grip,et=this._hand;if(a&&o.session.visibilityState!=="visible-blurred"){if(et&&a.hand){$=!0;for(const ct of a.hand.values()){const st=o.getJointPose(ct,c),ot=this._getHandJoint(et,ct);st!==null&&(ot.matrix.fromArray(st.transform.matrix),ot.matrix.decompose(ot.position,ot.rotation,ot.scale),ot.matrixWorldNeedsUpdate=!0,ot.jointRadius=st.radius),ot.visible=st!==null}const tt=et.joints["index-finger-tip"],rt=et.joints["thumb-tip"],nt=tt.position.distanceTo(rt.position),it=.02,at=.005;et.inputState.pinching&&nt>it+at?(et.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!et.inputState.pinching&&nt<=it-at&&(et.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else _e!==null&&a.gripSpace&&(b=o.getPose(a.gripSpace,c),b!==null&&(_e.matrix.fromArray(b.transform.matrix),_e.matrix.decompose(_e.position,_e.rotation,_e.scale),_e.matrixWorldNeedsUpdate=!0,b.linearVelocity?(_e.hasLinearVelocity=!0,_e.linearVelocity.copy(b.linearVelocity)):_e.hasLinearVelocity=!1,b.angularVelocity?(_e.hasAngularVelocity=!0,_e.angularVelocity.copy(b.angularVelocity)):_e.hasAngularVelocity=!1));j!==null&&(d=o.getPose(a.targetRaySpace,c),d===null&&b!==null&&(d=b),d!==null&&(j.matrix.fromArray(d.transform.matrix),j.matrix.decompose(j.position,j.rotation,j.scale),j.matrixWorldNeedsUpdate=!0,d.linearVelocity?(j.hasLinearVelocity=!0,j.linearVelocity.copy(d.linearVelocity)):j.hasLinearVelocity=!1,d.angularVelocity?(j.hasAngularVelocity=!0,j.angularVelocity.copy(d.angularVelocity)):j.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return j!==null&&(j.visible=d!==null),_e!==null&&(_e.visible=b!==null),et!==null&&(et.visible=$!==null),this}_getHandJoint(a,o){if(a.joints[o.jointName]===void 0){const c=new Group;c.matrixAutoUpdate=!1,c.visible=!1,a.joints[o.jointName]=c,a.add(c)}return a.joints[o.jointName]}}class DepthTexture extends Texture$1{constructor(a,o,c,d,b,$,j,_e,et,tt){if(tt=tt!==void 0?tt:DepthFormat,tt!==DepthFormat&&tt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");c===void 0&&tt===DepthFormat&&(c=UnsignedIntType),c===void 0&&tt===DepthStencilFormat&&(c=UnsignedInt248Type),super(null,d,b,$,j,_e,tt,c,et),this.isDepthTexture=!0,this.image={width:a,height:o},this.magFilter=j!==void 0?j:NearestFilter,this.minFilter=_e!==void 0?_e:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(a){return super.copy(a),this.compareFunction=a.compareFunction,this}toJSON(a){const o=super.toJSON(a);return this.compareFunction!==null&&(o.compareFunction=this.compareFunction),o}}class WebXRManager extends EventDispatcher$1{constructor(a,o){super();const c=this;let d=null,b=1,$=null,j="local-floor",_e=1,et=null,tt=null,rt=null,nt=null,it=null,at=null;const ct=o.getContextAttributes();let st=null,ot=null;const ht=[],dt=[];let ft=null;const mt=new PerspectiveCamera;mt.layers.enable(1),mt.viewport=new Vector4;const gt=new PerspectiveCamera;gt.layers.enable(2),gt.viewport=new Vector4;const vt=[mt,gt],yt=new ArrayCamera;yt.layers.enable(1),yt.layers.enable(2);let Et=null,St=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(Lt){ft=Lt},this.getController=function(Lt){let Jt=ht[Lt];return Jt===void 0&&(Jt=new WebXRController,ht[Lt]=Jt),Jt.getTargetRaySpace()},this.getControllerGrip=function(Lt){let Jt=ht[Lt];return Jt===void 0&&(Jt=new WebXRController,ht[Lt]=Jt),Jt.getGripSpace()},this.getHand=function(Lt){let Jt=ht[Lt];return Jt===void 0&&(Jt=new WebXRController,ht[Lt]=Jt),Jt.getHandSpace()};function Ct(Lt){const Jt=dt.indexOf(Lt.inputSource);if(Jt===-1)return;const Qt=ht[Jt];Qt!==void 0&&(Qt.update(Lt.inputSource,Lt.frame,et||$),Qt.dispatchEvent({type:Lt.type,data:Lt.inputSource}))}function wt(){d.removeEventListener("select",Ct),d.removeEventListener("selectstart",Ct),d.removeEventListener("selectend",Ct),d.removeEventListener("squeeze",Ct),d.removeEventListener("squeezestart",Ct),d.removeEventListener("squeezeend",Ct),d.removeEventListener("end",wt),d.removeEventListener("inputsourceschange",_t);for(let Lt=0;Lt<ht.length;Lt++){const Jt=dt[Lt];Jt!==null&&(dt[Lt]=null,ht[Lt].disconnect(Jt))}Et=null,St=null,a.setRenderTarget(st),it=null,nt=null,rt=null,d=null,ot=null,$t.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Lt){b=Lt,c.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Lt){j=Lt,c.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return et||$},this.setReferenceSpace=function(Lt){et=Lt},this.getBaseLayer=function(){return nt!==null?nt:it},this.getBinding=function(){return rt},this.getFrame=function(){return at},this.getSession=function(){return d},this.setSession=async function(Lt){if(d=Lt,d!==null){if(st=a.getRenderTarget(),d.addEventListener("select",Ct),d.addEventListener("selectstart",Ct),d.addEventListener("selectend",Ct),d.addEventListener("squeeze",Ct),d.addEventListener("squeezestart",Ct),d.addEventListener("squeezeend",Ct),d.addEventListener("end",wt),d.addEventListener("inputsourceschange",_t),ct.xrCompatible!==!0&&await o.makeXRCompatible(),d.renderState.layers===void 0||a.capabilities.isWebGL2===!1){const Jt={antialias:d.renderState.layers===void 0?ct.antialias:!0,alpha:!0,depth:ct.depth,stencil:ct.stencil,framebufferScaleFactor:b};it=new XRWebGLLayer(d,o,Jt),d.updateRenderState({baseLayer:it}),ot=new WebGLRenderTarget(it.framebufferWidth,it.framebufferHeight,{format:RGBAFormat$1,type:UnsignedByteType$1,colorSpace:a.outputColorSpace,stencilBuffer:ct.stencil})}else{let Jt=null,Qt=null,or=null;ct.depth&&(or=ct.stencil?o.DEPTH24_STENCIL8:o.DEPTH_COMPONENT24,Jt=ct.stencil?DepthStencilFormat:DepthFormat,Qt=ct.stencil?UnsignedInt248Type:UnsignedIntType);const er={colorFormat:o.RGBA8,depthFormat:or,scaleFactor:b};rt=new XRWebGLBinding(d,o),nt=rt.createProjectionLayer(er),d.updateRenderState({layers:[nt]}),ot=new WebGLRenderTarget(nt.textureWidth,nt.textureHeight,{format:RGBAFormat$1,type:UnsignedByteType$1,depthTexture:new DepthTexture(nt.textureWidth,nt.textureHeight,Qt,void 0,void 0,void 0,void 0,void 0,void 0,Jt),stencilBuffer:ct.stencil,colorSpace:a.outputColorSpace,samples:ct.antialias?4:0});const sr=a.properties.get(ot);sr.__ignoreDepthValues=nt.ignoreDepthValues}ot.isXRRenderTarget=!0,this.setFoveation(_e),et=null,$=await d.requestReferenceSpace(j),$t.setContext(d),$t.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(d!==null)return d.environmentBlendMode};function _t(Lt){for(let Jt=0;Jt<Lt.removed.length;Jt++){const Qt=Lt.removed[Jt],or=dt.indexOf(Qt);or>=0&&(dt[or]=null,ht[or].disconnect(Qt))}for(let Jt=0;Jt<Lt.added.length;Jt++){const Qt=Lt.added[Jt];let or=dt.indexOf(Qt);if(or===-1){for(let sr=0;sr<ht.length;sr++)if(sr>=dt.length){dt.push(Qt),or=sr;break}else if(dt[sr]===null){dt[sr]=Qt,or=sr;break}if(or===-1)break}const er=ht[or];er&&er.connect(Qt)}}const Tt=new Vector3,Mt=new Vector3;function Bt(Lt,Jt,Qt){Tt.setFromMatrixPosition(Jt.matrixWorld),Mt.setFromMatrixPosition(Qt.matrixWorld);const or=Tt.distanceTo(Mt),er=Jt.projectionMatrix.elements,sr=Qt.projectionMatrix.elements,Ar=er[14]/(er[10]-1),Er=er[14]/(er[10]+1),Tr=(er[9]+1)/er[5],ur=(er[9]-1)/er[5],kt=(er[8]-1)/er[0],Xt=(sr[8]+1)/sr[0],ar=Ar*kt,yr=Ar*Xt,mr=or/(-kt+Xt),Br=mr*-kt;Jt.matrixWorld.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.translateX(Br),Lt.translateZ(mr),Lt.matrixWorld.compose(Lt.position,Lt.quaternion,Lt.scale),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert();const _r=Ar+mr,br=Er+mr,Pr=ar-Br,Or=yr+(or-Br),Wr=Tr*Er/br*_r,Ot=ur*Er/br*_r;Lt.projectionMatrix.makePerspective(Pr,Or,Wr,Ot,_r,br),Lt.projectionMatrixInverse.copy(Lt.projectionMatrix).invert()}function Rt(Lt,Jt){Jt===null?Lt.matrixWorld.copy(Lt.matrix):Lt.matrixWorld.multiplyMatrices(Jt.matrixWorld,Lt.matrix),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert()}this.updateCameraXR=function(Lt){if(d===null)return Lt;ft&&(Lt=ft),yt.near=gt.near=mt.near=Lt.near,yt.far=gt.far=mt.far=Lt.far,(Et!==yt.near||St!==yt.far)&&(d.updateRenderState({depthNear:yt.near,depthFar:yt.far}),Et=yt.near,St=yt.far);const Jt=Lt.parent,Qt=yt.cameras;Rt(yt,Jt);for(let or=0;or<Qt.length;or++)Rt(Qt[or],Jt);return Qt.length===2?Bt(yt,mt,gt):yt.projectionMatrix.copy(mt.projectionMatrix),ft&&bt(yt,Jt),yt};function bt(Lt,Jt){const Qt=ft;Jt===null?Qt.matrix.copy(Lt.matrixWorld):(Qt.matrix.copy(Jt.matrixWorld),Qt.matrix.invert(),Qt.matrix.multiply(Lt.matrixWorld)),Qt.matrix.decompose(Qt.position,Qt.quaternion,Qt.scale),Qt.updateMatrixWorld(!0);const or=Qt.children;for(let er=0,sr=or.length;er<sr;er++)or[er].updateMatrixWorld(!0);Qt.projectionMatrix.copy(Lt.projectionMatrix),Qt.projectionMatrixInverse.copy(Lt.projectionMatrixInverse),Qt.isPerspectiveCamera&&(Qt.fov=RAD2DEG*2*Math.atan(1/Qt.projectionMatrix.elements[5]),Qt.zoom=1)}this.getFoveation=function(){if(!(nt===null&&it===null))return _e},this.setFoveation=function(Lt){_e=Lt,nt!==null&&(nt.fixedFoveation=Lt),it!==null&&it.fixedFoveation!==void 0&&(it.fixedFoveation=Lt)};let Pt=null;function Dt(Lt,Jt){if(tt=Jt.getViewerPose(et||$),at=Jt,tt!==null){const Qt=tt.views;it!==null&&(a.setRenderTargetFramebuffer(ot,it.framebuffer),a.setRenderTarget(ot));let or=!1;Qt.length!==yt.cameras.length&&(yt.cameras.length=0,or=!0);for(let er=0;er<Qt.length;er++){const sr=Qt[er];let Ar=null;if(it!==null)Ar=it.getViewport(sr);else{const Tr=rt.getViewSubImage(nt,sr);Ar=Tr.viewport,er===0&&(a.setRenderTargetTextures(ot,Tr.colorTexture,nt.ignoreDepthValues?void 0:Tr.depthStencilTexture),a.setRenderTarget(ot))}let Er=vt[er];Er===void 0&&(Er=new PerspectiveCamera,Er.layers.enable(er),Er.viewport=new Vector4,vt[er]=Er),Er.matrix.fromArray(sr.transform.matrix),Er.matrix.decompose(Er.position,Er.quaternion,Er.scale),Er.projectionMatrix.fromArray(sr.projectionMatrix),Er.projectionMatrixInverse.copy(Er.projectionMatrix).invert(),Er.viewport.set(Ar.x,Ar.y,Ar.width,Ar.height),er===0&&(yt.matrix.copy(Er.matrix),yt.matrix.decompose(yt.position,yt.quaternion,yt.scale)),or===!0&&yt.cameras.push(Er)}}for(let Qt=0;Qt<ht.length;Qt++){const or=dt[Qt],er=ht[Qt];or!==null&&er!==void 0&&er.update(or,Jt,et||$)}Pt&&Pt(Lt,Jt),Jt.detectedPlanes&&c.dispatchEvent({type:"planesdetected",data:Jt}),at=null}const $t=new WebGLAnimation;$t.setAnimationLoop(Dt),this.setAnimationLoop=function(Lt){Pt=Lt},this.dispose=function(){}}}function WebGLMaterials(s,a){function o(st,ot){st.matrixAutoUpdate===!0&&st.updateMatrix(),ot.value.copy(st.matrix)}function c(st,ot){ot.color.getRGB(st.fogColor.value,getUnlitUniformColorSpace(s)),ot.isFog?(st.fogNear.value=ot.near,st.fogFar.value=ot.far):ot.isFogExp2&&(st.fogDensity.value=ot.density)}function d(st,ot,ht,dt,ft){ot.isMeshBasicMaterial||ot.isMeshLambertMaterial?b(st,ot):ot.isMeshToonMaterial?(b(st,ot),rt(st,ot)):ot.isMeshPhongMaterial?(b(st,ot),tt(st,ot)):ot.isMeshStandardMaterial?(b(st,ot),nt(st,ot),ot.isMeshPhysicalMaterial&&it(st,ot,ft)):ot.isMeshMatcapMaterial?(b(st,ot),at(st,ot)):ot.isMeshDepthMaterial?b(st,ot):ot.isMeshDistanceMaterial?(b(st,ot),ct(st,ot)):ot.isMeshNormalMaterial?b(st,ot):ot.isLineBasicMaterial?($(st,ot),ot.isLineDashedMaterial&&j(st,ot)):ot.isPointsMaterial?_e(st,ot,ht,dt):ot.isSpriteMaterial?et(st,ot):ot.isShadowMaterial?(st.color.value.copy(ot.color),st.opacity.value=ot.opacity):ot.isShaderMaterial&&(ot.uniformsNeedUpdate=!1)}function b(st,ot){st.opacity.value=ot.opacity,ot.color&&st.diffuse.value.copy(ot.color),ot.emissive&&st.emissive.value.copy(ot.emissive).multiplyScalar(ot.emissiveIntensity),ot.map&&(st.map.value=ot.map,o(ot.map,st.mapTransform)),ot.alphaMap&&(st.alphaMap.value=ot.alphaMap,o(ot.alphaMap,st.alphaMapTransform)),ot.bumpMap&&(st.bumpMap.value=ot.bumpMap,o(ot.bumpMap,st.bumpMapTransform),st.bumpScale.value=ot.bumpScale,ot.side===BackSide&&(st.bumpScale.value*=-1)),ot.normalMap&&(st.normalMap.value=ot.normalMap,o(ot.normalMap,st.normalMapTransform),st.normalScale.value.copy(ot.normalScale),ot.side===BackSide&&st.normalScale.value.negate()),ot.displacementMap&&(st.displacementMap.value=ot.displacementMap,o(ot.displacementMap,st.displacementMapTransform),st.displacementScale.value=ot.displacementScale,st.displacementBias.value=ot.displacementBias),ot.emissiveMap&&(st.emissiveMap.value=ot.emissiveMap,o(ot.emissiveMap,st.emissiveMapTransform)),ot.specularMap&&(st.specularMap.value=ot.specularMap,o(ot.specularMap,st.specularMapTransform)),ot.alphaTest>0&&(st.alphaTest.value=ot.alphaTest);const ht=a.get(ot).envMap;if(ht&&(st.envMap.value=ht,st.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1,st.reflectivity.value=ot.reflectivity,st.ior.value=ot.ior,st.refractionRatio.value=ot.refractionRatio),ot.lightMap){st.lightMap.value=ot.lightMap;const dt=s.useLegacyLights===!0?Math.PI:1;st.lightMapIntensity.value=ot.lightMapIntensity*dt,o(ot.lightMap,st.lightMapTransform)}ot.aoMap&&(st.aoMap.value=ot.aoMap,st.aoMapIntensity.value=ot.aoMapIntensity,o(ot.aoMap,st.aoMapTransform))}function $(st,ot){st.diffuse.value.copy(ot.color),st.opacity.value=ot.opacity,ot.map&&(st.map.value=ot.map,o(ot.map,st.mapTransform))}function j(st,ot){st.dashSize.value=ot.dashSize,st.totalSize.value=ot.dashSize+ot.gapSize,st.scale.value=ot.scale}function _e(st,ot,ht,dt){st.diffuse.value.copy(ot.color),st.opacity.value=ot.opacity,st.size.value=ot.size*ht,st.scale.value=dt*.5,ot.map&&(st.map.value=ot.map,o(ot.map,st.uvTransform)),ot.alphaMap&&(st.alphaMap.value=ot.alphaMap,o(ot.alphaMap,st.alphaMapTransform)),ot.alphaTest>0&&(st.alphaTest.value=ot.alphaTest)}function et(st,ot){st.diffuse.value.copy(ot.color),st.opacity.value=ot.opacity,st.rotation.value=ot.rotation,ot.map&&(st.map.value=ot.map,o(ot.map,st.mapTransform)),ot.alphaMap&&(st.alphaMap.value=ot.alphaMap,o(ot.alphaMap,st.alphaMapTransform)),ot.alphaTest>0&&(st.alphaTest.value=ot.alphaTest)}function tt(st,ot){st.specular.value.copy(ot.specular),st.shininess.value=Math.max(ot.shininess,1e-4)}function rt(st,ot){ot.gradientMap&&(st.gradientMap.value=ot.gradientMap)}function nt(st,ot){st.metalness.value=ot.metalness,ot.metalnessMap&&(st.metalnessMap.value=ot.metalnessMap,o(ot.metalnessMap,st.metalnessMapTransform)),st.roughness.value=ot.roughness,ot.roughnessMap&&(st.roughnessMap.value=ot.roughnessMap,o(ot.roughnessMap,st.roughnessMapTransform)),a.get(ot).envMap&&(st.envMapIntensity.value=ot.envMapIntensity)}function it(st,ot,ht){st.ior.value=ot.ior,ot.sheen>0&&(st.sheenColor.value.copy(ot.sheenColor).multiplyScalar(ot.sheen),st.sheenRoughness.value=ot.sheenRoughness,ot.sheenColorMap&&(st.sheenColorMap.value=ot.sheenColorMap,o(ot.sheenColorMap,st.sheenColorMapTransform)),ot.sheenRoughnessMap&&(st.sheenRoughnessMap.value=ot.sheenRoughnessMap,o(ot.sheenRoughnessMap,st.sheenRoughnessMapTransform))),ot.clearcoat>0&&(st.clearcoat.value=ot.clearcoat,st.clearcoatRoughness.value=ot.clearcoatRoughness,ot.clearcoatMap&&(st.clearcoatMap.value=ot.clearcoatMap,o(ot.clearcoatMap,st.clearcoatMapTransform)),ot.clearcoatRoughnessMap&&(st.clearcoatRoughnessMap.value=ot.clearcoatRoughnessMap,o(ot.clearcoatRoughnessMap,st.clearcoatRoughnessMapTransform)),ot.clearcoatNormalMap&&(st.clearcoatNormalMap.value=ot.clearcoatNormalMap,o(ot.clearcoatNormalMap,st.clearcoatNormalMapTransform),st.clearcoatNormalScale.value.copy(ot.clearcoatNormalScale),ot.side===BackSide&&st.clearcoatNormalScale.value.negate())),ot.iridescence>0&&(st.iridescence.value=ot.iridescence,st.iridescenceIOR.value=ot.iridescenceIOR,st.iridescenceThicknessMinimum.value=ot.iridescenceThicknessRange[0],st.iridescenceThicknessMaximum.value=ot.iridescenceThicknessRange[1],ot.iridescenceMap&&(st.iridescenceMap.value=ot.iridescenceMap,o(ot.iridescenceMap,st.iridescenceMapTransform)),ot.iridescenceThicknessMap&&(st.iridescenceThicknessMap.value=ot.iridescenceThicknessMap,o(ot.iridescenceThicknessMap,st.iridescenceThicknessMapTransform))),ot.transmission>0&&(st.transmission.value=ot.transmission,st.transmissionSamplerMap.value=ht.texture,st.transmissionSamplerSize.value.set(ht.width,ht.height),ot.transmissionMap&&(st.transmissionMap.value=ot.transmissionMap,o(ot.transmissionMap,st.transmissionMapTransform)),st.thickness.value=ot.thickness,ot.thicknessMap&&(st.thicknessMap.value=ot.thicknessMap,o(ot.thicknessMap,st.thicknessMapTransform)),st.attenuationDistance.value=ot.attenuationDistance,st.attenuationColor.value.copy(ot.attenuationColor)),ot.anisotropy>0&&(st.anisotropyVector.value.set(ot.anisotropy*Math.cos(ot.anisotropyRotation),ot.anisotropy*Math.sin(ot.anisotropyRotation)),ot.anisotropyMap&&(st.anisotropyMap.value=ot.anisotropyMap,o(ot.anisotropyMap,st.anisotropyMapTransform))),st.specularIntensity.value=ot.specularIntensity,st.specularColor.value.copy(ot.specularColor),ot.specularColorMap&&(st.specularColorMap.value=ot.specularColorMap,o(ot.specularColorMap,st.specularColorMapTransform)),ot.specularIntensityMap&&(st.specularIntensityMap.value=ot.specularIntensityMap,o(ot.specularIntensityMap,st.specularIntensityMapTransform))}function at(st,ot){ot.matcap&&(st.matcap.value=ot.matcap)}function ct(st,ot){const ht=a.get(ot).light;st.referencePosition.value.setFromMatrixPosition(ht.matrixWorld),st.nearDistance.value=ht.shadow.camera.near,st.farDistance.value=ht.shadow.camera.far}return{refreshFogUniforms:c,refreshMaterialUniforms:d}}function WebGLUniformsGroups(s,a,o,c){let d={},b={},$=[];const j=o.isWebGL2?s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS):0;function _e(ht,dt){const ft=dt.program;c.uniformBlockBinding(ht,ft)}function et(ht,dt){let ft=d[ht.id];ft===void 0&&(at(ht),ft=tt(ht),d[ht.id]=ft,ht.addEventListener("dispose",st));const mt=dt.program;c.updateUBOMapping(ht,mt);const gt=a.render.frame;b[ht.id]!==gt&&(nt(ht),b[ht.id]=gt)}function tt(ht){const dt=rt();ht.__bindingPointIndex=dt;const ft=s.createBuffer(),mt=ht.__size,gt=ht.usage;return s.bindBuffer(s.UNIFORM_BUFFER,ft),s.bufferData(s.UNIFORM_BUFFER,mt,gt),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,dt,ft),ft}function rt(){for(let ht=0;ht<j;ht++)if($.indexOf(ht)===-1)return $.push(ht),ht;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function nt(ht){const dt=d[ht.id],ft=ht.uniforms,mt=ht.__cache;s.bindBuffer(s.UNIFORM_BUFFER,dt);for(let gt=0,vt=ft.length;gt<vt;gt++){const yt=ft[gt];if(it(yt,gt,mt)===!0){const Et=yt.__offset,St=Array.isArray(yt.value)?yt.value:[yt.value];let Ct=0;for(let wt=0;wt<St.length;wt++){const _t=St[wt],Tt=ct(_t);typeof _t=="number"?(yt.__data[0]=_t,s.bufferSubData(s.UNIFORM_BUFFER,Et+Ct,yt.__data)):_t.isMatrix3?(yt.__data[0]=_t.elements[0],yt.__data[1]=_t.elements[1],yt.__data[2]=_t.elements[2],yt.__data[3]=_t.elements[0],yt.__data[4]=_t.elements[3],yt.__data[5]=_t.elements[4],yt.__data[6]=_t.elements[5],yt.__data[7]=_t.elements[0],yt.__data[8]=_t.elements[6],yt.__data[9]=_t.elements[7],yt.__data[10]=_t.elements[8],yt.__data[11]=_t.elements[0]):(_t.toArray(yt.__data,Ct),Ct+=Tt.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,Et,yt.__data)}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function it(ht,dt,ft){const mt=ht.value;if(ft[dt]===void 0){if(typeof mt=="number")ft[dt]=mt;else{const gt=Array.isArray(mt)?mt:[mt],vt=[];for(let yt=0;yt<gt.length;yt++)vt.push(gt[yt].clone());ft[dt]=vt}return!0}else if(typeof mt=="number"){if(ft[dt]!==mt)return ft[dt]=mt,!0}else{const gt=Array.isArray(ft[dt])?ft[dt]:[ft[dt]],vt=Array.isArray(mt)?mt:[mt];for(let yt=0;yt<gt.length;yt++){const Et=gt[yt];if(Et.equals(vt[yt])===!1)return Et.copy(vt[yt]),!0}}return!1}function at(ht){const dt=ht.uniforms;let ft=0;const mt=16;let gt=0;for(let vt=0,yt=dt.length;vt<yt;vt++){const Et=dt[vt],St={boundary:0,storage:0},Ct=Array.isArray(Et.value)?Et.value:[Et.value];for(let wt=0,_t=Ct.length;wt<_t;wt++){const Tt=Ct[wt],Mt=ct(Tt);St.boundary+=Mt.boundary,St.storage+=Mt.storage}if(Et.__data=new Float32Array(St.storage/Float32Array.BYTES_PER_ELEMENT),Et.__offset=ft,vt>0){gt=ft%mt;const wt=mt-gt;gt!==0&&wt-St.boundary<0&&(ft+=mt-gt,Et.__offset=ft)}ft+=St.storage}return gt=ft%mt,gt>0&&(ft+=mt-gt),ht.__size=ft,ht.__cache={},this}function ct(ht){const dt={boundary:0,storage:0};return typeof ht=="number"?(dt.boundary=4,dt.storage=4):ht.isVector2?(dt.boundary=8,dt.storage=8):ht.isVector3||ht.isColor?(dt.boundary=16,dt.storage=12):ht.isVector4?(dt.boundary=16,dt.storage=16):ht.isMatrix3?(dt.boundary=48,dt.storage=48):ht.isMatrix4?(dt.boundary=64,dt.storage=64):ht.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ht),dt}function st(ht){const dt=ht.target;dt.removeEventListener("dispose",st);const ft=$.indexOf(dt.__bindingPointIndex);$.splice(ft,1),s.deleteBuffer(d[dt.id]),delete d[dt.id],delete b[dt.id]}function ot(){for(const ht in d)s.deleteBuffer(d[ht]);$=[],d={},b={}}return{bind:_e,update:et,dispose:ot}}function createCanvasElement(){const s=createElementNS$1("canvas");return s.style.display="block",s}class WebGLRenderer{constructor(a={}){const{canvas:o=createCanvasElement(),context:c=null,depth:d=!0,stencil:b=!0,alpha:$=!1,antialias:j=!1,premultipliedAlpha:_e=!0,preserveDrawingBuffer:et=!1,powerPreference:tt="default",failIfMajorPerformanceCaveat:rt=!1}=a;this.isWebGLRenderer=!0;let nt;c!==null?nt=c.getContextAttributes().alpha:nt=$;const it=new Uint32Array(4),at=new Int32Array(4);let ct=null,st=null;const ot=[],ht=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=SRGBColorSpace$1,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const dt=this;let ft=!1,mt=0,gt=0,vt=null,yt=-1,Et=null;const St=new Vector4,Ct=new Vector4;let wt=null;const _t=new Color(0);let Tt=0,Mt=o.width,Bt=o.height,Rt=1,bt=null,Pt=null;const Dt=new Vector4(0,0,Mt,Bt),$t=new Vector4(0,0,Mt,Bt);let Lt=!1;const Jt=new Frustum;let Qt=!1,or=!1,er=null;const sr=new Matrix4,Ar=new Vector2$1,Er=new Vector3,Tr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ur(){return vt===null?Rt:1}let kt=c;function Xt(Nt,Yt){for(let dr=0;dr<Nt.length;dr++){const Zt=Nt[dr],gr=o.getContext(Zt,Yt);if(gr!==null)return gr}return null}try{const Nt={alpha:!0,depth:d,stencil:b,antialias:j,premultipliedAlpha:_e,preserveDrawingBuffer:et,powerPreference:tt,failIfMajorPerformanceCaveat:rt};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${REVISION}`),o.addEventListener("webglcontextlost",pr,!1),o.addEventListener("webglcontextrestored",Wt,!1),o.addEventListener("webglcontextcreationerror",nr,!1),kt===null){const Yt=["webgl2","webgl","experimental-webgl"];if(dt.isWebGL1Renderer===!0&&Yt.shift(),kt=Xt(Yt,Nt),kt===null)throw Xt(Yt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}kt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),kt.getShaderPrecisionFormat===void 0&&(kt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Nt){throw console.error("THREE.WebGLRenderer: "+Nt.message),Nt}let ar,yr,mr,Br,_r,br,Pr,Or,Wr,Ot,Ft,ir,Sr,xr,Ir,Fr,Mr,cr,zt,hr,Vt,Ht,Kt,vr;function wr(){ar=new WebGLExtensions(kt),yr=new WebGLCapabilities(kt,ar,a),ar.init(yr),Ht=new WebGLUtils(kt,ar,yr),mr=new WebGLState(kt,ar,yr),Br=new WebGLInfo(kt),_r=new WebGLProperties,br=new WebGLTextures(kt,ar,mr,_r,yr,Ht,Br),Pr=new WebGLCubeMaps(dt),Or=new WebGLCubeUVMaps(dt),Wr=new WebGLAttributes(kt,yr),Kt=new WebGLBindingStates(kt,ar,Wr,yr),Ot=new WebGLGeometries(kt,Wr,Br,Kt),Ft=new WebGLObjects(kt,Ot,Wr,Br),zt=new WebGLMorphtargets(kt,yr,br),Fr=new WebGLClipping(_r),ir=new WebGLPrograms(dt,Pr,Or,ar,yr,Kt,Fr),Sr=new WebGLMaterials(dt,_r),xr=new WebGLRenderLists,Ir=new WebGLRenderStates(ar,yr),cr=new WebGLBackground(dt,Pr,Or,mr,Ft,nt,_e),Mr=new WebGLShadowMap(dt,Ft,yr),vr=new WebGLUniformsGroups(kt,Br,yr,mr),hr=new WebGLBufferRenderer(kt,ar,Br,yr),Vt=new WebGLIndexedBufferRenderer(kt,ar,Br,yr),Br.programs=ir.programs,dt.capabilities=yr,dt.extensions=ar,dt.properties=_r,dt.renderLists=xr,dt.shadowMap=Mr,dt.state=mr,dt.info=Br}wr();const Gt=new WebXRManager(dt,kt);this.xr=Gt,this.getContext=function(){return kt},this.getContextAttributes=function(){return kt.getContextAttributes()},this.forceContextLoss=function(){const Nt=ar.get("WEBGL_lose_context");Nt&&Nt.loseContext()},this.forceContextRestore=function(){const Nt=ar.get("WEBGL_lose_context");Nt&&Nt.restoreContext()},this.getPixelRatio=function(){return Rt},this.setPixelRatio=function(Nt){Nt!==void 0&&(Rt=Nt,this.setSize(Mt,Bt,!1))},this.getSize=function(Nt){return Nt.set(Mt,Bt)},this.setSize=function(Nt,Yt,dr=!0){if(Gt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Mt=Nt,Bt=Yt,o.width=Math.floor(Nt*Rt),o.height=Math.floor(Yt*Rt),dr===!0&&(o.style.width=Nt+"px",o.style.height=Yt+"px"),this.setViewport(0,0,Nt,Yt)},this.getDrawingBufferSize=function(Nt){return Nt.set(Mt*Rt,Bt*Rt).floor()},this.setDrawingBufferSize=function(Nt,Yt,dr){Mt=Nt,Bt=Yt,Rt=dr,o.width=Math.floor(Nt*dr),o.height=Math.floor(Yt*dr),this.setViewport(0,0,Nt,Yt)},this.getCurrentViewport=function(Nt){return Nt.copy(St)},this.getViewport=function(Nt){return Nt.copy(Dt)},this.setViewport=function(Nt,Yt,dr,Zt){Nt.isVector4?Dt.set(Nt.x,Nt.y,Nt.z,Nt.w):Dt.set(Nt,Yt,dr,Zt),mr.viewport(St.copy(Dt).multiplyScalar(Rt).floor())},this.getScissor=function(Nt){return Nt.copy($t)},this.setScissor=function(Nt,Yt,dr,Zt){Nt.isVector4?$t.set(Nt.x,Nt.y,Nt.z,Nt.w):$t.set(Nt,Yt,dr,Zt),mr.scissor(Ct.copy($t).multiplyScalar(Rt).floor())},this.getScissorTest=function(){return Lt},this.setScissorTest=function(Nt){mr.setScissorTest(Lt=Nt)},this.setOpaqueSort=function(Nt){bt=Nt},this.setTransparentSort=function(Nt){Pt=Nt},this.getClearColor=function(Nt){return Nt.copy(cr.getClearColor())},this.setClearColor=function(){cr.setClearColor.apply(cr,arguments)},this.getClearAlpha=function(){return cr.getClearAlpha()},this.setClearAlpha=function(){cr.setClearAlpha.apply(cr,arguments)},this.clear=function(Nt=!0,Yt=!0,dr=!0){let Zt=0;if(Nt){let gr=!1;if(vt!==null){const Nr=vt.texture.format;gr=Nr===RGBAIntegerFormat||Nr===RGIntegerFormat||Nr===RedIntegerFormat}if(gr){const Nr=vt.texture.type,Hr=Nr===UnsignedByteType$1||Nr===UnsignedIntType||Nr===UnsignedShortType||Nr===UnsignedInt248Type||Nr===UnsignedShort4444Type||Nr===UnsignedShort5551Type,jr=cr.getClearColor(),Kr=cr.getClearAlpha(),rn=jr.r,qr=jr.g,Xr=jr.b,hn=_r.get(vt).__webglFramebuffer;Hr?(it[0]=rn,it[1]=qr,it[2]=Xr,it[3]=Kr,kt.clearBufferuiv(kt.COLOR,hn,it)):(at[0]=rn,at[1]=qr,at[2]=Xr,at[3]=Kr,kt.clearBufferiv(kt.COLOR,hn,at))}else Zt|=kt.COLOR_BUFFER_BIT}Yt&&(Zt|=kt.DEPTH_BUFFER_BIT),dr&&(Zt|=kt.STENCIL_BUFFER_BIT),kt.clear(Zt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",pr,!1),o.removeEventListener("webglcontextrestored",Wt,!1),o.removeEventListener("webglcontextcreationerror",nr,!1),xr.dispose(),Ir.dispose(),_r.dispose(),Pr.dispose(),Or.dispose(),Ft.dispose(),Kt.dispose(),vr.dispose(),ir.dispose(),Gt.dispose(),Gt.removeEventListener("sessionstart",an),Gt.removeEventListener("sessionend",xn),er&&(er.dispose(),er=null),An.stop()};function pr(Nt){Nt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ft=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),ft=!1;const Nt=Br.autoReset,Yt=Mr.enabled,dr=Mr.autoUpdate,Zt=Mr.needsUpdate,gr=Mr.type;wr(),Br.autoReset=Nt,Mr.enabled=Yt,Mr.autoUpdate=dr,Mr.needsUpdate=Zt,Mr.type=gr}function nr(Nt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Nt.statusMessage)}function Cr(Nt){const Yt=Nt.target;Yt.removeEventListener("dispose",Cr),Vr(Yt)}function Vr(Nt){Ur(Nt),_r.remove(Nt)}function Ur(Nt){const Yt=_r.get(Nt).programs;Yt!==void 0&&(Yt.forEach(function(dr){ir.releaseProgram(dr)}),Nt.isShaderMaterial&&ir.releaseShaderCache(Nt))}this.renderBufferDirect=function(Nt,Yt,dr,Zt,gr,Nr){Yt===null&&(Yt=Tr);const Hr=gr.isMesh&&gr.matrixWorld.determinant()<0,jr=on(Nt,Yt,dr,Zt,gr);mr.setMaterial(Zt,Hr);let Kr=dr.index,rn=1;Zt.wireframe===!0&&(Kr=Ot.getWireframeAttribute(dr),rn=2);const qr=dr.drawRange,Xr=dr.attributes.position;let hn=qr.start*rn,mn=(qr.start+qr.count)*rn;Nr!==null&&(hn=Math.max(hn,Nr.start*rn),mn=Math.min(mn,(Nr.start+Nr.count)*rn)),Kr!==null?(hn=Math.max(hn,0),mn=Math.min(mn,Kr.count)):Xr!=null&&(hn=Math.max(hn,0),mn=Math.min(mn,Xr.count));const qn=mn-hn;if(qn<0||qn===1/0)return;Kt.setup(gr,Zt,jr,dr,Kr);let Xn,fn=hr;if(Kr!==null&&(Xn=Wr.get(Kr),fn=Vt,fn.setIndex(Xn)),gr.isMesh)Zt.wireframe===!0?(mr.setLineWidth(Zt.wireframeLinewidth*ur()),fn.setMode(kt.LINES)):fn.setMode(kt.TRIANGLES);else if(gr.isLine){let Jr=Zt.linewidth;Jr===void 0&&(Jr=1),mr.setLineWidth(Jr*ur()),gr.isLineSegments?fn.setMode(kt.LINES):gr.isLineLoop?fn.setMode(kt.LINE_LOOP):fn.setMode(kt.LINE_STRIP)}else gr.isPoints?fn.setMode(kt.POINTS):gr.isSprite&&fn.setMode(kt.TRIANGLES);if(gr.isInstancedMesh)fn.renderInstances(hn,qn,gr.count);else if(dr.isInstancedBufferGeometry){const Jr=dr._maxInstanceCount!==void 0?dr._maxInstanceCount:1/0,dn=Math.min(dr.instanceCount,Jr);fn.renderInstances(hn,qn,dn)}else fn.render(hn,qn)},this.compile=function(Nt,Yt){function dr(Zt,gr,Nr){Zt.transparent===!0&&Zt.side===DoubleSide&&Zt.forceSinglePass===!1?(Zt.side=BackSide,Zt.needsUpdate=!0,zn(Zt,gr,Nr),Zt.side=FrontSide,Zt.needsUpdate=!0,zn(Zt,gr,Nr),Zt.side=DoubleSide):zn(Zt,gr,Nr)}st=Ir.get(Nt),st.init(),ht.push(st),Nt.traverseVisible(function(Zt){Zt.isLight&&Zt.layers.test(Yt.layers)&&(st.pushLight(Zt),Zt.castShadow&&st.pushShadow(Zt))}),st.setupLights(dt.useLegacyLights),Nt.traverse(function(Zt){const gr=Zt.material;if(gr)if(Array.isArray(gr))for(let Nr=0;Nr<gr.length;Nr++){const Hr=gr[Nr];dr(Hr,Nt,Zt)}else dr(gr,Nt,Zt)}),ht.pop(),st=null};let Qr=null;function sn(Nt){Qr&&Qr(Nt)}function an(){An.stop()}function xn(){An.start()}const An=new WebGLAnimation;An.setAnimationLoop(sn),typeof self<"u"&&An.setContext(self),this.setAnimationLoop=function(Nt){Qr=Nt,Gt.setAnimationLoop(Nt),Nt===null?An.stop():An.start()},Gt.addEventListener("sessionstart",an),Gt.addEventListener("sessionend",xn),this.render=function(Nt,Yt){if(Yt!==void 0&&Yt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(ft===!0)return;Nt.matrixWorldAutoUpdate===!0&&Nt.updateMatrixWorld(),Yt.parent===null&&Yt.matrixWorldAutoUpdate===!0&&Yt.updateMatrixWorld(),Gt.enabled===!0&&Gt.isPresenting===!0&&(Yt=Gt.updateCameraXR(Yt)),Nt.isScene===!0&&Nt.onBeforeRender(dt,Nt,Yt,vt),st=Ir.get(Nt,ht.length),st.init(),ht.push(st),sr.multiplyMatrices(Yt.projectionMatrix,Yt.matrixWorldInverse),Jt.setFromProjectionMatrix(sr),or=this.localClippingEnabled,Qt=Fr.init(this.clippingPlanes,or),ct=xr.get(Nt,ot.length),ct.init(),ot.push(ct),Cs(Nt,Yt,0,dt.sortObjects),ct.finish(),dt.sortObjects===!0&&ct.sort(bt,Pt),Qt===!0&&Fr.beginShadows();const dr=st.state.shadowsArray;if(Mr.render(dr,Nt,Yt),Qt===!0&&Fr.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,cr.render(ct,Nt),st.setupLights(dt.useLegacyLights),Yt.isArrayCamera){const Zt=Yt.cameras;for(let gr=0,Nr=Zt.length;gr<Nr;gr++){const Hr=Zt[gr];Vn(ct,Nt,Hr,Hr.viewport)}}else Vn(ct,Nt,Yt);vt!==null&&(br.updateMultisampleRenderTarget(vt),br.updateRenderTargetMipmap(vt)),Nt.isScene===!0&&Nt.onAfterRender(dt,Nt,Yt),Kt.resetDefaultState(),yt=-1,Et=null,ht.pop(),ht.length>0?st=ht[ht.length-1]:st=null,ot.pop(),ot.length>0?ct=ot[ot.length-1]:ct=null};function Cs(Nt,Yt,dr,Zt){if(Nt.visible===!1)return;if(Nt.layers.test(Yt.layers)){if(Nt.isGroup)dr=Nt.renderOrder;else if(Nt.isLOD)Nt.autoUpdate===!0&&Nt.update(Yt);else if(Nt.isLight)st.pushLight(Nt),Nt.castShadow&&st.pushShadow(Nt);else if(Nt.isSprite){if(!Nt.frustumCulled||Jt.intersectsSprite(Nt)){Zt&&Er.setFromMatrixPosition(Nt.matrixWorld).applyMatrix4(sr);const Hr=Ft.update(Nt),jr=Nt.material;jr.visible&&ct.push(Nt,Hr,jr,dr,Er.z,null)}}else if((Nt.isMesh||Nt.isLine||Nt.isPoints)&&(!Nt.frustumCulled||Jt.intersectsObject(Nt))){Nt.isSkinnedMesh&&Nt.skeleton.frame!==Br.render.frame&&(Nt.skeleton.update(),Nt.skeleton.frame=Br.render.frame);const Hr=Ft.update(Nt),jr=Nt.material;if(Zt&&(Nt.boundingSphere!==void 0?(Nt.boundingSphere===null&&Nt.computeBoundingSphere(),Er.copy(Nt.boundingSphere.center)):(Hr.boundingSphere===null&&Hr.computeBoundingSphere(),Er.copy(Hr.boundingSphere.center)),Er.applyMatrix4(Nt.matrixWorld).applyMatrix4(sr)),Array.isArray(jr)){const Kr=Hr.groups;for(let rn=0,qr=Kr.length;rn<qr;rn++){const Xr=Kr[rn],hn=jr[Xr.materialIndex];hn&&hn.visible&&ct.push(Nt,Hr,hn,dr,Er.z,Xr)}}else jr.visible&&ct.push(Nt,Hr,jr,dr,Er.z,null)}}const Nr=Nt.children;for(let Hr=0,jr=Nr.length;Hr<jr;Hr++)Cs(Nr[Hr],Yt,dr,Zt)}function Vn(Nt,Yt,dr,Zt){const gr=Nt.opaque,Nr=Nt.transmissive,Hr=Nt.transparent;st.setupLightsView(dr),Qt===!0&&Fr.setGlobalState(dt.clippingPlanes,dr),Nr.length>0&&Hn(gr,Nr,Yt,dr),Zt&&mr.viewport(St.copy(Zt)),gr.length>0&&Kn(gr,Yt,dr),Nr.length>0&&Kn(Nr,Yt,dr),Hr.length>0&&Kn(Hr,Yt,dr),mr.buffers.depth.setTest(!0),mr.buffers.depth.setMask(!0),mr.buffers.color.setMask(!0),mr.setPolygonOffset(!1)}function Hn(Nt,Yt,dr,Zt){const gr=yr.isWebGL2;er===null&&(er=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:ar.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType$1,minFilter:LinearMipmapLinearFilter$1,samples:gr&&j===!0?4:0})),dt.getDrawingBufferSize(Ar),gr?er.setSize(Ar.x,Ar.y):er.setSize(floorPowerOfTwo(Ar.x),floorPowerOfTwo(Ar.y));const Nr=dt.getRenderTarget();dt.setRenderTarget(er),dt.getClearColor(_t),Tt=dt.getClearAlpha(),Tt<1&&dt.setClearColor(16777215,.5),dt.clear();const Hr=dt.toneMapping;dt.toneMapping=NoToneMapping,Kn(Nt,dr,Zt),br.updateMultisampleRenderTarget(er),br.updateRenderTargetMipmap(er);let jr=!1;for(let Kr=0,rn=Yt.length;Kr<rn;Kr++){const qr=Yt[Kr],Xr=qr.object,hn=qr.geometry,mn=qr.material,qn=qr.group;if(mn.side===DoubleSide&&Xr.layers.test(Zt.layers)){const Xn=mn.side;mn.side=BackSide,mn.needsUpdate=!0,_s(Xr,dr,Zt,hn,mn,qn),mn.side=Xn,mn.needsUpdate=!0,jr=!0}}jr===!0&&(br.updateMultisampleRenderTarget(er),br.updateRenderTargetMipmap(er)),dt.setRenderTarget(Nr),dt.setClearColor(_t,Tt),dt.toneMapping=Hr}function Kn(Nt,Yt,dr){const Zt=Yt.isScene===!0?Yt.overrideMaterial:null;for(let gr=0,Nr=Nt.length;gr<Nr;gr++){const Hr=Nt[gr],jr=Hr.object,Kr=Hr.geometry,rn=Zt===null?Hr.material:Zt,qr=Hr.group;jr.layers.test(dr.layers)&&_s(jr,Yt,dr,Kr,rn,qr)}}function _s(Nt,Yt,dr,Zt,gr,Nr){Nt.onBeforeRender(dt,Yt,dr,Zt,gr,Nr),Nt.modelViewMatrix.multiplyMatrices(dr.matrixWorldInverse,Nt.matrixWorld),Nt.normalMatrix.getNormalMatrix(Nt.modelViewMatrix),gr.onBeforeRender(dt,Yt,dr,Zt,Nt,Nr),gr.transparent===!0&&gr.side===DoubleSide&&gr.forceSinglePass===!1?(gr.side=BackSide,gr.needsUpdate=!0,dt.renderBufferDirect(dr,Yt,Zt,gr,Nt,Nr),gr.side=FrontSide,gr.needsUpdate=!0,dt.renderBufferDirect(dr,Yt,Zt,gr,Nt,Nr),gr.side=DoubleSide):dt.renderBufferDirect(dr,Yt,Zt,gr,Nt,Nr),Nt.onAfterRender(dt,Yt,dr,Zt,gr,Nr)}function zn(Nt,Yt,dr){Yt.isScene!==!0&&(Yt=Tr);const Zt=_r.get(Nt),gr=st.state.lights,Nr=st.state.shadowsArray,Hr=gr.state.version,jr=ir.getParameters(Nt,gr.state,Nr,Yt,dr),Kr=ir.getProgramCacheKey(jr);let rn=Zt.programs;Zt.environment=Nt.isMeshStandardMaterial?Yt.environment:null,Zt.fog=Yt.fog,Zt.envMap=(Nt.isMeshStandardMaterial?Or:Pr).get(Nt.envMap||Zt.environment),rn===void 0&&(Nt.addEventListener("dispose",Cr),rn=new Map,Zt.programs=rn);let qr=rn.get(Kr);if(qr!==void 0){if(Zt.currentProgram===qr&&Zt.lightsStateVersion===Hr)return bs(Nt,jr),qr}else jr.uniforms=ir.getUniforms(Nt),Nt.onBuild(dr,jr,dt),Nt.onBeforeCompile(jr,dt),qr=ir.acquireProgram(jr,Kr),rn.set(Kr,qr),Zt.uniforms=jr.uniforms;const Xr=Zt.uniforms;(!Nt.isShaderMaterial&&!Nt.isRawShaderMaterial||Nt.clipping===!0)&&(Xr.clippingPlanes=Fr.uniform),bs(Nt,jr),Zt.needsLights=ga(Nt),Zt.lightsStateVersion=Hr,Zt.needsLights&&(Xr.ambientLightColor.value=gr.state.ambient,Xr.lightProbe.value=gr.state.probe,Xr.directionalLights.value=gr.state.directional,Xr.directionalLightShadows.value=gr.state.directionalShadow,Xr.spotLights.value=gr.state.spot,Xr.spotLightShadows.value=gr.state.spotShadow,Xr.rectAreaLights.value=gr.state.rectArea,Xr.ltc_1.value=gr.state.rectAreaLTC1,Xr.ltc_2.value=gr.state.rectAreaLTC2,Xr.pointLights.value=gr.state.point,Xr.pointLightShadows.value=gr.state.pointShadow,Xr.hemisphereLights.value=gr.state.hemi,Xr.directionalShadowMap.value=gr.state.directionalShadowMap,Xr.directionalShadowMatrix.value=gr.state.directionalShadowMatrix,Xr.spotShadowMap.value=gr.state.spotShadowMap,Xr.spotLightMatrix.value=gr.state.spotLightMatrix,Xr.spotLightMap.value=gr.state.spotLightMap,Xr.pointShadowMap.value=gr.state.pointShadowMap,Xr.pointShadowMatrix.value=gr.state.pointShadowMatrix);const hn=qr.getUniforms(),mn=WebGLUniforms.seqWithValue(hn.seq,Xr);return Zt.currentProgram=qr,Zt.uniformsList=mn,qr}function bs(Nt,Yt){const dr=_r.get(Nt);dr.outputColorSpace=Yt.outputColorSpace,dr.instancing=Yt.instancing,dr.skinning=Yt.skinning,dr.morphTargets=Yt.morphTargets,dr.morphNormals=Yt.morphNormals,dr.morphColors=Yt.morphColors,dr.morphTargetsCount=Yt.morphTargetsCount,dr.numClippingPlanes=Yt.numClippingPlanes,dr.numIntersection=Yt.numClipIntersection,dr.vertexAlphas=Yt.vertexAlphas,dr.vertexTangents=Yt.vertexTangents,dr.toneMapping=Yt.toneMapping}function on(Nt,Yt,dr,Zt,gr){Yt.isScene!==!0&&(Yt=Tr),br.resetTextureUnits();const Nr=Yt.fog,Hr=Zt.isMeshStandardMaterial?Yt.environment:null,jr=vt===null?dt.outputColorSpace:vt.isXRRenderTarget===!0?vt.texture.colorSpace:LinearSRGBColorSpace,Kr=(Zt.isMeshStandardMaterial?Or:Pr).get(Zt.envMap||Hr),rn=Zt.vertexColors===!0&&!!dr.attributes.color&&dr.attributes.color.itemSize===4,qr=!!dr.attributes.tangent&&(!!Zt.normalMap||Zt.anisotropy>0),Xr=!!dr.morphAttributes.position,hn=!!dr.morphAttributes.normal,mn=!!dr.morphAttributes.color,qn=Zt.toneMapped?dt.toneMapping:NoToneMapping,Xn=dr.morphAttributes.position||dr.morphAttributes.normal||dr.morphAttributes.color,fn=Xn!==void 0?Xn.length:0,Jr=_r.get(Zt),dn=st.state.lights;if(Qt===!0&&(or===!0||Nt!==Et)){const Dn=Nt===Et&&Zt.id===yt;Fr.setState(Zt,Nt,Dn)}let Yr=!1;Zt.version===Jr.__version?(Jr.needsLights&&Jr.lightsStateVersion!==dn.state.version||Jr.outputColorSpace!==jr||gr.isInstancedMesh&&Jr.instancing===!1||!gr.isInstancedMesh&&Jr.instancing===!0||gr.isSkinnedMesh&&Jr.skinning===!1||!gr.isSkinnedMesh&&Jr.skinning===!0||Jr.envMap!==Kr||Zt.fog===!0&&Jr.fog!==Nr||Jr.numClippingPlanes!==void 0&&(Jr.numClippingPlanes!==Fr.numPlanes||Jr.numIntersection!==Fr.numIntersection)||Jr.vertexAlphas!==rn||Jr.vertexTangents!==qr||Jr.morphTargets!==Xr||Jr.morphNormals!==hn||Jr.morphColors!==mn||Jr.toneMapping!==qn||yr.isWebGL2===!0&&Jr.morphTargetsCount!==fn)&&(Yr=!0):(Yr=!0,Jr.__version=Zt.version);let Fn=Jr.currentProgram;Yr===!0&&(Fn=zn(Zt,Yt,gr));let In=!1,_n=!1,ss=!1;const yn=Fn.getUniforms(),En=Jr.uniforms;if(mr.useProgram(Fn.program)&&(In=!0,_n=!0,ss=!0),Zt.id!==yt&&(yt=Zt.id,_n=!0),In||Et!==Nt){if(yn.setValue(kt,"projectionMatrix",Nt.projectionMatrix),yr.logarithmicDepthBuffer&&yn.setValue(kt,"logDepthBufFC",2/(Math.log(Nt.far+1)/Math.LN2)),Et!==Nt&&(Et=Nt,_n=!0,ss=!0),Zt.isShaderMaterial||Zt.isMeshPhongMaterial||Zt.isMeshToonMaterial||Zt.isMeshStandardMaterial||Zt.envMap){const Dn=yn.map.cameraPosition;Dn!==void 0&&Dn.setValue(kt,Er.setFromMatrixPosition(Nt.matrixWorld))}(Zt.isMeshPhongMaterial||Zt.isMeshToonMaterial||Zt.isMeshLambertMaterial||Zt.isMeshBasicMaterial||Zt.isMeshStandardMaterial||Zt.isShaderMaterial)&&yn.setValue(kt,"isOrthographic",Nt.isOrthographicCamera===!0),(Zt.isMeshPhongMaterial||Zt.isMeshToonMaterial||Zt.isMeshLambertMaterial||Zt.isMeshBasicMaterial||Zt.isMeshStandardMaterial||Zt.isShaderMaterial||Zt.isShadowMaterial||gr.isSkinnedMesh)&&yn.setValue(kt,"viewMatrix",Nt.matrixWorldInverse)}if(gr.isSkinnedMesh){yn.setOptional(kt,gr,"bindMatrix"),yn.setOptional(kt,gr,"bindMatrixInverse");const Dn=gr.skeleton;Dn&&(yr.floatVertexTextures?(Dn.boneTexture===null&&Dn.computeBoneTexture(),yn.setValue(kt,"boneTexture",Dn.boneTexture,br),yn.setValue(kt,"boneTextureSize",Dn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ts=dr.morphAttributes;if((Ts.position!==void 0||Ts.normal!==void 0||Ts.color!==void 0&&yr.isWebGL2===!0)&&zt.update(gr,dr,Fn),(_n||Jr.receiveShadow!==gr.receiveShadow)&&(Jr.receiveShadow=gr.receiveShadow,yn.setValue(kt,"receiveShadow",gr.receiveShadow)),Zt.isMeshGouraudMaterial&&Zt.envMap!==null&&(En.envMap.value=Kr,En.flipEnvMap.value=Kr.isCubeTexture&&Kr.isRenderTargetTexture===!1?-1:1),_n&&(yn.setValue(kt,"toneMappingExposure",dt.toneMappingExposure),Jr.needsLights&&Un(En,ss),Nr&&Zt.fog===!0&&Sr.refreshFogUniforms(En,Nr),Sr.refreshMaterialUniforms(En,Zt,Rt,Bt,er),WebGLUniforms.upload(kt,Jr.uniformsList,En,br)),Zt.isShaderMaterial&&Zt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(kt,Jr.uniformsList,En,br),Zt.uniformsNeedUpdate=!1),Zt.isSpriteMaterial&&yn.setValue(kt,"center",gr.center),yn.setValue(kt,"modelViewMatrix",gr.modelViewMatrix),yn.setValue(kt,"normalMatrix",gr.normalMatrix),yn.setValue(kt,"modelMatrix",gr.matrixWorld),Zt.isShaderMaterial||Zt.isRawShaderMaterial){const Dn=Zt.uniformsGroups;for(let zs=0,Qs=Dn.length;zs<Qs;zs++)if(yr.isWebGL2){const io=Dn[zs];vr.update(io,Fn),vr.bind(io,Fn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fn}function Un(Nt,Yt){Nt.ambientLightColor.needsUpdate=Yt,Nt.lightProbe.needsUpdate=Yt,Nt.directionalLights.needsUpdate=Yt,Nt.directionalLightShadows.needsUpdate=Yt,Nt.pointLights.needsUpdate=Yt,Nt.pointLightShadows.needsUpdate=Yt,Nt.spotLights.needsUpdate=Yt,Nt.spotLightShadows.needsUpdate=Yt,Nt.rectAreaLights.needsUpdate=Yt,Nt.hemisphereLights.needsUpdate=Yt}function ga(Nt){return Nt.isMeshLambertMaterial||Nt.isMeshToonMaterial||Nt.isMeshPhongMaterial||Nt.isMeshStandardMaterial||Nt.isShadowMaterial||Nt.isShaderMaterial&&Nt.lights===!0}this.getActiveCubeFace=function(){return mt},this.getActiveMipmapLevel=function(){return gt},this.getRenderTarget=function(){return vt},this.setRenderTargetTextures=function(Nt,Yt,dr){_r.get(Nt.texture).__webglTexture=Yt,_r.get(Nt.depthTexture).__webglTexture=dr;const Zt=_r.get(Nt);Zt.__hasExternalTextures=!0,Zt.__hasExternalTextures&&(Zt.__autoAllocateDepthBuffer=dr===void 0,Zt.__autoAllocateDepthBuffer||ar.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Zt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Nt,Yt){const dr=_r.get(Nt);dr.__webglFramebuffer=Yt,dr.__useDefaultFramebuffer=Yt===void 0},this.setRenderTarget=function(Nt,Yt=0,dr=0){vt=Nt,mt=Yt,gt=dr;let Zt=!0,gr=null,Nr=!1,Hr=!1;if(Nt){const Kr=_r.get(Nt);Kr.__useDefaultFramebuffer!==void 0?(mr.bindFramebuffer(kt.FRAMEBUFFER,null),Zt=!1):Kr.__webglFramebuffer===void 0?br.setupRenderTarget(Nt):Kr.__hasExternalTextures&&br.rebindTextures(Nt,_r.get(Nt.texture).__webglTexture,_r.get(Nt.depthTexture).__webglTexture);const rn=Nt.texture;(rn.isData3DTexture||rn.isDataArrayTexture||rn.isCompressedArrayTexture)&&(Hr=!0);const qr=_r.get(Nt).__webglFramebuffer;Nt.isWebGLCubeRenderTarget?(gr=qr[Yt],Nr=!0):yr.isWebGL2&&Nt.samples>0&&br.useMultisampledRTT(Nt)===!1?gr=_r.get(Nt).__webglMultisampledFramebuffer:gr=qr,St.copy(Nt.viewport),Ct.copy(Nt.scissor),wt=Nt.scissorTest}else St.copy(Dt).multiplyScalar(Rt).floor(),Ct.copy($t).multiplyScalar(Rt).floor(),wt=Lt;if(mr.bindFramebuffer(kt.FRAMEBUFFER,gr)&&yr.drawBuffers&&Zt&&mr.drawBuffers(Nt,gr),mr.viewport(St),mr.scissor(Ct),mr.setScissorTest(wt),Nr){const Kr=_r.get(Nt.texture);kt.framebufferTexture2D(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,kt.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,Kr.__webglTexture,dr)}else if(Hr){const Kr=_r.get(Nt.texture),rn=Yt||0;kt.framebufferTextureLayer(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,Kr.__webglTexture,dr||0,rn)}yt=-1},this.readRenderTargetPixels=function(Nt,Yt,dr,Zt,gr,Nr,Hr){if(!(Nt&&Nt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jr=_r.get(Nt).__webglFramebuffer;if(Nt.isWebGLCubeRenderTarget&&Hr!==void 0&&(jr=jr[Hr]),jr){mr.bindFramebuffer(kt.FRAMEBUFFER,jr);try{const Kr=Nt.texture,rn=Kr.format,qr=Kr.type;if(rn!==RGBAFormat$1&&Ht.convert(rn)!==kt.getParameter(kt.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Xr=qr===HalfFloatType&&(ar.has("EXT_color_buffer_half_float")||yr.isWebGL2&&ar.has("EXT_color_buffer_float"));if(qr!==UnsignedByteType$1&&Ht.convert(qr)!==kt.getParameter(kt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qr===FloatType&&(yr.isWebGL2||ar.has("OES_texture_float")||ar.has("WEBGL_color_buffer_float")))&&!Xr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Yt>=0&&Yt<=Nt.width-Zt&&dr>=0&&dr<=Nt.height-gr&&kt.readPixels(Yt,dr,Zt,gr,Ht.convert(rn),Ht.convert(qr),Nr)}finally{const Kr=vt!==null?_r.get(vt).__webglFramebuffer:null;mr.bindFramebuffer(kt.FRAMEBUFFER,Kr)}}},this.copyFramebufferToTexture=function(Nt,Yt,dr=0){const Zt=Math.pow(2,-dr),gr=Math.floor(Yt.image.width*Zt),Nr=Math.floor(Yt.image.height*Zt);br.setTexture2D(Yt,0),kt.copyTexSubImage2D(kt.TEXTURE_2D,dr,0,0,Nt.x,Nt.y,gr,Nr),mr.unbindTexture()},this.copyTextureToTexture=function(Nt,Yt,dr,Zt=0){const gr=Yt.image.width,Nr=Yt.image.height,Hr=Ht.convert(dr.format),jr=Ht.convert(dr.type);br.setTexture2D(dr,0),kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,dr.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,dr.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,dr.unpackAlignment),Yt.isDataTexture?kt.texSubImage2D(kt.TEXTURE_2D,Zt,Nt.x,Nt.y,gr,Nr,Hr,jr,Yt.image.data):Yt.isCompressedTexture?kt.compressedTexSubImage2D(kt.TEXTURE_2D,Zt,Nt.x,Nt.y,Yt.mipmaps[0].width,Yt.mipmaps[0].height,Hr,Yt.mipmaps[0].data):kt.texSubImage2D(kt.TEXTURE_2D,Zt,Nt.x,Nt.y,Hr,jr,Yt.image),Zt===0&&dr.generateMipmaps&&kt.generateMipmap(kt.TEXTURE_2D),mr.unbindTexture()},this.copyTextureToTexture3D=function(Nt,Yt,dr,Zt,gr=0){if(dt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Nr=Nt.max.x-Nt.min.x+1,Hr=Nt.max.y-Nt.min.y+1,jr=Nt.max.z-Nt.min.z+1,Kr=Ht.convert(Zt.format),rn=Ht.convert(Zt.type);let qr;if(Zt.isData3DTexture)br.setTexture3D(Zt,0),qr=kt.TEXTURE_3D;else if(Zt.isDataArrayTexture)br.setTexture2DArray(Zt,0),qr=kt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,Zt.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Zt.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,Zt.unpackAlignment);const Xr=kt.getParameter(kt.UNPACK_ROW_LENGTH),hn=kt.getParameter(kt.UNPACK_IMAGE_HEIGHT),mn=kt.getParameter(kt.UNPACK_SKIP_PIXELS),qn=kt.getParameter(kt.UNPACK_SKIP_ROWS),Xn=kt.getParameter(kt.UNPACK_SKIP_IMAGES),fn=dr.isCompressedTexture?dr.mipmaps[0]:dr.image;kt.pixelStorei(kt.UNPACK_ROW_LENGTH,fn.width),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,fn.height),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,Nt.min.x),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,Nt.min.y),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,Nt.min.z),dr.isDataTexture||dr.isData3DTexture?kt.texSubImage3D(qr,gr,Yt.x,Yt.y,Yt.z,Nr,Hr,jr,Kr,rn,fn.data):dr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),kt.compressedTexSubImage3D(qr,gr,Yt.x,Yt.y,Yt.z,Nr,Hr,jr,Kr,fn.data)):kt.texSubImage3D(qr,gr,Yt.x,Yt.y,Yt.z,Nr,Hr,jr,Kr,rn,fn),kt.pixelStorei(kt.UNPACK_ROW_LENGTH,Xr),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,hn),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,mn),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,qn),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,Xn),gr===0&&Zt.generateMipmaps&&kt.generateMipmap(qr),mr.unbindTexture()},this.initTexture=function(Nt){Nt.isCubeTexture?br.setTextureCube(Nt,0):Nt.isData3DTexture?br.setTexture3D(Nt,0):Nt.isDataArrayTexture||Nt.isCompressedArrayTexture?br.setTexture2DArray(Nt,0):br.setTexture2D(Nt,0),mr.unbindTexture()},this.resetState=function(){mt=0,gt=0,vt=null,mr.reset(),Kt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(a){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!a}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace$1?sRGBEncoding$1:LinearEncoding$1}set outputEncoding(a){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=a===sRGBEncoding$1?SRGBColorSpace$1:LinearSRGBColorSpace}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(a,o=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(a),this.density=o}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(a,o=1,c=1e3){this.isFog=!0,this.name="",this.color=new Color(a),this.near=o,this.far=c}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,o){return super.copy(a,o),a.background!==null&&(this.background=a.background.clone()),a.environment!==null&&(this.environment=a.environment.clone()),a.fog!==null&&(this.fog=a.fog.clone()),this.backgroundBlurriness=a.backgroundBlurriness,this.backgroundIntensity=a.backgroundIntensity,a.overrideMaterial!==null&&(this.overrideMaterial=a.overrideMaterial.clone()),this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const o=super.toJSON(a);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(o.object.backgroundIntensity=this.backgroundIntensity),o}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(a){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=a}}class InterleavedBuffer{constructor(a,o){this.isInterleavedBuffer=!0,this.array=a,this.stride=o,this.count=a!==void 0?a.length/o:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(a){a===!0&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.usage=a.usage,this}copyAt(a,o,c){a*=this.stride,c*=o.stride;for(let d=0,b=this.stride;d<b;d++)this.array[a+d]=o.array[c+d];return this}set(a,o=0){return this.array.set(a,o),this}clone(a){a.arrayBuffers===void 0&&(a.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),a.arrayBuffers[this.array.buffer._uuid]===void 0&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]),c=new this.constructor(o,this.stride);return c.setUsage(this.usage),c}onUpload(a){return this.onUploadCallback=a,this}toJSON(a){return a.arrayBuffers===void 0&&(a.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),a.arrayBuffers[this.array.buffer._uuid]===void 0&&(a.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$5=new Vector3;class InterleavedBufferAttribute{constructor(a,o,c,d=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=a,this.itemSize=o,this.offset=c,this.normalized=d}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let o=0,c=this.data.count;o<c;o++)_vector$5.fromBufferAttribute(this,o),_vector$5.applyMatrix4(a),this.setXYZ(o,_vector$5.x,_vector$5.y,_vector$5.z);return this}applyNormalMatrix(a){for(let o=0,c=this.count;o<c;o++)_vector$5.fromBufferAttribute(this,o),_vector$5.applyNormalMatrix(a),this.setXYZ(o,_vector$5.x,_vector$5.y,_vector$5.z);return this}transformDirection(a){for(let o=0,c=this.count;o<c;o++)_vector$5.fromBufferAttribute(this,o),_vector$5.transformDirection(a),this.setXYZ(o,_vector$5.x,_vector$5.y,_vector$5.z);return this}setX(a,o){return this.normalized&&(o=normalize(o,this.array)),this.data.array[a*this.data.stride+this.offset]=o,this}setY(a,o){return this.normalized&&(o=normalize(o,this.array)),this.data.array[a*this.data.stride+this.offset+1]=o,this}setZ(a,o){return this.normalized&&(o=normalize(o,this.array)),this.data.array[a*this.data.stride+this.offset+2]=o,this}setW(a,o){return this.normalized&&(o=normalize(o,this.array)),this.data.array[a*this.data.stride+this.offset+3]=o,this}getX(a){let o=this.data.array[a*this.data.stride+this.offset];return this.normalized&&(o=denormalize(o,this.array)),o}getY(a){let o=this.data.array[a*this.data.stride+this.offset+1];return this.normalized&&(o=denormalize(o,this.array)),o}getZ(a){let o=this.data.array[a*this.data.stride+this.offset+2];return this.normalized&&(o=denormalize(o,this.array)),o}getW(a){let o=this.data.array[a*this.data.stride+this.offset+3];return this.normalized&&(o=denormalize(o,this.array)),o}setXY(a,o,c){return a=a*this.data.stride+this.offset,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array)),this.data.array[a+0]=o,this.data.array[a+1]=c,this}setXYZ(a,o,c,d){return a=a*this.data.stride+this.offset,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array)),this.data.array[a+0]=o,this.data.array[a+1]=c,this.data.array[a+2]=d,this}setXYZW(a,o,c,d,b){return a=a*this.data.stride+this.offset,this.normalized&&(o=normalize(o,this.array),c=normalize(c,this.array),d=normalize(d,this.array),b=normalize(b,this.array)),this.data.array[a+0]=o,this.data.array[a+1]=c,this.data.array[a+2]=d,this.data.array[a+3]=b,this}clone(a){if(a===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let c=0;c<this.count;c++){const d=c*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)o.push(this.data.array[d+b])}return new BufferAttribute(new this.array.constructor(o),this.itemSize,this.normalized)}else return a.interleavedBuffers===void 0&&(a.interleavedBuffers={}),a.interleavedBuffers[this.data.uuid]===void 0&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a)),new InterleavedBufferAttribute(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(a===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let c=0;c<this.count;c++){const d=c*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)o.push(this.data.array[d+b])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}else return a.interleavedBuffers===void 0&&(a.interleavedBuffers={}),a.interleavedBuffers[this.data.uuid]===void 0&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(a){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this.fog=a.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2$1,_rotatedPosition=new Vector2$1,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2$1,_uvB=new Vector2$1,_uvC=new Vector2$1;class Sprite extends Object3D{constructor(a){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),c=new InterleavedBuffer(o,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(c,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(c,2,3,!1))}this.geometry=_geometry,this.material=a!==void 0?a:new SpriteMaterial,this.center=new Vector2$1(.5,.5)}raycast(a,o){a.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const c=this.material.rotation;let d,b;c!==0&&(b=Math.cos(c),d=Math.sin(c));const $=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,$,_worldScale,d,b),transformVertex(_vB.set(.5,-.5,0),_mvPosition,$,_worldScale,d,b),transformVertex(_vC.set(.5,.5,0),_mvPosition,$,_worldScale,d,b),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let j=a.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(j===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,$,_worldScale,d,b),_uvB.set(0,1),j=a.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),j===null))return;const _e=a.ray.origin.distanceTo(_intersectPoint);_e<a.near||_e>a.far||o.push({distance:_e,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2$1),face:null,object:this})}copy(a,o){return super.copy(a,o),a.center!==void 0&&this.center.copy(a.center),this.material=a.material,this}}function transformVertex(s,a,o,c,d,b){_alignedPosition.subVectors(s,o).addScalar(.5).multiply(c),d!==void 0?(_rotatedPosition.x=b*_alignedPosition.x-d*_alignedPosition.y,_rotatedPosition.y=d*_alignedPosition.x+b*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),s.copy(a),s.x+=_rotatedPosition.x,s.y+=_rotatedPosition.y,s.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(a){super.copy(a,!1);const o=a.levels;for(let c=0,d=o.length;c<d;c++){const b=o[c];this.addLevel(b.object.clone(),b.distance,b.hysteresis)}return this.autoUpdate=a.autoUpdate,this}addLevel(a,o=0,c=0){o=Math.abs(o);const d=this.levels;let b;for(b=0;b<d.length&&!(o<d[b].distance);b++);return d.splice(b,0,{distance:o,hysteresis:c,object:a}),this.add(a),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const o=this.levels;if(o.length>0){let c,d;for(c=1,d=o.length;c<d;c++){let b=o[c].distance;if(o[c].object.visible&&(b-=b*o[c].hysteresis),a<b)break}return o[c-1].object}return null}raycast(a,o){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const d=a.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(d).raycast(a,o)}}update(a){const o=this.levels;if(o.length>1){_v1$2.setFromMatrixPosition(a.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const c=_v1$2.distanceTo(_v2$1)/a.zoom;o[0].object.visible=!0;let d,b;for(d=1,b=o.length;d<b;d++){let $=o[d].distance;if(o[d].object.visible&&($-=$*o[d].hysteresis),c>=$)o[d-1].object.visible=!1,o[d].object.visible=!0;else break}for(this._currentLevel=d-1;d<b;d++)o[d].object.visible=!1}}toJSON(a){const o=super.toJSON(a);this.autoUpdate===!1&&(o.object.autoUpdate=!1),o.object.levels=[];const c=this.levels;for(let d=0,b=c.length;d<b;d++){const $=c[d];o.object.levels.push({object:$.object.uuid,distance:$.distance,hysteresis:$.hysteresis})}return o}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$3=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(a,o){super(a,o),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const a=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const o=a.getAttribute("position");for(let c=0;c<o.count;c++)_vertex.fromBufferAttribute(o,c),this.applyBoneTransform(c,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const a=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const o=a.getAttribute("position");for(let c=0;c<o.count;c++)_vertex.fromBufferAttribute(o,c),this.applyBoneTransform(c,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(a,o){return super.copy(a,o),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,a.boundingBox!==null&&(this.boundingBox=a.boundingBox.clone()),a.boundingSphere!==null&&(this.boundingSphere=a.boundingSphere.clone()),this}raycast(a,o){const c=this.material,d=this.matrixWorld;c!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(d),a.ray.intersectsSphere(_sphere$3)!==!1&&(_inverseMatrix$2.copy(d).invert(),_ray$2.copy(a.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(a,o,_ray$2)))}getVertexPosition(a,o){return super.getVertexPosition(a,o),this.applyBoneTransform(a,o),o}bind(a,o){this.skeleton=a,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new Vector4,o=this.geometry.attributes.skinWeight;for(let c=0,d=o.count;c<d;c++){a.fromBufferAttribute(o,c);const b=1/a.manhattanLength();b!==1/0?a.multiplyScalar(b):a.set(1,0,0,0),o.setXYZW(c,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(a,o){const c=this.skeleton,d=this.geometry;_skinIndex.fromBufferAttribute(d.attributes.skinIndex,a),_skinWeight.fromBufferAttribute(d.attributes.skinWeight,a),_basePosition.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let b=0;b<4;b++){const $=_skinWeight.getComponent(b);if($!==0){const j=_skinIndex.getComponent(b);_matrix4.multiplyMatrices(c.bones[j].matrixWorld,c.boneInverses[j]),o.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),$)}}return o.applyMatrix4(this.bindMatrixInverse)}boneTransform(a,o){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(a,o)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture$1{constructor(a=null,o=1,c=1,d,b,$,j,_e,et=NearestFilter,tt=NearestFilter,rt,nt){super(null,$,j,_e,et,tt,d,b,rt,nt),this.isDataTexture=!0,this.image={data:a,width:o,height:c},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(a=[],o=[]){this.uuid=generateUUID$1(),this.bones=a.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const a=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(a.length*16),o.length===0)this.calculateInverses();else if(a.length!==o.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let c=0,d=this.bones.length;c<d;c++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,o=this.bones.length;a<o;a++){const c=new Matrix4;this.bones[a]&&c.copy(this.bones[a].matrixWorld).invert(),this.boneInverses.push(c)}}pose(){for(let a=0,o=this.bones.length;a<o;a++){const c=this.bones[a];c&&c.matrixWorld.copy(this.boneInverses[a]).invert()}for(let a=0,o=this.bones.length;a<o;a++){const c=this.bones[a];c&&(c.parent&&c.parent.isBone?(c.matrix.copy(c.parent.matrixWorld).invert(),c.matrix.multiply(c.matrixWorld)):c.matrix.copy(c.matrixWorld),c.matrix.decompose(c.position,c.quaternion,c.scale))}}update(){const a=this.bones,o=this.boneInverses,c=this.boneMatrices,d=this.boneTexture;for(let b=0,$=a.length;b<$;b++){const j=a[b]?a[b].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(j,o[b]),_offsetMatrix.toArray(c,b*16)}d!==null&&(d.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(this.bones.length*4);a=ceilPowerOfTwo(a),a=Math.max(a,4);const o=new Float32Array(a*a*4);o.set(this.boneMatrices);const c=new DataTexture(o,a,a,RGBAFormat$1,FloatType);return c.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=c,this.boneTextureSize=a,this}getBoneByName(a){for(let o=0,c=this.bones.length;o<c;o++){const d=this.bones[o];if(d.name===a)return d}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,o){this.uuid=a.uuid;for(let c=0,d=a.bones.length;c<d;c++){const b=a.bones[c];let $=o[b];$===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",b),$=new Bone),this.bones.push($),this.boneInverses.push(new Matrix4().fromArray(a.boneInverses[c]))}return this.init(),this}toJSON(){const a={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const o=this.bones,c=this.boneInverses;for(let d=0,b=o.length;d<b;d++){const $=o[d];a.bones.push($.uuid);const j=c[d];a.boneInverses.push(j.toArray())}return a}}class InstancedBufferAttribute extends BufferAttribute{constructor(a,o,c,d=1){super(a,o,c),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=d}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}toJSON(){const a=super.toJSON();return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh=new Mesh,_sphere$2=new Sphere;class InstancedMesh extends Mesh{constructor(a,o,c){super(a,o),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(c*16),16),this.instanceColor=null,this.count=c,this.boundingBox=null,this.boundingSphere=null;for(let d=0;d<c;d++)this.setMatrixAt(d,_identity)}computeBoundingBox(){const a=this.geometry,o=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),a.boundingBox===null&&a.computeBoundingBox(),this.boundingBox.makeEmpty();for(let c=0;c<o;c++)this.getMatrixAt(c,_instanceLocalMatrix),_box3.copy(a.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const a=this.geometry,o=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),a.boundingSphere===null&&a.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let c=0;c<o;c++)this.getMatrixAt(c,_instanceLocalMatrix),_sphere$2.copy(a.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$2)}copy(a,o){return super.copy(a,o),this.instanceMatrix.copy(a.instanceMatrix),a.instanceColor!==null&&(this.instanceColor=a.instanceColor.clone()),this.count=a.count,a.boundingBox!==null&&(this.boundingBox=a.boundingBox.clone()),a.boundingSphere!==null&&(this.boundingSphere=a.boundingSphere.clone()),this}getColorAt(a,o){o.fromArray(this.instanceColor.array,a*3)}getMatrixAt(a,o){o.fromArray(this.instanceMatrix.array,a*16)}raycast(a,o){const c=this.matrixWorld,d=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$2.copy(this.boundingSphere),_sphere$2.applyMatrix4(c),a.ray.intersectsSphere(_sphere$2)!==!1))for(let b=0;b<d;b++){this.getMatrixAt(b,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(c,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(a,_instanceIntersects);for(let $=0,j=_instanceIntersects.length;$<j;$++){const _e=_instanceIntersects[$];_e.instanceId=b,_e.object=this,o.push(_e)}_instanceIntersects.length=0}}setColorAt(a,o){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),o.toArray(this.instanceColor.array,a*3)}setMatrixAt(a,o){o.toArray(this.instanceMatrix.array,a*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(a){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.fog=a.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(a=new BufferGeometry,o=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a,o){return super.copy(a,o),this.material=a.material,this.geometry=a.geometry,this}computeLineDistances(){const a=this.geometry;if(a.index===null){const o=a.attributes.position,c=[0];for(let d=1,b=o.count;d<b;d++)_start$1.fromBufferAttribute(o,d-1),_end$1.fromBufferAttribute(o,d),c[d]=c[d-1],c[d]+=_start$1.distanceTo(_end$1);a.setAttribute("lineDistance",new Float32BufferAttribute(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(a,o){const c=this.geometry,d=this.matrixWorld,b=a.params.Line.threshold,$=c.drawRange;if(c.boundingSphere===null&&c.computeBoundingSphere(),_sphere$1.copy(c.boundingSphere),_sphere$1.applyMatrix4(d),_sphere$1.radius+=b,a.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(d).invert(),_ray$1.copy(a.ray).applyMatrix4(_inverseMatrix$1);const j=b/((this.scale.x+this.scale.y+this.scale.z)/3),_e=j*j,et=new Vector3,tt=new Vector3,rt=new Vector3,nt=new Vector3,it=this.isLineSegments?2:1,at=c.index,st=c.attributes.position;if(at!==null){const ot=Math.max(0,$.start),ht=Math.min(at.count,$.start+$.count);for(let dt=ot,ft=ht-1;dt<ft;dt+=it){const mt=at.getX(dt),gt=at.getX(dt+1);if(et.fromBufferAttribute(st,mt),tt.fromBufferAttribute(st,gt),_ray$1.distanceSqToSegment(et,tt,nt,rt)>_e)continue;nt.applyMatrix4(this.matrixWorld);const yt=a.ray.origin.distanceTo(nt);yt<a.near||yt>a.far||o.push({distance:yt,point:rt.clone().applyMatrix4(this.matrixWorld),index:dt,face:null,faceIndex:null,object:this})}}else{const ot=Math.max(0,$.start),ht=Math.min(st.count,$.start+$.count);for(let dt=ot,ft=ht-1;dt<ft;dt+=it){if(et.fromBufferAttribute(st,dt),tt.fromBufferAttribute(st,dt+1),_ray$1.distanceSqToSegment(et,tt,nt,rt)>_e)continue;nt.applyMatrix4(this.matrixWorld);const gt=a.ray.origin.distanceTo(nt);gt<a.near||gt>a.far||o.push({distance:gt,point:rt.clone().applyMatrix4(this.matrixWorld),index:dt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const o=this.geometry.morphAttributes,c=Object.keys(o);if(c.length>0){const d=o[c[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,$=d.length;b<$;b++){const j=d[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[j]=b}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(a,o){super(a,o),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(a.index===null){const o=a.attributes.position,c=[];for(let d=0,b=o.count;d<b;d+=2)_start.fromBufferAttribute(o,d),_end.fromBufferAttribute(o,d+1),c[d]=d===0?0:c[d-1],c[d+1]=c[d]+_start.distanceTo(_end);a.setAttribute("lineDistance",new Float32BufferAttribute(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(a,o){super(a,o),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(a){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.fog=a.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(a=new BufferGeometry,o=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a,o){return super.copy(a,o),this.material=a.material,this.geometry=a.geometry,this}raycast(a,o){const c=this.geometry,d=this.matrixWorld,b=a.params.Points.threshold,$=c.drawRange;if(c.boundingSphere===null&&c.computeBoundingSphere(),_sphere.copy(c.boundingSphere),_sphere.applyMatrix4(d),_sphere.radius+=b,a.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(d).invert(),_ray.copy(a.ray).applyMatrix4(_inverseMatrix);const j=b/((this.scale.x+this.scale.y+this.scale.z)/3),_e=j*j,et=c.index,rt=c.attributes.position;if(et!==null){const nt=Math.max(0,$.start),it=Math.min(et.count,$.start+$.count);for(let at=nt,ct=it;at<ct;at++){const st=et.getX(at);_position$2.fromBufferAttribute(rt,st),testPoint(_position$2,st,_e,d,a,o,this)}}else{const nt=Math.max(0,$.start),it=Math.min(rt.count,$.start+$.count);for(let at=nt,ct=it;at<ct;at++)_position$2.fromBufferAttribute(rt,at),testPoint(_position$2,at,_e,d,a,o,this)}}updateMorphTargets(){const o=this.geometry.morphAttributes,c=Object.keys(o);if(c.length>0){const d=o[c[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,$=d.length;b<$;b++){const j=d[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[j]=b}}}}}function testPoint(s,a,o,c,d,b,$){const j=_ray.distanceSqToPoint(s);if(j<o){const _e=new Vector3;_ray.closestPointToPoint(s,_e),_e.applyMatrix4(c);const et=d.ray.origin.distanceTo(_e);if(et<d.near||et>d.far)return;b.push({distance:et,distanceToRay:Math.sqrt(j),point:_e,index:a,face:null,object:$})}}class VideoTexture extends Texture$1{constructor(a,o,c,d,b,$,j,_e,et){super(a,o,c,d,b,$,j,_e,et),this.isVideoTexture=!0,this.minFilter=$!==void 0?$:LinearFilter$1,this.magFilter=b!==void 0?b:LinearFilter$1,this.generateMipmaps=!1;const tt=this;function rt(){tt.needsUpdate=!0,a.requestVideoFrameCallback(rt)}"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(rt)}clone(){return new this.constructor(this.image).copy(this)}update(){const a=this.image;"requestVideoFrameCallback"in a===!1&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture$1{constructor(a,o){super({width:a,height:o}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture$1{constructor(a,o,c,d,b,$,j,_e,et,tt,rt,nt){super(null,$,j,_e,et,tt,d,b,rt,nt),this.isCompressedTexture=!0,this.image={width:o,height:c},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}}let CompressedArrayTexture$1=class extends CompressedTexture{constructor(a,o,c,d,b,$){super(a,o,c,b,$),this.isCompressedArrayTexture=!0,this.image.depth=d,this.wrapR=ClampToEdgeWrapping$1}};class CanvasTexture extends Texture$1{constructor(a,o,c,d,b,$,j,_e,et){super(a,o,c,d,b,$,j,_e,et),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,o){const c=this.getUtoTmapping(a);return this.getPoint(c,o)}getPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return o}getSpacedPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPointAt(c/a));return o}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let c,d=this.getPoint(0),b=0;o.push(0);for(let $=1;$<=a;$++)c=this.getPoint($/a),b+=c.distanceTo(d),o.push(b),d=c;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,o){const c=this.getLengths();let d=0;const b=c.length;let $;o?$=o:$=a*c[b-1];let j=0,_e=b-1,et;for(;j<=_e;)if(d=Math.floor(j+(_e-j)/2),et=c[d]-$,et<0)j=d+1;else if(et>0)_e=d-1;else{_e=d;break}if(d=_e,c[d]===$)return d/(b-1);const tt=c[d],nt=c[d+1]-tt,it=($-tt)/nt;return(d+it)/(b-1)}getTangent(a,o){let d=a-1e-4,b=a+1e-4;d<0&&(d=0),b>1&&(b=1);const $=this.getPoint(d),j=this.getPoint(b),_e=o||($.isVector2?new Vector2$1:new Vector3);return _e.copy(j).sub($).normalize(),_e}getTangentAt(a,o){const c=this.getUtoTmapping(a);return this.getTangent(c,o)}computeFrenetFrames(a,o){const c=new Vector3,d=[],b=[],$=[],j=new Vector3,_e=new Matrix4;for(let it=0;it<=a;it++){const at=it/a;d[it]=this.getTangentAt(at,new Vector3)}b[0]=new Vector3,$[0]=new Vector3;let et=Number.MAX_VALUE;const tt=Math.abs(d[0].x),rt=Math.abs(d[0].y),nt=Math.abs(d[0].z);tt<=et&&(et=tt,c.set(1,0,0)),rt<=et&&(et=rt,c.set(0,1,0)),nt<=et&&c.set(0,0,1),j.crossVectors(d[0],c).normalize(),b[0].crossVectors(d[0],j),$[0].crossVectors(d[0],b[0]);for(let it=1;it<=a;it++){if(b[it]=b[it-1].clone(),$[it]=$[it-1].clone(),j.crossVectors(d[it-1],d[it]),j.length()>Number.EPSILON){j.normalize();const at=Math.acos(clamp$2(d[it-1].dot(d[it]),-1,1));b[it].applyMatrix4(_e.makeRotationAxis(j,at))}$[it].crossVectors(d[it],b[it])}if(o===!0){let it=Math.acos(clamp$2(b[0].dot(b[a]),-1,1));it/=a,d[0].dot(j.crossVectors(b[0],b[a]))>0&&(it=-it);for(let at=1;at<=a;at++)b[at].applyMatrix4(_e.makeRotationAxis(d[at],it*at)),$[at].crossVectors(d[at],b[at])}return{tangents:d,normals:b,binormals:$}}clone(){return new this.constructor().copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(a=0,o=0,c=1,d=1,b=0,$=Math.PI*2,j=!1,_e=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=a,this.aY=o,this.xRadius=c,this.yRadius=d,this.aStartAngle=b,this.aEndAngle=$,this.aClockwise=j,this.aRotation=_e}getPoint(a,o){const c=o||new Vector2$1,d=Math.PI*2;let b=this.aEndAngle-this.aStartAngle;const $=Math.abs(b)<Number.EPSILON;for(;b<0;)b+=d;for(;b>d;)b-=d;b<Number.EPSILON&&($?b=0:b=d),this.aClockwise===!0&&!$&&(b===d?b=-d:b=b-d);const j=this.aStartAngle+a*b;let _e=this.aX+this.xRadius*Math.cos(j),et=this.aY+this.yRadius*Math.sin(j);if(this.aRotation!==0){const tt=Math.cos(this.aRotation),rt=Math.sin(this.aRotation),nt=_e-this.aX,it=et-this.aY;_e=nt*tt-it*rt+this.aX,et=nt*rt+it*tt+this.aY}return c.set(_e,et)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(a,o,c,d,b,$){super(a,o,c,c,d,b,$),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let s=0,a=0,o=0,c=0;function d(b,$,j,_e){s=b,a=j,o=-3*b+3*$-2*j-_e,c=2*b-2*$+j+_e}return{initCatmullRom:function(b,$,j,_e,et){d($,j,et*(j-b),et*(_e-$))},initNonuniformCatmullRom:function(b,$,j,_e,et,tt,rt){let nt=($-b)/et-(j-b)/(et+tt)+(j-$)/tt,it=(j-$)/tt-(_e-$)/(tt+rt)+(_e-j)/rt;nt*=tt,it*=tt,d($,j,nt,it)},calc:function(b){const $=b*b,j=$*b;return s+a*b+o*$+c*j}}}const tmp=new Vector3,px$1=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(a=[],o=!1,c="centripetal",d=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=a,this.closed=o,this.curveType=c,this.tension=d}getPoint(a,o=new Vector3){const c=o,d=this.points,b=d.length,$=(b-(this.closed?0:1))*a;let j=Math.floor($),_e=$-j;this.closed?j+=j>0?0:(Math.floor(Math.abs(j)/b)+1)*b:_e===0&&j===b-1&&(j=b-2,_e=1);let et,tt;this.closed||j>0?et=d[(j-1)%b]:(tmp.subVectors(d[0],d[1]).add(d[0]),et=tmp);const rt=d[j%b],nt=d[(j+1)%b];if(this.closed||j+2<b?tt=d[(j+2)%b]:(tmp.subVectors(d[b-1],d[b-2]).add(d[b-1]),tt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const it=this.curveType==="chordal"?.5:.25;let at=Math.pow(et.distanceToSquared(rt),it),ct=Math.pow(rt.distanceToSquared(nt),it),st=Math.pow(nt.distanceToSquared(tt),it);ct<1e-4&&(ct=1),at<1e-4&&(at=ct),st<1e-4&&(st=ct),px$1.initNonuniformCatmullRom(et.x,rt.x,nt.x,tt.x,at,ct,st),py.initNonuniformCatmullRom(et.y,rt.y,nt.y,tt.y,at,ct,st),pz.initNonuniformCatmullRom(et.z,rt.z,nt.z,tt.z,at,ct,st)}else this.curveType==="catmullrom"&&(px$1.initCatmullRom(et.x,rt.x,nt.x,tt.x,this.tension),py.initCatmullRom(et.y,rt.y,nt.y,tt.y,this.tension),pz.initCatmullRom(et.z,rt.z,nt.z,tt.z,this.tension));return c.set(px$1.calc(_e),py.calc(_e),pz.calc(_e)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const d=a.points[o];this.points.push(d.clone())}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++){const d=this.points[o];a.points.push(d.toArray())}return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const d=a.points[o];this.points.push(new Vector3().fromArray(d))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function CatmullRom(s,a,o,c,d){const b=(c-a)*.5,$=(d-o)*.5,j=s*s,_e=s*j;return(2*o-2*c+b+$)*_e+(-3*o+3*c-2*b-$)*j+b*s+o}function QuadraticBezierP0(s,a){const o=1-s;return o*o*a}function QuadraticBezierP1(s,a){return 2*(1-s)*s*a}function QuadraticBezierP2(s,a){return s*s*a}function QuadraticBezier(s,a,o,c){return QuadraticBezierP0(s,a)+QuadraticBezierP1(s,o)+QuadraticBezierP2(s,c)}function CubicBezierP0(s,a){const o=1-s;return o*o*o*a}function CubicBezierP1(s,a){const o=1-s;return 3*o*o*s*a}function CubicBezierP2(s,a){return 3*(1-s)*s*s*a}function CubicBezierP3(s,a){return s*s*s*a}function CubicBezier(s,a,o,c,d){return CubicBezierP0(s,a)+CubicBezierP1(s,o)+CubicBezierP2(s,c)+CubicBezierP3(s,d)}class CubicBezierCurve extends Curve{constructor(a=new Vector2$1,o=new Vector2$1,c=new Vector2$1,d=new Vector2$1){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=a,this.v1=o,this.v2=c,this.v3=d}getPoint(a,o=new Vector2$1){const c=o,d=this.v0,b=this.v1,$=this.v2,j=this.v3;return c.set(CubicBezier(a,d.x,b.x,$.x,j.x),CubicBezier(a,d.y,b.y,$.y,j.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class CubicBezierCurve3 extends Curve{constructor(a=new Vector3,o=new Vector3,c=new Vector3,d=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=a,this.v1=o,this.v2=c,this.v3=d}getPoint(a,o=new Vector3){const c=o,d=this.v0,b=this.v1,$=this.v2,j=this.v3;return c.set(CubicBezier(a,d.x,b.x,$.x,j.x),CubicBezier(a,d.y,b.y,$.y,j.y),CubicBezier(a,d.z,b.z,$.z,j.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class LineCurve extends Curve{constructor(a=new Vector2$1,o=new Vector2$1){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=a,this.v2=o}getPoint(a,o=new Vector2$1){const c=o;return a===1?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}getTangent(a,o=new Vector2$1){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,o){return this.getTangent(a,o)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class LineCurve3 extends Curve{constructor(a=new Vector3,o=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=a,this.v2=o}getPoint(a,o=new Vector3){const c=o;return a===1?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}getTangent(a,o=new Vector3){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,o){return this.getTangent(a,o)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class QuadraticBezierCurve extends Curve{constructor(a=new Vector2$1,o=new Vector2$1,c=new Vector2$1){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new Vector2$1){const c=o,d=this.v0,b=this.v1,$=this.v2;return c.set(QuadraticBezier(a,d.x,b.x,$.x),QuadraticBezier(a,d.y,b.y,$.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(a=new Vector3,o=new Vector3,c=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new Vector3){const c=o,d=this.v0,b=this.v1,$=this.v2;return c.set(QuadraticBezier(a,d.x,b.x,$.x),QuadraticBezier(a,d.y,b.y,$.y),QuadraticBezier(a,d.z,b.z,$.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class SplineCurve extends Curve{constructor(a=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=a}getPoint(a,o=new Vector2$1){const c=o,d=this.points,b=(d.length-1)*a,$=Math.floor(b),j=b-$,_e=d[$===0?$:$-1],et=d[$],tt=d[$>d.length-2?d.length-1:$+1],rt=d[$>d.length-3?d.length-1:$+2];return c.set(CatmullRom(j,_e.x,et.x,tt.x,rt.x),CatmullRom(j,_e.y,et.y,tt.y,rt.y)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const d=a.points[o];this.points.push(d.clone())}return this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++){const d=this.points[o];a.points.push(d.toArray())}return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const d=a.points[o];this.points.push(new Vector2$1().fromArray(d))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);a.equals(o)||this.curves.push(new LineCurve(o,a))}getPoint(a,o){const c=a*this.getLength(),d=this.getCurveLengths();let b=0;for(;b<d.length;){if(d[b]>=c){const $=d[b]-c,j=this.curves[b],_e=j.getLength(),et=_e===0?0:1-$/_e;return j.getPointAt(et,o)}b++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let o=0;for(let c=0,d=this.curves.length;c<d;c++)o+=this.curves[c].getLength(),a.push(o);return this.cacheLengths=a,a}getSpacedPoints(a=40){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return this.autoClose&&o.push(o[0]),o}getPoints(a=12){const o=[];let c;for(let d=0,b=this.curves;d<b.length;d++){const $=b[d],j=$.isEllipseCurve?a*2:$.isLineCurve||$.isLineCurve3?1:$.isSplineCurve?a*$.points.length:a,_e=$.getPoints(j);for(let et=0;et<_e.length;et++){const tt=_e[et];c&&c.equals(tt)||(o.push(tt),c=tt)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(a){super.copy(a),this.curves=[];for(let o=0,c=a.curves.length;o<c;o++){const d=a.curves[o];this.curves.push(d.clone())}return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let o=0,c=this.curves.length;o<c;o++){const d=this.curves[o];a.curves.push(d.toJSON())}return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let o=0,c=a.curves.length;o<c;o++){const d=a.curves[o];this.curves.push(new Curves[d.type]().fromJSON(d))}return this}}let Path$1=class extends CurvePath{constructor(a){super(),this.type="Path",this.currentPoint=new Vector2$1,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let o=1,c=a.length;o<c;o++)this.lineTo(a[o].x,a[o].y);return this}moveTo(a,o){return this.currentPoint.set(a,o),this}lineTo(a,o){const c=new LineCurve(this.currentPoint.clone(),new Vector2$1(a,o));return this.curves.push(c),this.currentPoint.set(a,o),this}quadraticCurveTo(a,o,c,d){const b=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2$1(a,o),new Vector2$1(c,d));return this.curves.push(b),this.currentPoint.set(c,d),this}bezierCurveTo(a,o,c,d,b,$){const j=new CubicBezierCurve(this.currentPoint.clone(),new Vector2$1(a,o),new Vector2$1(c,d),new Vector2$1(b,$));return this.curves.push(j),this.currentPoint.set(b,$),this}splineThru(a){const o=[this.currentPoint.clone()].concat(a),c=new SplineCurve(o);return this.curves.push(c),this.currentPoint.copy(a[a.length-1]),this}arc(a,o,c,d,b,$){const j=this.currentPoint.x,_e=this.currentPoint.y;return this.absarc(a+j,o+_e,c,d,b,$),this}absarc(a,o,c,d,b,$){return this.absellipse(a,o,c,c,d,b,$),this}ellipse(a,o,c,d,b,$,j,_e){const et=this.currentPoint.x,tt=this.currentPoint.y;return this.absellipse(a+et,o+tt,c,d,b,$,j,_e),this}absellipse(a,o,c,d,b,$,j,_e){const et=new EllipseCurve(a,o,c,d,b,$,j,_e);if(this.curves.length>0){const rt=et.getPoint(0);rt.equals(this.currentPoint)||this.lineTo(rt.x,rt.y)}this.curves.push(et);const tt=et.getPoint(1);return this.currentPoint.copy(tt),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}};class LatheGeometry extends BufferGeometry{constructor(a=[new Vector2$1(0,-.5),new Vector2$1(.5,0),new Vector2$1(0,.5)],o=12,c=0,d=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:a,segments:o,phiStart:c,phiLength:d},o=Math.floor(o),d=clamp$2(d,0,Math.PI*2);const b=[],$=[],j=[],_e=[],et=[],tt=1/o,rt=new Vector3,nt=new Vector2$1,it=new Vector3,at=new Vector3,ct=new Vector3;let st=0,ot=0;for(let ht=0;ht<=a.length-1;ht++)switch(ht){case 0:st=a[ht+1].x-a[ht].x,ot=a[ht+1].y-a[ht].y,it.x=ot*1,it.y=-st,it.z=ot*0,ct.copy(it),it.normalize(),_e.push(it.x,it.y,it.z);break;case a.length-1:_e.push(ct.x,ct.y,ct.z);break;default:st=a[ht+1].x-a[ht].x,ot=a[ht+1].y-a[ht].y,it.x=ot*1,it.y=-st,it.z=ot*0,at.copy(it),it.x+=ct.x,it.y+=ct.y,it.z+=ct.z,it.normalize(),_e.push(it.x,it.y,it.z),ct.copy(at)}for(let ht=0;ht<=o;ht++){const dt=c+ht*tt*d,ft=Math.sin(dt),mt=Math.cos(dt);for(let gt=0;gt<=a.length-1;gt++){rt.x=a[gt].x*ft,rt.y=a[gt].y,rt.z=a[gt].x*mt,$.push(rt.x,rt.y,rt.z),nt.x=ht/o,nt.y=gt/(a.length-1),j.push(nt.x,nt.y);const vt=_e[3*gt+0]*ft,yt=_e[3*gt+1],Et=_e[3*gt+0]*mt;et.push(vt,yt,Et)}}for(let ht=0;ht<o;ht++)for(let dt=0;dt<a.length-1;dt++){const ft=dt+ht*a.length,mt=ft,gt=ft+a.length,vt=ft+a.length+1,yt=ft+1;b.push(mt,gt,yt),b.push(vt,yt,gt)}this.setIndex(b),this.setAttribute("position",new Float32BufferAttribute($,3)),this.setAttribute("uv",new Float32BufferAttribute(j,2)),this.setAttribute("normal",new Float32BufferAttribute(et,3))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new LatheGeometry(a.points,a.segments,a.phiStart,a.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(a=1,o=1,c=4,d=8){const b=new Path$1;b.absarc(0,-o/2,a,Math.PI*1.5,0),b.absarc(0,o/2,a,0,Math.PI*.5),super(b.getPoints(c),d),this.type="CapsuleGeometry",this.parameters={radius:a,height:o,capSegments:c,radialSegments:d}}static fromJSON(a){return new CapsuleGeometry(a.radius,a.length,a.capSegments,a.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(a=1,o=32,c=0,d=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:a,segments:o,thetaStart:c,thetaLength:d},o=Math.max(3,o);const b=[],$=[],j=[],_e=[],et=new Vector3,tt=new Vector2$1;$.push(0,0,0),j.push(0,0,1),_e.push(.5,.5);for(let rt=0,nt=3;rt<=o;rt++,nt+=3){const it=c+rt/o*d;et.x=a*Math.cos(it),et.y=a*Math.sin(it),$.push(et.x,et.y,et.z),j.push(0,0,1),tt.x=($[nt]/a+1)/2,tt.y=($[nt+1]/a+1)/2,_e.push(tt.x,tt.y)}for(let rt=1;rt<=o;rt++)b.push(rt,rt+1,0);this.setIndex(b),this.setAttribute("position",new Float32BufferAttribute($,3)),this.setAttribute("normal",new Float32BufferAttribute(j,3)),this.setAttribute("uv",new Float32BufferAttribute(_e,2))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new CircleGeometry(a.radius,a.segments,a.thetaStart,a.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(a=1,o=1,c=1,d=32,b=1,$=!1,j=0,_e=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:o,height:c,radialSegments:d,heightSegments:b,openEnded:$,thetaStart:j,thetaLength:_e};const et=this;d=Math.floor(d),b=Math.floor(b);const tt=[],rt=[],nt=[],it=[];let at=0;const ct=[],st=c/2;let ot=0;ht(),$===!1&&(a>0&&dt(!0),o>0&&dt(!1)),this.setIndex(tt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(nt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2));function ht(){const ft=new Vector3,mt=new Vector3;let gt=0;const vt=(o-a)/c;for(let yt=0;yt<=b;yt++){const Et=[],St=yt/b,Ct=St*(o-a)+a;for(let wt=0;wt<=d;wt++){const _t=wt/d,Tt=_t*_e+j,Mt=Math.sin(Tt),Bt=Math.cos(Tt);mt.x=Ct*Mt,mt.y=-St*c+st,mt.z=Ct*Bt,rt.push(mt.x,mt.y,mt.z),ft.set(Mt,vt,Bt).normalize(),nt.push(ft.x,ft.y,ft.z),it.push(_t,1-St),Et.push(at++)}ct.push(Et)}for(let yt=0;yt<d;yt++)for(let Et=0;Et<b;Et++){const St=ct[Et][yt],Ct=ct[Et+1][yt],wt=ct[Et+1][yt+1],_t=ct[Et][yt+1];tt.push(St,Ct,_t),tt.push(Ct,wt,_t),gt+=6}et.addGroup(ot,gt,0),ot+=gt}function dt(ft){const mt=at,gt=new Vector2$1,vt=new Vector3;let yt=0;const Et=ft===!0?a:o,St=ft===!0?1:-1;for(let wt=1;wt<=d;wt++)rt.push(0,st*St,0),nt.push(0,St,0),it.push(.5,.5),at++;const Ct=at;for(let wt=0;wt<=d;wt++){const Tt=wt/d*_e+j,Mt=Math.cos(Tt),Bt=Math.sin(Tt);vt.x=Et*Bt,vt.y=st*St,vt.z=Et*Mt,rt.push(vt.x,vt.y,vt.z),nt.push(0,St,0),gt.x=Mt*.5+.5,gt.y=Bt*.5*St+.5,it.push(gt.x,gt.y),at++}for(let wt=0;wt<d;wt++){const _t=mt+wt,Tt=Ct+wt;ft===!0?tt.push(Tt,Tt+1,_t):tt.push(Tt+1,Tt,_t),yt+=3}et.addGroup(ot,yt,ft===!0?1:2),ot+=yt}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(a=1,o=1,c=32,d=1,b=!1,$=0,j=Math.PI*2){super(0,a,o,c,d,b,$,j),this.type="ConeGeometry",this.parameters={radius:a,height:o,radialSegments:c,heightSegments:d,openEnded:b,thetaStart:$,thetaLength:j}}static fromJSON(a){return new ConeGeometry(a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(a=[],o=[],c=1,d=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:o,radius:c,detail:d};const b=[],$=[];j(d),et(c),tt(),this.setAttribute("position",new Float32BufferAttribute(b,3)),this.setAttribute("normal",new Float32BufferAttribute(b.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute($,2)),d===0?this.computeVertexNormals():this.normalizeNormals();function j(ht){const dt=new Vector3,ft=new Vector3,mt=new Vector3;for(let gt=0;gt<o.length;gt+=3)it(o[gt+0],dt),it(o[gt+1],ft),it(o[gt+2],mt),_e(dt,ft,mt,ht)}function _e(ht,dt,ft,mt){const gt=mt+1,vt=[];for(let yt=0;yt<=gt;yt++){vt[yt]=[];const Et=ht.clone().lerp(ft,yt/gt),St=dt.clone().lerp(ft,yt/gt),Ct=gt-yt;for(let wt=0;wt<=Ct;wt++)wt===0&&yt===gt?vt[yt][wt]=Et:vt[yt][wt]=Et.clone().lerp(St,wt/Ct)}for(let yt=0;yt<gt;yt++)for(let Et=0;Et<2*(gt-yt)-1;Et++){const St=Math.floor(Et/2);Et%2===0?(nt(vt[yt][St+1]),nt(vt[yt+1][St]),nt(vt[yt][St])):(nt(vt[yt][St+1]),nt(vt[yt+1][St+1]),nt(vt[yt+1][St]))}}function et(ht){const dt=new Vector3;for(let ft=0;ft<b.length;ft+=3)dt.x=b[ft+0],dt.y=b[ft+1],dt.z=b[ft+2],dt.normalize().multiplyScalar(ht),b[ft+0]=dt.x,b[ft+1]=dt.y,b[ft+2]=dt.z}function tt(){const ht=new Vector3;for(let dt=0;dt<b.length;dt+=3){ht.x=b[dt+0],ht.y=b[dt+1],ht.z=b[dt+2];const ft=st(ht)/2/Math.PI+.5,mt=ot(ht)/Math.PI+.5;$.push(ft,1-mt)}at(),rt()}function rt(){for(let ht=0;ht<$.length;ht+=6){const dt=$[ht+0],ft=$[ht+2],mt=$[ht+4],gt=Math.max(dt,ft,mt),vt=Math.min(dt,ft,mt);gt>.9&&vt<.1&&(dt<.2&&($[ht+0]+=1),ft<.2&&($[ht+2]+=1),mt<.2&&($[ht+4]+=1))}}function nt(ht){b.push(ht.x,ht.y,ht.z)}function it(ht,dt){const ft=ht*3;dt.x=a[ft+0],dt.y=a[ft+1],dt.z=a[ft+2]}function at(){const ht=new Vector3,dt=new Vector3,ft=new Vector3,mt=new Vector3,gt=new Vector2$1,vt=new Vector2$1,yt=new Vector2$1;for(let Et=0,St=0;Et<b.length;Et+=9,St+=6){ht.set(b[Et+0],b[Et+1],b[Et+2]),dt.set(b[Et+3],b[Et+4],b[Et+5]),ft.set(b[Et+6],b[Et+7],b[Et+8]),gt.set($[St+0],$[St+1]),vt.set($[St+2],$[St+3]),yt.set($[St+4],$[St+5]),mt.copy(ht).add(dt).add(ft).divideScalar(3);const Ct=st(mt);ct(gt,St+0,ht,Ct),ct(vt,St+2,dt,Ct),ct(yt,St+4,ft,Ct)}}function ct(ht,dt,ft,mt){mt<0&&ht.x===1&&($[dt]=ht.x-1),ft.x===0&&ft.z===0&&($[dt]=mt/2/Math.PI+.5)}function st(ht){return Math.atan2(ht.z,-ht.x)}function ot(ht){return Math.atan2(-ht.y,Math.sqrt(ht.x*ht.x+ht.z*ht.z))}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new PolyhedronGeometry(a.vertices,a.indices,a.radius,a.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(a=1,o=0){const c=(1+Math.sqrt(5))/2,d=1/c,b=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],$=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(b,$,a,o),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:o}}static fromJSON(a){return new DodecahedronGeometry(a.radius,a.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(a=null,o=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:a,thresholdAngle:o},a!==null){const d=Math.pow(10,4),b=Math.cos(DEG2RAD*o),$=a.getIndex(),j=a.getAttribute("position"),_e=$?$.count:j.count,et=[0,0,0],tt=["a","b","c"],rt=new Array(3),nt={},it=[];for(let at=0;at<_e;at+=3){$?(et[0]=$.getX(at),et[1]=$.getX(at+1),et[2]=$.getX(at+2)):(et[0]=at,et[1]=at+1,et[2]=at+2);const{a:ct,b:st,c:ot}=_triangle;if(ct.fromBufferAttribute(j,et[0]),st.fromBufferAttribute(j,et[1]),ot.fromBufferAttribute(j,et[2]),_triangle.getNormal(_normal),rt[0]=`${Math.round(ct.x*d)},${Math.round(ct.y*d)},${Math.round(ct.z*d)}`,rt[1]=`${Math.round(st.x*d)},${Math.round(st.y*d)},${Math.round(st.z*d)}`,rt[2]=`${Math.round(ot.x*d)},${Math.round(ot.y*d)},${Math.round(ot.z*d)}`,!(rt[0]===rt[1]||rt[1]===rt[2]||rt[2]===rt[0]))for(let ht=0;ht<3;ht++){const dt=(ht+1)%3,ft=rt[ht],mt=rt[dt],gt=_triangle[tt[ht]],vt=_triangle[tt[dt]],yt=`${ft}_${mt}`,Et=`${mt}_${ft}`;Et in nt&&nt[Et]?(_normal.dot(nt[Et].normal)<=b&&(it.push(gt.x,gt.y,gt.z),it.push(vt.x,vt.y,vt.z)),nt[Et]=null):yt in nt||(nt[yt]={index0:et[ht],index1:et[dt],normal:_normal.clone()})}}for(const at in nt)if(nt[at]){const{index0:ct,index1:st}=nt[at];_v0.fromBufferAttribute(j,ct),_v1$1.fromBufferAttribute(j,st),it.push(_v0.x,_v0.y,_v0.z),it.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(it,3))}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}}class Shape extends Path$1{constructor(a){super(a),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(a){const o=[];for(let c=0,d=this.holes.length;c<d;c++)o[c]=this.holes[c].getPoints(a);return o}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let o=0,c=a.holes.length;o<c;o++){const d=a.holes[o];this.holes.push(d.clone())}return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let o=0,c=this.holes.length;o<c;o++){const d=this.holes[o];a.holes.push(d.toJSON())}return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let o=0,c=a.holes.length;o<c;o++){const d=a.holes[o];this.holes.push(new Path$1().fromJSON(d))}return this}}const Earcut={triangulate:function(s,a,o=2){const c=a&&a.length,d=c?a[0]*o:s.length;let b=linkedList(s,0,d,o,!0);const $=[];if(!b||b.next===b.prev)return $;let j,_e,et,tt,rt,nt,it;if(c&&(b=eliminateHoles(s,a,b,o)),s.length>80*o){j=et=s[0],_e=tt=s[1];for(let at=o;at<d;at+=o)rt=s[at],nt=s[at+1],rt<j&&(j=rt),nt<_e&&(_e=nt),rt>et&&(et=rt),nt>tt&&(tt=nt);it=Math.max(et-j,tt-_e),it=it!==0?32767/it:0}return earcutLinked(b,$,o,j,_e,it,0),$}};function linkedList(s,a,o,c,d){let b,$;if(d===signedArea(s,a,o,c)>0)for(b=a;b<o;b+=c)$=insertNode(b,s[b],s[b+1],$);else for(b=o-c;b>=a;b-=c)$=insertNode(b,s[b],s[b+1],$);return $&&equals$1($,$.next)&&(removeNode($),$=$.next),$}function filterPoints(s,a){if(!s)return s;a||(a=s);let o=s,c;do if(c=!1,!o.steiner&&(equals$1(o,o.next)||area(o.prev,o,o.next)===0)){if(removeNode(o),o=a=o.prev,o===o.next)break;c=!0}else o=o.next;while(c||o!==a);return a}function earcutLinked(s,a,o,c,d,b,$){if(!s)return;!$&&b&&indexCurve(s,c,d,b);let j=s,_e,et;for(;s.prev!==s.next;){if(_e=s.prev,et=s.next,b?isEarHashed(s,c,d,b):isEar(s)){a.push(_e.i/o|0),a.push(s.i/o|0),a.push(et.i/o|0),removeNode(s),s=et.next,j=et.next;continue}if(s=et,s===j){$?$===1?(s=cureLocalIntersections(filterPoints(s),a,o),earcutLinked(s,a,o,c,d,b,2)):$===2&&splitEarcut(s,a,o,c,d,b):earcutLinked(filterPoints(s),a,o,c,d,b,1);break}}}function isEar(s){const a=s.prev,o=s,c=s.next;if(area(a,o,c)>=0)return!1;const d=a.x,b=o.x,$=c.x,j=a.y,_e=o.y,et=c.y,tt=d<b?d<$?d:$:b<$?b:$,rt=j<_e?j<et?j:et:_e<et?_e:et,nt=d>b?d>$?d:$:b>$?b:$,it=j>_e?j>et?j:et:_e>et?_e:et;let at=c.next;for(;at!==a;){if(at.x>=tt&&at.x<=nt&&at.y>=rt&&at.y<=it&&pointInTriangle(d,j,b,_e,$,et,at.x,at.y)&&area(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function isEarHashed(s,a,o,c){const d=s.prev,b=s,$=s.next;if(area(d,b,$)>=0)return!1;const j=d.x,_e=b.x,et=$.x,tt=d.y,rt=b.y,nt=$.y,it=j<_e?j<et?j:et:_e<et?_e:et,at=tt<rt?tt<nt?tt:nt:rt<nt?rt:nt,ct=j>_e?j>et?j:et:_e>et?_e:et,st=tt>rt?tt>nt?tt:nt:rt>nt?rt:nt,ot=zOrder(it,at,a,o,c),ht=zOrder(ct,st,a,o,c);let dt=s.prevZ,ft=s.nextZ;for(;dt&&dt.z>=ot&&ft&&ft.z<=ht;){if(dt.x>=it&&dt.x<=ct&&dt.y>=at&&dt.y<=st&&dt!==d&&dt!==$&&pointInTriangle(j,tt,_e,rt,et,nt,dt.x,dt.y)&&area(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,ft.x>=it&&ft.x<=ct&&ft.y>=at&&ft.y<=st&&ft!==d&&ft!==$&&pointInTriangle(j,tt,_e,rt,et,nt,ft.x,ft.y)&&area(ft.prev,ft,ft.next)>=0))return!1;ft=ft.nextZ}for(;dt&&dt.z>=ot;){if(dt.x>=it&&dt.x<=ct&&dt.y>=at&&dt.y<=st&&dt!==d&&dt!==$&&pointInTriangle(j,tt,_e,rt,et,nt,dt.x,dt.y)&&area(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;ft&&ft.z<=ht;){if(ft.x>=it&&ft.x<=ct&&ft.y>=at&&ft.y<=st&&ft!==d&&ft!==$&&pointInTriangle(j,tt,_e,rt,et,nt,ft.x,ft.y)&&area(ft.prev,ft,ft.next)>=0)return!1;ft=ft.nextZ}return!0}function cureLocalIntersections(s,a,o){let c=s;do{const d=c.prev,b=c.next.next;!equals$1(d,b)&&intersects(d,c,c.next,b)&&locallyInside(d,b)&&locallyInside(b,d)&&(a.push(d.i/o|0),a.push(c.i/o|0),a.push(b.i/o|0),removeNode(c),removeNode(c.next),c=s=b),c=c.next}while(c!==s);return filterPoints(c)}function splitEarcut(s,a,o,c,d,b){let $=s;do{let j=$.next.next;for(;j!==$.prev;){if($.i!==j.i&&isValidDiagonal($,j)){let _e=splitPolygon($,j);$=filterPoints($,$.next),_e=filterPoints(_e,_e.next),earcutLinked($,a,o,c,d,b,0),earcutLinked(_e,a,o,c,d,b,0);return}j=j.next}$=$.next}while($!==s)}function eliminateHoles(s,a,o,c){const d=[];let b,$,j,_e,et;for(b=0,$=a.length;b<$;b++)j=a[b]*c,_e=b<$-1?a[b+1]*c:s.length,et=linkedList(s,j,_e,c,!1),et===et.next&&(et.steiner=!0),d.push(getLeftmost(et));for(d.sort(compareX),b=0;b<d.length;b++)o=eliminateHole(d[b],o);return o}function compareX(s,a){return s.x-a.x}function eliminateHole(s,a){const o=findHoleBridge(s,a);if(!o)return a;const c=splitPolygon(o,s);return filterPoints(c,c.next),filterPoints(o,o.next)}function findHoleBridge(s,a){let o=a,c=-1/0,d;const b=s.x,$=s.y;do{if($<=o.y&&$>=o.next.y&&o.next.y!==o.y){const nt=o.x+($-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(nt<=b&&nt>c&&(c=nt,d=o.x<o.next.x?o:o.next,nt===b))return d}o=o.next}while(o!==a);if(!d)return null;const j=d,_e=d.x,et=d.y;let tt=1/0,rt;o=d;do b>=o.x&&o.x>=_e&&b!==o.x&&pointInTriangle($<et?b:c,$,_e,et,$<et?c:b,$,o.x,o.y)&&(rt=Math.abs($-o.y)/(b-o.x),locallyInside(o,s)&&(rt<tt||rt===tt&&(o.x>d.x||o.x===d.x&&sectorContainsSector(d,o)))&&(d=o,tt=rt)),o=o.next;while(o!==j);return d}function sectorContainsSector(s,a){return area(s.prev,s,a.prev)<0&&area(a.next,s,s.next)<0}function indexCurve(s,a,o,c){let d=s;do d.z===0&&(d.z=zOrder(d.x,d.y,a,o,c)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next;while(d!==s);d.prevZ.nextZ=null,d.prevZ=null,sortLinked(d)}function sortLinked(s){let a,o,c,d,b,$,j,_e,et=1;do{for(o=s,s=null,b=null,$=0;o;){for($++,c=o,j=0,a=0;a<et&&(j++,c=c.nextZ,!!c);a++);for(_e=et;j>0||_e>0&&c;)j!==0&&(_e===0||!c||o.z<=c.z)?(d=o,o=o.nextZ,j--):(d=c,c=c.nextZ,_e--),b?b.nextZ=d:s=d,d.prevZ=b,b=d;o=c}b.nextZ=null,et*=2}while($>1);return s}function zOrder(s,a,o,c,d){return s=(s-o)*d|0,a=(a-c)*d|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,s|a<<1}function getLeftmost(s){let a=s,o=s;do(a.x<o.x||a.x===o.x&&a.y<o.y)&&(o=a),a=a.next;while(a!==s);return o}function pointInTriangle(s,a,o,c,d,b,$,j){return(d-$)*(a-j)>=(s-$)*(b-j)&&(s-$)*(c-j)>=(o-$)*(a-j)&&(o-$)*(b-j)>=(d-$)*(c-j)}function isValidDiagonal(s,a){return s.next.i!==a.i&&s.prev.i!==a.i&&!intersectsPolygon(s,a)&&(locallyInside(s,a)&&locallyInside(a,s)&&middleInside(s,a)&&(area(s.prev,s,a.prev)||area(s,a.prev,a))||equals$1(s,a)&&area(s.prev,s,s.next)>0&&area(a.prev,a,a.next)>0)}function area(s,a,o){return(a.y-s.y)*(o.x-a.x)-(a.x-s.x)*(o.y-a.y)}function equals$1(s,a){return s.x===a.x&&s.y===a.y}function intersects(s,a,o,c){const d=sign(area(s,a,o)),b=sign(area(s,a,c)),$=sign(area(o,c,s)),j=sign(area(o,c,a));return!!(d!==b&&$!==j||d===0&&onSegment(s,o,a)||b===0&&onSegment(s,c,a)||$===0&&onSegment(o,s,c)||j===0&&onSegment(o,a,c))}function onSegment(s,a,o){return a.x<=Math.max(s.x,o.x)&&a.x>=Math.min(s.x,o.x)&&a.y<=Math.max(s.y,o.y)&&a.y>=Math.min(s.y,o.y)}function sign(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,a){let o=s;do{if(o.i!==s.i&&o.next.i!==s.i&&o.i!==a.i&&o.next.i!==a.i&&intersects(o,o.next,s,a))return!0;o=o.next}while(o!==s);return!1}function locallyInside(s,a){return area(s.prev,s,s.next)<0?area(s,a,s.next)>=0&&area(s,s.prev,a)>=0:area(s,a,s.prev)<0||area(s,s.next,a)<0}function middleInside(s,a){let o=s,c=!1;const d=(s.x+a.x)/2,b=(s.y+a.y)/2;do o.y>b!=o.next.y>b&&o.next.y!==o.y&&d<(o.next.x-o.x)*(b-o.y)/(o.next.y-o.y)+o.x&&(c=!c),o=o.next;while(o!==s);return c}function splitPolygon(s,a){const o=new Node(s.i,s.x,s.y),c=new Node(a.i,a.x,a.y),d=s.next,b=a.prev;return s.next=a,a.prev=s,o.next=d,d.prev=o,c.next=o,o.prev=c,b.next=c,c.prev=b,c}function insertNode(s,a,o,c){const d=new Node(s,a,o);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Node(s,a,o){this.i=s,this.x=a,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(s,a,o,c){let d=0;for(let b=a,$=o-c;b<o;b+=c)d+=(s[$]-s[b])*(s[b+1]+s[$+1]),$=b;return d}class ShapeUtils{static area(a){const o=a.length;let c=0;for(let d=o-1,b=0;b<o;d=b++)c+=a[d].x*a[b].y-a[b].x*a[d].y;return c*.5}static isClockWise(a){return ShapeUtils.area(a)<0}static triangulateShape(a,o){const c=[],d=[],b=[];removeDupEndPts(a),addContour(c,a);let $=a.length;o.forEach(removeDupEndPts);for(let _e=0;_e<o.length;_e++)d.push($),$+=o[_e].length,addContour(c,o[_e]);const j=Earcut.triangulate(c,d);for(let _e=0;_e<j.length;_e+=3)b.push(j.slice(_e,_e+3));return b}}function removeDupEndPts(s){const a=s.length;a>2&&s[a-1].equals(s[0])&&s.pop()}function addContour(s,a){for(let o=0;o<a.length;o++)s.push(a[o].x),s.push(a[o].y)}class ExtrudeGeometry extends BufferGeometry{constructor(a=new Shape([new Vector2$1(.5,.5),new Vector2$1(-.5,.5),new Vector2$1(-.5,-.5),new Vector2$1(.5,-.5)]),o={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:o},a=Array.isArray(a)?a:[a];const c=this,d=[],b=[];for(let j=0,_e=a.length;j<_e;j++){const et=a[j];$(et)}this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2)),this.computeVertexNormals();function $(j){const _e=[],et=o.curveSegments!==void 0?o.curveSegments:12,tt=o.steps!==void 0?o.steps:1,rt=o.depth!==void 0?o.depth:1;let nt=o.bevelEnabled!==void 0?o.bevelEnabled:!0,it=o.bevelThickness!==void 0?o.bevelThickness:.2,at=o.bevelSize!==void 0?o.bevelSize:it-.1,ct=o.bevelOffset!==void 0?o.bevelOffset:0,st=o.bevelSegments!==void 0?o.bevelSegments:3;const ot=o.extrudePath,ht=o.UVGenerator!==void 0?o.UVGenerator:WorldUVGenerator;let dt,ft=!1,mt,gt,vt,yt;ot&&(dt=ot.getSpacedPoints(tt),ft=!0,nt=!1,mt=ot.computeFrenetFrames(tt,!1),gt=new Vector3,vt=new Vector3,yt=new Vector3),nt||(st=0,it=0,at=0,ct=0);const Et=j.extractPoints(et);let St=Et.shape;const Ct=Et.holes;if(!ShapeUtils.isClockWise(St)){St=St.reverse();for(let kt=0,Xt=Ct.length;kt<Xt;kt++){const ar=Ct[kt];ShapeUtils.isClockWise(ar)&&(Ct[kt]=ar.reverse())}}const _t=ShapeUtils.triangulateShape(St,Ct),Tt=St;for(let kt=0,Xt=Ct.length;kt<Xt;kt++){const ar=Ct[kt];St=St.concat(ar)}function Mt(kt,Xt,ar){return Xt||console.error("THREE.ExtrudeGeometry: vec does not exist"),kt.clone().addScaledVector(Xt,ar)}const Bt=St.length,Rt=_t.length;function bt(kt,Xt,ar){let yr,mr,Br;const _r=kt.x-Xt.x,br=kt.y-Xt.y,Pr=ar.x-kt.x,Or=ar.y-kt.y,Wr=_r*_r+br*br,Ot=_r*Or-br*Pr;if(Math.abs(Ot)>Number.EPSILON){const Ft=Math.sqrt(Wr),ir=Math.sqrt(Pr*Pr+Or*Or),Sr=Xt.x-br/Ft,xr=Xt.y+_r/Ft,Ir=ar.x-Or/ir,Fr=ar.y+Pr/ir,Mr=((Ir-Sr)*Or-(Fr-xr)*Pr)/(_r*Or-br*Pr);yr=Sr+_r*Mr-kt.x,mr=xr+br*Mr-kt.y;const cr=yr*yr+mr*mr;if(cr<=2)return new Vector2$1(yr,mr);Br=Math.sqrt(cr/2)}else{let Ft=!1;_r>Number.EPSILON?Pr>Number.EPSILON&&(Ft=!0):_r<-Number.EPSILON?Pr<-Number.EPSILON&&(Ft=!0):Math.sign(br)===Math.sign(Or)&&(Ft=!0),Ft?(yr=-br,mr=_r,Br=Math.sqrt(Wr)):(yr=_r,mr=br,Br=Math.sqrt(Wr/2))}return new Vector2$1(yr/Br,mr/Br)}const Pt=[];for(let kt=0,Xt=Tt.length,ar=Xt-1,yr=kt+1;kt<Xt;kt++,ar++,yr++)ar===Xt&&(ar=0),yr===Xt&&(yr=0),Pt[kt]=bt(Tt[kt],Tt[ar],Tt[yr]);const Dt=[];let $t,Lt=Pt.concat();for(let kt=0,Xt=Ct.length;kt<Xt;kt++){const ar=Ct[kt];$t=[];for(let yr=0,mr=ar.length,Br=mr-1,_r=yr+1;yr<mr;yr++,Br++,_r++)Br===mr&&(Br=0),_r===mr&&(_r=0),$t[yr]=bt(ar[yr],ar[Br],ar[_r]);Dt.push($t),Lt=Lt.concat($t)}for(let kt=0;kt<st;kt++){const Xt=kt/st,ar=it*Math.cos(Xt*Math.PI/2),yr=at*Math.sin(Xt*Math.PI/2)+ct;for(let mr=0,Br=Tt.length;mr<Br;mr++){const _r=Mt(Tt[mr],Pt[mr],yr);sr(_r.x,_r.y,-ar)}for(let mr=0,Br=Ct.length;mr<Br;mr++){const _r=Ct[mr];$t=Dt[mr];for(let br=0,Pr=_r.length;br<Pr;br++){const Or=Mt(_r[br],$t[br],yr);sr(Or.x,Or.y,-ar)}}}const Jt=at+ct;for(let kt=0;kt<Bt;kt++){const Xt=nt?Mt(St[kt],Lt[kt],Jt):St[kt];ft?(vt.copy(mt.normals[0]).multiplyScalar(Xt.x),gt.copy(mt.binormals[0]).multiplyScalar(Xt.y),yt.copy(dt[0]).add(vt).add(gt),sr(yt.x,yt.y,yt.z)):sr(Xt.x,Xt.y,0)}for(let kt=1;kt<=tt;kt++)for(let Xt=0;Xt<Bt;Xt++){const ar=nt?Mt(St[Xt],Lt[Xt],Jt):St[Xt];ft?(vt.copy(mt.normals[kt]).multiplyScalar(ar.x),gt.copy(mt.binormals[kt]).multiplyScalar(ar.y),yt.copy(dt[kt]).add(vt).add(gt),sr(yt.x,yt.y,yt.z)):sr(ar.x,ar.y,rt/tt*kt)}for(let kt=st-1;kt>=0;kt--){const Xt=kt/st,ar=it*Math.cos(Xt*Math.PI/2),yr=at*Math.sin(Xt*Math.PI/2)+ct;for(let mr=0,Br=Tt.length;mr<Br;mr++){const _r=Mt(Tt[mr],Pt[mr],yr);sr(_r.x,_r.y,rt+ar)}for(let mr=0,Br=Ct.length;mr<Br;mr++){const _r=Ct[mr];$t=Dt[mr];for(let br=0,Pr=_r.length;br<Pr;br++){const Or=Mt(_r[br],$t[br],yr);ft?sr(Or.x,Or.y+dt[tt-1].y,dt[tt-1].x+ar):sr(Or.x,Or.y,rt+ar)}}}Qt(),or();function Qt(){const kt=d.length/3;if(nt){let Xt=0,ar=Bt*Xt;for(let yr=0;yr<Rt;yr++){const mr=_t[yr];Ar(mr[2]+ar,mr[1]+ar,mr[0]+ar)}Xt=tt+st*2,ar=Bt*Xt;for(let yr=0;yr<Rt;yr++){const mr=_t[yr];Ar(mr[0]+ar,mr[1]+ar,mr[2]+ar)}}else{for(let Xt=0;Xt<Rt;Xt++){const ar=_t[Xt];Ar(ar[2],ar[1],ar[0])}for(let Xt=0;Xt<Rt;Xt++){const ar=_t[Xt];Ar(ar[0]+Bt*tt,ar[1]+Bt*tt,ar[2]+Bt*tt)}}c.addGroup(kt,d.length/3-kt,0)}function or(){const kt=d.length/3;let Xt=0;er(Tt,Xt),Xt+=Tt.length;for(let ar=0,yr=Ct.length;ar<yr;ar++){const mr=Ct[ar];er(mr,Xt),Xt+=mr.length}c.addGroup(kt,d.length/3-kt,1)}function er(kt,Xt){let ar=kt.length;for(;--ar>=0;){const yr=ar;let mr=ar-1;mr<0&&(mr=kt.length-1);for(let Br=0,_r=tt+st*2;Br<_r;Br++){const br=Bt*Br,Pr=Bt*(Br+1),Or=Xt+yr+br,Wr=Xt+mr+br,Ot=Xt+mr+Pr,Ft=Xt+yr+Pr;Er(Or,Wr,Ot,Ft)}}}function sr(kt,Xt,ar){_e.push(kt),_e.push(Xt),_e.push(ar)}function Ar(kt,Xt,ar){Tr(kt),Tr(Xt),Tr(ar);const yr=d.length/3,mr=ht.generateTopUV(c,d,yr-3,yr-2,yr-1);ur(mr[0]),ur(mr[1]),ur(mr[2])}function Er(kt,Xt,ar,yr){Tr(kt),Tr(Xt),Tr(yr),Tr(Xt),Tr(ar),Tr(yr);const mr=d.length/3,Br=ht.generateSideWallUV(c,d,mr-6,mr-3,mr-2,mr-1);ur(Br[0]),ur(Br[1]),ur(Br[3]),ur(Br[1]),ur(Br[2]),ur(Br[3])}function Tr(kt){d.push(_e[kt*3+0]),d.push(_e[kt*3+1]),d.push(_e[kt*3+2])}function ur(kt){b.push(kt.x),b.push(kt.y)}}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}toJSON(){const a=super.toJSON(),o=this.parameters.shapes,c=this.parameters.options;return toJSON$1(o,c,a)}static fromJSON(a,o){const c=[];for(let b=0,$=a.shapes.length;b<$;b++){const j=o[a.shapes[b]];c.push(j)}const d=a.options.extrudePath;return d!==void 0&&(a.options.extrudePath=new Curves[d.type]().fromJSON(d)),new ExtrudeGeometry(c,a.options)}}const WorldUVGenerator={generateTopUV:function(s,a,o,c,d){const b=a[o*3],$=a[o*3+1],j=a[c*3],_e=a[c*3+1],et=a[d*3],tt=a[d*3+1];return[new Vector2$1(b,$),new Vector2$1(j,_e),new Vector2$1(et,tt)]},generateSideWallUV:function(s,a,o,c,d,b){const $=a[o*3],j=a[o*3+1],_e=a[o*3+2],et=a[c*3],tt=a[c*3+1],rt=a[c*3+2],nt=a[d*3],it=a[d*3+1],at=a[d*3+2],ct=a[b*3],st=a[b*3+1],ot=a[b*3+2];return Math.abs(j-tt)<Math.abs($-et)?[new Vector2$1($,1-_e),new Vector2$1(et,1-rt),new Vector2$1(nt,1-at),new Vector2$1(ct,1-ot)]:[new Vector2$1(j,1-_e),new Vector2$1(tt,1-rt),new Vector2$1(it,1-at),new Vector2$1(st,1-ot)]}};function toJSON$1(s,a,o){if(o.shapes=[],Array.isArray(s))for(let c=0,d=s.length;c<d;c++){const b=s[c];o.shapes.push(b.uuid)}else o.shapes.push(s.uuid);return o.options=Object.assign({},a),a.extrudePath!==void 0&&(o.options.extrudePath=a.extrudePath.toJSON()),o}class IcosahedronGeometry extends PolyhedronGeometry{constructor(a=1,o=0){const c=(1+Math.sqrt(5))/2,d=[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],b=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(d,b,a,o),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:o}}static fromJSON(a){return new IcosahedronGeometry(a.radius,a.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(a=1,o=0){const c=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],d=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(c,d,a,o),this.type="OctahedronGeometry",this.parameters={radius:a,detail:o}}static fromJSON(a){return new OctahedronGeometry(a.radius,a.detail)}}class RingGeometry extends BufferGeometry{constructor(a=.5,o=1,c=32,d=1,b=0,$=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:o,thetaSegments:c,phiSegments:d,thetaStart:b,thetaLength:$},c=Math.max(3,c),d=Math.max(1,d);const j=[],_e=[],et=[],tt=[];let rt=a;const nt=(o-a)/d,it=new Vector3,at=new Vector2$1;for(let ct=0;ct<=d;ct++){for(let st=0;st<=c;st++){const ot=b+st/c*$;it.x=rt*Math.cos(ot),it.y=rt*Math.sin(ot),_e.push(it.x,it.y,it.z),et.push(0,0,1),at.x=(it.x/o+1)/2,at.y=(it.y/o+1)/2,tt.push(at.x,at.y)}rt+=nt}for(let ct=0;ct<d;ct++){const st=ct*(c+1);for(let ot=0;ot<c;ot++){const ht=ot+st,dt=ht,ft=ht+c+1,mt=ht+c+2,gt=ht+1;j.push(dt,ft,gt),j.push(ft,mt,gt)}}this.setIndex(j),this.setAttribute("position",new Float32BufferAttribute(_e,3)),this.setAttribute("normal",new Float32BufferAttribute(et,3)),this.setAttribute("uv",new Float32BufferAttribute(tt,2))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new RingGeometry(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(a=new Shape([new Vector2$1(0,.5),new Vector2$1(-.5,-.5),new Vector2$1(.5,-.5)]),o=12){super(),this.type="ShapeGeometry",this.parameters={shapes:a,curveSegments:o};const c=[],d=[],b=[],$=[];let j=0,_e=0;if(Array.isArray(a)===!1)et(a);else for(let tt=0;tt<a.length;tt++)et(a[tt]),this.addGroup(j,_e,tt),j+=_e,_e=0;this.setIndex(c),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(b,3)),this.setAttribute("uv",new Float32BufferAttribute($,2));function et(tt){const rt=d.length/3,nt=tt.extractPoints(o);let it=nt.shape;const at=nt.holes;ShapeUtils.isClockWise(it)===!1&&(it=it.reverse());for(let st=0,ot=at.length;st<ot;st++){const ht=at[st];ShapeUtils.isClockWise(ht)===!0&&(at[st]=ht.reverse())}const ct=ShapeUtils.triangulateShape(it,at);for(let st=0,ot=at.length;st<ot;st++){const ht=at[st];it=it.concat(ht)}for(let st=0,ot=it.length;st<ot;st++){const ht=it[st];d.push(ht.x,ht.y,0),b.push(0,0,1),$.push(ht.x,ht.y)}for(let st=0,ot=ct.length;st<ot;st++){const ht=ct[st],dt=ht[0]+rt,ft=ht[1]+rt,mt=ht[2]+rt;c.push(dt,ft,mt),_e+=3}}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}toJSON(){const a=super.toJSON(),o=this.parameters.shapes;return toJSON(o,a)}static fromJSON(a,o){const c=[];for(let d=0,b=a.shapes.length;d<b;d++){const $=o[a.shapes[d]];c.push($)}return new ShapeGeometry(c,a.curveSegments)}}function toJSON(s,a){if(a.shapes=[],Array.isArray(s))for(let o=0,c=s.length;o<c;o++){const d=s[o];a.shapes.push(d.uuid)}else a.shapes.push(s.uuid);return a}class SphereGeometry extends BufferGeometry{constructor(a=1,o=32,c=16,d=0,b=Math.PI*2,$=0,j=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:o,heightSegments:c,phiStart:d,phiLength:b,thetaStart:$,thetaLength:j},o=Math.max(3,Math.floor(o)),c=Math.max(2,Math.floor(c));const _e=Math.min($+j,Math.PI);let et=0;const tt=[],rt=new Vector3,nt=new Vector3,it=[],at=[],ct=[],st=[];for(let ot=0;ot<=c;ot++){const ht=[],dt=ot/c;let ft=0;ot===0&&$===0?ft=.5/o:ot===c&&_e===Math.PI&&(ft=-.5/o);for(let mt=0;mt<=o;mt++){const gt=mt/o;rt.x=-a*Math.cos(d+gt*b)*Math.sin($+dt*j),rt.y=a*Math.cos($+dt*j),rt.z=a*Math.sin(d+gt*b)*Math.sin($+dt*j),at.push(rt.x,rt.y,rt.z),nt.copy(rt).normalize(),ct.push(nt.x,nt.y,nt.z),st.push(gt+ft,1-dt),ht.push(et++)}tt.push(ht)}for(let ot=0;ot<c;ot++)for(let ht=0;ht<o;ht++){const dt=tt[ot][ht+1],ft=tt[ot][ht],mt=tt[ot+1][ht],gt=tt[ot+1][ht+1];(ot!==0||$>0)&&it.push(dt,ft,gt),(ot!==c-1||_e<Math.PI)&&it.push(ft,mt,gt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(a=1,o=0){const c=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],d=[2,1,0,0,3,2,1,3,0,2,3,1];super(c,d,a,o),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:o}}static fromJSON(a){return new TetrahedronGeometry(a.radius,a.detail)}}class TorusGeometry extends BufferGeometry{constructor(a=1,o=.4,c=12,d=48,b=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:a,tube:o,radialSegments:c,tubularSegments:d,arc:b},c=Math.floor(c),d=Math.floor(d);const $=[],j=[],_e=[],et=[],tt=new Vector3,rt=new Vector3,nt=new Vector3;for(let it=0;it<=c;it++)for(let at=0;at<=d;at++){const ct=at/d*b,st=it/c*Math.PI*2;rt.x=(a+o*Math.cos(st))*Math.cos(ct),rt.y=(a+o*Math.cos(st))*Math.sin(ct),rt.z=o*Math.sin(st),j.push(rt.x,rt.y,rt.z),tt.x=a*Math.cos(ct),tt.y=a*Math.sin(ct),nt.subVectors(rt,tt).normalize(),_e.push(nt.x,nt.y,nt.z),et.push(at/d),et.push(it/c)}for(let it=1;it<=c;it++)for(let at=1;at<=d;at++){const ct=(d+1)*it+at-1,st=(d+1)*(it-1)+at-1,ot=(d+1)*(it-1)+at,ht=(d+1)*it+at;$.push(ct,st,ht),$.push(st,ot,ht)}this.setIndex($),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(_e,3)),this.setAttribute("uv",new Float32BufferAttribute(et,2))}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(a=1,o=.4,c=64,d=8,b=2,$=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:o,tubularSegments:c,radialSegments:d,p:b,q:$},c=Math.floor(c),d=Math.floor(d);const j=[],_e=[],et=[],tt=[],rt=new Vector3,nt=new Vector3,it=new Vector3,at=new Vector3,ct=new Vector3,st=new Vector3,ot=new Vector3;for(let dt=0;dt<=c;++dt){const ft=dt/c*b*Math.PI*2;ht(ft,b,$,a,it),ht(ft+.01,b,$,a,at),st.subVectors(at,it),ot.addVectors(at,it),ct.crossVectors(st,ot),ot.crossVectors(ct,st),ct.normalize(),ot.normalize();for(let mt=0;mt<=d;++mt){const gt=mt/d*Math.PI*2,vt=-o*Math.cos(gt),yt=o*Math.sin(gt);rt.x=it.x+(vt*ot.x+yt*ct.x),rt.y=it.y+(vt*ot.y+yt*ct.y),rt.z=it.z+(vt*ot.z+yt*ct.z),_e.push(rt.x,rt.y,rt.z),nt.subVectors(rt,it).normalize(),et.push(nt.x,nt.y,nt.z),tt.push(dt/c),tt.push(mt/d)}}for(let dt=1;dt<=c;dt++)for(let ft=1;ft<=d;ft++){const mt=(d+1)*(dt-1)+(ft-1),gt=(d+1)*dt+(ft-1),vt=(d+1)*dt+ft,yt=(d+1)*(dt-1)+ft;j.push(mt,gt,yt),j.push(gt,vt,yt)}this.setIndex(j),this.setAttribute("position",new Float32BufferAttribute(_e,3)),this.setAttribute("normal",new Float32BufferAttribute(et,3)),this.setAttribute("uv",new Float32BufferAttribute(tt,2));function ht(dt,ft,mt,gt,vt){const yt=Math.cos(dt),Et=Math.sin(dt),St=mt/ft*dt,Ct=Math.cos(St);vt.x=gt*(2+Ct)*.5*yt,vt.y=gt*(2+Ct)*Et*.5,vt.z=gt*Math.sin(St)*.5}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}static fromJSON(a){return new TorusKnotGeometry(a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q)}}class TubeGeometry extends BufferGeometry{constructor(a=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),o=64,c=1,d=8,b=!1){super(),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:o,radius:c,radialSegments:d,closed:b};const $=a.computeFrenetFrames(o,b);this.tangents=$.tangents,this.normals=$.normals,this.binormals=$.binormals;const j=new Vector3,_e=new Vector3,et=new Vector2$1;let tt=new Vector3;const rt=[],nt=[],it=[],at=[];ct(),this.setIndex(at),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(nt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2));function ct(){for(let dt=0;dt<o;dt++)st(dt);st(b===!1?o:0),ht(),ot()}function st(dt){tt=a.getPointAt(dt/o,tt);const ft=$.normals[dt],mt=$.binormals[dt];for(let gt=0;gt<=d;gt++){const vt=gt/d*Math.PI*2,yt=Math.sin(vt),Et=-Math.cos(vt);_e.x=Et*ft.x+yt*mt.x,_e.y=Et*ft.y+yt*mt.y,_e.z=Et*ft.z+yt*mt.z,_e.normalize(),nt.push(_e.x,_e.y,_e.z),j.x=tt.x+c*_e.x,j.y=tt.y+c*_e.y,j.z=tt.z+c*_e.z,rt.push(j.x,j.y,j.z)}}function ot(){for(let dt=1;dt<=o;dt++)for(let ft=1;ft<=d;ft++){const mt=(d+1)*(dt-1)+(ft-1),gt=(d+1)*dt+(ft-1),vt=(d+1)*dt+ft,yt=(d+1)*(dt-1)+ft;at.push(mt,gt,yt),at.push(gt,vt,yt)}}function ht(){for(let dt=0;dt<=o;dt++)for(let ft=0;ft<=d;ft++)et.x=dt/o,et.y=ft/d,it.push(et.x,et.y)}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}toJSON(){const a=super.toJSON();return a.path=this.parameters.path.toJSON(),a}static fromJSON(a){return new TubeGeometry(new Curves[a.path.type]().fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed)}}class WireframeGeometry extends BufferGeometry{constructor(a=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:a},a!==null){const o=[],c=new Set,d=new Vector3,b=new Vector3;if(a.index!==null){const $=a.attributes.position,j=a.index;let _e=a.groups;_e.length===0&&(_e=[{start:0,count:j.count,materialIndex:0}]);for(let et=0,tt=_e.length;et<tt;++et){const rt=_e[et],nt=rt.start,it=rt.count;for(let at=nt,ct=nt+it;at<ct;at+=3)for(let st=0;st<3;st++){const ot=j.getX(at+st),ht=j.getX(at+(st+1)%3);d.fromBufferAttribute($,ot),b.fromBufferAttribute($,ht),isUniqueEdge(d,b,c)===!0&&(o.push(d.x,d.y,d.z),o.push(b.x,b.y,b.z))}}}else{const $=a.attributes.position;for(let j=0,_e=$.count/3;j<_e;j++)for(let et=0;et<3;et++){const tt=3*j+et,rt=3*j+(et+1)%3;d.fromBufferAttribute($,tt),b.fromBufferAttribute($,rt),isUniqueEdge(d,b,c)===!0&&(o.push(d.x,d.y,d.z),o.push(b.x,b.y,b.z))}}this.setAttribute("position",new Float32BufferAttribute(o,3))}}copy(a){return super.copy(a),this.parameters=Object.assign({},a.parameters),this}}function isUniqueEdge(s,a,o){const c=`${s.x},${s.y},${s.z}-${a.x},${a.y},${a.z}`,d=`${a.x},${a.y},${a.z}-${s.x},${s.y},${s.z}`;return o.has(c)===!0||o.has(d)===!0?!1:(o.add(c),o.add(d),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(a){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.fog=a.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(a){super(a),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(a){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(a){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2$1(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$2(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(a)}get anisotropy(){return this._anisotropy}set anisotropy(a){this._anisotropy>0!=a>0&&this.version++,this._anisotropy=a}get clearcoat(){return this._clearcoat}set clearcoat(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}get iridescence(){return this._iridescence}set iridescence(a){this._iridescence>0!=a>0&&this.version++,this._iridescence=a}get sheen(){return this._sheen}set sheen(a){this._sheen>0!=a>0&&this.version++,this._sheen=a}get transmission(){return this._transmission}set transmission(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}copy(a){return super.copy(a),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=a.anisotropy,this.anisotropyRotation=a.anisotropyRotation,this.anisotropyMap=a.anisotropyMap,this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.iridescence=a.iridescence,this.iridescenceMap=a.iridescenceMap,this.iridescenceIOR=a.iridescenceIOR,this.iridescenceThicknessRange=[...a.iridescenceThicknessRange],this.iridescenceThicknessMap=a.iridescenceThicknessMap,this.sheen=a.sheen,this.sheenColor.copy(a.sheenColor),this.sheenColorMap=a.sheenColorMap,this.sheenRoughness=a.sheenRoughness,this.sheenRoughnessMap=a.sheenRoughnessMap,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationColor.copy(a.attenuationColor),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularColor.copy(a.specularColor),this.specularColorMap=a.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(a){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class MeshToonMaterial extends Material{constructor(a){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}class MeshNormalMaterial extends Material{constructor(a){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}class MeshLambertMaterial extends Material{constructor(a){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class MeshMatcapMaterial extends Material{constructor(a){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2$1(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this.fog=a.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(a){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}copy(a){return super.copy(a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}function arraySlice(s,a,o){return isTypedArray$5(s)?new s.constructor(s.subarray(a,o!==void 0?o:s.length)):s.slice(a,o)}function convertArray(s,a,o){return!s||!o&&s.constructor===a?s:typeof a.BYTES_PER_ELEMENT=="number"?new a(s):Array.prototype.slice.call(s)}function isTypedArray$5(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function getKeyframeOrder(s){function a(d,b){return s[d]-s[b]}const o=s.length,c=new Array(o);for(let d=0;d!==o;++d)c[d]=d;return c.sort(a),c}function sortedArray(s,a,o){const c=s.length,d=new s.constructor(c);for(let b=0,$=0;$!==c;++b){const j=o[b]*a;for(let _e=0;_e!==a;++_e)d[$++]=s[j+_e]}return d}function flattenJSON(s,a,o,c){let d=1,b=s[0];for(;b!==void 0&&b[c]===void 0;)b=s[d++];if(b===void 0)return;let $=b[c];if($!==void 0)if(Array.isArray($))do $=b[c],$!==void 0&&(a.push(b.time),o.push.apply(o,$)),b=s[d++];while(b!==void 0);else if($.toArray!==void 0)do $=b[c],$!==void 0&&(a.push(b.time),$.toArray(o,o.length)),b=s[d++];while(b!==void 0);else do $=b[c],$!==void 0&&(a.push(b.time),o.push($)),b=s[d++];while(b!==void 0)}function subclip(s,a,o,c,d=30){const b=s.clone();b.name=a;const $=[];for(let _e=0;_e<b.tracks.length;++_e){const et=b.tracks[_e],tt=et.getValueSize(),rt=[],nt=[];for(let it=0;it<et.times.length;++it){const at=et.times[it]*d;if(!(at<o||at>=c)){rt.push(et.times[it]);for(let ct=0;ct<tt;++ct)nt.push(et.values[it*tt+ct])}}rt.length!==0&&(et.times=convertArray(rt,et.times.constructor),et.values=convertArray(nt,et.values.constructor),$.push(et))}b.tracks=$;let j=1/0;for(let _e=0;_e<b.tracks.length;++_e)j>b.tracks[_e].times[0]&&(j=b.tracks[_e].times[0]);for(let _e=0;_e<b.tracks.length;++_e)b.tracks[_e].shift(-1*j);return b.resetDuration(),b}function makeClipAdditive(s,a=0,o=s,c=30){c<=0&&(c=30);const d=o.tracks.length,b=a/c;for(let $=0;$<d;++$){const j=o.tracks[$],_e=j.ValueTypeName;if(_e==="bool"||_e==="string")continue;const et=s.tracks.find(function(ot){return ot.name===j.name&&ot.ValueTypeName===_e});if(et===void 0)continue;let tt=0;const rt=j.getValueSize();j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(tt=rt/3);let nt=0;const it=et.getValueSize();et.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(nt=it/3);const at=j.times.length-1;let ct;if(b<=j.times[0]){const ot=tt,ht=rt-tt;ct=arraySlice(j.values,ot,ht)}else if(b>=j.times[at]){const ot=at*rt+tt,ht=ot+rt-tt;ct=arraySlice(j.values,ot,ht)}else{const ot=j.createInterpolant(),ht=tt,dt=rt-tt;ot.evaluate(b),ct=arraySlice(ot.resultBuffer,ht,dt)}_e==="quaternion"&&new Quaternion().fromArray(ct).normalize().conjugate().toArray(ct);const st=et.times.length;for(let ot=0;ot<st;++ot){const ht=ot*it+nt;if(_e==="quaternion")Quaternion.multiplyQuaternionsFlat(et.values,ht,ct,0,et.values,ht);else{const dt=it-nt*2;for(let ft=0;ft<dt;++ft)et.values[ht+ft]-=ct[ft]}}}return s.blendMode=AdditiveAnimationBlendMode,s}const AnimationUtils={arraySlice,convertArray,isTypedArray:isTypedArray$5,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(a,o,c,d){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new o.constructor(c),this.sampleValues=o,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(a){const o=this.parameterPositions;let c=this._cachedIndex,d=o[c],b=o[c-1];e:{t:{let $;r:{n:if(!(a<d)){for(let j=c+2;;){if(d===void 0){if(a<b)break n;return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===j)break;if(b=d,d=o[++c],a<d)break t}$=o.length;break r}if(!(a>=b)){const j=o[1];a<j&&(c=2,b=j);for(let _e=c-2;;){if(b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(c===_e)break;if(d=b,b=o[--c-1],a>=b)break t}$=c,c=0;break r}break e}for(;c<$;){const j=c+$>>>1;a<o[j]?$=j:c=j+1}if(d=o[c],b=o[c-1],b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(d===void 0)return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,b,d)}return this.interpolate_(c,b,a,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,b=a*d;for(let $=0;$!==d;++$)o[$]=c[b+$];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(a,o,c,d){super(a,o,c,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(a,o,c){const d=this.parameterPositions;let b=a-2,$=a+1,j=d[b],_e=d[$];if(j===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:b=a,j=2*o-c;break;case WrapAroundEnding:b=d.length-2,j=o+d[b]-d[b+1];break;default:b=a,j=c}if(_e===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:$=a,_e=2*c-o;break;case WrapAroundEnding:$=1,_e=c+d[1]-d[0];break;default:$=a-1,_e=o}const et=(c-o)*.5,tt=this.valueSize;this._weightPrev=et/(o-j),this._weightNext=et/(_e-c),this._offsetPrev=b*tt,this._offsetNext=$*tt}interpolate_(a,o,c,d){const b=this.resultBuffer,$=this.sampleValues,j=this.valueSize,_e=a*j,et=_e-j,tt=this._offsetPrev,rt=this._offsetNext,nt=this._weightPrev,it=this._weightNext,at=(c-o)/(d-o),ct=at*at,st=ct*at,ot=-nt*st+2*nt*ct-nt*at,ht=(1+nt)*st+(-1.5-2*nt)*ct+(-.5+nt)*at+1,dt=(-1-it)*st+(1.5+it)*ct+.5*at,ft=it*st-it*ct;for(let mt=0;mt!==j;++mt)b[mt]=ot*$[tt+mt]+ht*$[et+mt]+dt*$[_e+mt]+ft*$[rt+mt];return b}}class LinearInterpolant extends Interpolant{constructor(a,o,c,d){super(a,o,c,d)}interpolate_(a,o,c,d){const b=this.resultBuffer,$=this.sampleValues,j=this.valueSize,_e=a*j,et=_e-j,tt=(c-o)/(d-o),rt=1-tt;for(let nt=0;nt!==j;++nt)b[nt]=$[et+nt]*rt+$[_e+nt]*tt;return b}}class DiscreteInterpolant extends Interpolant{constructor(a,o,c,d){super(a,o,c,d)}interpolate_(a){return this.copySampleValue_(a-1)}}class KeyframeTrack{constructor(a,o,c,d){if(a===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=convertArray(o,this.TimeBufferType),this.values=convertArray(c,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(a){const o=a.constructor;let c;if(o.toJSON!==this.toJSON)c=o.toJSON(a);else{c={name:a.name,times:convertArray(a.times,Array),values:convertArray(a.values,Array)};const d=a.getInterpolation();d!==a.DefaultInterpolation&&(c.interpolation=d)}return c.type=a.ValueTypeName,c}InterpolantFactoryMethodDiscrete(a){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new LinearInterpolant(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new CubicInterpolant(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let o;switch(a){case InterpolateDiscrete:o=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:o=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:o=this.InterpolantFactoryMethodSmooth;break}if(o===void 0){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(c);return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(a){if(a!==0){const o=this.times;for(let c=0,d=o.length;c!==d;++c)o[c]+=a}return this}scale(a){if(a!==1){const o=this.times;for(let c=0,d=o.length;c!==d;++c)o[c]*=a}return this}trim(a,o){const c=this.times,d=c.length;let b=0,$=d-1;for(;b!==d&&c[b]<a;)++b;for(;$!==-1&&c[$]>o;)--$;if(++$,b!==0||$!==d){b>=$&&($=Math.max($,1),b=$-1);const j=this.getValueSize();this.times=arraySlice(c,b,$),this.values=arraySlice(this.values,b*j,$*j)}return this}validate(){let a=!0;const o=this.getValueSize();o-Math.floor(o)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const c=this.times,d=this.values,b=c.length;b===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let $=null;for(let j=0;j!==b;j++){const _e=c[j];if(typeof _e=="number"&&isNaN(_e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,j,_e),a=!1;break}if($!==null&&$>_e){console.error("THREE.KeyframeTrack: Out of order keys.",this,j,_e,$),a=!1;break}$=_e}if(d!==void 0&&isTypedArray$5(d))for(let j=0,_e=d.length;j!==_e;++j){const et=d[j];if(isNaN(et)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,j,et),a=!1;break}}return a}optimize(){const a=arraySlice(this.times),o=arraySlice(this.values),c=this.getValueSize(),d=this.getInterpolation()===InterpolateSmooth,b=a.length-1;let $=1;for(let j=1;j<b;++j){let _e=!1;const et=a[j],tt=a[j+1];if(et!==tt&&(j!==1||et!==a[0]))if(d)_e=!0;else{const rt=j*c,nt=rt-c,it=rt+c;for(let at=0;at!==c;++at){const ct=o[rt+at];if(ct!==o[nt+at]||ct!==o[it+at]){_e=!0;break}}}if(_e){if(j!==$){a[$]=a[j];const rt=j*c,nt=$*c;for(let it=0;it!==c;++it)o[nt+it]=o[rt+it]}++$}}if(b>0){a[$]=a[b];for(let j=b*c,_e=$*c,et=0;et!==c;++et)o[_e+et]=o[j+et];++$}return $!==a.length?(this.times=arraySlice(a,0,$),this.values=arraySlice(o,0,$*c)):(this.times=a,this.values=o),this}clone(){const a=arraySlice(this.times,0),o=arraySlice(this.values,0),c=this.constructor,d=new c(this.name,a,o);return d.createInterpolant=this.createInterpolant,d}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(a,o,c,d){super(a,o,c,d)}interpolate_(a,o,c,d){const b=this.resultBuffer,$=this.sampleValues,j=this.valueSize,_e=(c-o)/(d-o);let et=a*j;for(let tt=et+j;et!==tt;et+=4)Quaternion.slerpFlat(b,0,$,et-j,$,et,_e);return b}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(a){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),a)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(a,o=-1,c,d=NormalAnimationBlendMode){this.name=a,this.tracks=c,this.duration=o,this.blendMode=d,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(a){const o=[],c=a.tracks,d=1/(a.fps||1);for(let $=0,j=c.length;$!==j;++$)o.push(parseKeyframeTrack(c[$]).scale(d));const b=new this(a.name,a.duration,o,a.blendMode);return b.uuid=a.uuid,b}static toJSON(a){const o=[],c=a.tracks,d={name:a.name,duration:a.duration,tracks:o,uuid:a.uuid,blendMode:a.blendMode};for(let b=0,$=c.length;b!==$;++b)o.push(KeyframeTrack.toJSON(c[b]));return d}static CreateFromMorphTargetSequence(a,o,c,d){const b=o.length,$=[];for(let j=0;j<b;j++){let _e=[],et=[];_e.push((j+b-1)%b,j,(j+1)%b),et.push(0,1,0);const tt=getKeyframeOrder(_e);_e=sortedArray(_e,1,tt),et=sortedArray(et,1,tt),!d&&_e[0]===0&&(_e.push(b),et.push(et[0])),$.push(new NumberKeyframeTrack(".morphTargetInfluences["+o[j].name+"]",_e,et).scale(1/c))}return new this(a,-1,$)}static findByName(a,o){let c=a;if(!Array.isArray(a)){const d=a;c=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<c.length;d++)if(c[d].name===o)return c[d];return null}static CreateClipsFromMorphTargetSequences(a,o,c){const d={},b=/^([\w-]*?)([\d]+)$/;for(let j=0,_e=a.length;j<_e;j++){const et=a[j],tt=et.name.match(b);if(tt&&tt.length>1){const rt=tt[1];let nt=d[rt];nt||(d[rt]=nt=[]),nt.push(et)}}const $=[];for(const j in d)$.push(this.CreateFromMorphTargetSequence(j,d[j],o,c));return $}static parseAnimation(a,o){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=function(rt,nt,it,at,ct){if(it.length!==0){const st=[],ot=[];flattenJSON(it,st,ot,at),st.length!==0&&ct.push(new rt(nt,st,ot))}},d=[],b=a.name||"default",$=a.fps||30,j=a.blendMode;let _e=a.length||-1;const et=a.hierarchy||[];for(let rt=0;rt<et.length;rt++){const nt=et[rt].keys;if(!(!nt||nt.length===0))if(nt[0].morphTargets){const it={};let at;for(at=0;at<nt.length;at++)if(nt[at].morphTargets)for(let ct=0;ct<nt[at].morphTargets.length;ct++)it[nt[at].morphTargets[ct]]=-1;for(const ct in it){const st=[],ot=[];for(let ht=0;ht!==nt[at].morphTargets.length;++ht){const dt=nt[at];st.push(dt.time),ot.push(dt.morphTarget===ct?1:0)}d.push(new NumberKeyframeTrack(".morphTargetInfluence["+ct+"]",st,ot))}_e=it.length*$}else{const it=".bones["+o[rt].name+"]";c(VectorKeyframeTrack,it+".position",nt,"pos",d),c(QuaternionKeyframeTrack,it+".quaternion",nt,"rot",d),c(VectorKeyframeTrack,it+".scale",nt,"scl",d)}}return d.length===0?null:new this(b,_e,d,j)}resetDuration(){const a=this.tracks;let o=0;for(let c=0,d=a.length;c!==d;++c){const b=this.tracks[c];o=Math.max(o,b.times[b.times.length-1])}return this.duration=o,this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let o=0;o<this.tracks.length;o++)a=a&&this.tracks[o].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let o=0;o<this.tracks.length;o++)a.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function parseKeyframeTrack(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=getTrackTypeForValueTypeName(s.type);if(s.times===void 0){const o=[],c=[];flattenJSON(s.keys,o,c,"value"),s.times=o,s.values=c}return a.parse!==void 0?a.parse(s):new a(s.name,s.times,s.values,s.interpolation)}const Cache$1={enabled:!1,files:{},add:function(s,a){this.enabled!==!1&&(this.files[s]=a)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};let LoadingManager$1=class{constructor(a,o,c){const d=this;let b=!1,$=0,j=0,_e;const et=[];this.onStart=void 0,this.onLoad=a,this.onProgress=o,this.onError=c,this.itemStart=function(tt){j++,b===!1&&d.onStart!==void 0&&d.onStart(tt,$,j),b=!0},this.itemEnd=function(tt){$++,d.onProgress!==void 0&&d.onProgress(tt,$,j),$===j&&(b=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(tt){d.onError!==void 0&&d.onError(tt)},this.resolveURL=function(tt){return _e?_e(tt):tt},this.setURLModifier=function(tt){return _e=tt,this},this.addHandler=function(tt,rt){return et.push(tt,rt),this},this.removeHandler=function(tt){const rt=et.indexOf(tt);return rt!==-1&&et.splice(rt,2),this},this.getHandler=function(tt){for(let rt=0,nt=et.length;rt<nt;rt+=2){const it=et[rt],at=et[rt+1];if(it.global&&(it.lastIndex=0),it.test(tt))return at}return null}}};const DefaultLoadingManager$1=new LoadingManager$1;let Loader$2=class{constructor(a){this.manager=a!==void 0?a:DefaultLoadingManager$1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,o){const c=this;return new Promise(function(d,b){c.load(a,d,o,b)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}};const loading={};class HttpError extends Error{constructor(a,o){super(a),this.response=o}}class FileLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){a===void 0&&(a=""),this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const b=Cache$1.get(a);if(b!==void 0)return this.manager.itemStart(a),setTimeout(()=>{o&&o(b),this.manager.itemEnd(a)},0),b;if(loading[a]!==void 0){loading[a].push({onLoad:o,onProgress:c,onError:d});return}loading[a]=[],loading[a].push({onLoad:o,onProgress:c,onError:d});const $=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),j=this.mimeType,_e=this.responseType;fetch($).then(et=>{if(et.status===200||et.status===0){if(et.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||et.body===void 0||et.body.getReader===void 0)return et;const tt=loading[a],rt=et.body.getReader(),nt=et.headers.get("Content-Length")||et.headers.get("X-File-Size"),it=nt?parseInt(nt):0,at=it!==0;let ct=0;const st=new ReadableStream({start(ot){ht();function ht(){rt.read().then(({done:dt,value:ft})=>{if(dt)ot.close();else{ct+=ft.byteLength;const mt=new ProgressEvent("progress",{lengthComputable:at,loaded:ct,total:it});for(let gt=0,vt=tt.length;gt<vt;gt++){const yt=tt[gt];yt.onProgress&&yt.onProgress(mt)}ot.enqueue(ft),ht()}})}}});return new Response(st)}else throw new HttpError(`fetch for "${et.url}" responded with ${et.status}: ${et.statusText}`,et)}).then(et=>{switch(_e){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"document":return et.text().then(tt=>new DOMParser().parseFromString(tt,j));case"json":return et.json();default:if(j===void 0)return et.text();{const rt=/charset="?([^;"\s]*)"?/i.exec(j),nt=rt&&rt[1]?rt[1].toLowerCase():void 0,it=new TextDecoder(nt);return et.arrayBuffer().then(at=>it.decode(at))}}}).then(et=>{Cache$1.add(a,et);const tt=loading[a];delete loading[a];for(let rt=0,nt=tt.length;rt<nt;rt++){const it=tt[rt];it.onLoad&&it.onLoad(et)}}).catch(et=>{const tt=loading[a];if(tt===void 0)throw this.manager.itemError(a),et;delete loading[a];for(let rt=0,nt=tt.length;rt<nt;rt++){const it=tt[rt];it.onError&&it.onError(et)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a)}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class AnimationLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=new FileLoader(this.manager);$.setPath(this.path),$.setRequestHeader(this.requestHeader),$.setWithCredentials(this.withCredentials),$.load(a,function(j){try{o(b.parse(JSON.parse(j)))}catch(_e){d?d(_e):console.error(_e),b.manager.itemError(a)}},c,d)}parse(a){const o=[];for(let c=0;c<a.length;c++){const d=AnimationClip.parse(a[c]);o.push(d)}return o}}class CompressedTextureLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=[],j=new CompressedTexture,_e=new FileLoader(this.manager);_e.setPath(this.path),_e.setResponseType("arraybuffer"),_e.setRequestHeader(this.requestHeader),_e.setWithCredentials(b.withCredentials);let et=0;function tt(rt){_e.load(a[rt],function(nt){const it=b.parse(nt,!0);$[rt]={width:it.width,height:it.height,format:it.format,mipmaps:it.mipmaps},et+=1,et===6&&(it.mipmapCount===1&&(j.minFilter=LinearFilter$1),j.image=$,j.format=it.format,j.needsUpdate=!0,o&&o(j))},c,d)}if(Array.isArray(a))for(let rt=0,nt=a.length;rt<nt;++rt)tt(rt);else _e.load(a,function(rt){const nt=b.parse(rt,!0);if(nt.isCubemap){const it=nt.mipmaps.length/nt.mipmapCount;for(let at=0;at<it;at++){$[at]={mipmaps:[]};for(let ct=0;ct<nt.mipmapCount;ct++)$[at].mipmaps.push(nt.mipmaps[at*nt.mipmapCount+ct]),$[at].format=nt.format,$[at].width=nt.width,$[at].height=nt.height}j.image=$}else j.image.width=nt.width,j.image.height=nt.height,j.mipmaps=nt.mipmaps;nt.mipmapCount===1&&(j.minFilter=LinearFilter$1),j.format=nt.format,j.needsUpdate=!0,o&&o(j)},c,d);return j}}let ImageLoader$1=class extends Loader$2{constructor(a){super(a)}load(a,o,c,d){this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const b=this,$=Cache$1.get(a);if($!==void 0)return b.manager.itemStart(a),setTimeout(function(){o&&o($),b.manager.itemEnd(a)},0),$;const j=createElementNS$1("img");function _e(){tt(),Cache$1.add(a,this),o&&o(this),b.manager.itemEnd(a)}function et(rt){tt(),d&&d(rt),b.manager.itemError(a),b.manager.itemEnd(a)}function tt(){j.removeEventListener("load",_e,!1),j.removeEventListener("error",et,!1)}return j.addEventListener("load",_e,!1),j.addEventListener("error",et,!1),a.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(j.crossOrigin=this.crossOrigin),b.manager.itemStart(a),j.src=a,j}};class CubeTextureLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=new CubeTexture;b.colorSpace=SRGBColorSpace$1;const $=new ImageLoader$1(this.manager);$.setCrossOrigin(this.crossOrigin),$.setPath(this.path);let j=0;function _e(et){$.load(a[et],function(tt){b.images[et]=tt,j++,j===6&&(b.needsUpdate=!0,o&&o(b))},void 0,d)}for(let et=0;et<a.length;++et)_e(et);return b}}class DataTextureLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=new DataTexture,j=new FileLoader(this.manager);return j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(b.withCredentials),j.load(a,function(_e){const et=b.parse(_e);et&&(et.image!==void 0?$.image=et.image:et.data!==void 0&&($.image.width=et.width,$.image.height=et.height,$.image.data=et.data),$.wrapS=et.wrapS!==void 0?et.wrapS:ClampToEdgeWrapping$1,$.wrapT=et.wrapT!==void 0?et.wrapT:ClampToEdgeWrapping$1,$.magFilter=et.magFilter!==void 0?et.magFilter:LinearFilter$1,$.minFilter=et.minFilter!==void 0?et.minFilter:LinearFilter$1,$.anisotropy=et.anisotropy!==void 0?et.anisotropy:1,et.colorSpace!==void 0?$.colorSpace=et.colorSpace:et.encoding!==void 0&&($.encoding=et.encoding),et.flipY!==void 0&&($.flipY=et.flipY),et.format!==void 0&&($.format=et.format),et.type!==void 0&&($.type=et.type),et.mipmaps!==void 0&&($.mipmaps=et.mipmaps,$.minFilter=LinearMipmapLinearFilter$1),et.mipmapCount===1&&($.minFilter=LinearFilter$1),et.generateMipmaps!==void 0&&($.generateMipmaps=et.generateMipmaps),$.needsUpdate=!0,o&&o($,et))},c,d),$}}let TextureLoader$1=class extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=new Texture$1,$=new ImageLoader$1(this.manager);return $.setCrossOrigin(this.crossOrigin),$.setPath(this.path),$.load(a,function(j){b.image=j,b.needsUpdate=!0,o!==void 0&&o(b)},c,d),b}};class Light extends Object3D{constructor(a,o=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(a),this.intensity=o}dispose(){}copy(a,o){return super.copy(a,o),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const o=super.toJSON(a);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,this.groundColor!==void 0&&(o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(o.object.distance=this.distance),this.angle!==void 0&&(o.object.angle=this.angle),this.decay!==void 0&&(o.object.decay=this.decay),this.penumbra!==void 0&&(o.object.penumbra=this.penumbra),this.shadow!==void 0&&(o.object.shadow=this.shadow.toJSON()),o}}class HemisphereLight extends Light{constructor(a,o,c){super(a,c),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(o)}copy(a,o){return super.copy(a,o),this.groundColor.copy(a.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2$1(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2$1(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const o=this.camera,c=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(a.matrixWorld),o.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(a.target.matrixWorld),o.lookAt(_lookTarget$1),o.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(_projScreenMatrix$1)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const a={};return this.bias!==0&&(a.bias=this.bias),this.normalBias!==0&&(a.normalBias=this.normalBias),this.radius!==1&&(a.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(a){const o=this.camera,c=RAD2DEG*2*a.angle*this.focus,d=this.mapSize.width/this.mapSize.height,b=a.distance||o.far;(c!==o.fov||d!==o.aspect||b!==o.far)&&(o.fov=c,o.aspect=d,o.far=b,o.updateProjectionMatrix()),super.updateMatrices(a)}copy(a){return super.copy(a),this.focus=a.focus,this}}class SpotLight extends Light{constructor(a,o,c=0,d=Math.PI/3,b=0,$=2){super(a,o),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=c,this.angle=d,this.penumbra=b,this.decay=$,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a,o){return super.copy(a,o),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2$1(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(a,o=0){const c=this.camera,d=this.matrix,b=a.distance||c.far;b!==c.far&&(c.far=b,c.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(a.matrixWorld),c.position.copy(_lightPositionWorld),_lookTarget.copy(c.position),_lookTarget.add(this._cubeDirections[o]),c.up.copy(this._cubeUps[o]),c.lookAt(_lookTarget),c.updateMatrixWorld(),d.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(a,o,c=0,d=2){super(a,o),this.isPointLight=!0,this.type="PointLight",this.distance=c,this.decay=d,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,o){return super.copy(a,o),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(a,o){super(a,o),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}class AmbientLight extends Light{constructor(a,o){super(a,o),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(a,o,c=10,d=10){super(a,o),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=c,this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){return super.copy(a),this.width=a.width,this.height=a.height,this}toJSON(a){const o=super.toJSON(a);return o.object.width=this.width,o.object.height=this.height,o}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let a=0;a<9;a++)this.coefficients.push(new Vector3)}set(a){for(let o=0;o<9;o++)this.coefficients[o].copy(a[o]);return this}zero(){for(let a=0;a<9;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,o){const c=a.x,d=a.y,b=a.z,$=this.coefficients;return o.copy($[0]).multiplyScalar(.282095),o.addScaledVector($[1],.488603*d),o.addScaledVector($[2],.488603*b),o.addScaledVector($[3],.488603*c),o.addScaledVector($[4],1.092548*(c*d)),o.addScaledVector($[5],1.092548*(d*b)),o.addScaledVector($[6],.315392*(3*b*b-1)),o.addScaledVector($[7],1.092548*(c*b)),o.addScaledVector($[8],.546274*(c*c-d*d)),o}getIrradianceAt(a,o){const c=a.x,d=a.y,b=a.z,$=this.coefficients;return o.copy($[0]).multiplyScalar(.886227),o.addScaledVector($[1],2*.511664*d),o.addScaledVector($[2],2*.511664*b),o.addScaledVector($[3],2*.511664*c),o.addScaledVector($[4],2*.429043*c*d),o.addScaledVector($[5],2*.429043*d*b),o.addScaledVector($[6],.743125*b*b-.247708),o.addScaledVector($[7],2*.429043*c*b),o.addScaledVector($[8],.429043*(c*c-d*d)),o}add(a){for(let o=0;o<9;o++)this.coefficients[o].add(a.coefficients[o]);return this}addScaledSH(a,o){for(let c=0;c<9;c++)this.coefficients[c].addScaledVector(a.coefficients[c],o);return this}scale(a){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(a);return this}lerp(a,o){for(let c=0;c<9;c++)this.coefficients[c].lerp(a.coefficients[c],o);return this}equals(a){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(a.coefficients[o]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(a,o=0){const c=this.coefficients;for(let d=0;d<9;d++)c[d].fromArray(a,o+d*3);return this}toArray(a=[],o=0){const c=this.coefficients;for(let d=0;d<9;d++)c[d].toArray(a,o+d*3);return a}static getBasisAt(a,o){const c=a.x,d=a.y,b=a.z;o[0]=.282095,o[1]=.488603*d,o[2]=.488603*b,o[3]=.488603*c,o[4]=1.092548*c*d,o[5]=1.092548*d*b,o[6]=.315392*(3*b*b-1),o[7]=1.092548*c*b,o[8]=.546274*(c*c-d*d)}}class LightProbe extends Light{constructor(a=new SphericalHarmonics3,o=1){super(void 0,o),this.isLightProbe=!0,this.sh=a}copy(a){return super.copy(a),this.sh.copy(a.sh),this}fromJSON(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}toJSON(a){const o=super.toJSON(a);return o.object.sh=this.sh.toArray(),o}}class MaterialLoader extends Loader$2{constructor(a){super(a),this.textures={}}load(a,o,c,d){const b=this,$=new FileLoader(b.manager);$.setPath(b.path),$.setRequestHeader(b.requestHeader),$.setWithCredentials(b.withCredentials),$.load(a,function(j){try{o(b.parse(JSON.parse(j)))}catch(_e){d?d(_e):console.error(_e),b.manager.itemError(a)}},c,d)}parse(a){const o=this.textures;function c(b){return o[b]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",b),o[b]}const d=MaterialLoader.createMaterialFromType(a.type);if(a.uuid!==void 0&&(d.uuid=a.uuid),a.name!==void 0&&(d.name=a.name),a.color!==void 0&&d.color!==void 0&&d.color.setHex(a.color),a.roughness!==void 0&&(d.roughness=a.roughness),a.metalness!==void 0&&(d.metalness=a.metalness),a.sheen!==void 0&&(d.sheen=a.sheen),a.sheenColor!==void 0&&(d.sheenColor=new Color().setHex(a.sheenColor)),a.sheenRoughness!==void 0&&(d.sheenRoughness=a.sheenRoughness),a.emissive!==void 0&&d.emissive!==void 0&&d.emissive.setHex(a.emissive),a.specular!==void 0&&d.specular!==void 0&&d.specular.setHex(a.specular),a.specularIntensity!==void 0&&(d.specularIntensity=a.specularIntensity),a.specularColor!==void 0&&d.specularColor!==void 0&&d.specularColor.setHex(a.specularColor),a.shininess!==void 0&&(d.shininess=a.shininess),a.clearcoat!==void 0&&(d.clearcoat=a.clearcoat),a.clearcoatRoughness!==void 0&&(d.clearcoatRoughness=a.clearcoatRoughness),a.iridescence!==void 0&&(d.iridescence=a.iridescence),a.iridescenceIOR!==void 0&&(d.iridescenceIOR=a.iridescenceIOR),a.iridescenceThicknessRange!==void 0&&(d.iridescenceThicknessRange=a.iridescenceThicknessRange),a.transmission!==void 0&&(d.transmission=a.transmission),a.thickness!==void 0&&(d.thickness=a.thickness),a.attenuationDistance!==void 0&&(d.attenuationDistance=a.attenuationDistance),a.attenuationColor!==void 0&&d.attenuationColor!==void 0&&d.attenuationColor.setHex(a.attenuationColor),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.anisotropyRotation!==void 0&&(d.anisotropyRotation=a.anisotropyRotation),a.fog!==void 0&&(d.fog=a.fog),a.flatShading!==void 0&&(d.flatShading=a.flatShading),a.blending!==void 0&&(d.blending=a.blending),a.combine!==void 0&&(d.combine=a.combine),a.side!==void 0&&(d.side=a.side),a.shadowSide!==void 0&&(d.shadowSide=a.shadowSide),a.opacity!==void 0&&(d.opacity=a.opacity),a.transparent!==void 0&&(d.transparent=a.transparent),a.alphaTest!==void 0&&(d.alphaTest=a.alphaTest),a.depthTest!==void 0&&(d.depthTest=a.depthTest),a.depthWrite!==void 0&&(d.depthWrite=a.depthWrite),a.colorWrite!==void 0&&(d.colorWrite=a.colorWrite),a.stencilWrite!==void 0&&(d.stencilWrite=a.stencilWrite),a.stencilWriteMask!==void 0&&(d.stencilWriteMask=a.stencilWriteMask),a.stencilFunc!==void 0&&(d.stencilFunc=a.stencilFunc),a.stencilRef!==void 0&&(d.stencilRef=a.stencilRef),a.stencilFuncMask!==void 0&&(d.stencilFuncMask=a.stencilFuncMask),a.stencilFail!==void 0&&(d.stencilFail=a.stencilFail),a.stencilZFail!==void 0&&(d.stencilZFail=a.stencilZFail),a.stencilZPass!==void 0&&(d.stencilZPass=a.stencilZPass),a.wireframe!==void 0&&(d.wireframe=a.wireframe),a.wireframeLinewidth!==void 0&&(d.wireframeLinewidth=a.wireframeLinewidth),a.wireframeLinecap!==void 0&&(d.wireframeLinecap=a.wireframeLinecap),a.wireframeLinejoin!==void 0&&(d.wireframeLinejoin=a.wireframeLinejoin),a.rotation!==void 0&&(d.rotation=a.rotation),a.linewidth!==1&&(d.linewidth=a.linewidth),a.dashSize!==void 0&&(d.dashSize=a.dashSize),a.gapSize!==void 0&&(d.gapSize=a.gapSize),a.scale!==void 0&&(d.scale=a.scale),a.polygonOffset!==void 0&&(d.polygonOffset=a.polygonOffset),a.polygonOffsetFactor!==void 0&&(d.polygonOffsetFactor=a.polygonOffsetFactor),a.polygonOffsetUnits!==void 0&&(d.polygonOffsetUnits=a.polygonOffsetUnits),a.dithering!==void 0&&(d.dithering=a.dithering),a.alphaToCoverage!==void 0&&(d.alphaToCoverage=a.alphaToCoverage),a.premultipliedAlpha!==void 0&&(d.premultipliedAlpha=a.premultipliedAlpha),a.forceSinglePass!==void 0&&(d.forceSinglePass=a.forceSinglePass),a.visible!==void 0&&(d.visible=a.visible),a.toneMapped!==void 0&&(d.toneMapped=a.toneMapped),a.userData!==void 0&&(d.userData=a.userData),a.vertexColors!==void 0&&(typeof a.vertexColors=="number"?d.vertexColors=a.vertexColors>0:d.vertexColors=a.vertexColors),a.uniforms!==void 0)for(const b in a.uniforms){const $=a.uniforms[b];switch(d.uniforms[b]={},$.type){case"t":d.uniforms[b].value=c($.value);break;case"c":d.uniforms[b].value=new Color().setHex($.value);break;case"v2":d.uniforms[b].value=new Vector2$1().fromArray($.value);break;case"v3":d.uniforms[b].value=new Vector3().fromArray($.value);break;case"v4":d.uniforms[b].value=new Vector4().fromArray($.value);break;case"m3":d.uniforms[b].value=new Matrix3$1().fromArray($.value);break;case"m4":d.uniforms[b].value=new Matrix4().fromArray($.value);break;default:d.uniforms[b].value=$.value}}if(a.defines!==void 0&&(d.defines=a.defines),a.vertexShader!==void 0&&(d.vertexShader=a.vertexShader),a.fragmentShader!==void 0&&(d.fragmentShader=a.fragmentShader),a.glslVersion!==void 0&&(d.glslVersion=a.glslVersion),a.extensions!==void 0)for(const b in a.extensions)d.extensions[b]=a.extensions[b];if(a.lights!==void 0&&(d.lights=a.lights),a.clipping!==void 0&&(d.clipping=a.clipping),a.size!==void 0&&(d.size=a.size),a.sizeAttenuation!==void 0&&(d.sizeAttenuation=a.sizeAttenuation),a.map!==void 0&&(d.map=c(a.map)),a.matcap!==void 0&&(d.matcap=c(a.matcap)),a.alphaMap!==void 0&&(d.alphaMap=c(a.alphaMap)),a.bumpMap!==void 0&&(d.bumpMap=c(a.bumpMap)),a.bumpScale!==void 0&&(d.bumpScale=a.bumpScale),a.normalMap!==void 0&&(d.normalMap=c(a.normalMap)),a.normalMapType!==void 0&&(d.normalMapType=a.normalMapType),a.normalScale!==void 0){let b=a.normalScale;Array.isArray(b)===!1&&(b=[b,b]),d.normalScale=new Vector2$1().fromArray(b)}return a.displacementMap!==void 0&&(d.displacementMap=c(a.displacementMap)),a.displacementScale!==void 0&&(d.displacementScale=a.displacementScale),a.displacementBias!==void 0&&(d.displacementBias=a.displacementBias),a.roughnessMap!==void 0&&(d.roughnessMap=c(a.roughnessMap)),a.metalnessMap!==void 0&&(d.metalnessMap=c(a.metalnessMap)),a.emissiveMap!==void 0&&(d.emissiveMap=c(a.emissiveMap)),a.emissiveIntensity!==void 0&&(d.emissiveIntensity=a.emissiveIntensity),a.specularMap!==void 0&&(d.specularMap=c(a.specularMap)),a.specularIntensityMap!==void 0&&(d.specularIntensityMap=c(a.specularIntensityMap)),a.specularColorMap!==void 0&&(d.specularColorMap=c(a.specularColorMap)),a.envMap!==void 0&&(d.envMap=c(a.envMap)),a.envMapIntensity!==void 0&&(d.envMapIntensity=a.envMapIntensity),a.reflectivity!==void 0&&(d.reflectivity=a.reflectivity),a.refractionRatio!==void 0&&(d.refractionRatio=a.refractionRatio),a.lightMap!==void 0&&(d.lightMap=c(a.lightMap)),a.lightMapIntensity!==void 0&&(d.lightMapIntensity=a.lightMapIntensity),a.aoMap!==void 0&&(d.aoMap=c(a.aoMap)),a.aoMapIntensity!==void 0&&(d.aoMapIntensity=a.aoMapIntensity),a.gradientMap!==void 0&&(d.gradientMap=c(a.gradientMap)),a.clearcoatMap!==void 0&&(d.clearcoatMap=c(a.clearcoatMap)),a.clearcoatRoughnessMap!==void 0&&(d.clearcoatRoughnessMap=c(a.clearcoatRoughnessMap)),a.clearcoatNormalMap!==void 0&&(d.clearcoatNormalMap=c(a.clearcoatNormalMap)),a.clearcoatNormalScale!==void 0&&(d.clearcoatNormalScale=new Vector2$1().fromArray(a.clearcoatNormalScale)),a.iridescenceMap!==void 0&&(d.iridescenceMap=c(a.iridescenceMap)),a.iridescenceThicknessMap!==void 0&&(d.iridescenceThicknessMap=c(a.iridescenceThicknessMap)),a.transmissionMap!==void 0&&(d.transmissionMap=c(a.transmissionMap)),a.thicknessMap!==void 0&&(d.thicknessMap=c(a.thicknessMap)),a.anisotropyMap!==void 0&&(d.anisotropyMap=c(a.anisotropyMap)),a.sheenColorMap!==void 0&&(d.sheenColorMap=c(a.sheenColorMap)),a.sheenRoughnessMap!==void 0&&(d.sheenRoughnessMap=c(a.sheenRoughnessMap)),d}setTextures(a){return this.textures=a,this}static createMaterialFromType(a){const o={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new o[a]}}class LoaderUtils{static decodeText(a){if(typeof TextDecoder<"u")return new TextDecoder().decode(a);let o="";for(let c=0,d=a.length;c<d;c++)o+=String.fromCharCode(a[c]);try{return decodeURIComponent(escape(o))}catch{return o}}static extractUrlBase(a){const o=a.lastIndexOf("/");return o===-1?"./":a.slice(0,o+1)}static resolveURL(a,o){return typeof a!="string"||a===""?"":(/^https?:\/\//i.test(o)&&/^\//.test(a)&&(o=o.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:o+a)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(a){return super.copy(a),this.instanceCount=a.instanceCount,this}toJSON(){const a=super.toJSON();return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}class BufferGeometryLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=new FileLoader(b.manager);$.setPath(b.path),$.setRequestHeader(b.requestHeader),$.setWithCredentials(b.withCredentials),$.load(a,function(j){try{o(b.parse(JSON.parse(j)))}catch(_e){d?d(_e):console.error(_e),b.manager.itemError(a)}},c,d)}parse(a){const o={},c={};function d(it,at){if(o[at]!==void 0)return o[at];const st=it.interleavedBuffers[at],ot=b(it,st.buffer),ht=getTypedArray(st.type,ot),dt=new InterleavedBuffer(ht,st.stride);return dt.uuid=st.uuid,o[at]=dt,dt}function b(it,at){if(c[at]!==void 0)return c[at];const st=it.arrayBuffers[at],ot=new Uint32Array(st).buffer;return c[at]=ot,ot}const $=a.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,j=a.data.index;if(j!==void 0){const it=getTypedArray(j.type,j.array);$.setIndex(new BufferAttribute(it,1))}const _e=a.data.attributes;for(const it in _e){const at=_e[it];let ct;if(at.isInterleavedBufferAttribute){const st=d(a.data,at.data);ct=new InterleavedBufferAttribute(st,at.itemSize,at.offset,at.normalized)}else{const st=getTypedArray(at.type,at.array),ot=at.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ct=new ot(st,at.itemSize,at.normalized)}at.name!==void 0&&(ct.name=at.name),at.usage!==void 0&&ct.setUsage(at.usage),at.updateRange!==void 0&&(ct.updateRange.offset=at.updateRange.offset,ct.updateRange.count=at.updateRange.count),$.setAttribute(it,ct)}const et=a.data.morphAttributes;if(et)for(const it in et){const at=et[it],ct=[];for(let st=0,ot=at.length;st<ot;st++){const ht=at[st];let dt;if(ht.isInterleavedBufferAttribute){const ft=d(a.data,ht.data);dt=new InterleavedBufferAttribute(ft,ht.itemSize,ht.offset,ht.normalized)}else{const ft=getTypedArray(ht.type,ht.array);dt=new BufferAttribute(ft,ht.itemSize,ht.normalized)}ht.name!==void 0&&(dt.name=ht.name),ct.push(dt)}$.morphAttributes[it]=ct}a.data.morphTargetsRelative&&($.morphTargetsRelative=!0);const rt=a.data.groups||a.data.drawcalls||a.data.offsets;if(rt!==void 0)for(let it=0,at=rt.length;it!==at;++it){const ct=rt[it];$.addGroup(ct.start,ct.count,ct.materialIndex)}const nt=a.data.boundingSphere;if(nt!==void 0){const it=new Vector3;nt.center!==void 0&&it.fromArray(nt.center),$.boundingSphere=new Sphere(it,nt.radius)}return a.name&&($.name=a.name),a.userData&&($.userData=a.userData),$}}class ObjectLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=this.path===""?LoaderUtils.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||$;const j=new FileLoader(this.manager);j.setPath(this.path),j.setRequestHeader(this.requestHeader),j.setWithCredentials(this.withCredentials),j.load(a,function(_e){let et=null;try{et=JSON.parse(_e)}catch(rt){d!==void 0&&d(rt),console.error("THREE:ObjectLoader: Can't parse "+a+".",rt.message);return}const tt=et.metadata;if(tt===void 0||tt.type===void 0||tt.type.toLowerCase()==="geometry"){d!==void 0&&d(new Error("THREE.ObjectLoader: Can't load "+a)),console.error("THREE.ObjectLoader: Can't load "+a);return}b.parse(et,o)},c,d)}async loadAsync(a,o){const c=this,d=this.path===""?LoaderUtils.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||d;const b=new FileLoader(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials);const $=await b.loadAsync(a,o),j=JSON.parse($),_e=j.metadata;if(_e===void 0||_e.type===void 0||_e.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+a);return await c.parseAsync(j)}parse(a,o){const c=this.parseAnimations(a.animations),d=this.parseShapes(a.shapes),b=this.parseGeometries(a.geometries,d),$=this.parseImages(a.images,function(){o!==void 0&&o(et)}),j=this.parseTextures(a.textures,$),_e=this.parseMaterials(a.materials,j),et=this.parseObject(a.object,b,_e,j,c),tt=this.parseSkeletons(a.skeletons,et);if(this.bindSkeletons(et,tt),o!==void 0){let rt=!1;for(const nt in $)if($[nt].data instanceof HTMLImageElement){rt=!0;break}rt===!1&&o(et)}return et}async parseAsync(a){const o=this.parseAnimations(a.animations),c=this.parseShapes(a.shapes),d=this.parseGeometries(a.geometries,c),b=await this.parseImagesAsync(a.images),$=this.parseTextures(a.textures,b),j=this.parseMaterials(a.materials,$),_e=this.parseObject(a.object,d,j,$,o),et=this.parseSkeletons(a.skeletons,_e);return this.bindSkeletons(_e,et),_e}parseShapes(a){const o={};if(a!==void 0)for(let c=0,d=a.length;c<d;c++){const b=new Shape().fromJSON(a[c]);o[b.uuid]=b}return o}parseSkeletons(a,o){const c={},d={};if(o.traverse(function(b){b.isBone&&(d[b.uuid]=b)}),a!==void 0)for(let b=0,$=a.length;b<$;b++){const j=new Skeleton().fromJSON(a[b],d);c[j.uuid]=j}return c}parseGeometries(a,o){const c={};if(a!==void 0){const d=new BufferGeometryLoader;for(let b=0,$=a.length;b<$;b++){let j;const _e=a[b];switch(_e.type){case"BufferGeometry":case"InstancedBufferGeometry":j=d.parse(_e);break;default:_e.type in Geometries?j=Geometries[_e.type].fromJSON(_e,o):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${_e.type}"`)}j.uuid=_e.uuid,_e.name!==void 0&&(j.name=_e.name),_e.userData!==void 0&&(j.userData=_e.userData),c[_e.uuid]=j}}return c}parseMaterials(a,o){const c={},d={};if(a!==void 0){const b=new MaterialLoader;b.setTextures(o);for(let $=0,j=a.length;$<j;$++){const _e=a[$];c[_e.uuid]===void 0&&(c[_e.uuid]=b.parse(_e)),d[_e.uuid]=c[_e.uuid]}}return d}parseAnimations(a){const o={};if(a!==void 0)for(let c=0;c<a.length;c++){const d=a[c],b=AnimationClip.parse(d);o[b.uuid]=b}return o}parseImages(a,o){const c=this,d={};let b;function $(_e){return c.manager.itemStart(_e),b.load(_e,function(){c.manager.itemEnd(_e)},void 0,function(){c.manager.itemError(_e),c.manager.itemEnd(_e)})}function j(_e){if(typeof _e=="string"){const et=_e,tt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(et)?et:c.resourcePath+et;return $(tt)}else return _e.data?{data:getTypedArray(_e.type,_e.data),width:_e.width,height:_e.height}:null}if(a!==void 0&&a.length>0){const _e=new LoadingManager$1(o);b=new ImageLoader$1(_e),b.setCrossOrigin(this.crossOrigin);for(let et=0,tt=a.length;et<tt;et++){const rt=a[et],nt=rt.url;if(Array.isArray(nt)){const it=[];for(let at=0,ct=nt.length;at<ct;at++){const st=nt[at],ot=j(st);ot!==null&&(ot instanceof HTMLImageElement?it.push(ot):it.push(new DataTexture(ot.data,ot.width,ot.height)))}d[rt.uuid]=new Source$1(it)}else{const it=j(rt.url);d[rt.uuid]=new Source$1(it)}}}return d}async parseImagesAsync(a){const o=this,c={};let d;async function b($){if(typeof $=="string"){const j=$,_e=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(j)?j:o.resourcePath+j;return await d.loadAsync(_e)}else return $.data?{data:getTypedArray($.type,$.data),width:$.width,height:$.height}:null}if(a!==void 0&&a.length>0){d=new ImageLoader$1(this.manager),d.setCrossOrigin(this.crossOrigin);for(let $=0,j=a.length;$<j;$++){const _e=a[$],et=_e.url;if(Array.isArray(et)){const tt=[];for(let rt=0,nt=et.length;rt<nt;rt++){const it=et[rt],at=await b(it);at!==null&&(at instanceof HTMLImageElement?tt.push(at):tt.push(new DataTexture(at.data,at.width,at.height)))}c[_e.uuid]=new Source$1(tt)}else{const tt=await b(_e.url);c[_e.uuid]=new Source$1(tt)}}}return c}parseTextures(a,o){function c(b,$){return typeof b=="number"?b:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",b),$[b])}const d={};if(a!==void 0)for(let b=0,$=a.length;b<$;b++){const j=a[b];j.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',j.uuid),o[j.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",j.image);const _e=o[j.image],et=_e.data;let tt;Array.isArray(et)?(tt=new CubeTexture,et.length===6&&(tt.needsUpdate=!0)):(et&&et.data?tt=new DataTexture:tt=new Texture$1,et&&(tt.needsUpdate=!0)),tt.source=_e,tt.uuid=j.uuid,j.name!==void 0&&(tt.name=j.name),j.mapping!==void 0&&(tt.mapping=c(j.mapping,TEXTURE_MAPPING)),j.channel!==void 0&&(tt.channel=j.channel),j.offset!==void 0&&tt.offset.fromArray(j.offset),j.repeat!==void 0&&tt.repeat.fromArray(j.repeat),j.center!==void 0&&tt.center.fromArray(j.center),j.rotation!==void 0&&(tt.rotation=j.rotation),j.wrap!==void 0&&(tt.wrapS=c(j.wrap[0],TEXTURE_WRAPPING),tt.wrapT=c(j.wrap[1],TEXTURE_WRAPPING)),j.format!==void 0&&(tt.format=j.format),j.internalFormat!==void 0&&(tt.internalFormat=j.internalFormat),j.type!==void 0&&(tt.type=j.type),j.colorSpace!==void 0&&(tt.colorSpace=j.colorSpace),j.encoding!==void 0&&(tt.encoding=j.encoding),j.minFilter!==void 0&&(tt.minFilter=c(j.minFilter,TEXTURE_FILTER)),j.magFilter!==void 0&&(tt.magFilter=c(j.magFilter,TEXTURE_FILTER)),j.anisotropy!==void 0&&(tt.anisotropy=j.anisotropy),j.flipY!==void 0&&(tt.flipY=j.flipY),j.generateMipmaps!==void 0&&(tt.generateMipmaps=j.generateMipmaps),j.premultiplyAlpha!==void 0&&(tt.premultiplyAlpha=j.premultiplyAlpha),j.unpackAlignment!==void 0&&(tt.unpackAlignment=j.unpackAlignment),j.compareFunction!==void 0&&(tt.compareFunction=j.compareFunction),j.userData!==void 0&&(tt.userData=j.userData),d[j.uuid]=tt}return d}parseObject(a,o,c,d,b){let $;function j(nt){return o[nt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",nt),o[nt]}function _e(nt){if(nt!==void 0){if(Array.isArray(nt)){const it=[];for(let at=0,ct=nt.length;at<ct;at++){const st=nt[at];c[st]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",st),it.push(c[st])}return it}return c[nt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",nt),c[nt]}}function et(nt){return d[nt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",nt),d[nt]}let tt,rt;switch(a.type){case"Scene":$=new Scene,a.background!==void 0&&(Number.isInteger(a.background)?$.background=new Color(a.background):$.background=et(a.background)),a.environment!==void 0&&($.environment=et(a.environment)),a.fog!==void 0&&(a.fog.type==="Fog"?$.fog=new Fog(a.fog.color,a.fog.near,a.fog.far):a.fog.type==="FogExp2"&&($.fog=new FogExp2(a.fog.color,a.fog.density))),a.backgroundBlurriness!==void 0&&($.backgroundBlurriness=a.backgroundBlurriness),a.backgroundIntensity!==void 0&&($.backgroundIntensity=a.backgroundIntensity);break;case"PerspectiveCamera":$=new PerspectiveCamera(a.fov,a.aspect,a.near,a.far),a.focus!==void 0&&($.focus=a.focus),a.zoom!==void 0&&($.zoom=a.zoom),a.filmGauge!==void 0&&($.filmGauge=a.filmGauge),a.filmOffset!==void 0&&($.filmOffset=a.filmOffset),a.view!==void 0&&($.view=Object.assign({},a.view));break;case"OrthographicCamera":$=new OrthographicCamera(a.left,a.right,a.top,a.bottom,a.near,a.far),a.zoom!==void 0&&($.zoom=a.zoom),a.view!==void 0&&($.view=Object.assign({},a.view));break;case"AmbientLight":$=new AmbientLight(a.color,a.intensity);break;case"DirectionalLight":$=new DirectionalLight(a.color,a.intensity);break;case"PointLight":$=new PointLight(a.color,a.intensity,a.distance,a.decay);break;case"RectAreaLight":$=new RectAreaLight(a.color,a.intensity,a.width,a.height);break;case"SpotLight":$=new SpotLight(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case"HemisphereLight":$=new HemisphereLight(a.color,a.groundColor,a.intensity);break;case"LightProbe":$=new LightProbe().fromJSON(a);break;case"SkinnedMesh":tt=j(a.geometry),rt=_e(a.material),$=new SkinnedMesh(tt,rt),a.bindMode!==void 0&&($.bindMode=a.bindMode),a.bindMatrix!==void 0&&$.bindMatrix.fromArray(a.bindMatrix),a.skeleton!==void 0&&($.skeleton=a.skeleton);break;case"Mesh":tt=j(a.geometry),rt=_e(a.material),$=new Mesh(tt,rt);break;case"InstancedMesh":tt=j(a.geometry),rt=_e(a.material);const nt=a.count,it=a.instanceMatrix,at=a.instanceColor;$=new InstancedMesh(tt,rt,nt),$.instanceMatrix=new InstancedBufferAttribute(new Float32Array(it.array),16),at!==void 0&&($.instanceColor=new InstancedBufferAttribute(new Float32Array(at.array),at.itemSize));break;case"LOD":$=new LOD;break;case"Line":$=new Line(j(a.geometry),_e(a.material));break;case"LineLoop":$=new LineLoop(j(a.geometry),_e(a.material));break;case"LineSegments":$=new LineSegments(j(a.geometry),_e(a.material));break;case"PointCloud":case"Points":$=new Points(j(a.geometry),_e(a.material));break;case"Sprite":$=new Sprite(_e(a.material));break;case"Group":$=new Group;break;case"Bone":$=new Bone;break;default:$=new Object3D}if($.uuid=a.uuid,a.name!==void 0&&($.name=a.name),a.matrix!==void 0?($.matrix.fromArray(a.matrix),a.matrixAutoUpdate!==void 0&&($.matrixAutoUpdate=a.matrixAutoUpdate),$.matrixAutoUpdate&&$.matrix.decompose($.position,$.quaternion,$.scale)):(a.position!==void 0&&$.position.fromArray(a.position),a.rotation!==void 0&&$.rotation.fromArray(a.rotation),a.quaternion!==void 0&&$.quaternion.fromArray(a.quaternion),a.scale!==void 0&&$.scale.fromArray(a.scale)),a.up!==void 0&&$.up.fromArray(a.up),a.castShadow!==void 0&&($.castShadow=a.castShadow),a.receiveShadow!==void 0&&($.receiveShadow=a.receiveShadow),a.shadow&&(a.shadow.bias!==void 0&&($.shadow.bias=a.shadow.bias),a.shadow.normalBias!==void 0&&($.shadow.normalBias=a.shadow.normalBias),a.shadow.radius!==void 0&&($.shadow.radius=a.shadow.radius),a.shadow.mapSize!==void 0&&$.shadow.mapSize.fromArray(a.shadow.mapSize),a.shadow.camera!==void 0&&($.shadow.camera=this.parseObject(a.shadow.camera))),a.visible!==void 0&&($.visible=a.visible),a.frustumCulled!==void 0&&($.frustumCulled=a.frustumCulled),a.renderOrder!==void 0&&($.renderOrder=a.renderOrder),a.userData!==void 0&&($.userData=a.userData),a.layers!==void 0&&($.layers.mask=a.layers),a.children!==void 0){const nt=a.children;for(let it=0;it<nt.length;it++)$.add(this.parseObject(nt[it],o,c,d,b))}if(a.animations!==void 0){const nt=a.animations;for(let it=0;it<nt.length;it++){const at=nt[it];$.animations.push(b[at])}}if(a.type==="LOD"){a.autoUpdate!==void 0&&($.autoUpdate=a.autoUpdate);const nt=a.levels;for(let it=0;it<nt.length;it++){const at=nt[it],ct=$.getObjectByProperty("uuid",at.object);ct!==void 0&&$.addLevel(ct,at.distance,at.hysteresis)}}return $}bindSkeletons(a,o){Object.keys(o).length!==0&&a.traverse(function(c){if(c.isSkinnedMesh===!0&&c.skeleton!==void 0){const d=o[c.skeleton];d===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",c.skeleton):c.bind(d,c.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping:UVMapping$1,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping:RepeatWrapping$1,ClampToEdgeWrapping:ClampToEdgeWrapping$1,MirroredRepeatWrapping:MirroredRepeatWrapping$1},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter:LinearFilter$1,LinearMipmapNearestFilter,LinearMipmapLinearFilter:LinearMipmapLinearFilter$1};class ImageBitmapLoader extends Loader$2{constructor(a){super(a),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(a){return this.options=a,this}load(a,o,c,d){a===void 0&&(a=""),this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const b=this,$=Cache$1.get(a);if($!==void 0)return b.manager.itemStart(a),setTimeout(function(){o&&o($),b.manager.itemEnd(a)},0),$;const j={};j.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",j.headers=this.requestHeader,fetch(a,j).then(function(_e){return _e.blob()}).then(function(_e){return createImageBitmap(_e,Object.assign(b.options,{colorSpaceConversion:"none"}))}).then(function(_e){Cache$1.add(a,_e),o&&o(_e),b.manager.itemEnd(a)}).catch(function(_e){d&&d(_e),b.manager.itemError(a),b.manager.itemEnd(a)}),b.manager.itemStart(a)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(a){_context=a}}class AudioLoader extends Loader$2{constructor(a){super(a)}load(a,o,c,d){const b=this,$=new FileLoader(this.manager);$.setResponseType("arraybuffer"),$.setPath(this.path),$.setRequestHeader(this.requestHeader),$.setWithCredentials(this.withCredentials),$.load(a,function(_e){try{const et=_e.slice(0);AudioContext.getContext().decodeAudioData(et,function(rt){o(rt)},j)}catch(et){j(et)}},c,d);function j(_e){d?d(_e):console.error(_e),b.manager.itemError(a)}}}class HemisphereLightProbe extends LightProbe{constructor(a,o,c=1){super(void 0,c),this.isHemisphereLightProbe=!0;const d=new Color().set(a),b=new Color().set(o),$=new Vector3(d.r,d.g,d.b),j=new Vector3(b.r,b.g,b.b),_e=Math.sqrt(Math.PI),et=_e*Math.sqrt(.75);this.sh.coefficients[0].copy($).add(j).multiplyScalar(_e),this.sh.coefficients[1].copy($).sub(j).multiplyScalar(et)}}class AmbientLightProbe extends LightProbe{constructor(a,o=1){super(void 0,o),this.isAmbientLightProbe=!0;const c=new Color().set(a);this.sh.coefficients[0].set(c.r,c.g,c.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(a){const o=this._cache;if(o.focus!==a.focus||o.fov!==a.fov||o.aspect!==a.aspect*this.aspect||o.near!==a.near||o.far!==a.far||o.zoom!==a.zoom||o.eyeSep!==this.eyeSep){o.focus=a.focus,o.fov=a.fov,o.aspect=a.aspect*this.aspect,o.near=a.near,o.far=a.far,o.zoom=a.zoom,o.eyeSep=this.eyeSep,_projectionMatrix.copy(a.projectionMatrix);const d=o.eyeSep/2,b=d*o.near/o.focus,$=o.near*Math.tan(DEG2RAD*o.fov*.5)/o.zoom;let j,_e;_eyeLeft.elements[12]=-d,_eyeRight.elements[12]=d,j=-$*o.aspect+b,_e=$*o.aspect+b,_projectionMatrix.elements[0]=2*o.near/(_e-j),_projectionMatrix.elements[8]=(_e+j)/(_e-j),this.cameraL.projectionMatrix.copy(_projectionMatrix),j=-$*o.aspect-b,_e=$*o.aspect-b,_projectionMatrix.elements[0]=2*o.near/(_e-j),_projectionMatrix.elements[8]=(_e+j)/(_e-j),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(a=!0){this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=now();a=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=a}return a}}function now(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(a){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}updateMatrixWorld(a){super.updateMatrixWorld(a);const o=this.context.listener,c=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),o.positionX){const d=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(_position$1.x,d),o.positionY.linearRampToValueAtTime(_position$1.y,d),o.positionZ.linearRampToValueAtTime(_position$1.z,d),o.forwardX.linearRampToValueAtTime(_orientation$1.x,d),o.forwardY.linearRampToValueAtTime(_orientation$1.y,d),o.forwardZ.linearRampToValueAtTime(_orientation$1.z,d),o.upX.linearRampToValueAtTime(c.x,d),o.upY.linearRampToValueAtTime(c.y,d),o.upZ.linearRampToValueAtTime(c.z,d)}else o.setPosition(_position$1.x,_position$1.y,_position$1.z),o.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,c.x,c.y,c.z)}}class Audio extends Object3D{constructor(a){super(),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}setMediaElementSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}setMediaStreamSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}setBuffer(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}play(a=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+a;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let a=1,o=this.filters.length;a<o;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let a=1,o=this.filters.length;a<o;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(a){return a||(a=[]),this._connected===!0?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}setDetune(a){if(this.detune=a,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=a,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=a,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(a){return this.loopStart=a,this}setLoopEnd(a){return this.loopEnd=a,this}getVolume(){return this.gain.gain.value}setVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(a){super(a),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){return this.panner.refDistance=a,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){return this.panner.rolloffFactor=a,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){return this.panner.distanceModel=a,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){return this.panner.maxDistance=a,this}setDirectionalCone(a,o,c){return this.panner.coneInnerAngle=a,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=c,this}updateMatrixWorld(a){if(super.updateMatrixWorld(a),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const o=this.panner;if(o.positionX){const c=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(_position.x,c),o.positionY.linearRampToValueAtTime(_position.y,c),o.positionZ.linearRampToValueAtTime(_position.z,c),o.orientationX.linearRampToValueAtTime(_orientation.x,c),o.orientationY.linearRampToValueAtTime(_orientation.y,c),o.orientationZ.linearRampToValueAtTime(_orientation.z,c)}else o.setPosition(_position.x,_position.y,_position.z),o.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(a,o=2048){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=o,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let a=0;const o=this.getFrequencyData();for(let c=0;c<o.length;c++)a+=o[c];return a/o.length}}class PropertyMixer{constructor(a,o,c){this.binding=a,this.valueSize=c;let d,b,$;switch(o){case"quaternion":d=this._slerp,b=this._slerpAdditive,$=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(c*6),this._workIndex=5;break;case"string":case"bool":d=this._select,b=this._select,$=this._setAdditiveIdentityOther,this.buffer=new Array(c*5);break;default:d=this._lerp,b=this._lerpAdditive,$=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(c*5)}this._mixBufferRegion=d,this._mixBufferRegionAdditive=b,this._setIdentity=$,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(a,o){const c=this.buffer,d=this.valueSize,b=a*d+d;let $=this.cumulativeWeight;if($===0){for(let j=0;j!==d;++j)c[b+j]=c[j];$=o}else{$+=o;const j=o/$;this._mixBufferRegion(c,b,0,j,d)}this.cumulativeWeight=$}accumulateAdditive(a){const o=this.buffer,c=this.valueSize,d=c*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,d,0,a,c),this.cumulativeWeightAdditive+=a}apply(a){const o=this.valueSize,c=this.buffer,d=a*o+o,b=this.cumulativeWeight,$=this.cumulativeWeightAdditive,j=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,b<1){const _e=o*this._origIndex;this._mixBufferRegion(c,d,_e,1-b,o)}$>0&&this._mixBufferRegionAdditive(c,d,this._addIndex*o,1,o);for(let _e=o,et=o+o;_e!==et;++_e)if(c[_e]!==c[_e+o]){j.setValue(c,d);break}}saveOriginalState(){const a=this.binding,o=this.buffer,c=this.valueSize,d=c*this._origIndex;a.getValue(o,d);for(let b=c,$=d;b!==$;++b)o[b]=o[d+b%c];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const a=this.valueSize*3;this.binding.setValue(this.buffer,a)}_setAdditiveIdentityNumeric(){const a=this._addIndex*this.valueSize,o=a+this.valueSize;for(let c=a;c<o;c++)this.buffer[c]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[o+c]=this.buffer[a+c]}_select(a,o,c,d,b){if(d>=.5)for(let $=0;$!==b;++$)a[o+$]=a[c+$]}_slerp(a,o,c,d){Quaternion.slerpFlat(a,o,a,o,a,c,d)}_slerpAdditive(a,o,c,d,b){const $=this._workIndex*b;Quaternion.multiplyQuaternionsFlat(a,$,a,o,a,c),Quaternion.slerpFlat(a,o,a,o,a,$,d)}_lerp(a,o,c,d,b){const $=1-d;for(let j=0;j!==b;++j){const _e=o+j;a[_e]=a[_e]*$+a[c+j]*d}}_lerpAdditive(a,o,c,d,b){for(let $=0;$!==b;++$){const j=o+$;a[j]=a[j]+a[c+$]*d}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(a,o,c){const d=c||PropertyBinding.parseTrackName(o);this._targetGroup=a,this._bindings=a.subscribe_(o,d)}getValue(a,o){this.bind();const c=this._targetGroup.nCachedObjects_,d=this._bindings[c];d!==void 0&&d.getValue(a,o)}setValue(a,o){const c=this._bindings;for(let d=this._targetGroup.nCachedObjects_,b=c.length;d!==b;++d)c[d].setValue(a,o)}bind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].bind()}unbind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].unbind()}}class PropertyBinding{constructor(a,o,c){this.path=o,this.parsedPath=c||PropertyBinding.parseTrackName(o),this.node=PropertyBinding.findNode(a,this.parsedPath.nodeName),this.rootNode=a,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(a,o,c){return a&&a.isAnimationObjectGroup?new PropertyBinding.Composite(a,o,c):new PropertyBinding(a,o,c)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(a){const o=_trackRe.exec(a);if(o===null)throw new Error("PropertyBinding: Cannot parse trackName: "+a);const c={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},d=c.nodeName&&c.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){const b=c.nodeName.substring(d+1);_supportedObjectNames.indexOf(b)!==-1&&(c.nodeName=c.nodeName.substring(0,d),c.objectName=b)}if(c.propertyName===null||c.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return c}static findNode(a,o){if(o===void 0||o===""||o==="."||o===-1||o===a.name||o===a.uuid)return a;if(a.skeleton){const c=a.skeleton.getBoneByName(o);if(c!==void 0)return c}if(a.children){const c=function(b){for(let $=0;$<b.length;$++){const j=b[$];if(j.name===o||j.uuid===o)return j;const _e=c(j.children);if(_e)return _e}return null},d=c(a.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,o){a[o]=this.targetObject[this.propertyName]}_getValue_array(a,o){const c=this.resolvedProperty;for(let d=0,b=c.length;d!==b;++d)a[o++]=c[d]}_getValue_arrayElement(a,o){a[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,o){this.resolvedProperty.toArray(a,o)}_setValue_direct(a,o){this.targetObject[this.propertyName]=a[o]}_setValue_direct_setNeedsUpdate(a,o){this.targetObject[this.propertyName]=a[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,o){this.targetObject[this.propertyName]=a[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,o){const c=this.resolvedProperty;for(let d=0,b=c.length;d!==b;++d)c[d]=a[o++]}_setValue_array_setNeedsUpdate(a,o){const c=this.resolvedProperty;for(let d=0,b=c.length;d!==b;++d)c[d]=a[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,o){const c=this.resolvedProperty;for(let d=0,b=c.length;d!==b;++d)c[d]=a[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,o){this.resolvedProperty[this.propertyIndex]=a[o]}_setValue_arrayElement_setNeedsUpdate(a,o){this.resolvedProperty[this.propertyIndex]=a[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,o){this.resolvedProperty[this.propertyIndex]=a[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,o){this.resolvedProperty.fromArray(a,o)}_setValue_fromArray_setNeedsUpdate(a,o){this.resolvedProperty.fromArray(a,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,o){this.resolvedProperty.fromArray(a,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,o){this.bind(),this.getValue(a,o)}_setValue_unbound(a,o){this.bind(),this.setValue(a,o)}bind(){let a=this.node;const o=this.parsedPath,c=o.objectName,d=o.propertyName;let b=o.propertyIndex;if(a||(a=PropertyBinding.findNode(this.rootNode,o.nodeName),this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(c){let et=o.objectIndex;switch(c){case"materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case"bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(let tt=0;tt<a.length;tt++)if(a[tt].name===et){et=tt;break}break;case"map":if("map"in a){a=a.map;break}if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}a=a.material.map;break;default:if(a[c]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c]}if(et!==void 0){if(a[et]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[et]}}const $=a[d];if($===void 0){const et=o.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+et+"."+d+" but it wasn't found.",a);return}let j=this.Versioning.None;this.targetObject=a,a.needsUpdate!==void 0?j=this.Versioning.NeedsUpdate:a.matrixWorldNeedsUpdate!==void 0&&(j=this.Versioning.MatrixWorldNeedsUpdate);let _e=this.BindingType.Direct;if(b!==void 0){if(d==="morphTargetInfluences"){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}a.morphTargetDictionary[b]!==void 0&&(b=a.morphTargetDictionary[b])}_e=this.BindingType.ArrayElement,this.resolvedProperty=$,this.propertyIndex=b}else $.fromArray!==void 0&&$.toArray!==void 0?(_e=this.BindingType.HasFromToArray,this.resolvedProperty=$):Array.isArray($)?(_e=this.BindingType.EntireArray,this.resolvedProperty=$):this.propertyName=d;this.getValue=this.GetterByBindingType[_e],this.setValue=this.SetterByBindingTypeAndVersioning[_e][j]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let c=0,d=arguments.length;c!==d;++c)a[arguments[c].uuid]=c;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}add(){const a=this._objects,o=this._indicesByUUID,c=this._paths,d=this._parsedPaths,b=this._bindings,$=b.length;let j,_e=a.length,et=this.nCachedObjects_;for(let tt=0,rt=arguments.length;tt!==rt;++tt){const nt=arguments[tt],it=nt.uuid;let at=o[it];if(at===void 0){at=_e++,o[it]=at,a.push(nt);for(let ct=0,st=$;ct!==st;++ct)b[ct].push(new PropertyBinding(nt,c[ct],d[ct]))}else if(at<et){j=a[at];const ct=--et,st=a[ct];o[st.uuid]=at,a[at]=st,o[it]=ct,a[ct]=nt;for(let ot=0,ht=$;ot!==ht;++ot){const dt=b[ot],ft=dt[ct];let mt=dt[at];dt[at]=ft,mt===void 0&&(mt=new PropertyBinding(nt,c[ot],d[ot])),dt[ct]=mt}}else a[at]!==j&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=et}remove(){const a=this._objects,o=this._indicesByUUID,c=this._bindings,d=c.length;let b=this.nCachedObjects_;for(let $=0,j=arguments.length;$!==j;++$){const _e=arguments[$],et=_e.uuid,tt=o[et];if(tt!==void 0&&tt>=b){const rt=b++,nt=a[rt];o[nt.uuid]=tt,a[tt]=nt,o[et]=rt,a[rt]=_e;for(let it=0,at=d;it!==at;++it){const ct=c[it],st=ct[rt],ot=ct[tt];ct[tt]=st,ct[rt]=ot}}}this.nCachedObjects_=b}uncache(){const a=this._objects,o=this._indicesByUUID,c=this._bindings,d=c.length;let b=this.nCachedObjects_,$=a.length;for(let j=0,_e=arguments.length;j!==_e;++j){const et=arguments[j],tt=et.uuid,rt=o[tt];if(rt!==void 0)if(delete o[tt],rt<b){const nt=--b,it=a[nt],at=--$,ct=a[at];o[it.uuid]=rt,a[rt]=it,o[ct.uuid]=nt,a[nt]=ct,a.pop();for(let st=0,ot=d;st!==ot;++st){const ht=c[st],dt=ht[nt],ft=ht[at];ht[rt]=dt,ht[nt]=ft,ht.pop()}}else{const nt=--$,it=a[nt];nt>0&&(o[it.uuid]=rt),a[rt]=it,a.pop();for(let at=0,ct=d;at!==ct;++at){const st=c[at];st[rt]=st[nt],st.pop()}}}this.nCachedObjects_=b}subscribe_(a,o){const c=this._bindingsIndicesByPath;let d=c[a];const b=this._bindings;if(d!==void 0)return b[d];const $=this._paths,j=this._parsedPaths,_e=this._objects,et=_e.length,tt=this.nCachedObjects_,rt=new Array(et);d=b.length,c[a]=d,$.push(a),j.push(o),b.push(rt);for(let nt=tt,it=_e.length;nt!==it;++nt){const at=_e[nt];rt[nt]=new PropertyBinding(at,a,o)}return rt}unsubscribe_(a){const o=this._bindingsIndicesByPath,c=o[a];if(c!==void 0){const d=this._paths,b=this._parsedPaths,$=this._bindings,j=$.length-1,_e=$[j],et=a[j];o[et]=c,$[c]=_e,$.pop(),b[c]=b[j],b.pop(),d[c]=d[j],d.pop()}}}class AnimationAction{constructor(a,o,c=null,d=o.blendMode){this._mixer=a,this._clip=o,this._localRoot=c,this.blendMode=d;const b=o.tracks,$=b.length,j=new Array($),_e={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let et=0;et!==$;++et){const tt=b[et].createInterpolant(null);j[et]=tt,tt.settings=_e}this._interpolantSettings=_e,this._interpolants=j,this._propertyBindings=new Array($),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){return this._startTime=a,this}setLoop(a,o){return this.loop=a,this.repetitions=o,this}setEffectiveWeight(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,o,c){if(a.fadeOut(o),this.fadeIn(o),c){const d=this._clip.duration,b=a._clip.duration,$=b/d,j=d/b;a.warp(1,$,o),this.warp(j,1,o)}return this}crossFadeTo(a,o,c){return a.crossFadeFrom(this,o,c)}stopFading(){const a=this._weightInterpolant;return a!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}setEffectiveTimeScale(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){return this.timeScale=this._clip.duration/a,this.stopWarping()}syncWith(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,o,c){const d=this._mixer,b=d.time,$=this.timeScale;let j=this._timeScaleInterpolant;j===null&&(j=d._lendControlInterpolant(),this._timeScaleInterpolant=j);const _e=j.parameterPositions,et=j.sampleValues;return _e[0]=b,_e[1]=b+c,et[0]=a/$,et[1]=o/$,this}stopWarping(){const a=this._timeScaleInterpolant;return a!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,o,c,d){if(!this.enabled){this._updateWeight(a);return}const b=this._startTime;if(b!==null){const _e=(a-b)*c;_e<0||c===0?o=0:(this._startTime=null,o=c*_e)}o*=this._updateTimeScale(a);const $=this._updateTime(o),j=this._updateWeight(a);if(j>0){const _e=this._interpolants,et=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let tt=0,rt=_e.length;tt!==rt;++tt)_e[tt].evaluate($),et[tt].accumulateAdditive(j);break;case NormalAnimationBlendMode:default:for(let tt=0,rt=_e.length;tt!==rt;++tt)_e[tt].evaluate($),et[tt].accumulate(d,j)}}}_updateWeight(a){let o=0;if(this.enabled){o=this.weight;const c=this._weightInterpolant;if(c!==null){const d=c.evaluate(a)[0];o*=d,a>c.parameterPositions[1]&&(this.stopFading(),d===0&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(a){let o=0;if(!this.paused){o=this.timeScale;const c=this._timeScaleInterpolant;if(c!==null){const d=c.evaluate(a)[0];o*=d,a>c.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o)}}return this._effectiveTimeScale=o,o}_updateTime(a){const o=this._clip.duration,c=this.loop;let d=this.time+a,b=this._loopCount;const $=c===LoopPingPong;if(a===0)return b===-1?d:$&&(b&1)===1?o-d:d;if(c===LoopOnce){b===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=o)d=o;else if(d<0)d=0;else{this.time=d;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{if(b===-1&&(a>=0?(b=0,this._setEndings(!0,this.repetitions===0,$)):this._setEndings(this.repetitions===0,!0,$)),d>=o||d<0){const j=Math.floor(d/o);d-=o*j,b+=Math.abs(j);const _e=this.repetitions-b;if(_e<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=a>0?o:0,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(_e===1){const et=a<0;this._setEndings(et,!et,$)}else this._setEndings(!1,!1,$);this._loopCount=b,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:j})}}else this.time=d;if($&&(b&1)===1)return o-d}return d}_setEndings(a,o,c){const d=this._interpolantSettings;c?(d.endingStart=ZeroSlopeEnding,d.endingEnd=ZeroSlopeEnding):(a?d.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:d.endingStart=WrapAroundEnding,o?d.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:d.endingEnd=WrapAroundEnding)}_scheduleFading(a,o,c){const d=this._mixer,b=d.time;let $=this._weightInterpolant;$===null&&($=d._lendControlInterpolant(),this._weightInterpolant=$);const j=$.parameterPositions,_e=$.sampleValues;return j[0]=b,_e[0]=o,j[1]=b+a,_e[1]=c,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(a){super(),this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(a,o){const c=a._localRoot||this._root,d=a._clip.tracks,b=d.length,$=a._propertyBindings,j=a._interpolants,_e=c.uuid,et=this._bindingsByRootAndName;let tt=et[_e];tt===void 0&&(tt={},et[_e]=tt);for(let rt=0;rt!==b;++rt){const nt=d[rt],it=nt.name;let at=tt[it];if(at!==void 0)++at.referenceCount,$[rt]=at;else{if(at=$[rt],at!==void 0){at._cacheIndex===null&&(++at.referenceCount,this._addInactiveBinding(at,_e,it));continue}const ct=o&&o._propertyBindings[rt].binding.parsedPath;at=new PropertyMixer(PropertyBinding.create(c,it,ct),nt.ValueTypeName,nt.getValueSize()),++at.referenceCount,this._addInactiveBinding(at,_e,it),$[rt]=at}j[rt].resultBuffer=at.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(a._cacheIndex===null){const c=(a._localRoot||this._root).uuid,d=a._clip.uuid,b=this._actionsByClip[d];this._bindAction(a,b&&b.knownActions[0]),this._addInactiveAction(a,d,c)}const o=a._propertyBindings;for(let c=0,d=o.length;c!==d;++c){const b=o[c];b.useCount++===0&&(this._lendBinding(b),b.saveOriginalState())}this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const o=a._propertyBindings;for(let c=0,d=o.length;c!==d;++c){const b=o[c];--b.useCount===0&&(b.restoreOriginalState(),this._takeBackBinding(b))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){const o=a._cacheIndex;return o!==null&&o<this._nActiveActions}_addInactiveAction(a,o,c){const d=this._actions,b=this._actionsByClip;let $=b[o];if($===void 0)$={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,b[o]=$;else{const j=$.knownActions;a._byClipCacheIndex=j.length,j.push(a)}a._cacheIndex=d.length,d.push(a),$.actionByRoot[c]=a}_removeInactiveAction(a){const o=this._actions,c=o[o.length-1],d=a._cacheIndex;c._cacheIndex=d,o[d]=c,o.pop(),a._cacheIndex=null;const b=a._clip.uuid,$=this._actionsByClip,j=$[b],_e=j.knownActions,et=_e[_e.length-1],tt=a._byClipCacheIndex;et._byClipCacheIndex=tt,_e[tt]=et,_e.pop(),a._byClipCacheIndex=null;const rt=j.actionByRoot,nt=(a._localRoot||this._root).uuid;delete rt[nt],_e.length===0&&delete $[b],this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){const o=a._propertyBindings;for(let c=0,d=o.length;c!==d;++c){const b=o[c];--b.referenceCount===0&&this._removeInactiveBinding(b)}}_lendAction(a){const o=this._actions,c=a._cacheIndex,d=this._nActiveActions++,b=o[d];a._cacheIndex=d,o[d]=a,b._cacheIndex=c,o[c]=b}_takeBackAction(a){const o=this._actions,c=a._cacheIndex,d=--this._nActiveActions,b=o[d];a._cacheIndex=d,o[d]=a,b._cacheIndex=c,o[c]=b}_addInactiveBinding(a,o,c){const d=this._bindingsByRootAndName,b=this._bindings;let $=d[o];$===void 0&&($={},d[o]=$),$[c]=a,a._cacheIndex=b.length,b.push(a)}_removeInactiveBinding(a){const o=this._bindings,c=a.binding,d=c.rootNode.uuid,b=c.path,$=this._bindingsByRootAndName,j=$[d],_e=o[o.length-1],et=a._cacheIndex;_e._cacheIndex=et,o[et]=_e,o.pop(),delete j[b],Object.keys(j).length===0&&delete $[d]}_lendBinding(a){const o=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,b=o[d];a._cacheIndex=d,o[d]=a,b._cacheIndex=c,o[c]=b}_takeBackBinding(a){const o=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,b=o[d];a._cacheIndex=d,o[d]=a,b._cacheIndex=c,o[c]=b}_lendControlInterpolant(){const a=this._controlInterpolants,o=this._nActiveControlInterpolants++;let c=a[o];return c===void 0&&(c=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),c.__cacheIndex=o,a[o]=c),c}_takeBackControlInterpolant(a){const o=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,b=o[d];a.__cacheIndex=d,o[d]=a,b.__cacheIndex=c,o[c]=b}clipAction(a,o,c){const d=o||this._root,b=d.uuid;let $=typeof a=="string"?AnimationClip.findByName(d,a):a;const j=$!==null?$.uuid:a,_e=this._actionsByClip[j];let et=null;if(c===void 0&&($!==null?c=$.blendMode:c=NormalAnimationBlendMode),_e!==void 0){const rt=_e.actionByRoot[b];if(rt!==void 0&&rt.blendMode===c)return rt;et=_e.knownActions[0],$===null&&($=et._clip)}if($===null)return null;const tt=new AnimationAction(this,$,o,c);return this._bindAction(tt,et),this._addInactiveAction(tt,j,b),tt}existingAction(a,o){const c=o||this._root,d=c.uuid,b=typeof a=="string"?AnimationClip.findByName(c,a):a,$=b?b.uuid:a,j=this._actionsByClip[$];return j!==void 0&&j.actionByRoot[d]||null}stopAllAction(){const a=this._actions,o=this._nActiveActions;for(let c=o-1;c>=0;--c)a[c].stop();return this}update(a){a*=this.timeScale;const o=this._actions,c=this._nActiveActions,d=this.time+=a,b=Math.sign(a),$=this._accuIndex^=1;for(let et=0;et!==c;++et)o[et]._update(d,a,b,$);const j=this._bindings,_e=this._nActiveBindings;for(let et=0;et!==_e;++et)j[et].apply($);return this}setTime(a){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const o=this._actions,c=a.uuid,d=this._actionsByClip,b=d[c];if(b!==void 0){const $=b.knownActions;for(let j=0,_e=$.length;j!==_e;++j){const et=$[j];this._deactivateAction(et);const tt=et._cacheIndex,rt=o[o.length-1];et._cacheIndex=null,et._byClipCacheIndex=null,rt._cacheIndex=tt,o[tt]=rt,o.pop(),this._removeInactiveBindingsForAction(et)}delete d[c]}}uncacheRoot(a){const o=a.uuid,c=this._actionsByClip;for(const $ in c){const j=c[$].actionByRoot,_e=j[o];_e!==void 0&&(this._deactivateAction(_e),this._removeInactiveAction(_e))}const d=this._bindingsByRootAndName,b=d[o];if(b!==void 0)for(const $ in b){const j=b[$];j.restoreOriginalState(),this._removeInactiveBinding(j)}}uncacheAction(a,o){const c=this.existingAction(a,o);c!==null&&(this._deactivateAction(c),this._removeInactiveAction(c))}}class Uniform{constructor(a){this.value=a}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id$1=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id$1++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(a){return this.uniforms.push(a),this}remove(a){const o=this.uniforms.indexOf(a);return o!==-1&&this.uniforms.splice(o,1),this}setName(a){return this.name=a,this}setUsage(a){return this.usage=a,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(a){this.name=a.name,this.usage=a.usage;const o=a.uniforms;this.uniforms.length=0;for(let c=0,d=o.length;c<d;c++)this.uniforms.push(o[c].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(a,o,c=1){super(a,o),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=c}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}clone(a){const o=super.clone(a);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(a){const o=super.toJSON(a);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}class GLBufferAttribute{constructor(a,o,c,d,b){this.isGLBufferAttribute=!0,this.name="",this.buffer=a,this.type=o,this.itemSize=c,this.elementSize=d,this.count=b,this.version=0}set needsUpdate(a){a===!0&&this.version++}setBuffer(a){return this.buffer=a,this}setType(a,o){return this.type=a,this.elementSize=o,this}setItemSize(a){return this.itemSize=a,this}setCount(a){return this.count=a,this}}class Raycaster{constructor(a,o,c=0,d=1/0){this.ray=new Ray(a,o),this.near=c,this.far=d,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,o){this.ray.set(a,o)}setFromCamera(a,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):console.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(a,o=!0,c=[]){return intersectObject(a,this,c,o),c.sort(ascSort),c}intersectObjects(a,o=!0,c=[]){for(let d=0,b=a.length;d<b;d++)intersectObject(a[d],this,c,o);return c.sort(ascSort),c}}function ascSort(s,a){return s.distance-a.distance}function intersectObject(s,a,o,c){if(s.layers.test(a.layers)&&s.raycast(a,o),c===!0){const d=s.children;for(let b=0,$=d.length;b<$;b++)intersectObject(d[b],a,o,!0)}}class Spherical{constructor(a=1,o=0,c=0){return this.radius=a,this.phi=o,this.theta=c,this}set(a,o,c){return this.radius=a,this.phi=o,this.theta=c,this}copy(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,o,c){return this.radius=Math.sqrt(a*a+o*o+c*c),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,c),this.phi=Math.acos(clamp$2(o/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(a=1,o=0,c=0){return this.radius=a,this.theta=o,this.y=c,this}set(a,o,c){return this.radius=a,this.theta=o,this.y=c,this}copy(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,o,c){return this.radius=Math.sqrt(a*a+c*c),this.theta=Math.atan2(a,c),this.y=o,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2$1;class Box2{constructor(a=new Vector2$1(1/0,1/0),o=new Vector2$1(-1/0,-1/0)){this.isBox2=!0,this.min=a,this.max=o}set(a,o){return this.min.copy(a),this.max.copy(o),this}setFromPoints(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o++)this.expandByPoint(a[o]);return this}setFromCenterAndSize(a,o){const c=_vector$4.copy(o).multiplyScalar(.5);return this.min.copy(a).sub(c),this.max.copy(a).add(c),this}clone(){return new this.constructor().copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,o){return o.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)}clampPoint(a,o){return o.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,_vector$4).distanceTo(a)}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(a=new Vector3,o=new Vector3){this.start=a,this.end=o}set(a,o){return this.start.copy(a),this.end.copy(o),this}copy(a){return this.start.copy(a.start),this.end.copy(a.end),this}getCenter(a){return a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return a.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,o){return this.delta(o).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,o){_startP.subVectors(a,this.start),_startEnd.subVectors(this.end,this.start);const c=_startEnd.dot(_startEnd);let b=_startEnd.dot(_startP)/c;return o&&(b=clamp$2(b,0,1)),b}closestPointToPoint(a,o,c){const d=this.closestPointToPointParameter(a,o);return this.delta(c).multiplyScalar(d).add(this.start)}applyMatrix4(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(a,o){super(),this.light=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="SpotLightHelper";const c=new BufferGeometry,d=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let $=0,j=1,_e=32;$<_e;$++,j++){const et=$/_e*Math.PI*2,tt=j/_e*Math.PI*2;d.push(Math.cos(et),Math.sin(et),1,Math.cos(tt),Math.sin(tt),1)}c.setAttribute("position",new Float32BufferAttribute(d,3));const b=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(c,b),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const a=this.light.distance?this.light.distance:1e3,o=a*Math.tan(this.light.angle);this.cone.scale.set(o,o,a),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(a){const o=getBoneList(a),c=new BufferGeometry,d=[],b=[],$=new Color(0,0,1),j=new Color(0,1,0);for(let et=0;et<o.length;et++){const tt=o[et];tt.parent&&tt.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),b.push($.r,$.g,$.b),b.push(j.r,j.g,j.b))}c.setAttribute("position",new Float32BufferAttribute(d,3)),c.setAttribute("color",new Float32BufferAttribute(b,3));const _e=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(c,_e),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=a,this.bones=o,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(a){const o=this.bones,c=this.geometry,d=c.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let b=0,$=0;b<o.length;b++){const j=o[b];j.parent&&j.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,j.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),d.setXYZ($,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,j.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),d.setXYZ($+1,_vector$2.x,_vector$2.y,_vector$2.z),$+=2)}c.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(a)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(s){const a=[];s.isBone===!0&&a.push(s);for(let o=0;o<s.children.length;o++)a.push.apply(a,getBoneList(s.children[o]));return a}class PointLightHelper extends Mesh{constructor(a,o,c){const d=new SphereGeometry(o,4,2),b=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(d,b),this.light=a,this.color=c,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(a,o,c){super(),this.light=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=c,this.type="HemisphereLightHelper";const d=new OctahedronGeometry(o);d.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const b=d.getAttribute("position"),$=new Float32Array(b.count*3);d.setAttribute("color",new BufferAttribute($,3)),this.add(new Mesh(d,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const a=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const o=a.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let c=0,d=o.count;c<d;c++){const b=c<d/2?_color1:_color2;o.setXYZ(c,b.r,b.g,b.b)}o.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),a.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(a=10,o=10,c=4473924,d=8947848){c=new Color(c),d=new Color(d);const b=o/2,$=a/o,j=a/2,_e=[],et=[];for(let nt=0,it=0,at=-j;nt<=o;nt++,at+=$){_e.push(-j,0,at,j,0,at),_e.push(at,0,-j,at,0,j);const ct=nt===b?c:d;ct.toArray(et,it),it+=3,ct.toArray(et,it),it+=3,ct.toArray(et,it),it+=3,ct.toArray(et,it),it+=3}const tt=new BufferGeometry;tt.setAttribute("position",new Float32BufferAttribute(_e,3)),tt.setAttribute("color",new Float32BufferAttribute(et,3));const rt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(tt,rt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(a=10,o=16,c=8,d=64,b=4473924,$=8947848){b=new Color(b),$=new Color($);const j=[],_e=[];if(o>1)for(let rt=0;rt<o;rt++){const nt=rt/o*(Math.PI*2),it=Math.sin(nt)*a,at=Math.cos(nt)*a;j.push(0,0,0),j.push(it,0,at);const ct=rt&1?b:$;_e.push(ct.r,ct.g,ct.b),_e.push(ct.r,ct.g,ct.b)}for(let rt=0;rt<c;rt++){const nt=rt&1?b:$,it=a-a/c*rt;for(let at=0;at<d;at++){let ct=at/d*(Math.PI*2),st=Math.sin(ct)*it,ot=Math.cos(ct)*it;j.push(st,0,ot),_e.push(nt.r,nt.g,nt.b),ct=(at+1)/d*(Math.PI*2),st=Math.sin(ct)*it,ot=Math.cos(ct)*it,j.push(st,0,ot),_e.push(nt.r,nt.g,nt.b)}}const et=new BufferGeometry;et.setAttribute("position",new Float32BufferAttribute(j,3)),et.setAttribute("color",new Float32BufferAttribute(_e,3));const tt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(et,tt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(a,o,c){super(),this.light=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=c,this.type="DirectionalLightHelper",o===void 0&&(o=1);let d=new BufferGeometry;d.setAttribute("position",new Float32BufferAttribute([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));const b=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(d,b),this.add(this.lightPlane),d=new BufferGeometry,d.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(d,b),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(a){const o=new BufferGeometry,c=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),d=[],b=[],$={};j("n1","n2"),j("n2","n4"),j("n4","n3"),j("n3","n1"),j("f1","f2"),j("f2","f4"),j("f4","f3"),j("f3","f1"),j("n1","f1"),j("n2","f2"),j("n3","f3"),j("n4","f4"),j("p","n1"),j("p","n2"),j("p","n3"),j("p","n4"),j("u1","u2"),j("u2","u3"),j("u3","u1"),j("c","t"),j("p","c"),j("cn1","cn2"),j("cn3","cn4"),j("cf1","cf2"),j("cf3","cf4");function j(at,ct){_e(at),_e(ct)}function _e(at){d.push(0,0,0),b.push(0,0,0),$[at]===void 0&&($[at]=[]),$[at].push(d.length/3-1)}o.setAttribute("position",new Float32BufferAttribute(d,3)),o.setAttribute("color",new Float32BufferAttribute(b,3)),super(o,c),this.type="CameraHelper",this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=$,this.update();const et=new Color(16755200),tt=new Color(16711680),rt=new Color(43775),nt=new Color(16777215),it=new Color(3355443);this.setColors(et,tt,rt,nt,it)}setColors(a,o,c,d,b){const j=this.geometry.getAttribute("color");j.setXYZ(0,a.r,a.g,a.b),j.setXYZ(1,a.r,a.g,a.b),j.setXYZ(2,a.r,a.g,a.b),j.setXYZ(3,a.r,a.g,a.b),j.setXYZ(4,a.r,a.g,a.b),j.setXYZ(5,a.r,a.g,a.b),j.setXYZ(6,a.r,a.g,a.b),j.setXYZ(7,a.r,a.g,a.b),j.setXYZ(8,a.r,a.g,a.b),j.setXYZ(9,a.r,a.g,a.b),j.setXYZ(10,a.r,a.g,a.b),j.setXYZ(11,a.r,a.g,a.b),j.setXYZ(12,a.r,a.g,a.b),j.setXYZ(13,a.r,a.g,a.b),j.setXYZ(14,a.r,a.g,a.b),j.setXYZ(15,a.r,a.g,a.b),j.setXYZ(16,a.r,a.g,a.b),j.setXYZ(17,a.r,a.g,a.b),j.setXYZ(18,a.r,a.g,a.b),j.setXYZ(19,a.r,a.g,a.b),j.setXYZ(20,a.r,a.g,a.b),j.setXYZ(21,a.r,a.g,a.b),j.setXYZ(22,a.r,a.g,a.b),j.setXYZ(23,a.r,a.g,a.b),j.setXYZ(24,o.r,o.g,o.b),j.setXYZ(25,o.r,o.g,o.b),j.setXYZ(26,o.r,o.g,o.b),j.setXYZ(27,o.r,o.g,o.b),j.setXYZ(28,o.r,o.g,o.b),j.setXYZ(29,o.r,o.g,o.b),j.setXYZ(30,o.r,o.g,o.b),j.setXYZ(31,o.r,o.g,o.b),j.setXYZ(32,c.r,c.g,c.b),j.setXYZ(33,c.r,c.g,c.b),j.setXYZ(34,c.r,c.g,c.b),j.setXYZ(35,c.r,c.g,c.b),j.setXYZ(36,c.r,c.g,c.b),j.setXYZ(37,c.r,c.g,c.b),j.setXYZ(38,d.r,d.g,d.b),j.setXYZ(39,d.r,d.g,d.b),j.setXYZ(40,b.r,b.g,b.b),j.setXYZ(41,b.r,b.g,b.b),j.setXYZ(42,b.r,b.g,b.b),j.setXYZ(43,b.r,b.g,b.b),j.setXYZ(44,b.r,b.g,b.b),j.setXYZ(45,b.r,b.g,b.b),j.setXYZ(46,b.r,b.g,b.b),j.setXYZ(47,b.r,b.g,b.b),j.setXYZ(48,b.r,b.g,b.b),j.setXYZ(49,b.r,b.g,b.b),j.needsUpdate=!0}update(){const a=this.geometry,o=this.pointMap,c=1,d=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",o,a,_camera,0,0,-1),setPoint("t",o,a,_camera,0,0,1),setPoint("n1",o,a,_camera,-c,-d,-1),setPoint("n2",o,a,_camera,c,-d,-1),setPoint("n3",o,a,_camera,-c,d,-1),setPoint("n4",o,a,_camera,c,d,-1),setPoint("f1",o,a,_camera,-c,-d,1),setPoint("f2",o,a,_camera,c,-d,1),setPoint("f3",o,a,_camera,-c,d,1),setPoint("f4",o,a,_camera,c,d,1),setPoint("u1",o,a,_camera,c*.7,d*1.1,-1),setPoint("u2",o,a,_camera,-c*.7,d*1.1,-1),setPoint("u3",o,a,_camera,0,d*2,-1),setPoint("cf1",o,a,_camera,-c,0,1),setPoint("cf2",o,a,_camera,c,0,1),setPoint("cf3",o,a,_camera,0,-d,1),setPoint("cf4",o,a,_camera,0,d,1),setPoint("cn1",o,a,_camera,-c,0,-1),setPoint("cn2",o,a,_camera,c,0,-1),setPoint("cn3",o,a,_camera,0,-d,-1),setPoint("cn4",o,a,_camera,0,d,-1),a.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(s,a,o,c,d,b,$){_vector.set(d,b,$).unproject(c);const j=a[s];if(j!==void 0){const _e=o.getAttribute("position");for(let et=0,tt=j.length;et<tt;et++)_e.setXYZ(j[et],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(a,o=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(8*3),b=new BufferGeometry;b.setIndex(new BufferAttribute(c,1)),b.setAttribute("position",new BufferAttribute(d,3)),super(b,new LineBasicMaterial({color:o,toneMapped:!1})),this.object=a,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(a){if(a!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const o=_box.min,c=_box.max,d=this.geometry.attributes.position,b=d.array;b[0]=c.x,b[1]=c.y,b[2]=c.z,b[3]=o.x,b[4]=c.y,b[5]=c.z,b[6]=o.x,b[7]=o.y,b[8]=c.z,b[9]=c.x,b[10]=o.y,b[11]=c.z,b[12]=c.x,b[13]=c.y,b[14]=o.z,b[15]=o.x,b[16]=c.y,b[17]=o.z,b[18]=o.x,b[19]=o.y,b[20]=o.z,b[21]=c.x,b[22]=o.y,b[23]=o.z,d.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(a){return this.object=a,this.update(),this}copy(a,o){return super.copy(a,o),this.object=a.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(a,o=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],b=new BufferGeometry;b.setIndex(new BufferAttribute(c,1)),b.setAttribute("position",new Float32BufferAttribute(d,3)),super(b,new LineBasicMaterial({color:o,toneMapped:!1})),this.box=a,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(a,o=1,c=16776960){const d=c,b=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],$=new BufferGeometry;$.setAttribute("position",new Float32BufferAttribute(b,3)),$.computeBoundingSphere(),super($,new LineBasicMaterial({color:d,toneMapped:!1})),this.type="PlaneHelper",this.plane=a,this.size=o;const j=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],_e=new BufferGeometry;_e.setAttribute("position",new Float32BufferAttribute(j,3)),_e.computeBoundingSphere(),this.add(new Mesh(_e,new MeshBasicMaterial({color:d,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(a)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(a=new Vector3(0,0,1),o=new Vector3(0,0,0),c=1,d=16776960,b=c*.2,$=b*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(o),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:d,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:d,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(c,b,$)}setDirection(a){if(a.y>.99999)this.quaternion.set(0,0,0,1);else if(a.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(a.z,0,-a.x).normalize();const o=Math.acos(a.y);this.quaternion.setFromAxisAngle(_axis,o)}}setLength(a,o=a*.2,c=o*.2){this.line.scale.set(1,Math.max(1e-4,a-o),1),this.line.updateMatrix(),this.cone.scale.set(c,o,c),this.cone.position.y=a,this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a),this.cone.material.color.set(a)}copy(a){return super.copy(a,!1),this.line.copy(a.line),this.cone.copy(a.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(a=1){const o=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],c=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],d=new BufferGeometry;d.setAttribute("position",new Float32BufferAttribute(o,3)),d.setAttribute("color",new Float32BufferAttribute(c,3));const b=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(d,b),this.type="AxesHelper"}setColors(a,o,c){const d=new Color,b=this.geometry.attributes.color.array;return d.set(a),d.toArray(b,0),d.toArray(b,3),d.set(o),d.toArray(b,6),d.toArray(b,9),d.set(c),d.toArray(b,12),d.toArray(b,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(a,o){return this.currentPath=new Path$1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,o),this}lineTo(a,o){return this.currentPath.lineTo(a,o),this}quadraticCurveTo(a,o,c,d){return this.currentPath.quadraticCurveTo(a,o,c,d),this}bezierCurveTo(a,o,c,d,b,$){return this.currentPath.bezierCurveTo(a,o,c,d,b,$),this}splineThru(a){return this.currentPath.splineThru(a),this}toShapes(a){function o(ot){const ht=[];for(let dt=0,ft=ot.length;dt<ft;dt++){const mt=ot[dt],gt=new Shape;gt.curves=mt.curves,ht.push(gt)}return ht}function c(ot,ht){const dt=ht.length;let ft=!1;for(let mt=dt-1,gt=0;gt<dt;mt=gt++){let vt=ht[mt],yt=ht[gt],Et=yt.x-vt.x,St=yt.y-vt.y;if(Math.abs(St)>Number.EPSILON){if(St<0&&(vt=ht[gt],Et=-Et,yt=ht[mt],St=-St),ot.y<vt.y||ot.y>yt.y)continue;if(ot.y===vt.y){if(ot.x===vt.x)return!0}else{const Ct=St*(ot.x-vt.x)-Et*(ot.y-vt.y);if(Ct===0)return!0;if(Ct<0)continue;ft=!ft}}else{if(ot.y!==vt.y)continue;if(yt.x<=ot.x&&ot.x<=vt.x||vt.x<=ot.x&&ot.x<=yt.x)return!0}}return ft}const d=ShapeUtils.isClockWise,b=this.subPaths;if(b.length===0)return[];let $,j,_e;const et=[];if(b.length===1)return j=b[0],_e=new Shape,_e.curves=j.curves,et.push(_e),et;let tt=!d(b[0].getPoints());tt=a?!tt:tt;const rt=[],nt=[];let it=[],at=0,ct;nt[at]=void 0,it[at]=[];for(let ot=0,ht=b.length;ot<ht;ot++)j=b[ot],ct=j.getPoints(),$=d(ct),$=a?!$:$,$?(!tt&&nt[at]&&at++,nt[at]={s:new Shape,p:ct},nt[at].s.curves=j.curves,tt&&at++,it[at]=[]):it[at].push({h:j,p:ct[0]});if(!nt[0])return o(b);if(nt.length>1){let ot=!1,ht=0;for(let dt=0,ft=nt.length;dt<ft;dt++)rt[dt]=[];for(let dt=0,ft=nt.length;dt<ft;dt++){const mt=it[dt];for(let gt=0;gt<mt.length;gt++){const vt=mt[gt];let yt=!0;for(let Et=0;Et<nt.length;Et++)c(vt.p,nt[Et].p)&&(dt!==Et&&ht++,yt?(yt=!1,rt[Et].push(vt)):ot=!0);yt&&rt[dt].push(vt)}}ht>0&&ot===!1&&(it=rt)}let st;for(let ot=0,ht=nt.length;ot<ht;ot++){_e=nt[ot].s,et.push(_e),st=it[ot];for(let dt=0,ft=st.length;dt<ft;dt++)_e.holes.push(st[dt].h)}return et}}class BoxBufferGeometry extends BoxGeometry{constructor(a,o,c,d,b,$){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(a,o,c,d,b,$)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(a,o,c,d){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(a,o,c,d)}}class CircleBufferGeometry extends CircleGeometry{constructor(a,o,c,d){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(a,o,c,d)}}class ConeBufferGeometry extends ConeGeometry{constructor(a,o,c,d,b,$,j){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(a,o,c,d,b,$,j)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(a,o,c,d,b,$,j,_e){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(a,o,c,d,b,$,j,_e)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(a,o){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(a,o)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(a,o){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(a,o)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(a,o){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(a,o)}}class LatheBufferGeometry extends LatheGeometry{constructor(a,o,c,d){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(a,o,c,d)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(a,o){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(a,o)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(a,o,c,d){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(a,o,c,d)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(a,o,c,d){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(a,o,c,d)}}class RingBufferGeometry extends RingGeometry{constructor(a,o,c,d,b,$){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(a,o,c,d,b,$)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(a,o){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(a,o)}}class SphereBufferGeometry extends SphereGeometry{constructor(a,o,c,d,b,$,j){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(a,o,c,d,b,$,j)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(a,o){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(a,o)}}class TorusBufferGeometry extends TorusGeometry{constructor(a,o,c,d,b){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(a,o,c,d,b)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(a,o,c,d,b,$){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(a,o,c,d,b,$)}}class TubeBufferGeometry extends TubeGeometry{constructor(a,o,c,d,b){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(a,o,c,d,b)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache:Cache$1,Camera,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping:ClampToEdgeWrapping$1,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture:CompressedArrayTexture$1,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture:Data3DTexture$1,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager:DefaultLoadingManager$1,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader:ImageLoader$1,ImageUtils:ImageUtils$1,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding:LinearEncoding$1,LinearFilter:LinearFilter$1,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter:LinearMipmapLinearFilter$1,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader:Loader$2,LoaderUtils,LoadingManager:LoadingManager$1,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3:Matrix3$1,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping:MirroredRepeatWrapping$1,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace:NoColorSpace$1,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path:Path$1,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat:RGBAFormat$1,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping:RepeatWrapping$1,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace:SRGBColorSpace$1,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source:Source$1,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture:Texture$1,TextureLoader:TextureLoader$1,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping:UVMapping$1,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType:UnsignedByteType$1,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2:Vector2$1,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding:sRGBEncoding$1},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$2(s){let a;const o=new Set,c=(et,tt)=>{const rt=typeof et=="function"?et(a):et;if(rt!==a){const nt=a;a=tt?rt:Object.assign({},a,rt),o.forEach(it=>it(a,nt))}},d=()=>a,b=(et,tt=d,rt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let nt=tt(a);function it(){const at=tt(a);if(!rt(nt,at)){const ct=nt;et(nt=at,ct)}}return o.add(it),()=>o.delete(it)},_e={setState:c,getState:d,subscribe:(et,tt,rt)=>tt||rt?b(et,tt,rt):(o.add(et),()=>o.delete(et)),destroy:()=>o.clear()};return a=s(c,d,_e),_e}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$2=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(s){const a=typeof s=="function"?createStore$2(s):s,o=(c=a.getState,d=Object.is)=>{const[,b]=reactExports.useReducer(st=>st+1,0),$=a.getState(),j=reactExports.useRef($),_e=reactExports.useRef(c),et=reactExports.useRef(d),tt=reactExports.useRef(!1),rt=reactExports.useRef();rt.current===void 0&&(rt.current=c($));let nt,it=!1;(j.current!==$||_e.current!==c||et.current!==d||tt.current)&&(nt=c($),it=!d(rt.current,nt)),useIsomorphicLayoutEffect$2(()=>{it&&(rt.current=nt),j.current=$,_e.current=c,et.current=d,tt.current=!1});const at=reactExports.useRef($);useIsomorphicLayoutEffect$2(()=>{const st=()=>{try{const ht=a.getState(),dt=_e.current(ht);et.current(rt.current,dt)||(j.current=ht,rt.current=dt,b())}catch{tt.current=!0,b()}},ot=a.subscribe(st);return a.getState()!==at.current&&st(),ot},[]);const ct=it?nt:rt.current;return reactExports.useDebugValue(ct),ct};return Object.assign(o,a),o[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const c=[o,a];return{next(){const d=c.length<=0;return{value:c.shift(),done:d}}}},o}var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function a(bt,Pt){var Dt=bt.length;bt.push(Pt);e:for(;0<Dt;){var $t=Dt-1>>>1,Lt=bt[$t];if(0<d(Lt,Pt))bt[$t]=Pt,bt[Dt]=Lt,Dt=$t;else break e}}function o(bt){return bt.length===0?null:bt[0]}function c(bt){if(bt.length===0)return null;var Pt=bt[0],Dt=bt.pop();if(Dt!==Pt){bt[0]=Dt;e:for(var $t=0,Lt=bt.length,Jt=Lt>>>1;$t<Jt;){var Qt=2*($t+1)-1,or=bt[Qt],er=Qt+1,sr=bt[er];if(0>d(or,Dt))er<Lt&&0>d(sr,or)?(bt[$t]=sr,bt[er]=Dt,$t=er):(bt[$t]=or,bt[Qt]=Dt,$t=Qt);else if(er<Lt&&0>d(sr,Dt))bt[$t]=sr,bt[er]=Dt,$t=er;else break e}}return Pt}function d(bt,Pt){var Dt=bt.sortIndex-Pt.sortIndex;return Dt!==0?Dt:bt.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;s.unstable_now=function(){return b.now()}}else{var $=Date,j=$.now();s.unstable_now=function(){return $.now()-j}}var _e=[],et=[],tt=1,rt=null,nt=3,it=!1,at=!1,ct=!1,st=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dt(bt){for(var Pt=o(et);Pt!==null;){if(Pt.callback===null)c(et);else if(Pt.startTime<=bt)c(et),Pt.sortIndex=Pt.expirationTime,a(_e,Pt);else break;Pt=o(et)}}function ft(bt){if(ct=!1,dt(bt),!at)if(o(_e)!==null)at=!0,Bt(mt);else{var Pt=o(et);Pt!==null&&Rt(ft,Pt.startTime-bt)}}function mt(bt,Pt){at=!1,ct&&(ct=!1,ot(yt),yt=-1),it=!0;var Dt=nt;try{for(dt(Pt),rt=o(_e);rt!==null&&(!(rt.expirationTime>Pt)||bt&&!Ct());){var $t=rt.callback;if(typeof $t=="function"){rt.callback=null,nt=rt.priorityLevel;var Lt=$t(rt.expirationTime<=Pt);Pt=s.unstable_now(),typeof Lt=="function"?rt.callback=Lt:rt===o(_e)&&c(_e),dt(Pt)}else c(_e);rt=o(_e)}if(rt!==null)var Jt=!0;else{var Qt=o(et);Qt!==null&&Rt(ft,Qt.startTime-Pt),Jt=!1}return Jt}finally{rt=null,nt=Dt,it=!1}}var gt=!1,vt=null,yt=-1,Et=5,St=-1;function Ct(){return!(s.unstable_now()-St<Et)}function wt(){if(vt!==null){var bt=s.unstable_now();St=bt;var Pt=!0;try{Pt=vt(!0,bt)}finally{Pt?_t():(gt=!1,vt=null)}}else gt=!1}var _t;if(typeof ht=="function")_t=function(){ht(wt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,Mt=Tt.port2;Tt.port1.onmessage=wt,_t=function(){Mt.postMessage(null)}}else _t=function(){st(wt,0)};function Bt(bt){vt=bt,gt||(gt=!0,_t())}function Rt(bt,Pt){yt=st(function(){bt(s.unstable_now())},Pt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(bt){bt.callback=null},s.unstable_continueExecution=function(){at||it||(at=!0,Bt(mt))},s.unstable_forceFrameRate=function(bt){0>bt||125<bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Et=0<bt?Math.floor(1e3/bt):5},s.unstable_getCurrentPriorityLevel=function(){return nt},s.unstable_getFirstCallbackNode=function(){return o(_e)},s.unstable_next=function(bt){switch(nt){case 1:case 2:case 3:var Pt=3;break;default:Pt=nt}var Dt=nt;nt=Pt;try{return bt()}finally{nt=Dt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(bt,Pt){switch(bt){case 1:case 2:case 3:case 4:case 5:break;default:bt=3}var Dt=nt;nt=bt;try{return Pt()}finally{nt=Dt}},s.unstable_scheduleCallback=function(bt,Pt,Dt){var $t=s.unstable_now();switch(typeof Dt=="object"&&Dt!==null?(Dt=Dt.delay,Dt=typeof Dt=="number"&&0<Dt?$t+Dt:$t):Dt=$t,bt){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=Dt+Lt,bt={id:tt++,callback:Pt,priorityLevel:bt,startTime:Dt,expirationTime:Lt,sortIndex:-1},Dt>$t?(bt.sortIndex=Dt,a(et,bt),o(_e)===null&&bt===o(et)&&(ct?(ot(yt),yt=-1):ct=!0,Rt(ft,Dt-$t))):(bt.sortIndex=Lt,a(_e,bt),at||it||(at=!0,Bt(mt))),bt},s.unstable_shouldYield=Ct,s.unstable_wrapCallback=function(bt){var Pt=nt;return function(){var Dt=nt;nt=Pt;try{return bt.apply(this,arguments)}finally{nt=Dt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(a){var o={},c=reactExports,d=schedulerExports,b=Object.assign;function $(lt){for(var ut="https://reactjs.org/docs/error-decoder.html?invariant="+lt,pt=1;pt<arguments.length;pt++)ut+="&args[]="+encodeURIComponent(arguments[pt]);return"Minified React error #"+lt+"; visit "+ut+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),et=Symbol.for("react.portal"),tt=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),at=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),ft=Symbol.for("react.offscreen"),mt=Symbol.iterator;function gt(lt){return lt===null||typeof lt!="object"?null:(lt=mt&&lt[mt]||lt["@@iterator"],typeof lt=="function"?lt:null)}function vt(lt){if(lt==null)return null;if(typeof lt=="function")return lt.displayName||lt.name||null;if(typeof lt=="string")return lt;switch(lt){case tt:return"Fragment";case et:return"Portal";case nt:return"Profiler";case rt:return"StrictMode";case st:return"Suspense";case ot:return"SuspenseList"}if(typeof lt=="object")switch(lt.$$typeof){case at:return(lt.displayName||"Context")+".Consumer";case it:return(lt._context.displayName||"Context")+".Provider";case ct:var ut=lt.render;return lt=lt.displayName,lt||(lt=ut.displayName||ut.name||"",lt=lt!==""?"ForwardRef("+lt+")":"ForwardRef"),lt;case ht:return ut=lt.displayName||null,ut!==null?ut:vt(lt.type)||"Memo";case dt:ut=lt._payload,lt=lt._init;try{return vt(lt(ut))}catch{}}return null}function yt(lt){var ut=lt.type;switch(lt.tag){case 24:return"Cache";case 9:return(ut.displayName||"Context")+".Consumer";case 10:return(ut._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return lt=ut.render,lt=lt.displayName||lt.name||"",ut.displayName||(lt!==""?"ForwardRef("+lt+")":"ForwardRef");case 7:return"Fragment";case 5:return ut;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vt(ut);case 8:return ut===rt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof ut=="function")return ut.displayName||ut.name||null;if(typeof ut=="string")return ut}return null}function Et(lt){var ut=lt,pt=lt;if(lt.alternate)for(;ut.return;)ut=ut.return;else{lt=ut;do ut=lt,ut.flags&4098&&(pt=ut.return),lt=ut.return;while(lt)}return ut.tag===3?pt:null}function St(lt){if(Et(lt)!==lt)throw Error($(188))}function Ct(lt){var ut=lt.alternate;if(!ut){if(ut=Et(lt),ut===null)throw Error($(188));return ut!==lt?null:lt}for(var pt=lt,At=ut;;){var xt=pt.return;if(xt===null)break;var It=xt.alternate;if(It===null){if(At=xt.return,At!==null){pt=At;continue}break}if(xt.child===It.child){for(It=xt.child;It;){if(It===pt)return St(xt),lt;if(It===At)return St(xt),ut;It=It.sibling}throw Error($(188))}if(pt.return!==At.return)pt=xt,At=It;else{for(var Ut=!1,jt=xt.child;jt;){if(jt===pt){Ut=!0,pt=xt,At=It;break}if(jt===At){Ut=!0,At=xt,pt=It;break}jt=jt.sibling}if(!Ut){for(jt=It.child;jt;){if(jt===pt){Ut=!0,pt=It,At=xt;break}if(jt===At){Ut=!0,At=It,pt=xt;break}jt=jt.sibling}if(!Ut)throw Error($(189))}}if(pt.alternate!==At)throw Error($(190))}if(pt.tag!==3)throw Error($(188));return pt.stateNode.current===pt?lt:ut}function wt(lt){return lt=Ct(lt),lt!==null?_t(lt):null}function _t(lt){if(lt.tag===5||lt.tag===6)return lt;for(lt=lt.child;lt!==null;){var ut=_t(lt);if(ut!==null)return ut;lt=lt.sibling}return null}function Tt(lt){if(lt.tag===5||lt.tag===6)return lt;for(lt=lt.child;lt!==null;){if(lt.tag!==4){var ut=Tt(lt);if(ut!==null)return ut}lt=lt.sibling}return null}var Mt=Array.isArray,Bt=a.getPublicInstance,Rt=a.getRootHostContext,bt=a.getChildHostContext,Pt=a.prepareForCommit,Dt=a.resetAfterCommit,$t=a.createInstance,Lt=a.appendInitialChild,Jt=a.finalizeInitialChildren,Qt=a.prepareUpdate,or=a.shouldSetTextContent,er=a.createTextInstance,sr=a.scheduleTimeout,Ar=a.cancelTimeout,Er=a.noTimeout,Tr=a.isPrimaryRenderer,ur=a.supportsMutation,kt=a.supportsPersistence,Xt=a.supportsHydration,ar=a.getInstanceFromNode,yr=a.preparePortalMount,mr=a.getCurrentEventPriority,Br=a.detachDeletedInstance,_r=a.supportsMicrotasks,br=a.scheduleMicrotask,Pr=a.supportsTestSelectors,Or=a.findFiberRoot,Wr=a.getBoundingRect,Ot=a.getTextContent,Ft=a.isHiddenSubtree,ir=a.matchAccessibilityRole,Sr=a.setFocusIfFocusable,xr=a.setupIntersectionObserver,Ir=a.appendChild,Fr=a.appendChildToContainer,Mr=a.commitTextUpdate,cr=a.commitMount,zt=a.commitUpdate,hr=a.insertBefore,Vt=a.insertInContainerBefore,Ht=a.removeChild,Kt=a.removeChildFromContainer,vr=a.resetTextContent,wr=a.hideInstance,Gt=a.hideTextInstance,pr=a.unhideInstance,Wt=a.unhideTextInstance,nr=a.clearContainer,Cr=a.cloneInstance,Vr=a.createContainerChildSet,Ur=a.appendChildToContainerChildSet,Qr=a.finalizeContainerChildren,sn=a.replaceContainerChildren,an=a.cloneHiddenInstance,xn=a.cloneHiddenTextInstance,An=a.canHydrateInstance,Cs=a.canHydrateTextInstance,Vn=a.canHydrateSuspenseInstance,Hn=a.isSuspenseInstancePending,Kn=a.isSuspenseInstanceFallback,_s=a.registerSuspenseInstanceRetry,zn=a.getNextHydratableSibling,bs=a.getFirstHydratableChild,on=a.getFirstHydratableChildWithinContainer,Un=a.getFirstHydratableChildWithinSuspenseInstance,ga=a.hydrateInstance,Nt=a.hydrateTextInstance,Yt=a.hydrateSuspenseInstance,dr=a.getNextHydratableInstanceAfterSuspenseInstance,Zt=a.commitHydratedContainer,gr=a.commitHydratedSuspenseInstance,Nr=a.clearSuspenseBoundary,Hr=a.clearSuspenseBoundaryFromContainer,jr=a.shouldDeleteUnhydratedTailInstances,Kr=a.didNotMatchHydratedContainerTextInstance,rn=a.didNotMatchHydratedTextInstance,qr;function Xr(lt){if(qr===void 0)try{throw Error()}catch(pt){var ut=pt.stack.trim().match(/\n( *(at )?)/);qr=ut&&ut[1]||""}return`
`+qr+lt}var hn=!1;function mn(lt,ut){if(!lt||hn)return"";hn=!0;var pt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ut)if(ut=function(){throw Error()},Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Rr){var At=Rr}Reflect.construct(lt,[],ut)}else{try{ut.call()}catch(Rr){At=Rr}lt.call(ut.prototype)}else{try{throw Error()}catch(Rr){At=Rr}lt()}}catch(Rr){if(Rr&&At&&typeof Rr.stack=="string"){for(var xt=Rr.stack.split(`
`),It=At.stack.split(`
`),Ut=xt.length-1,jt=It.length-1;1<=Ut&&0<=jt&&xt[Ut]!==It[jt];)jt--;for(;1<=Ut&&0<=jt;Ut--,jt--)if(xt[Ut]!==It[jt]){if(Ut!==1||jt!==1)do if(Ut--,jt--,0>jt||xt[Ut]!==It[jt]){var fr=`
`+xt[Ut].replace(" at new "," at ");return lt.displayName&&fr.includes("<anonymous>")&&(fr=fr.replace("<anonymous>",lt.displayName)),fr}while(1<=Ut&&0<=jt);break}}}finally{hn=!1,Error.prepareStackTrace=pt}return(lt=lt?lt.displayName||lt.name:"")?Xr(lt):""}var qn=Object.prototype.hasOwnProperty,Xn=[],fn=-1;function Jr(lt){return{current:lt}}function dn(lt){0>fn||(lt.current=Xn[fn],Xn[fn]=null,fn--)}function Yr(lt,ut){fn++,Xn[fn]=lt.current,lt.current=ut}var Fn={},In=Jr(Fn),_n=Jr(!1),ss=Fn;function yn(lt,ut){var pt=lt.type.contextTypes;if(!pt)return Fn;var At=lt.stateNode;if(At&&At.__reactInternalMemoizedUnmaskedChildContext===ut)return At.__reactInternalMemoizedMaskedChildContext;var xt={},It;for(It in pt)xt[It]=ut[It];return At&&(lt=lt.stateNode,lt.__reactInternalMemoizedUnmaskedChildContext=ut,lt.__reactInternalMemoizedMaskedChildContext=xt),xt}function En(lt){return lt=lt.childContextTypes,lt!=null}function Ts(){dn(_n),dn(In)}function Dn(lt,ut,pt){if(In.current!==Fn)throw Error($(168));Yr(In,ut),Yr(_n,pt)}function zs(lt,ut,pt){var At=lt.stateNode;if(ut=ut.childContextTypes,typeof At.getChildContext!="function")return pt;At=At.getChildContext();for(var xt in At)if(!(xt in ut))throw Error($(108,yt(lt)||"Unknown",xt));return b({},pt,At)}function Qs(lt){return lt=(lt=lt.stateNode)&&lt.__reactInternalMemoizedMergedChildContext||Fn,ss=In.current,Yr(In,lt),Yr(_n,_n.current),!0}function io(lt,ut,pt){var At=lt.stateNode;if(!At)throw Error($(169));pt?(lt=zs(lt,ut,ss),At.__reactInternalMemoizedMergedChildContext=lt,dn(_n),dn(In),Yr(In,lt)):dn(_n),Yr(_n,pt)}var os=Math.clz32?Math.clz32:xm,Em=Math.log,Sm=Math.LN2;function xm(lt){return lt>>>=0,lt===0?32:31-(Em(lt)/Sm|0)|0}var bo=64,To=4194304;function ao(lt){switch(lt&-lt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return lt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return lt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return lt}}function Io(lt,ut){var pt=lt.pendingLanes;if(pt===0)return 0;var At=0,xt=lt.suspendedLanes,It=lt.pingedLanes,Ut=pt&268435455;if(Ut!==0){var jt=Ut&~xt;jt!==0?At=ao(jt):(It&=Ut,It!==0&&(At=ao(It)))}else Ut=pt&~xt,Ut!==0?At=ao(Ut):It!==0&&(At=ao(It));if(At===0)return 0;if(ut!==0&&ut!==At&&!(ut&xt)&&(xt=At&-At,It=ut&-ut,xt>=It||xt===16&&(It&4194240)!==0))return ut;if(At&4&&(At|=pt&16),ut=lt.entangledLanes,ut!==0)for(lt=lt.entanglements,ut&=At;0<ut;)pt=31-os(ut),xt=1<<pt,At|=lt[pt],ut&=~xt;return At}function Cm(lt,ut){switch(lt){case 1:case 2:case 4:return ut+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ut+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _m(lt,ut){for(var pt=lt.suspendedLanes,At=lt.pingedLanes,xt=lt.expirationTimes,It=lt.pendingLanes;0<It;){var Ut=31-os(It),jt=1<<Ut,fr=xt[Ut];fr===-1?(!(jt&pt)||jt&At)&&(xt[Ut]=Cm(jt,ut)):fr<=ut&&(lt.expiredLanes|=jt),It&=~jt}}function Ul(lt){return lt=lt.pendingLanes&-1073741825,lt!==0?lt:lt&1073741824?1073741824:0}function $l(lt){for(var ut=[],pt=0;31>pt;pt++)ut.push(lt);return ut}function so(lt,ut,pt){lt.pendingLanes|=ut,ut!==536870912&&(lt.suspendedLanes=0,lt.pingedLanes=0),lt=lt.eventTimes,ut=31-os(ut),lt[ut]=pt}function bm(lt,ut){var pt=lt.pendingLanes&~ut;lt.pendingLanes=ut,lt.suspendedLanes=0,lt.pingedLanes=0,lt.expiredLanes&=ut,lt.mutableReadLanes&=ut,lt.entangledLanes&=ut,ut=lt.entanglements;var At=lt.eventTimes;for(lt=lt.expirationTimes;0<pt;){var xt=31-os(pt),It=1<<xt;ut[xt]=0,At[xt]=-1,lt[xt]=-1,pt&=~It}}function Gl(lt,ut){var pt=lt.entangledLanes|=ut;for(lt=lt.entanglements;pt;){var At=31-os(pt),xt=1<<At;xt&ut|lt[At]&ut&&(lt[At]|=ut),pt&=~xt}}var ln=0;function zu(lt){return lt&=-lt,1<lt?4<lt?lt&268435455?16:536870912:4:1}var Vl=d.unstable_scheduleCallback,Qu=d.unstable_cancelCallback,Tm=d.unstable_shouldYield,Im=d.unstable_requestPaint,wn=d.unstable_now,Hl=d.unstable_ImmediatePriority,Mm=d.unstable_UserBlockingPriority,zl=d.unstable_NormalPriority,wm=d.unstable_IdlePriority,Mo=null,us=null;function Rm(lt){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(Mo,lt,void 0,(lt.current.flags&128)===128)}catch{}}function Pm(lt,ut){return lt===ut&&(lt!==0||1/lt===1/ut)||lt!==lt&&ut!==ut}var hs=typeof Object.is=="function"?Object.is:Pm,As=null,wo=!1,Ql=!1;function Wu(lt){As===null?As=[lt]:As.push(lt)}function Bm(lt){wo=!0,Wu(lt)}function ds(){if(!Ql&&As!==null){Ql=!0;var lt=0,ut=ln;try{var pt=As;for(ln=1;lt<pt.length;lt++){var At=pt[lt];do At=At(!0);while(At!==null)}As=null,wo=!1}catch(xt){throw As!==null&&(As=As.slice(lt+1)),Vl(Hl,ds),xt}finally{ln=ut,Ql=!1}}return null}var Fm=j.ReactCurrentBatchConfig;function Ro(lt,ut){if(hs(lt,ut))return!0;if(typeof lt!="object"||lt===null||typeof ut!="object"||ut===null)return!1;var pt=Object.keys(lt),At=Object.keys(ut);if(pt.length!==At.length)return!1;for(At=0;At<pt.length;At++){var xt=pt[At];if(!qn.call(ut,xt)||!hs(lt[xt],ut[xt]))return!1}return!0}function Dm(lt){switch(lt.tag){case 5:return Xr(lt.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return lt=mn(lt.type,!1),lt;case 11:return lt=mn(lt.type.render,!1),lt;case 1:return lt=mn(lt.type,!0),lt;default:return""}}function ls(lt,ut){if(lt&&lt.defaultProps){ut=b({},ut),lt=lt.defaultProps;for(var pt in lt)ut[pt]===void 0&&(ut[pt]=lt[pt]);return ut}return ut}var Po=Jr(null),Bo=null,Ws=null,Wl=null;function Kl(){Wl=Ws=Bo=null}function ju(lt,ut,pt){Tr?(Yr(Po,ut._currentValue),ut._currentValue=pt):(Yr(Po,ut._currentValue2),ut._currentValue2=pt)}function Xl(lt){var ut=Po.current;dn(Po),Tr?lt._currentValue=ut:lt._currentValue2=ut}function Yl(lt,ut,pt){for(;lt!==null;){var At=lt.alternate;if((lt.childLanes&ut)!==ut?(lt.childLanes|=ut,At!==null&&(At.childLanes|=ut)):At!==null&&(At.childLanes&ut)!==ut&&(At.childLanes|=ut),lt===pt)break;lt=lt.return}}function js(lt,ut){Bo=lt,Wl=Ws=null,lt=lt.dependencies,lt!==null&&lt.firstContext!==null&&(lt.lanes&ut&&(Zn=!0),lt.firstContext=null)}function xa(lt){var ut=Tr?lt._currentValue:lt._currentValue2;if(Wl!==lt)if(lt={context:lt,memoizedValue:ut,next:null},Ws===null){if(Bo===null)throw Error($(308));Ws=lt,Bo.dependencies={lanes:0,firstContext:lt}}else Ws=Ws.next=lt;return ut}var fs=null,Is=!1;function Jl(lt){lt.updateQueue={baseState:lt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ku(lt,ut){lt=lt.updateQueue,ut.updateQueue===lt&&(ut.updateQueue={baseState:lt.baseState,firstBaseUpdate:lt.firstBaseUpdate,lastBaseUpdate:lt.lastBaseUpdate,shared:lt.shared,effects:lt.effects})}function vs(lt,ut){return{eventTime:lt,lane:ut,tag:0,payload:null,callback:null,next:null}}function Ms(lt,ut){var pt=lt.updateQueue;pt!==null&&(pt=pt.shared,bn!==null&&lt.mode&1&&!(nn&2)?(lt=pt.interleaved,lt===null?(ut.next=ut,fs===null?fs=[pt]:fs.push(pt)):(ut.next=lt.next,lt.next=ut),pt.interleaved=ut):(lt=pt.pending,lt===null?ut.next=ut:(ut.next=lt.next,lt.next=ut),pt.pending=ut))}function Fo(lt,ut,pt){if(ut=ut.updateQueue,ut!==null&&(ut=ut.shared,(pt&4194240)!==0)){var At=ut.lanes;At&=lt.pendingLanes,pt|=At,ut.lanes=pt,Gl(lt,pt)}}function qu(lt,ut){var pt=lt.updateQueue,At=lt.alternate;if(At!==null&&(At=At.updateQueue,pt===At)){var xt=null,It=null;if(pt=pt.firstBaseUpdate,pt!==null){do{var Ut={eventTime:pt.eventTime,lane:pt.lane,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null};It===null?xt=It=Ut:It=It.next=Ut,pt=pt.next}while(pt!==null);It===null?xt=It=ut:It=It.next=ut}else xt=It=ut;pt={baseState:At.baseState,firstBaseUpdate:xt,lastBaseUpdate:It,shared:At.shared,effects:At.effects},lt.updateQueue=pt;return}lt=pt.lastBaseUpdate,lt===null?pt.firstBaseUpdate=ut:lt.next=ut,pt.lastBaseUpdate=ut}function Do(lt,ut,pt,At){var xt=lt.updateQueue;Is=!1;var It=xt.firstBaseUpdate,Ut=xt.lastBaseUpdate,jt=xt.shared.pending;if(jt!==null){xt.shared.pending=null;var fr=jt,Rr=fr.next;fr.next=null,Ut===null?It=Rr:Ut.next=Rr,Ut=fr;var kr=lt.alternate;kr!==null&&(kr=kr.updateQueue,jt=kr.lastBaseUpdate,jt!==Ut&&(jt===null?kr.firstBaseUpdate=Rr:jt.next=Rr,kr.lastBaseUpdate=fr))}if(It!==null){var Zr=xt.baseState;Ut=0,kr=Rr=fr=null,jt=It;do{var zr=jt.lane,pn=jt.eventTime;if((At&zr)===zr){kr!==null&&(kr=kr.next={eventTime:pn,lane:0,tag:jt.tag,payload:jt.payload,callback:jt.callback,next:null});e:{var Gr=lt,On=jt;switch(zr=ut,pn=pt,On.tag){case 1:if(Gr=On.payload,typeof Gr=="function"){Zr=Gr.call(pn,Zr,zr);break e}Zr=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=On.payload,zr=typeof Gr=="function"?Gr.call(pn,Zr,zr):Gr,zr==null)break e;Zr=b({},Zr,zr);break e;case 2:Is=!0}}jt.callback!==null&&jt.lane!==0&&(lt.flags|=64,zr=xt.effects,zr===null?xt.effects=[jt]:zr.push(jt))}else pn={eventTime:pn,lane:zr,tag:jt.tag,payload:jt.payload,callback:jt.callback,next:null},kr===null?(Rr=kr=pn,fr=Zr):kr=kr.next=pn,Ut|=zr;if(jt=jt.next,jt===null){if(jt=xt.shared.pending,jt===null)break;zr=jt,jt=zr.next,zr.next=null,xt.lastBaseUpdate=zr,xt.shared.pending=null}}while(1);if(kr===null&&(fr=Zr),xt.baseState=fr,xt.firstBaseUpdate=Rr,xt.lastBaseUpdate=kr,ut=xt.shared.interleaved,ut!==null){xt=ut;do Ut|=xt.lane,xt=xt.next;while(xt!==ut)}else It===null&&(xt.shared.lanes=0);ro|=Ut,lt.lanes=Ut,lt.memoizedState=Zr}}function Xu(lt,ut,pt){if(lt=ut.effects,ut.effects=null,lt!==null)for(ut=0;ut<lt.length;ut++){var At=lt[ut],xt=At.callback;if(xt!==null){if(At.callback=null,At=pt,typeof xt!="function")throw Error($(191,xt));xt.call(At)}}}var Yu=new c.Component().refs;function Zl(lt,ut,pt,At){ut=lt.memoizedState,pt=pt(At,ut),pt=pt==null?ut:b({},ut,pt),lt.memoizedState=pt,lt.lanes===0&&(lt.updateQueue.baseState=pt)}var Lo={isMounted:function(lt){return(lt=lt._reactInternals)?Et(lt)===lt:!1},enqueueSetState:function(lt,ut,pt){lt=lt._reactInternals;var At=Gn(),xt=Ps(lt),It=vs(At,xt);It.payload=ut,pt!=null&&(It.callback=pt),Ms(lt,It),ut=rs(lt,xt,At),ut!==null&&Fo(ut,lt,xt)},enqueueReplaceState:function(lt,ut,pt){lt=lt._reactInternals;var At=Gn(),xt=Ps(lt),It=vs(At,xt);It.tag=1,It.payload=ut,pt!=null&&(It.callback=pt),Ms(lt,It),ut=rs(lt,xt,At),ut!==null&&Fo(ut,lt,xt)},enqueueForceUpdate:function(lt,ut){lt=lt._reactInternals;var pt=Gn(),At=Ps(lt),xt=vs(pt,At);xt.tag=2,ut!=null&&(xt.callback=ut),Ms(lt,xt),ut=rs(lt,At,pt),ut!==null&&Fo(ut,lt,At)}};function Ju(lt,ut,pt,At,xt,It,Ut){return lt=lt.stateNode,typeof lt.shouldComponentUpdate=="function"?lt.shouldComponentUpdate(At,It,Ut):ut.prototype&&ut.prototype.isPureReactComponent?!Ro(pt,At)||!Ro(xt,It):!0}function Zu(lt,ut,pt){var At=!1,xt=Fn,It=ut.contextType;return typeof It=="object"&&It!==null?It=xa(It):(xt=En(ut)?ss:In.current,At=ut.contextTypes,It=(At=At!=null)?yn(lt,xt):Fn),ut=new ut(pt,It),lt.memoizedState=ut.state!==null&&ut.state!==void 0?ut.state:null,ut.updater=Lo,lt.stateNode=ut,ut._reactInternals=lt,At&&(lt=lt.stateNode,lt.__reactInternalMemoizedUnmaskedChildContext=xt,lt.__reactInternalMemoizedMaskedChildContext=It),ut}function _h(lt,ut,pt,At){lt=ut.state,typeof ut.componentWillReceiveProps=="function"&&ut.componentWillReceiveProps(pt,At),typeof ut.UNSAFE_componentWillReceiveProps=="function"&&ut.UNSAFE_componentWillReceiveProps(pt,At),ut.state!==lt&&Lo.enqueueReplaceState(ut,ut.state,null)}function _c(lt,ut,pt,At){var xt=lt.stateNode;xt.props=pt,xt.state=lt.memoizedState,xt.refs=Yu,Jl(lt);var It=ut.contextType;typeof It=="object"&&It!==null?xt.context=xa(It):(It=En(ut)?ss:In.current,xt.context=yn(lt,It)),xt.state=lt.memoizedState,It=ut.getDerivedStateFromProps,typeof It=="function"&&(Zl(lt,ut,It,pt),xt.state=lt.memoizedState),typeof ut.getDerivedStateFromProps=="function"||typeof xt.getSnapshotBeforeUpdate=="function"||typeof xt.UNSAFE_componentWillMount!="function"&&typeof xt.componentWillMount!="function"||(ut=xt.state,typeof xt.componentWillMount=="function"&&xt.componentWillMount(),typeof xt.UNSAFE_componentWillMount=="function"&&xt.UNSAFE_componentWillMount(),ut!==xt.state&&Lo.enqueueReplaceState(xt,xt.state,null),Do(lt,pt,xt,At),xt.state=lt.memoizedState),typeof xt.componentDidMount=="function"&&(lt.flags|=4194308)}var Ks=[],qs=0,No=null,ko=0,ba=[],$a=0,Ls=null,ys=1,Es="";function Ns(lt,ut){Ks[qs++]=ko,Ks[qs++]=No,No=lt,ko=ut}function _d(lt,ut,pt){ba[$a++]=ys,ba[$a++]=Es,ba[$a++]=Ls,Ls=lt;var At=ys;lt=Es;var xt=32-os(At)-1;At&=~(1<<xt),pt+=1;var It=32-os(ut)+xt;if(30<It){var Ut=xt-xt%5;It=(At&(1<<Ut)-1).toString(32),At>>=Ut,xt-=Ut,ys=1<<32-os(ut)+xt|pt<<xt|At,Es=It+lt}else ys=1<<It|pt<<xt|At,Es=lt}function eu(lt){lt.return!==null&&(Ns(lt,1),_d(lt,1,0))}function tu(lt){for(;lt===No;)No=Ks[--qs],Ks[qs]=null,ko=Ks[--qs],Ks[qs]=null;for(;lt===Ls;)Ls=ba[--$a],ba[$a]=null,Es=ba[--$a],ba[$a]=null,ys=ba[--$a],ba[$a]=null}var Yn=null,Jn=null,gn=!1,oo=!1,cs=null;function _f(lt,ut){var pt=ns(5,null,null,0);pt.elementType="DELETED",pt.stateNode=ut,pt.return=lt,ut=lt.deletions,ut===null?(lt.deletions=[pt],lt.flags|=16):ut.push(pt)}function ep(lt,ut){switch(lt.tag){case 5:return ut=An(ut,lt.type,lt.pendingProps),ut!==null?(lt.stateNode=ut,Yn=lt,Jn=bs(ut),!0):!1;case 6:return ut=Cs(ut,lt.pendingProps),ut!==null?(lt.stateNode=ut,Yn=lt,Jn=null,!0):!1;case 13:if(ut=Vn(ut),ut!==null){var pt=Ls!==null?{id:ys,overflow:Es}:null;return lt.memoizedState={dehydrated:ut,treeContext:pt,retryLane:1073741824},pt=ns(18,null,null,0),pt.stateNode=ut,pt.return=lt,lt.child=pt,Yn=lt,Jn=null,!0}return!1;default:return!1}}function ru(lt){return(lt.mode&1)!==0&&(lt.flags&128)===0}function nu(lt){if(gn){var ut=Jn;if(ut){var pt=ut;if(!ep(lt,ut)){if(ru(lt))throw Error($(418));ut=zn(pt);var At=Yn;ut&&ep(lt,ut)?_f(At,pt):(lt.flags=lt.flags&-4097|2,gn=!1,Yn=lt)}}else{if(ru(lt))throw Error($(418));lt.flags=lt.flags&-4097|2,gn=!1,Yn=lt}}}function tp(lt){for(lt=lt.return;lt!==null&&lt.tag!==5&&lt.tag!==3&&lt.tag!==13;)lt=lt.return;Yn=lt}function lo(lt){if(!Xt||lt!==Yn)return!1;if(!gn)return tp(lt),gn=!0,!1;if(lt.tag!==3&&(lt.tag!==5||jr(lt.type)&&!or(lt.type,lt.memoizedProps))){var ut=Jn;if(ut){if(ru(lt)){for(lt=Jn;lt;)lt=zn(lt);throw Error($(418))}for(;ut;)_f(lt,ut),ut=zn(ut)}}if(tp(lt),lt.tag===13){if(!Xt)throw Error($(316));if(lt=lt.memoizedState,lt=lt!==null?lt.dehydrated:null,!lt)throw Error($(317));Jn=dr(lt)}else Jn=Yn?zn(lt.stateNode):null;return!0}function Xs(){Xt&&(Jn=Yn=null,oo=gn=!1)}function iu(lt){cs===null?cs=[lt]:cs.push(lt)}function co(lt,ut,pt){if(lt=pt.ref,lt!==null&&typeof lt!="function"&&typeof lt!="object"){if(pt._owner){if(pt=pt._owner,pt){if(pt.tag!==1)throw Error($(309));var At=pt.stateNode}if(!At)throw Error($(147,lt));var xt=At,It=""+lt;return ut!==null&&ut.ref!==null&&typeof ut.ref=="function"&&ut.ref._stringRef===It?ut.ref:(ut=function(Ut){var jt=xt.refs;jt===Yu&&(jt=xt.refs={}),Ut===null?delete jt[It]:jt[It]=Ut},ut._stringRef=It,ut)}if(typeof lt!="string")throw Error($(284));if(!pt._owner)throw Error($(290,lt))}return lt}function Oo(lt,ut){throw lt=Object.prototype.toString.call(ut),Error($(31,lt==="[object Object]"?"object with keys {"+Object.keys(ut).join(", ")+"}":lt))}function rp(lt){var ut=lt._init;return ut(lt._payload)}function np(lt){function ut(tr,qt){if(lt){var lr=tr.deletions;lr===null?(tr.deletions=[qt],tr.flags|=16):lr.push(qt)}}function pt(tr,qt){if(!lt)return null;for(;qt!==null;)ut(tr,qt),qt=qt.sibling;return null}function At(tr,qt){for(tr=new Map;qt!==null;)qt.key!==null?tr.set(qt.key,qt):tr.set(qt.index,qt),qt=qt.sibling;return tr}function xt(tr,qt){return tr=Fs(tr,qt),tr.index=0,tr.sibling=null,tr}function It(tr,qt,lr){return tr.index=lr,lt?(lr=tr.alternate,lr!==null?(lr=lr.index,lr<qt?(tr.flags|=2,qt):lr):(tr.flags|=2,qt)):(tr.flags|=1048576,qt)}function Ut(tr){return lt&&tr.alternate===null&&(tr.flags|=2),tr}function jt(tr,qt,lr,Lr){return qt===null||qt.tag!==6?(qt=Gu(lr,tr.mode,Lr),qt.return=tr,qt):(qt=xt(qt,lr),qt.return=tr,qt)}function fr(tr,qt,lr,Lr){var $r=lr.type;return $r===tt?kr(tr,qt,lr.props.children,Lr,lr.key):qt!==null&&(qt.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===dt&&rp($r)===qt.type)?(Lr=xt(qt,lr.props),Lr.ref=co(tr,qt,lr),Lr.return=tr,Lr):(Lr=Ll(lr.type,lr.key,lr.props,null,tr.mode,Lr),Lr.ref=co(tr,qt,lr),Lr.return=tr,Lr)}function Rr(tr,qt,lr,Lr){return qt===null||qt.tag!==4||qt.stateNode.containerInfo!==lr.containerInfo||qt.stateNode.implementation!==lr.implementation?(qt=Vu(lr,tr.mode,Lr),qt.return=tr,qt):(qt=xt(qt,lr.children||[]),qt.return=tr,qt)}function kr(tr,qt,lr,Lr,$r){return qt===null||qt.tag!==7?(qt=Hs(lr,tr.mode,Lr,$r),qt.return=tr,qt):(qt=xt(qt,lr),qt.return=tr,qt)}function Zr(tr,qt,lr){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return qt=Gu(""+qt,tr.mode,lr),qt.return=tr,qt;if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case _e:return lr=Ll(qt.type,qt.key,qt.props,null,tr.mode,lr),lr.ref=co(tr,null,qt),lr.return=tr,lr;case et:return qt=Vu(qt,tr.mode,lr),qt.return=tr,qt;case dt:var Lr=qt._init;return Zr(tr,Lr(qt._payload),lr)}if(Mt(qt)||gt(qt))return qt=Hs(qt,tr.mode,lr,null),qt.return=tr,qt;Oo(tr,qt)}return null}function zr(tr,qt,lr,Lr){var $r=qt!==null?qt.key:null;if(typeof lr=="string"&&lr!==""||typeof lr=="number")return $r!==null?null:jt(tr,qt,""+lr,Lr);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case _e:return lr.key===$r?fr(tr,qt,lr,Lr):null;case et:return lr.key===$r?Rr(tr,qt,lr,Lr):null;case dt:return $r=lr._init,zr(tr,qt,$r(lr._payload),Lr)}if(Mt(lr)||gt(lr))return $r!==null?null:kr(tr,qt,lr,Lr,null);Oo(tr,lr)}return null}function pn(tr,qt,lr,Lr,$r){if(typeof Lr=="string"&&Lr!==""||typeof Lr=="number")return tr=tr.get(lr)||null,jt(qt,tr,""+Lr,$r);if(typeof Lr=="object"&&Lr!==null){switch(Lr.$$typeof){case _e:return tr=tr.get(Lr.key===null?lr:Lr.key)||null,fr(qt,tr,Lr,$r);case et:return tr=tr.get(Lr.key===null?lr:Lr.key)||null,Rr(qt,tr,Lr,$r);case dt:var tn=Lr._init;return pn(tr,qt,lr,tn(Lr._payload),$r)}if(Mt(Lr)||gt(Lr))return tr=tr.get(lr)||null,kr(qt,tr,Lr,$r,null);Oo(qt,Lr)}return null}function Gr(tr,qt,lr,Lr){for(var $r=null,tn=null,en=qt,cn=qt=0,Pn=null;en!==null&&cn<lr.length;cn++){en.index>cn?(Pn=en,en=null):Pn=en.sibling;var un=zr(tr,en,lr[cn],Lr);if(un===null){en===null&&(en=Pn);break}lt&&en&&un.alternate===null&&ut(tr,en),qt=It(un,qt,cn),tn===null?$r=un:tn.sibling=un,tn=un,en=Pn}if(cn===lr.length)return pt(tr,en),gn&&Ns(tr,cn),$r;if(en===null){for(;cn<lr.length;cn++)en=Zr(tr,lr[cn],Lr),en!==null&&(qt=It(en,qt,cn),tn===null?$r=en:tn.sibling=en,tn=en);return gn&&Ns(tr,cn),$r}for(en=At(tr,en);cn<lr.length;cn++)Pn=pn(en,tr,cn,lr[cn],Lr),Pn!==null&&(lt&&Pn.alternate!==null&&en.delete(Pn.key===null?cn:Pn.key),qt=It(Pn,qt,cn),tn===null?$r=Pn:tn.sibling=Pn,tn=Pn);return lt&&en.forEach(function(Ds){return ut(tr,Ds)}),gn&&Ns(tr,cn),$r}function On(tr,qt,lr,Lr){var $r=gt(lr);if(typeof $r!="function")throw Error($(150));if(lr=$r.call(lr),lr==null)throw Error($(151));for(var tn=$r=null,en=qt,cn=qt=0,Pn=null,un=lr.next();en!==null&&!un.done;cn++,un=lr.next()){en.index>cn?(Pn=en,en=null):Pn=en.sibling;var Ds=zr(tr,en,un.value,Lr);if(Ds===null){en===null&&(en=Pn);break}lt&&en&&Ds.alternate===null&&ut(tr,en),qt=It(Ds,qt,cn),tn===null?$r=Ds:tn.sibling=Ds,tn=Ds,en=Pn}if(un.done)return pt(tr,en),gn&&Ns(tr,cn),$r;if(en===null){for(;!un.done;cn++,un=lr.next())un=Zr(tr,un.value,Lr),un!==null&&(qt=It(un,qt,cn),tn===null?$r=un:tn.sibling=un,tn=un);return gn&&Ns(tr,cn),$r}for(en=At(tr,en);!un.done;cn++,un=lr.next())un=pn(en,tr,cn,un.value,Lr),un!==null&&(lt&&un.alternate!==null&&en.delete(un.key===null?cn:un.key),qt=It(un,qt,cn),tn===null?$r=un:tn.sibling=un,tn=un);return lt&&en.forEach(function(c0){return ut(tr,c0)}),gn&&Ns(tr,cn),$r}function as(tr,qt,lr,Lr){if(typeof lr=="object"&&lr!==null&&lr.type===tt&&lr.key===null&&(lr=lr.props.children),typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case _e:e:{for(var $r=lr.key,tn=qt;tn!==null;){if(tn.key===$r){if($r=lr.type,$r===tt){if(tn.tag===7){pt(tr,tn.sibling),qt=xt(tn,lr.props.children),qt.return=tr,tr=qt;break e}}else if(tn.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===dt&&rp($r)===tn.type){pt(tr,tn.sibling),qt=xt(tn,lr.props),qt.ref=co(tr,tn,lr),qt.return=tr,tr=qt;break e}pt(tr,tn);break}else ut(tr,tn);tn=tn.sibling}lr.type===tt?(qt=Hs(lr.props.children,tr.mode,Lr,lr.key),qt.return=tr,tr=qt):(Lr=Ll(lr.type,lr.key,lr.props,null,tr.mode,Lr),Lr.ref=co(tr,qt,lr),Lr.return=tr,tr=Lr)}return Ut(tr);case et:e:{for(tn=lr.key;qt!==null;){if(qt.key===tn)if(qt.tag===4&&qt.stateNode.containerInfo===lr.containerInfo&&qt.stateNode.implementation===lr.implementation){pt(tr,qt.sibling),qt=xt(qt,lr.children||[]),qt.return=tr,tr=qt;break e}else{pt(tr,qt);break}else ut(tr,qt);qt=qt.sibling}qt=Vu(lr,tr.mode,Lr),qt.return=tr,tr=qt}return Ut(tr);case dt:return tn=lr._init,as(tr,qt,tn(lr._payload),Lr)}if(Mt(lr))return Gr(tr,qt,lr,Lr);if(gt(lr))return On(tr,qt,lr,Lr);Oo(tr,lr)}return typeof lr=="string"&&lr!==""||typeof lr=="number"?(lr=""+lr,qt!==null&&qt.tag===6?(pt(tr,qt.sibling),qt=xt(qt,lr),qt.return=tr,tr=qt):(pt(tr,qt),qt=Gu(lr,tr.mode,Lr),qt.return=tr,tr=qt),Ut(tr)):pt(tr,qt)}return as}var Ys=np(!0),ip=np(!1),uo={},es=Jr(uo),ho=Jr(uo),Js=Jr(uo);function ps(lt){if(lt===uo)throw Error($(174));return lt}function au(lt,ut){Yr(Js,ut),Yr(ho,lt),Yr(es,uo),lt=Rt(ut),dn(es),Yr(es,lt)}function Zs(){dn(es),dn(ho),dn(Js)}function ap(lt){var ut=ps(Js.current),pt=ps(es.current);ut=bt(pt,lt.type,ut),pt!==ut&&(Yr(ho,lt),Yr(es,ut))}function su(lt){ho.current===lt&&(dn(es),dn(ho))}var vn=Jr(0);function Uo(lt){for(var ut=lt;ut!==null;){if(ut.tag===13){var pt=ut.memoizedState;if(pt!==null&&(pt=pt.dehydrated,pt===null||Hn(pt)||Kn(pt)))return ut}else if(ut.tag===19&&ut.memoizedProps.revealOrder!==void 0){if(ut.flags&128)return ut}else if(ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===lt)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===lt)return null;ut=ut.return}ut.sibling.return=ut.return,ut=ut.sibling}return null}var ou=[];function lu(){for(var lt=0;lt<ou.length;lt++){var ut=ou[lt];Tr?ut._workInProgressVersionPrimary=null:ut._workInProgressVersionSecondary=null}ou.length=0}var $o=j.ReactCurrentDispatcher,ts=j.ReactCurrentBatchConfig,eo=0,Sn=null,Ln=null,Rn=null,Go=!1,fo=!1,po=0,Lm=0;function Nn(){throw Error($(321))}function cu(lt,ut){if(ut===null)return!1;for(var pt=0;pt<ut.length&&pt<lt.length;pt++)if(!hs(lt[pt],ut[pt]))return!1;return!0}function uu(lt,ut,pt,At,xt,It){if(eo=It,Sn=ut,ut.memoizedState=null,ut.updateQueue=null,ut.lanes=0,$o.current=lt===null||lt.memoizedState===null?Um:$m,lt=pt(At,xt),fo){It=0;do{if(fo=!1,po=0,25<=It)throw Error($(301));It+=1,Rn=Ln=null,ut.updateQueue=null,$o.current=Gm,lt=pt(At,xt)}while(fo)}if($o.current=Wo,ut=Ln!==null&&Ln.next!==null,eo=0,Rn=Ln=Sn=null,Go=!1,ut)throw Error($(300));return lt}function hu(){var lt=po!==0;return po=0,lt}function Ss(){var lt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Sn.memoizedState=Rn=lt:Rn=Rn.next=lt,Rn}function ms(){if(Ln===null){var lt=Sn.alternate;lt=lt!==null?lt.memoizedState:null}else lt=Ln.next;var ut=Rn===null?Sn.memoizedState:Rn.next;if(ut!==null)Rn=ut,Ln=lt;else{if(lt===null)throw Error($(310));Ln=lt,lt={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Rn===null?Sn.memoizedState=Rn=lt:Rn=Rn.next=lt}return Rn}function ks(lt,ut){return typeof ut=="function"?ut(lt):ut}function Vo(lt){var ut=ms(),pt=ut.queue;if(pt===null)throw Error($(311));pt.lastRenderedReducer=lt;var At=Ln,xt=At.baseQueue,It=pt.pending;if(It!==null){if(xt!==null){var Ut=xt.next;xt.next=It.next,It.next=Ut}At.baseQueue=xt=It,pt.pending=null}if(xt!==null){It=xt.next,At=At.baseState;var jt=Ut=null,fr=null,Rr=It;do{var kr=Rr.lane;if((eo&kr)===kr)fr!==null&&(fr=fr.next={lane:0,action:Rr.action,hasEagerState:Rr.hasEagerState,eagerState:Rr.eagerState,next:null}),At=Rr.hasEagerState?Rr.eagerState:lt(At,Rr.action);else{var Zr={lane:kr,action:Rr.action,hasEagerState:Rr.hasEagerState,eagerState:Rr.eagerState,next:null};fr===null?(jt=fr=Zr,Ut=At):fr=fr.next=Zr,Sn.lanes|=kr,ro|=kr}Rr=Rr.next}while(Rr!==null&&Rr!==It);fr===null?Ut=At:fr.next=jt,hs(At,ut.memoizedState)||(Zn=!0),ut.memoizedState=At,ut.baseState=Ut,ut.baseQueue=fr,pt.lastRenderedState=At}if(lt=pt.interleaved,lt!==null){xt=lt;do It=xt.lane,Sn.lanes|=It,ro|=It,xt=xt.next;while(xt!==lt)}else xt===null&&(pt.lanes=0);return[ut.memoizedState,pt.dispatch]}function Ho(lt){var ut=ms(),pt=ut.queue;if(pt===null)throw Error($(311));pt.lastRenderedReducer=lt;var At=pt.dispatch,xt=pt.pending,It=ut.memoizedState;if(xt!==null){pt.pending=null;var Ut=xt=xt.next;do It=lt(It,Ut.action),Ut=Ut.next;while(Ut!==xt);hs(It,ut.memoizedState)||(Zn=!0),ut.memoizedState=It,ut.baseQueue===null&&(ut.baseState=It),pt.lastRenderedState=It}return[It,At]}function sp(){}function op(lt,ut){var pt=Sn,At=ms(),xt=ut(),It=!hs(At.memoizedState,xt);if(It&&(At.memoizedState=xt,Zn=!0),At=At.queue,go(up.bind(null,pt,At,lt),[lt]),At.getSnapshot!==ut||It||Rn!==null&&Rn.memoizedState.tag&1){if(pt.flags|=2048,mo(9,cp.bind(null,pt,At,xt,ut),void 0,null),bn===null)throw Error($(349));eo&30||lp(pt,ut,xt)}return xt}function lp(lt,ut,pt){lt.flags|=16384,lt={getSnapshot:ut,value:pt},ut=Sn.updateQueue,ut===null?(ut={lastEffect:null,stores:null},Sn.updateQueue=ut,ut.stores=[lt]):(pt=ut.stores,pt===null?ut.stores=[lt]:pt.push(lt))}function cp(lt,ut,pt,At){ut.value=pt,ut.getSnapshot=At,hp(ut)&&rs(lt,1,-1)}function up(lt,ut,pt){return pt(function(){hp(ut)&&rs(lt,1,-1)})}function hp(lt){var ut=lt.getSnapshot;lt=lt.value;try{var pt=ut();return!hs(lt,pt)}catch{return!0}}function du(lt){var ut=Ss();return typeof lt=="function"&&(lt=lt()),ut.memoizedState=ut.baseState=lt,lt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:lt},ut.queue=lt,lt=lt.dispatch=Om.bind(null,Sn,lt),[ut.memoizedState,lt]}function mo(lt,ut,pt,At){return lt={tag:lt,create:ut,destroy:pt,deps:At,next:null},ut=Sn.updateQueue,ut===null?(ut={lastEffect:null,stores:null},Sn.updateQueue=ut,ut.lastEffect=lt.next=lt):(pt=ut.lastEffect,pt===null?ut.lastEffect=lt.next=lt:(At=pt.next,pt.next=lt,lt.next=At,ut.lastEffect=lt)),lt}function dp(){return ms().memoizedState}function zo(lt,ut,pt,At){var xt=Ss();Sn.flags|=lt,xt.memoizedState=mo(1|ut,pt,void 0,At===void 0?null:At)}function Qo(lt,ut,pt,At){var xt=ms();At=At===void 0?null:At;var It=void 0;if(Ln!==null){var Ut=Ln.memoizedState;if(It=Ut.destroy,At!==null&&cu(At,Ut.deps)){xt.memoizedState=mo(ut,pt,It,At);return}}Sn.flags|=lt,xt.memoizedState=mo(1|ut,pt,It,At)}function fu(lt,ut){return zo(8390656,8,lt,ut)}function go(lt,ut){return Qo(2048,8,lt,ut)}function fp(lt,ut){return Qo(4,2,lt,ut)}function pp(lt,ut){return Qo(4,4,lt,ut)}function mp(lt,ut){if(typeof ut=="function")return lt=lt(),ut(lt),function(){ut(null)};if(ut!=null)return lt=lt(),ut.current=lt,function(){ut.current=null}}function gp(lt,ut,pt){return pt=pt!=null?pt.concat([lt]):null,Qo(4,4,mp.bind(null,ut,lt),pt)}function pu(){}function Ap(lt,ut){var pt=ms();ut=ut===void 0?null:ut;var At=pt.memoizedState;return At!==null&&ut!==null&&cu(ut,At[1])?At[0]:(pt.memoizedState=[lt,ut],lt)}function vp(lt,ut){var pt=ms();ut=ut===void 0?null:ut;var At=pt.memoizedState;return At!==null&&ut!==null&&cu(ut,At[1])?At[0]:(lt=lt(),pt.memoizedState=[lt,ut],lt)}function Nm(lt,ut){var pt=ln;ln=pt!==0&&4>pt?pt:4,lt(!0);var At=ts.transition;ts.transition={};try{lt(!1),ut()}finally{ln=pt,ts.transition=At}}function yp(){return ms().memoizedState}function km(lt,ut,pt){var At=Ps(lt);pt={lane:At,action:pt,hasEagerState:!1,eagerState:null,next:null},Ep(lt)?Sp(ut,pt):(xp(lt,ut,pt),pt=Gn(),lt=rs(lt,At,pt),lt!==null&&Cp(lt,ut,At))}function Om(lt,ut,pt){var At=Ps(lt),xt={lane:At,action:pt,hasEagerState:!1,eagerState:null,next:null};if(Ep(lt))Sp(ut,xt);else{xp(lt,ut,xt);var It=lt.alternate;if(lt.lanes===0&&(It===null||It.lanes===0)&&(It=ut.lastRenderedReducer,It!==null))try{var Ut=ut.lastRenderedState,jt=It(Ut,pt);if(xt.hasEagerState=!0,xt.eagerState=jt,hs(jt,Ut))return}catch{}finally{}pt=Gn(),lt=rs(lt,At,pt),lt!==null&&Cp(lt,ut,At)}}function Ep(lt){var ut=lt.alternate;return lt===Sn||ut!==null&&ut===Sn}function Sp(lt,ut){fo=Go=!0;var pt=lt.pending;pt===null?ut.next=ut:(ut.next=pt.next,pt.next=ut),lt.pending=ut}function xp(lt,ut,pt){bn!==null&&lt.mode&1&&!(nn&2)?(lt=ut.interleaved,lt===null?(pt.next=pt,fs===null?fs=[ut]:fs.push(ut)):(pt.next=lt.next,lt.next=pt),ut.interleaved=pt):(lt=ut.pending,lt===null?pt.next=pt:(pt.next=lt.next,lt.next=pt),ut.pending=pt)}function Cp(lt,ut,pt){if(pt&4194240){var At=ut.lanes;At&=lt.pendingLanes,pt|=At,ut.lanes=pt,Gl(lt,pt)}}var Wo={readContext:xa,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},Um={readContext:xa,useCallback:function(lt,ut){return Ss().memoizedState=[lt,ut===void 0?null:ut],lt},useContext:xa,useEffect:fu,useImperativeHandle:function(lt,ut,pt){return pt=pt!=null?pt.concat([lt]):null,zo(4194308,4,mp.bind(null,ut,lt),pt)},useLayoutEffect:function(lt,ut){return zo(4194308,4,lt,ut)},useInsertionEffect:function(lt,ut){return zo(4,2,lt,ut)},useMemo:function(lt,ut){var pt=Ss();return ut=ut===void 0?null:ut,lt=lt(),pt.memoizedState=[lt,ut],lt},useReducer:function(lt,ut,pt){var At=Ss();return ut=pt!==void 0?pt(ut):ut,At.memoizedState=At.baseState=ut,lt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lt,lastRenderedState:ut},At.queue=lt,lt=lt.dispatch=km.bind(null,Sn,lt),[At.memoizedState,lt]},useRef:function(lt){var ut=Ss();return lt={current:lt},ut.memoizedState=lt},useState:du,useDebugValue:pu,useDeferredValue:function(lt){var ut=du(lt),pt=ut[0],At=ut[1];return fu(function(){var xt=ts.transition;ts.transition={};try{At(lt)}finally{ts.transition=xt}},[lt]),pt},useTransition:function(){var lt=du(!1),ut=lt[0];return lt=Nm.bind(null,lt[1]),Ss().memoizedState=lt,[ut,lt]},useMutableSource:function(){},useSyncExternalStore:function(lt,ut,pt){var At=Sn,xt=Ss();if(gn){if(pt===void 0)throw Error($(407));pt=pt()}else{if(pt=ut(),bn===null)throw Error($(349));eo&30||lp(At,ut,pt)}xt.memoizedState=pt;var It={value:pt,getSnapshot:ut};return xt.queue=It,fu(up.bind(null,At,It,lt),[lt]),At.flags|=2048,mo(9,cp.bind(null,At,It,pt,ut),void 0,null),pt},useId:function(){var lt=Ss(),ut=bn.identifierPrefix;if(gn){var pt=Es,At=ys;pt=(At&~(1<<32-os(At)-1)).toString(32)+pt,ut=":"+ut+"R"+pt,pt=po++,0<pt&&(ut+="H"+pt.toString(32)),ut+=":"}else pt=Lm++,ut=":"+ut+"r"+pt.toString(32)+":";return lt.memoizedState=ut},unstable_isNewReconciler:!1},$m={readContext:xa,useCallback:Ap,useContext:xa,useEffect:go,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:vp,useReducer:Vo,useRef:dp,useState:function(){return Vo(ks)},useDebugValue:pu,useDeferredValue:function(lt){var ut=Vo(ks),pt=ut[0],At=ut[1];return go(function(){var xt=ts.transition;ts.transition={};try{At(lt)}finally{ts.transition=xt}},[lt]),pt},useTransition:function(){var lt=Vo(ks)[0],ut=ms().memoizedState;return[lt,ut]},useMutableSource:sp,useSyncExternalStore:op,useId:yp,unstable_isNewReconciler:!1},Gm={readContext:xa,useCallback:Ap,useContext:xa,useEffect:go,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:pp,useMemo:vp,useReducer:Ho,useRef:dp,useState:function(){return Ho(ks)},useDebugValue:pu,useDeferredValue:function(lt){var ut=Ho(ks),pt=ut[0],At=ut[1];return go(function(){var xt=ts.transition;ts.transition={};try{At(lt)}finally{ts.transition=xt}},[lt]),pt},useTransition:function(){var lt=Ho(ks)[0],ut=ms().memoizedState;return[lt,ut]},useMutableSource:sp,useSyncExternalStore:op,useId:yp,unstable_isNewReconciler:!1};function mu(lt,ut){try{var pt="",At=ut;do pt+=Dm(At),At=At.return;while(At);var xt=pt}catch(It){xt=`
Error generating stack: `+It.message+`
`+It.stack}return{value:lt,source:ut,stack:xt}}function gu(lt,ut){try{console.error(ut.value)}catch(pt){setTimeout(function(){throw pt})}}var Vm=typeof WeakMap=="function"?WeakMap:Map;function _p(lt,ut,pt){pt=vs(-1,pt),pt.tag=3,pt.payload={element:null};var At=ut.value;return pt.callback=function(){Il||(Il=!0,Du=At),gu(lt,ut)},pt}function bp(lt,ut,pt){pt=vs(-1,pt),pt.tag=3;var At=lt.type.getDerivedStateFromError;if(typeof At=="function"){var xt=ut.value;pt.payload=function(){return At(xt)},pt.callback=function(){gu(lt,ut)}}var It=lt.stateNode;return It!==null&&typeof It.componentDidCatch=="function"&&(pt.callback=function(){gu(lt,ut),typeof At!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var Ut=ut.stack;this.componentDidCatch(ut.value,{componentStack:Ut!==null?Ut:""})}),pt}function Tp(lt,ut,pt){var At=lt.pingCache;if(At===null){At=lt.pingCache=new Vm;var xt=new Set;At.set(ut,xt)}else xt=At.get(ut),xt===void 0&&(xt=new Set,At.set(ut,xt));xt.has(pt)||(xt.add(pt),lt=t0.bind(null,lt,ut,pt),ut.then(lt,lt))}function Ip(lt){do{var ut;if((ut=lt.tag===13)&&(ut=lt.memoizedState,ut=ut!==null?ut.dehydrated!==null:!0),ut)return lt;lt=lt.return}while(lt!==null);return null}function Mp(lt,ut,pt,At,xt){return lt.mode&1?(lt.flags|=65536,lt.lanes=xt,lt):(lt===ut?lt.flags|=65536:(lt.flags|=128,pt.flags|=131072,pt.flags&=-52805,pt.tag===1&&(pt.alternate===null?pt.tag=17:(ut=vs(-1,1),ut.tag=2,Ms(pt,ut))),pt.lanes|=1),lt)}function gs(lt){lt.flags|=4}function wp(lt,ut){if(lt!==null&&lt.child===ut.child)return!0;if(ut.flags&16)return!1;for(lt=ut.child;lt!==null;){if(lt.flags&12854||lt.subtreeFlags&12854)return!1;lt=lt.sibling}return!0}var Ao,vo,jo,Ko;if(ur)Ao=function(lt,ut){for(var pt=ut.child;pt!==null;){if(pt.tag===5||pt.tag===6)Lt(lt,pt.stateNode);else if(pt.tag!==4&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===ut)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===ut)return;pt=pt.return}pt.sibling.return=pt.return,pt=pt.sibling}},vo=function(){},jo=function(lt,ut,pt,At,xt){if(lt=lt.memoizedProps,lt!==At){var It=ut.stateNode,Ut=ps(es.current);pt=Qt(It,pt,lt,At,xt,Ut),(ut.updateQueue=pt)&&gs(ut)}},Ko=function(lt,ut,pt,At){pt!==At&&gs(ut)};else if(kt){Ao=function(lt,ut,pt,At){for(var xt=ut.child;xt!==null;){if(xt.tag===5){var It=xt.stateNode;pt&&At&&(It=an(It,xt.type,xt.memoizedProps,xt)),Lt(lt,It)}else if(xt.tag===6)It=xt.stateNode,pt&&At&&(It=xn(It,xt.memoizedProps,xt)),Lt(lt,It);else if(xt.tag!==4){if(xt.tag===22&&xt.memoizedState!==null)It=xt.child,It!==null&&(It.return=xt),Ao(lt,xt,!0,!0);else if(xt.child!==null){xt.child.return=xt,xt=xt.child;continue}}if(xt===ut)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===ut)return;xt=xt.return}xt.sibling.return=xt.return,xt=xt.sibling}};var Rp=function(lt,ut,pt,At){for(var xt=ut.child;xt!==null;){if(xt.tag===5){var It=xt.stateNode;pt&&At&&(It=an(It,xt.type,xt.memoizedProps,xt)),Ur(lt,It)}else if(xt.tag===6)It=xt.stateNode,pt&&At&&(It=xn(It,xt.memoizedProps,xt)),Ur(lt,It);else if(xt.tag!==4){if(xt.tag===22&&xt.memoizedState!==null)It=xt.child,It!==null&&(It.return=xt),Rp(lt,xt,!0,!0);else if(xt.child!==null){xt.child.return=xt,xt=xt.child;continue}}if(xt===ut)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===ut)return;xt=xt.return}xt.sibling.return=xt.return,xt=xt.sibling}};vo=function(lt,ut){var pt=ut.stateNode;if(!wp(lt,ut)){lt=pt.containerInfo;var At=Vr(lt);Rp(At,ut,!1,!1),pt.pendingChildren=At,gs(ut),Qr(lt,At)}},jo=function(lt,ut,pt,At,xt){var It=lt.stateNode,Ut=lt.memoizedProps;if((lt=wp(lt,ut))&&Ut===At)ut.stateNode=It;else{var jt=ut.stateNode,fr=ps(es.current),Rr=null;Ut!==At&&(Rr=Qt(jt,pt,Ut,At,xt,fr)),lt&&Rr===null?ut.stateNode=It:(It=Cr(It,Rr,pt,Ut,At,ut,lt,jt),Jt(It,pt,At,xt,fr)&&gs(ut),ut.stateNode=It,lt?gs(ut):Ao(It,ut,!1,!1))}},Ko=function(lt,ut,pt,At){pt!==At?(lt=ps(Js.current),pt=ps(es.current),ut.stateNode=er(At,lt,pt,ut),gs(ut)):ut.stateNode=lt.stateNode}}else vo=function(){},jo=function(){},Ko=function(){};function yo(lt,ut){if(!gn)switch(lt.tailMode){case"hidden":ut=lt.tail;for(var pt=null;ut!==null;)ut.alternate!==null&&(pt=ut),ut=ut.sibling;pt===null?lt.tail=null:pt.sibling=null;break;case"collapsed":pt=lt.tail;for(var At=null;pt!==null;)pt.alternate!==null&&(At=pt),pt=pt.sibling;At===null?ut||lt.tail===null?lt.tail=null:lt.tail.sibling=null:At.sibling=null}}function kn(lt){var ut=lt.alternate!==null&&lt.alternate.child===lt.child,pt=0,At=0;if(ut)for(var xt=lt.child;xt!==null;)pt|=xt.lanes|xt.childLanes,At|=xt.subtreeFlags&14680064,At|=xt.flags&14680064,xt.return=lt,xt=xt.sibling;else for(xt=lt.child;xt!==null;)pt|=xt.lanes|xt.childLanes,At|=xt.subtreeFlags,At|=xt.flags,xt.return=lt,xt=xt.sibling;return lt.subtreeFlags|=At,lt.childLanes=pt,ut}function Hm(lt,ut,pt){var At=ut.pendingProps;switch(tu(ut),ut.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(ut),null;case 1:return En(ut.type)&&Ts(),kn(ut),null;case 3:return At=ut.stateNode,Zs(),dn(_n),dn(In),lu(),At.pendingContext&&(At.context=At.pendingContext,At.pendingContext=null),(lt===null||lt.child===null)&&(lo(ut)?gs(ut):lt===null||lt.memoizedState.isDehydrated&&!(ut.flags&256)||(ut.flags|=1024,cs!==null&&(ku(cs),cs=null))),vo(lt,ut),kn(ut),null;case 5:su(ut),pt=ps(Js.current);var xt=ut.type;if(lt!==null&&ut.stateNode!=null)jo(lt,ut,xt,At,pt),lt.ref!==ut.ref&&(ut.flags|=512,ut.flags|=2097152);else{if(!At){if(ut.stateNode===null)throw Error($(166));return kn(ut),null}if(lt=ps(es.current),lo(ut)){if(!Xt)throw Error($(175));lt=ga(ut.stateNode,ut.type,ut.memoizedProps,pt,lt,ut,!oo),ut.updateQueue=lt,lt!==null&&gs(ut)}else{var It=$t(xt,At,pt,lt,ut);Ao(It,ut,!1,!1),ut.stateNode=It,Jt(It,xt,At,pt,lt)&&gs(ut)}ut.ref!==null&&(ut.flags|=512,ut.flags|=2097152)}return kn(ut),null;case 6:if(lt&&ut.stateNode!=null)Ko(lt,ut,lt.memoizedProps,At);else{if(typeof At!="string"&&ut.stateNode===null)throw Error($(166));if(lt=ps(Js.current),pt=ps(es.current),lo(ut)){if(!Xt)throw Error($(176));if(lt=ut.stateNode,At=ut.memoizedProps,(pt=Nt(lt,At,ut,!oo))&&(xt=Yn,xt!==null))switch(It=(xt.mode&1)!==0,xt.tag){case 3:Kr(xt.stateNode.containerInfo,lt,At,It);break;case 5:rn(xt.type,xt.memoizedProps,xt.stateNode,lt,At,It)}pt&&gs(ut)}else ut.stateNode=er(At,lt,pt,ut)}return kn(ut),null;case 13:if(dn(vn),At=ut.memoizedState,gn&&Jn!==null&&ut.mode&1&&!(ut.flags&128)){for(lt=Jn;lt;)lt=zn(lt);return Xs(),ut.flags|=98560,ut}if(At!==null&&At.dehydrated!==null){if(At=lo(ut),lt===null){if(!At)throw Error($(318));if(!Xt)throw Error($(344));if(lt=ut.memoizedState,lt=lt!==null?lt.dehydrated:null,!lt)throw Error($(317));Yt(lt,ut)}else Xs(),!(ut.flags&128)&&(ut.memoizedState=null),ut.flags|=4;return kn(ut),null}return cs!==null&&(ku(cs),cs=null),ut.flags&128?(ut.lanes=pt,ut):(At=At!==null,pt=!1,lt===null?lo(ut):pt=lt.memoizedState!==null,At&&!pt&&(ut.child.flags|=8192,ut.mode&1&&(lt===null||vn.current&1?Mn===0&&(Mn=3):Uu())),ut.updateQueue!==null&&(ut.flags|=4),kn(ut),null);case 4:return Zs(),vo(lt,ut),lt===null&&yr(ut.stateNode.containerInfo),kn(ut),null;case 10:return Xl(ut.type._context),kn(ut),null;case 17:return En(ut.type)&&Ts(),kn(ut),null;case 19:if(dn(vn),xt=ut.memoizedState,xt===null)return kn(ut),null;if(At=(ut.flags&128)!==0,It=xt.rendering,It===null)if(At)yo(xt,!1);else{if(Mn!==0||lt!==null&&lt.flags&128)for(lt=ut.child;lt!==null;){if(It=Uo(lt),It!==null){for(ut.flags|=128,yo(xt,!1),lt=It.updateQueue,lt!==null&&(ut.updateQueue=lt,ut.flags|=4),ut.subtreeFlags=0,lt=pt,At=ut.child;At!==null;)pt=At,xt=lt,pt.flags&=14680066,It=pt.alternate,It===null?(pt.childLanes=0,pt.lanes=xt,pt.child=null,pt.subtreeFlags=0,pt.memoizedProps=null,pt.memoizedState=null,pt.updateQueue=null,pt.dependencies=null,pt.stateNode=null):(pt.childLanes=It.childLanes,pt.lanes=It.lanes,pt.child=It.child,pt.subtreeFlags=0,pt.deletions=null,pt.memoizedProps=It.memoizedProps,pt.memoizedState=It.memoizedState,pt.updateQueue=It.updateQueue,pt.type=It.type,xt=It.dependencies,pt.dependencies=xt===null?null:{lanes:xt.lanes,firstContext:xt.firstContext}),At=At.sibling;return Yr(vn,vn.current&1|2),ut.child}lt=lt.sibling}xt.tail!==null&&wn()>Fu&&(ut.flags|=128,At=!0,yo(xt,!1),ut.lanes=4194304)}else{if(!At)if(lt=Uo(It),lt!==null){if(ut.flags|=128,At=!0,lt=lt.updateQueue,lt!==null&&(ut.updateQueue=lt,ut.flags|=4),yo(xt,!0),xt.tail===null&&xt.tailMode==="hidden"&&!It.alternate&&!gn)return kn(ut),null}else 2*wn()-xt.renderingStartTime>Fu&&pt!==1073741824&&(ut.flags|=128,At=!0,yo(xt,!1),ut.lanes=4194304);xt.isBackwards?(It.sibling=ut.child,ut.child=It):(lt=xt.last,lt!==null?lt.sibling=It:ut.child=It,xt.last=It)}return xt.tail!==null?(ut=xt.tail,xt.rendering=ut,xt.tail=ut.sibling,xt.renderingStartTime=wn(),ut.sibling=null,lt=vn.current,Yr(vn,At?lt&1|2:lt&1),ut):(kn(ut),null);case 22:case 23:return Ou(),At=ut.memoizedState!==null,lt!==null&&lt.memoizedState!==null!==At&&(ut.flags|=8192),At&&ut.mode&1?na&1073741824&&(kn(ut),ur&&ut.subtreeFlags&6&&(ut.flags|=8192)):kn(ut),null;case 24:return null;case 25:return null}throw Error($(156,ut.tag))}var zm=j.ReactCurrentOwner,Zn=!1;function $n(lt,ut,pt,At){ut.child=lt===null?ip(ut,null,pt,At):Ys(ut,lt.child,pt,At)}function Pp(lt,ut,pt,At,xt){pt=pt.render;var It=ut.ref;return js(ut,xt),At=uu(lt,ut,pt,At,It,xt),pt=hu(),lt!==null&&!Zn?(ut.updateQueue=lt.updateQueue,ut.flags&=-2053,lt.lanes&=~xt,xs(lt,ut,xt)):(gn&&pt&&eu(ut),ut.flags|=1,$n(lt,ut,At,xt),ut.child)}function Bp(lt,ut,pt,At,xt){if(lt===null){var It=pt.type;return typeof It=="function"&&!$u(It)&&It.defaultProps===void 0&&pt.compare===null&&pt.defaultProps===void 0?(ut.tag=15,ut.type=It,Fp(lt,ut,It,At,xt)):(lt=Ll(pt.type,null,At,ut,ut.mode,xt),lt.ref=ut.ref,lt.return=ut,ut.child=lt)}if(It=lt.child,!(lt.lanes&xt)){var Ut=It.memoizedProps;if(pt=pt.compare,pt=pt!==null?pt:Ro,pt(Ut,At)&&lt.ref===ut.ref)return xs(lt,ut,xt)}return ut.flags|=1,lt=Fs(It,At),lt.ref=ut.ref,lt.return=ut,ut.child=lt}function Fp(lt,ut,pt,At,xt){if(lt!==null&&Ro(lt.memoizedProps,At)&&lt.ref===ut.ref)if(Zn=!1,(lt.lanes&xt)!==0)lt.flags&131072&&(Zn=!0);else return ut.lanes=lt.lanes,xs(lt,ut,xt);return Au(lt,ut,pt,At,xt)}function Dp(lt,ut,pt){var At=ut.pendingProps,xt=At.children,It=lt!==null?lt.memoizedState:null;if(At.mode==="hidden")if(!(ut.mode&1))ut.memoizedState={baseLanes:0,cachePool:null},Yr(to,na),na|=pt;else if(pt&1073741824)ut.memoizedState={baseLanes:0,cachePool:null},At=It!==null?It.baseLanes:pt,Yr(to,na),na|=At;else return lt=It!==null?It.baseLanes|pt:pt,ut.lanes=ut.childLanes=1073741824,ut.memoizedState={baseLanes:lt,cachePool:null},ut.updateQueue=null,Yr(to,na),na|=lt,null;else It!==null?(At=It.baseLanes|pt,ut.memoizedState=null):At=pt,Yr(to,na),na|=At;return $n(lt,ut,xt,pt),ut.child}function Lp(lt,ut){var pt=ut.ref;(lt===null&&pt!==null||lt!==null&&lt.ref!==pt)&&(ut.flags|=512,ut.flags|=2097152)}function Au(lt,ut,pt,At,xt){var It=En(pt)?ss:In.current;return It=yn(ut,It),js(ut,xt),pt=uu(lt,ut,pt,At,It,xt),At=hu(),lt!==null&&!Zn?(ut.updateQueue=lt.updateQueue,ut.flags&=-2053,lt.lanes&=~xt,xs(lt,ut,xt)):(gn&&At&&eu(ut),ut.flags|=1,$n(lt,ut,pt,xt),ut.child)}function Np(lt,ut,pt,At,xt){if(En(pt)){var It=!0;Qs(ut)}else It=!1;if(js(ut,xt),ut.stateNode===null)lt!==null&&(lt.alternate=null,ut.alternate=null,ut.flags|=2),Zu(ut,pt,At),_c(ut,pt,At,xt),At=!0;else if(lt===null){var Ut=ut.stateNode,jt=ut.memoizedProps;Ut.props=jt;var fr=Ut.context,Rr=pt.contextType;typeof Rr=="object"&&Rr!==null?Rr=xa(Rr):(Rr=En(pt)?ss:In.current,Rr=yn(ut,Rr));var kr=pt.getDerivedStateFromProps,Zr=typeof kr=="function"||typeof Ut.getSnapshotBeforeUpdate=="function";Zr||typeof Ut.UNSAFE_componentWillReceiveProps!="function"&&typeof Ut.componentWillReceiveProps!="function"||(jt!==At||fr!==Rr)&&_h(ut,Ut,At,Rr),Is=!1;var zr=ut.memoizedState;Ut.state=zr,Do(ut,At,Ut,xt),fr=ut.memoizedState,jt!==At||zr!==fr||_n.current||Is?(typeof kr=="function"&&(Zl(ut,pt,kr,At),fr=ut.memoizedState),(jt=Is||Ju(ut,pt,jt,At,zr,fr,Rr))?(Zr||typeof Ut.UNSAFE_componentWillMount!="function"&&typeof Ut.componentWillMount!="function"||(typeof Ut.componentWillMount=="function"&&Ut.componentWillMount(),typeof Ut.UNSAFE_componentWillMount=="function"&&Ut.UNSAFE_componentWillMount()),typeof Ut.componentDidMount=="function"&&(ut.flags|=4194308)):(typeof Ut.componentDidMount=="function"&&(ut.flags|=4194308),ut.memoizedProps=At,ut.memoizedState=fr),Ut.props=At,Ut.state=fr,Ut.context=Rr,At=jt):(typeof Ut.componentDidMount=="function"&&(ut.flags|=4194308),At=!1)}else{Ut=ut.stateNode,Ku(lt,ut),jt=ut.memoizedProps,Rr=ut.type===ut.elementType?jt:ls(ut.type,jt),Ut.props=Rr,Zr=ut.pendingProps,zr=Ut.context,fr=pt.contextType,typeof fr=="object"&&fr!==null?fr=xa(fr):(fr=En(pt)?ss:In.current,fr=yn(ut,fr));var pn=pt.getDerivedStateFromProps;(kr=typeof pn=="function"||typeof Ut.getSnapshotBeforeUpdate=="function")||typeof Ut.UNSAFE_componentWillReceiveProps!="function"&&typeof Ut.componentWillReceiveProps!="function"||(jt!==Zr||zr!==fr)&&_h(ut,Ut,At,fr),Is=!1,zr=ut.memoizedState,Ut.state=zr,Do(ut,At,Ut,xt);var Gr=ut.memoizedState;jt!==Zr||zr!==Gr||_n.current||Is?(typeof pn=="function"&&(Zl(ut,pt,pn,At),Gr=ut.memoizedState),(Rr=Is||Ju(ut,pt,Rr,At,zr,Gr,fr)||!1)?(kr||typeof Ut.UNSAFE_componentWillUpdate!="function"&&typeof Ut.componentWillUpdate!="function"||(typeof Ut.componentWillUpdate=="function"&&Ut.componentWillUpdate(At,Gr,fr),typeof Ut.UNSAFE_componentWillUpdate=="function"&&Ut.UNSAFE_componentWillUpdate(At,Gr,fr)),typeof Ut.componentDidUpdate=="function"&&(ut.flags|=4),typeof Ut.getSnapshotBeforeUpdate=="function"&&(ut.flags|=1024)):(typeof Ut.componentDidUpdate!="function"||jt===lt.memoizedProps&&zr===lt.memoizedState||(ut.flags|=4),typeof Ut.getSnapshotBeforeUpdate!="function"||jt===lt.memoizedProps&&zr===lt.memoizedState||(ut.flags|=1024),ut.memoizedProps=At,ut.memoizedState=Gr),Ut.props=At,Ut.state=Gr,Ut.context=fr,At=Rr):(typeof Ut.componentDidUpdate!="function"||jt===lt.memoizedProps&&zr===lt.memoizedState||(ut.flags|=4),typeof Ut.getSnapshotBeforeUpdate!="function"||jt===lt.memoizedProps&&zr===lt.memoizedState||(ut.flags|=1024),At=!1)}return vu(lt,ut,pt,At,It,xt)}function vu(lt,ut,pt,At,xt,It){Lp(lt,ut);var Ut=(ut.flags&128)!==0;if(!At&&!Ut)return xt&&io(ut,pt,!1),xs(lt,ut,It);At=ut.stateNode,zm.current=ut;var jt=Ut&&typeof pt.getDerivedStateFromError!="function"?null:At.render();return ut.flags|=1,lt!==null&&Ut?(ut.child=Ys(ut,lt.child,null,It),ut.child=Ys(ut,null,jt,It)):$n(lt,ut,jt,It),ut.memoizedState=At.state,xt&&io(ut,pt,!0),ut.child}function kp(lt){var ut=lt.stateNode;ut.pendingContext?Dn(lt,ut.pendingContext,ut.pendingContext!==ut.context):ut.context&&Dn(lt,ut.context,!1),au(lt,ut.containerInfo)}function Op(lt,ut,pt,At,xt){return Xs(),iu(xt),ut.flags|=256,$n(lt,ut,pt,At),ut.child}var qo={dehydrated:null,treeContext:null,retryLane:0};function Xo(lt){return{baseLanes:lt,cachePool:null}}function Up(lt,ut,pt){var At=ut.pendingProps,xt=vn.current,It=!1,Ut=(ut.flags&128)!==0,jt;if((jt=Ut)||(jt=lt!==null&&lt.memoizedState===null?!1:(xt&2)!==0),jt?(It=!0,ut.flags&=-129):(lt===null||lt.memoizedState!==null)&&(xt|=1),Yr(vn,xt&1),lt===null)return nu(ut),lt=ut.memoizedState,lt!==null&&(lt=lt.dehydrated,lt!==null)?(ut.mode&1?Kn(lt)?ut.lanes=8:ut.lanes=1073741824:ut.lanes=1,null):(xt=At.children,lt=At.fallback,It?(At=ut.mode,It=ut.child,xt={mode:"hidden",children:xt},!(At&1)&&It!==null?(It.childLanes=0,It.pendingProps=xt):It=Nl(xt,At,0,null),lt=Hs(lt,At,pt,null),It.return=ut,lt.return=ut,It.sibling=lt,ut.child=It,ut.child.memoizedState=Xo(pt),ut.memoizedState=qo,lt):yu(ut,xt));if(xt=lt.memoizedState,xt!==null){if(jt=xt.dehydrated,jt!==null){if(Ut)return ut.flags&256?(ut.flags&=-257,Yo(lt,ut,pt,Error($(422)))):ut.memoizedState!==null?(ut.child=lt.child,ut.flags|=128,null):(It=At.fallback,xt=ut.mode,At=Nl({mode:"visible",children:At.children},xt,0,null),It=Hs(It,xt,pt,null),It.flags|=2,At.return=ut,It.return=ut,At.sibling=It,ut.child=At,ut.mode&1&&Ys(ut,lt.child,null,pt),ut.child.memoizedState=Xo(pt),ut.memoizedState=qo,It);if(!(ut.mode&1))ut=Yo(lt,ut,pt,null);else if(Kn(jt))ut=Yo(lt,ut,pt,Error($(419)));else if(At=(pt&lt.childLanes)!==0,Zn||At){if(At=bn,At!==null){switch(pt&-pt){case 4:It=2;break;case 16:It=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:It=32;break;case 536870912:It=268435456;break;default:It=0}At=It&(At.suspendedLanes|pt)?0:It,At!==0&&At!==xt.retryLane&&(xt.retryLane=At,rs(lt,At,-1))}Uu(),ut=Yo(lt,ut,pt,Error($(421)))}else Hn(jt)?(ut.flags|=128,ut.child=lt.child,ut=r0.bind(null,lt),_s(jt,ut),ut=null):(pt=xt.treeContext,Xt&&(Jn=Un(jt),Yn=ut,gn=!0,cs=null,oo=!1,pt!==null&&(ba[$a++]=ys,ba[$a++]=Es,ba[$a++]=Ls,ys=pt.id,Es=pt.overflow,Ls=ut)),ut=yu(ut,ut.pendingProps.children),ut.flags|=4096);return ut}return It?(At=Gp(lt,ut,At.children,At.fallback,pt),It=ut.child,xt=lt.child.memoizedState,It.memoizedState=xt===null?Xo(pt):{baseLanes:xt.baseLanes|pt,cachePool:null},It.childLanes=lt.childLanes&~pt,ut.memoizedState=qo,At):(pt=$p(lt,ut,At.children,pt),ut.memoizedState=null,pt)}return It?(At=Gp(lt,ut,At.children,At.fallback,pt),It=ut.child,xt=lt.child.memoizedState,It.memoizedState=xt===null?Xo(pt):{baseLanes:xt.baseLanes|pt,cachePool:null},It.childLanes=lt.childLanes&~pt,ut.memoizedState=qo,At):(pt=$p(lt,ut,At.children,pt),ut.memoizedState=null,pt)}function yu(lt,ut){return ut=Nl({mode:"visible",children:ut},lt.mode,0,null),ut.return=lt,lt.child=ut}function $p(lt,ut,pt,At){var xt=lt.child;return lt=xt.sibling,pt=Fs(xt,{mode:"visible",children:pt}),!(ut.mode&1)&&(pt.lanes=At),pt.return=ut,pt.sibling=null,lt!==null&&(At=ut.deletions,At===null?(ut.deletions=[lt],ut.flags|=16):At.push(lt)),ut.child=pt}function Gp(lt,ut,pt,At,xt){var It=ut.mode;lt=lt.child;var Ut=lt.sibling,jt={mode:"hidden",children:pt};return!(It&1)&&ut.child!==lt?(pt=ut.child,pt.childLanes=0,pt.pendingProps=jt,ut.deletions=null):(pt=Fs(lt,jt),pt.subtreeFlags=lt.subtreeFlags&14680064),Ut!==null?At=Fs(Ut,At):(At=Hs(At,It,xt,null),At.flags|=2),At.return=ut,pt.return=ut,pt.sibling=At,ut.child=pt,At}function Yo(lt,ut,pt,At){return At!==null&&iu(At),Ys(ut,lt.child,null,pt),lt=yu(ut,ut.pendingProps.children),lt.flags|=2,ut.memoizedState=null,lt}function Vp(lt,ut,pt){lt.lanes|=ut;var At=lt.alternate;At!==null&&(At.lanes|=ut),Yl(lt.return,ut,pt)}function Eu(lt,ut,pt,At,xt){var It=lt.memoizedState;It===null?lt.memoizedState={isBackwards:ut,rendering:null,renderingStartTime:0,last:At,tail:pt,tailMode:xt}:(It.isBackwards=ut,It.rendering=null,It.renderingStartTime=0,It.last=At,It.tail=pt,It.tailMode=xt)}function Hp(lt,ut,pt){var At=ut.pendingProps,xt=At.revealOrder,It=At.tail;if($n(lt,ut,At.children,pt),At=vn.current,At&2)At=At&1|2,ut.flags|=128;else{if(lt!==null&&lt.flags&128)e:for(lt=ut.child;lt!==null;){if(lt.tag===13)lt.memoizedState!==null&&Vp(lt,pt,ut);else if(lt.tag===19)Vp(lt,pt,ut);else if(lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===ut)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===ut)break e;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}At&=1}if(Yr(vn,At),!(ut.mode&1))ut.memoizedState=null;else switch(xt){case"forwards":for(pt=ut.child,xt=null;pt!==null;)lt=pt.alternate,lt!==null&&Uo(lt)===null&&(xt=pt),pt=pt.sibling;pt=xt,pt===null?(xt=ut.child,ut.child=null):(xt=pt.sibling,pt.sibling=null),Eu(ut,!1,xt,pt,It);break;case"backwards":for(pt=null,xt=ut.child,ut.child=null;xt!==null;){if(lt=xt.alternate,lt!==null&&Uo(lt)===null){ut.child=xt;break}lt=xt.sibling,xt.sibling=pt,pt=xt,xt=lt}Eu(ut,!0,pt,null,It);break;case"together":Eu(ut,!1,null,null,void 0);break;default:ut.memoizedState=null}return ut.child}function xs(lt,ut,pt){if(lt!==null&&(ut.dependencies=lt.dependencies),ro|=ut.lanes,!(pt&ut.childLanes))return null;if(lt!==null&&ut.child!==lt.child)throw Error($(153));if(ut.child!==null){for(lt=ut.child,pt=Fs(lt,lt.pendingProps),ut.child=pt,pt.return=ut;lt.sibling!==null;)lt=lt.sibling,pt=pt.sibling=Fs(lt,lt.pendingProps),pt.return=ut;pt.sibling=null}return ut.child}function Qm(lt,ut,pt){switch(ut.tag){case 3:kp(ut),Xs();break;case 5:ap(ut);break;case 1:En(ut.type)&&Qs(ut);break;case 4:au(ut,ut.stateNode.containerInfo);break;case 10:ju(ut,ut.type._context,ut.memoizedProps.value);break;case 13:var At=ut.memoizedState;if(At!==null)return At.dehydrated!==null?(Yr(vn,vn.current&1),ut.flags|=128,null):pt&ut.child.childLanes?Up(lt,ut,pt):(Yr(vn,vn.current&1),lt=xs(lt,ut,pt),lt!==null?lt.sibling:null);Yr(vn,vn.current&1);break;case 19:if(At=(pt&ut.childLanes)!==0,lt.flags&128){if(At)return Hp(lt,ut,pt);ut.flags|=128}var xt=ut.memoizedState;if(xt!==null&&(xt.rendering=null,xt.tail=null,xt.lastEffect=null),Yr(vn,vn.current),At)break;return null;case 22:case 23:return ut.lanes=0,Dp(lt,ut,pt)}return xs(lt,ut,pt)}function Wm(lt,ut){switch(tu(ut),ut.tag){case 1:return En(ut.type)&&Ts(),lt=ut.flags,lt&65536?(ut.flags=lt&-65537|128,ut):null;case 3:return Zs(),dn(_n),dn(In),lu(),lt=ut.flags,lt&65536&&!(lt&128)?(ut.flags=lt&-65537|128,ut):null;case 5:return su(ut),null;case 13:if(dn(vn),lt=ut.memoizedState,lt!==null&&lt.dehydrated!==null){if(ut.alternate===null)throw Error($(340));Xs()}return lt=ut.flags,lt&65536?(ut.flags=lt&-65537|128,ut):null;case 19:return dn(vn),null;case 4:return Zs(),null;case 10:return Xl(ut.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var Jo=!1,Os=!1,jm=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function Zo(lt,ut){var pt=lt.ref;if(pt!==null)if(typeof pt=="function")try{pt(null)}catch(At){jn(lt,ut,At)}else pt.current=null}function Su(lt,ut,pt){try{pt()}catch(At){jn(lt,ut,At)}}var zp=!1;function Km(lt,ut){for(Pt(lt.containerInfo),Dr=ut;Dr!==null;)if(lt=Dr,ut=lt.child,(lt.subtreeFlags&1028)!==0&&ut!==null)ut.return=lt,Dr=ut;else for(;Dr!==null;){lt=Dr;try{var pt=lt.alternate;if(lt.flags&1024)switch(lt.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var At=pt.memoizedProps,xt=pt.memoizedState,It=lt.stateNode,Ut=It.getSnapshotBeforeUpdate(lt.elementType===lt.type?At:ls(lt.type,At),xt);It.__reactInternalSnapshotBeforeUpdate=Ut}break;case 3:ur&&nr(lt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(jt){jn(lt,lt.return,jt)}if(ut=lt.sibling,ut!==null){ut.return=lt.return,Dr=ut;break}Dr=lt.return}return pt=zp,zp=!1,pt}function Us(lt,ut,pt){var At=ut.updateQueue;if(At=At!==null?At.lastEffect:null,At!==null){var xt=At=At.next;do{if((xt.tag&lt)===lt){var It=xt.destroy;xt.destroy=void 0,It!==void 0&&Su(ut,pt,It)}xt=xt.next}while(xt!==At)}}function Eo(lt,ut){if(ut=ut.updateQueue,ut=ut!==null?ut.lastEffect:null,ut!==null){var pt=ut=ut.next;do{if((pt.tag&lt)===lt){var At=pt.create;pt.destroy=At()}pt=pt.next}while(pt!==ut)}}function xu(lt){var ut=lt.ref;if(ut!==null){var pt=lt.stateNode;switch(lt.tag){case 5:lt=Bt(pt);break;default:lt=pt}typeof ut=="function"?ut(lt):ut.current=lt}}function Qp(lt,ut,pt){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(Mo,ut)}catch{}switch(ut.tag){case 0:case 11:case 14:case 15:if(lt=ut.updateQueue,lt!==null&&(lt=lt.lastEffect,lt!==null)){var At=lt=lt.next;do{var xt=At,It=xt.destroy;xt=xt.tag,It!==void 0&&(xt&2||xt&4)&&Su(ut,pt,It),At=At.next}while(At!==lt)}break;case 1:if(Zo(ut,pt),lt=ut.stateNode,typeof lt.componentWillUnmount=="function")try{lt.props=ut.memoizedProps,lt.state=ut.memoizedState,lt.componentWillUnmount()}catch(Ut){jn(ut,pt,Ut)}break;case 5:Zo(ut,pt);break;case 4:ur?Yp(lt,ut,pt):kt&&kt&&(ut=ut.stateNode.containerInfo,pt=Vr(ut),sn(ut,pt))}}function Wp(lt,ut,pt){for(var At=ut;;)if(Qp(lt,At,pt),At.child===null||ur&&At.tag===4){if(At===ut)break;for(;At.sibling===null;){if(At.return===null||At.return===ut)return;At=At.return}At.sibling.return=At.return,At=At.sibling}else At.child.return=At,At=At.child}function jp(lt){var ut=lt.alternate;ut!==null&&(lt.alternate=null,jp(ut)),lt.child=null,lt.deletions=null,lt.sibling=null,lt.tag===5&&(ut=lt.stateNode,ut!==null&&Br(ut)),lt.stateNode=null,lt.return=null,lt.dependencies=null,lt.memoizedProps=null,lt.memoizedState=null,lt.pendingProps=null,lt.stateNode=null,lt.updateQueue=null}function Kp(lt){return lt.tag===5||lt.tag===3||lt.tag===4}function qp(lt){e:for(;;){for(;lt.sibling===null;){if(lt.return===null||Kp(lt.return))return null;lt=lt.return}for(lt.sibling.return=lt.return,lt=lt.sibling;lt.tag!==5&&lt.tag!==6&&lt.tag!==18;){if(lt.flags&2||lt.child===null||lt.tag===4)continue e;lt.child.return=lt,lt=lt.child}if(!(lt.flags&2))return lt.stateNode}}function Xp(lt){if(ur){e:{for(var ut=lt.return;ut!==null;){if(Kp(ut))break e;ut=ut.return}throw Error($(160))}var pt=ut;switch(pt.tag){case 5:ut=pt.stateNode,pt.flags&32&&(vr(ut),pt.flags&=-33),pt=qp(lt),_u(lt,pt,ut);break;case 3:case 4:ut=pt.stateNode.containerInfo,pt=qp(lt),Cu(lt,pt,ut);break;default:throw Error($(161))}}}function Cu(lt,ut,pt){var At=lt.tag;if(At===5||At===6)lt=lt.stateNode,ut?Vt(pt,lt,ut):Fr(pt,lt);else if(At!==4&&(lt=lt.child,lt!==null))for(Cu(lt,ut,pt),lt=lt.sibling;lt!==null;)Cu(lt,ut,pt),lt=lt.sibling}function _u(lt,ut,pt){var At=lt.tag;if(At===5||At===6)lt=lt.stateNode,ut?hr(pt,lt,ut):Ir(pt,lt);else if(At!==4&&(lt=lt.child,lt!==null))for(_u(lt,ut,pt),lt=lt.sibling;lt!==null;)_u(lt,ut,pt),lt=lt.sibling}function Yp(lt,ut,pt){for(var At=ut,xt=!1,It,Ut;;){if(!xt){xt=At.return;e:for(;;){if(xt===null)throw Error($(160));switch(It=xt.stateNode,xt.tag){case 5:Ut=!1;break e;case 3:It=It.containerInfo,Ut=!0;break e;case 4:It=It.containerInfo,Ut=!0;break e}xt=xt.return}xt=!0}if(At.tag===5||At.tag===6)Wp(lt,At,pt),Ut?Kt(It,At.stateNode):Ht(It,At.stateNode);else if(At.tag===18)Ut?Hr(It,At.stateNode):Nr(It,At.stateNode);else if(At.tag===4){if(At.child!==null){It=At.stateNode.containerInfo,Ut=!0,At.child.return=At,At=At.child;continue}}else if(Qp(lt,At,pt),At.child!==null){At.child.return=At,At=At.child;continue}if(At===ut)break;for(;At.sibling===null;){if(At.return===null||At.return===ut)return;At=At.return,At.tag===4&&(xt=!1)}At.sibling.return=At.return,At=At.sibling}}function bu(lt,ut){if(ur){switch(ut.tag){case 0:case 11:case 14:case 15:Us(3,ut,ut.return),Eo(3,ut),Us(5,ut,ut.return);return;case 1:return;case 5:var pt=ut.stateNode;if(pt!=null){var At=ut.memoizedProps;lt=lt!==null?lt.memoizedProps:At;var xt=ut.type,It=ut.updateQueue;ut.updateQueue=null,It!==null&&zt(pt,It,xt,lt,At,ut)}return;case 6:if(ut.stateNode===null)throw Error($(162));pt=ut.memoizedProps,Mr(ut.stateNode,lt!==null?lt.memoizedProps:pt,pt);return;case 3:Xt&&lt!==null&&lt.memoizedState.isDehydrated&&Zt(ut.stateNode.containerInfo);return;case 12:return;case 13:Al(ut);return;case 19:Al(ut);return;case 17:return}throw Error($(163))}switch(ut.tag){case 0:case 11:case 14:case 15:Us(3,ut,ut.return),Eo(3,ut),Us(5,ut,ut.return);return;case 12:return;case 13:Al(ut);return;case 19:Al(ut);return;case 3:Xt&&lt!==null&&lt.memoizedState.isDehydrated&&Zt(ut.stateNode.containerInfo);break;case 22:case 23:return}e:if(kt){switch(ut.tag){case 1:case 5:case 6:break e;case 3:case 4:ut=ut.stateNode,sn(ut.containerInfo,ut.pendingChildren);break e}throw Error($(163))}}function Al(lt){var ut=lt.updateQueue;if(ut!==null){lt.updateQueue=null;var pt=lt.stateNode;pt===null&&(pt=lt.stateNode=new jm),ut.forEach(function(At){var xt=n0.bind(null,lt,At);pt.has(At)||(pt.add(At),At.then(xt,xt))})}}function qm(lt,ut){for(Dr=ut;Dr!==null;){ut=Dr;var pt=ut.deletions;if(pt!==null)for(var At=0;At<pt.length;At++){var xt=pt[At];try{var It=lt;ur?Yp(It,xt,ut):Wp(It,xt,ut);var Ut=xt.alternate;Ut!==null&&(Ut.return=null),xt.return=null}catch($r){jn(xt,ut,$r)}}if(pt=ut.child,ut.subtreeFlags&12854&&pt!==null)pt.return=ut,Dr=pt;else for(;Dr!==null;){ut=Dr;try{var jt=ut.flags;if(jt&32&&ur&&vr(ut.stateNode),jt&512){var fr=ut.alternate;if(fr!==null){var Rr=fr.ref;Rr!==null&&(typeof Rr=="function"?Rr(null):Rr.current=null)}}if(jt&8192)switch(ut.tag){case 13:if(ut.memoizedState!==null){var kr=ut.alternate;(kr===null||kr.memoizedState===null)&&(Bu=wn())}break;case 22:var Zr=ut.memoizedState!==null,zr=ut.alternate,pn=zr!==null&&zr.memoizedState!==null;if(pt=ut,ur){e:if(At=pt,xt=Zr,It=null,ur)for(var Gr=At;;){if(Gr.tag===5){if(It===null){It=Gr;var On=Gr.stateNode;xt?wr(On):pr(Gr.stateNode,Gr.memoizedProps)}}else if(Gr.tag===6){if(It===null){var as=Gr.stateNode;xt?Gt(as):Wt(as,Gr.memoizedProps)}}else if((Gr.tag!==22&&Gr.tag!==23||Gr.memoizedState===null||Gr===At)&&Gr.child!==null){Gr.child.return=Gr,Gr=Gr.child;continue}if(Gr===At)break;for(;Gr.sibling===null;){if(Gr.return===null||Gr.return===At)break e;It===Gr&&(It=null),Gr=Gr.return}It===Gr&&(It=null),Gr.sibling.return=Gr.return,Gr=Gr.sibling}}if(Zr&&!pn&&pt.mode&1){Dr=pt;for(var tr=pt.child;tr!==null;){for(pt=Dr=tr;Dr!==null;){At=Dr;var qt=At.child;switch(At.tag){case 0:case 11:case 14:case 15:Us(4,At,At.return);break;case 1:Zo(At,At.return);var lr=At.stateNode;if(typeof lr.componentWillUnmount=="function"){var Lr=At.return;try{lr.props=At.memoizedProps,lr.state=At.memoizedState,lr.componentWillUnmount()}catch($r){jn(At,Lr,$r)}}break;case 5:Zo(At,At.return);break;case 22:if(At.memoizedState!==null){em(pt);continue}}qt!==null?(qt.return=At,Dr=qt):em(pt)}tr=tr.sibling}}}switch(jt&4102){case 2:Xp(ut),ut.flags&=-3;break;case 6:Xp(ut),ut.flags&=-3,bu(ut.alternate,ut);break;case 4096:ut.flags&=-4097;break;case 4100:ut.flags&=-4097,bu(ut.alternate,ut);break;case 4:bu(ut.alternate,ut)}}catch($r){jn(ut,ut.return,$r)}if(pt=ut.sibling,pt!==null){pt.return=ut.return,Dr=pt;break}Dr=ut.return}}}function Xm(lt,ut,pt){Dr=lt,Jp(lt)}function Jp(lt,ut,pt){for(var At=(lt.mode&1)!==0;Dr!==null;){var xt=Dr,It=xt.child;if(xt.tag===22&&At){var Ut=xt.memoizedState!==null||Jo;if(!Ut){var jt=xt.alternate,fr=jt!==null&&jt.memoizedState!==null||Os;jt=Jo;var Rr=Os;if(Jo=Ut,(Os=fr)&&!Rr)for(Dr=xt;Dr!==null;)Ut=Dr,fr=Ut.child,Ut.tag===22&&Ut.memoizedState!==null?tm(xt):fr!==null?(fr.return=Ut,Dr=fr):tm(xt);for(;It!==null;)Dr=It,Jp(It),It=It.sibling;Dr=xt,Jo=jt,Os=Rr}Zp(lt)}else xt.subtreeFlags&8772&&It!==null?(It.return=xt,Dr=It):Zp(lt)}}function Zp(lt){for(;Dr!==null;){var ut=Dr;if(ut.flags&8772){var pt=ut.alternate;try{if(ut.flags&8772)switch(ut.tag){case 0:case 11:case 15:Os||Eo(5,ut);break;case 1:var At=ut.stateNode;if(ut.flags&4&&!Os)if(pt===null)At.componentDidMount();else{var xt=ut.elementType===ut.type?pt.memoizedProps:ls(ut.type,pt.memoizedProps);At.componentDidUpdate(xt,pt.memoizedState,At.__reactInternalSnapshotBeforeUpdate)}var It=ut.updateQueue;It!==null&&Xu(ut,It,At);break;case 3:var Ut=ut.updateQueue;if(Ut!==null){if(pt=null,ut.child!==null)switch(ut.child.tag){case 5:pt=Bt(ut.child.stateNode);break;case 1:pt=ut.child.stateNode}Xu(ut,Ut,pt)}break;case 5:var jt=ut.stateNode;pt===null&&ut.flags&4&&cr(jt,ut.type,ut.memoizedProps,ut);break;case 6:break;case 4:break;case 12:break;case 13:if(Xt&&ut.memoizedState===null){var fr=ut.alternate;if(fr!==null){var Rr=fr.memoizedState;if(Rr!==null){var kr=Rr.dehydrated;kr!==null&&gr(kr)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error($(163))}Os||ut.flags&512&&xu(ut)}catch(Zr){jn(ut,ut.return,Zr)}}if(ut===lt){Dr=null;break}if(pt=ut.sibling,pt!==null){pt.return=ut.return,Dr=pt;break}Dr=ut.return}}function em(lt){for(;Dr!==null;){var ut=Dr;if(ut===lt){Dr=null;break}var pt=ut.sibling;if(pt!==null){pt.return=ut.return,Dr=pt;break}Dr=ut.return}}function tm(lt){for(;Dr!==null;){var ut=Dr;try{switch(ut.tag){case 0:case 11:case 15:var pt=ut.return;try{Eo(4,ut)}catch(fr){jn(ut,pt,fr)}break;case 1:var At=ut.stateNode;if(typeof At.componentDidMount=="function"){var xt=ut.return;try{At.componentDidMount()}catch(fr){jn(ut,xt,fr)}}var It=ut.return;try{xu(ut)}catch(fr){jn(ut,It,fr)}break;case 5:var Ut=ut.return;try{xu(ut)}catch(fr){jn(ut,Ut,fr)}}}catch(fr){jn(ut,ut.return,fr)}if(ut===lt){Dr=null;break}var jt=ut.sibling;if(jt!==null){jt.return=ut.return,Dr=jt;break}Dr=ut.return}}var yl=0,El=1,Sl=2,xl=3,Cl=4;if(typeof Symbol=="function"&&Symbol.for){var So=Symbol.for;yl=So("selector.component"),El=So("selector.has_pseudo_class"),Sl=So("selector.role"),xl=So("selector.test_id"),Cl=So("selector.text")}function Tu(lt){var ut=ar(lt);if(ut!=null){if(typeof ut.memoizedProps["data-testname"]!="string")throw Error($(364));return ut}if(lt=Or(lt),lt===null)throw Error($(362));return lt.stateNode.current}function Iu(lt,ut){switch(ut.$$typeof){case yl:if(lt.type===ut.value)return!0;break;case El:e:{ut=ut.value,lt=[lt,0];for(var pt=0;pt<lt.length;){var At=lt[pt++],xt=lt[pt++],It=ut[xt];if(At.tag!==5||!Ft(At)){for(;It!=null&&Iu(At,It);)xt++,It=ut[xt];if(xt===ut.length){ut=!0;break e}else for(At=At.child;At!==null;)lt.push(At,xt),At=At.sibling}}ut=!1}return ut;case Sl:if(lt.tag===5&&ir(lt.stateNode,ut.value))return!0;break;case Cl:if((lt.tag===5||lt.tag===6)&&(lt=Ot(lt),lt!==null&&0<=lt.indexOf(ut.value)))return!0;break;case xl:if(lt.tag===5&&(lt=lt.memoizedProps["data-testname"],typeof lt=="string"&&lt.toLowerCase()===ut.value.toLowerCase()))return!0;break;default:throw Error($(365))}return!1}function Mu(lt){switch(lt.$$typeof){case yl:return"<"+(vt(lt.value)||"Unknown")+">";case El:return":has("+(Mu(lt)||"")+")";case Sl:return'[role="'+lt.value+'"]';case Cl:return'"'+lt.value+'"';case xl:return'[data-testname="'+lt.value+'"]';default:throw Error($(365))}}function rm(lt,ut){var pt=[];lt=[lt,0];for(var At=0;At<lt.length;){var xt=lt[At++],It=lt[At++],Ut=ut[It];if(xt.tag!==5||!Ft(xt)){for(;Ut!=null&&Iu(xt,Ut);)It++,Ut=ut[It];if(It===ut.length)pt.push(xt);else for(xt=xt.child;xt!==null;)lt.push(xt,It),xt=xt.sibling}}return pt}function wu(lt,ut){if(!Pr)throw Error($(363));lt=Tu(lt),lt=rm(lt,ut),ut=[],lt=Array.from(lt);for(var pt=0;pt<lt.length;){var At=lt[pt++];if(At.tag===5)Ft(At)||ut.push(At.stateNode);else for(At=At.child;At!==null;)lt.push(At),At=At.sibling}return ut}var Ym=Math.ceil,_l=j.ReactCurrentDispatcher,Ru=j.ReactCurrentOwner,Cn=j.ReactCurrentBatchConfig,nn=0,bn=null,Tn=null,Bn=0,na=0,to=Jr(0),Mn=0,xo=null,ro=0,Tl=0,Pu=0,Co=null,Qn=null,Bu=0,Fu=1/0;function no(){Fu=wn()+500}var Il=!1,Du=null,ws=null,Ml=!1,Rs=null,Rl=0,_o=0,Lu=null,Pl=-1,Bl=0;function Gn(){return nn&6?wn():Pl!==-1?Pl:Pl=wn()}function Ps(lt){return lt.mode&1?nn&2&&Bn!==0?Bn&-Bn:Fm.transition!==null?(Bl===0&&(lt=bo,bo<<=1,!(bo&4194240)&&(bo=64),Bl=lt),Bl):(lt=ln,lt!==0?lt:mr()):1}function rs(lt,ut,pt){if(50<_o)throw _o=0,Lu=null,Error($(185));var At=Fl(lt,ut);return At===null?null:(so(At,ut,pt),(!(nn&2)||At!==bn)&&(At===bn&&(!(nn&2)&&(Tl|=ut),Mn===4&&Bs(At,Bn)),Wn(At,pt),ut===1&&nn===0&&!(lt.mode&1)&&(no(),wo&&ds())),At)}function Fl(lt,ut){lt.lanes|=ut;var pt=lt.alternate;for(pt!==null&&(pt.lanes|=ut),pt=lt,lt=lt.return;lt!==null;)lt.childLanes|=ut,pt=lt.alternate,pt!==null&&(pt.childLanes|=ut),pt=lt,lt=lt.return;return pt.tag===3?pt.stateNode:null}function Wn(lt,ut){var pt=lt.callbackNode;_m(lt,ut);var At=Io(lt,lt===bn?Bn:0);if(At===0)pt!==null&&Qu(pt),lt.callbackNode=null,lt.callbackPriority=0;else if(ut=At&-At,lt.callbackPriority!==ut){if(pt!=null&&Qu(pt),ut===1)lt.tag===0?Bm(im.bind(null,lt)):Wu(im.bind(null,lt)),_r?br(function(){nn===0&&ds()}):Vl(Hl,ds),pt=null;else{switch(zu(At)){case 1:pt=Hl;break;case 4:pt=Mm;break;case 16:pt=zl;break;case 536870912:pt=wm;break;default:pt=zl}pt=fm(pt,nm.bind(null,lt))}lt.callbackPriority=ut,lt.callbackNode=pt}}function nm(lt,ut){if(Pl=-1,Bl=0,nn&6)throw Error($(327));var pt=lt.callbackNode;if(Vs()&&lt.callbackNode!==pt)return null;var At=Io(lt,lt===bn?Bn:0);if(At===0)return null;if(At&30||At&lt.expiredLanes||ut)ut=Dl(lt,At);else{ut=At;var xt=nn;nn|=2;var It=om();(bn!==lt||Bn!==ut)&&(no(),$s(lt,ut));do try{_g();break}catch(jt){sm(lt,jt)}while(1);Kl(),_l.current=It,nn=xt,Tn!==null?ut=0:(bn=null,Bn=0,ut=Mn)}if(ut!==0){if(ut===2&&(xt=Ul(lt),xt!==0&&(At=xt,ut=Nu(lt,xt))),ut===1)throw pt=xo,$s(lt,0),Bs(lt,At),Wn(lt,wn()),pt;if(ut===6)Bs(lt,At);else{if(xt=lt.current.alternate,!(At&30)&&!Jm(xt)&&(ut=Dl(lt,At),ut===2&&(It=Ul(lt),It!==0&&(At=It,ut=Nu(lt,It))),ut===1))throw pt=xo,$s(lt,0),Bs(lt,At),Wn(lt,wn()),pt;switch(lt.finishedWork=xt,lt.finishedLanes=At,ut){case 0:case 1:throw Error($(345));case 2:Gs(lt,Qn);break;case 3:if(Bs(lt,At),(At&130023424)===At&&(ut=Bu+500-wn(),10<ut)){if(Io(lt,0)!==0)break;if(xt=lt.suspendedLanes,(xt&At)!==At){Gn(),lt.pingedLanes|=lt.suspendedLanes&xt;break}lt.timeoutHandle=sr(Gs.bind(null,lt,Qn),ut);break}Gs(lt,Qn);break;case 4:if(Bs(lt,At),(At&4194240)===At)break;for(ut=lt.eventTimes,xt=-1;0<At;){var Ut=31-os(At);It=1<<Ut,Ut=ut[Ut],Ut>xt&&(xt=Ut),At&=~It}if(At=xt,At=wn()-At,At=(120>At?120:480>At?480:1080>At?1080:1920>At?1920:3e3>At?3e3:4320>At?4320:1960*Ym(At/1960))-At,10<At){lt.timeoutHandle=sr(Gs.bind(null,lt,Qn),At);break}Gs(lt,Qn);break;case 5:Gs(lt,Qn);break;default:throw Error($(329))}}}return Wn(lt,wn()),lt.callbackNode===pt?nm.bind(null,lt):null}function Nu(lt,ut){var pt=Co;return lt.current.memoizedState.isDehydrated&&($s(lt,ut).flags|=256),lt=Dl(lt,ut),lt!==2&&(ut=Qn,Qn=pt,ut!==null&&ku(ut)),lt}function ku(lt){Qn===null?Qn=lt:Qn.push.apply(Qn,lt)}function Jm(lt){for(var ut=lt;;){if(ut.flags&16384){var pt=ut.updateQueue;if(pt!==null&&(pt=pt.stores,pt!==null))for(var At=0;At<pt.length;At++){var xt=pt[At],It=xt.getSnapshot;xt=xt.value;try{if(!hs(It(),xt))return!1}catch{return!1}}}if(pt=ut.child,ut.subtreeFlags&16384&&pt!==null)pt.return=ut,ut=pt;else{if(ut===lt)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===lt)return!0;ut=ut.return}ut.sibling.return=ut.return,ut=ut.sibling}}return!0}function Bs(lt,ut){for(ut&=~Pu,ut&=~Tl,lt.suspendedLanes|=ut,lt.pingedLanes&=~ut,lt=lt.expirationTimes;0<ut;){var pt=31-os(ut),At=1<<pt;lt[pt]=-1,ut&=~At}}function im(lt){if(nn&6)throw Error($(327));Vs();var ut=Io(lt,0);if(!(ut&1))return Wn(lt,wn()),null;var pt=Dl(lt,ut);if(lt.tag!==0&&pt===2){var At=Ul(lt);At!==0&&(ut=At,pt=Nu(lt,At))}if(pt===1)throw pt=xo,$s(lt,0),Bs(lt,ut),Wn(lt,wn()),pt;if(pt===6)throw Error($(345));return lt.finishedWork=lt.current.alternate,lt.finishedLanes=ut,Gs(lt,Qn),Wn(lt,wn()),null}function am(lt){Rs!==null&&Rs.tag===0&&!(nn&6)&&Vs();var ut=nn;nn|=1;var pt=Cn.transition,At=ln;try{if(Cn.transition=null,ln=1,lt)return lt()}finally{ln=At,Cn.transition=pt,nn=ut,!(nn&6)&&ds()}}function Ou(){na=to.current,dn(to)}function $s(lt,ut){lt.finishedWork=null,lt.finishedLanes=0;var pt=lt.timeoutHandle;if(pt!==Er&&(lt.timeoutHandle=Er,Ar(pt)),Tn!==null)for(pt=Tn.return;pt!==null;){var At=pt;switch(tu(At),At.tag){case 1:At=At.type.childContextTypes,At!=null&&Ts();break;case 3:Zs(),dn(_n),dn(In),lu();break;case 5:su(At);break;case 4:Zs();break;case 13:dn(vn);break;case 19:dn(vn);break;case 10:Xl(At.type._context);break;case 22:case 23:Ou()}pt=pt.return}if(bn=lt,Tn=lt=Fs(lt.current,null),Bn=na=ut,Mn=0,xo=null,Pu=Tl=ro=0,Qn=Co=null,fs!==null){for(ut=0;ut<fs.length;ut++)if(pt=fs[ut],At=pt.interleaved,At!==null){pt.interleaved=null;var xt=At.next,It=pt.pending;if(It!==null){var Ut=It.next;It.next=xt,At.next=Ut}pt.pending=At}fs=null}return lt}function sm(lt,ut){do{var pt=Tn;try{if(Kl(),$o.current=Wo,Go){for(var At=Sn.memoizedState;At!==null;){var xt=At.queue;xt!==null&&(xt.pending=null),At=At.next}Go=!1}if(eo=0,Rn=Ln=Sn=null,fo=!1,po=0,Ru.current=null,pt===null||pt.return===null){Mn=1,xo=ut,Tn=null;break}e:{var It=lt,Ut=pt.return,jt=pt,fr=ut;if(ut=Bn,jt.flags|=32768,fr!==null&&typeof fr=="object"&&typeof fr.then=="function"){var Rr=fr,kr=jt,Zr=kr.tag;if(!(kr.mode&1)&&(Zr===0||Zr===11||Zr===15)){var zr=kr.alternate;zr?(kr.updateQueue=zr.updateQueue,kr.memoizedState=zr.memoizedState,kr.lanes=zr.lanes):(kr.updateQueue=null,kr.memoizedState=null)}var pn=Ip(Ut);if(pn!==null){pn.flags&=-257,Mp(pn,Ut,jt,It,ut),pn.mode&1&&Tp(It,Rr,ut),ut=pn,fr=Rr;var Gr=ut.updateQueue;if(Gr===null){var On=new Set;On.add(fr),ut.updateQueue=On}else Gr.add(fr);break e}else{if(!(ut&1)){Tp(It,Rr,ut),Uu();break e}fr=Error($(426))}}else if(gn&&jt.mode&1){var as=Ip(Ut);if(as!==null){!(as.flags&65536)&&(as.flags|=256),Mp(as,Ut,jt,It,ut),iu(fr);break e}}It=fr,Mn!==4&&(Mn=2),Co===null?Co=[It]:Co.push(It),fr=mu(fr,jt),jt=Ut;do{switch(jt.tag){case 3:jt.flags|=65536,ut&=-ut,jt.lanes|=ut;var tr=_p(jt,fr,ut);qu(jt,tr);break e;case 1:It=fr;var qt=jt.type,lr=jt.stateNode;if(!(jt.flags&128)&&(typeof qt.getDerivedStateFromError=="function"||lr!==null&&typeof lr.componentDidCatch=="function"&&(ws===null||!ws.has(lr)))){jt.flags|=65536,ut&=-ut,jt.lanes|=ut;var Lr=bp(jt,It,ut);qu(jt,Lr);break e}}jt=jt.return}while(jt!==null)}cm(pt)}catch($r){ut=$r,Tn===pt&&pt!==null&&(Tn=pt=pt.return);continue}break}while(1)}function om(){var lt=_l.current;return _l.current=Wo,lt===null?Wo:lt}function Uu(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),bn===null||!(ro&268435455)&&!(Tl&268435455)||Bs(bn,Bn)}function Dl(lt,ut){var pt=nn;nn|=2;var At=om();bn===lt&&Bn===ut||$s(lt,ut);do try{Zm();break}catch(xt){sm(lt,xt)}while(1);if(Kl(),nn=pt,_l.current=At,Tn!==null)throw Error($(261));return bn=null,Bn=0,Mn}function Zm(){for(;Tn!==null;)lm(Tn)}function _g(){for(;Tn!==null&&!Tm();)lm(Tn)}function lm(lt){var ut=dm(lt.alternate,lt,na);lt.memoizedProps=lt.pendingProps,ut===null?cm(lt):Tn=ut,Ru.current=null}function cm(lt){var ut=lt;do{var pt=ut.alternate;if(lt=ut.return,ut.flags&32768){if(pt=Wm(pt,ut),pt!==null){pt.flags&=32767,Tn=pt;return}if(lt!==null)lt.flags|=32768,lt.subtreeFlags=0,lt.deletions=null;else{Mn=6,Tn=null;return}}else if(pt=Hm(pt,ut,na),pt!==null){Tn=pt;return}if(ut=ut.sibling,ut!==null){Tn=ut;return}Tn=ut=lt}while(ut!==null);Mn===0&&(Mn=5)}function Gs(lt,ut){var pt=ln,At=Cn.transition;try{Cn.transition=null,ln=1,e0(lt,ut,pt)}finally{Cn.transition=At,ln=pt}return null}function e0(lt,ut,pt){do Vs();while(Rs!==null);if(nn&6)throw Error($(327));var At=lt.finishedWork,xt=lt.finishedLanes;if(At===null)return null;if(lt.finishedWork=null,lt.finishedLanes=0,At===lt.current)throw Error($(177));lt.callbackNode=null,lt.callbackPriority=0;var It=At.lanes|At.childLanes;if(bm(lt,It),lt===bn&&(Tn=bn=null,Bn=0),!(At.subtreeFlags&2064)&&!(At.flags&2064)||Ml||(Ml=!0,fm(zl,function(){return Vs(),null})),It=(At.flags&15990)!==0,At.subtreeFlags&15990||It){It=Cn.transition,Cn.transition=null;var Ut=ln;ln=1;var jt=nn;nn|=4,Ru.current=null,Km(lt,At),qm(lt,At),Dt(lt.containerInfo),lt.current=At,Xm(At),Im(),nn=jt,ln=Ut,Cn.transition=It}else lt.current=At;if(Ml&&(Ml=!1,Rs=lt,Rl=xt),It=lt.pendingLanes,It===0&&(ws=null),Rm(At.stateNode),Wn(lt,wn()),ut!==null)for(pt=lt.onRecoverableError,At=0;At<ut.length;At++)pt(ut[At]);if(Il)throw Il=!1,lt=Du,Du=null,lt;return Rl&1&&lt.tag!==0&&Vs(),It=lt.pendingLanes,It&1?lt===Lu?_o++:(_o=0,Lu=lt):_o=0,ds(),null}function Vs(){if(Rs!==null){var lt=zu(Rl),ut=Cn.transition,pt=ln;try{if(Cn.transition=null,ln=16>lt?16:lt,Rs===null)var At=!1;else{if(lt=Rs,Rs=null,Rl=0,nn&6)throw Error($(331));var xt=nn;for(nn|=4,Dr=lt.current;Dr!==null;){var It=Dr,Ut=It.child;if(Dr.flags&16){var jt=It.deletions;if(jt!==null){for(var fr=0;fr<jt.length;fr++){var Rr=jt[fr];for(Dr=Rr;Dr!==null;){var kr=Dr;switch(kr.tag){case 0:case 11:case 15:Us(8,kr,It)}var Zr=kr.child;if(Zr!==null)Zr.return=kr,Dr=Zr;else for(;Dr!==null;){kr=Dr;var zr=kr.sibling,pn=kr.return;if(jp(kr),kr===Rr){Dr=null;break}if(zr!==null){zr.return=pn,Dr=zr;break}Dr=pn}}}var Gr=It.alternate;if(Gr!==null){var On=Gr.child;if(On!==null){Gr.child=null;do{var as=On.sibling;On.sibling=null,On=as}while(On!==null)}}Dr=It}}if(It.subtreeFlags&2064&&Ut!==null)Ut.return=It,Dr=Ut;else e:for(;Dr!==null;){if(It=Dr,It.flags&2048)switch(It.tag){case 0:case 11:case 15:Us(9,It,It.return)}var tr=It.sibling;if(tr!==null){tr.return=It.return,Dr=tr;break e}Dr=It.return}}var qt=lt.current;for(Dr=qt;Dr!==null;){Ut=Dr;var lr=Ut.child;if(Ut.subtreeFlags&2064&&lr!==null)lr.return=Ut,Dr=lr;else e:for(Ut=qt;Dr!==null;){if(jt=Dr,jt.flags&2048)try{switch(jt.tag){case 0:case 11:case 15:Eo(9,jt)}}catch($r){jn(jt,jt.return,$r)}if(jt===Ut){Dr=null;break e}var Lr=jt.sibling;if(Lr!==null){Lr.return=jt.return,Dr=Lr;break e}Dr=jt.return}}if(nn=xt,ds(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(Mo,lt)}catch{}At=!0}return At}finally{ln=pt,Cn.transition=ut}}return!1}function um(lt,ut,pt){ut=mu(pt,ut),ut=_p(lt,ut,1),Ms(lt,ut),ut=Gn(),lt=Fl(lt,1),lt!==null&&(so(lt,1,ut),Wn(lt,ut))}function jn(lt,ut,pt){if(lt.tag===3)um(lt,lt,pt);else for(;ut!==null;){if(ut.tag===3){um(ut,lt,pt);break}else if(ut.tag===1){var At=ut.stateNode;if(typeof ut.type.getDerivedStateFromError=="function"||typeof At.componentDidCatch=="function"&&(ws===null||!ws.has(At))){lt=mu(pt,lt),lt=bp(ut,lt,1),Ms(ut,lt),lt=Gn(),ut=Fl(ut,1),ut!==null&&(so(ut,1,lt),Wn(ut,lt));break}}ut=ut.return}}function t0(lt,ut,pt){var At=lt.pingCache;At!==null&&At.delete(ut),ut=Gn(),lt.pingedLanes|=lt.suspendedLanes&pt,bn===lt&&(Bn&pt)===pt&&(Mn===4||Mn===3&&(Bn&130023424)===Bn&&500>wn()-Bu?$s(lt,0):Pu|=pt),Wn(lt,ut)}function hm(lt,ut){ut===0&&(lt.mode&1?(ut=To,To<<=1,!(To&130023424)&&(To=4194304)):ut=1);var pt=Gn();lt=Fl(lt,ut),lt!==null&&(so(lt,ut,pt),Wn(lt,pt))}function r0(lt){var ut=lt.memoizedState,pt=0;ut!==null&&(pt=ut.retryLane),hm(lt,pt)}function n0(lt,ut){var pt=0;switch(lt.tag){case 13:var At=lt.stateNode,xt=lt.memoizedState;xt!==null&&(pt=xt.retryLane);break;case 19:At=lt.stateNode;break;default:throw Error($(314))}At!==null&&At.delete(ut),hm(lt,pt)}var dm;dm=function(lt,ut,pt){if(lt!==null)if(lt.memoizedProps!==ut.pendingProps||_n.current)Zn=!0;else{if(!(lt.lanes&pt)&&!(ut.flags&128))return Zn=!1,Qm(lt,ut,pt);Zn=!!(lt.flags&131072)}else Zn=!1,gn&&ut.flags&1048576&&_d(ut,ko,ut.index);switch(ut.lanes=0,ut.tag){case 2:var At=ut.type;lt!==null&&(lt.alternate=null,ut.alternate=null,ut.flags|=2),lt=ut.pendingProps;var xt=yn(ut,In.current);js(ut,pt),xt=uu(null,ut,At,lt,xt,pt);var It=hu();return ut.flags|=1,typeof xt=="object"&&xt!==null&&typeof xt.render=="function"&&xt.$$typeof===void 0?(ut.tag=1,ut.memoizedState=null,ut.updateQueue=null,En(At)?(It=!0,Qs(ut)):It=!1,ut.memoizedState=xt.state!==null&&xt.state!==void 0?xt.state:null,Jl(ut),xt.updater=Lo,ut.stateNode=xt,xt._reactInternals=ut,_c(ut,At,lt,pt),ut=vu(null,ut,At,!0,It,pt)):(ut.tag=0,gn&&It&&eu(ut),$n(null,ut,xt,pt),ut=ut.child),ut;case 16:At=ut.elementType;e:{switch(lt!==null&&(lt.alternate=null,ut.alternate=null,ut.flags|=2),lt=ut.pendingProps,xt=At._init,At=xt(At._payload),ut.type=At,xt=ut.tag=a0(At),lt=ls(At,lt),xt){case 0:ut=Au(null,ut,At,lt,pt);break e;case 1:ut=Np(null,ut,At,lt,pt);break e;case 11:ut=Pp(null,ut,At,lt,pt);break e;case 14:ut=Bp(null,ut,At,ls(At.type,lt),pt);break e}throw Error($(306,At,""))}return ut;case 0:return At=ut.type,xt=ut.pendingProps,xt=ut.elementType===At?xt:ls(At,xt),Au(lt,ut,At,xt,pt);case 1:return At=ut.type,xt=ut.pendingProps,xt=ut.elementType===At?xt:ls(At,xt),Np(lt,ut,At,xt,pt);case 3:e:{if(kp(ut),lt===null)throw Error($(387));At=ut.pendingProps,It=ut.memoizedState,xt=It.element,Ku(lt,ut),Do(ut,At,null,pt);var Ut=ut.memoizedState;if(At=Ut.element,Xt&&It.isDehydrated)if(It={element:At,isDehydrated:!1,cache:Ut.cache,transitions:Ut.transitions},ut.updateQueue.baseState=It,ut.memoizedState=It,ut.flags&256){xt=Error($(423)),ut=Op(lt,ut,At,pt,xt);break e}else if(At!==xt){xt=Error($(424)),ut=Op(lt,ut,At,pt,xt);break e}else for(Xt&&(Jn=on(ut.stateNode.containerInfo),Yn=ut,gn=!0,cs=null,oo=!1),pt=ip(ut,null,At,pt),ut.child=pt;pt;)pt.flags=pt.flags&-3|4096,pt=pt.sibling;else{if(Xs(),At===xt){ut=xs(lt,ut,pt);break e}$n(lt,ut,At,pt)}ut=ut.child}return ut;case 5:return ap(ut),lt===null&&nu(ut),At=ut.type,xt=ut.pendingProps,It=lt!==null?lt.memoizedProps:null,Ut=xt.children,or(At,xt)?Ut=null:It!==null&&or(At,It)&&(ut.flags|=32),Lp(lt,ut),$n(lt,ut,Ut,pt),ut.child;case 6:return lt===null&&nu(ut),null;case 13:return Up(lt,ut,pt);case 4:return au(ut,ut.stateNode.containerInfo),At=ut.pendingProps,lt===null?ut.child=Ys(ut,null,At,pt):$n(lt,ut,At,pt),ut.child;case 11:return At=ut.type,xt=ut.pendingProps,xt=ut.elementType===At?xt:ls(At,xt),Pp(lt,ut,At,xt,pt);case 7:return $n(lt,ut,ut.pendingProps,pt),ut.child;case 8:return $n(lt,ut,ut.pendingProps.children,pt),ut.child;case 12:return $n(lt,ut,ut.pendingProps.children,pt),ut.child;case 10:e:{if(At=ut.type._context,xt=ut.pendingProps,It=ut.memoizedProps,Ut=xt.value,ju(ut,At,Ut),It!==null)if(hs(It.value,Ut)){if(It.children===xt.children&&!_n.current){ut=xs(lt,ut,pt);break e}}else for(It=ut.child,It!==null&&(It.return=ut);It!==null;){var jt=It.dependencies;if(jt!==null){Ut=It.child;for(var fr=jt.firstContext;fr!==null;){if(fr.context===At){if(It.tag===1){fr=vs(-1,pt&-pt),fr.tag=2;var Rr=It.updateQueue;if(Rr!==null){Rr=Rr.shared;var kr=Rr.pending;kr===null?fr.next=fr:(fr.next=kr.next,kr.next=fr),Rr.pending=fr}}It.lanes|=pt,fr=It.alternate,fr!==null&&(fr.lanes|=pt),Yl(It.return,pt,ut),jt.lanes|=pt;break}fr=fr.next}}else if(It.tag===10)Ut=It.type===ut.type?null:It.child;else if(It.tag===18){if(Ut=It.return,Ut===null)throw Error($(341));Ut.lanes|=pt,jt=Ut.alternate,jt!==null&&(jt.lanes|=pt),Yl(Ut,pt,ut),Ut=It.sibling}else Ut=It.child;if(Ut!==null)Ut.return=It;else for(Ut=It;Ut!==null;){if(Ut===ut){Ut=null;break}if(It=Ut.sibling,It!==null){It.return=Ut.return,Ut=It;break}Ut=Ut.return}It=Ut}$n(lt,ut,xt.children,pt),ut=ut.child}return ut;case 9:return xt=ut.type,At=ut.pendingProps.children,js(ut,pt),xt=xa(xt),At=At(xt),ut.flags|=1,$n(lt,ut,At,pt),ut.child;case 14:return At=ut.type,xt=ls(At,ut.pendingProps),xt=ls(At.type,xt),Bp(lt,ut,At,xt,pt);case 15:return Fp(lt,ut,ut.type,ut.pendingProps,pt);case 17:return At=ut.type,xt=ut.pendingProps,xt=ut.elementType===At?xt:ls(At,xt),lt!==null&&(lt.alternate=null,ut.alternate=null,ut.flags|=2),ut.tag=1,En(At)?(lt=!0,Qs(ut)):lt=!1,js(ut,pt),Zu(ut,At,xt),_c(ut,At,xt,pt),vu(null,ut,At,!0,lt,pt);case 19:return Hp(lt,ut,pt);case 22:return Dp(lt,ut,pt)}throw Error($(156,ut.tag))};function fm(lt,ut){return Vl(lt,ut)}function i0(lt,ut,pt,At){this.tag=lt,this.key=pt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ut,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=At,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(lt,ut,pt,At){return new i0(lt,ut,pt,At)}function $u(lt){return lt=lt.prototype,!(!lt||!lt.isReactComponent)}function a0(lt){if(typeof lt=="function")return $u(lt)?1:0;if(lt!=null){if(lt=lt.$$typeof,lt===ct)return 11;if(lt===ht)return 14}return 2}function Fs(lt,ut){var pt=lt.alternate;return pt===null?(pt=ns(lt.tag,ut,lt.key,lt.mode),pt.elementType=lt.elementType,pt.type=lt.type,pt.stateNode=lt.stateNode,pt.alternate=lt,lt.alternate=pt):(pt.pendingProps=ut,pt.type=lt.type,pt.flags=0,pt.subtreeFlags=0,pt.deletions=null),pt.flags=lt.flags&14680064,pt.childLanes=lt.childLanes,pt.lanes=lt.lanes,pt.child=lt.child,pt.memoizedProps=lt.memoizedProps,pt.memoizedState=lt.memoizedState,pt.updateQueue=lt.updateQueue,ut=lt.dependencies,pt.dependencies=ut===null?null:{lanes:ut.lanes,firstContext:ut.firstContext},pt.sibling=lt.sibling,pt.index=lt.index,pt.ref=lt.ref,pt}function Ll(lt,ut,pt,At,xt,It){var Ut=2;if(At=lt,typeof lt=="function")$u(lt)&&(Ut=1);else if(typeof lt=="string")Ut=5;else e:switch(lt){case tt:return Hs(pt.children,xt,It,ut);case rt:Ut=8,xt|=8;break;case nt:return lt=ns(12,pt,ut,xt|2),lt.elementType=nt,lt.lanes=It,lt;case st:return lt=ns(13,pt,ut,xt),lt.elementType=st,lt.lanes=It,lt;case ot:return lt=ns(19,pt,ut,xt),lt.elementType=ot,lt.lanes=It,lt;case ft:return Nl(pt,xt,It,ut);default:if(typeof lt=="object"&&lt!==null)switch(lt.$$typeof){case it:Ut=10;break e;case at:Ut=9;break e;case ct:Ut=11;break e;case ht:Ut=14;break e;case dt:Ut=16,At=null;break e}throw Error($(130,lt==null?lt:typeof lt,""))}return ut=ns(Ut,pt,ut,xt),ut.elementType=lt,ut.type=At,ut.lanes=It,ut}function Hs(lt,ut,pt,At){return lt=ns(7,lt,At,ut),lt.lanes=pt,lt}function Nl(lt,ut,pt,At){return lt=ns(22,lt,At,ut),lt.elementType=ft,lt.lanes=pt,lt.stateNode={},lt}function Gu(lt,ut,pt){return lt=ns(6,lt,null,ut),lt.lanes=pt,lt}function Vu(lt,ut,pt){return ut=ns(4,lt.children!==null?lt.children:[],lt.key,ut),ut.lanes=pt,ut.stateNode={containerInfo:lt.containerInfo,pendingChildren:null,implementation:lt.implementation},ut}function s0(lt,ut,pt,At,xt){this.tag=ut,this.containerInfo=lt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Er,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=At,this.onRecoverableError=xt,Xt&&(this.mutableSourceEagerHydrationData=null)}function pm(lt,ut,pt,At,xt,It,Ut,jt,fr){return lt=new s0(lt,ut,pt,jt,fr),ut===1?(ut=1,It===!0&&(ut|=8)):ut=0,It=ns(3,null,null,ut),lt.current=It,It.stateNode=lt,It.memoizedState={element:At,isDehydrated:pt,cache:null,transitions:null},Jl(It),lt}function mm(lt){if(!lt)return Fn;lt=lt._reactInternals;e:{if(Et(lt)!==lt||lt.tag!==1)throw Error($(170));var ut=lt;do{switch(ut.tag){case 3:ut=ut.stateNode.context;break e;case 1:if(En(ut.type)){ut=ut.stateNode.__reactInternalMemoizedMergedChildContext;break e}}ut=ut.return}while(ut!==null);throw Error($(171))}if(lt.tag===1){var pt=lt.type;if(En(pt))return zs(lt,pt,ut)}return ut}function gm(lt){var ut=lt._reactInternals;if(ut===void 0)throw typeof lt.render=="function"?Error($(188)):(lt=Object.keys(lt).join(","),Error($(268,lt)));return lt=wt(ut),lt===null?null:lt.stateNode}function Am(lt,ut){if(lt=lt.memoizedState,lt!==null&&lt.dehydrated!==null){var pt=lt.retryLane;lt.retryLane=pt!==0&&pt<ut?pt:ut}}function Hu(lt,ut){Am(lt,ut),(lt=lt.alternate)&&Am(lt,ut)}function o0(lt){return lt=wt(lt),lt===null?null:lt.stateNode}function l0(){return null}return o.attemptContinuousHydration=function(lt){if(lt.tag===13){var ut=Gn();rs(lt,134217728,ut),Hu(lt,134217728)}},o.attemptHydrationAtCurrentPriority=function(lt){if(lt.tag===13){var ut=Gn(),pt=Ps(lt);rs(lt,pt,ut),Hu(lt,pt)}},o.attemptSynchronousHydration=function(lt){switch(lt.tag){case 3:var ut=lt.stateNode;if(ut.current.memoizedState.isDehydrated){var pt=ao(ut.pendingLanes);pt!==0&&(Gl(ut,pt|1),Wn(ut,wn()),!(nn&6)&&(no(),ds()))}break;case 13:var At=Gn();am(function(){return rs(lt,1,At)}),Hu(lt,1)}},o.batchedUpdates=function(lt,ut){var pt=nn;nn|=1;try{return lt(ut)}finally{nn=pt,nn===0&&(no(),wo&&ds())}},o.createComponentSelector=function(lt){return{$$typeof:yl,value:lt}},o.createContainer=function(lt,ut,pt,At,xt,It,Ut){return pm(lt,ut,!1,null,pt,At,xt,It,Ut)},o.createHasPseudoClassSelector=function(lt){return{$$typeof:El,value:lt}},o.createHydrationContainer=function(lt,ut,pt,At,xt,It,Ut,jt,fr){return lt=pm(pt,At,!0,lt,xt,It,Ut,jt,fr),lt.context=mm(null),pt=lt.current,At=Gn(),xt=Ps(pt),It=vs(At,xt),It.callback=ut??null,Ms(pt,It),lt.current.lanes=xt,so(lt,xt,At),Wn(lt,At),lt},o.createPortal=function(lt,ut,pt){var At=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:et,key:At==null?null:""+At,children:lt,containerInfo:ut,implementation:pt}},o.createRoleSelector=function(lt){return{$$typeof:Sl,value:lt}},o.createTestNameSelector=function(lt){return{$$typeof:xl,value:lt}},o.createTextSelector=function(lt){return{$$typeof:Cl,value:lt}},o.deferredUpdates=function(lt){var ut=ln,pt=Cn.transition;try{return Cn.transition=null,ln=16,lt()}finally{ln=ut,Cn.transition=pt}},o.discreteUpdates=function(lt,ut,pt,At,xt){var It=ln,Ut=Cn.transition;try{return Cn.transition=null,ln=1,lt(ut,pt,At,xt)}finally{ln=It,Cn.transition=Ut,nn===0&&no()}},o.findAllNodes=wu,o.findBoundingRects=function(lt,ut){if(!Pr)throw Error($(363));ut=wu(lt,ut),lt=[];for(var pt=0;pt<ut.length;pt++)lt.push(Wr(ut[pt]));for(ut=lt.length-1;0<ut;ut--){pt=lt[ut];for(var At=pt.x,xt=At+pt.width,It=pt.y,Ut=It+pt.height,jt=ut-1;0<=jt;jt--)if(ut!==jt){var fr=lt[jt],Rr=fr.x,kr=Rr+fr.width,Zr=fr.y,zr=Zr+fr.height;if(At>=Rr&&It>=Zr&&xt<=kr&&Ut<=zr){lt.splice(ut,1);break}else if(At!==Rr||pt.width!==fr.width||zr<It||Zr>Ut){if(!(It!==Zr||pt.height!==fr.height||kr<At||Rr>xt)){Rr>At&&(fr.width+=Rr-At,fr.x=At),kr<xt&&(fr.width=xt-Rr),lt.splice(ut,1);break}}else{Zr>It&&(fr.height+=Zr-It,fr.y=It),zr<Ut&&(fr.height=Ut-Zr),lt.splice(ut,1);break}}}return lt},o.findHostInstance=gm,o.findHostInstanceWithNoPortals=function(lt){return lt=Ct(lt),lt=lt!==null?Tt(lt):null,lt===null?null:lt.stateNode},o.findHostInstanceWithWarning=function(lt){return gm(lt)},o.flushControlled=function(lt){var ut=nn;nn|=1;var pt=Cn.transition,At=ln;try{Cn.transition=null,ln=1,lt()}finally{ln=At,Cn.transition=pt,nn=ut,nn===0&&(no(),ds())}},o.flushPassiveEffects=Vs,o.flushSync=am,o.focusWithin=function(lt,ut){if(!Pr)throw Error($(363));for(lt=Tu(lt),ut=rm(lt,ut),ut=Array.from(ut),lt=0;lt<ut.length;){var pt=ut[lt++];if(!Ft(pt)){if(pt.tag===5&&Sr(pt.stateNode))return!0;for(pt=pt.child;pt!==null;)ut.push(pt),pt=pt.sibling}}return!1},o.getCurrentUpdatePriority=function(){return ln},o.getFindAllNodesFailureDescription=function(lt,ut){if(!Pr)throw Error($(363));var pt=0,At=[];lt=[Tu(lt),0];for(var xt=0;xt<lt.length;){var It=lt[xt++],Ut=lt[xt++],jt=ut[Ut];if((It.tag!==5||!Ft(It))&&(Iu(It,jt)&&(At.push(Mu(jt)),Ut++,Ut>pt&&(pt=Ut)),Ut<ut.length))for(It=It.child;It!==null;)lt.push(It,Ut),It=It.sibling}if(pt<ut.length){for(lt=[];pt<ut.length;pt++)lt.push(Mu(ut[pt]));return`findAllNodes was able to match part of the selector:
  `+(At.join(" > ")+`

No matching component was found for:
  `)+lt.join(" > ")}return null},o.getPublicRootInstance=function(lt){if(lt=lt.current,!lt.child)return null;switch(lt.child.tag){case 5:return Bt(lt.child.stateNode);default:return lt.child.stateNode}},o.injectIntoDevTools=function(lt){if(lt={bundleType:lt.bundleType,version:lt.version,rendererPackageName:lt.rendererPackageName,rendererConfig:lt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:o0,findFiberByHostInstance:lt.findFiberByHostInstance||l0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")lt=!1;else{var ut=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ut.isDisabled||!ut.supportsFiber)lt=!0;else{try{Mo=ut.inject(lt),us=ut}catch{}lt=!!ut.checkDCE}}return lt},o.isAlreadyRendering=function(){return!1},o.observeVisibleRects=function(lt,ut,pt,At){if(!Pr)throw Error($(363));lt=wu(lt,ut);var xt=xr(lt,pt,At).disconnect;return{disconnect:function(){xt()}}},o.registerMutableSourceForHydration=function(lt,ut){var pt=ut._getVersion;pt=pt(ut._source),lt.mutableSourceEagerHydrationData==null?lt.mutableSourceEagerHydrationData=[ut,pt]:lt.mutableSourceEagerHydrationData.push(ut,pt)},o.runWithPriority=function(lt,ut){var pt=ln;try{return ln=lt,ut()}finally{ln=pt}},o.shouldError=function(){return null},o.shouldSuspend=function(){return!1},o.updateContainer=function(lt,ut,pt,At){var xt=ut.current,It=Gn(),Ut=Ps(xt);return pt=mm(pt),ut.context===null?ut.context=pt:ut.pendingContext=pt,ut=vs(It,Ut),ut.payload={element:lt},At=At===void 0?null:At,At!==null&&(ut.callback=At),Ms(xt,ut),lt=rs(xt,Ut,It),lt!==null&&Fo(lt,xt,Ut),Ut},o};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports),isPromise=s=>typeof s=="object"&&typeof s.then=="function",globalCache=[];function shallowEqualArrays(s,a,o=(c,d)=>c===d){if(s===a)return!0;if(!s||!a)return!1;const c=s.length;if(a.length!==c)return!1;for(let d=0;d<c;d++)if(!o(s[d],a[d]))return!1;return!0}function query(s,a=null,o=!1,c={}){a===null&&(a=[s]);for(const b of globalCache)if(shallowEqualArrays(a,b.keys,b.equal)){if(o)return;if(Object.prototype.hasOwnProperty.call(b,"error"))throw b.error;if(Object.prototype.hasOwnProperty.call(b,"response"))return c.lifespan&&c.lifespan>0&&(b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout(b.remove,c.lifespan)),b.response;if(!o)throw b.promise}const d={keys:a,equal:c.equal,remove:()=>{const b=globalCache.indexOf(d);b!==-1&&globalCache.splice(b,1)},promise:(isPromise(s)?s:s(...a)).then(b=>{d.response=b,c.lifespan&&c.lifespan>0&&(d.timeout=setTimeout(d.remove,c.lifespan))}).catch(b=>d.error=b)};if(globalCache.push(d),!o)throw d.promise}const suspend=(s,a,o)=>query(s,a,!1,o),preload=(s,a,o)=>void query(s,a,!0,o),clear=s=>{if(s===void 0||s.length===0)globalCache.splice(0,globalCache.length);else{const a=globalCache.find(o=>shallowEqualArrays(s,o.keys,o.equal));a&&a.remove()}},catalogue={},extend=s=>void Object.assign(catalogue,s);function createRenderer(s,a){function o(tt,{args:rt=[],attach:nt,...it},at){let ct=`${tt[0].toUpperCase()}${tt.slice(1)}`,st;if(tt==="primitive"){if(it.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const ot=it.object;st=prepare(ot,{type:tt,root:at,attach:nt,primitive:!0})}else{const ot=catalogue[ct];if(!ot)throw new Error(`R3F: ${ct} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(rt))throw new Error("R3F: The args prop must be an array!");st=prepare(new ot(...rt),{type:tt,root:at,attach:nt,memoizedProps:{args:rt}})}return st.__r3f.attach===void 0&&(st instanceof BufferGeometry?st.__r3f.attach="geometry":st instanceof Material&&(st.__r3f.attach="material")),ct!=="inject"&&applyProps$1(st,it),st}function c(tt,rt){let nt=!1;if(rt){var it,at;(it=rt.__r3f)!=null&&it.attach?attach(tt,rt,rt.__r3f.attach):rt.isObject3D&&tt.isObject3D&&(tt.add(rt),nt=!0),nt||(at=tt.__r3f)==null||at.objects.push(rt),rt.__r3f||prepare(rt,{}),rt.__r3f.parent=tt,updateInstance(rt),invalidateInstance(rt)}}function d(tt,rt,nt){let it=!1;if(rt){var at,ct;if((at=rt.__r3f)!=null&&at.attach)attach(tt,rt,rt.__r3f.attach);else if(rt.isObject3D&&tt.isObject3D){rt.parent=tt,rt.dispatchEvent({type:"added"});const st=tt.children.filter(ht=>ht!==rt),ot=st.indexOf(nt);tt.children=[...st.slice(0,ot),rt,...st.slice(ot)],it=!0}it||(ct=tt.__r3f)==null||ct.objects.push(rt),rt.__r3f||prepare(rt,{}),rt.__r3f.parent=tt,updateInstance(rt),invalidateInstance(rt)}}function b(tt,rt,nt=!1){tt&&[...tt].forEach(it=>$(rt,it,nt))}function $(tt,rt,nt){if(rt){var it,at,ct;if(rt.__r3f&&(rt.__r3f.parent=null),(it=tt.__r3f)!=null&&it.objects&&(tt.__r3f.objects=tt.__r3f.objects.filter(ft=>ft!==rt)),(at=rt.__r3f)!=null&&at.attach)detach(tt,rt,rt.__r3f.attach);else if(rt.isObject3D&&tt.isObject3D){var st;tt.remove(rt),(st=rt.__r3f)!=null&&st.root&&removeInteractivity(rt.__r3f.root,rt)}const ht=(ct=rt.__r3f)==null?void 0:ct.primitive,dt=nt===void 0?rt.dispose!==null&&!ht:nt;if(!ht){var ot;b((ot=rt.__r3f)==null?void 0:ot.objects,rt,dt),b(rt.children,rt,dt)}delete rt.__r3f,dt&&rt.dispose&&rt.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{rt.dispose()}catch{}}),invalidateInstance(tt)}}function j(tt,rt,nt,it){var at;const ct=(at=tt.__r3f)==null?void 0:at.parent;if(!ct)return;const st=o(rt,nt,tt.__r3f.root);if(tt.children){for(const ot of tt.children)ot.__r3f&&c(st,ot);tt.children=tt.children.filter(ot=>!ot.__r3f)}tt.__r3f.objects.forEach(ot=>c(st,ot)),tt.__r3f.objects=[],tt.__r3f.autoRemovedBeforeAppend||$(ct,tt),st.parent&&(st.__r3f.autoRemovedBeforeAppend=!0),c(ct,st),st.raycast&&st.__r3f.eventCount&&st.__r3f.root.getState().internal.interaction.push(st),[it,it.alternate].forEach(ot=>{ot!==null&&(ot.stateNode=st,ot.ref&&(typeof ot.ref=="function"?ot.ref(st):ot.ref.current=st))})}const _e=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:o,removeChild:$,appendChild:c,appendInitialChild:c,insertBefore:d,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(tt,rt)=>{if(!rt)return;const nt=tt.getState().scene;nt.__r3f&&(nt.__r3f.root=tt,c(nt,rt))},removeChildFromContainer:(tt,rt)=>{rt&&$(tt.getState().scene,rt)},insertInContainerBefore:(tt,rt,nt)=>{if(!rt||!nt)return;const it=tt.getState().scene;it.__r3f&&d(it,rt,nt)},getRootHostContext:()=>null,getChildHostContext:tt=>tt,finalizeInitialChildren(tt){var rt;return!!((rt=tt==null?void 0:tt.__r3f)!=null?rt:{}).handlers},prepareUpdate(tt,rt,nt,it){if(tt.__r3f.primitive&&it.object&&it.object!==tt)return[!0];{const{args:at=[],children:ct,...st}=it,{args:ot=[],children:ht,...dt}=nt;if(!Array.isArray(at))throw new Error("R3F: the args prop must be an array!");if(at.some((mt,gt)=>mt!==ot[gt]))return[!0];const ft=diffProps(tt,st,dt,!0);return ft.changes.length?[!1,ft]:null}},commitUpdate(tt,[rt,nt],it,at,ct,st){rt?j(tt,it,ct,st):applyProps$1(tt,nt)},commitMount(tt,rt,nt,it){var at;const ct=(at=tt.__r3f)!=null?at:{};tt.raycast&&ct.handlers&&ct.eventCount&&tt.__r3f.root.getState().internal.interaction.push(tt)},getPublicInstance:tt=>tt,prepareForCommit:()=>null,preparePortalMount:tt=>prepare(tt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(tt){var rt;const{attach:nt,parent:it}=(rt=tt.__r3f)!=null?rt:{};nt&&it&&detach(it,tt,nt),tt.isObject3D&&(tt.visible=!1),invalidateInstance(tt)},unhideInstance(tt,rt){var nt;const{attach:it,parent:at}=(nt=tt.__r3f)!=null?nt:{};it&&at&&attach(at,tt,it),(tt.isObject3D&&rt.visible==null||rt.visible)&&(tt.visible=!0),invalidateInstance(tt)},createTextInstance:_e,hideTextInstance:_e,unhideTextInstance:_e,getCurrentEventPriority:()=>a?a():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=s=>"colorSpace"in s||"outputColorSpace"in s,getColorManagement=()=>{var s;return(s=catalogue.ColorManagement)!=null?s:null},isOrthographicCamera=s=>s&&s.isOrthographicCamera,isRef=s=>s&&s.hasOwnProperty("current"),useIsomorphicLayoutEffect$1=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(s){const a=reactExports.useRef(s);return useIsomorphicLayoutEffect$1(()=>void(a.current=s),[s]),a}function Block({set:s}){return useIsomorphicLayoutEffect$1(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}class ErrorBoundary extends reactExports.Component{constructor(...a){super(...a),this.state={error:!1}}componentDidCatch(a){this.props.set(a)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=s=>s&&!!s.memoized&&!!s.changes;function calculateDpr(s){var a;const o=typeof window<"u"?(a=window.devicePixelRatio)!=null?a:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],o),s[1]):s}const getRootState=s=>{var a;return(a=s.__r3f)==null?void 0:a.root.getState()},is={obj:s=>s===Object(s)&&!is.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,arr:s=>Array.isArray(s),equ(s,a,{arrays:o="shallow",objects:c="reference",strict:d=!0}={}){if(typeof s!=typeof a||!!s!=!!a)return!1;if(is.str(s)||is.num(s))return s===a;const b=is.obj(s);if(b&&c==="reference")return s===a;const $=is.arr(s);if($&&o==="reference")return s===a;if(($||b)&&s===a)return!0;let j;for(j in s)if(!(j in a))return!1;if(b&&o==="shallow"&&c==="shallow"){for(j in d?a:s)if(!is.equ(s[j],a[j],{strict:d,objects:"reference"}))return!1}else for(j in d?a:s)if(s[j]!==a[j])return!1;if(is.und(j)){if($&&s.length===0&&a.length===0||b&&Object.keys(s).length===0&&Object.keys(a).length===0)return!0;if(s!==a)return!1}return!0}};function buildGraph(s){const a={nodes:{},materials:{}};return s&&s.traverse(o=>{o.name&&(a.nodes[o.name]=o),o.material&&!a.materials[o.material.name]&&(a.materials[o.material.name]=o.material)}),a}function dispose(s){s.dispose&&s.type!=="Scene"&&s.dispose();for(const a in s)a.dispose==null||a.dispose(),delete s[a]}function prepare(s,a){const o=s;return(a!=null&&a.primitive||!o.__r3f)&&(o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...a}),s}function resolve(s,a){let o=s;if(a.includes("-")){const c=a.split("-"),d=c.pop();return o=c.reduce((b,$)=>b[$],s),{target:o,key:d}}else return{target:o,key:a}}const INDEX_REGEX=/-\d+$/;function attach(s,a,o){if(is.str(o)){if(INDEX_REGEX.test(o)){const b=o.replace(INDEX_REGEX,""),{target:$,key:j}=resolve(s,b);Array.isArray($[j])||($[j]=[])}const{target:c,key:d}=resolve(s,o);a.__r3f.previousAttach=c[d],c[d]=a}else a.__r3f.previousAttach=o(s,a)}function detach(s,a,o){var c,d;if(is.str(o)){const{target:b,key:$}=resolve(s,o),j=a.__r3f.previousAttach;j===void 0?delete b[$]:b[$]=j}else(c=a.__r3f)==null||c.previousAttach==null||c.previousAttach(s,a);(d=a.__r3f)==null||delete d.previousAttach}function diffProps(s,{children:a,key:o,ref:c,...d},{children:b,key:$,ref:j,..._e}={},et=!1){var tt;const rt=(tt=s==null?void 0:s.__r3f)!=null?tt:{},nt=Object.entries(d),it=[];if(et){const ct=Object.keys(_e);for(let st=0;st<ct.length;st++)d.hasOwnProperty(ct[st])||nt.unshift([ct[st],DEFAULT+"remove"])}nt.forEach(([ct,st])=>{var ot;if((ot=s.__r3f)!=null&&ot.primitive&&ct==="object"||is.equ(st,_e[ct]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(ct))return it.push([ct,st,!0,[]]);let ht=[];ct.includes("-")&&(ht=ct.split("-")),it.push([ct,st,!1,ht]);for(const dt in d){const ft=d[dt];dt.startsWith(`${ct}-`)&&it.push([dt,ft,!1,dt.split("-")])}});const at={...d};return rt.memoizedProps&&rt.memoizedProps.args&&(at.args=rt.memoizedProps.args),rt.memoizedProps&&rt.memoizedProps.attach&&(at.attach=rt.memoizedProps.attach),{memoized:at,changes:it}}function applyProps$1(s,a){var o,c,d;const b=(o=s.__r3f)!=null?o:{},$=b.root,j=(c=$==null||$.getState==null?void 0:$.getState())!=null?c:{},{memoized:_e,changes:et}=isDiffSet(a)?a:diffProps(s,a),tt=b.eventCount;s.__r3f&&(s.__r3f.memoizedProps=_e);for(let nt=0;nt<et.length;nt++){let[it,at,ct,st]=et[nt];if(hasColorSpace(s)){const ft="srgb",mt="srgb-linear";it==="encoding"?(it="colorSpace",at=at===3001?ft:mt):it==="outputEncoding"&&(it="outputColorSpace",at=at===3001?ft:mt)}let ot=s,ht=ot[it];if(st.length&&(ht=st.reduce((dt,ft)=>dt[ft],s),!(ht&&ht.set))){const[dt,...ft]=st.reverse();ot=ft.reverse().reduce((mt,gt)=>mt[gt],s),it=dt}if(at===DEFAULT+"remove")if(ot.constructor){let dt=DEFAULTS.get(ot.constructor);dt||(dt=new ot.constructor,DEFAULTS.set(ot.constructor,dt)),at=dt[it]}else at=0;if(ct)at?b.handlers[it]=at:delete b.handlers[it],b.eventCount=Object.keys(b.handlers).length;else if(ht&&ht.set&&(ht.copy||ht instanceof Layers)){if(Array.isArray(at))ht.fromArray?ht.fromArray(at):ht.set(...at);else if(ht.copy&&at&&at.constructor&&ht.constructor===at.constructor)ht.copy(at);else if(at!==void 0){const dt=ht instanceof Color;!dt&&ht.setScalar?ht.setScalar(at):ht instanceof Layers&&at instanceof Layers?ht.mask=at.mask:ht.set(at),!getColorManagement()&&!j.linear&&dt&&ht.convertSRGBToLinear()}}else if(ot[it]=at,ot[it]instanceof Texture$1&&ot[it].format===RGBAFormat$1&&ot[it].type===UnsignedByteType$1){const dt=ot[it];hasColorSpace(dt)&&hasColorSpace(j.gl)?dt.colorSpace=j.gl.outputColorSpace:dt.encoding=j.gl.outputEncoding}invalidateInstance(s)}if(b.parent&&j.internal&&s.raycast&&tt!==b.eventCount){const nt=j.internal.interaction.indexOf(s);nt>-1&&j.internal.interaction.splice(nt,1),b.eventCount&&j.internal.interaction.push(s)}return!(et.length===1&&et[0][0]==="onUpdate")&&et.length&&(d=s.__r3f)!=null&&d.parent&&updateInstance(s),s}function invalidateInstance(s){var a,o;const c=(a=s.__r3f)==null||(o=a.root)==null||o.getState==null?void 0:o.getState();c&&c.internal.frames===0&&c.invalidate()}function updateInstance(s){s.onUpdate==null||s.onUpdate(s)}function updateCamera(s,a){s.manual||(isOrthographicCamera(s)?(s.left=a.width/-2,s.right=a.width/2,s.top=a.height/2,s.bottom=a.height/-2):s.aspect=a.width/a.height,s.updateProjectionMatrix(),s.updateMatrixWorld())}function makeId(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function getEventPriority(){var s;const a=typeof self<"u"&&self||typeof window<"u"&&window;if(!a)return constantsExports.DefaultEventPriority;switch((s=a.event)==null?void 0:s.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(s,a,o,c){const d=o.get(a);d&&(o.delete(a),o.size===0&&(s.delete(c),d.target.releasePointerCapture(c)))}function removeInteractivity(s,a){const{internal:o}=s.getState();o.interaction=o.interaction.filter(c=>c!==a),o.initialHits=o.initialHits.filter(c=>c!==a),o.hovered.forEach((c,d)=>{(c.eventObject===a||c.object===a)&&o.hovered.delete(d)}),o.capturedMap.forEach((c,d)=>{releaseInternalPointerCapture(o.capturedMap,a,c,d)})}function createEvents(s){function a(_e){const{internal:et}=s.getState(),tt=_e.offsetX-et.initialClick[0],rt=_e.offsetY-et.initialClick[1];return Math.round(Math.sqrt(tt*tt+rt*rt))}function o(_e){return _e.filter(et=>["Move","Over","Enter","Out","Leave"].some(tt=>{var rt;return(rt=et.__r3f)==null?void 0:rt.handlers["onPointer"+tt]}))}function c(_e,et){const tt=s.getState(),rt=new Set,nt=[],it=et?et(tt.internal.interaction):tt.internal.interaction;for(let ot=0;ot<it.length;ot++){const ht=getRootState(it[ot]);ht&&(ht.raycaster.camera=void 0)}tt.previousRoot||tt.events.compute==null||tt.events.compute(_e,tt);function at(ot){const ht=getRootState(ot);if(!ht||!ht.events.enabled||ht.raycaster.camera===null)return[];if(ht.raycaster.camera===void 0){var dt;ht.events.compute==null||ht.events.compute(_e,ht,(dt=ht.previousRoot)==null?void 0:dt.getState()),ht.raycaster.camera===void 0&&(ht.raycaster.camera=null)}return ht.raycaster.camera?ht.raycaster.intersectObject(ot,!0):[]}let ct=it.flatMap(at).sort((ot,ht)=>{const dt=getRootState(ot.object),ft=getRootState(ht.object);return!dt||!ft?ot.distance-ht.distance:ft.events.priority-dt.events.priority||ot.distance-ht.distance}).filter(ot=>{const ht=makeId(ot);return rt.has(ht)?!1:(rt.add(ht),!0)});tt.events.filter&&(ct=tt.events.filter(ct,tt));for(const ot of ct){let ht=ot.object;for(;ht;){var st;(st=ht.__r3f)!=null&&st.eventCount&&nt.push({...ot,eventObject:ht}),ht=ht.parent}}if("pointerId"in _e&&tt.internal.capturedMap.has(_e.pointerId))for(let ot of tt.internal.capturedMap.get(_e.pointerId).values())rt.has(makeId(ot.intersection))||nt.push(ot.intersection);return nt}function d(_e,et,tt,rt){const nt=s.getState();if(_e.length){const it={stopped:!1};for(const at of _e){const ct=getRootState(at.object)||nt,{raycaster:st,pointer:ot,camera:ht,internal:dt}=ct,ft=new Vector3(ot.x,ot.y,0).unproject(ht),mt=St=>{var Ct,wt;return(Ct=(wt=dt.capturedMap.get(St))==null?void 0:wt.has(at.eventObject))!=null?Ct:!1},gt=St=>{const Ct={intersection:at,target:et.target};dt.capturedMap.has(St)?dt.capturedMap.get(St).set(at.eventObject,Ct):dt.capturedMap.set(St,new Map([[at.eventObject,Ct]])),et.target.setPointerCapture(St)},vt=St=>{const Ct=dt.capturedMap.get(St);Ct&&releaseInternalPointerCapture(dt.capturedMap,at.eventObject,Ct,St)};let yt={};for(let St in et){let Ct=et[St];typeof Ct!="function"&&(yt[St]=Ct)}let Et={...at,...yt,pointer:ot,intersections:_e,stopped:it.stopped,delta:tt,unprojectedPoint:ft,ray:st.ray,camera:ht,stopPropagation(){const St="pointerId"in et&&dt.capturedMap.get(et.pointerId);if((!St||St.has(at.eventObject))&&(Et.stopped=it.stopped=!0,dt.hovered.size&&Array.from(dt.hovered.values()).find(Ct=>Ct.eventObject===at.eventObject))){const Ct=_e.slice(0,_e.indexOf(at));b([...Ct,at])}},target:{hasPointerCapture:mt,setPointerCapture:gt,releasePointerCapture:vt},currentTarget:{hasPointerCapture:mt,setPointerCapture:gt,releasePointerCapture:vt},nativeEvent:et};if(rt(Et),it.stopped===!0)break}}return _e}function b(_e){const{internal:et}=s.getState();for(const tt of et.hovered.values())if(!_e.length||!_e.find(rt=>rt.object===tt.object&&rt.index===tt.index&&rt.instanceId===tt.instanceId)){const nt=tt.eventObject.__r3f,it=nt==null?void 0:nt.handlers;if(et.hovered.delete(makeId(tt)),nt!=null&&nt.eventCount){const at={...tt,intersections:_e};it.onPointerOut==null||it.onPointerOut(at),it.onPointerLeave==null||it.onPointerLeave(at)}}}function $(_e,et){for(let tt=0;tt<et.length;tt++){const rt=et[tt].__r3f;rt==null||rt.handlers.onPointerMissed==null||rt.handlers.onPointerMissed(_e)}}function j(_e){switch(_e){case"onPointerLeave":case"onPointerCancel":return()=>b([]);case"onLostPointerCapture":return et=>{const{internal:tt}=s.getState();"pointerId"in et&&tt.capturedMap.has(et.pointerId)&&requestAnimationFrame(()=>{tt.capturedMap.has(et.pointerId)&&(tt.capturedMap.delete(et.pointerId),b([]))})}}return function(tt){const{onPointerMissed:rt,internal:nt}=s.getState();nt.lastEvent.current=tt;const it=_e==="onPointerMove",at=_e==="onClick"||_e==="onContextMenu"||_e==="onDoubleClick",st=c(tt,it?o:void 0),ot=at?a(tt):0;_e==="onPointerDown"&&(nt.initialClick=[tt.offsetX,tt.offsetY],nt.initialHits=st.map(dt=>dt.eventObject)),at&&!st.length&&ot<=2&&($(tt,nt.interaction),rt&&rt(tt)),it&&b(st);function ht(dt){const ft=dt.eventObject,mt=ft.__r3f,gt=mt==null?void 0:mt.handlers;if(mt!=null&&mt.eventCount)if(it){if(gt.onPointerOver||gt.onPointerEnter||gt.onPointerOut||gt.onPointerLeave){const vt=makeId(dt),yt=nt.hovered.get(vt);yt?yt.stopped&&dt.stopPropagation():(nt.hovered.set(vt,dt),gt.onPointerOver==null||gt.onPointerOver(dt),gt.onPointerEnter==null||gt.onPointerEnter(dt))}gt.onPointerMove==null||gt.onPointerMove(dt)}else{const vt=gt[_e];vt?(!at||nt.initialHits.includes(ft))&&($(tt,nt.interaction.filter(yt=>!nt.initialHits.includes(yt))),vt(dt)):at&&nt.initialHits.includes(ft)&&$(tt,nt.interaction.filter(yt=>!nt.initialHits.includes(yt)))}}d(st,tt,ot,ht)}}return{handlePointer:j}}const isRenderer=s=>!!(s!=null&&s.render),context=reactExports.createContext(null),createStore$1=(s,a)=>{const o=create((j,_e)=>{const et=new Vector3,tt=new Vector3,rt=new Vector3;function nt(ot=_e().camera,ht=tt,dt=_e().size){const{width:ft,height:mt,top:gt,left:vt}=dt,yt=ft/mt;ht instanceof Vector3?rt.copy(ht):rt.set(...ht);const Et=ot.getWorldPosition(et).distanceTo(rt);if(isOrthographicCamera(ot))return{width:ft/ot.zoom,height:mt/ot.zoom,top:gt,left:vt,factor:1,distance:Et,aspect:yt};{const St=ot.fov*Math.PI/180,Ct=2*Math.tan(St/2)*Et,wt=Ct*(ft/mt);return{width:wt,height:Ct,top:gt,left:vt,factor:ft/wt,distance:Et,aspect:yt}}}let it;const at=ot=>j(ht=>({performance:{...ht.performance,current:ot}})),ct=new Vector2$1;return{set:j,get:_e,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(ot=1)=>s(_e(),ot),advance:(ot,ht)=>a(ot,ht,_e()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ct,mouse:ct,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const ot=_e();it&&clearTimeout(it),ot.performance.current!==ot.performance.min&&at(ot.performance.min),it=setTimeout(()=>at(_e().performance.max),ot.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:nt},setEvents:ot=>j(ht=>({...ht,events:{...ht.events,...ot}})),setSize:(ot,ht,dt,ft,mt)=>{const gt=_e().camera,vt={width:ot,height:ht,top:ft||0,left:mt||0,updateStyle:dt};j(yt=>({size:vt,viewport:{...yt.viewport,...nt(gt,tt,vt)}}))},setDpr:ot=>j(ht=>{const dt=calculateDpr(ot);return{viewport:{...ht.viewport,dpr:dt,initialDpr:ht.viewport.initialDpr||dt}}}),setFrameloop:(ot="always")=>{const ht=_e().clock;ht.stop(),ht.elapsedTime=0,ot!=="never"&&(ht.start(),ht.elapsedTime=0),j(()=>({frameloop:ot}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(ot,ht,dt)=>{const ft=_e().internal;return ft.priority=ft.priority+(ht>0?1:0),ft.subscribers.push({ref:ot,priority:ht,store:dt}),ft.subscribers=ft.subscribers.sort((mt,gt)=>mt.priority-gt.priority),()=>{const mt=_e().internal;mt!=null&&mt.subscribers&&(mt.priority=mt.priority-(ht>0?1:0),mt.subscribers=mt.subscribers.filter(gt=>gt.ref!==ot))}}}}}),c=o.getState();let d=c.size,b=c.viewport.dpr,$=c.camera;return o.subscribe(()=>{const{camera:j,size:_e,viewport:et,gl:tt,set:rt}=o.getState();if(_e!==d||et.dpr!==b){var nt;d=_e,b=et.dpr,updateCamera(j,_e),tt.setPixelRatio(et.dpr);const it=(nt=_e.updateStyle)!=null?nt:typeof HTMLCanvasElement<"u"&&tt.domElement instanceof HTMLCanvasElement;tt.setSize(_e.width,_e.height,it)}j!==$&&($=j,rt(it=>({viewport:{...it.viewport,...it.viewport.getCurrentViewport(j)}})))}),o.subscribe(j=>s(j)),o};let i,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(s,a){if(s.size)for(const{callback:o}of s.values())o(a)}function flushGlobalEffects(s,a){switch(s){case"before":return run(globalEffects,a);case"after":return run(globalAfterEffects,a);case"tail":return run(globalTailEffects,a)}}let subscribers,subscription;function render$1(s,a,o){let c=a.clock.getDelta();for(a.frameloop==="never"&&typeof s=="number"&&(c=s-a.clock.elapsedTime,a.clock.oldTime=a.clock.elapsedTime,a.clock.elapsedTime=s),subscribers=a.internal.subscribers,i=0;i<subscribers.length;i++)subscription=subscribers[i],subscription.ref.current(subscription.store.getState(),c,o);return!a.internal.priority&&a.gl.render&&a.gl.render(a.scene,a.camera),a.internal.frames=Math.max(0,a.internal.frames-1),a.frameloop==="always"?1:a.internal.frames}function createLoop(s){let a=!1,o,c,d;function b(_e){c=requestAnimationFrame(b),a=!0,o=0,flushGlobalEffects("before",_e);for(const tt of s.values()){var et;d=tt.store.getState(),d.internal.active&&(d.frameloop==="always"||d.internal.frames>0)&&!((et=d.gl.xr)!=null&&et.isPresenting)&&(o+=render$1(_e,d))}if(flushGlobalEffects("after",_e),o===0)return flushGlobalEffects("tail",_e),a=!1,cancelAnimationFrame(c)}function $(_e,et=1){var tt;if(!_e)return s.forEach(rt=>$(rt.store.getState()),et);(tt=_e.gl.xr)!=null&&tt.isPresenting||!_e.internal.active||_e.frameloop==="never"||(_e.internal.frames=Math.min(60,_e.internal.frames+et),a||(a=!0,requestAnimationFrame(b)))}function j(_e,et=!0,tt,rt){if(et&&flushGlobalEffects("before",_e),tt)render$1(_e,tt,rt);else for(const nt of s.values())render$1(_e,nt.store.getState());et&&flushGlobalEffects("after",_e)}return{loop:b,invalidate:$,advance:j}}function useStore(){const s=reactExports.useContext(context);if(!s)throw new Error("R3F: Hooks can only be used within the Canvas component!");return s}function useThree(s=o=>o,a){return useStore()(s,a)}function useFrame(s,a=0){const o=useStore(),c=o.getState().internal.subscribe,d=useMutableCallback(s);return useIsomorphicLayoutEffect$1(()=>c(d,a,o),[a,c,o]),null}function loadingFn(s,a){return function(o,...c){const d=new o;return s&&s(d),Promise.all(c.map(b=>new Promise(($,j)=>d.load(b,_e=>{_e.scene&&Object.assign(_e,buildGraph(_e.scene)),$(_e)},a,_e=>j(new Error(`Could not load ${b}: ${_e.message})`))))))}}function useLoader(s,a,o,c){const d=Array.isArray(a)?a:[a],b=suspend(loadingFn(o,c),[s,...d],{equal:is.equ});return Array.isArray(a)?b:b[0]}useLoader.preload=function(s,a,o){const c=Array.isArray(a)?a:[a];return preload(loadingFn(o),[s,...c])};useLoader.clear=function(s,a){const o=Array.isArray(a)?a:[a];return clear([s,...o])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(s,a)=>{const o=typeof s=="function"?s(a):s;return isRenderer(o)?o:new WebGLRenderer({powerPreference:"high-performance",canvas:a,antialias:!0,alpha:!0,...s})};function computeInitialSize(s,a){if(a)return a;if(typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:o,height:c,top:d,left:b}=s.parentElement.getBoundingClientRect();return{width:o,height:c,top:d,left:b}}else if(typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(s){const a=roots.get(s),o=a==null?void 0:a.fiber,c=a==null?void 0:a.store;a&&console.warn("R3F.createRoot should only be called once!");const d=typeof reportError=="function"?reportError:console.error,b=c||createStore$1(invalidate,advance),$=o||reconciler.createContainer(b,constantsExports.ConcurrentRoot,null,!1,null,"",d,null);a||roots.set(s,{fiber:$,store:b});let j,_e=!1,et;return{configure(tt={}){let{gl:rt,size:nt,scene:it,events:at,onCreated:ct,shadows:st=!1,linear:ot=!1,flat:ht=!1,legacy:dt=!1,orthographic:ft=!1,frameloop:mt="always",dpr:gt=[1,2],performance:vt,raycaster:yt,camera:Et,onPointerMissed:St}=tt,Ct=b.getState(),wt=Ct.gl;Ct.gl||Ct.set({gl:wt=createRendererInstance(rt,s)});let _t=Ct.raycaster;_t||Ct.set({raycaster:_t=new Raycaster});const{params:Tt,...Mt}=yt||{};if(is.equ(Mt,_t,shallowLoose)||applyProps(_t,{...Mt}),is.equ(Tt,_t.params,shallowLoose)||applyProps(_t,{params:{..._t.params,...Tt}}),!Ct.camera||Ct.camera===et&&!is.equ(et,Et,shallowLoose)){et=Et;const $t=Et instanceof Camera,Lt=$t?Et:ft?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);$t||(Lt.position.z=5,Et&&applyProps(Lt,Et),!Ct.camera&&!(Et!=null&&Et.rotation)&&Lt.lookAt(0,0,0)),Ct.set({camera:Lt})}if(!Ct.scene){let $t;it instanceof Scene?$t=it:($t=new Scene,it&&applyProps($t,it)),Ct.set({scene:prepare($t)})}if(!Ct.xr){const $t=(Qt,or)=>{const er=b.getState();er.frameloop!=="never"&&advance(Qt,!0,er,or)},Lt=()=>{const Qt=b.getState();Qt.gl.xr.enabled=Qt.gl.xr.isPresenting,Qt.gl.xr.setAnimationLoop(Qt.gl.xr.isPresenting?$t:null),Qt.gl.xr.isPresenting||invalidate(Qt)},Jt={connect(){const Qt=b.getState().gl;Qt.xr.addEventListener("sessionstart",Lt),Qt.xr.addEventListener("sessionend",Lt)},disconnect(){const Qt=b.getState().gl;Qt.xr.removeEventListener("sessionstart",Lt),Qt.xr.removeEventListener("sessionend",Lt)}};wt.xr&&Jt.connect(),Ct.set({xr:Jt})}if(wt.shadowMap){const $t=wt.shadowMap.enabled,Lt=wt.shadowMap.type;if(wt.shadowMap.enabled=!!st,is.boo(st))wt.shadowMap.type=PCFSoftShadowMap;else if(is.str(st)){var Bt;const Jt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};wt.shadowMap.type=(Bt=Jt[st])!=null?Bt:PCFSoftShadowMap}else is.obj(st)&&Object.assign(wt.shadowMap,st);($t!==wt.shadowMap.enabled||Lt!==wt.shadowMap.type)&&(wt.shadowMap.needsUpdate=!0)}const Rt=getColorManagement();Rt&&("enabled"in Rt?Rt.enabled=!dt:"legacyMode"in Rt&&(Rt.legacyMode=dt)),applyProps(wt,{outputEncoding:ot?3e3:3001,toneMapping:ht?NoToneMapping:ACESFilmicToneMapping}),Ct.legacy!==dt&&Ct.set(()=>({legacy:dt})),Ct.linear!==ot&&Ct.set(()=>({linear:ot})),Ct.flat!==ht&&Ct.set(()=>({flat:ht})),rt&&!is.fun(rt)&&!isRenderer(rt)&&!is.equ(rt,wt,shallowLoose)&&applyProps(wt,rt),at&&!Ct.events.handlers&&Ct.set({events:at(b)});const Dt=computeInitialSize(s,nt);return is.equ(Dt,Ct.size,shallowLoose)||Ct.setSize(Dt.width,Dt.height,Dt.updateStyle,Dt.top,Dt.left),gt&&Ct.viewport.dpr!==calculateDpr(gt)&&Ct.setDpr(gt),Ct.frameloop!==mt&&Ct.setFrameloop(mt),Ct.onPointerMissed||Ct.set({onPointerMissed:St}),vt&&!is.equ(vt,Ct.performance,shallowLoose)&&Ct.set($t=>({performance:{...$t.performance,...vt}})),j=ct,_e=!0,this},render(tt){return _e||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:b,children:tt,onCreated:j,rootElement:s}),$,null,()=>{}),b},unmount(){unmountComponentAtNode(s)}}}function Provider({store:s,children:a,onCreated:o,rootElement:c}){return useIsomorphicLayoutEffect$1(()=>{const d=s.getState();d.set(b=>({internal:{...b.internal,active:!0}})),o&&o(d),s.getState().events.connected||d.events.connect==null||d.events.connect(c)},[]),reactExports.createElement(context.Provider,{value:s},a)}function unmountComponentAtNode(s,a){const o=roots.get(s),c=o==null?void 0:o.fiber;if(c){const d=o==null?void 0:o.store.getState();d&&(d.internal.active=!1),reconciler.updateContainer(null,c,null,()=>{d&&setTimeout(()=>{try{var b,$,j,_e;d.events.disconnect==null||d.events.disconnect(),(b=d.gl)==null||($=b.renderLists)==null||$.dispose==null||$.dispose(),(j=d.gl)==null||j.forceContextLoss==null||j.forceContextLoss(),(_e=d.gl)!=null&&_e.xr&&d.xr.disconnect(),dispose(d),roots.delete(s),a&&a(s)}catch{}},500)})}}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},_extends.apply(this,arguments)}function debounce$1(s,a,o){var c,d,b,$,j;a==null&&(a=100);function _e(){var tt=Date.now()-$;tt<a&&tt>=0?c=setTimeout(_e,a-tt):(c=null,o||(j=s.apply(b,d),b=d=null))}var et=function(){b=this,d=arguments,$=Date.now();var tt=o&&!c;return c||(c=setTimeout(_e,a)),tt&&(j=s.apply(b,d),b=d=null),j};return et.clear=function(){c&&(clearTimeout(c),c=null)},et.flush=function(){c&&(j=s.apply(b,d),b=d=null,clearTimeout(c),c=null)},et}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(s){let{debounce:a,scroll:o,polyfill:c,offsetSize:d}=s===void 0?{debounce:0,scroll:!1,offsetSize:!1}:s;const b=c||(typeof window>"u"?class{}:window.ResizeObserver);if(!b)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[$,j]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),_e=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:$}),et=a?typeof a=="number"?a:a.scroll:null,tt=a?typeof a=="number"?a:a.resize:null,rt=reactExports.useRef(!1);reactExports.useEffect(()=>(rt.current=!0,()=>void(rt.current=!1)));const[nt,it,at]=reactExports.useMemo(()=>{const ht=()=>{if(!_e.current.element)return;const{left:dt,top:ft,width:mt,height:gt,bottom:vt,right:yt,x:Et,y:St}=_e.current.element.getBoundingClientRect(),Ct={left:dt,top:ft,width:mt,height:gt,bottom:vt,right:yt,x:Et,y:St};_e.current.element instanceof HTMLElement&&d&&(Ct.height=_e.current.element.offsetHeight,Ct.width=_e.current.element.offsetWidth),Object.freeze(Ct),rt.current&&!areBoundsEqual(_e.current.lastBounds,Ct)&&j(_e.current.lastBounds=Ct)};return[ht,tt?createDebounce(ht,tt):ht,et?createDebounce(ht,et):ht]},[j,d,et,tt]);function ct(){_e.current.scrollContainers&&(_e.current.scrollContainers.forEach(ht=>ht.removeEventListener("scroll",at,!0)),_e.current.scrollContainers=null),_e.current.resizeObserver&&(_e.current.resizeObserver.disconnect(),_e.current.resizeObserver=null)}function st(){_e.current.element&&(_e.current.resizeObserver=new b(at),_e.current.resizeObserver.observe(_e.current.element),o&&_e.current.scrollContainers&&_e.current.scrollContainers.forEach(ht=>ht.addEventListener("scroll",at,{capture:!0,passive:!0})))}const ot=ht=>{!ht||ht===_e.current.element||(ct(),_e.current.element=ht,_e.current.scrollContainers=findScrollContainers(ht),st())};return useOnWindowScroll(at,!!o),useOnWindowResize(it),reactExports.useEffect(()=>{ct(),st()},[o,at,it]),reactExports.useEffect(()=>ct,[]),[ot,$,nt]}function useOnWindowResize(s){reactExports.useEffect(()=>{const a=s;return window.addEventListener("resize",a),()=>void window.removeEventListener("resize",a)},[s])}function useOnWindowScroll(s,a){reactExports.useEffect(()=>{if(a){const o=s;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[s,a])}function findScrollContainers(s){const a=[];if(!s||s===document.body)return a;const{overflow:o,overflowX:c,overflowY:d}=window.getComputedStyle(s);return[o,c,d].some(b=>b==="auto"||b==="scroll")&&a.push(s),[...a,...findScrollContainers(s.parentElement)]}const keys$4=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(s,a)=>keys$4.every(o=>s[o]===a[o]);var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(s,a,o)=>a in s?__defProp$1(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,__spreadValues=(s,a)=>{for(var o in a||(a={}))__hasOwnProp.call(a,o)&&__defNormalProp$1(s,o,a[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(a))__propIsEnum.call(a,o)&&__defNormalProp$1(s,o,a[o]);return s},__spreadProps=(s,a)=>__defProps(s,__getOwnPropDescs(a));function traverseFiber(s,a,o){if(!s)return;if(o(s)===!0)return s;let c=a?s.return:s.child;for(;c;){const d=traverseFiber(c,a,o);if(d)return d;c=a?null:c.sibling}}function wrapContext(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const s=reactExports.useContext(FiberContext);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const a=reactExports.useId();return reactExports.useMemo(()=>{for(const c of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,s,s==null?void 0:s.alternate]){if(!c)continue;const d=traverseFiber(c,!1,b=>{let $=b.memoizedState;for(;$;){if($.memoizedState===a)return!0;$=$.next}});if(d)return d}},[s,a])}function useContextMap(){var s,a;const o=useFiber(),[c]=reactExports.useState(()=>new Map);c.clear();let d=o;for(;d;){const b=(s=d.type)==null?void 0:s._context;b&&b!==FiberContext&&!c.has(b)&&c.set(b,(a=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:a.readContext(wrapContext(b))),d=d.return}return c}function useContextBridge(){const s=useContextMap();return reactExports.useMemo(()=>Array.from(s.keys()).reduce((a,o)=>c=>reactExports.createElement(a,null,reactExports.createElement(o.Provider,__spreadProps(__spreadValues({},c),{value:s.get(o)}))),a=>reactExports.createElement(FiberProvider,__spreadValues({},a))),[s])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(s){const{handlePointer:a}=createEvents(s);return{priority:1,enabled:!0,compute(o,c,d){c.pointer.set(o.offsetX/c.size.width*2-1,-(o.offsetY/c.size.height)*2+1),c.raycaster.setFromCamera(c.pointer,c.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((o,c)=>({...o,[c]:a(c)}),{}),update:()=>{var o;const{events:c,internal:d}=s.getState();(o=d.lastEvent)!=null&&o.current&&c.handlers&&c.handlers.onPointerMove(d.lastEvent.current)},connect:o=>{var c;const{set:d,events:b}=s.getState();b.disconnect==null||b.disconnect(),d($=>({events:{...$.events,connected:o}})),Object.entries((c=b.handlers)!=null?c:[]).forEach(([$,j])=>{const[_e,et]=DOM_EVENTS[$];o.addEventListener(_e,j,{passive:et})})},disconnect:()=>{const{set:o,events:c}=s.getState();if(c.connected){var d;Object.entries((d=c.handlers)!=null?d:[]).forEach(([b,$])=>{if(c&&c.connected instanceof HTMLElement){const[j]=DOM_EVENTS[b];c.connected.removeEventListener(j,$)}}),o(b=>({events:{...b.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:a,fallback:o,resize:c,style:d,gl:b,events:$=createPointerEvents,eventSource:j,eventPrefix:_e,shadows:et,linear:tt,flat:rt,legacy:nt,orthographic:it,frameloop:at,dpr:ct,performance:st,raycaster:ot,camera:ht,onPointerMissed:dt,onCreated:ft,...mt},gt){reactExports.useMemo(()=>extend(THREE),[]);const vt=useContextBridge(),[yt,Et]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...c}),St=reactExports.useRef(null),Ct=reactExports.useRef(null);reactExports.useImperativeHandle(gt,()=>St.current);const wt=useMutableCallback(dt),[_t,Tt]=reactExports.useState(!1),[Mt,Bt]=reactExports.useState(!1);if(_t)throw _t;if(Mt)throw Mt;const Rt=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const Pt=St.current;Et.width>0&&Et.height>0&&Pt&&(Rt.current||(Rt.current=createRoot(Pt)),Rt.current.configure({gl:b,events:$,shadows:et,linear:tt,flat:rt,legacy:nt,orthographic:it,frameloop:at,dpr:ct,performance:st,raycaster:ot,camera:ht,size:Et,onPointerMissed:(...Dt)=>wt.current==null?void 0:wt.current(...Dt),onCreated:Dt=>{Dt.events.connect==null||Dt.events.connect(j?isRef(j)?j.current:j:Ct.current),_e&&Dt.setEvents({compute:($t,Lt)=>{const Jt=$t[_e+"X"],Qt=$t[_e+"Y"];Lt.pointer.set(Jt/Lt.size.width*2-1,-(Qt/Lt.size.height)*2+1),Lt.raycaster.setFromCamera(Lt.pointer,Lt.camera)}}),ft==null||ft(Dt)}}),Rt.current.render(reactExports.createElement(vt,null,reactExports.createElement(ErrorBoundary,{set:Bt},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:Tt})},a)))))}),reactExports.useEffect(()=>{const Pt=St.current;if(Pt)return()=>unmountComponentAtNode(Pt)},[]);const bt=j?"none":"auto";return reactExports.createElement("div",_extends({ref:Ct,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:bt,...d}},mt),reactExports.createElement("div",{ref:yt,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:St,style:{display:"block"}},o)))}),Canvas=reactExports.forwardRef(function(a,o){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},a,{ref:o})))});function CharsetEncoder(){}CharsetEncoder.prototype.s2u=function(s){for(var a=this.s2uTable,o="",c=0;c<s.length;){var d=s[c++];if(!(d>=0&&d<=126||d>=161&&d<=223)&&c<s.length&&(d=d<<8|s[c++]),a[d]===void 0)return console.error("unknown char code "+d+"."),o;o+=String.fromCharCode(a[d])}return o};CharsetEncoder.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657};function DataViewEx(s,a){this.dv=new DataView(s),this.offset=0,this.littleEndian=a!==void 0?a:!0,this.encoder=new CharsetEncoder}DataViewEx.prototype={constructor:DataViewEx,getInt8:function(){var s=this.dv.getInt8(this.offset);return this.offset+=1,s},getInt8Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getInt8());return a},getUint8:function(){var s=this.dv.getUint8(this.offset);return this.offset+=1,s},getUint8Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getUint8());return a},getInt16:function(){var s=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,s},getInt16Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getInt16());return a},getUint16:function(){var s=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,s},getUint16Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getUint16());return a},getInt32:function(){var s=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,s},getInt32Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getInt32());return a},getUint32:function(){var s=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,s},getUint32Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getUint32());return a},getFloat32:function(){var s=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s},getFloat32Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getFloat32());return a},getFloat64:function(){var s=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s},getFloat64Array:function(s){for(var a=[],o=0;o<s;o++)a.push(this.getFloat64());return a},getIndex:function(s,a){switch(s){case 1:return a===!0?this.getUint8():this.getInt8();case 2:return a===!0?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+s+" exception."}},getIndexArray:function(s,a,o){for(var c=[],d=0;d<a;d++)c.push(this.getIndex(s,o));return c},getChars:function(s){for(var a="";s>0;){var o=this.getUint8();if(s--,o===0)break;a+=String.fromCharCode(o)}for(;s>0;)this.getUint8(),s--;return a},getSjisStringsAsUnicode:function(s){for(var a=[];s>0;){var o=this.getUint8();if(s--,o===0)break;a.push(o)}for(;s>0;)this.getUint8(),s--;return this.encoder.s2u(new Uint8Array(a))},getUnicodeStrings:function(s){for(var a="";s>0;){var o=this.getUint16();if(s-=2,o===0)break;a+=String.fromCharCode(o)}for(;s>0;)this.getUint8(),s--;return a},getTextBuffer:function(){var s=this.getUint32();return this.getUnicodeStrings(s)}};function DataCreationHelper(){}DataCreationHelper.prototype={constructor:DataCreationHelper,leftToRightVector3:function(s){s[2]=-s[2]},leftToRightQuaternion:function(s){s[0]=-s[0],s[1]=-s[1]},leftToRightEuler:function(s){s[0]=-s[0],s[1]=-s[1]},leftToRightIndexOrder:function(s){var a=s[2];s[2]=s[0],s[0]=a},leftToRightVector3Range:function(s,a){var o=-a[2];a[2]=-s[2],s[2]=o},leftToRightEulerRange:function(s,a){var o=-a[0],c=-a[1];a[0]=-s[0],a[1]=-s[1],s[0]=o,s[1]=c}};const KHR_SUPERCOMPRESSION_NONE=0,KHR_SUPERCOMPRESSION_ZSTD=2,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT=0,KHR_DF_VENDORID_KHRONOS=0,KHR_DF_VERSION=2,KHR_DF_MODEL_UNSPECIFIED=0,KHR_DF_FLAG_ALPHA_STRAIGHT=0,KHR_DF_FLAG_ALPHA_PREMULTIPLIED=1,KHR_DF_TRANSFER_SRGB=2,KHR_DF_PRIMARIES_BT709=1,KHR_DF_SAMPLE_DATATYPE_SIGNED=64,VK_FORMAT_UNDEFINED=0,VK_FORMAT_R8_UNORM=9,VK_FORMAT_R8_SRGB=15,VK_FORMAT_R8G8_UNORM=16,VK_FORMAT_R8G8_SRGB=22,VK_FORMAT_R8G8B8A8_UNORM=37,VK_FORMAT_R8G8B8A8_SRGB=43,VK_FORMAT_R16_SFLOAT=76,VK_FORMAT_R16G16_SFLOAT=83,VK_FORMAT_R16G16B16A16_SFLOAT=97,VK_FORMAT_R32_SFLOAT=100,VK_FORMAT_R32G32_SFLOAT=103,VK_FORMAT_R32G32B32A32_SFLOAT=109;class KTX2Container{constructor(){this.vkFormat=VK_FORMAT_UNDEFINED,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=KHR_SUPERCOMPRESSION_NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:KHR_DF_VENDORID_KHRONOS,descriptorType:KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,descriptorBlockSize:0,versionNumber:KHR_DF_VERSION,colorModel:KHR_DF_MODEL_UNSPECIFIED,colorPrimaries:KHR_DF_PRIMARIES_BT709,transferFunction:KHR_DF_TRANSFER_SRGB,flags:KHR_DF_FLAG_ALPHA_STRAIGHT,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class BufferReader{constructor(a,o,c,d){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(a.buffer,a.byteOffset+o,c),this._littleEndian=d,this._offset=0}_nextUint8(){const a=this._dataView.getUint8(this._offset);return this._offset+=1,a}_nextUint16(){const a=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,a}_nextUint32(){const a=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,a}_nextUint64(){const a=this._dataView.getUint32(this._offset,this._littleEndian),o=this._dataView.getUint32(this._offset+4,this._littleEndian),c=a+2**32*o;return this._offset+=8,c}_nextInt32(){const a=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,a}_skip(a){return this._offset+=a,this}_scan(a,o=0){const c=this._offset;let d=0;for(;this._dataView.getUint8(this._offset)!==o&&d<a;)d++,this._offset++;return d<a&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+c,d)}}const KTX2_ID=[171,75,84,88,32,50,48,187,13,10,26,10];function decodeText(s){return typeof TextDecoder<"u"?new TextDecoder().decode(s):Buffer.from(s).toString("utf8")}function read(s){const a=new Uint8Array(s.buffer,s.byteOffset,KTX2_ID.length);if(a[0]!==KTX2_ID[0]||a[1]!==KTX2_ID[1]||a[2]!==KTX2_ID[2]||a[3]!==KTX2_ID[3]||a[4]!==KTX2_ID[4]||a[5]!==KTX2_ID[5]||a[6]!==KTX2_ID[6]||a[7]!==KTX2_ID[7]||a[8]!==KTX2_ID[8]||a[9]!==KTX2_ID[9]||a[10]!==KTX2_ID[10]||a[11]!==KTX2_ID[11])throw new Error("Missing KTX 2.0 identifier.");const o=new KTX2Container,c=17*Uint32Array.BYTES_PER_ELEMENT,d=new BufferReader(s,KTX2_ID.length,c,!0);o.vkFormat=d._nextUint32(),o.typeSize=d._nextUint32(),o.pixelWidth=d._nextUint32(),o.pixelHeight=d._nextUint32(),o.pixelDepth=d._nextUint32(),o.layerCount=d._nextUint32(),o.faceCount=d._nextUint32();const b=d._nextUint32();o.supercompressionScheme=d._nextUint32();const $=d._nextUint32(),j=d._nextUint32(),_e=d._nextUint32(),et=d._nextUint32(),tt=d._nextUint64(),rt=d._nextUint64(),nt=b*3*8,it=new BufferReader(s,KTX2_ID.length+c,nt,!0);for(let Dt=0;Dt<b;Dt++)o.levels.push({levelData:new Uint8Array(s.buffer,s.byteOffset+it._nextUint64(),it._nextUint64()),uncompressedByteLength:it._nextUint64()});const at=new BufferReader(s,$,j,!0),ct={vendorId:at._skip(4)._nextUint16(),descriptorType:at._nextUint16(),versionNumber:at._nextUint16(),descriptorBlockSize:at._nextUint16(),colorModel:at._nextUint8(),colorPrimaries:at._nextUint8(),transferFunction:at._nextUint8(),flags:at._nextUint8(),texelBlockDimension:[at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8()],bytesPlane:[at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8()],samples:[]},st=6,ot=4,ht=(ct.descriptorBlockSize/4-st)/ot;for(let Dt=0;Dt<ht;Dt++){const $t={bitOffset:at._nextUint16(),bitLength:at._nextUint8(),channelType:at._nextUint8(),samplePosition:[at._nextUint8(),at._nextUint8(),at._nextUint8(),at._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};$t.channelType&KHR_DF_SAMPLE_DATATYPE_SIGNED?($t.sampleLower=at._nextInt32(),$t.sampleUpper=at._nextInt32()):($t.sampleLower=at._nextUint32(),$t.sampleUpper=at._nextUint32()),ct.samples[Dt]=$t}o.dataFormatDescriptor.length=0,o.dataFormatDescriptor.push(ct);const dt=new BufferReader(s,_e,et,!0);for(;dt._offset<et;){const Dt=dt._nextUint32(),$t=dt._scan(Dt),Lt=decodeText($t),Jt=dt._scan(Dt-$t.byteLength);o.keyValue[Lt]=Lt.match(/^ktx/i)?decodeText(Jt):Jt,dt._offset%4&&dt._skip(4-dt._offset%4)}if(rt<=0)return o;const ft=new BufferReader(s,tt,rt,!0),mt=ft._nextUint16(),gt=ft._nextUint16(),vt=ft._nextUint32(),yt=ft._nextUint32(),Et=ft._nextUint32(),St=ft._nextUint32(),Ct=[];for(let Dt=0;Dt<b;Dt++)Ct.push({imageFlags:ft._nextUint32(),rgbSliceByteOffset:ft._nextUint32(),rgbSliceByteLength:ft._nextUint32(),alphaSliceByteOffset:ft._nextUint32(),alphaSliceByteLength:ft._nextUint32()});const wt=tt+ft._offset,_t=wt+vt,Tt=_t+yt,Mt=Tt+Et,Bt=new Uint8Array(s.buffer,s.byteOffset+wt,vt),Rt=new Uint8Array(s.buffer,s.byteOffset+_t,yt),bt=new Uint8Array(s.buffer,s.byteOffset+Tt,Et),Pt=new Uint8Array(s.buffer,s.byteOffset+Mt,St);return o.globalData={endpointCount:mt,selectorCount:gt,imageDescs:Ct,endpointsData:Bt,selectorsData:Rt,tablesData:bt,extendedData:Pt},o}let A,I,B;const g={env:{emscripten_notify_memory_growth:function(s){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(a=>a.arrayBuffer()).then(a=>WebAssembly.instantiate(a,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,"base64"),g).then(this._init),A)}_init(a){I=a.instance,g.env.emscripten_notify_memory_growth(0)}decode(a,o=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const c=a.byteLength,d=I.exports.malloc(c);B.set(a,d),o=o||Number(I.exports.ZSTD_findDecompressedSize(d,c));const b=I.exports.malloc(o),$=I.exports.ZSTD_decompress(b,o,d,c),j=B.slice(b,b+$);return I.exports.free(d),I.exports.free(b),j}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var s=function(){try{var o={},c=Object.defineProperty,d=c(o,o,o)&&c}catch{}return d}(),a=function(o){if(this==null)throw TypeError();var c=String(this),d=c.length,b=o?Number(o):0;if(b!=b&&(b=0),!(b<0||b>=d)){var $=c.charCodeAt(b),j;return $>=55296&&$<=56319&&d>b+1&&(j=c.charCodeAt(b+1),j>=56320&&j<=57343)?($-55296)*1024+j-56320+65536:$}};s?s(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=a}();function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30);function tinf_build_bits_base(s,a,o,c){var d,b;for(d=0;d<o;++d)s[d]=0;for(d=0;d<30-o;++d)s[d+o]=d/o|0;for(b=c,d=0;d<30;++d)a[d]=b,b+=1<<s[d]}function tinf_build_fixed_trees(s,a){var o;for(o=0;o<7;++o)s.table[o]=0;for(s.table[7]=24,s.table[8]=152,s.table[9]=112,o=0;o<24;++o)s.trans[o]=256+o;for(o=0;o<144;++o)s.trans[24+o]=o;for(o=0;o<8;++o)s.trans[24+144+o]=280+o;for(o=0;o<112;++o)s.trans[24+144+8+o]=144+o;for(o=0;o<5;++o)a.table[o]=0;for(a.table[5]=32,o=0;o<32;++o)a.trans[o]=o}tinf_build_fixed_trees(sltree,sdtree);tinf_build_bits_base(length_bits,length_base,4,3);tinf_build_bits_base(dist_bits,dist_base,2,1);length_bits[28]=0;length_base[28]=258;function derive(s,a,o,c,d){return Math.pow(1-d,3)*s+3*Math.pow(1-d,2)*d*a+3*(1-d)*Math.pow(d,2)*o+Math.pow(d,3)*c}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox.prototype.addPoint=function(s,a){typeof s=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=s,this.x2=s),s<this.x1&&(this.x1=s),s>this.x2&&(this.x2=s)),typeof a=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=a,this.y2=a),a<this.y1&&(this.y1=a),a>this.y2&&(this.y2=a))};BoundingBox.prototype.addX=function(s){this.addPoint(s,null)};BoundingBox.prototype.addY=function(s){this.addPoint(null,s)};BoundingBox.prototype.addBezier=function(s,a,o,c,d,b,$,j){var _e=[s,a],et=[o,c],tt=[d,b],rt=[$,j];this.addPoint(s,a),this.addPoint($,j);for(var nt=0;nt<=1;nt++){var it=6*_e[nt]-12*et[nt]+6*tt[nt],at=-3*_e[nt]+9*et[nt]-9*tt[nt]+3*rt[nt],ct=3*et[nt]-3*_e[nt];if(at===0){if(it===0)continue;var st=-ct/it;0<st&&st<1&&(nt===0&&this.addX(derive(_e[nt],et[nt],tt[nt],rt[nt],st)),nt===1&&this.addY(derive(_e[nt],et[nt],tt[nt],rt[nt],st)));continue}var ot=Math.pow(it,2)-4*ct*at;if(!(ot<0)){var ht=(-it+Math.sqrt(ot))/(2*at);0<ht&&ht<1&&(nt===0&&this.addX(derive(_e[nt],et[nt],tt[nt],rt[nt],ht)),nt===1&&this.addY(derive(_e[nt],et[nt],tt[nt],rt[nt],ht)));var dt=(-it-Math.sqrt(ot))/(2*at);0<dt&&dt<1&&(nt===0&&this.addX(derive(_e[nt],et[nt],tt[nt],rt[nt],dt)),nt===1&&this.addY(derive(_e[nt],et[nt],tt[nt],rt[nt],dt)))}}};BoundingBox.prototype.addQuad=function(s,a,o,c,d,b){var $=s+.6666666666666666*(o-s),j=a+2/3*(c-a),_e=$+1/3*(d-s),et=j+1/3*(b-a);this.addBezier(s,a,$,j,_e,et,d,b)};function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(s,a){this.commands.push({type:"M",x:s,y:a})};Path.prototype.lineTo=function(s,a){this.commands.push({type:"L",x:s,y:a})};Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(s,a,o,c,d,b){this.commands.push({type:"C",x1:s,y1:a,x2:o,y2:c,x:d,y:b})};Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(s,a,o,c){this.commands.push({type:"Q",x1:s,y1:a,x:o,y:c})};Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})};Path.prototype.extend=function(s){if(s.commands)s=s.commands;else if(s instanceof BoundingBox){var a=s;this.moveTo(a.x1,a.y1),this.lineTo(a.x2,a.y1),this.lineTo(a.x2,a.y2),this.lineTo(a.x1,a.y2),this.close();return}Array.prototype.push.apply(this.commands,s)};Path.prototype.getBoundingBox=function(){for(var s=new BoundingBox,a=0,o=0,c=0,d=0,b=0;b<this.commands.length;b++){var $=this.commands[b];switch($.type){case"M":s.addPoint($.x,$.y),a=c=$.x,o=d=$.y;break;case"L":s.addPoint($.x,$.y),c=$.x,d=$.y;break;case"Q":s.addQuad(c,d,$.x1,$.y1,$.x,$.y),c=$.x,d=$.y;break;case"C":s.addBezier(c,d,$.x1,$.y1,$.x2,$.y2,$.x,$.y),c=$.x,d=$.y;break;case"Z":c=a,d=o;break;default:throw new Error("Unexpected path command "+$.type)}}return s.isEmpty()&&s.addPoint(0,0),s};Path.prototype.draw=function(s){s.beginPath();for(var a=0;a<this.commands.length;a+=1){var o=this.commands[a];o.type==="M"?s.moveTo(o.x,o.y):o.type==="L"?s.lineTo(o.x,o.y):o.type==="C"?s.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?s.quadraticCurveTo(o.x1,o.y1,o.x,o.y):o.type==="Z"&&s.closePath()}this.fill&&(s.fillStyle=this.fill,s.fill()),this.stroke&&(s.strokeStyle=this.stroke,s.lineWidth=this.strokeWidth,s.stroke())};Path.prototype.toPathData=function(s){s=s!==void 0?s:2;function a($){return Math.round($)===$?""+Math.round($):$.toFixed(s)}function o(){for(var $=arguments,j="",_e=0;_e<arguments.length;_e+=1){var et=$[_e];et>=0&&_e>0&&(j+=" "),j+=a(et)}return j}for(var c="",d=0;d<this.commands.length;d+=1){var b=this.commands[d];b.type==="M"?c+="M"+o(b.x,b.y):b.type==="L"?c+="L"+o(b.x,b.y):b.type==="C"?c+="C"+o(b.x1,b.y1,b.x2,b.y2,b.x,b.y):b.type==="Q"?c+="Q"+o(b.x1,b.y1,b.x,b.y):b.type==="Z"&&(c+="Z")}return c};Path.prototype.toSVG=function(s){var a='<path d="';return a+=this.toPathData(s),a+='"',this.fill&&this.fill!=="black"&&(this.fill===null?a+=' fill="none"':a+=' fill="'+this.fill+'"'),this.stroke&&(a+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),a+="/>",a};Path.prototype.toDOMElement=function(s){var a=this.toPathData(s),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",a),o};function fail(s){throw new Error(s)}function argument(s,a){s||fail(a)}var check={fail,argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode$1={},encode$1={},sizeOf={};function constant$3(s){return function(){return s}}encode$1.BYTE=function(s){return check.argument(s>=0&&s<=255,"Byte value should be between 0 and 255."),[s]};sizeOf.BYTE=constant$3(1);encode$1.CHAR=function(s){return[s.charCodeAt(0)]};sizeOf.CHAR=constant$3(1);encode$1.CHARARRAY=function(s){typeof s>"u"&&(s="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var a=[],o=0;o<s.length;o+=1)a[o]=s.charCodeAt(o);return a};sizeOf.CHARARRAY=function(s){return typeof s>"u"?0:s.length};encode$1.USHORT=function(s){return[s>>8&255,s&255]};sizeOf.USHORT=constant$3(2);encode$1.SHORT=function(s){return s>=LIMIT16&&(s=-(2*LIMIT16-s)),[s>>8&255,s&255]};sizeOf.SHORT=constant$3(2);encode$1.UINT24=function(s){return[s>>16&255,s>>8&255,s&255]};sizeOf.UINT24=constant$3(3);encode$1.ULONG=function(s){return[s>>24&255,s>>16&255,s>>8&255,s&255]};sizeOf.ULONG=constant$3(4);encode$1.LONG=function(s){return s>=LIMIT32&&(s=-(2*LIMIT32-s)),[s>>24&255,s>>16&255,s>>8&255,s&255]};sizeOf.LONG=constant$3(4);encode$1.FIXED=encode$1.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode$1.FWORD=encode$1.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode$1.UFWORD=encode$1.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode$1.LONGDATETIME=function(s){return[0,0,0,0,s>>24&255,s>>16&255,s>>8&255,s&255]};sizeOf.LONGDATETIME=constant$3(8);encode$1.TAG=function(s){return check.argument(s.length===4,"Tag should be exactly 4 ASCII characters."),[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3)]};sizeOf.TAG=constant$3(4);encode$1.Card8=encode$1.BYTE;sizeOf.Card8=sizeOf.BYTE;encode$1.Card16=encode$1.USHORT;sizeOf.Card16=sizeOf.USHORT;encode$1.OffSize=encode$1.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode$1.SID=encode$1.USHORT;sizeOf.SID=sizeOf.USHORT;encode$1.NUMBER=function(s){return s>=-107&&s<=107?[s+139]:s>=108&&s<=1131?(s=s-108,[(s>>8)+247,s&255]):s>=-1131&&s<=-108?(s=-s-108,[(s>>8)+251,s&255]):s>=-32768&&s<=32767?encode$1.NUMBER16(s):encode$1.NUMBER32(s)};sizeOf.NUMBER=function(s){return encode$1.NUMBER(s).length};encode$1.NUMBER16=function(s){return[28,s>>8&255,s&255]};sizeOf.NUMBER16=constant$3(3);encode$1.NUMBER32=function(s){return[29,s>>24&255,s>>16&255,s>>8&255,s&255]};sizeOf.NUMBER32=constant$3(5);encode$1.REAL=function(s){var a=s.toString(),o=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(a);if(o){var c=parseFloat("1e"+((o[2]?+o[2]:0)+o[1].length));a=(Math.round(s*c)/c).toString()}for(var d="",b=0,$=a.length;b<$;b+=1){var j=a[b];j==="e"?d+=a[++b]==="-"?"c":"b":j==="."?d+="a":j==="-"?d+="e":d+=j}d+=d.length&1?"f":"ff";for(var _e=[30],et=0,tt=d.length;et<tt;et+=2)_e.push(parseInt(d.substr(et,2),16));return _e};sizeOf.REAL=function(s){return encode$1.REAL(s).length};encode$1.NAME=encode$1.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode$1.STRING=encode$1.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode$1.UTF8=function(s,a,o){for(var c=[],d=o,b=0;b<d;b++,a+=1)c[b]=s.getUint8(a);return String.fromCharCode.apply(null,c)};decode$1.UTF16=function(s,a,o){for(var c=[],d=o/2,b=0;b<d;b++,a+=2)c[b]=s.getUint16(a);return String.fromCharCode.apply(null,c)};encode$1.UTF16=function(s){for(var a=[],o=0;o<s.length;o+=1){var c=s.charCodeAt(o);a[a.length]=c>>8&255,a[a.length]=c&255}return a};sizeOf.UTF16=function(s){return s.length*2};var eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};decode$1.MACSTRING=function(s,a,o,c){var d=eightBitMacEncodings[c];if(d!==void 0){for(var b="",$=0;$<o;$++){var j=s.getUint8(a+$);j<=127?b+=String.fromCharCode(j):b+=d[j&127]}return b}};var macEncodingTableCache=typeof WeakMap=="function"&&new WeakMap,macEncodingCacheKeys,getMacEncodingTable=function(s){if(!macEncodingCacheKeys){macEncodingCacheKeys={};for(var a in eightBitMacEncodings)macEncodingCacheKeys[a]=new String(a)}var o=macEncodingCacheKeys[s];if(o!==void 0){if(macEncodingTableCache){var c=macEncodingTableCache.get(o);if(c!==void 0)return c}var d=eightBitMacEncodings[s];if(d!==void 0){for(var b={},$=0;$<d.length;$++)b[d.charCodeAt($)]=$+128;return macEncodingTableCache&&macEncodingTableCache.set(o,b),b}}};encode$1.MACSTRING=function(s,a){var o=getMacEncodingTable(a);if(o!==void 0){for(var c=[],d=0;d<s.length;d++){var b=s.charCodeAt(d);if(b>=128&&(b=o[b],b===void 0))return;c[d]=b}return c}};sizeOf.MACSTRING=function(s,a){var o=encode$1.MACSTRING(s,a);return o!==void 0?o.length:0};function isByteEncodable(s){return s>=-128&&s<=127}function encodeVarDeltaRunAsZeroes(s,a,o){for(var c=0,d=s.length;a<d&&c<64&&s[a]===0;)++a,++c;return o.push(128|c-1),a}function encodeVarDeltaRunAsBytes(s,a,o){for(var c=0,d=s.length,b=a;b<d&&c<64;){var $=s[b];if(!isByteEncodable($)||$===0&&b+1<d&&s[b+1]===0)break;++b,++c}o.push(c-1);for(var j=a;j<b;++j)o.push(s[j]+256&255);return b}function encodeVarDeltaRunAsWords(s,a,o){for(var c=0,d=s.length,b=a;b<d&&c<64;){var $=s[b];if($===0||isByteEncodable($)&&b+1<d&&isByteEncodable(s[b+1]))break;++b,++c}o.push(64|c-1);for(var j=a;j<b;++j){var _e=s[j];o.push(_e+65536>>8&255,_e+256&255)}return b}encode$1.VARDELTAS=function(s){for(var a=0,o=[];a<s.length;){var c=s[a];c===0?a=encodeVarDeltaRunAsZeroes(s,a,o):c>=-128&&c<=127?a=encodeVarDeltaRunAsBytes(s,a,o):a=encodeVarDeltaRunAsWords(s,a,o)}return o};encode$1.INDEX=function(s){for(var a=1,o=[a],c=[],d=0;d<s.length;d+=1){var b=encode$1.OBJECT(s[d]);Array.prototype.push.apply(c,b),a+=b.length,o.push(a)}if(c.length===0)return[0,0];for(var $=[],j=1+Math.floor(Math.log(a)/Math.log(2))/8|0,_e=[void 0,encode$1.BYTE,encode$1.USHORT,encode$1.UINT24,encode$1.ULONG][j],et=0;et<o.length;et+=1){var tt=_e(o[et]);Array.prototype.push.apply($,tt)}return Array.prototype.concat(encode$1.Card16(s.length),encode$1.OffSize(j),$,c)};sizeOf.INDEX=function(s){return encode$1.INDEX(s).length};encode$1.DICT=function(s){for(var a=[],o=Object.keys(s),c=o.length,d=0;d<c;d+=1){var b=parseInt(o[d],0),$=s[b];a=a.concat(encode$1.OPERAND($.value,$.type)),a=a.concat(encode$1.OPERATOR(b))}return a};sizeOf.DICT=function(s){return encode$1.DICT(s).length};encode$1.OPERATOR=function(s){return s<1200?[s]:[12,s-1200]};encode$1.OPERAND=function(s,a){var o=[];if(Array.isArray(a))for(var c=0;c<a.length;c+=1)check.argument(s.length===a.length,"Not enough arguments given for type"+a),o=o.concat(encode$1.OPERAND(s[c],a[c]));else if(a==="SID")o=o.concat(encode$1.NUMBER(s));else if(a==="offset")o=o.concat(encode$1.NUMBER32(s));else if(a==="number")o=o.concat(encode$1.NUMBER(s));else if(a==="real")o=o.concat(encode$1.REAL(s));else throw new Error("Unknown operand type "+a);return o};encode$1.OP=encode$1.BYTE;sizeOf.OP=sizeOf.BYTE;var wmm=typeof WeakMap=="function"&&new WeakMap;encode$1.CHARSTRING=function(s){if(wmm){var a=wmm.get(s);if(a!==void 0)return a}for(var o=[],c=s.length,d=0;d<c;d+=1){var b=s[d];o=o.concat(encode$1[b.type](b.value))}return wmm&&wmm.set(s,o),o};sizeOf.CHARSTRING=function(s){return encode$1.CHARSTRING(s).length};encode$1.OBJECT=function(s){var a=encode$1[s.type];return check.argument(a!==void 0,"No encoding function for type "+s.type),a(s.value)};sizeOf.OBJECT=function(s){var a=sizeOf[s.type];return check.argument(a!==void 0,"No sizeOf function for type "+s.type),a(s.value)};encode$1.TABLE=function(s){for(var a=[],o=s.fields.length,c=[],d=[],b=0;b<o;b+=1){var $=s.fields[b],j=encode$1[$.type];check.argument(j!==void 0,"No encoding function for field type "+$.type+" ("+$.name+")");var _e=s[$.name];_e===void 0&&(_e=$.value);var et=j(_e);$.type==="TABLE"?(d.push(a.length),a=a.concat([0,0]),c.push(et)):a=a.concat(et)}for(var tt=0;tt<c.length;tt+=1){var rt=d[tt],nt=a.length;check.argument(nt<65536,"Table "+s.tableName+" too big."),a[rt]=nt>>8,a[rt+1]=nt&255,a=a.concat(c[tt])}return a};sizeOf.TABLE=function(s){for(var a=0,o=s.fields.length,c=0;c<o;c+=1){var d=s.fields[c],b=sizeOf[d.type];check.argument(b!==void 0,"No sizeOf function for field type "+d.type+" ("+d.name+")");var $=s[d.name];$===void 0&&($=d.value),a+=b($),d.type==="TABLE"&&(a+=2)}return a};encode$1.RECORD=encode$1.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode$1.LITERAL=function(s){return s};sizeOf.LITERAL=function(s){return s.length};function Table(s,a,o){if(a.length&&(a[0].name!=="coverageFormat"||a[0].value===1))for(var c=0;c<a.length;c+=1){var d=a[c];this[d.name]=d.value}if(this.tableName=s,this.fields=a,o)for(var b=Object.keys(o),$=0;$<b.length;$+=1){var j=b[$],_e=o[j];this[j]!==void 0&&(this[j]=_e)}}Table.prototype.encode=function(){return encode$1.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};function ushortList(s,a,o){o===void 0&&(o=a.length);var c=new Array(a.length+1);c[0]={name:s+"Count",type:"USHORT",value:o};for(var d=0;d<a.length;d++)c[d+1]={name:s+d,type:"USHORT",value:a[d]};return c}function tableList(s,a,o){var c=a.length,d=new Array(c+1);d[0]={name:s+"Count",type:"USHORT",value:c};for(var b=0;b<c;b++)d[b+1]={name:s+b,type:"TABLE",value:o(a[b],b)};return d}function recordList(s,a,o){var c=a.length,d=[];d[0]={name:s+"Count",type:"USHORT",value:c};for(var b=0;b<c;b++)d=d.concat(o(a[b],b));return d}function Coverage(s){s.format===1?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",s.glyphs))):s.format===2?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(recordList("rangeRecord",s.ranges,function(a){return[{name:"startGlyphID",type:"USHORT",value:a.start},{name:"endGlyphID",type:"USHORT",value:a.end},{name:"startCoverageIndex",type:"USHORT",value:a.index}]}))):check.assert(!1,"Coverage format must be 1 or 2.")}Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;function ScriptList(s){Table.call(this,"scriptListTable",recordList("scriptRecord",s,function(a,o){var c=a.script,d=c.defaultLangSys;return check.assert(!!d,"Unable to write GSUB: script "+a.tag+" has no default language system."),[{name:"scriptTag"+o,type:"TAG",value:a.tag},{name:"script"+o,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:d.reqFeatureIndex}].concat(ushortList("featureIndex",d.featureIndexes)))}].concat(recordList("langSys",c.langSysRecords,function(b,$){var j=b.langSys;return[{name:"langSysTag"+$,type:"TAG",value:b.tag},{name:"langSys"+$,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:j.reqFeatureIndex}].concat(ushortList("featureIndex",j.featureIndexes)))}]})))}]}))}ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;function FeatureList(s){Table.call(this,"featureListTable",recordList("featureRecord",s,function(a,o){var c=a.feature;return[{name:"featureTag"+o,type:"TAG",value:a.tag},{name:"feature"+o,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:c.featureParams}].concat(ushortList("lookupListIndex",c.lookupListIndexes)))}]}))}FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;function LookupList(s,a){Table.call(this,"lookupListTable",tableList("lookup",s,function(o){var c=a[o.lookupType];return check.assert(!!c,"Unable to write GSUB lookup type "+o.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:o.lookupType},{name:"lookupFlag",type:"USHORT",value:o.lookupFlag}].concat(tableList("subtable",o.subtables,c)))}))}LookupList.prototype=Object.create(Table.prototype);LookupList.prototype.constructor=LookupList;var table$1={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(s,a){return s.getUint8(a)}function getUShort(s,a){return s.getUint16(a,!1)}function getShort(s,a){return s.getInt16(a,!1)}function getULong(s,a){return s.getUint32(a,!1)}function getFixed(s,a){var o=s.getInt16(a,!1),c=s.getUint16(a+2,!1);return o+c/65535}function getTag$3(s,a){for(var o="",c=a;c<a+4;c+=1)o+=String.fromCharCode(s.getInt8(c));return o}function getOffset(s,a,o){for(var c=0,d=0;d<o;d+=1)c<<=8,c+=s.getUint8(a+d);return c}function getBytes(s,a,o){for(var c=[],d=a;d<o;d+=1)c.push(s.getUint8(d));return c}function bytesToString$1(s){for(var a="",o=0;o<s.length;o+=1)a+=String.fromCharCode(s[o]);return a}var typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser$1(s,a){this.data=s,this.offset=a,this.relativeOffset=0}Parser$1.prototype.parseByte=function(){var s=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,s};Parser$1.prototype.parseChar=function(){var s=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,s};Parser$1.prototype.parseCard8=Parser$1.prototype.parseByte;Parser$1.prototype.parseUShort=function(){var s=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,s};Parser$1.prototype.parseCard16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseSID=Parser$1.prototype.parseUShort;Parser$1.prototype.parseOffset16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseShort=function(){var s=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,s};Parser$1.prototype.parseF2Dot14=function(){var s=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,s};Parser$1.prototype.parseULong=function(){var s=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,s};Parser$1.prototype.parseOffset32=Parser$1.prototype.parseULong;Parser$1.prototype.parseFixed=function(){var s=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,s};Parser$1.prototype.parseString=function(s){var a=this.data,o=this.offset+this.relativeOffset,c="";this.relativeOffset+=s;for(var d=0;d<s;d++)c+=String.fromCharCode(a.getUint8(o+d));return c};Parser$1.prototype.parseTag=function(){return this.parseString(4)};Parser$1.prototype.parseLongDateTime=function(){var s=getULong(this.data,this.offset+this.relativeOffset+4);return s-=2082844800,this.relativeOffset+=8,s};Parser$1.prototype.parseVersion=function(s){var a=getUShort(this.data,this.offset+this.relativeOffset),o=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,s===void 0&&(s=4096),a+o/s/10};Parser$1.prototype.skip=function(s,a){a===void 0&&(a=1),this.relativeOffset+=typeOffsets[s]*a};Parser$1.prototype.parseULongList=function(s){s===void 0&&(s=this.parseULong());for(var a=new Array(s),o=this.data,c=this.offset+this.relativeOffset,d=0;d<s;d++)a[d]=o.getUint32(c),c+=4;return this.relativeOffset+=s*4,a};Parser$1.prototype.parseOffset16List=Parser$1.prototype.parseUShortList=function(s){s===void 0&&(s=this.parseUShort());for(var a=new Array(s),o=this.data,c=this.offset+this.relativeOffset,d=0;d<s;d++)a[d]=o.getUint16(c),c+=2;return this.relativeOffset+=s*2,a};Parser$1.prototype.parseShortList=function(s){for(var a=new Array(s),o=this.data,c=this.offset+this.relativeOffset,d=0;d<s;d++)a[d]=o.getInt16(c),c+=2;return this.relativeOffset+=s*2,a};Parser$1.prototype.parseByteList=function(s){for(var a=new Array(s),o=this.data,c=this.offset+this.relativeOffset,d=0;d<s;d++)a[d]=o.getUint8(c++);return this.relativeOffset+=s,a};Parser$1.prototype.parseList=function(s,a){a||(a=s,s=this.parseUShort());for(var o=new Array(s),c=0;c<s;c++)o[c]=a.call(this);return o};Parser$1.prototype.parseList32=function(s,a){a||(a=s,s=this.parseULong());for(var o=new Array(s),c=0;c<s;c++)o[c]=a.call(this);return o};Parser$1.prototype.parseRecordList=function(s,a){a||(a=s,s=this.parseUShort());for(var o=new Array(s),c=Object.keys(a),d=0;d<s;d++){for(var b={},$=0;$<c.length;$++){var j=c[$],_e=a[j];b[j]=_e.call(this)}o[d]=b}return o};Parser$1.prototype.parseRecordList32=function(s,a){a||(a=s,s=this.parseULong());for(var o=new Array(s),c=Object.keys(a),d=0;d<s;d++){for(var b={},$=0;$<c.length;$++){var j=c[$],_e=a[j];b[j]=_e.call(this)}o[d]=b}return o};Parser$1.prototype.parseStruct=function(s){if(typeof s=="function")return s.call(this);for(var a=Object.keys(s),o={},c=0;c<a.length;c++){var d=a[c],b=s[d];o[d]=b.call(this)}return o};Parser$1.prototype.parseValueRecord=function(s){if(s===void 0&&(s=this.parseUShort()),s!==0){var a={};return s&1&&(a.xPlacement=this.parseShort()),s&2&&(a.yPlacement=this.parseShort()),s&4&&(a.xAdvance=this.parseShort()),s&8&&(a.yAdvance=this.parseShort()),s&16&&(a.xPlaDevice=void 0,this.parseShort()),s&32&&(a.yPlaDevice=void 0,this.parseShort()),s&64&&(a.xAdvDevice=void 0,this.parseShort()),s&128&&(a.yAdvDevice=void 0,this.parseShort()),a}};Parser$1.prototype.parseValueRecordList=function(){for(var s=this.parseUShort(),a=this.parseUShort(),o=new Array(a),c=0;c<a;c++)o[c]=this.parseValueRecord(s);return o};Parser$1.prototype.parsePointer=function(s){var a=this.parseOffset16();if(a>0)return new Parser$1(this.data,this.offset+a).parseStruct(s)};Parser$1.prototype.parsePointer32=function(s){var a=this.parseOffset32();if(a>0)return new Parser$1(this.data,this.offset+a).parseStruct(s)};Parser$1.prototype.parseListOfLists=function(s){for(var a=this.parseOffset16List(),o=a.length,c=this.relativeOffset,d=new Array(o),b=0;b<o;b++){var $=a[b];if($===0){d[b]=void 0;continue}if(this.relativeOffset=$,s){for(var j=this.parseOffset16List(),_e=new Array(j.length),et=0;et<j.length;et++)this.relativeOffset=$+j[et],_e[et]=s.call(this);d[b]=_e}else d[b]=this.parseUShortList()}return this.relativeOffset=c,d};Parser$1.prototype.parseCoverage=function(){var s=this.offset+this.relativeOffset,a=this.parseUShort(),o=this.parseUShort();if(a===1)return{format:1,glyphs:this.parseUShortList(o)};if(a===2){for(var c=new Array(o),d=0;d<o;d++)c[d]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:c}}throw new Error("0x"+s.toString(16)+": Coverage format must be 1 or 2.")};Parser$1.prototype.parseClassDef=function(){var s=this.offset+this.relativeOffset,a=this.parseUShort();if(a===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(a===2)return{format:2,ranges:this.parseRecordList({start:Parser$1.uShort,end:Parser$1.uShort,classId:Parser$1.uShort})};throw new Error("0x"+s.toString(16)+": ClassDef format must be 1 or 2.")};Parser$1.list=function(s,a){return function(){return this.parseList(s,a)}};Parser$1.list32=function(s,a){return function(){return this.parseList32(s,a)}};Parser$1.recordList=function(s,a){return function(){return this.parseRecordList(s,a)}};Parser$1.recordList32=function(s,a){return function(){return this.parseRecordList32(s,a)}};Parser$1.pointer=function(s){return function(){return this.parsePointer(s)}};Parser$1.pointer32=function(s){return function(){return this.parsePointer32(s)}};Parser$1.tag=Parser$1.prototype.parseTag;Parser$1.byte=Parser$1.prototype.parseByte;Parser$1.uShort=Parser$1.offset16=Parser$1.prototype.parseUShort;Parser$1.uShortList=Parser$1.prototype.parseUShortList;Parser$1.uLong=Parser$1.offset32=Parser$1.prototype.parseULong;Parser$1.uLongList=Parser$1.prototype.parseULongList;Parser$1.struct=Parser$1.prototype.parseStruct;Parser$1.coverage=Parser$1.prototype.parseCoverage;Parser$1.classDef=Parser$1.prototype.parseClassDef;var langSysTable={reserved:Parser$1.uShort,reqFeatureIndex:Parser$1.uShort,featureIndexes:Parser$1.uShortList};Parser$1.prototype.parseScriptList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,script:Parser$1.pointer({defaultLangSys:Parser$1.pointer(langSysTable),langSysRecords:Parser$1.recordList({tag:Parser$1.tag,langSys:Parser$1.pointer(langSysTable)})})}))||[]};Parser$1.prototype.parseFeatureList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,feature:Parser$1.pointer({featureParams:Parser$1.offset16,lookupListIndexes:Parser$1.uShortList})}))||[]};Parser$1.prototype.parseLookupList=function(s){return this.parsePointer(Parser$1.list(Parser$1.pointer(function(){var a=this.parseUShort();check.argument(1<=a&&a<=9,"GPOS/GSUB lookup type "+a+" unknown.");var o=this.parseUShort(),c=o&16;return{lookupType:a,lookupFlag:o,subtables:this.parseList(Parser$1.pointer(s[a])),markFilteringSet:c?this.parseUShort():void 0}})))||[]};Parser$1.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var s=this.parseUShort(),a=this.parseUShort();check.argument(s===1&&a<1,"GPOS/GSUB feature variations table unknown.");var o=this.parseRecordList32({conditionSetOffset:Parser$1.offset32,featureTableSubstitutionOffset:Parser$1.offset32});return o})||[]};var parse$2={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort,getULong,getFixed,getTag:getTag$3,getOffset,getBytes,bytesToString:bytesToString$1,Parser:Parser$1};function parseCmapTableFormat12(s,a){a.parseUShort(),s.length=a.parseULong(),s.language=a.parseULong();var o;s.groupCount=o=a.parseULong(),s.glyphIndexMap={};for(var c=0;c<o;c+=1)for(var d=a.parseULong(),b=a.parseULong(),$=a.parseULong(),j=d;j<=b;j+=1)s.glyphIndexMap[j]=$,$++}function parseCmapTableFormat4(s,a,o,c,d){s.length=a.parseUShort(),s.language=a.parseUShort();var b;s.segCount=b=a.parseUShort()>>1,a.skip("uShort",3),s.glyphIndexMap={};for(var $=new parse$2.Parser(o,c+d+14),j=new parse$2.Parser(o,c+d+16+b*2),_e=new parse$2.Parser(o,c+d+16+b*4),et=new parse$2.Parser(o,c+d+16+b*6),tt=c+d+16+b*8,rt=0;rt<b-1;rt+=1)for(var nt=void 0,it=$.parseUShort(),at=j.parseUShort(),ct=_e.parseShort(),st=et.parseUShort(),ot=at;ot<=it;ot+=1)st!==0?(tt=et.offset+et.relativeOffset-2,tt+=st,tt+=(ot-at)*2,nt=parse$2.getUShort(o,tt),nt!==0&&(nt=nt+ct&65535)):nt=ot+ct&65535,s.glyphIndexMap[ot]=nt}function parseCmapTable(s,a){var o={};o.version=parse$2.getUShort(s,a),check.argument(o.version===0,"cmap table version should be 0."),o.numTables=parse$2.getUShort(s,a+2);for(var c=-1,d=o.numTables-1;d>=0;d-=1){var b=parse$2.getUShort(s,a+4+d*8),$=parse$2.getUShort(s,a+4+d*8+2);if(b===3&&($===0||$===1||$===10)||b===0&&($===0||$===1||$===2||$===3||$===4)){c=parse$2.getULong(s,a+4+d*8+4);break}}if(c===-1)throw new Error("No valid cmap sub-tables found.");var j=new parse$2.Parser(s,a+c);if(o.format=j.parseUShort(),o.format===12)parseCmapTableFormat12(o,j);else if(o.format===4)parseCmapTableFormat4(o,j,s,a,c);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+o.format+").");return o}function addSegment(s,a,o){s.segments.push({end:a,start:a,delta:-(a-o),offset:0,glyphIndex:o})}function addTerminatorSegment(s){s.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(s){var a=!0,o;for(o=s.length-1;o>0;o-=1){var c=s.get(o);if(c.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),a=!1;break}}var d=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:a?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:a?12:12+8}];a||(d=d.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),d=d.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var b=new table$1.Table("cmap",d);for(b.segments=[],o=0;o<s.length;o+=1){for(var $=s.get(o),j=0;j<$.unicodes.length;j+=1)addSegment(b,$.unicodes[j],o);b.segments=b.segments.sort(function(ht,dt){return ht.start-dt.start})}addTerminatorSegment(b);var _e=b.segments.length,et=0,tt=[],rt=[],nt=[],it=[],at=[],ct=[];for(o=0;o<_e;o+=1){var st=b.segments[o];st.end<=65535&&st.start<=65535?(tt=tt.concat({name:"end_"+o,type:"USHORT",value:st.end}),rt=rt.concat({name:"start_"+o,type:"USHORT",value:st.start}),nt=nt.concat({name:"idDelta_"+o,type:"SHORT",value:st.delta}),it=it.concat({name:"idRangeOffset_"+o,type:"USHORT",value:st.offset}),st.glyphId!==void 0&&(at=at.concat({name:"glyph_"+o,type:"USHORT",value:st.glyphId}))):et+=1,!a&&st.glyphIndex!==void 0&&(ct=ct.concat({name:"cmap12Start_"+o,type:"ULONG",value:st.start}),ct=ct.concat({name:"cmap12End_"+o,type:"ULONG",value:st.end}),ct=ct.concat({name:"cmap12Glyph_"+o,type:"ULONG",value:st.glyphIndex}))}if(b.segCountX2=(_e-et)*2,b.searchRange=Math.pow(2,Math.floor(Math.log(_e-et)/Math.log(2)))*2,b.entrySelector=Math.log(b.searchRange/2)/Math.log(2),b.rangeShift=b.segCountX2-b.searchRange,b.fields=b.fields.concat(tt),b.fields.push({name:"reservedPad",type:"USHORT",value:0}),b.fields=b.fields.concat(rt),b.fields=b.fields.concat(nt),b.fields=b.fields.concat(it),b.fields=b.fields.concat(at),b.cmap4Length=14+tt.length*2+2+rt.length*2+nt.length*2+it.length*2+at.length*2,!a){var ot=16+ct.length*4;b.cmap12Offset=12+2*2+4+b.cmap4Length,b.fields=b.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ot},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ct.length/3}]),b.fields=b.fields.concat(ct)}return b}var cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(s){this.font=s}DefaultEncoding.prototype.charToGlyphIndex=function(s){var a=s.codePointAt(0),o=this.font.glyphs;if(o){for(var c=0;c<o.length;c+=1)for(var d=o.get(c),b=0;b<d.unicodes.length;b+=1)if(d.unicodes[b]===a)return c}return null};function CffEncoding(s,a){this.encoding=s,this.charset=a}CffEncoding.prototype.charToGlyphIndex=function(s){var a=s.codePointAt(0),o=this.encoding[a];return this.charset.indexOf(o)};function line(s,a,o,c,d){s.beginPath(),s.moveTo(a,o),s.lineTo(c,d),s.stroke()}var draw={line};function getPathDefinition(s,a){var o=a||new Path;return{configurable:!0,get:function(){return typeof o=="function"&&(o=o()),o},set:function(c){o=c}}}function Glyph(s){this.bindConstructorValues(s)}Glyph.prototype.bindConstructorValues=function(s){this.index=s.index||0,this.name=s.name||null,this.unicode=s.unicode||void 0,this.unicodes=s.unicodes||s.unicode!==void 0?[s.unicode]:[],"xMin"in s&&(this.xMin=s.xMin),"yMin"in s&&(this.yMin=s.yMin),"xMax"in s&&(this.xMax=s.xMax),"yMax"in s&&(this.yMax=s.yMax),"advanceWidth"in s&&(this.advanceWidth=s.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,s.path))};Glyph.prototype.addUnicode=function(s){this.unicodes.length===0&&(this.unicode=s),this.unicodes.push(s)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(s,a,o,c,d){s=s!==void 0?s:0,a=a!==void 0?a:0,o=o!==void 0?o:72;var b,$;c||(c={});var j=c.xScale,_e=c.yScale;if(c.hinting&&d&&d.hinting&&($=this.path&&d.hinting.exec(this,o)),$)b=d.hinting.getCommands($),s=Math.round(s),a=Math.round(a),j=_e=1;else{b=this.path.commands;var et=1/(this.path.unitsPerEm||1e3)*o;j===void 0&&(j=et),_e===void 0&&(_e=et)}for(var tt=new Path,rt=0;rt<b.length;rt+=1){var nt=b[rt];nt.type==="M"?tt.moveTo(s+nt.x*j,a+-nt.y*_e):nt.type==="L"?tt.lineTo(s+nt.x*j,a+-nt.y*_e):nt.type==="Q"?tt.quadraticCurveTo(s+nt.x1*j,a+-nt.y1*_e,s+nt.x*j,a+-nt.y*_e):nt.type==="C"?tt.curveTo(s+nt.x1*j,a+-nt.y1*_e,s+nt.x2*j,a+-nt.y2*_e,s+nt.x*j,a+-nt.y*_e):nt.type==="Z"&&tt.closePath()}return tt};Glyph.prototype.getContours=function(){if(this.points===void 0)return[];for(var s=[],a=[],o=0;o<this.points.length;o+=1){var c=this.points[o];a.push(c),c.lastPointOfContour&&(s.push(a),a=[])}return check.argument(a.length===0,"There are still points left in the current contour."),s};Glyph.prototype.getMetrics=function(){for(var s=this.path.commands,a=[],o=[],c=0;c<s.length;c+=1){var d=s[c];d.type!=="Z"&&(a.push(d.x),o.push(d.y)),(d.type==="Q"||d.type==="C")&&(a.push(d.x1),o.push(d.y1)),d.type==="C"&&(a.push(d.x2),o.push(d.y2))}var b={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,o),leftSideBearing:this.leftSideBearing};return isFinite(b.xMin)||(b.xMin=0),isFinite(b.xMax)||(b.xMax=this.advanceWidth),isFinite(b.yMin)||(b.yMin=0),isFinite(b.yMax)||(b.yMax=0),b.rightSideBearing=this.advanceWidth-b.leftSideBearing-(b.xMax-b.xMin),b};Glyph.prototype.draw=function(s,a,o,c,d){this.getPath(a,o,c,d).draw(s)};Glyph.prototype.drawPoints=function(s,a,o,c){function d(rt,nt,it,at){s.beginPath();for(var ct=0;ct<rt.length;ct+=1)s.moveTo(nt+rt[ct].x*at,it+rt[ct].y*at),s.arc(nt+rt[ct].x*at,it+rt[ct].y*at,2,0,Math.PI*2,!1);s.closePath(),s.fill()}a=a!==void 0?a:0,o=o!==void 0?o:0,c=c!==void 0?c:24;for(var b=1/this.path.unitsPerEm*c,$=[],j=[],_e=this.path,et=0;et<_e.commands.length;et+=1){var tt=_e.commands[et];tt.x!==void 0&&$.push({x:tt.x,y:-tt.y}),tt.x1!==void 0&&j.push({x:tt.x1,y:-tt.y1}),tt.x2!==void 0&&j.push({x:tt.x2,y:-tt.y2})}s.fillStyle="blue",d($,a,o,b),s.fillStyle="red",d(j,a,o,b)};Glyph.prototype.drawMetrics=function(s,a,o,c){var d;a=a!==void 0?a:0,o=o!==void 0?o:0,c=c!==void 0?c:24,d=1/this.path.unitsPerEm*c,s.lineWidth=1,s.strokeStyle="black",draw.line(s,a,-1e4,a,1e4),draw.line(s,-1e4,o,1e4,o);var b=this.xMin||0,$=this.yMin||0,j=this.xMax||0,_e=this.yMax||0,et=this.advanceWidth||0;s.strokeStyle="blue",draw.line(s,a+b*d,-1e4,a+b*d,1e4),draw.line(s,a+j*d,-1e4,a+j*d,1e4),draw.line(s,-1e4,o+-$*d,1e4,o+-$*d),draw.line(s,-1e4,o+-_e*d,1e4,o+-_e*d),s.strokeStyle="green",draw.line(s,a+et*d,-1e4,a+et*d,1e4)};function defineDependentProperty(s,a,o){Object.defineProperty(s,a,{get:function(){return s.path,s[o]},set:function(c){s[o]=c},enumerable:!0,configurable:!0})}function GlyphSet(s,a){if(this.font=s,this.glyphs={},Array.isArray(a))for(var o=0;o<a.length;o++){var c=a[o];c.path.unitsPerEm=s.unitsPerEm,this.glyphs[o]=c}this.length=a&&a.length||0}GlyphSet.prototype.get=function(s){if(this.glyphs[s]===void 0){this.font._push(s),typeof this.glyphs[s]=="function"&&(this.glyphs[s]=this.glyphs[s]());var a=this.glyphs[s],o=this.font._IndexToUnicodeMap[s];if(o)for(var c=0;c<o.unicodes.length;c++)a.addUnicode(o.unicodes[c]);this.font.cffEncoding?this.font.isCIDFont?a.name="gid"+s:a.name=this.font.cffEncoding.charset[s]:this.font.glyphNames.names&&(a.name=this.font.glyphNames.glyphIndexToName(s)),this.glyphs[s].advanceWidth=this.font._hmtxTableData[s].advanceWidth,this.glyphs[s].leftSideBearing=this.font._hmtxTableData[s].leftSideBearing}else typeof this.glyphs[s]=="function"&&(this.glyphs[s]=this.glyphs[s]());return this.glyphs[s]};GlyphSet.prototype.push=function(s,a){this.glyphs[s]=a,this.length++};function glyphLoader(s,a){return new Glyph({index:a,font:s})}function ttfGlyphLoader(s,a,o,c,d,b){return function(){var $=new Glyph({index:a,font:s});return $.path=function(){o($,c,d);var j=b(s.glyphs,$);return j.unitsPerEm=s.unitsPerEm,j},defineDependentProperty($,"xMin","_xMin"),defineDependentProperty($,"xMax","_xMax"),defineDependentProperty($,"yMin","_yMin"),defineDependentProperty($,"yMax","_yMax"),$}}function cffGlyphLoader(s,a,o,c){return function(){var d=new Glyph({index:a,font:s});return d.path=function(){var b=o(s,d,c);return b.unitsPerEm=s.unitsPerEm,b},d}}var glyphset={GlyphSet,glyphLoader,ttfGlyphLoader,cffGlyphLoader};function equals(s,a){if(s===a)return!0;if(Array.isArray(s)&&Array.isArray(a)){if(s.length!==a.length)return!1;for(var o=0;o<s.length;o+=1)if(!equals(s[o],a[o]))return!1;return!0}else return!1}function calcCFFSubroutineBias(s){var a;return s.length<1240?a=107:s.length<33900?a=1131:a=32768,a}function parseCFFIndex(s,a,o){var c=[],d=[],b=parse$2.getCard16(s,a),$,j;if(b!==0){var _e=parse$2.getByte(s,a+2);$=a+(b+1)*_e+2;for(var et=a+3,tt=0;tt<b+1;tt+=1)c.push(parse$2.getOffset(s,et,_e)),et+=_e;j=$+c[b]}else j=a+2;for(var rt=0;rt<c.length-1;rt+=1){var nt=parse$2.getBytes(s,$+c[rt],$+c[rt+1]);o&&(nt=o(nt)),d.push(nt)}return{objects:d,startOffset:a,endOffset:j}}function parseCFFIndexLowMemory(s,a){var o=[],c=parse$2.getCard16(s,a),d,b;if(c!==0){var $=parse$2.getByte(s,a+2);d=a+(c+1)*$+2;for(var j=a+3,_e=0;_e<c+1;_e+=1)o.push(parse$2.getOffset(s,j,$)),j+=$;b=d+o[c]}else b=a+2;return{offsets:o,startOffset:a,endOffset:b}}function getCffIndexObject(s,a,o,c,d){var b=parse$2.getCard16(o,c),$=0;if(b!==0){var j=parse$2.getByte(o,c+2);$=c+(b+1)*j+2}var _e=parse$2.getBytes(o,$+a[s],$+a[s+1]);return d&&(_e=d(_e)),_e}function parseFloatOperand(s){for(var a="",o=15,c=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var d=s.parseByte(),b=d>>4,$=d&15;if(b===o||(a+=c[b],$===o))break;a+=c[$]}return parseFloat(a)}function parseOperand(s,a){var o,c,d,b;if(a===28)return o=s.parseByte(),c=s.parseByte(),o<<8|c;if(a===29)return o=s.parseByte(),c=s.parseByte(),d=s.parseByte(),b=s.parseByte(),o<<24|c<<16|d<<8|b;if(a===30)return parseFloatOperand(s);if(a>=32&&a<=246)return a-139;if(a>=247&&a<=250)return o=s.parseByte(),(a-247)*256+o+108;if(a>=251&&a<=254)return o=s.parseByte(),-(a-251)*256-o-108;throw new Error("Invalid b0 "+a)}function entriesToObject(s){for(var a={},o=0;o<s.length;o+=1){var c=s[o][0],d=s[o][1],b=void 0;if(d.length===1?b=d[0]:b=d,a.hasOwnProperty(c)&&!isNaN(a[c]))throw new Error("Object "+a+" already has key "+c);a[c]=b}return a}function parseCFFDict(s,a,o){a=a!==void 0?a:0;var c=new parse$2.Parser(s,a),d=[],b=[];for(o=o!==void 0?o:s.length;c.relativeOffset<o;){var $=c.parseByte();$<=21?($===12&&($=1200+c.parseByte()),d.push([$,b]),b=[]):b.push(parseOperand(c,$))}return entriesToObject(d)}function getCFFString(s,a){return a<=390?a=cffStandardStrings[a]:a=s[a-391],a}function interpretDict(s,a,o){for(var c={},d,b=0;b<a.length;b+=1){var $=a[b];if(Array.isArray($.type)){var j=[];j.length=$.type.length;for(var _e=0;_e<$.type.length;_e++)d=s[$.op]!==void 0?s[$.op][_e]:void 0,d===void 0&&(d=$.value!==void 0&&$.value[_e]!==void 0?$.value[_e]:null),$.type[_e]==="SID"&&(d=getCFFString(o,d)),j[_e]=d;c[$.name]=j}else d=s[$.op],d===void 0&&(d=$.value!==void 0?$.value:null),$.type==="SID"&&(d=getCFFString(o,d)),c[$.name]=d}return c}function parseCFFHeader(s,a){var o={};return o.formatMajor=parse$2.getCard8(s,a),o.formatMinor=parse$2.getCard8(s,a+1),o.size=parse$2.getCard8(s,a+2),o.offsetSize=parse$2.getCard8(s,a+3),o.startOffset=a,o.endOffset=a+4,o}var TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(s,a){var o=parseCFFDict(s,0,s.byteLength);return interpretDict(o,TOP_DICT_META,a)}function parseCFFPrivateDict(s,a,o,c){var d=parseCFFDict(s,a,o);return interpretDict(d,PRIVATE_DICT_META,c)}function gatherCFFTopDicts(s,a,o,c){for(var d=[],b=0;b<o.length;b+=1){var $=new DataView(new Uint8Array(o[b]).buffer),j=parseCFFTopDict($,c);j._subrs=[],j._subrsBias=0,j._defaultWidthX=0,j._nominalWidthX=0;var _e=j.private[0],et=j.private[1];if(_e!==0&&et!==0){var tt=parseCFFPrivateDict(s,et+a,_e,c);if(j._defaultWidthX=tt.defaultWidthX,j._nominalWidthX=tt.nominalWidthX,tt.subrs!==0){var rt=et+tt.subrs,nt=parseCFFIndex(s,rt+a);j._subrs=nt.objects,j._subrsBias=calcCFFSubroutineBias(j._subrs)}j._privateDict=tt}d.push(j)}return d}function parseCFFCharset(s,a,o,c){var d,b,$=new parse$2.Parser(s,a);o-=1;var j=[".notdef"],_e=$.parseCard8();if(_e===0)for(var et=0;et<o;et+=1)d=$.parseSID(),j.push(getCFFString(c,d));else if(_e===1)for(;j.length<=o;){d=$.parseSID(),b=$.parseCard8();for(var tt=0;tt<=b;tt+=1)j.push(getCFFString(c,d)),d+=1}else if(_e===2)for(;j.length<=o;){d=$.parseSID(),b=$.parseCard16();for(var rt=0;rt<=b;rt+=1)j.push(getCFFString(c,d)),d+=1}else throw new Error("Unknown charset format "+_e);return j}function parseCFFEncoding(s,a,o){var c,d={},b=new parse$2.Parser(s,a),$=b.parseCard8();if($===0)for(var j=b.parseCard8(),_e=0;_e<j;_e+=1)c=b.parseCard8(),d[c]=_e;else if($===1){var et=b.parseCard8();c=1;for(var tt=0;tt<et;tt+=1)for(var rt=b.parseCard8(),nt=b.parseCard8(),it=rt;it<=rt+nt;it+=1)d[it]=c,c+=1}else throw new Error("Unknown encoding format "+$);return new CffEncoding(d,o)}function parseCFFCharstring(s,a,o){var c,d,b,$,j=new Path,_e=[],et=0,tt=!1,rt=!1,nt=0,it=0,at,ct,st,ot;if(s.isCIDFont){var ht=s.tables.cff.topDict._fdSelect[a.index],dt=s.tables.cff.topDict._fdArray[ht];at=dt._subrs,ct=dt._subrsBias,st=dt._defaultWidthX,ot=dt._nominalWidthX}else at=s.tables.cff.topDict._subrs,ct=s.tables.cff.topDict._subrsBias,st=s.tables.cff.topDict._defaultWidthX,ot=s.tables.cff.topDict._nominalWidthX;var ft=st;function mt(yt,Et){rt&&j.closePath(),j.moveTo(yt,Et),rt=!0}function gt(){var yt;yt=_e.length%2!==0,yt&&!tt&&(ft=_e.shift()+ot),et+=_e.length>>1,_e.length=0,tt=!0}function vt(yt){for(var Et,St,Ct,wt,_t,Tt,Mt,Bt,Rt,bt,Pt,Dt,$t=0;$t<yt.length;){var Lt=yt[$t];switch($t+=1,Lt){case 1:gt();break;case 3:gt();break;case 4:_e.length>1&&!tt&&(ft=_e.shift()+ot,tt=!0),it+=_e.pop(),mt(nt,it);break;case 5:for(;_e.length>0;)nt+=_e.shift(),it+=_e.shift(),j.lineTo(nt,it);break;case 6:for(;_e.length>0&&(nt+=_e.shift(),j.lineTo(nt,it),_e.length!==0);)it+=_e.shift(),j.lineTo(nt,it);break;case 7:for(;_e.length>0&&(it+=_e.shift(),j.lineTo(nt,it),_e.length!==0);)nt+=_e.shift(),j.lineTo(nt,it);break;case 8:for(;_e.length>0;)c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$+_e.shift(),j.curveTo(c,d,b,$,nt,it);break;case 10:_t=_e.pop()+ct,Tt=at[_t],Tt&&vt(Tt);break;case 11:return;case 12:switch(Lt=yt[$t],$t+=1,Lt){case 35:c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),Mt=b+_e.shift(),Bt=$+_e.shift(),Rt=Mt+_e.shift(),bt=Bt+_e.shift(),Pt=Rt+_e.shift(),Dt=bt+_e.shift(),nt=Pt+_e.shift(),it=Dt+_e.shift(),_e.shift(),j.curveTo(c,d,b,$,Mt,Bt),j.curveTo(Rt,bt,Pt,Dt,nt,it);break;case 34:c=nt+_e.shift(),d=it,b=c+_e.shift(),$=d+_e.shift(),Mt=b+_e.shift(),Bt=$,Rt=Mt+_e.shift(),bt=$,Pt=Rt+_e.shift(),Dt=it,nt=Pt+_e.shift(),j.curveTo(c,d,b,$,Mt,Bt),j.curveTo(Rt,bt,Pt,Dt,nt,it);break;case 36:c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),Mt=b+_e.shift(),Bt=$,Rt=Mt+_e.shift(),bt=$,Pt=Rt+_e.shift(),Dt=bt+_e.shift(),nt=Pt+_e.shift(),j.curveTo(c,d,b,$,Mt,Bt),j.curveTo(Rt,bt,Pt,Dt,nt,it);break;case 37:c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),Mt=b+_e.shift(),Bt=$+_e.shift(),Rt=Mt+_e.shift(),bt=Bt+_e.shift(),Pt=Rt+_e.shift(),Dt=bt+_e.shift(),Math.abs(Pt-nt)>Math.abs(Dt-it)?nt=Pt+_e.shift():it=Dt+_e.shift(),j.curveTo(c,d,b,$,Mt,Bt),j.curveTo(Rt,bt,Pt,Dt,nt,it);break;default:console.log("Glyph "+a.index+": unknown operator 1200"+Lt),_e.length=0}break;case 14:_e.length>0&&!tt&&(ft=_e.shift()+ot,tt=!0),rt&&(j.closePath(),rt=!1);break;case 18:gt();break;case 19:case 20:gt(),$t+=et+7>>3;break;case 21:_e.length>2&&!tt&&(ft=_e.shift()+ot,tt=!0),it+=_e.pop(),nt+=_e.pop(),mt(nt,it);break;case 22:_e.length>1&&!tt&&(ft=_e.shift()+ot,tt=!0),nt+=_e.pop(),mt(nt,it);break;case 23:gt();break;case 24:for(;_e.length>2;)c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$+_e.shift(),j.curveTo(c,d,b,$,nt,it);nt+=_e.shift(),it+=_e.shift(),j.lineTo(nt,it);break;case 25:for(;_e.length>6;)nt+=_e.shift(),it+=_e.shift(),j.lineTo(nt,it);c=nt+_e.shift(),d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$+_e.shift(),j.curveTo(c,d,b,$,nt,it);break;case 26:for(_e.length%2&&(nt+=_e.shift());_e.length>0;)c=nt,d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b,it=$+_e.shift(),j.curveTo(c,d,b,$,nt,it);break;case 27:for(_e.length%2&&(it+=_e.shift());_e.length>0;)c=nt+_e.shift(),d=it,b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$,j.curveTo(c,d,b,$,nt,it);break;case 28:Et=yt[$t],St=yt[$t+1],_e.push((Et<<24|St<<16)>>16),$t+=2;break;case 29:_t=_e.pop()+s.gsubrsBias,Tt=s.gsubrs[_t],Tt&&vt(Tt);break;case 30:for(;_e.length>0&&(c=nt,d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$+(_e.length===1?_e.shift():0),j.curveTo(c,d,b,$,nt,it),_e.length!==0);)c=nt+_e.shift(),d=it,b=c+_e.shift(),$=d+_e.shift(),it=$+_e.shift(),nt=b+(_e.length===1?_e.shift():0),j.curveTo(c,d,b,$,nt,it);break;case 31:for(;_e.length>0&&(c=nt+_e.shift(),d=it,b=c+_e.shift(),$=d+_e.shift(),it=$+_e.shift(),nt=b+(_e.length===1?_e.shift():0),j.curveTo(c,d,b,$,nt,it),_e.length!==0);)c=nt,d=it+_e.shift(),b=c+_e.shift(),$=d+_e.shift(),nt=b+_e.shift(),it=$+(_e.length===1?_e.shift():0),j.curveTo(c,d,b,$,nt,it);break;default:Lt<32?console.log("Glyph "+a.index+": unknown operator "+Lt):Lt<247?_e.push(Lt-139):Lt<251?(Et=yt[$t],$t+=1,_e.push((Lt-247)*256+Et+108)):Lt<255?(Et=yt[$t],$t+=1,_e.push(-(Lt-251)*256-Et-108)):(Et=yt[$t],St=yt[$t+1],Ct=yt[$t+2],wt=yt[$t+3],$t+=4,_e.push((Et<<24|St<<16|Ct<<8|wt)/65536))}}}return vt(o),a.advanceWidth=ft,j}function parseCFFFDSelect(s,a,o,c){var d=[],b,$=new parse$2.Parser(s,a),j=$.parseCard8();if(j===0)for(var _e=0;_e<o;_e++){if(b=$.parseCard8(),b>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+b+" (FD count "+c+")");d.push(b)}else if(j===3){var et=$.parseCard16(),tt=$.parseCard16();if(tt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+tt);for(var rt,nt=0;nt<et;nt++){if(b=$.parseCard8(),rt=$.parseCard16(),b>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+b+" (FD count "+c+")");if(rt>o)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+rt);for(;tt<rt;tt++)d.push(b);tt=rt}if(rt!==o)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+rt)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+j);return d}function parseCFFTable(s,a,o,c){o.tables.cff={};var d=parseCFFHeader(s,a),b=parseCFFIndex(s,d.endOffset,parse$2.bytesToString),$=parseCFFIndex(s,b.endOffset),j=parseCFFIndex(s,$.endOffset,parse$2.bytesToString),_e=parseCFFIndex(s,j.endOffset);o.gsubrs=_e.objects,o.gsubrsBias=calcCFFSubroutineBias(o.gsubrs);var et=gatherCFFTopDicts(s,a,$.objects,j.objects);if(et.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+et.length);var tt=et[0];if(o.tables.cff.topDict=tt,tt._privateDict&&(o.defaultWidthX=tt._privateDict.defaultWidthX,o.nominalWidthX=tt._privateDict.nominalWidthX),tt.ros[0]!==void 0&&tt.ros[1]!==void 0&&(o.isCIDFont=!0),o.isCIDFont){var rt=tt.fdArray,nt=tt.fdSelect;if(rt===0||nt===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");rt+=a;var it=parseCFFIndex(s,rt),at=gatherCFFTopDicts(s,a,it.objects,j.objects);tt._fdArray=at,nt+=a,tt._fdSelect=parseCFFFDSelect(s,nt,o.numGlyphs,at.length)}var ct=a+tt.private[1],st=parseCFFPrivateDict(s,ct,tt.private[0],j.objects);if(o.defaultWidthX=st.defaultWidthX,o.nominalWidthX=st.nominalWidthX,st.subrs!==0){var ot=ct+st.subrs,ht=parseCFFIndex(s,ot);o.subrs=ht.objects,o.subrsBias=calcCFFSubroutineBias(o.subrs)}else o.subrs=[],o.subrsBias=0;var dt;c.lowMemory?(dt=parseCFFIndexLowMemory(s,a+tt.charStrings),o.nGlyphs=dt.offsets.length):(dt=parseCFFIndex(s,a+tt.charStrings),o.nGlyphs=dt.objects.length);var ft=parseCFFCharset(s,a+tt.charset,o.nGlyphs,j.objects);if(tt.encoding===0?o.cffEncoding=new CffEncoding(cffStandardEncoding,ft):tt.encoding===1?o.cffEncoding=new CffEncoding(cffExpertEncoding,ft):o.cffEncoding=parseCFFEncoding(s,a+tt.encoding,ft),o.encoding=o.encoding||o.cffEncoding,o.glyphs=new glyphset.GlyphSet(o),c.lowMemory)o._push=function(vt){var yt=getCffIndexObject(vt,dt.offsets,s,a+tt.charStrings);o.glyphs.push(vt,glyphset.cffGlyphLoader(o,vt,parseCFFCharstring,yt))};else for(var mt=0;mt<o.nGlyphs;mt+=1){var gt=dt.objects[mt];o.glyphs.push(mt,glyphset.cffGlyphLoader(o,mt,parseCFFCharstring,gt))}}function encodeString(s,a){var o,c=cffStandardStrings.indexOf(s);return c>=0&&(o=c),c=a.indexOf(s),c>=0?o=c+cffStandardStrings.length:(o=cffStandardStrings.length+a.length,a.push(s)),o}function makeHeader(){return new table$1.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(s){var a=new table$1.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);a.names=[];for(var o=0;o<s.length;o+=1)a.names.push({name:"name_"+o,type:"NAME",value:s[o]});return a}function makeDict(s,a,o){for(var c={},d=0;d<s.length;d+=1){var b=s[d],$=a[b.name];$!==void 0&&!equals($,b.value)&&(b.type==="SID"&&($=encodeString($,o)),c[b.op]={name:b.name,type:b.type,value:$})}return c}function makeTopDict(s,a){var o=new table$1.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return o.dict=makeDict(TOP_DICT_META,s,a),o}function makeTopDictIndex(s){var a=new table$1.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return a.topDicts=[{name:"topDict_0",type:"TABLE",value:s}],a}function makeStringIndex(s){var a=new table$1.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);a.strings=[];for(var o=0;o<s.length;o+=1)a.strings.push({name:"string_"+o,type:"STRING",value:s[o]});return a}function makeGlobalSubrIndex(){return new table$1.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(s,a){for(var o=new table$1.Record("Charsets",[{name:"format",type:"Card8",value:0}]),c=0;c<s.length;c+=1){var d=s[c],b=encodeString(d,a);o.fields.push({name:"glyph_"+c,type:"SID",value:b})}return o}function glyphToOps(s){var a=[],o=s.path;a.push({name:"width",type:"NUMBER",value:s.advanceWidth});for(var c=0,d=0,b=0;b<o.commands.length;b+=1){var $=void 0,j=void 0,_e=o.commands[b];if(_e.type==="Q"){var et=.3333333333333333,tt=2/3;_e={type:"C",x:_e.x,y:_e.y,x1:Math.round(et*c+tt*_e.x1),y1:Math.round(et*d+tt*_e.y1),x2:Math.round(et*_e.x+tt*_e.x1),y2:Math.round(et*_e.y+tt*_e.y1)}}if(_e.type==="M")$=Math.round(_e.x-c),j=Math.round(_e.y-d),a.push({name:"dx",type:"NUMBER",value:$}),a.push({name:"dy",type:"NUMBER",value:j}),a.push({name:"rmoveto",type:"OP",value:21}),c=Math.round(_e.x),d=Math.round(_e.y);else if(_e.type==="L")$=Math.round(_e.x-c),j=Math.round(_e.y-d),a.push({name:"dx",type:"NUMBER",value:$}),a.push({name:"dy",type:"NUMBER",value:j}),a.push({name:"rlineto",type:"OP",value:5}),c=Math.round(_e.x),d=Math.round(_e.y);else if(_e.type==="C"){var rt=Math.round(_e.x1-c),nt=Math.round(_e.y1-d),it=Math.round(_e.x2-_e.x1),at=Math.round(_e.y2-_e.y1);$=Math.round(_e.x-_e.x2),j=Math.round(_e.y-_e.y2),a.push({name:"dx1",type:"NUMBER",value:rt}),a.push({name:"dy1",type:"NUMBER",value:nt}),a.push({name:"dx2",type:"NUMBER",value:it}),a.push({name:"dy2",type:"NUMBER",value:at}),a.push({name:"dx",type:"NUMBER",value:$}),a.push({name:"dy",type:"NUMBER",value:j}),a.push({name:"rrcurveto",type:"OP",value:8}),c=Math.round(_e.x),d=Math.round(_e.y)}}return a.push({name:"endchar",type:"OP",value:14}),a}function makeCharStringsIndex(s){for(var a=new table$1.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),o=0;o<s.length;o+=1){var c=s.get(o),d=glyphToOps(c);a.charStrings.push({name:c.name,type:"CHARSTRING",value:d})}return a}function makePrivateDict(s,a){var o=new table$1.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return o.dict=makeDict(PRIVATE_DICT_META,s,a),o}function makeCFFTable(s,a){for(var o=new table$1.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),c=1/a.unitsPerEm,d={version:a.version,fullName:a.fullName,familyName:a.familyName,weight:a.weightName,fontBBox:a.fontBBox||[0,0,0,0],fontMatrix:[c,0,0,c,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},b={},$=[],j,_e=1;_e<s.length;_e+=1)j=s.get(_e),$.push(j.name);var et=[];o.header=makeHeader(),o.nameIndex=makeNameIndex([a.postScriptName]);var tt=makeTopDict(d,et);o.topDictIndex=makeTopDictIndex(tt),o.globalSubrIndex=makeGlobalSubrIndex(),o.charsets=makeCharsets($,et),o.charStringsIndex=makeCharStringsIndex(s),o.privateDict=makePrivateDict(b,et),o.stringIndex=makeStringIndex(et);var rt=o.header.sizeOf()+o.nameIndex.sizeOf()+o.topDictIndex.sizeOf()+o.stringIndex.sizeOf()+o.globalSubrIndex.sizeOf();return d.charset=rt,d.encoding=0,d.charStrings=d.charset+o.charsets.sizeOf(),d.private[1]=d.charStrings+o.charStringsIndex.sizeOf(),tt=makeTopDict(d,et),o.topDictIndex=makeTopDictIndex(tt),o}var cff={parse:parseCFFTable,make:makeCFFTable};function parseHeadTable(s,a){var o={},c=new parse$2.Parser(s,a);return o.version=c.parseVersion(),o.fontRevision=Math.round(c.parseFixed()*1e3)/1e3,o.checkSumAdjustment=c.parseULong(),o.magicNumber=c.parseULong(),check.argument(o.magicNumber===1594834165,"Font header has wrong magic number."),o.flags=c.parseUShort(),o.unitsPerEm=c.parseUShort(),o.created=c.parseLongDateTime(),o.modified=c.parseLongDateTime(),o.xMin=c.parseShort(),o.yMin=c.parseShort(),o.xMax=c.parseShort(),o.yMax=c.parseShort(),o.macStyle=c.parseUShort(),o.lowestRecPPEM=c.parseUShort(),o.fontDirectionHint=c.parseShort(),o.indexToLocFormat=c.parseShort(),o.glyphDataFormat=c.parseShort(),o}function makeHeadTable(s){var a=Math.round(new Date().getTime()/1e3)+2082844800,o=a;return s.createdTimestamp&&(o=s.createdTimestamp+2082844800),new table$1.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:o},{name:"modified",type:"LONGDATETIME",value:a},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],s)}var head$1={parse:parseHeadTable,make:makeHeadTable};function parseHheaTable(s,a){var o={},c=new parse$2.Parser(s,a);return o.version=c.parseVersion(),o.ascender=c.parseShort(),o.descender=c.parseShort(),o.lineGap=c.parseShort(),o.advanceWidthMax=c.parseUShort(),o.minLeftSideBearing=c.parseShort(),o.minRightSideBearing=c.parseShort(),o.xMaxExtent=c.parseShort(),o.caretSlopeRise=c.parseShort(),o.caretSlopeRun=c.parseShort(),o.caretOffset=c.parseShort(),c.relativeOffset+=8,o.metricDataFormat=c.parseShort(),o.numberOfHMetrics=c.parseUShort(),o}function makeHheaTable(s){return new table$1.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],s)}var hhea={parse:parseHheaTable,make:makeHheaTable};function parseHmtxTableAll(s,a,o,c,d){for(var b,$,j=new parse$2.Parser(s,a),_e=0;_e<c;_e+=1){_e<o&&(b=j.parseUShort(),$=j.parseShort());var et=d.get(_e);et.advanceWidth=b,et.leftSideBearing=$}}function parseHmtxTableOnLowMemory(s,a,o,c,d){s._hmtxTableData={};for(var b,$,j=new parse$2.Parser(a,o),_e=0;_e<d;_e+=1)_e<c&&(b=j.parseUShort(),$=j.parseShort()),s._hmtxTableData[_e]={advanceWidth:b,leftSideBearing:$}}function parseHmtxTable(s,a,o,c,d,b,$){$.lowMemory?parseHmtxTableOnLowMemory(s,a,o,c,d):parseHmtxTableAll(a,o,c,d,b)}function makeHmtxTable(s){for(var a=new table$1.Table("hmtx",[]),o=0;o<s.length;o+=1){var c=s.get(o),d=c.advanceWidth||0,b=c.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+o,type:"USHORT",value:d}),a.fields.push({name:"leftSideBearing_"+o,type:"SHORT",value:b})}return a}var hmtx={parse:parseHmtxTable,make:makeHmtxTable};function makeLtagTable(s){for(var a=new table$1.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:s.length}]),o="",c=12+s.length*4,d=0;d<s.length;++d){var b=o.indexOf(s[d]);b<0&&(b=o.length,o+=s[d]),a.fields.push({name:"offset "+d,type:"USHORT",value:c+b}),a.fields.push({name:"length "+d,type:"USHORT",value:s[d].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),a}function parseLtagTable(s,a){var o=new parse$2.Parser(s,a),c=o.parseULong();check.argument(c===1,"Unsupported ltag table version."),o.skip("uLong",1);for(var d=o.parseULong(),b=[],$=0;$<d;$++){for(var j="",_e=a+o.parseUShort(),et=o.parseUShort(),tt=_e;tt<_e+et;++tt)j+=String.fromCharCode(s.getInt8(tt));b.push(j)}return b}var ltag={make:makeLtagTable,parse:parseLtagTable};function parseMaxpTable(s,a){var o={},c=new parse$2.Parser(s,a);return o.version=c.parseVersion(),o.numGlyphs=c.parseUShort(),o.version===1&&(o.maxPoints=c.parseUShort(),o.maxContours=c.parseUShort(),o.maxCompositePoints=c.parseUShort(),o.maxCompositeContours=c.parseUShort(),o.maxZones=c.parseUShort(),o.maxTwilightPoints=c.parseUShort(),o.maxStorage=c.parseUShort(),o.maxFunctionDefs=c.parseUShort(),o.maxInstructionDefs=c.parseUShort(),o.maxStackElements=c.parseUShort(),o.maxSizeOfInstructions=c.parseUShort(),o.maxComponentElements=c.parseUShort(),o.maxComponentDepth=c.parseUShort()),o}function makeMaxpTable(s){return new table$1.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:s}])}var maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(s,a,o){switch(s){case 0:if(a===65535)return"und";if(o)return o[a];break;case 1:return macLanguages[a];case 3:return windowsLanguages[a]}}var utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(s,a,o){switch(s){case 0:return utf16;case 1:return macLanguageEncodings[o]||macScriptEncodings[a];case 3:if(a===1||a===10)return utf16;break}}function parseNameTable(s,a,o){for(var c={},d=new parse$2.Parser(s,a),b=d.parseUShort(),$=d.parseUShort(),j=d.offset+d.parseUShort(),_e=0;_e<$;_e++){var et=d.parseUShort(),tt=d.parseUShort(),rt=d.parseUShort(),nt=d.parseUShort(),it=nameTableNames[nt]||nt,at=d.parseUShort(),ct=d.parseUShort(),st=getLanguageCode(et,rt,o),ot=getEncoding(et,tt,rt);if(ot!==void 0&&st!==void 0){var ht=void 0;if(ot===utf16?ht=decode$1.UTF16(s,j+ct,at):ht=decode$1.MACSTRING(s,j+ct,at,ot),ht){var dt=c[it];dt===void 0&&(dt=c[it]={}),dt[st]=ht}}}return b===1&&d.parseUShort(),c}function reverseDict(s){var a={};for(var o in s)a[s[o]]=parseInt(o);return a}function makeNameRecord(s,a,o,c,d,b){return new table$1.Record("NameRecord",[{name:"platformID",type:"USHORT",value:s},{name:"encodingID",type:"USHORT",value:a},{name:"languageID",type:"USHORT",value:o},{name:"nameID",type:"USHORT",value:c},{name:"length",type:"USHORT",value:d},{name:"offset",type:"USHORT",value:b}])}function findSubArray(s,a){var o=s.length,c=a.length-o+1;e:for(var d=0;d<c;d++)for(;d<c;d++){for(var b=0;b<o;b++)if(a[d+b]!==s[b])continue e;return d}return-1}function addStringToPool(s,a){var o=findSubArray(s,a);if(o<0){o=a.length;for(var c=0,d=s.length;c<d;++c)a.push(s[c])}return o}function makeNameTable(s,a){var o,c=[],d={},b=reverseDict(nameTableNames);for(var $ in s){var j=b[$];if(j===void 0&&(j=$),o=parseInt(j),isNaN(o))throw new Error('Name table entry "'+$+'" does not exist, see nameTableNames for complete list.');d[o]=s[$],c.push(o)}for(var _e=reverseDict(macLanguages),et=reverseDict(windowsLanguages),tt=[],rt=[],nt=0;nt<c.length;nt++){o=c[nt];var it=d[o];for(var at in it){var ct=it[at],st=1,ot=_e[at],ht=macLanguageToScript[ot],dt=getEncoding(st,ht,ot),ft=encode$1.MACSTRING(ct,dt);ft===void 0&&(st=0,ot=a.indexOf(at),ot<0&&(ot=a.length,a.push(at)),ht=4,ft=encode$1.UTF16(ct));var mt=addStringToPool(ft,rt);tt.push(makeNameRecord(st,ht,ot,o,ft.length,mt));var gt=et[at];if(gt!==void 0){var vt=encode$1.UTF16(ct),yt=addStringToPool(vt,rt);tt.push(makeNameRecord(3,1,gt,o,vt.length,yt))}}}tt.sort(function(Ct,wt){return Ct.platformID-wt.platformID||Ct.encodingID-wt.encodingID||Ct.languageID-wt.languageID||Ct.nameID-wt.nameID});for(var Et=new table$1.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:tt.length},{name:"stringOffset",type:"USHORT",value:6+tt.length*12}]),St=0;St<tt.length;St++)Et.fields.push({name:"record_"+St,type:"RECORD",value:tt[St]});return Et.fields.push({name:"strings",type:"LITERAL",value:rt}),Et}var _name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRange(s){for(var a=0;a<unicodeRanges.length;a+=1){var o=unicodeRanges[a];if(s>=o.begin&&s<o.end)return a}return-1}function parseOS2Table(s,a){var o={},c=new parse$2.Parser(s,a);o.version=c.parseUShort(),o.xAvgCharWidth=c.parseShort(),o.usWeightClass=c.parseUShort(),o.usWidthClass=c.parseUShort(),o.fsType=c.parseUShort(),o.ySubscriptXSize=c.parseShort(),o.ySubscriptYSize=c.parseShort(),o.ySubscriptXOffset=c.parseShort(),o.ySubscriptYOffset=c.parseShort(),o.ySuperscriptXSize=c.parseShort(),o.ySuperscriptYSize=c.parseShort(),o.ySuperscriptXOffset=c.parseShort(),o.ySuperscriptYOffset=c.parseShort(),o.yStrikeoutSize=c.parseShort(),o.yStrikeoutPosition=c.parseShort(),o.sFamilyClass=c.parseShort(),o.panose=[];for(var d=0;d<10;d++)o.panose[d]=c.parseByte();return o.ulUnicodeRange1=c.parseULong(),o.ulUnicodeRange2=c.parseULong(),o.ulUnicodeRange3=c.parseULong(),o.ulUnicodeRange4=c.parseULong(),o.achVendID=String.fromCharCode(c.parseByte(),c.parseByte(),c.parseByte(),c.parseByte()),o.fsSelection=c.parseUShort(),o.usFirstCharIndex=c.parseUShort(),o.usLastCharIndex=c.parseUShort(),o.sTypoAscender=c.parseShort(),o.sTypoDescender=c.parseShort(),o.sTypoLineGap=c.parseShort(),o.usWinAscent=c.parseUShort(),o.usWinDescent=c.parseUShort(),o.version>=1&&(o.ulCodePageRange1=c.parseULong(),o.ulCodePageRange2=c.parseULong()),o.version>=2&&(o.sxHeight=c.parseShort(),o.sCapHeight=c.parseShort(),o.usDefaultChar=c.parseUShort(),o.usBreakChar=c.parseUShort(),o.usMaxContent=c.parseUShort()),o}function makeOS2Table(s){return new table$1.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],s)}var os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges,getUnicodeRange};function parsePostTable(s,a){var o={},c=new parse$2.Parser(s,a);switch(o.version=c.parseVersion(),o.italicAngle=c.parseFixed(),o.underlinePosition=c.parseShort(),o.underlineThickness=c.parseShort(),o.isFixedPitch=c.parseULong(),o.minMemType42=c.parseULong(),o.maxMemType42=c.parseULong(),o.minMemType1=c.parseULong(),o.maxMemType1=c.parseULong(),o.version){case 1:o.names=standardNames.slice();break;case 2:o.numberOfGlyphs=c.parseUShort(),o.glyphNameIndex=new Array(o.numberOfGlyphs);for(var d=0;d<o.numberOfGlyphs;d++)o.glyphNameIndex[d]=c.parseUShort();o.names=[];for(var b=0;b<o.numberOfGlyphs;b++)if(o.glyphNameIndex[b]>=standardNames.length){var $=c.parseChar();o.names.push(c.parseString($))}break;case 2.5:o.numberOfGlyphs=c.parseUShort(),o.offset=new Array(o.numberOfGlyphs);for(var j=0;j<o.numberOfGlyphs;j++)o.offset[j]=c.parseChar();break}return o}function makePostTable(){return new table$1.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();if(o===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),deltaGlyphId:this.parseUShort()};if(o===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),substitute:this.parseOffset16List()};check.assert(!1,"0x"+a.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function(){var a=this.parseUShort();return check.argument(a===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Parser$1.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function(){var a=this.parseUShort();return check.argument(a===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Parser$1.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function(){var a=this.parseUShort();return check.argument(a===1,"GSUB ligature table identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Parser$1.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var lookupRecordDesc={sequenceIndex:Parser$1.uShort,lookupListIndex:Parser$1.uShort};subtableParsers[5]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();if(o===1)return{substFormat:o,coverage:this.parsePointer(Parser$1.coverage),ruleSets:this.parseListOfLists(function(){var b=this.parseUShort(),$=this.parseUShort();return{input:this.parseUShortList(b-1),lookupRecords:this.parseRecordList($,lookupRecordDesc)}})};if(o===2)return{substFormat:o,coverage:this.parsePointer(Parser$1.coverage),classDef:this.parsePointer(Parser$1.classDef),classSets:this.parseListOfLists(function(){var b=this.parseUShort(),$=this.parseUShort();return{classes:this.parseUShortList(b-1),lookupRecords:this.parseRecordList($,lookupRecordDesc)}})};if(o===3){var c=this.parseUShort(),d=this.parseUShort();return{substFormat:o,coverages:this.parseList(c,Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(d,lookupRecordDesc)}}check.assert(!1,"0x"+a.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();if(o===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(o===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),backtrackClassDef:this.parsePointer(Parser$1.classDef),inputClassDef:this.parsePointer(Parser$1.classDef),lookaheadClassDef:this.parsePointer(Parser$1.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(o===3)return{substFormat:3,backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),inputCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check.assert(!1,"0x"+a.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function(){var a=this.parseUShort();check.argument(a===1,"GSUB Extension Substitution subtable identifier-format must be 1");var o=this.parseUShort(),c=new Parser$1(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:o,extension:subtableParsers[o].call(c)}};subtableParsers[8]=function(){var a=this.parseUShort();return check.argument(a===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Parser$1.coverage),backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),substitutes:this.parseUShortList()}};function parseGsubTable(s,a){a=a||0;var o=new Parser$1(s,a),c=o.parseVersion(1);return check.argument(c===1||c===1.1,"Unsupported GSUB table version."),c===1?{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(subtableParsers)}:{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(subtableParsers),variations:o.parseFeatureVariationsList()}}var subtableMakers=new Array(9);subtableMakers[1]=function(a){return a.substFormat===1?new table$1.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)},{name:"deltaGlyphID",type:"USHORT",value:a.deltaGlyphId}]):new table$1.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)}].concat(table$1.ushortList("substitute",a.substitute)))};subtableMakers[2]=function(a){return check.assert(a.substFormat===1,"Lookup type 2 substFormat must be 1."),new table$1.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)}].concat(table$1.tableList("seqSet",a.sequences,function(o){return new table$1.Table("sequenceSetTable",table$1.ushortList("sequence",o))})))};subtableMakers[3]=function(a){return check.assert(a.substFormat===1,"Lookup type 3 substFormat must be 1."),new table$1.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)}].concat(table$1.tableList("altSet",a.alternateSets,function(o){return new table$1.Table("alternateSetTable",table$1.ushortList("alternate",o))})))};subtableMakers[4]=function(a){return check.assert(a.substFormat===1,"Lookup type 4 substFormat must be 1."),new table$1.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)}].concat(table$1.tableList("ligSet",a.ligatureSets,function(o){return new table$1.Table("ligatureSetTable",table$1.tableList("ligature",o,function(c){return new table$1.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:c.ligGlyph}].concat(table$1.ushortList("component",c.components,c.components.length+1)))}))})))};subtableMakers[6]=function(a){if(a.substFormat===1){var o=new table$1.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:a.substFormat},{name:"coverage",type:"TABLE",value:new table$1.Coverage(a.coverage)}].concat(table$1.tableList("chainRuleSet",a.chainRuleSets,function(b){return new table$1.Table("chainRuleSetTable",table$1.tableList("chainRule",b,function($){var j=table$1.ushortList("backtrackGlyph",$.backtrack,$.backtrack.length).concat(table$1.ushortList("inputGlyph",$.input,$.input.length+1)).concat(table$1.ushortList("lookaheadGlyph",$.lookahead,$.lookahead.length)).concat(table$1.ushortList("substitution",[],$.lookupRecords.length));return $.lookupRecords.forEach(function(_e,et){j=j.concat({name:"sequenceIndex"+et,type:"USHORT",value:_e.sequenceIndex}).concat({name:"lookupListIndex"+et,type:"USHORT",value:_e.lookupListIndex})}),new table$1.Table("chainRuleTable",j)}))})));return o}else if(a.substFormat===2)check.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(a.substFormat===3){var c=[{name:"substFormat",type:"USHORT",value:a.substFormat}];c.push({name:"backtrackGlyphCount",type:"USHORT",value:a.backtrackCoverage.length}),a.backtrackCoverage.forEach(function(b,$){c.push({name:"backtrackCoverage"+$,type:"TABLE",value:new table$1.Coverage(b)})}),c.push({name:"inputGlyphCount",type:"USHORT",value:a.inputCoverage.length}),a.inputCoverage.forEach(function(b,$){c.push({name:"inputCoverage"+$,type:"TABLE",value:new table$1.Coverage(b)})}),c.push({name:"lookaheadGlyphCount",type:"USHORT",value:a.lookaheadCoverage.length}),a.lookaheadCoverage.forEach(function(b,$){c.push({name:"lookaheadCoverage"+$,type:"TABLE",value:new table$1.Coverage(b)})}),c.push({name:"substitutionCount",type:"USHORT",value:a.lookupRecords.length}),a.lookupRecords.forEach(function(b,$){c=c.concat({name:"sequenceIndex"+$,type:"USHORT",value:b.sequenceIndex}).concat({name:"lookupListIndex"+$,type:"USHORT",value:b.lookupListIndex})});var d=new table$1.Table("chainContextTable",c);return d}check.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function makeGsubTable(s){return new table$1.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table$1.ScriptList(s.scripts)},{name:"features",type:"TABLE",value:new table$1.FeatureList(s.features)},{name:"lookups",type:"TABLE",value:new table$1.LookupList(s.lookups,subtableMakers)}])}var gsub={parse:parseGsubTable,make:makeGsubTable};function parseMetaTable(s,a){var o=new parse$2.Parser(s,a),c=o.parseULong();check.argument(c===1,"Unsupported META table version."),o.parseULong(),o.parseULong();for(var d=o.parseULong(),b={},$=0;$<d;$++){var j=o.parseTag(),_e=o.parseULong(),et=o.parseULong(),tt=decode$1.UTF8(s,a+_e,et);b[j]=tt}return b}function makeMetaTable(s){var a=Object.keys(s).length,o="",c=16+a*12,d=new table$1.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:c},{name:"numTags",type:"ULONG",value:a}]);for(var b in s){var $=o.length;o+=s[b],d.fields.push({name:"tag "+b,type:"TAG",value:b}),d.fields.push({name:"offset "+b,type:"ULONG",value:c+$}),d.fields.push({name:"length "+b,type:"ULONG",value:s[b].length})}return d.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),d}var meta={parse:parseMetaTable,make:makeMetaTable};function log2(s){return Math.log(s)/Math.log(2)|0}function computeCheckSum(s){for(;s.length%4!==0;)s.push(0);for(var a=0,o=0;o<s.length;o+=4)a+=(s[o]<<24)+(s[o+1]<<16)+(s[o+2]<<8)+s[o+3];return a%=Math.pow(2,32),a}function makeTableRecord(s,a,o,c){return new table$1.Record("Table Record",[{name:"tag",type:"TAG",value:s!==void 0?s:""},{name:"checkSum",type:"ULONG",value:a!==void 0?a:0},{name:"offset",type:"ULONG",value:o!==void 0?o:0},{name:"length",type:"ULONG",value:c!==void 0?c:0}])}function makeSfntTable(s){var a=new table$1.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);a.tables=s,a.numTables=s.length;var o=Math.pow(2,log2(a.numTables));a.searchRange=16*o,a.entrySelector=log2(o),a.rangeShift=a.numTables*16-a.searchRange;for(var c=[],d=[],b=a.sizeOf()+makeTableRecord().sizeOf()*a.numTables;b%4!==0;)b+=1,d.push({name:"padding",type:"BYTE",value:0});for(var $=0;$<s.length;$+=1){var j=s[$];check.argument(j.tableName.length===4,"Table name"+j.tableName+" is invalid.");var _e=j.sizeOf(),et=makeTableRecord(j.tableName,computeCheckSum(j.encode()),b,_e);for(c.push({name:et.tag+" Table Record",type:"RECORD",value:et}),d.push({name:j.tableName+" table",type:"RECORD",value:j}),b+=_e,check.argument(!isNaN(b),"Something went wrong calculating the offset.");b%4!==0;)b+=1,d.push({name:"padding",type:"BYTE",value:0})}return c.sort(function(tt,rt){return tt.value.tag>rt.value.tag?1:-1}),a.fields=a.fields.concat(c),a.fields=a.fields.concat(d),a}function metricsForChar(s,a,o){for(var c=0;c<a.length;c+=1){var d=s.charToGlyphIndex(a[c]);if(d>0){var b=s.glyphs.get(d);return b.getMetrics()}}return o}function average(s){for(var a=0,o=0;o<s.length;o+=1)a+=s[o];return a/s.length}function fontToSfntTable(s){for(var a=[],o=[],c=[],d=[],b=[],$=[],j=[],_e,et=0,tt=0,rt=0,nt=0,it=0,at=0;at<s.glyphs.length;at+=1){var ct=s.glyphs.get(at),st=ct.unicode|0;if(isNaN(ct.advanceWidth))throw new Error("Glyph "+ct.name+" ("+at+"): advanceWidth is not a number.");(_e>st||_e===void 0)&&st>0&&(_e=st),et<st&&(et=st);var ot=os2.getUnicodeRange(st);if(ot<32)tt|=1<<ot;else if(ot<64)rt|=1<<ot-32;else if(ot<96)nt|=1<<ot-64;else if(ot<123)it|=1<<ot-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(ct.name!==".notdef"){var ht=ct.getMetrics();a.push(ht.xMin),o.push(ht.yMin),c.push(ht.xMax),d.push(ht.yMax),$.push(ht.leftSideBearing),j.push(ht.rightSideBearing),b.push(ct.advanceWidth)}}var dt={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,c),yMax:Math.max.apply(null,d),advanceWidthMax:Math.max.apply(null,b),advanceWidthAvg:average(b),minLeftSideBearing:Math.min.apply(null,$),maxLeftSideBearing:Math.max.apply(null,$),minRightSideBearing:Math.min.apply(null,j)};dt.ascender=s.ascender,dt.descender=s.descender;var ft=head$1.make({flags:3,unitsPerEm:s.unitsPerEm,xMin:dt.xMin,yMin:dt.yMin,xMax:dt.xMax,yMax:dt.yMax,lowestRecPPEM:3,createdTimestamp:s.createdTimestamp}),mt=hhea.make({ascender:dt.ascender,descender:dt.descender,advanceWidthMax:dt.advanceWidthMax,minLeftSideBearing:dt.minLeftSideBearing,minRightSideBearing:dt.minRightSideBearing,xMaxExtent:dt.maxLeftSideBearing+(dt.xMax-dt.xMin),numberOfHMetrics:s.glyphs.length}),gt=maxp.make(s.glyphs.length),vt=os2.make(Object.assign({xAvgCharWidth:Math.round(dt.advanceWidthAvg),usFirstCharIndex:_e,usLastCharIndex:et,ulUnicodeRange1:tt,ulUnicodeRange2:rt,ulUnicodeRange3:nt,ulUnicodeRange4:it,sTypoAscender:dt.ascender,sTypoDescender:dt.descender,sTypoLineGap:0,usWinAscent:dt.yMax,usWinDescent:Math.abs(dt.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(s,"xyvw",{yMax:Math.round(dt.ascender/2)}).yMax,sCapHeight:metricsForChar(s,"HIKLEFJMNTZBDPRAGOQSUVWXY",dt).yMax,usDefaultChar:s.hasChar(" ")?32:0,usBreakChar:s.hasChar(" ")?32:0},s.tables.os2)),yt=hmtx.make(s.glyphs),Et=cmap.make(s.glyphs),St=s.getEnglishName("fontFamily"),Ct=s.getEnglishName("fontSubfamily"),wt=St+" "+Ct,_t=s.getEnglishName("postScriptName");_t||(_t=St.replace(/\s/g,"")+"-"+Ct);var Tt={};for(var Mt in s.names)Tt[Mt]=s.names[Mt];Tt.uniqueID||(Tt.uniqueID={en:s.getEnglishName("manufacturer")+":"+wt}),Tt.postScriptName||(Tt.postScriptName={en:_t}),Tt.preferredFamily||(Tt.preferredFamily=s.names.fontFamily),Tt.preferredSubfamily||(Tt.preferredSubfamily=s.names.fontSubfamily);var Bt=[],Rt=_name.make(Tt,Bt),bt=Bt.length>0?ltag.make(Bt):void 0,Pt=post.make(),Dt=cff.make(s.glyphs,{version:s.getEnglishName("version"),fullName:wt,familyName:St,weightName:Ct,postScriptName:_t,unitsPerEm:s.unitsPerEm,fontBBox:[0,dt.yMin,dt.ascender,dt.advanceWidthMax]}),$t=s.metas&&Object.keys(s.metas).length>0?meta.make(s.metas):void 0,Lt=[ft,mt,gt,vt,Rt,Et,Pt,Dt,yt];bt&&Lt.push(bt),s.tables.gsub&&Lt.push(gsub.make(s.tables.gsub)),$t&&Lt.push($t);for(var Jt=makeSfntTable(Lt),Qt=Jt.encode(),or=computeCheckSum(Qt),er=Jt.fields,sr=!1,Ar=0;Ar<er.length;Ar+=1)if(er[Ar].name==="head table"){er[Ar].value.checkSumAdjustment=2981146554-or,sr=!0;break}if(!sr)throw new Error("Could not find head table with checkSum to adjust.");return Jt}var sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum};function searchTag(s,a){for(var o=0,c=s.length-1;o<=c;){var d=o+c>>>1,b=s[d].tag;if(b===a)return d;b<a?o=d+1:c=d-1}return-o-1}function binSearch(s,a){for(var o=0,c=s.length-1;o<=c;){var d=o+c>>>1,b=s[d];if(b===a)return d;b<a?o=d+1:c=d-1}return-o-1}function searchRange(s,a){for(var o,c=0,d=s.length-1;c<=d;){var b=c+d>>>1;o=s[b];var $=o.start;if($===a)return o;$<a?c=b+1:d=b-1}if(c>0)return o=s[c-1],a>o.end?0:o}function Layout(s,a){this.font=s,this.tableName=a}Layout.prototype={searchTag,binSearch,getTable:function(s){var a=this.font.tables[this.tableName];return!a&&s&&(a=this.font.tables[this.tableName]=this.createDefaultTable()),a},getScriptNames:function(){var s=this.getTable();return s?s.scripts.map(function(a){return a.tag}):[]},getDefaultScriptName:function(){var s=this.getTable();if(s){for(var a=!1,o=0;o<s.scripts.length;o++){var c=s.scripts[o].tag;if(c==="DFLT")return c;c==="latn"&&(a=!0)}if(a)return"latn"}},getScriptTable:function(s,a){var o=this.getTable(a);if(o){s=s||"DFLT";var c=o.scripts,d=searchTag(o.scripts,s);if(d>=0)return c[d].script;if(a){var b={tag:s,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return c.splice(-1-d,0,b),b.script}}},getLangSysTable:function(s,a,o){var c=this.getScriptTable(s,o);if(c){if(!a||a==="dflt"||a==="DFLT")return c.defaultLangSys;var d=searchTag(c.langSysRecords,a);if(d>=0)return c.langSysRecords[d].langSys;if(o){var b={tag:a,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return c.langSysRecords.splice(-1-d,0,b),b.langSys}}},getFeatureTable:function(s,a,o,c){var d=this.getLangSysTable(s,a,c);if(d){for(var b,$=d.featureIndexes,j=this.font.tables[this.tableName].features,_e=0;_e<$.length;_e++)if(b=j[$[_e]],b.tag===o)return b.feature;if(c){var et=j.length;return check.assert(et===0||o>=j[et-1].tag,"Features must be added in alphabetical order."),b={tag:o,feature:{params:0,lookupListIndexes:[]}},j.push(b),$.push(et),b.feature}}},getLookupTables:function(s,a,o,c,d){var b=this.getFeatureTable(s,a,o,d),$=[];if(b){for(var j,_e=b.lookupListIndexes,et=this.font.tables[this.tableName].lookups,tt=0;tt<_e.length;tt++)j=et[_e[tt]],j.lookupType===c&&$.push(j);if($.length===0&&d){j={lookupType:c,lookupFlag:0,subtables:[],markFilteringSet:void 0};var rt=et.length;return et.push(j),_e.push(rt),[j]}}return $},getGlyphClass:function(s,a){switch(s.format){case 1:return s.startGlyph<=a&&a<s.startGlyph+s.classes.length?s.classes[a-s.startGlyph]:0;case 2:var o=searchRange(s.ranges,a);return o?o.classId:0}},getCoverageIndex:function(s,a){switch(s.format){case 1:var o=binSearch(s.glyphs,a);return o>=0?o:-1;case 2:var c=searchRange(s.ranges,a);return c?c.index+a-c.start:-1}},expandCoverage:function(s){if(s.format===1)return s.glyphs;for(var a=[],o=s.ranges,c=0;c<o.length;c++)for(var d=o[c],b=d.start,$=d.end,j=b;j<=$;j++)a.push(j);return a}};function Position(s){Layout.call(this,s,"gpos")}Position.prototype=Layout.prototype;Position.prototype.init=function(){var s=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(s)};Position.prototype.getKerningValue=function(s,a,o){for(var c=0;c<s.length;c++)for(var d=s[c].subtables,b=0;b<d.length;b++){var $=d[b],j=this.getCoverageIndex($.coverage,a);if(!(j<0))switch($.posFormat){case 1:for(var _e=$.pairSets[j],et=0;et<_e.length;et++){var tt=_e[et];if(tt.secondGlyph===o)return tt.value1&&tt.value1.xAdvance||0}break;case 2:var rt=this.getGlyphClass($.classDef1,a),nt=this.getGlyphClass($.classDef2,o),it=$.classRecords[rt][nt];return it.value1&&it.value1.xAdvance||0}}return 0};Position.prototype.getKerningTables=function(s,a){if(this.font.tables.gpos)return this.getLookupTables(s,a,"kern",2)};function Substitution(s){Layout.call(this,s,"gsub")}function arraysEqual(s,a){var o=s.length;if(o!==a.length)return!1;for(var c=0;c<o;c++)if(s[c]!==a[c])return!1;return!0}function getSubstFormat(s,a,o){for(var c=s.subtables,d=0;d<c.length;d++){var b=c[d];if(b.substFormat===a)return b}if(o)return c.push(o),o}Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(s,a,o){for(var c=[],d=this.getLookupTables(a,o,s,1),b=0;b<d.length;b++)for(var $=d[b].subtables,j=0;j<$.length;j++){var _e=$[j],et=this.expandCoverage(_e.coverage),tt=void 0;if(_e.substFormat===1){var rt=_e.deltaGlyphId;for(tt=0;tt<et.length;tt++){var nt=et[tt];c.push({sub:nt,by:nt+rt})}}else{var it=_e.substitute;for(tt=0;tt<et.length;tt++)c.push({sub:et[tt],by:it[tt]})}}return c};Substitution.prototype.getMultiple=function(s,a,o){for(var c=[],d=this.getLookupTables(a,o,s,2),b=0;b<d.length;b++)for(var $=d[b].subtables,j=0;j<$.length;j++){var _e=$[j],et=this.expandCoverage(_e.coverage),tt=void 0;for(tt=0;tt<et.length;tt++){var rt=et[tt],nt=_e.sequences[tt];c.push({sub:rt,by:nt})}}return c};Substitution.prototype.getAlternates=function(s,a,o){for(var c=[],d=this.getLookupTables(a,o,s,3),b=0;b<d.length;b++)for(var $=d[b].subtables,j=0;j<$.length;j++)for(var _e=$[j],et=this.expandCoverage(_e.coverage),tt=_e.alternateSets,rt=0;rt<et.length;rt++)c.push({sub:et[rt],by:tt[rt]});return c};Substitution.prototype.getLigatures=function(s,a,o){for(var c=[],d=this.getLookupTables(a,o,s,4),b=0;b<d.length;b++)for(var $=d[b].subtables,j=0;j<$.length;j++)for(var _e=$[j],et=this.expandCoverage(_e.coverage),tt=_e.ligatureSets,rt=0;rt<et.length;rt++)for(var nt=et[rt],it=tt[rt],at=0;at<it.length;at++){var ct=it[at];c.push({sub:[nt].concat(ct.components),by:ct.ligGlyph})}return c};Substitution.prototype.addSingle=function(s,a,o,c){var d=this.getLookupTables(o,c,s,1,!0)[0],b=getSubstFormat(d,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(b.coverage.format===1,"Single: unable to modify coverage table format "+b.coverage.format);var $=a.sub,j=this.binSearch(b.coverage.glyphs,$);j<0&&(j=-1-j,b.coverage.glyphs.splice(j,0,$),b.substitute.splice(j,0,0)),b.substitute[j]=a.by};Substitution.prototype.addMultiple=function(s,a,o,c){check.assert(a.by instanceof Array&&a.by.length>1,'Multiple: "by" must be an array of two or more ids');var d=this.getLookupTables(o,c,s,2,!0)[0],b=getSubstFormat(d,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});check.assert(b.coverage.format===1,"Multiple: unable to modify coverage table format "+b.coverage.format);var $=a.sub,j=this.binSearch(b.coverage.glyphs,$);j<0&&(j=-1-j,b.coverage.glyphs.splice(j,0,$),b.sequences.splice(j,0,0)),b.sequences[j]=a.by};Substitution.prototype.addAlternate=function(s,a,o,c){var d=this.getLookupTables(o,c,s,3,!0)[0],b=getSubstFormat(d,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(b.coverage.format===1,"Alternate: unable to modify coverage table format "+b.coverage.format);var $=a.sub,j=this.binSearch(b.coverage.glyphs,$);j<0&&(j=-1-j,b.coverage.glyphs.splice(j,0,$),b.alternateSets.splice(j,0,0)),b.alternateSets[j]=a.by};Substitution.prototype.addLigature=function(s,a,o,c){var d=this.getLookupTables(o,c,s,4,!0)[0],b=d.subtables[0];b||(b={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},d.subtables[0]=b),check.assert(b.coverage.format===1,"Ligature: unable to modify coverage table format "+b.coverage.format);var $=a.sub[0],j=a.sub.slice(1),_e={ligGlyph:a.by,components:j},et=this.binSearch(b.coverage.glyphs,$);if(et>=0){for(var tt=b.ligatureSets[et],rt=0;rt<tt.length;rt++)if(arraysEqual(tt[rt].components,j))return;tt.push(_e)}else et=-1-et,b.coverage.glyphs.splice(et,0,$),b.ligatureSets.splice(et,0,[_e])};Substitution.prototype.getFeature=function(s,a,o){if(/ss\d\d/.test(s))return this.getSingle(s,a,o);switch(s){case"aalt":case"salt":return this.getSingle(s,a,o).concat(this.getAlternates(s,a,o));case"dlig":case"liga":case"rlig":return this.getLigatures(s,a,o);case"ccmp":return this.getMultiple(s,a,o).concat(this.getLigatures(s,a,o));case"stch":return this.getMultiple(s,a,o)}};Substitution.prototype.add=function(s,a,o,c){if(/ss\d\d/.test(s))return this.addSingle(s,a,o,c);switch(s){case"aalt":case"salt":return typeof a.by=="number"?this.addSingle(s,a,o,c):this.addAlternate(s,a,o,c);case"dlig":case"liga":case"rlig":return this.addLigature(s,a,o,c);case"ccmp":return a.by instanceof Array?this.addMultiple(s,a,o,c):this.addLigature(s,a,o,c)}};function isBrowser$2(){return typeof window<"u"}function arrayBufferToNodeBuffer(s){for(var a=new Buffer(s.byteLength),o=new Uint8Array(s),c=0;c<a.length;++c)a[c]=o[c];return a}function checkArgument(s,a){if(!s)throw a}function parseGlyphCoordinate(s,a,o,c,d){var b;return(a&c)>0?(b=s.parseByte(),a&d||(b=-b),b=o+b):(a&d)>0?b=o:b=o+s.parseShort(),b}function parseGlyph(s,a,o){var c=new parse$2.Parser(a,o);s.numberOfContours=c.parseShort(),s._xMin=c.parseShort(),s._yMin=c.parseShort(),s._xMax=c.parseShort(),s._yMax=c.parseShort();var d,b;if(s.numberOfContours>0){for(var $=s.endPointIndices=[],j=0;j<s.numberOfContours;j+=1)$.push(c.parseUShort());s.instructionLength=c.parseUShort(),s.instructions=[];for(var _e=0;_e<s.instructionLength;_e+=1)s.instructions.push(c.parseByte());var et=$[$.length-1]+1;d=[];for(var tt=0;tt<et;tt+=1)if(b=c.parseByte(),d.push(b),(b&8)>0)for(var rt=c.parseByte(),nt=0;nt<rt;nt+=1)d.push(b),tt+=1;if(check.argument(d.length===et,"Bad flags."),$.length>0){var it=[],at;if(et>0){for(var ct=0;ct<et;ct+=1)b=d[ct],at={},at.onCurve=!!(b&1),at.lastPointOfContour=$.indexOf(ct)>=0,it.push(at);for(var st=0,ot=0;ot<et;ot+=1)b=d[ot],at=it[ot],at.x=parseGlyphCoordinate(c,b,st,2,16),st=at.x;for(var ht=0,dt=0;dt<et;dt+=1)b=d[dt],at=it[dt],at.y=parseGlyphCoordinate(c,b,ht,4,32),ht=at.y}s.points=it}else s.points=[]}else if(s.numberOfContours===0)s.points=[];else{s.isComposite=!0,s.points=[],s.components=[];for(var ft=!0;ft;){d=c.parseUShort();var mt={glyphIndex:c.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(d&1)>0?(d&2)>0?(mt.dx=c.parseShort(),mt.dy=c.parseShort()):mt.matchedPoints=[c.parseUShort(),c.parseUShort()]:(d&2)>0?(mt.dx=c.parseChar(),mt.dy=c.parseChar()):mt.matchedPoints=[c.parseByte(),c.parseByte()],(d&8)>0?mt.xScale=mt.yScale=c.parseF2Dot14():(d&64)>0?(mt.xScale=c.parseF2Dot14(),mt.yScale=c.parseF2Dot14()):(d&128)>0&&(mt.xScale=c.parseF2Dot14(),mt.scale01=c.parseF2Dot14(),mt.scale10=c.parseF2Dot14(),mt.yScale=c.parseF2Dot14()),s.components.push(mt),ft=!!(d&32)}if(d&256){s.instructionLength=c.parseUShort(),s.instructions=[];for(var gt=0;gt<s.instructionLength;gt+=1)s.instructions.push(c.parseByte())}}}function transformPoints(s,a){for(var o=[],c=0;c<s.length;c+=1){var d=s[c],b={x:a.xScale*d.x+a.scale01*d.y+a.dx,y:a.scale10*d.x+a.yScale*d.y+a.dy,onCurve:d.onCurve,lastPointOfContour:d.lastPointOfContour};o.push(b)}return o}function getContours(s){for(var a=[],o=[],c=0;c<s.length;c+=1){var d=s[c];o.push(d),d.lastPointOfContour&&(a.push(o),o=[])}return check.argument(o.length===0,"There are still points left in the current contour."),a}function getPath(s){var a=new Path;if(!s)return a;for(var o=getContours(s),c=0;c<o.length;++c){var d=o[c],b=null,$=d[d.length-1],j=d[0];if($.onCurve)a.moveTo($.x,$.y);else if(j.onCurve)a.moveTo(j.x,j.y);else{var _e={x:($.x+j.x)*.5,y:($.y+j.y)*.5};a.moveTo(_e.x,_e.y)}for(var et=0;et<d.length;++et)if(b=$,$=j,j=d[(et+1)%d.length],$.onCurve)a.lineTo($.x,$.y);else{var tt=j;b.onCurve||(($.x+b.x)*.5,($.y+b.y)*.5),j.onCurve||(tt={x:($.x+j.x)*.5,y:($.y+j.y)*.5}),a.quadraticCurveTo($.x,$.y,tt.x,tt.y)}a.closePath()}return a}function buildPath(s,a){if(a.isComposite)for(var o=0;o<a.components.length;o+=1){var c=a.components[o],d=s.get(c.glyphIndex);if(d.getPath(),d.points){var b=void 0;if(c.matchedPoints===void 0)b=transformPoints(d.points,c);else{if(c.matchedPoints[0]>a.points.length-1||c.matchedPoints[1]>d.points.length-1)throw Error("Matched points out of range in "+a.name);var $=a.points[c.matchedPoints[0]],j=d.points[c.matchedPoints[1]],_e={xScale:c.xScale,scale01:c.scale01,scale10:c.scale10,yScale:c.yScale,dx:0,dy:0};j=transformPoints([j],_e)[0],_e.dx=$.x-j.x,_e.dy=$.y-j.y,b=transformPoints(d.points,_e)}a.points=a.points.concat(b)}}return getPath(a.points)}function parseGlyfTableAll(s,a,o,c){for(var d=new glyphset.GlyphSet(c),b=0;b<o.length-1;b+=1){var $=o[b],j=o[b+1];$!==j?d.push(b,glyphset.ttfGlyphLoader(c,b,parseGlyph,s,a+$,buildPath)):d.push(b,glyphset.glyphLoader(c,b))}return d}function parseGlyfTableOnLowMemory(s,a,o,c){var d=new glyphset.GlyphSet(c);return c._push=function(b){var $=o[b],j=o[b+1];$!==j?d.push(b,glyphset.ttfGlyphLoader(c,b,parseGlyph,s,a+$,buildPath)):d.push(b,glyphset.glyphLoader(c,b))},d}function parseGlyfTable(s,a,o,c,d){return d.lowMemory?parseGlyfTableOnLowMemory(s,a,o,c):parseGlyfTableAll(s,a,o,c)}var glyf={getPath,parse:parseGlyfTable},instructionTable,exec,execGlyph,execComponent;function Hinting(s){this.font=s,this.getCommands=function(a){return glyf.getPath(a).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(s){return s}function roundToGrid(s){return Math.sign(s)*Math.round(Math.abs(s))}function roundToDoubleGrid(s){return Math.sign(s)*Math.round(Math.abs(s*2))/2}function roundToHalfGrid(s){return Math.sign(s)*(Math.round(Math.abs(s)+.5)-.5)}function roundUpToGrid(s){return Math.sign(s)*Math.ceil(Math.abs(s))}function roundDownToGrid(s){return Math.sign(s)*Math.floor(Math.abs(s))}var roundSuper=function(s){var a=this.srPeriod,o=this.srPhase,c=this.srThreshold,d=1;return s<0&&(s=-s,d=-1),s+=c-o,s=Math.trunc(s/a)*a,s+=o,s<0?o*d:s*d},xUnitVector={x:1,y:0,axis:"x",distance:function(s,a,o,c){return(o?s.xo:s.x)-(c?a.xo:a.x)},interpolate:function(s,a,o,c){var d,b,$,j,_e,et,tt;if(!c||c===this){if(d=s.xo-a.xo,b=s.xo-o.xo,_e=a.x-a.xo,et=o.x-o.xo,$=Math.abs(d),j=Math.abs(b),tt=$+j,tt===0){s.x=s.xo+(_e+et)/2;return}s.x=s.xo+(_e*j+et*$)/tt;return}if(d=c.distance(s,a,!0,!0),b=c.distance(s,o,!0,!0),_e=c.distance(a,a,!1,!0),et=c.distance(o,o,!1,!0),$=Math.abs(d),j=Math.abs(b),tt=$+j,tt===0){xUnitVector.setRelative(s,s,(_e+et)/2,c,!0);return}xUnitVector.setRelative(s,s,(_e*j+et*$)/tt,c,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(s,a,o,c,d){if(!c||c===this){s.x=(d?a.xo:a.x)+o;return}var b=d?a.xo:a.x,$=d?a.yo:a.y,j=b+o*c.x,_e=$+o*c.y;s.x=j+(s.y-_e)/c.normalSlope},slope:0,touch:function(s){s.xTouched=!0},touched:function(s){return s.xTouched},untouch:function(s){s.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(s,a,o,c){return(o?s.yo:s.y)-(c?a.yo:a.y)},interpolate:function(s,a,o,c){var d,b,$,j,_e,et,tt;if(!c||c===this){if(d=s.yo-a.yo,b=s.yo-o.yo,_e=a.y-a.yo,et=o.y-o.yo,$=Math.abs(d),j=Math.abs(b),tt=$+j,tt===0){s.y=s.yo+(_e+et)/2;return}s.y=s.yo+(_e*j+et*$)/tt;return}if(d=c.distance(s,a,!0,!0),b=c.distance(s,o,!0,!0),_e=c.distance(a,a,!1,!0),et=c.distance(o,o,!1,!0),$=Math.abs(d),j=Math.abs(b),tt=$+j,tt===0){yUnitVector.setRelative(s,s,(_e+et)/2,c,!0);return}yUnitVector.setRelative(s,s,(_e*j+et*$)/tt,c,!0)},normalSlope:0,setRelative:function(s,a,o,c,d){if(!c||c===this){s.y=(d?a.yo:a.y)+o;return}var b=d?a.xo:a.x,$=d?a.yo:a.y,j=b+o*c.x,_e=$+o*c.y;s.y=_e+c.normalSlope*(s.x-j)},slope:Number.POSITIVE_INFINITY,touch:function(s){s.yTouched=!0},touched:function(s){return s.yTouched},untouch:function(s){s.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);function UnitVector(s,a){this.x=s,this.y=a,this.axis=void 0,this.slope=a/s,this.normalSlope=-s/a,Object.freeze(this)}UnitVector.prototype.distance=function(s,a,o,c){return this.x*xUnitVector.distance(s,a,o,c)+this.y*yUnitVector.distance(s,a,o,c)};UnitVector.prototype.interpolate=function(s,a,o,c){var d,b,$,j,_e,et,tt;if($=c.distance(s,a,!0,!0),j=c.distance(s,o,!0,!0),d=c.distance(a,a,!1,!0),b=c.distance(o,o,!1,!0),_e=Math.abs($),et=Math.abs(j),tt=_e+et,tt===0){this.setRelative(s,s,(d+b)/2,c,!0);return}this.setRelative(s,s,(d*et+b*_e)/tt,c,!0)};UnitVector.prototype.setRelative=function(s,a,o,c,d){c=c||this;var b=d?a.xo:a.x,$=d?a.yo:a.y,j=b+o*c.x,_e=$+o*c.y,et=c.normalSlope,tt=this.slope,rt=s.x,nt=s.y;s.x=(tt*rt-et*j+_e-nt)/(tt-et),s.y=tt*(s.x-rt)+nt};UnitVector.prototype.touch=function(s){s.xTouched=!0,s.yTouched=!0};function getUnitVector(s,a){var o=Math.sqrt(s*s+a*a);return s/=o,a/=o,s===1&&a===0?xUnitVector:s===0&&a===1?yUnitVector:new UnitVector(s,a)}function HPoint(s,a,o,c){this.x=this.xo=Math.round(s*64)/64,this.y=this.yo=Math.round(a*64)/64,this.lastPointOfContour=o,this.onCurve=c,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}HPoint.prototype.nextTouched=function(s){for(var a=this.nextPointOnContour;!s.touched(a)&&a!==this;)a=a.nextPointOnContour;return a};HPoint.prototype.prevTouched=function(s){for(var a=this.prevPointOnContour;!s.touched(a)&&a!==this;)a=a.prevPointOnContour;return a};var HPZero=Object.freeze(new HPoint(0,0)),defaultState$1={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State$1(s,a){switch(this.env=s,this.stack=[],this.prog=a,s){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}Hinting.prototype.exec=function(s,a){if(typeof a!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var o=this.font,c=this._prepState;if(!c||c.ppem!==a){var d=this._fpgmState;if(!d){State$1.prototype=defaultState$1,d=this._fpgmState=new State$1("fpgm",o.tables.fpgm),d.funcs=[],d.font=o,exports.DEBUG&&(console.log("---EXEC FPGM---"),d.step=-1);try{exec(d)}catch(et){console.log("Hinting error in FPGM:"+et),this._errorState=3;return}}State$1.prototype=d,c=this._prepState=new State$1("prep",o.tables.prep),c.ppem=a;var b=o.tables.cvt;if(b)for(var $=c.cvt=new Array(b.length),j=a/o.unitsPerEm,_e=0;_e<b.length;_e++)$[_e]=b[_e]*j;else c.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),c.step=-1);try{exec(c)}catch(et){this._errorState<2&&console.log("Hinting error in PREP:"+et),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(s,c)}catch(et){this._errorState<1&&(console.log("Hinting error:"+et),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};execGlyph=function(s,a){var o=a.ppem/a.font.unitsPerEm,c=o,d=s.components,b,$,j;if(State$1.prototype=a,!d)j=new State$1("glyf",s.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),j.step=-1),execComponent(s,j,o,c),$=j.gZone;else{var _e=a.font;$=[],b=[];for(var et=0;et<d.length;et++){var tt=d[et],rt=_e.glyphs.get(tt.glyphIndex);j=new State$1("glyf",rt.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+et+"---"),j.step=-1),execComponent(rt,j,o,c);for(var nt=Math.round(tt.dx*o),it=Math.round(tt.dy*c),at=j.gZone,ct=j.contours,st=0;st<at.length;st++){var ot=at[st];ot.xTouched=ot.yTouched=!1,ot.xo=ot.x=ot.x+nt,ot.yo=ot.y=ot.y+it}var ht=$.length;$.push.apply($,at);for(var dt=0;dt<ct.length;dt++)b.push(ct[dt]+ht)}s.instructions&&!j.inhibitGridFit&&(j=new State$1("glyf",s.instructions),j.gZone=j.z0=j.z1=j.z2=$,j.contours=b,$.push(new HPoint(0,0),new HPoint(Math.round(s.advanceWidth*o),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),j.step=-1),exec(j),$.length-=2)}return $};execComponent=function(s,a,o,c){for(var d=s.points||[],b=d.length,$=a.gZone=a.z0=a.z1=a.z2=[],j=a.contours=[],_e,et=0;et<b;et++)_e=d[et],$[et]=new HPoint(_e.x*o,_e.y*c,_e.lastPointOfContour,_e.onCurve);for(var tt,rt,nt=0;nt<b;nt++)_e=$[nt],tt||(tt=_e,j.push(nt)),_e.lastPointOfContour?(_e.nextPointOnContour=tt,tt.prevPointOnContour=_e,tt=void 0):(rt=$[nt+1],_e.nextPointOnContour=rt,rt.prevPointOnContour=_e);if(!a.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",a.stack);for(var it=0;it<b;it++)console.log(it,$[it].x,$[it].y)}if($.push(new HPoint(0,0),new HPoint(Math.round(s.advanceWidth*o),0)),exec(a),$.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",a.stack);for(var at=0;at<b;at++)console.log(at,$[at].x,$[at].y)}}};exec=function(s){var a=s.prog;if(a){var o=a.length,c;for(s.ip=0;s.ip<o;s.ip++){if(exports.DEBUG&&s.step++,c=instructionTable[a[s.ip]],!c)throw new Error("unknown instruction: 0x"+Number(a[s.ip]).toString(16));c(s)}}};function initTZone(s){for(var a=s.tZone=new Array(s.gZone.length),o=0;o<a.length;o++)a[o]=new HPoint(0,0)}function skip(s,a){var o=s.prog,c=s.ip,d=1,b;do if(b=o[++c],b===88)d++;else if(b===89)d--;else if(b===64)c+=o[c+1]+1;else if(b===65)c+=2*o[c+1]+1;else if(b>=176&&b<=183)c+=b-176+1;else if(b>=184&&b<=191)c+=(b-184+1)*2;else if(a&&d===1&&b===27)break;while(d>0);s.ip=c}function SVTCA(s,a){exports.DEBUG&&console.log(a.step,"SVTCA["+s.axis+"]"),a.fv=a.pv=a.dpv=s}function SPVTCA(s,a){exports.DEBUG&&console.log(a.step,"SPVTCA["+s.axis+"]"),a.pv=a.dpv=s}function SFVTCA(s,a){exports.DEBUG&&console.log(a.step,"SFVTCA["+s.axis+"]"),a.fv=s}function SPVTL(s,a){var o=a.stack,c=o.pop(),d=o.pop(),b=a.z2[c],$=a.z1[d];exports.DEBUG&&console.log("SPVTL["+s+"]",c,d);var j,_e;s?(j=b.y-$.y,_e=$.x-b.x):(j=$.x-b.x,_e=$.y-b.y),a.pv=a.dpv=getUnitVector(j,_e)}function SFVTL(s,a){var o=a.stack,c=o.pop(),d=o.pop(),b=a.z2[c],$=a.z1[d];exports.DEBUG&&console.log("SFVTL["+s+"]",c,d);var j,_e;s?(j=b.y-$.y,_e=$.x-b.x):(j=$.x-b.x,_e=$.y-b.y),a.fv=getUnitVector(j,_e)}function SPVFS(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"SPVFS[]",o,c),s.pv=s.dpv=getUnitVector(c,o)}function SFVFS(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"SPVFS[]",o,c),s.fv=getUnitVector(c,o)}function GPV(s){var a=s.stack,o=s.pv;exports.DEBUG&&console.log(s.step,"GPV[]"),a.push(o.x*16384),a.push(o.y*16384)}function GFV(s){var a=s.stack,o=s.fv;exports.DEBUG&&console.log(s.step,"GFV[]"),a.push(o.x*16384),a.push(o.y*16384)}function SFVTPV(s){s.fv=s.pv,exports.DEBUG&&console.log(s.step,"SFVTPV[]")}function ISECT(s){var a=s.stack,o=a.pop(),c=a.pop(),d=a.pop(),b=a.pop(),$=a.pop(),j=s.z0,_e=s.z1,et=j[o],tt=j[c],rt=_e[d],nt=_e[b],it=s.z2[$];exports.DEBUG&&console.log("ISECT[], ",o,c,d,b,$);var at=et.x,ct=et.y,st=tt.x,ot=tt.y,ht=rt.x,dt=rt.y,ft=nt.x,mt=nt.y,gt=(at-st)*(dt-mt)-(ct-ot)*(ht-ft),vt=at*ot-ct*st,yt=ht*mt-dt*ft;it.x=(vt*(ht-ft)-yt*(at-st))/gt,it.y=(vt*(dt-mt)-yt*(ct-ot))/gt}function SRP0(s){s.rp0=s.stack.pop(),exports.DEBUG&&console.log(s.step,"SRP0[]",s.rp0)}function SRP1(s){s.rp1=s.stack.pop(),exports.DEBUG&&console.log(s.step,"SRP1[]",s.rp1)}function SRP2(s){s.rp2=s.stack.pop(),exports.DEBUG&&console.log(s.step,"SRP2[]",s.rp2)}function SZP0(s){var a=s.stack.pop();switch(exports.DEBUG&&console.log(s.step,"SZP0[]",a),s.zp0=a,a){case 0:s.tZone||initTZone(s),s.z0=s.tZone;break;case 1:s.z0=s.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(s){var a=s.stack.pop();switch(exports.DEBUG&&console.log(s.step,"SZP1[]",a),s.zp1=a,a){case 0:s.tZone||initTZone(s),s.z1=s.tZone;break;case 1:s.z1=s.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(s){var a=s.stack.pop();switch(exports.DEBUG&&console.log(s.step,"SZP2[]",a),s.zp2=a,a){case 0:s.tZone||initTZone(s),s.z2=s.tZone;break;case 1:s.z2=s.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(s){var a=s.stack.pop();switch(exports.DEBUG&&console.log(s.step,"SZPS[]",a),s.zp0=s.zp1=s.zp2=a,a){case 0:s.tZone||initTZone(s),s.z0=s.z1=s.z2=s.tZone;break;case 1:s.z0=s.z1=s.z2=s.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(s){s.loop=s.stack.pop(),exports.DEBUG&&console.log(s.step,"SLOOP[]",s.loop)}function RTG(s){exports.DEBUG&&console.log(s.step,"RTG[]"),s.round=roundToGrid}function RTHG(s){exports.DEBUG&&console.log(s.step,"RTHG[]"),s.round=roundToHalfGrid}function SMD(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"SMD[]",a),s.minDis=a/64}function ELSE(s){exports.DEBUG&&console.log(s.step,"ELSE[]"),skip(s,!1)}function JMPR(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"JMPR[]",a),s.ip+=a-1}function SCVTCI(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"SCVTCI[]",a),s.cvCutIn=a/64}function DUP(s){var a=s.stack;exports.DEBUG&&console.log(s.step,"DUP[]"),a.push(a[a.length-1])}function POP(s){exports.DEBUG&&console.log(s.step,"POP[]"),s.stack.pop()}function CLEAR(s){exports.DEBUG&&console.log(s.step,"CLEAR[]"),s.stack.length=0}function SWAP(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"SWAP[]"),a.push(o),a.push(c)}function DEPTH(s){var a=s.stack;exports.DEBUG&&console.log(s.step,"DEPTH[]"),a.push(a.length)}function LOOPCALL(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"LOOPCALL[]",o,c);var d=s.ip,b=s.prog;s.prog=s.funcs[o];for(var $=0;$<c;$++)exec(s),exports.DEBUG&&console.log(++s.step,$+1<c?"next loopcall":"done loopcall",$);s.ip=d,s.prog=b}function CALL(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"CALL[]",a);var o=s.ip,c=s.prog;s.prog=s.funcs[a],exec(s),s.ip=o,s.prog=c,exports.DEBUG&&console.log(++s.step,"returning from",a)}function CINDEX(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"CINDEX[]",o),a.push(a[a.length-o])}function MINDEX(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"MINDEX[]",o),a.push(a.splice(a.length-o,1)[0])}function FDEF(s){if(s.env!=="fpgm")throw new Error("FDEF not allowed here");var a=s.stack,o=s.prog,c=s.ip,d=a.pop(),b=c;for(exports.DEBUG&&console.log(s.step,"FDEF[]",d);o[++c]!==45;);s.ip=c,s.funcs[d]=o.slice(b+1,c)}function MDAP(s,a){var o=a.stack.pop(),c=a.z0[o],d=a.fv,b=a.pv;exports.DEBUG&&console.log(a.step,"MDAP["+s+"]",o);var $=b.distance(c,HPZero);s&&($=a.round($)),d.setRelative(c,HPZero,$,b),d.touch(c),a.rp0=a.rp1=o}function IUP(s,a){var o=a.z2,c=o.length-2,d,b,$;exports.DEBUG&&console.log(a.step,"IUP["+s.axis+"]");for(var j=0;j<c;j++)d=o[j],!s.touched(d)&&(b=d.prevTouched(s),b!==d&&($=d.nextTouched(s),b===$&&s.setRelative(d,d,s.distance(b,b,!1,!0),s,!0),s.interpolate(d,b,$,s)))}function SHP(s,a){for(var o=a.stack,c=s?a.rp1:a.rp2,d=(s?a.z0:a.z1)[c],b=a.fv,$=a.pv,j=a.loop,_e=a.z2;j--;){var et=o.pop(),tt=_e[et],rt=$.distance(d,d,!1,!0);b.setRelative(tt,tt,rt,$),b.touch(tt),exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-j)+": ":"")+"SHP["+(s?"rp1":"rp2")+"]",et)}a.loop=1}function SHC(s,a){var o=a.stack,c=s?a.rp1:a.rp2,d=(s?a.z0:a.z1)[c],b=a.fv,$=a.pv,j=o.pop(),_e=a.z2[a.contours[j]],et=_e;exports.DEBUG&&console.log(a.step,"SHC["+s+"]",j);var tt=$.distance(d,d,!1,!0);do et!==d&&b.setRelative(et,et,tt,$),et=et.nextPointOnContour;while(et!==_e)}function SHZ(s,a){var o=a.stack,c=s?a.rp1:a.rp2,d=(s?a.z0:a.z1)[c],b=a.fv,$=a.pv,j=o.pop();exports.DEBUG&&console.log(a.step,"SHZ["+s+"]",j);var _e;switch(j){case 0:_e=a.tZone;break;case 1:_e=a.gZone;break;default:throw new Error("Invalid zone")}for(var et,tt=$.distance(d,d,!1,!0),rt=_e.length-2,nt=0;nt<rt;nt++)et=_e[nt],b.setRelative(et,et,tt,$)}function SHPIX(s){for(var a=s.stack,o=s.loop,c=s.fv,d=a.pop()/64,b=s.z2;o--;){var $=a.pop(),j=b[$];exports.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-o)+": ":"")+"SHPIX[]",$,d),c.setRelative(j,j,d),c.touch(j)}s.loop=1}function IP(s){for(var a=s.stack,o=s.rp1,c=s.rp2,d=s.loop,b=s.z0[o],$=s.z1[c],j=s.fv,_e=s.dpv,et=s.z2;d--;){var tt=a.pop(),rt=et[tt];exports.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-d)+": ":"")+"IP[]",tt,o,"<->",c),j.interpolate(rt,b,$,_e),j.touch(rt)}s.loop=1}function MSIRP(s,a){var o=a.stack,c=o.pop()/64,d=o.pop(),b=a.z1[d],$=a.z0[a.rp0],j=a.fv,_e=a.pv;j.setRelative(b,$,c,_e),j.touch(b),exports.DEBUG&&console.log(a.step,"MSIRP["+s+"]",c,d),a.rp1=a.rp0,a.rp2=d,s&&(a.rp0=d)}function ALIGNRP(s){for(var a=s.stack,o=s.rp0,c=s.z0[o],d=s.loop,b=s.fv,$=s.pv,j=s.z1;d--;){var _e=a.pop(),et=j[_e];exports.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-d)+": ":"")+"ALIGNRP[]",_e),b.setRelative(et,c,0,$),b.touch(et)}s.loop=1}function RTDG(s){exports.DEBUG&&console.log(s.step,"RTDG[]"),s.round=roundToDoubleGrid}function MIAP(s,a){var o=a.stack,c=o.pop(),d=o.pop(),b=a.z0[d],$=a.fv,j=a.pv,_e=a.cvt[c];exports.DEBUG&&console.log(a.step,"MIAP["+s+"]",c,"(",_e,")",d);var et=j.distance(b,HPZero);s&&(Math.abs(et-_e)<a.cvCutIn&&(et=_e),et=a.round(et)),$.setRelative(b,HPZero,et,j),a.zp0===0&&(b.xo=b.x,b.yo=b.y),$.touch(b),a.rp0=a.rp1=d}function NPUSHB(s){var a=s.prog,o=s.ip,c=s.stack,d=a[++o];exports.DEBUG&&console.log(s.step,"NPUSHB[]",d);for(var b=0;b<d;b++)c.push(a[++o]);s.ip=o}function NPUSHW(s){var a=s.ip,o=s.prog,c=s.stack,d=o[++a];exports.DEBUG&&console.log(s.step,"NPUSHW[]",d);for(var b=0;b<d;b++){var $=o[++a]<<8|o[++a];$&32768&&($=-(($^65535)+1)),c.push($)}s.ip=a}function WS(s){var a=s.stack,o=s.store;o||(o=s.store=[]);var c=a.pop(),d=a.pop();exports.DEBUG&&console.log(s.step,"WS",c,d),o[d]=c}function RS(s){var a=s.stack,o=s.store,c=a.pop();exports.DEBUG&&console.log(s.step,"RS",c);var d=o&&o[c]||0;a.push(d)}function WCVTP(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"WCVTP",o,c),s.cvt[c]=o/64}function RCVT(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"RCVT",o),a.push(s.cvt[o]*64)}function GC(s,a){var o=a.stack,c=o.pop(),d=a.z2[c];exports.DEBUG&&console.log(a.step,"GC["+s+"]",c),o.push(a.dpv.distance(d,HPZero,s,!1)*64)}function MD(s,a){var o=a.stack,c=o.pop(),d=o.pop(),b=a.z1[c],$=a.z0[d],j=a.dpv.distance($,b,s,s);exports.DEBUG&&console.log(a.step,"MD["+s+"]",c,d,"->",j),a.stack.push(Math.round(j*64))}function MPPEM(s){exports.DEBUG&&console.log(s.step,"MPPEM[]"),s.stack.push(s.ppem)}function FLIPON(s){exports.DEBUG&&console.log(s.step,"FLIPON[]"),s.autoFlip=!0}function LT(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"LT[]",o,c),a.push(c<o?1:0)}function LTEQ(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"LTEQ[]",o,c),a.push(c<=o?1:0)}function GT(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"GT[]",o,c),a.push(c>o?1:0)}function GTEQ(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"GTEQ[]",o,c),a.push(c>=o?1:0)}function EQ(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"EQ[]",o,c),a.push(o===c?1:0)}function NEQ(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"NEQ[]",o,c),a.push(o!==c?1:0)}function ODD(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"ODD[]",o),a.push(Math.trunc(o)%2?1:0)}function EVEN(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"EVEN[]",o),a.push(Math.trunc(o)%2?0:1)}function IF(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"IF[]",a),a||(skip(s,!0),exports.DEBUG&&console.log(s.step,"EIF[]"))}function EIF(s){exports.DEBUG&&console.log(s.step,"EIF[]")}function AND(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"AND[]",o,c),a.push(o&&c?1:0)}function OR(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"OR[]",o,c),a.push(o||c?1:0)}function NOT(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"NOT[]",o),a.push(o?0:1)}function DELTAP123(s,a){var o=a.stack,c=o.pop(),d=a.fv,b=a.pv,$=a.ppem,j=a.deltaBase+(s-1)*16,_e=a.deltaShift,et=a.z0;exports.DEBUG&&console.log(a.step,"DELTAP["+s+"]",c,o);for(var tt=0;tt<c;tt++){var rt=o.pop(),nt=o.pop(),it=j+((nt&240)>>4);if(it===$){var at=(nt&15)-8;at>=0&&at++,exports.DEBUG&&console.log(a.step,"DELTAPFIX",rt,"by",at*_e);var ct=et[rt];d.setRelative(ct,ct,at*_e,b)}}}function SDB(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"SDB[]",o),s.deltaBase=o}function SDS(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"SDS[]",o),s.deltaShift=Math.pow(.5,o)}function ADD(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"ADD[]",o,c),a.push(c+o)}function SUB(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"SUB[]",o,c),a.push(c-o)}function DIV(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"DIV[]",o,c),a.push(c*64/o)}function MUL(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"MUL[]",o,c),a.push(c*o/64)}function ABS(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"ABS[]",o),a.push(Math.abs(o))}function NEG(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"NEG[]",o),a.push(-o)}function FLOOR(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"FLOOR[]",o),a.push(Math.floor(o/64)*64)}function CEILING(s){var a=s.stack,o=a.pop();exports.DEBUG&&console.log(s.step,"CEILING[]",o),a.push(Math.ceil(o/64)*64)}function ROUND(s,a){var o=a.stack,c=o.pop();exports.DEBUG&&console.log(a.step,"ROUND[]"),o.push(a.round(c/64)*64)}function WCVTF(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"WCVTF[]",o,c),s.cvt[c]=o*s.ppem/s.font.unitsPerEm}function DELTAC123(s,a){var o=a.stack,c=o.pop(),d=a.ppem,b=a.deltaBase+(s-1)*16,$=a.deltaShift;exports.DEBUG&&console.log(a.step,"DELTAC["+s+"]",c,o);for(var j=0;j<c;j++){var _e=o.pop(),et=o.pop(),tt=b+((et&240)>>4);if(tt===d){var rt=(et&15)-8;rt>=0&&rt++;var nt=rt*$;exports.DEBUG&&console.log(a.step,"DELTACFIX",_e,"by",nt),a.cvt[_e]+=nt}}}function SROUND(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"SROUND[]",a),s.round=roundSuper;var o;switch(a&192){case 0:o=.5;break;case 64:o=1;break;case 128:o=2;break;default:throw new Error("invalid SROUND value")}switch(s.srPeriod=o,a&48){case 0:s.srPhase=0;break;case 16:s.srPhase=.25*o;break;case 32:s.srPhase=.5*o;break;case 48:s.srPhase=.75*o;break;default:throw new Error("invalid SROUND value")}a&=15,a===0?s.srThreshold=0:s.srThreshold=(a/8-.5)*o}function S45ROUND(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"S45ROUND[]",a),s.round=roundSuper;var o;switch(a&192){case 0:o=Math.sqrt(2)/2;break;case 64:o=Math.sqrt(2);break;case 128:o=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(s.srPeriod=o,a&48){case 0:s.srPhase=0;break;case 16:s.srPhase=.25*o;break;case 32:s.srPhase=.5*o;break;case 48:s.srPhase=.75*o;break;default:throw new Error("invalid S45ROUND value")}a&=15,a===0?s.srThreshold=0:s.srThreshold=(a/8-.5)*o}function ROFF(s){exports.DEBUG&&console.log(s.step,"ROFF[]"),s.round=roundOff}function RUTG(s){exports.DEBUG&&console.log(s.step,"RUTG[]"),s.round=roundUpToGrid}function RDTG(s){exports.DEBUG&&console.log(s.step,"RDTG[]"),s.round=roundDownToGrid}function SCANCTRL(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"SCANCTRL[]",a)}function SDPVTL(s,a){var o=a.stack,c=o.pop(),d=o.pop(),b=a.z2[c],$=a.z1[d];exports.DEBUG&&console.log(a.step,"SDPVTL["+s+"]",c,d);var j,_e;s?(j=b.y-$.y,_e=$.x-b.x):(j=$.x-b.x,_e=$.y-b.y),a.dpv=getUnitVector(j,_e)}function GETINFO(s){var a=s.stack,o=a.pop(),c=0;exports.DEBUG&&console.log(s.step,"GETINFO[]",o),o&1&&(c=35),o&32&&(c|=4096),a.push(c)}function ROLL(s){var a=s.stack,o=a.pop(),c=a.pop(),d=a.pop();exports.DEBUG&&console.log(s.step,"ROLL[]"),a.push(c),a.push(o),a.push(d)}function MAX(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"MAX[]",o,c),a.push(Math.max(c,o))}function MIN(s){var a=s.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(s.step,"MIN[]",o,c),a.push(Math.min(c,o))}function SCANTYPE(s){var a=s.stack.pop();exports.DEBUG&&console.log(s.step,"SCANTYPE[]",a)}function INSTCTRL(s){var a=s.stack.pop(),o=s.stack.pop();switch(exports.DEBUG&&console.log(s.step,"INSTCTRL[]",a,o),a){case 1:s.inhibitGridFit=!!o;return;case 2:s.ignoreCvt=!!o;return;default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(s,a){var o=a.stack,c=a.prog,d=a.ip;exports.DEBUG&&console.log(a.step,"PUSHB["+s+"]");for(var b=0;b<s;b++)o.push(c[++d]);a.ip=d}function PUSHW(s,a){var o=a.ip,c=a.prog,d=a.stack;exports.DEBUG&&console.log(a.ip,"PUSHW["+s+"]");for(var b=0;b<s;b++){var $=c[++o]<<8|c[++o];$&32768&&($=-(($^65535)+1)),d.push($)}a.ip=o}function MDRP_MIRP(s,a,o,c,d,b){var $=b.stack,j=s&&$.pop(),_e=$.pop(),et=b.rp0,tt=b.z0[et],rt=b.z1[_e],nt=b.minDis,it=b.fv,at=b.dpv,ct,st,ot,ht;st=ct=at.distance(rt,tt,!0,!0),ot=st>=0?1:-1,st=Math.abs(st),s&&(ht=b.cvt[j],c&&Math.abs(st-ht)<b.cvCutIn&&(st=ht)),o&&st<nt&&(st=nt),c&&(st=b.round(st)),it.setRelative(rt,tt,ot*st,at),it.touch(rt),exports.DEBUG&&console.log(b.step,(s?"MIRP[":"MDRP[")+(a?"M":"m")+(o?">":"_")+(c?"R":"_")+(d===0?"Gr":d===1?"Bl":d===2?"Wh":"")+"]",s?j+"("+b.cvt[j]+","+ht+")":"",_e,"(d =",ct,"->",ot*st,")"),b.rp1=b.rp0,b.rp2=_e,a&&(b.rp0=_e)}instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT,LTEQ,GT,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];function Token(s){this.char=s,this.state={},this.activeState=null}function ContextRange(s,a,o){this.contextName=o,this.startIndex=s,this.endOffset=a}function ContextChecker(s,a,o){this.contextName=s,this.openRange=null,this.ranges=[],this.checkStart=a,this.checkEnd=o}function ContextParams(s,a){this.context=s,this.index=a,this.length=s.length,this.current=s[a],this.backtrack=s.slice(0,a),this.lookahead=s.slice(a+1)}function Event(s){this.eventId=s,this.subscribers=[]}function initializeCoreEvents(s){var a=this,o=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];o.forEach(function(d){Object.defineProperty(a.events,d,{value:new Event(d)})}),s&&o.forEach(function(d){var b=s[d];typeof b=="function"&&a.events[d].subscribe(b)});var c=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];c.forEach(function(d){a.events[d].subscribe(a.updateContextsRanges)})}function Tokenizer(s){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,s)}Token.prototype.setState=function(s,a){return this.state[s]=a,this.activeState={key:s,value:this.state[s]},this.activeState};Token.prototype.getState=function(s){return this.state[s]||null};Tokenizer.prototype.inboundIndex=function(s){return s>=0&&s<this.tokens.length};Tokenizer.prototype.composeRUD=function(s){var a=this,o=!0,c=s.map(function(b){return a[b[0]].apply(a,b.slice(1).concat(o))}),d=function(b){return typeof b=="object"&&b.hasOwnProperty("FAIL")};if(c.every(d))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:c.filter(d)};this.dispatch("composeRUD",[c.filter(function(b){return!d(b)})])};Tokenizer.prototype.replaceRange=function(s,a,o,c){a=a!==null?a:this.tokens.length;var d=o.every(function($){return $ instanceof Token});if(!isNaN(s)&&this.inboundIndex(s)&&d){var b=this.tokens.splice.apply(this.tokens,[s,a].concat(o));return c||this.dispatch("replaceToken",[s,a,o]),[b,o]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Tokenizer.prototype.replaceToken=function(s,a,o){if(!isNaN(s)&&this.inboundIndex(s)&&a instanceof Token){var c=this.tokens.splice(s,1,a);return o||this.dispatch("replaceToken",[s,a]),[c[0],a]}else return{FAIL:"replaceToken: invalid token or index."}};Tokenizer.prototype.removeRange=function(s,a,o){a=isNaN(a)?this.tokens.length:a;var c=this.tokens.splice(s,a);return o||this.dispatch("removeRange",[c,s,a]),c};Tokenizer.prototype.removeToken=function(s,a){if(!isNaN(s)&&this.inboundIndex(s)){var o=this.tokens.splice(s,1);return a||this.dispatch("removeToken",[o,s]),o}else return{FAIL:"removeToken: invalid token index."}};Tokenizer.prototype.insertToken=function(s,a,o){var c=s.every(function(d){return d instanceof Token});return c?(this.tokens.splice.apply(this.tokens,[a,0].concat(s)),o||this.dispatch("insertToken",[s,a]),s):{FAIL:"insertToken: invalid token(s)."}};Tokenizer.prototype.registerModifier=function(s,a,o){this.events.newToken.subscribe(function(c,d){var b=[c,d],$=a===null||a.apply(this,b)===!0,j=[c,d];if($){var _e=o.apply(this,j);c.setState(s,_e)}}),this.registeredModifiers.push(s)};Event.prototype.subscribe=function(s){return typeof s=="function"?this.subscribers.push(s)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Event.prototype.unsubscribe=function(s){this.subscribers.splice(s,1)};ContextParams.prototype.setCurrentIndex=function(s){this.index=s,this.current=this.context[s],this.backtrack=this.context.slice(0,s),this.lookahead=this.context.slice(s+1)};ContextParams.prototype.get=function(s){switch(!0){case s===0:return this.current;case(s<0&&Math.abs(s)<=this.backtrack.length):return this.backtrack.slice(s)[0];case(s>0&&s<=this.lookahead.length):return this.lookahead[s-1];default:return null}};Tokenizer.prototype.rangeToText=function(s){if(s instanceof ContextRange)return this.getRangeTokens(s).map(function(a){return a.char}).join("")};Tokenizer.prototype.getText=function(){return this.tokens.map(function(s){return s.char}).join("")};Tokenizer.prototype.getContext=function(s){var a=this.registeredContexts[s];return a||null};Tokenizer.prototype.on=function(s,a){var o=this.events[s];return o?o.subscribe(a):null};Tokenizer.prototype.dispatch=function(s,a){var o=this,c=this.events[s];c instanceof Event&&c.subscribers.forEach(function(d){d.apply(o,a||[])})};Tokenizer.prototype.registerContextChecker=function(s,a,o){if(this.getContext(s))return{FAIL:"context name '"+s+"' is already registered."};if(typeof a!="function")return{FAIL:"missing context start check."};if(typeof o!="function")return{FAIL:"missing context end check."};var c=new ContextChecker(s,a,o);return this.registeredContexts[s]=c,this.contextCheckers.push(c),c};Tokenizer.prototype.getRangeTokens=function(s){var a=s.startIndex+s.endOffset;return[].concat(this.tokens.slice(s.startIndex,a))};Tokenizer.prototype.getContextRanges=function(s){var a=this.getContext(s);return a?a.ranges:{FAIL:"context checker '"+s+"' is not registered."}};Tokenizer.prototype.resetContextsRanges=function(){var s=this.registeredContexts;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.ranges=[]}};Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var s=this.tokens.map(function(c){return c.char}),a=0;a<s.length;a++){var o=new ContextParams(s,a);this.runContextCheck(o)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Tokenizer.prototype.setEndOffset=function(s,a){var o=this.getContext(a).openRange.startIndex,c=new ContextRange(o,s,a),d=this.getContext(a).ranges;return c.rangeId=a+"."+d.length,d.push(c),this.getContext(a).openRange=null,c};Tokenizer.prototype.runContextCheck=function(s){var a=this,o=s.index;this.contextCheckers.forEach(function(c){var d=c.contextName,b=a.getContext(d).openRange;if(!b&&c.checkStart(s)&&(b=new ContextRange(o,null,d),a.getContext(d).openRange=b,a.dispatch("contextStart",[d,o])),b&&c.checkEnd(s)){var $=o-b.startIndex+1,j=a.setEndOffset($,d);a.dispatch("contextEnd",[d,j])}})};Tokenizer.prototype.tokenize=function(s){this.tokens=[],this.resetContextsRanges();var a=Array.from(s);this.dispatch("start");for(var o=0;o<a.length;o++){var c=a[o],d=new ContextParams(a,o);this.dispatch("next",[d]),this.runContextCheck(d);var b=new Token(c);this.tokens.push(b),this.dispatch("newToken",[b,d])}return this.dispatch("end",[this.tokens]),this.tokens};function isArabicChar(s){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(s)}function isIsolatedArabicChar(s){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(s)}function isTashkeelArabicChar(s){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(s)}function isLatinChar(s){return/[A-z]/.test(s)}function isWhiteSpace(s){return/\s/.test(s)}function FeatureQuery(s){this.font=s,this.features={}}function SubstitutionAction(s){this.id=s.id,this.tag=s.tag,this.substitution=s.substitution}function lookupCoverage(s,a){if(!s)return-1;switch(a.format){case 1:return a.glyphs.indexOf(s);case 2:for(var o=a.ranges,c=0;c<o.length;c++){var d=o[c];if(s>=d.start&&s<=d.end){var b=s-d.start;return d.index+b}}break;default:return-1}return-1}function singleSubstitutionFormat1(s,a){var o=lookupCoverage(s,a.coverage);return o===-1?null:s+a.deltaGlyphId}function singleSubstitutionFormat2(s,a){var o=lookupCoverage(s,a.coverage);return o===-1?null:a.substitute[o]}function lookupCoverageList(s,a){for(var o=[],c=0;c<s.length;c++){var d=s[c],b=a.current;b=Array.isArray(b)?b[0]:b;var $=lookupCoverage(b,d);$!==-1&&o.push($)}return o.length!==s.length?-1:o}function chainingSubstitutionFormat3(s,a){var o=a.inputCoverage.length+a.lookaheadCoverage.length+a.backtrackCoverage.length;if(s.context.length<o)return[];var c=lookupCoverageList(a.inputCoverage,s);if(c===-1)return[];var d=a.inputCoverage.length-1;if(s.lookahead.length<a.lookaheadCoverage.length)return[];for(var b=s.lookahead.slice(d);b.length&&isTashkeelArabicChar(b[0].char);)b.shift();var $=new ContextParams(b,0),j=lookupCoverageList(a.lookaheadCoverage,$),_e=[].concat(s.backtrack);for(_e.reverse();_e.length&&isTashkeelArabicChar(_e[0].char);)_e.shift();if(_e.length<a.backtrackCoverage.length)return[];var et=new ContextParams(_e,0),tt=lookupCoverageList(a.backtrackCoverage,et),rt=c.length===a.inputCoverage.length&&j.length===a.lookaheadCoverage.length&&tt.length===a.backtrackCoverage.length,nt=[];if(rt)for(var it=0;it<a.lookupRecords.length;it++)for(var at=a.lookupRecords[it],ct=at.lookupListIndex,st=this.getLookupByIndex(ct),ot=0;ot<st.subtables.length;ot++){var ht=st.subtables[ot],dt=this.getLookupMethod(st,ht),ft=this.getSubstitutionType(st,ht);if(ft==="12")for(var mt=0;mt<c.length;mt++){var gt=s.get(mt),vt=dt(gt);vt&&nt.push(vt)}}return nt}function ligatureSubstitutionFormat1(s,a){var o=s.current,c=lookupCoverage(o,a.coverage);if(c===-1)return null;for(var d,b=a.ligatureSets[c],$=0;$<b.length;$++){d=b[$];for(var j=0;j<d.components.length;j++){var _e=s.lookahead[j],et=d.components[j];if(_e!==et)break;if(j===d.components.length-1)return d}}return null}function decompositionSubstitutionFormat1(s,a){var o=lookupCoverage(s,a.coverage);return o===-1?null:a.sequences[o]}FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var s=this.font.tables.gsub.scripts,a=0;a<s.length;a++){var o=s[a];if(o.tag==="DFLT")return o.script.defaultLangSys.featureIndexes}return[]};FeatureQuery.prototype.getScriptFeaturesIndexes=function(s){var a=this.font.tables;if(!a.gsub)return[];if(!s)return this.getDefaultScriptFeaturesIndexes();for(var o=this.font.tables.gsub.scripts,c=0;c<o.length;c++){var d=o[c];if(d.tag===s&&d.script.defaultLangSys)return d.script.defaultLangSys.featureIndexes;var b=d.langSysRecords;if(b)for(var $=0;$<b.length;$++){var j=b[$];if(j.tag===s){var _e=j.langSys;return _e.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};FeatureQuery.prototype.mapTagsToFeatures=function(s,a){for(var o={},c=0;c<s.length;c++){var d=s[c].tag,b=s[c].feature;o[d]=b}this.features[a].tags=o};FeatureQuery.prototype.getScriptFeatures=function(s){var a=this.features[s];if(this.features.hasOwnProperty(s))return a;var o=this.getScriptFeaturesIndexes(s);if(!o)return null;var c=this.font.tables.gsub;return a=o.map(function(d){return c.features[d]}),this.features[s]=a,this.mapTagsToFeatures(a,s),a};FeatureQuery.prototype.getSubstitutionType=function(s,a){var o=s.lookupType.toString(),c=a.substFormat.toString();return o+c};FeatureQuery.prototype.getLookupMethod=function(s,a){var o=this,c=this.getSubstitutionType(s,a);switch(c){case"11":return function(d){return singleSubstitutionFormat1.apply(o,[d,a])};case"12":return function(d){return singleSubstitutionFormat2.apply(o,[d,a])};case"63":return function(d){return chainingSubstitutionFormat3.apply(o,[d,a])};case"41":return function(d){return ligatureSubstitutionFormat1.apply(o,[d,a])};case"21":return function(d){return decompositionSubstitutionFormat1.apply(o,[d,a])};default:throw new Error("lookupType: "+s.lookupType+" - substFormat: "+a.substFormat+" is not yet supported")}};FeatureQuery.prototype.lookupFeature=function(s){var a=s.contextParams,o=a.index,c=this.getFeature({tag:s.tag,script:s.script});if(!c)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+s.tag+"' for script '"+s.script+"'.");for(var d=this.getFeatureLookups(c),b=[].concat(a.context),$=0;$<d.length;$++)for(var j=d[$],_e=this.getLookupSubtables(j),et=0;et<_e.length;et++){var tt=_e[et],rt=this.getSubstitutionType(j,tt),nt=this.getLookupMethod(j,tt),it=void 0;switch(rt){case"11":it=nt(a.current),it&&b.splice(o,1,new SubstitutionAction({id:11,tag:s.tag,substitution:it}));break;case"12":it=nt(a.current),it&&b.splice(o,1,new SubstitutionAction({id:12,tag:s.tag,substitution:it}));break;case"63":it=nt(a),Array.isArray(it)&&it.length&&b.splice(o,1,new SubstitutionAction({id:63,tag:s.tag,substitution:it}));break;case"41":it=nt(a),it&&b.splice(o,1,new SubstitutionAction({id:41,tag:s.tag,substitution:it}));break;case"21":it=nt(a.current),it&&b.splice(o,1,new SubstitutionAction({id:21,tag:s.tag,substitution:it}));break}a=new ContextParams(b,o),!(Array.isArray(it)&&!it.length)&&(it=null)}return b.length?b:null};FeatureQuery.prototype.supports=function(s){if(!s.script)return!1;this.getScriptFeatures(s.script);var a=this.features.hasOwnProperty(s.script);if(!s.tag)return a;var o=this.features[s.script].some(function(c){return c.tag===s.tag});return a&&o};FeatureQuery.prototype.getLookupSubtables=function(s){return s.subtables||null};FeatureQuery.prototype.getLookupByIndex=function(s){var a=this.font.tables.gsub.lookups;return a[s]||null};FeatureQuery.prototype.getFeatureLookups=function(s){return s.lookupListIndexes.map(this.getLookupByIndex.bind(this))};FeatureQuery.prototype.getFeature=function(a){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(a.script)||this.getScriptFeatures(a.script);var o=this.features[a.script];return o?o.tags[a.tag]?this.features[a.script].tags[a.tag]:null:{FAIL:"No feature for script "+a.script}};function arabicWordStartCheck(s){var a=s.current,o=s.get(-1);return o===null&&isArabicChar(a)||!isArabicChar(o)&&isArabicChar(a)}function arabicWordEndCheck(s){var a=s.get(1);return a===null||!isArabicChar(a)}var arabicWordCheck={startCheck:arabicWordStartCheck,endCheck:arabicWordEndCheck};function arabicSentenceStartCheck(s){var a=s.current,o=s.get(-1);return(isArabicChar(a)||isTashkeelArabicChar(a))&&!isArabicChar(o)}function arabicSentenceEndCheck(s){var a=s.get(1);switch(!0){case a===null:return!0;case(!isArabicChar(a)&&!isTashkeelArabicChar(a)):var o=isWhiteSpace(a);if(!o)return!0;if(o){var c=!1;if(c=s.lookahead.some(function(d){return isArabicChar(d)||isTashkeelArabicChar(d)}),!c)return!0}break;default:return!1}}var arabicSentenceCheck={startCheck:arabicSentenceStartCheck,endCheck:arabicSentenceEndCheck};function singleSubstitutionFormat1$1(s,a,o){a[o].setState(s.tag,s.substitution)}function singleSubstitutionFormat2$1(s,a,o){a[o].setState(s.tag,s.substitution)}function chainingSubstitutionFormat3$1(s,a,o){s.substitution.forEach(function(c,d){var b=a[o+d];b.setState(s.tag,c)})}function ligatureSubstitutionFormat1$1(s,a,o){var c=a[o];c.setState(s.tag,s.substitution.ligGlyph);for(var d=s.substitution.components.length,b=0;b<d;b++)c=a[o+b+1],c.setState("deleted",!0)}var SUBSTITUTIONS={11:singleSubstitutionFormat1$1,12:singleSubstitutionFormat2$1,63:chainingSubstitutionFormat3$1,41:ligatureSubstitutionFormat1$1};function applySubstitution(s,a,o){s instanceof SubstitutionAction&&SUBSTITUTIONS[s.id]&&SUBSTITUTIONS[s.id](s,a,o)}function willConnectPrev(s){for(var a=[].concat(s.backtrack),o=a.length-1;o>=0;o--){var c=a[o],d=isIsolatedArabicChar(c),b=isTashkeelArabicChar(c);if(!d&&!b)return!0;if(d)return!1}return!1}function willConnectNext(s){if(isIsolatedArabicChar(s.current))return!1;for(var a=0;a<s.lookahead.length;a++){var o=s.lookahead[a],c=isTashkeelArabicChar(o);if(!c)return!0}return!1}function arabicPresentationForms(s){var a=this,o="arab",c=this.featuresTags[o],d=this.tokenizer.getRangeTokens(s);if(d.length!==1){var b=new ContextParams(d.map(function(j){return j.getState("glyphIndex")}),0),$=new ContextParams(d.map(function(j){return j.char}),0);d.forEach(function(j,_e){if(!isTashkeelArabicChar(j.char)){b.setCurrentIndex(_e),$.setCurrentIndex(_e);var et=0;willConnectPrev($)&&(et|=1),willConnectNext($)&&(et|=2);var tt;switch(et){case 1:tt="fina";break;case 2:tt="init";break;case 3:tt="medi";break}if(c.indexOf(tt)!==-1){var rt=a.query.lookupFeature({tag:tt,script:o,contextParams:b});if(rt instanceof Error)return console.info(rt.message);rt.forEach(function(nt,it){nt instanceof SubstitutionAction&&(applySubstitution(nt,d,it),b.context[it]=nt.substitution)})}}})}}function getContextParams(s,a){var o=s.map(function(c){return c.activeState.value});return new ContextParams(o,a||0)}function arabicRequiredLigatures(s){var a=this,o="arab",c=this.tokenizer.getRangeTokens(s),d=getContextParams(c);d.context.forEach(function(b,$){d.setCurrentIndex($);var j=a.query.lookupFeature({tag:"rlig",script:o,contextParams:d});j.length&&(j.forEach(function(_e){return applySubstitution(_e,c,$)}),d=getContextParams(c))})}function latinWordStartCheck(s){var a=s.current,o=s.get(-1);return o===null&&isLatinChar(a)||!isLatinChar(o)&&isLatinChar(a)}function latinWordEndCheck(s){var a=s.get(1);return a===null||!isLatinChar(a)}var latinWordCheck={startCheck:latinWordStartCheck,endCheck:latinWordEndCheck};function getContextParams$1(s,a){var o=s.map(function(c){return c.activeState.value});return new ContextParams(o,a||0)}function latinLigature(s){var a=this,o="latn",c=this.tokenizer.getRangeTokens(s),d=getContextParams$1(c);d.context.forEach(function(b,$){d.setCurrentIndex($);var j=a.query.lookupFeature({tag:"liga",script:o,contextParams:d});j.length&&(j.forEach(function(_e){return applySubstitution(_e,c,$)}),d=getContextParams$1(c))})}function Bidi(s){this.baseDir=s||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}Bidi.prototype.setText=function(s){this.text=s};Bidi.prototype.contextChecks={latinWordCheck,arabicWordCheck,arabicSentenceCheck};function registerContextChecker(s){var a=this.contextChecks[s+"Check"];return this.tokenizer.registerContextChecker(s,a.startCheck,a.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var s=this,a=this.tokenizer.getContextRanges("arabicSentence");a.forEach(function(o){var c=s.tokenizer.getRangeTokens(o);s.tokenizer.replaceRange(o.startIndex,o.endOffset,c.reverse())})}Bidi.prototype.registerFeatures=function(s,a){var o=this,c=a.filter(function(d){return o.query.supports({script:s,tag:d})});this.featuresTags.hasOwnProperty(s)?this.featuresTags[s]=this.featuresTags[s].concat(c):this.featuresTags[s]=c};Bidi.prototype.applyFeatures=function(s,a){if(!s)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(s));for(var o=0;o<a.length;o++){var c=a[o];this.query.supports({script:c.script})&&this.registerFeatures(c.script,c.tags)}};Bidi.prototype.registerModifier=function(s,a,o){this.tokenizer.registerModifier(s,a,o)};function checkGlyphIndexStatus(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var s=this,a="arab";if(this.featuresTags.hasOwnProperty(a)){checkGlyphIndexStatus.call(this);var o=this.tokenizer.getContextRanges("arabicWord");o.forEach(function(c){arabicPresentationForms.call(s,c)})}}function applyArabicRequireLigatures(){var s=this,a="arab";if(this.featuresTags.hasOwnProperty(a)){var o=this.featuresTags[a];if(o.indexOf("rlig")!==-1){checkGlyphIndexStatus.call(this);var c=this.tokenizer.getContextRanges("arabicWord");c.forEach(function(d){arabicRequiredLigatures.call(s,d)})}}}function applyLatinLigatures(){var s=this,a="latn";if(this.featuresTags.hasOwnProperty(a)){var o=this.featuresTags[a];if(o.indexOf("liga")!==-1){checkGlyphIndexStatus.call(this);var c=this.tokenizer.getContextRanges("latinWord");c.forEach(function(d){latinLigature.call(s,d)})}}}Bidi.prototype.checkContextReady=function(s){return!!this.tokenizer.getContext(s)};Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)};Bidi.prototype.processText=function(s){(!this.text||this.text!==s)&&(this.setText(s),tokenizeText.call(this),this.applyFeaturesToContexts())};Bidi.prototype.getBidiText=function(s){return this.processText(s),this.tokenizer.getText()};Bidi.prototype.getTextGlyphs=function(s){this.processText(s);for(var a=[],o=0;o<this.tokenizer.tokens.length;o++){var c=this.tokenizer.tokens[o];if(!c.state.deleted){var d=c.activeState.value;a.push(Array.isArray(d)?d[0]:d)}}return a};function Font$1(s){s=s||{},s.tables=s.tables||{},s.empty||(checkArgument(s.familyName,"When creating a new Font object, familyName is required."),checkArgument(s.styleName,"When creating a new Font object, styleName is required."),checkArgument(s.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(s.ascender,"When creating a new Font object, ascender is required."),checkArgument(s.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:s.familyName||" "},fontSubfamily:{en:s.styleName||" "},fullName:{en:s.fullName||s.familyName+" "+s.styleName},postScriptName:{en:s.postScriptName||(s.familyName+s.styleName).replace(/\s/g,"")},designer:{en:s.designer||" "},designerURL:{en:s.designerURL||" "},manufacturer:{en:s.manufacturer||" "},manufacturerURL:{en:s.manufacturerURL||" "},license:{en:s.license||" "},licenseURL:{en:s.licenseURL||" "},version:{en:s.version||"Version 0.1"},description:{en:s.description||" "},copyright:{en:s.copyright||" "},trademark:{en:s.trademark||" "}},this.unitsPerEm=s.unitsPerEm||1e3,this.ascender=s.ascender,this.descender=s.descender,this.createdTimestamp=s.createdTimestamp,this.tables=Object.assign(s.tables,{os2:Object.assign({usWeightClass:s.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:s.widthClass||this.usWidthClasses.MEDIUM,fsSelection:s.fsSelection||this.fsSelectionValues.REGULAR},s.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,s.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Hinting(this)}})}Font$1.prototype.hasChar=function(s){return this.encoding.charToGlyphIndex(s)!==null};Font$1.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)};Font$1.prototype.charToGlyph=function(s){var a=this.charToGlyphIndex(s),o=this.glyphs.get(a);return o||(o=this.glyphs.get(0)),o};Font$1.prototype.updateFeatures=function(s){return this.defaultRenderOptions.features.map(function(a){return a.script==="latn"?{script:"latn",tags:a.tags.filter(function(o){return s[o]})}:a})};Font$1.prototype.stringToGlyphs=function(s,a){var o=this,c=new Bidi,d=function(rt){return o.charToGlyphIndex(rt.char)};c.registerModifier("glyphIndex",null,d);var b=a?this.updateFeatures(a.features):this.defaultRenderOptions.features;c.applyFeatures(this,b);for(var $=c.getTextGlyphs(s),j=$.length,_e=new Array(j),et=this.glyphs.get(0),tt=0;tt<j;tt+=1)_e[tt]=this.glyphs.get($[tt])||et;return _e};Font$1.prototype.nameToGlyphIndex=function(s){return this.glyphNames.nameToGlyphIndex(s)};Font$1.prototype.nameToGlyph=function(s){var a=this.nameToGlyphIndex(s),o=this.glyphs.get(a);return o||(o=this.glyphs.get(0)),o};Font$1.prototype.glyphIndexToName=function(s){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(s):""};Font$1.prototype.getKerningValue=function(s,a){s=s.index||s,a=a.index||a;var o=this.position.defaultKerningTables;return o?this.position.getKerningValue(o,s,a):this.kerningPairs[s+","+a]||0};Font$1.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Font$1.prototype.forEachGlyph=function(s,a,o,c,d,b){a=a!==void 0?a:0,o=o!==void 0?o:0,c=c!==void 0?c:72,d=Object.assign({},this.defaultRenderOptions,d);var $=1/this.unitsPerEm*c,j=this.stringToGlyphs(s,d),_e;if(d.kerning){var et=d.script||this.position.getDefaultScriptName();_e=this.position.getKerningTables(et,d.language)}for(var tt=0;tt<j.length;tt+=1){var rt=j[tt];if(b.call(this,rt,a,o,c,d),rt.advanceWidth&&(a+=rt.advanceWidth*$),d.kerning&&tt<j.length-1){var nt=_e?this.position.getKerningValue(_e,rt.index,j[tt+1].index):this.getKerningValue(rt,j[tt+1]);a+=nt*$}d.letterSpacing?a+=d.letterSpacing*c:d.tracking&&(a+=d.tracking/1e3*c)}return a};Font$1.prototype.getPath=function(s,a,o,c,d){var b=new Path;return this.forEachGlyph(s,a,o,c,d,function($,j,_e,et){var tt=$.getPath(j,_e,et,d,this);b.extend(tt)}),b};Font$1.prototype.getPaths=function(s,a,o,c,d){var b=[];return this.forEachGlyph(s,a,o,c,d,function($,j,_e,et){var tt=$.getPath(j,_e,et,d,this);b.push(tt)}),b};Font$1.prototype.getAdvanceWidth=function(s,a,o){return this.forEachGlyph(s,0,0,a,o,function(){})};Font$1.prototype.draw=function(s,a,o,c,d,b){this.getPath(a,o,c,d,b).draw(s)};Font$1.prototype.drawPoints=function(s,a,o,c,d,b){this.forEachGlyph(a,o,c,d,b,function($,j,_e,et){$.drawPoints(s,j,_e,et)})};Font$1.prototype.drawMetrics=function(s,a,o,c,d,b){this.forEachGlyph(a,o,c,d,b,function($,j,_e,et){$.drawMetrics(s,j,_e,et)})};Font$1.prototype.getEnglishName=function(s){var a=this.names[s];if(a)return a.en};Font$1.prototype.validate=function(){var s=this;function a(c,d){}function o(c){var d=s.getEnglishName(c);d&&d.trim().length>0}o("fontFamily"),o("weightName"),o("manufacturer"),o("copyright"),o("version"),this.unitsPerEm>0};Font$1.prototype.toTables=function(){return sfnt.fontToTable(this)};Font$1.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Font$1.prototype.toArrayBuffer=function(){for(var s=this.toTables(),a=s.encode(),o=new ArrayBuffer(a.length),c=new Uint8Array(o),d=0;d<a.length;d++)c[d]=a[d];return o};Font$1.prototype.download=function(s){var a=this.getEnglishName("fontFamily"),o=this.getEnglishName("fontSubfamily");s=s||a.replace(/\s/g,"")+"-"+o+".otf";var c=this.toArrayBuffer();if(isBrowser$2())if(window.URL=window.URL||window.webkitURL,window.URL){var d=new DataView(c),b=new Blob([d],{type:"font/opentype"}),$=document.createElement("a");$.href=window.URL.createObjectURL(b),$.download=s;var j=document.createEvent("MouseEvents");j.initEvent("click",!0,!1),$.dispatchEvent(j)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var _e=require("fs"),et=arrayBufferToNodeBuffer(c);_e.writeFileSync(s,et)}};Font$1.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font$1.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font$1.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var subtableParsers$1=new Array(10);subtableParsers$1[1]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();if(o===1)return{posFormat:1,coverage:this.parsePointer(Parser$1.coverage),value:this.parseValueRecord()};if(o===2)return{posFormat:2,coverage:this.parsePointer(Parser$1.coverage),values:this.parseValueRecordList()};check.assert(!1,"0x"+a.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};subtableParsers$1[2]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();check.assert(o===1||o===2,"0x"+a.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var c=this.parsePointer(Parser$1.coverage),d=this.parseUShort(),b=this.parseUShort();if(o===1)return{posFormat:o,coverage:c,valueFormat1:d,valueFormat2:b,pairSets:this.parseList(Parser$1.pointer(Parser$1.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(d),value2:this.parseValueRecord(b)}})))};if(o===2){var $=this.parsePointer(Parser$1.classDef),j=this.parsePointer(Parser$1.classDef),_e=this.parseUShort(),et=this.parseUShort();return{posFormat:o,coverage:c,valueFormat1:d,valueFormat2:b,classDef1:$,classDef2:j,class1Count:_e,class2Count:et,classRecords:this.parseList(_e,Parser$1.list(et,function(){return{value1:this.parseValueRecord(d),value2:this.parseValueRecord(b)}}))}}};subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}};subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}};subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}};subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}};subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}};subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}};subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var __defProp=Object.defineProperty,__defNormalProp=(s,a,o)=>a in s?__defProp(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,__publicField=(s,a,o)=>(__defNormalProp(s,typeof a!="symbol"?a+"":a,o),o);function toTrianglesDrawMode(s,a){if(a===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(a===TriangleFanDrawMode||a===TriangleStripDrawMode){let o=s.getIndex();if(o===null){const $=[],j=s.getAttribute("position");if(j!==void 0){for(let _e=0;_e<j.count;_e++)$.push(_e);s.setIndex($),o=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const c=o.count-2,d=[];if(o)if(a===TriangleFanDrawMode)for(let $=1;$<=c;$++)d.push(o.getX(0)),d.push(o.getX($)),d.push(o.getX($+1));else for(let $=0;$<c;$++)$%2===0?(d.push(o.getX($)),d.push(o.getX($+1)),d.push(o.getX($+2))):(d.push(o.getX($+2)),d.push(o.getX($+1)),d.push(o.getX($)));d.length/3!==c&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const b=s.clone();return b.setIndex(d),b.clearGroups(),b}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",a),s}new Color;const _DRACOExporter=class{parse(s,a={decodeSpeed:5,encodeSpeed:5,encoderMethod:_DRACOExporter.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:!1}){if(s instanceof BufferGeometry&&s.isBufferGeometry)throw new Error("DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.");if(DracoEncoderModule===void 0)throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");const o=s.geometry,c=DracoEncoderModule(),d=new c.Encoder;let b,$;if(!o.isBufferGeometry)throw new Error("THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.");if(s instanceof Mesh&&s.isMesh){b=new c.MeshBuilder,$=new c.Mesh;const nt=o.getAttribute("position");b.AddFloatAttributeToMesh($,c.POSITION,nt.count,nt.itemSize,nt.array);const it=o.getIndex();if(it!==null)b.AddFacesToMesh($,it.count/3,it.array);else{const at=new(nt.count>65535?Uint32Array:Uint16Array)(nt.count);for(let ct=0;ct<at.length;ct++)at[ct]=ct;b.AddFacesToMesh($,nt.count,at)}if(a.exportNormals){const at=o.getAttribute("normal");at!==void 0&&b.AddFloatAttributeToMesh($,c.NORMAL,at.count,at.itemSize,at.array)}if(a.exportUvs){const at=o.getAttribute("uv");at!==void 0&&b.AddFloatAttributeToMesh($,c.TEX_COORD,at.count,at.itemSize,at.array)}if(a.exportColor){const at=o.getAttribute("color");at!==void 0&&b.AddFloatAttributeToMesh($,c.COLOR,at.count,at.itemSize,at.array)}}else if(s instanceof Points&&s.isPoints){b=new c.PointCloudBuilder,$=new c.PointCloud;const nt=o.getAttribute("position");if(b.AddFloatAttribute($,c.POSITION,nt.count,nt.itemSize,nt.array),a.exportColor){const it=o.getAttribute("color");it!==void 0&&b.AddFloatAttribute($,c.COLOR,it.count,it.itemSize,it.array)}}else throw new Error("DRACOExporter: Unsupported object type.");const j=new c.DracoInt8Array,_e=a.encodeSpeed!==void 0?a.encodeSpeed:5,et=a.decodeSpeed!==void 0?a.decodeSpeed:5;if(d.SetSpeedOptions(_e,et),a.encoderMethod!==void 0&&d.SetEncodingMethod(a.encoderMethod),a.quantization!==void 0)for(let nt=0;nt<5;nt++)a.quantization[nt]!==void 0&&d.SetAttributeQuantization(nt,a.quantization[nt]);let tt;if(s instanceof Mesh&&s.isMesh?tt=d.EncodeMeshToDracoBuffer($,j):tt=d.EncodePointCloudToDracoBuffer($,!0,j),c.destroy($),tt===0)throw new Error("THREE.DRACOExporter: Draco encoding failed.");const rt=new Int8Array(new ArrayBuffer(tt));for(let nt=0;nt<tt;nt++)rt[nt]=j.GetValue(nt);return c.destroy(j),c.destroy(d),c.destroy(b),rt}};let DRACOExporter=_DRACOExporter;__publicField(DRACOExporter,"MESH_EDGEBREAKER_ENCODING",1);__publicField(DRACOExporter,"MESH_SEQUENTIAL_ENCODING",0);__publicField(DRACOExporter,"POINT_CLOUD",0);__publicField(DRACOExporter,"TRIANGULAR_MESH",1);__publicField(DRACOExporter,"INVALID",-1);__publicField(DRACOExporter,"POSITION",0);__publicField(DRACOExporter,"NORMAL",1);__publicField(DRACOExporter,"COLOR",2);__publicField(DRACOExporter,"TEX_COORD",3);__publicField(DRACOExporter,"GENERIC",4);const _Reflector=class extends Mesh{constructor(s,a={}){super(s),this.isReflector=!0,this.type="Reflector",this.camera=new PerspectiveCamera;const o=this,c=a.color!==void 0?new Color(a.color):new Color(8355711),d=a.textureWidth||512,b=a.textureHeight||512,$=a.clipBias||0,j=a.shader||_Reflector.ReflectorShader,_e=a.multisample!==void 0?a.multisample:4,et=new Plane,tt=new Vector3,rt=new Vector3,nt=new Vector3,it=new Matrix4,at=new Vector3(0,0,-1),ct=new Vector4,st=new Vector3,ot=new Vector3,ht=new Vector4,dt=new Matrix4,ft=this.camera,mt=new WebGLRenderTarget(d,b,{samples:_e,type:HalfFloatType}),gt=new ShaderMaterial({uniforms:UniformsUtils.clone(j.uniforms),fragmentShader:j.fragmentShader,vertexShader:j.vertexShader});gt.uniforms.tDiffuse.value=mt.texture,gt.uniforms.color.value=c,gt.uniforms.textureMatrix.value=dt,this.material=gt,this.onBeforeRender=function(vt,yt,Et){if(rt.setFromMatrixPosition(o.matrixWorld),nt.setFromMatrixPosition(Et.matrixWorld),it.extractRotation(o.matrixWorld),tt.set(0,0,1),tt.applyMatrix4(it),st.subVectors(rt,nt),st.dot(tt)>0)return;st.reflect(tt).negate(),st.add(rt),it.extractRotation(Et.matrixWorld),at.set(0,0,-1),at.applyMatrix4(it),at.add(nt),ot.subVectors(rt,at),ot.reflect(tt).negate(),ot.add(rt),ft.position.copy(st),ft.up.set(0,1,0),ft.up.applyMatrix4(it),ft.up.reflect(tt),ft.lookAt(ot),ft.far=Et.far,ft.updateMatrixWorld(),ft.projectionMatrix.copy(Et.projectionMatrix),dt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),dt.multiply(ft.projectionMatrix),dt.multiply(ft.matrixWorldInverse),dt.multiply(o.matrixWorld),et.setFromNormalAndCoplanarPoint(tt,rt),et.applyMatrix4(ft.matrixWorldInverse),ct.set(et.normal.x,et.normal.y,et.normal.z,et.constant);const St=ft.projectionMatrix;ht.x=(Math.sign(ct.x)+St.elements[8])/St.elements[0],ht.y=(Math.sign(ct.y)+St.elements[9])/St.elements[5],ht.z=-1,ht.w=(1+St.elements[10])/St.elements[14],ct.multiplyScalar(2/ct.dot(ht)),St.elements[2]=ct.x,St.elements[6]=ct.y,St.elements[10]=ct.z+1-$,St.elements[14]=ct.w,o.visible=!1;const Ct=vt.getRenderTarget(),wt=vt.xr.enabled,_t=vt.shadowMap.autoUpdate,Tt=vt.toneMapping;let Mt=!1;"outputColorSpace"in vt?Mt=vt.outputColorSpace==="srgb":Mt=vt.outputEncoding===3001,vt.xr.enabled=!1,vt.shadowMap.autoUpdate=!1,"outputColorSpace"in vt?vt.outputColorSpace="linear-srgb":vt.outputEncoding=3e3,vt.toneMapping=NoToneMapping,vt.setRenderTarget(mt),vt.state.buffers.depth.setMask(!0),vt.autoClear===!1&&vt.clear(),vt.render(yt,ft),vt.xr.enabled=wt,vt.shadowMap.autoUpdate=_t,vt.toneMapping=Tt,"outputColorSpace"in vt?vt.outputColorSpace=Mt?"srgb":"srgb-linear":vt.outputEncoding=Mt?3001:3e3,vt.setRenderTarget(Ct);const Bt=Et.viewport;Bt!==void 0&&vt.state.viewport(Bt),o.visible=!0},this.getRenderTarget=function(){return mt},this.dispose=function(){mt.dispose(),o.material.dispose()}}};let Reflector=_Reflector;__publicField(Reflector,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const _Refractor=class extends Mesh{constructor(s,a={}){super(s),this.isRefractor=!0,this.type="Refractor",this.camera=new PerspectiveCamera;const o=this,c=a.color!==void 0?new Color(a.color):new Color(8355711),d=a.textureWidth||512,b=a.textureHeight||512,$=a.clipBias||0,j=a.shader||_Refractor.RefractorShader,_e=a.multisample!==void 0?a.multisample:4,et=this.camera;et.matrixAutoUpdate=!1,et.userData.refractor=!0;const tt=new Plane,rt=new Matrix4,nt=new WebGLRenderTarget(d,b,{samples:_e,type:HalfFloatType});this.material=new ShaderMaterial({uniforms:UniformsUtils.clone(j.uniforms),vertexShader:j.vertexShader,fragmentShader:j.fragmentShader,transparent:!0}),this.material.uniforms.color.value=c,this.material.uniforms.tDiffuse.value=nt.texture,this.material.uniforms.textureMatrix.value=rt;const it=function(){const ht=new Vector3,dt=new Vector3,ft=new Matrix4,mt=new Vector3,gt=new Vector3;return function(yt){return ht.setFromMatrixPosition(o.matrixWorld),dt.setFromMatrixPosition(yt.matrixWorld),mt.subVectors(ht,dt),ft.extractRotation(o.matrixWorld),gt.set(0,0,1),gt.applyMatrix4(ft),mt.dot(gt)<0}}(),at=function(){const ht=new Vector3,dt=new Vector3,ft=new Quaternion,mt=new Vector3;return function(){o.matrixWorld.decompose(dt,ft,mt),ht.set(0,0,1).applyQuaternion(ft).normalize(),ht.negate(),tt.setFromNormalAndCoplanarPoint(ht,dt)}}(),ct=function(){const ht=new Plane,dt=new Vector4,ft=new Vector4;return function(gt){et.matrixWorld.copy(gt.matrixWorld),et.matrixWorldInverse.copy(et.matrixWorld).invert(),et.projectionMatrix.copy(gt.projectionMatrix),et.far=gt.far,ht.copy(tt),ht.applyMatrix4(et.matrixWorldInverse),dt.set(ht.normal.x,ht.normal.y,ht.normal.z,ht.constant);const vt=et.projectionMatrix;ft.x=(Math.sign(dt.x)+vt.elements[8])/vt.elements[0],ft.y=(Math.sign(dt.y)+vt.elements[9])/vt.elements[5],ft.z=-1,ft.w=(1+vt.elements[10])/vt.elements[14],dt.multiplyScalar(2/dt.dot(ft)),vt.elements[2]=dt.x,vt.elements[6]=dt.y,vt.elements[10]=dt.z+1-$,vt.elements[14]=dt.w}}();function st(ht){rt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),rt.multiply(ht.projectionMatrix),rt.multiply(ht.matrixWorldInverse),rt.multiply(o.matrixWorld)}function ot(ht,dt,ft){o.visible=!1;const mt=ht.getRenderTarget(),gt=ht.xr.enabled,vt=ht.shadowMap.autoUpdate,yt=ht.toneMapping;let Et=!1;"outputColorSpace"in ht?Et=ht.outputColorSpace==="srgb":Et=ht.outputEncoding===3001,ht.xr.enabled=!1,ht.shadowMap.autoUpdate=!1,"outputColorSpace"in ht?ht.outputColorSpace="linear-srgb":ht.outputEncoding=3e3,ht.toneMapping=NoToneMapping,ht.setRenderTarget(nt),ht.autoClear===!1&&ht.clear(),ht.render(dt,et),ht.xr.enabled=gt,ht.shadowMap.autoUpdate=vt,ht.toneMapping=yt,ht.setRenderTarget(mt),"outputColorSpace"in ht?ht.outputColorSpace=Et?"srgb":"srgb-linear":ht.outputEncoding=Et?3001:3e3;const St=ft.viewport;St!==void 0&&ht.state.viewport(St),o.visible=!0}this.onBeforeRender=function(ht,dt,ft){ft.userData.refractor!==!0&&it(ft)&&(at(),st(ft),ct(ft),ot(ht,dt,ft))},this.getRenderTarget=function(){return nt},this.dispose=function(){nt.dispose(),o.material.dispose()}}};let Refractor=_Refractor;__publicField(Refractor,"RefractorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const geometry=new BufferGeometry,_Lensflare=class extends Mesh{constructor(){super(_Lensflare.Geometry,new MeshBasicMaterial({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const s=new Vector3,a=new Vector3,o=new DataTexture(new Uint8Array(16*16*3),16,16,RGBAFormat$1);o.minFilter=NearestFilter,o.magFilter=NearestFilter,o.wrapS=ClampToEdgeWrapping$1,o.wrapT=ClampToEdgeWrapping$1;const c=new DataTexture(new Uint8Array(16*16*3),16,16,RGBAFormat$1);c.minFilter=NearestFilter,c.magFilter=NearestFilter,c.wrapS=ClampToEdgeWrapping$1,c.wrapT=ClampToEdgeWrapping$1;const d=_Lensflare.Geometry,b=new RawShaderMaterial({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),$=new RawShaderMaterial({uniforms:{map:{value:o},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),j=new Mesh(d,b),_e=[],et=LensflareElement.Shader,tt=new RawShaderMaterial({uniforms:{map:{value:null},occlusionMap:{value:c},color:{value:new Color(16777215)},scale:{value:new Vector2$1},screenPosition:{value:new Vector3}},vertexShader:et.vertexShader,fragmentShader:et.fragmentShader,blending:AdditiveBlending,transparent:!0,depthWrite:!1}),rt=new Mesh(d,tt);this.addElement=function(st){_e.push(st)};const nt=new Vector2$1,it=new Vector2$1,at=new Box2,ct=new Vector4;this.onBeforeRender=function(st,ot,ht){st.getCurrentViewport(ct);const dt=ct.w/ct.z,ft=ct.z/2,mt=ct.w/2;let gt=16/ct.w;if(nt.set(gt*dt,gt),at.min.set(ct.x,ct.y),at.max.set(ct.x+(ct.z-16),ct.y+(ct.w-16)),a.setFromMatrixPosition(this.matrixWorld),a.applyMatrix4(ht.matrixWorldInverse),!(a.z>0)&&(s.copy(a).applyMatrix4(ht.projectionMatrix),it.x=ct.x+s.x*ft+ft-8,it.y=ct.y+s.y*mt+mt-8,at.containsPoint(it))){st.copyFramebufferToTexture(it,o);let vt=b.uniforms;vt.scale.value=nt,vt.screenPosition.value=s,st.renderBufferDirect(ht,null,d,b,j,null),st.copyFramebufferToTexture(it,c),vt=$.uniforms,vt.scale.value=nt,vt.screenPosition.value=s,st.renderBufferDirect(ht,null,d,$,j,null);const yt=-s.x*2,Et=-s.y*2;for(let St=0,Ct=_e.length;St<Ct;St++){const wt=_e[St],_t=tt.uniforms;_t.color.value.copy(wt.color),_t.map.value=wt.texture,_t.screenPosition.value.x=s.x+yt*wt.distance,_t.screenPosition.value.y=s.y+Et*wt.distance,gt=wt.size/ct.w;const Tt=ct.w/ct.z;_t.scale.value.set(gt*Tt,gt),tt.uniformsNeedUpdate=!0,st.renderBufferDirect(ht,null,d,tt,rt,null)}}},this.dispose=function(){b.dispose(),$.dispose(),tt.dispose(),o.dispose(),c.dispose();for(let st=0,ot=_e.length;st<ot;st++)_e[st].texture.dispose()}}};let Lensflare=_Lensflare;__publicField(Lensflare,"Geometry",geometry);class LensflareElement{constructor(a,o=1,c=0,d=new Color(16777215)){this.texture=a,this.size=o,this.distance=c,this.color=d}}__publicField(LensflareElement,"Shader",{uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`});class SimplexNoise{constructor(a=Math){__publicField(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),__publicField(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),__publicField(this,"p",[]),__publicField(this,"perm",[]),__publicField(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),__publicField(this,"dot",(o,c,d)=>o[0]*c+o[1]*d),__publicField(this,"dot3",(o,c,d,b)=>o[0]*c+o[1]*d+o[2]*b),__publicField(this,"dot4",(o,c,d,b,$)=>o[0]*c+o[1]*d+o[2]*b+o[3]*$),__publicField(this,"noise",(o,c)=>{let d,b,$;const j=.5*(Math.sqrt(3)-1),_e=(o+c)*j,et=Math.floor(o+_e),tt=Math.floor(c+_e),rt=(3-Math.sqrt(3))/6,nt=(et+tt)*rt,it=et-nt,at=tt-nt,ct=o-it,st=c-at;let ot=0,ht=1;ct>st&&(ot=1,ht=0);const dt=ct-ot+rt,ft=st-ht+rt,mt=ct-1+2*rt,gt=st-1+2*rt,vt=et&255,yt=tt&255,Et=this.perm[vt+this.perm[yt]]%12,St=this.perm[vt+ot+this.perm[yt+ht]]%12,Ct=this.perm[vt+1+this.perm[yt+1]]%12;let wt=.5-ct*ct-st*st;wt<0?d=0:(wt*=wt,d=wt*wt*this.dot(this.grad3[Et],ct,st));let _t=.5-dt*dt-ft*ft;_t<0?b=0:(_t*=_t,b=_t*_t*this.dot(this.grad3[St],dt,ft));let Tt=.5-mt*mt-gt*gt;return Tt<0?$=0:(Tt*=Tt,$=Tt*Tt*this.dot(this.grad3[Ct],mt,gt)),70*(d+b+$)}),__publicField(this,"noise3d",(o,c,d)=>{let b,$,j,_e;const et=.3333333333333333,tt=(o+c+d)*et,rt=Math.floor(o+tt),nt=Math.floor(c+tt),it=Math.floor(d+tt),at=1/6,ct=(rt+nt+it)*at,st=rt-ct,ot=nt-ct,ht=it-ct,dt=o-st,ft=c-ot,mt=d-ht;let gt,vt,yt,Et,St,Ct;dt>=ft?ft>=mt?(gt=1,vt=0,yt=0,Et=1,St=1,Ct=0):dt>=mt?(gt=1,vt=0,yt=0,Et=1,St=0,Ct=1):(gt=0,vt=0,yt=1,Et=1,St=0,Ct=1):ft<mt?(gt=0,vt=0,yt=1,Et=0,St=1,Ct=1):dt<mt?(gt=0,vt=1,yt=0,Et=0,St=1,Ct=1):(gt=0,vt=1,yt=0,Et=1,St=1,Ct=0);const wt=dt-gt+at,_t=ft-vt+at,Tt=mt-yt+at,Mt=dt-Et+2*at,Bt=ft-St+2*at,Rt=mt-Ct+2*at,bt=dt-1+3*at,Pt=ft-1+3*at,Dt=mt-1+3*at,$t=rt&255,Lt=nt&255,Jt=it&255,Qt=this.perm[$t+this.perm[Lt+this.perm[Jt]]]%12,or=this.perm[$t+gt+this.perm[Lt+vt+this.perm[Jt+yt]]]%12,er=this.perm[$t+Et+this.perm[Lt+St+this.perm[Jt+Ct]]]%12,sr=this.perm[$t+1+this.perm[Lt+1+this.perm[Jt+1]]]%12;let Ar=.6-dt*dt-ft*ft-mt*mt;Ar<0?b=0:(Ar*=Ar,b=Ar*Ar*this.dot3(this.grad3[Qt],dt,ft,mt));let Er=.6-wt*wt-_t*_t-Tt*Tt;Er<0?$=0:(Er*=Er,$=Er*Er*this.dot3(this.grad3[or],wt,_t,Tt));let Tr=.6-Mt*Mt-Bt*Bt-Rt*Rt;Tr<0?j=0:(Tr*=Tr,j=Tr*Tr*this.dot3(this.grad3[er],Mt,Bt,Rt));let ur=.6-bt*bt-Pt*Pt-Dt*Dt;return ur<0?_e=0:(ur*=ur,_e=ur*ur*this.dot3(this.grad3[sr],bt,Pt,Dt)),32*(b+$+j+_e)}),__publicField(this,"noise4d",(o,c,d,b)=>{const $=this.grad4,j=this.simplex,_e=this.perm,et=(Math.sqrt(5)-1)/4,tt=(5-Math.sqrt(5))/20;let rt,nt,it,at,ct;const st=(o+c+d+b)*et,ot=Math.floor(o+st),ht=Math.floor(c+st),dt=Math.floor(d+st),ft=Math.floor(b+st),mt=(ot+ht+dt+ft)*tt,gt=ot-mt,vt=ht-mt,yt=dt-mt,Et=ft-mt,St=o-gt,Ct=c-vt,wt=d-yt,_t=b-Et,Tt=St>Ct?32:0,Mt=St>wt?16:0,Bt=Ct>wt?8:0,Rt=St>_t?4:0,bt=Ct>_t?2:0,Pt=wt>_t?1:0,Dt=Tt+Mt+Bt+Rt+bt+Pt;let $t,Lt,Jt,Qt,or,er,sr,Ar,Er,Tr,ur,kt;$t=j[Dt][0]>=3?1:0,Lt=j[Dt][1]>=3?1:0,Jt=j[Dt][2]>=3?1:0,Qt=j[Dt][3]>=3?1:0,or=j[Dt][0]>=2?1:0,er=j[Dt][1]>=2?1:0,sr=j[Dt][2]>=2?1:0,Ar=j[Dt][3]>=2?1:0,Er=j[Dt][0]>=1?1:0,Tr=j[Dt][1]>=1?1:0,ur=j[Dt][2]>=1?1:0,kt=j[Dt][3]>=1?1:0;const Xt=St-$t+tt,ar=Ct-Lt+tt,yr=wt-Jt+tt,mr=_t-Qt+tt,Br=St-or+2*tt,_r=Ct-er+2*tt,br=wt-sr+2*tt,Pr=_t-Ar+2*tt,Or=St-Er+3*tt,Wr=Ct-Tr+3*tt,Ot=wt-ur+3*tt,Ft=_t-kt+3*tt,ir=St-1+4*tt,Sr=Ct-1+4*tt,xr=wt-1+4*tt,Ir=_t-1+4*tt,Fr=ot&255,Mr=ht&255,cr=dt&255,zt=ft&255,hr=_e[Fr+_e[Mr+_e[cr+_e[zt]]]]%32,Vt=_e[Fr+$t+_e[Mr+Lt+_e[cr+Jt+_e[zt+Qt]]]]%32,Ht=_e[Fr+or+_e[Mr+er+_e[cr+sr+_e[zt+Ar]]]]%32,Kt=_e[Fr+Er+_e[Mr+Tr+_e[cr+ur+_e[zt+kt]]]]%32,vr=_e[Fr+1+_e[Mr+1+_e[cr+1+_e[zt+1]]]]%32;let wr=.6-St*St-Ct*Ct-wt*wt-_t*_t;wr<0?rt=0:(wr*=wr,rt=wr*wr*this.dot4($[hr],St,Ct,wt,_t));let Gt=.6-Xt*Xt-ar*ar-yr*yr-mr*mr;Gt<0?nt=0:(Gt*=Gt,nt=Gt*Gt*this.dot4($[Vt],Xt,ar,yr,mr));let pr=.6-Br*Br-_r*_r-br*br-Pr*Pr;pr<0?it=0:(pr*=pr,it=pr*pr*this.dot4($[Ht],Br,_r,br,Pr));let Wt=.6-Or*Or-Wr*Wr-Ot*Ot-Ft*Ft;Wt<0?at=0:(Wt*=Wt,at=Wt*Wt*this.dot4($[Kt],Or,Wr,Ot,Ft));let nr=.6-ir*ir-Sr*Sr-xr*xr-Ir*Ir;return nr<0?ct=0:(nr*=nr,ct=nr*nr*this.dot4($[vr],ir,Sr,xr,Ir)),27*(rt+nt+it+at+ct)});for(let o=0;o<256;o++)this.p[o]=Math.floor(a.random()*256);for(let o=0;o<512;o++)this.perm[o]=this.p[o&255]}}const _LightningStrike=class extends BufferGeometry{constructor(s={}){super(),this.isLightningStrike=!0,this.type="LightningStrike",this.init(_LightningStrike.copyParameters(s,s)),this.createMesh()}static createRandomGenerator(){const a=[];for(let c=0;c<2053;c++)a.push(Math.random());const o={currentSeed:0,random:function(){const c=a[o.currentSeed];return o.currentSeed=(o.currentSeed+1)%2053,c},getSeed:function(){return o.currentSeed/2053},setSeed:function(c){o.currentSeed=Math.floor(c*2053)%2053}};return o}static copyParameters(s={},a={}){const o=function(c){return a===s?c:c.clone()};return s.sourceOffset=a.sourceOffset!==void 0?o(a.sourceOffset):new Vector3(0,100,0),s.destOffset=a.destOffset!==void 0?o(a.destOffset):new Vector3(0,0,0),s.timeScale=a.timeScale!==void 0?a.timeScale:1,s.roughness=a.roughness!==void 0?a.roughness:.9,s.straightness=a.straightness!==void 0?a.straightness:.7,s.up0=a.up0!==void 0?o(a.up0):new Vector3(0,0,1),s.up1=a.up1!==void 0?o(a.up1):new Vector3(0,0,1),s.radius0=a.radius0!==void 0?a.radius0:1,s.radius1=a.radius1!==void 0?a.radius1:1,s.radius0Factor=a.radius0Factor!==void 0?a.radius0Factor:.5,s.radius1Factor=a.radius1Factor!==void 0?a.radius1Factor:.2,s.minRadius=a.minRadius!==void 0?a.minRadius:.2,s.isEternal=a.isEternal!==void 0?a.isEternal:a.birthTime===void 0||a.deathTime===void 0,s.birthTime=a.birthTime,s.deathTime=a.deathTime,s.propagationTimeFactor=a.propagationTimeFactor!==void 0?a.propagationTimeFactor:.1,s.vanishingTimeFactor=a.vanishingTimeFactor!==void 0?a.vanishingTimeFactor:.9,s.subrayPeriod=a.subrayPeriod!==void 0?a.subrayPeriod:4,s.subrayDutyCycle=a.subrayDutyCycle!==void 0?a.subrayDutyCycle:.6,s.maxIterations=a.maxIterations!==void 0?a.maxIterations:9,s.isStatic=a.isStatic!==void 0?a.isStatic:!1,s.ramification=a.ramification!==void 0?a.ramification:5,s.maxSubrayRecursion=a.maxSubrayRecursion!==void 0?a.maxSubrayRecursion:3,s.recursionProbability=a.recursionProbability!==void 0?a.recursionProbability:.6,s.generateUVs=a.generateUVs!==void 0?a.generateUVs:!1,s.randomGenerator=a.randomGenerator,s.noiseSeed=a.noiseSeed,s.onDecideSubrayCreation=a.onDecideSubrayCreation,s.onSubrayCreation=a.onSubrayCreation,s}update(s){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=s&&s<=this.rayParameters.deathTime?(this.updateMesh(s),s<this.subrays[0].endPropagationTime?this.state=_LightningStrike.RAY_PROPAGATING:s>this.subrays[0].beginVanishingTime?this.state=_LightningStrike.RAY_VANISHING:this.state=_LightningStrike.RAY_STEADY,this.visible=!0):(this.visible=!1,s<this.rayParameters.birthTime?this.state=_LightningStrike.RAY_UNBORN:this.state=_LightningStrike.RAY_EXTINGUISHED))}init(s){this.rayParameters=s,this.maxIterations=s.maxIterations!==void 0?Math.floor(s.maxIterations):9,s.maxIterations=this.maxIterations,this.isStatic=s.isStatic!==void 0?s.isStatic:!1,s.isStatic=this.isStatic,this.ramification=s.ramification!==void 0?Math.floor(s.ramification):5,s.ramification=this.ramification,this.maxSubrayRecursion=s.maxSubrayRecursion!==void 0?Math.floor(s.maxSubrayRecursion):3,s.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=s.recursionProbability!==void 0?s.recursionProbability:.6,s.recursionProbability=this.recursionProbability,this.generateUVs=s.generateUVs!==void 0?s.generateUVs:!1,s.generateUVs=this.generateUVs,s.randomGenerator!==void 0?(this.randomGenerator=s.randomGenerator,this.seedGenerator=s.randomGenerator,s.noiseSeed!==void 0&&this.seedGenerator.setSeed(s.noiseSeed)):(this.randomGenerator=_LightningStrike.createRandomGenerator(),this.seedGenerator=Math),s.onDecideSubrayCreation!==void 0?this.onDecideSubrayCreation=s.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),s.onSubrayCreation!==void 0&&(this.onSubrayCreation=s.onSubrayCreation)),this.state=_LightningStrike.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),s.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let a=0;a<this.maxSubrays;a++)this.subrays.push(this.createSubray());this.raySegments=[];for(let a=0;a<this.maxRaySegments;a++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=new SimplexNoise(this.seedGenerator),this.simplexY=new SimplexNoise(this.seedGenerator),this.simplexZ=new SimplexNoise(this.seedGenerator),this.forwards=new Vector3,this.forwardsFill=new Vector3,this.side=new Vector3,this.down=new Vector3,this.middlePos=new Vector3,this.middleLinPos=new Vector3,this.newPos=new Vector3,this.vPos=new Vector3,this.cross1=new Vector3}createMesh(){const s=1<<this.maxIterations,a=3*(s+1)*this.maxSubrays,o=18*s*this.maxSubrays;this.vertices=new Float32Array(a*3),this.indices=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(a*2)),this.fillMesh(0),this.setIndex(new Uint32BufferAttribute(this.indices,1)),this.positionAttribute=new Float32BufferAttribute(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new Float32BufferAttribute(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=DynamicDrawUsage,this.positionAttribute.usage=DynamicDrawUsage,this.generateUVs&&(this.uvsAttribute.usage=DynamicDrawUsage)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}updateMesh(s){this.fillMesh(s),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(s){const a=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(s,function(c){const d=a.currentSubray;s<d.birthTime||(this.rayParameters.isEternal&&a.currentSubray.recursion==0?(a.createPrism(c),a.onDecideSubrayCreation(c,a)):s<d.endPropagationTime?a.timeFraction>=c.fraction0*d.propagationTimeFactor&&(a.createPrism(c),a.onDecideSubrayCreation(c,a)):s<d.beginVanishingTime?(a.createPrism(c),a.onDecideSubrayCreation(c,a)):(a.timeFraction<=d.vanishingTimeFactor+c.fraction1*(1-d.vanishingTimeFactor)&&a.createPrism(c),a.onDecideSubrayCreation(c,a)))})}addNewSubray(){return this.subrays[this.numSubrays++]}initSubray(s,a){s.pos0.copy(a.sourceOffset),s.pos1.copy(a.destOffset),s.up0.copy(a.up0),s.up1.copy(a.up1),s.radius0=a.radius0,s.radius1=a.radius1,s.birthTime=a.birthTime,s.deathTime=a.deathTime,s.timeScale=a.timeScale,s.roughness=a.roughness,s.straightness=a.straightness,s.propagationTimeFactor=a.propagationTimeFactor,s.vanishingTimeFactor=a.vanishingTimeFactor,s.maxIterations=this.maxIterations,s.seed=a.noiseSeed!==void 0?a.noiseSeed:0,s.recursion=0}fractalRay(s,a){this.time=s,this.currentSegmentCallback=a,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let o=0;o<this.numSubrays;o++){const c=this.subrays[o];this.currentSubray=c,this.randomGenerator.setSeed(c.seed),c.endPropagationTime=MathUtils.lerp(c.birthTime,c.deathTime,c.propagationTimeFactor),c.beginVanishingTime=MathUtils.lerp(c.deathTime,c.birthTime,1-c.vanishingTimeFactor);const d=this.randomGenerator.random;c.linPos0.set(d(),d(),d()).multiplyScalar(1e3),c.linPos1.set(d(),d(),d()).multiplyScalar(1e3),this.timeFraction=(s-c.birthTime)/(c.deathTime-c.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const b=this.getNewSegment();b.iteration=0,b.pos0.copy(c.pos0),b.pos1.copy(c.pos1),b.linPos0.copy(c.linPos0),b.linPos1.copy(c.linPos1),b.up0.copy(c.up0),b.up1.copy(c.up1),b.radius0=c.radius0,b.radius1=c.radius1,b.fraction0=0,b.fraction1=1,b.positionVariationFactor=1-c.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,c.recursion)/(1<<c.maxIterations),this.fractalRayRecursive(b)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(s){if(s.iteration>=this.currentSubray.maxIterations){this.currentSegmentCallback(s);return}this.forwards.subVectors(s.pos1,s.pos0);let a=this.forwards.length();a<1e-6&&(this.forwards.set(0,0,.01),a=this.forwards.length());const o=(s.radius0+s.radius1)*.5,c=(s.fraction0+s.fraction1)*.5,d=this.time*this.currentSubray.timeScale*Math.pow(2,s.iteration);this.middlePos.lerpVectors(s.pos0,s.pos1,.5),this.middleLinPos.lerpVectors(s.linPos0,s.linPos1,.5);const b=this.middleLinPos;this.newPos.set(this.simplexX.noise4d(b.x,b.y,b.z,d),this.simplexY.noise4d(b.x,b.y,b.z,d),this.simplexZ.noise4d(b.x,b.y,b.z,d)),this.newPos.multiplyScalar(s.positionVariationFactor*a),this.newPos.add(this.middlePos);const $=this.getNewSegment();$.pos0.copy(s.pos0),$.pos1.copy(this.newPos),$.linPos0.copy(s.linPos0),$.linPos1.copy(this.middleLinPos),$.up0.copy(s.up0),$.up1.copy(s.up1),$.radius0=s.radius0,$.radius1=o,$.fraction0=s.fraction0,$.fraction1=c,$.positionVariationFactor=s.positionVariationFactor*this.currentSubray.roughness,$.iteration=s.iteration+1;const j=this.getNewSegment();j.pos0.copy(this.newPos),j.pos1.copy(s.pos1),j.linPos0.copy(this.middleLinPos),j.linPos1.copy(s.linPos1),this.cross1.crossVectors(s.up0,this.forwards.normalize()),j.up0.crossVectors(this.forwards,this.cross1).normalize(),j.up1.copy(s.up1),j.radius0=o,j.radius1=s.radius1,j.fraction0=c,j.fraction1=s.fraction1,j.positionVariationFactor=s.positionVariationFactor*this.currentSubray.roughness,j.iteration=s.iteration+1,this.fractalRayRecursive($),this.fractalRayRecursive(j)}createPrism(s){this.forwardsFill.subVectors(s.pos1,s.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(s.pos0,s.up0,this.forwardsFill,s.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(s.pos1,s.up0,this.forwardsFill,s.radius1,s.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(s,a,o,c){this.side.crossVectors(a,o).multiplyScalar(c*_LightningStrike.COS30DEG),this.down.copy(a).multiplyScalar(-c*_LightningStrike.SIN30DEG);const d=this.vPos,b=this.vertices;d.copy(s).sub(this.side).add(this.down),b[this.currentCoordinate++]=d.x,b[this.currentCoordinate++]=d.y,b[this.currentCoordinate++]=d.z,d.copy(s).add(this.side).add(this.down),b[this.currentCoordinate++]=d.x,b[this.currentCoordinate++]=d.y,b[this.currentCoordinate++]=d.z,d.copy(a).multiplyScalar(c).add(s),b[this.currentCoordinate++]=d.x,b[this.currentCoordinate++]=d.y,b[this.currentCoordinate++]=d.z,this.currentVertex+=3}createTriangleVerticesWithUVs(s,a,o,c,d){this.side.crossVectors(a,o).multiplyScalar(c*_LightningStrike.COS30DEG),this.down.copy(a).multiplyScalar(-c*_LightningStrike.SIN30DEG);const b=this.vPos,$=this.vertices,j=this.uvs;b.copy(s).sub(this.side).add(this.down),$[this.currentCoordinate++]=b.x,$[this.currentCoordinate++]=b.y,$[this.currentCoordinate++]=b.z,j[this.currentUVCoordinate++]=d,j[this.currentUVCoordinate++]=0,b.copy(s).add(this.side).add(this.down),$[this.currentCoordinate++]=b.x,$[this.currentCoordinate++]=b.y,$[this.currentCoordinate++]=b.z,j[this.currentUVCoordinate++]=d,j[this.currentUVCoordinate++]=.5,b.copy(a).multiplyScalar(c).add(s),$[this.currentCoordinate++]=b.x,$[this.currentCoordinate++]=b.y,$[this.currentCoordinate++]=b.z,j[this.currentUVCoordinate++]=d,j[this.currentUVCoordinate++]=1,this.currentVertex+=3}createPrismFaces(s){const a=this.indices;s=this.currentVertex-6,a[this.currentIndex++]=s+1,a[this.currentIndex++]=s+2,a[this.currentIndex++]=s+5,a[this.currentIndex++]=s+1,a[this.currentIndex++]=s+5,a[this.currentIndex++]=s+4,a[this.currentIndex++]=s+0,a[this.currentIndex++]=s+1,a[this.currentIndex++]=s+4,a[this.currentIndex++]=s+0,a[this.currentIndex++]=s+4,a[this.currentIndex++]=s+3,a[this.currentIndex++]=s+2,a[this.currentIndex++]=s+0,a[this.currentIndex++]=s+3,a[this.currentIndex++]=s+2,a[this.currentIndex++]=s+3,a[this.currentIndex++]=s+5}createDefaultSubrayCreationCallbacks(){const s=this.randomGenerator.random;this.onDecideSubrayCreation=function(b,$){const j=$.currentSubray,_e=$.rayParameters.subrayPeriod,et=$.rayParameters.subrayDutyCycle,tt=$.rayParameters.isEternal&&j.recursion==0?-s()*_e:MathUtils.lerp(j.birthTime,j.endPropagationTime,b.fraction0)-s()*_e,rt=$.time-tt,nt=Math.floor(rt/_e),it=s()*(nt+1),at=rt%_e<=et*_e;let ct=0;if(at&&(ct=$.subrayProbability),j.recursion<$.maxSubrayRecursion&&$.numSubrays<$.maxSubrays&&s()<ct){const st=$.addNewSubray(),ot=$.randomGenerator.getSeed();st.seed=it,$.randomGenerator.setSeed(it),st.recursion=j.recursion+1,st.maxIterations=Math.max(1,j.maxIterations-1),st.linPos0.set(s(),s(),s()).multiplyScalar(1e3),st.linPos1.set(s(),s(),s()).multiplyScalar(1e3),st.up0.copy(j.up0),st.up1.copy(j.up1),st.radius0=b.radius0*$.rayParameters.radius0Factor,st.radius1=Math.min($.rayParameters.minRadius,b.radius1*$.rayParameters.radius1Factor),st.birthTime=tt+nt*_e,st.deathTime=st.birthTime+_e*et,!$.rayParameters.isEternal&&j.recursion==0&&(st.birthTime=Math.max(st.birthTime,j.birthTime),st.deathTime=Math.min(st.deathTime,j.deathTime)),st.timeScale=j.timeScale*2,st.roughness=j.roughness,st.straightness=j.straightness,st.propagationTimeFactor=j.propagationTimeFactor,st.vanishingTimeFactor=j.vanishingTimeFactor,$.onSubrayCreation(b,j,st,$),$.randomGenerator.setSeed(ot)}};const a=new Vector3,o=new Vector3,c=new Vector3,d=new Vector3;this.onSubrayCreation=function(b,$,j,_e){_e.subrayCylinderPosition(b,$,j,.5,.6,.2)},this.subrayConePosition=function(b,$,j,_e,et,tt){j.pos0.copy(b.pos0),a.subVectors($.pos1,$.pos0),o.copy(a).normalize(),a.multiplyScalar(b.fraction0+(1-b.fraction0)*(s()*_e));const rt=a.length();c.crossVectors($.up0,o);const nt=2*Math.PI*s();c.multiplyScalar(Math.cos(nt)),d.copy($.up0).multiplyScalar(Math.sin(nt)),j.pos1.copy(c).add(d).multiplyScalar(rt*et*(tt+s()*(1-tt))).add(a).add($.pos0)},this.subrayCylinderPosition=function(b,$,j,_e,et,tt){j.pos0.copy(b.pos0),a.subVectors($.pos1,$.pos0),o.copy(a).normalize(),a.multiplyScalar(b.fraction0+(1-b.fraction0)*((2*s()-1)*_e));const rt=a.length();c.crossVectors($.up0,o);const nt=2*Math.PI*s();c.multiplyScalar(Math.cos(nt)),d.copy($.up0).multiplyScalar(Math.sin(nt)),j.pos1.copy(c).add(d).multiplyScalar(rt*et*(tt+s()*(1-tt))).add(a).add($.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new Vector3,pos1:new Vector3,linPos0:new Vector3,linPos1:new Vector3,up0:new Vector3,up1:new Vector3,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new Vector3,pos1:new Vector3,linPos0:new Vector3,linPos1:new Vector3,up0:new Vector3,up1:new Vector3,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this.raySegments[this.currentSegmentIndex++]}copy(s){return super.copy(s),this.init(_LightningStrike.copyParameters({},s.rayParameters)),this}clone(){return new this.constructor(_LightningStrike.copyParameters({},this.rayParameters))}};let LightningStrike=_LightningStrike;__publicField(LightningStrike,"RAY_INITIALIZED",0);__publicField(LightningStrike,"RAY_UNBORN",1);__publicField(LightningStrike,"RAY_PROPAGATING",2);__publicField(LightningStrike,"RAY_STEADY",3);__publicField(LightningStrike,"RAY_VANISHING",4);__publicField(LightningStrike,"RAY_EXTINGUISHED",5);__publicField(LightningStrike,"COS30DEG",Math.cos(30*Math.PI/180));__publicField(LightningStrike,"SIN30DEG",Math.sin(30*Math.PI/180));const _ReflectorForSSRPass=class extends Mesh{constructor(s,a={}){super(s),this.isReflectorForSSRPass=!0,this.type="ReflectorForSSRPass";const o=this,c=a.color!==void 0?new Color(a.color):new Color(8355711),d=a.textureWidth||512,b=a.textureHeight||512,$=a.clipBias||0,j=a.shader||_ReflectorForSSRPass.ReflectorShader,_e=a.useDepthTexture===!0,et=new Vector3(0,1,0),tt=new Vector3,rt=new Vector3;o.needsUpdate=!1,o.maxDistance=_ReflectorForSSRPass.ReflectorShader.uniforms.maxDistance.value,o.opacity=_ReflectorForSSRPass.ReflectorShader.uniforms.opacity.value,o.color=c,o.resolution=a.resolution||new Vector2$1(window.innerWidth,window.innerHeight),o._distanceAttenuation=_ReflectorForSSRPass.ReflectorShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(o,"distanceAttenuation",{get(){return o._distanceAttenuation},set(Ct){o._distanceAttenuation!==Ct&&(o._distanceAttenuation=Ct,o.material.defines.DISTANCE_ATTENUATION=Ct,o.material.needsUpdate=!0)}}),o._fresnel=_ReflectorForSSRPass.ReflectorShader.defines.FRESNEL,Object.defineProperty(o,"fresnel",{get(){return o._fresnel},set(Ct){o._fresnel!==Ct&&(o._fresnel=Ct,o.material.defines.FRESNEL=Ct,o.material.needsUpdate=!0)}});const nt=new Vector3,it=new Vector3,at=new Vector3,ct=new Matrix4,st=new Vector3(0,0,-1),ot=new Vector3,ht=new Vector3,dt=new Matrix4,ft=new PerspectiveCamera;let mt;_e&&(mt=new DepthTexture,mt.type=UnsignedShortType,mt.minFilter=NearestFilter,mt.magFilter=NearestFilter);const gt={depthTexture:_e?mt:null,type:HalfFloatType},vt=new WebGLRenderTarget(d,b,gt),yt=new ShaderMaterial({transparent:_e,defines:Object.assign({},_ReflectorForSSRPass.ReflectorShader.defines,{useDepthTexture:_e}),uniforms:UniformsUtils.clone(j.uniforms),fragmentShader:j.fragmentShader,vertexShader:j.vertexShader});yt.uniforms.tDiffuse.value=vt.texture,yt.uniforms.color.value=o.color,yt.uniforms.textureMatrix.value=dt,_e&&(yt.uniforms.tDepth.value=vt.depthTexture),this.material=yt;const St=[new Plane(new Vector3(0,1,0),$)];this.doRender=function(Ct,wt,_t){if(yt.uniforms.maxDistance.value=o.maxDistance,yt.uniforms.color.value=o.color,yt.uniforms.opacity.value=o.opacity,tt.copy(_t.position).normalize(),rt.copy(tt).reflect(et),yt.uniforms.fresnelCoe.value=(tt.dot(rt)+1)/2,it.setFromMatrixPosition(o.matrixWorld),at.setFromMatrixPosition(_t.matrixWorld),ct.extractRotation(o.matrixWorld),nt.set(0,0,1),nt.applyMatrix4(ct),ot.subVectors(it,at),ot.dot(nt)>0)return;ot.reflect(nt).negate(),ot.add(it),ct.extractRotation(_t.matrixWorld),st.set(0,0,-1),st.applyMatrix4(ct),st.add(at),ht.subVectors(it,st),ht.reflect(nt).negate(),ht.add(it),ft.position.copy(ot),ft.up.set(0,1,0),ft.up.applyMatrix4(ct),ft.up.reflect(nt),ft.lookAt(ht),ft.far=_t.far,ft.updateMatrixWorld(),ft.projectionMatrix.copy(_t.projectionMatrix),yt.uniforms.virtualCameraNear.value=_t.near,yt.uniforms.virtualCameraFar.value=_t.far,yt.uniforms.virtualCameraMatrixWorld.value=ft.matrixWorld,yt.uniforms.virtualCameraProjectionMatrix.value=_t.projectionMatrix,yt.uniforms.virtualCameraProjectionMatrixInverse.value=_t.projectionMatrixInverse,yt.uniforms.resolution.value=o.resolution,dt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),dt.multiply(ft.projectionMatrix),dt.multiply(ft.matrixWorldInverse),dt.multiply(o.matrixWorld);const Tt=Ct.getRenderTarget(),Mt=Ct.xr.enabled,Bt=Ct.shadowMap.autoUpdate,Rt=Ct.clippingPlanes;Ct.xr.enabled=!1,Ct.shadowMap.autoUpdate=!1,Ct.clippingPlanes=St,Ct.setRenderTarget(vt),Ct.state.buffers.depth.setMask(!0),Ct.autoClear===!1&&Ct.clear(),Ct.render(wt,ft),Ct.xr.enabled=Mt,Ct.shadowMap.autoUpdate=Bt,Ct.clippingPlanes=Rt,Ct.setRenderTarget(Tt);const bt=_t.viewport;bt!==void 0&&Ct.state.viewport(bt)},this.getRenderTarget=function(){return vt}}};let ReflectorForSSRPass=_ReflectorForSSRPass;__publicField(ReflectorForSSRPass,"ReflectorShader",{defines:{DISTANCE_ATTENUATION:!0,FRESNEL:!0},uniforms:{color:{value:null},tDiffuse:{value:null},tDepth:{value:null},textureMatrix:{value:new Matrix4},maxDistance:{value:180},opacity:{value:.5},fresnelCoe:{value:null},virtualCameraNear:{value:null},virtualCameraFar:{value:null},virtualCameraProjectionMatrix:{value:new Matrix4},virtualCameraMatrixWorld:{value:new Matrix4},virtualCameraProjectionMatrixInverse:{value:new Matrix4},resolution:{value:new Vector2$1}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;
		uniform float maxDistance;
		uniform float opacity;
		uniform float fresnelCoe;
		uniform float virtualCameraNear;
		uniform float virtualCameraFar;
		uniform mat4 virtualCameraProjectionMatrix;
		uniform mat4 virtualCameraProjectionMatrixInverse;
		uniform mat4 virtualCameraMatrixWorld;
		uniform vec2 resolution;
		varying vec4 vUv;
		#include <packing>
		float blendOverlay( float base, float blend ) {
			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );
		}
		vec3 blendOverlay( vec3 base, vec3 blend ) {
			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			return perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view
		}
		void main() {
			vec4 base = texture2DProj( tDiffuse, vUv );
			#ifdef useDepthTexture
				vec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;
				uv.x=1.-uv.x;
				float depth = texture2DProj( tDepth, vUv ).r;
				float viewZ = getViewZ( depth );
				float clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];
				vec3 viewPosition=getViewPosition( uv, depth, clipW );
				vec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;
				if(worldPosition.y>maxDistance) discard;
				float op=opacity;
				#ifdef DISTANCE_ATTENUATION
					float ratio=1.-(worldPosition.y/maxDistance);
					float attenuation=ratio*ratio;
					op=opacity*attenuation;
				#endif
				#ifdef FRESNEL
					op*=fresnelCoe;
				#endif
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), op );
			#else
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );
			#endif
		}
	`});const SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},material=new ShaderMaterial({name:"SkyShader",fragmentShader:SkyShader.fragmentShader,vertexShader:SkyShader.vertexShader,uniforms:UniformsUtils.clone(SkyShader.uniforms),side:BackSide,depthWrite:!1});class Sky extends Mesh{constructor(){super(new BoxGeometry(1,1,1),material)}}__publicField(Sky,"SkyShader",SkyShader);__publicField(Sky,"material",material);const _Water2=class extends Mesh{constructor(s,a={}){super(s),this.isWater=!0,this.type="Water";const o=this,c=a.color!==void 0?new Color(a.color):new Color(16777215),d=a.textureWidth||512,b=a.textureHeight||512,$=a.clipBias||0,j=a.flowDirection||new Vector2$1(1,0),_e=a.flowSpeed||.03,et=a.reflectivity||.02,tt=a.scale||1,rt=a.shader||_Water2.WaterShader,nt=a.encoding!==void 0?a.encoding:3e3,it=a.flowMap||void 0,at=a.normalMap0,ct=a.normalMap1,st=.15,ot=st*.5,ht=new Matrix4,dt=new Clock;if(Reflector===void 0){console.error("THREE.Water: Required component Reflector not found.");return}if(Refractor===void 0){console.error("THREE.Water: Required component Refractor not found.");return}const ft=new Reflector(s,{textureWidth:d,textureHeight:b,clipBias:$,encoding:nt}),mt=new Refractor(s,{textureWidth:d,textureHeight:b,clipBias:$,encoding:nt});ft.matrixAutoUpdate=!1,mt.matrixAutoUpdate=!1,this.material=new ShaderMaterial({uniforms:UniformsUtils.merge([UniformsLib.fog,rt.uniforms]),vertexShader:rt.vertexShader,fragmentShader:rt.fragmentShader,transparent:!0,fog:!0}),it!==void 0?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:it}):this.material.uniforms.flowDirection={type:"v2",value:j},at.wrapS=at.wrapT=RepeatWrapping$1,ct.wrapS=ct.wrapT=RepeatWrapping$1,this.material.uniforms.tReflectionMap.value=ft.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=mt.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=at,this.material.uniforms.tNormalMap1.value=ct,this.material.uniforms.color.value=c,this.material.uniforms.reflectivity.value=et,this.material.uniforms.textureMatrix.value=ht,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=ot,this.material.uniforms.config.value.z=ot,this.material.uniforms.config.value.w=tt;function gt(yt){ht.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ht.multiply(yt.projectionMatrix),ht.multiply(yt.matrixWorldInverse),ht.multiply(o.matrixWorld)}function vt(){const yt=dt.getDelta(),Et=o.material.uniforms.config;Et.value.x+=_e*yt,Et.value.y=Et.value.x+ot,Et.value.x>=st?(Et.value.x=0,Et.value.y=ot):Et.value.y>=st&&(Et.value.y=Et.value.y-st)}this.onBeforeRender=function(yt,Et,St){gt(St),vt(),o.visible=!1,ft.matrixWorld.copy(o.matrixWorld),mt.matrixWorld.copy(o.matrixWorld),ft.onBeforeRender(yt,Et,St),mt.onBeforeRender(yt,Et,St),o.visible=!0}}};let Water2=_Water2;__publicField(Water2,"WaterShader",{uniforms:{color:{value:null},reflectivity:{value:0},tReflectionMap:{value:null},tRefractionMap:{value:null},tNormalMap0:{value:null},tNormalMap1:{value:null},textureMatrix:{value:null},config:{value:new Vector4}},vertexShader:`

		#include <common>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>

		uniform mat4 textureMatrix;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			vUv = uv;
			vCoord = textureMatrix * vec4( position, 1.0 );

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vToEye = cameraPosition - worldPosition.xyz;

			vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
			gl_Position = projectionMatrix * mvPosition;

			#include <logdepthbuf_vertex>
			#include <fog_vertex>

		}`,fragmentShader:`

		#include <common>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>

		uniform sampler2D tReflectionMap;
		uniform sampler2D tRefractionMap;
		uniform sampler2D tNormalMap0;
		uniform sampler2D tNormalMap1;

		#ifdef USE_FLOWMAP
			uniform sampler2D tFlowMap;
		#else
			uniform vec2 flowDirection;
		#endif

		uniform vec3 color;
		uniform float reflectivity;
		uniform vec4 config;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			#include <logdepthbuf_fragment>

			float flowMapOffset0 = config.x;
			float flowMapOffset1 = config.y;
			float halfCycle = config.z;
			float scale = config.w;

			vec3 toEye = normalize( vToEye );

			// determine flow direction
			vec2 flow;
			#ifdef USE_FLOWMAP
				flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
			#else
				flow = flowDirection;
			#endif
			flow.x *= - 1.0;

			// sample normal maps (distort uvs with flowdata)
			vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
			vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );

			// linear interpolate to get the final normal color
			float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
			vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );

			// calculate normal vector
			vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );

			// calculate the fresnel term to blend reflection and refraction maps
			float theta = max( dot( toEye, normal ), 0.0 );
			float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );

			// calculate final uv coords
			vec3 coord = vCoord.xyz / vCoord.w;
			vec2 uv = coord.xy + coord.z * normal.xz * 0.05;

			vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
			vec4 refractColor = texture2D( tRefractionMap, uv );

			// multiply water color with the mix of both textures
			gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
			#include <fog_fragment>

		}`});const UnpackDepthRGBAShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","	float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","	gl_FragColor = vec4( vec3( depth ), opacity );","}"].join(`
`)},moduloWrapAround=(s,a)=>(s%a+a)%a;let OrbitControls$1=class extends EventDispatcher$1{constructor(a,o){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"reverseHorizontalOrbit",!1),__publicField(this,"reverseVerticalOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"listenToKeyEvents"),__publicField(this,"stopListenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),this.object=a,this.domElement=o,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>tt.phi,this.getAzimuthalAngle=()=>tt.theta,this.setPolarAngle=zt=>{let hr=moduloWrapAround(zt,2*Math.PI),Vt=tt.phi;Vt<0&&(Vt+=2*Math.PI),hr<0&&(hr+=2*Math.PI);let Ht=Math.abs(hr-Vt);2*Math.PI-Ht<Ht&&(hr<Vt?hr+=2*Math.PI:Vt+=2*Math.PI),rt.phi=hr-Vt,c.update()},this.setAzimuthalAngle=zt=>{let hr=moduloWrapAround(zt,2*Math.PI),Vt=tt.theta;Vt<0&&(Vt+=2*Math.PI),hr<0&&(hr+=2*Math.PI);let Ht=Math.abs(hr-Vt);2*Math.PI-Ht<Ht&&(hr<Vt?hr+=2*Math.PI:Vt+=2*Math.PI),rt.theta=hr-Vt,c.update()},this.getDistance=()=>c.object.position.distanceTo(c.target),this.listenToKeyEvents=zt=>{zt.addEventListener("keydown",Ft),this._domElementKeyEvents=zt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ft),this._domElementKeyEvents=null},this.saveState=()=>{c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=()=>{c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(d),c.update(),_e=j.NONE},this.update=(()=>{const zt=new Vector3,hr=new Vector3(0,1,0),Vt=new Quaternion().setFromUnitVectors(a.up,hr),Ht=Vt.clone().invert(),Kt=new Vector3,vr=new Quaternion,wr=2*Math.PI;return function(){const pr=c.object.position;Vt.setFromUnitVectors(a.up,hr),Ht.copy(Vt).invert(),zt.copy(pr).sub(c.target),zt.applyQuaternion(Vt),tt.setFromVector3(zt),c.autoRotate&&_e===j.NONE&&wt(St()),c.enableDamping?(tt.theta+=rt.theta*c.dampingFactor,tt.phi+=rt.phi*c.dampingFactor):(tt.theta+=rt.theta,tt.phi+=rt.phi);let Wt=c.minAzimuthAngle,nr=c.maxAzimuthAngle;return isFinite(Wt)&&isFinite(nr)&&(Wt<-Math.PI?Wt+=wr:Wt>Math.PI&&(Wt-=wr),nr<-Math.PI?nr+=wr:nr>Math.PI&&(nr-=wr),Wt<=nr?tt.theta=Math.max(Wt,Math.min(nr,tt.theta)):tt.theta=tt.theta>(Wt+nr)/2?Math.max(Wt,tt.theta):Math.min(nr,tt.theta)),tt.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,tt.phi)),tt.makeSafe(),tt.radius*=nt,tt.radius=Math.max(c.minDistance,Math.min(c.maxDistance,tt.radius)),c.enableDamping===!0?c.target.addScaledVector(it,c.dampingFactor):c.target.add(it),zt.setFromSpherical(tt),zt.applyQuaternion(Ht),pr.copy(c.target).add(zt),c.object.lookAt(c.target),c.enableDamping===!0?(rt.theta*=1-c.dampingFactor,rt.phi*=1-c.dampingFactor,it.multiplyScalar(1-c.dampingFactor)):(rt.set(0,0,0),it.set(0,0,0)),nt=1,at||Kt.distanceToSquared(c.object.position)>et||8*(1-vr.dot(c.object.quaternion))>et?(c.dispatchEvent(d),Kt.copy(c.object.position),vr.copy(c.object.quaternion),at=!1,!0):!1}})(),this.connect=zt=>{zt===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),c.domElement=zt,c.domElement.style.touchAction="none",c.domElement.addEventListener("contextmenu",xr),c.domElement.addEventListener("pointerdown",Br),c.domElement.addEventListener("pointercancel",Pr),c.domElement.addEventListener("wheel",Ot)},this.dispose=()=>{var zt,hr,Vt,Ht,Kt,vr;(zt=c.domElement)==null||zt.removeEventListener("contextmenu",xr),(hr=c.domElement)==null||hr.removeEventListener("pointerdown",Br),(Vt=c.domElement)==null||Vt.removeEventListener("pointercancel",Pr),(Ht=c.domElement)==null||Ht.removeEventListener("wheel",Ot),(Kt=c.domElement)==null||Kt.ownerDocument.removeEventListener("pointermove",_r),(vr=c.domElement)==null||vr.ownerDocument.removeEventListener("pointerup",br),c._domElementKeyEvents!==null&&c._domElementKeyEvents.removeEventListener("keydown",Ft)};const c=this,d={type:"change"},b={type:"start"},$={type:"end"},j={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let _e=j.NONE;const et=1e-6,tt=new Spherical,rt=new Spherical;let nt=1;const it=new Vector3;let at=!1;const ct=new Vector2$1,st=new Vector2$1,ot=new Vector2$1,ht=new Vector2$1,dt=new Vector2$1,ft=new Vector2$1,mt=new Vector2$1,gt=new Vector2$1,vt=new Vector2$1,yt=[],Et={};function St(){return 2*Math.PI/60/60*c.autoRotateSpeed}function Ct(){return Math.pow(.95,c.zoomSpeed)}function wt(zt){c.reverseOrbit||c.reverseHorizontalOrbit?rt.theta+=zt:rt.theta-=zt}function _t(zt){c.reverseOrbit||c.reverseVerticalOrbit?rt.phi+=zt:rt.phi-=zt}const Tt=(()=>{const zt=new Vector3;return function(Vt,Ht){zt.setFromMatrixColumn(Ht,0),zt.multiplyScalar(-Vt),it.add(zt)}})(),Mt=(()=>{const zt=new Vector3;return function(Vt,Ht){c.screenSpacePanning===!0?zt.setFromMatrixColumn(Ht,1):(zt.setFromMatrixColumn(Ht,0),zt.crossVectors(c.object.up,zt)),zt.multiplyScalar(Vt),it.add(zt)}})(),Bt=(()=>{const zt=new Vector3;return function(Vt,Ht){const Kt=c.domElement;if(Kt&&c.object instanceof PerspectiveCamera&&c.object.isPerspectiveCamera){const vr=c.object.position;zt.copy(vr).sub(c.target);let wr=zt.length();wr*=Math.tan(c.object.fov/2*Math.PI/180),Tt(2*Vt*wr/Kt.clientHeight,c.object.matrix),Mt(2*Ht*wr/Kt.clientHeight,c.object.matrix)}else Kt&&c.object instanceof OrthographicCamera&&c.object.isOrthographicCamera?(Tt(Vt*(c.object.right-c.object.left)/c.object.zoom/Kt.clientWidth,c.object.matrix),Mt(Ht*(c.object.top-c.object.bottom)/c.object.zoom/Kt.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}})();function Rt(zt){c.object instanceof PerspectiveCamera&&c.object.isPerspectiveCamera?nt/=zt:c.object instanceof OrthographicCamera&&c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*zt)),c.object.updateProjectionMatrix(),at=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function bt(zt){c.object instanceof PerspectiveCamera&&c.object.isPerspectiveCamera?nt*=zt:c.object instanceof OrthographicCamera&&c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/zt)),c.object.updateProjectionMatrix(),at=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function Pt(zt){ct.set(zt.clientX,zt.clientY)}function Dt(zt){mt.set(zt.clientX,zt.clientY)}function $t(zt){ht.set(zt.clientX,zt.clientY)}function Lt(zt){st.set(zt.clientX,zt.clientY),ot.subVectors(st,ct).multiplyScalar(c.rotateSpeed);const hr=c.domElement;hr&&(wt(2*Math.PI*ot.x/hr.clientHeight),_t(2*Math.PI*ot.y/hr.clientHeight)),ct.copy(st),c.update()}function Jt(zt){gt.set(zt.clientX,zt.clientY),vt.subVectors(gt,mt),vt.y>0?Rt(Ct()):vt.y<0&&bt(Ct()),mt.copy(gt),c.update()}function Qt(zt){dt.set(zt.clientX,zt.clientY),ft.subVectors(dt,ht).multiplyScalar(c.panSpeed),Bt(ft.x,ft.y),ht.copy(dt),c.update()}function or(zt){zt.deltaY<0?bt(Ct()):zt.deltaY>0&&Rt(Ct()),c.update()}function er(zt){let hr=!1;switch(zt.code){case c.keys.UP:Bt(0,c.keyPanSpeed),hr=!0;break;case c.keys.BOTTOM:Bt(0,-c.keyPanSpeed),hr=!0;break;case c.keys.LEFT:Bt(c.keyPanSpeed,0),hr=!0;break;case c.keys.RIGHT:Bt(-c.keyPanSpeed,0),hr=!0;break}hr&&(zt.preventDefault(),c.update())}function sr(){if(yt.length==1)ct.set(yt[0].pageX,yt[0].pageY);else{const zt=.5*(yt[0].pageX+yt[1].pageX),hr=.5*(yt[0].pageY+yt[1].pageY);ct.set(zt,hr)}}function Ar(){if(yt.length==1)ht.set(yt[0].pageX,yt[0].pageY);else{const zt=.5*(yt[0].pageX+yt[1].pageX),hr=.5*(yt[0].pageY+yt[1].pageY);ht.set(zt,hr)}}function Er(){const zt=yt[0].pageX-yt[1].pageX,hr=yt[0].pageY-yt[1].pageY,Vt=Math.sqrt(zt*zt+hr*hr);mt.set(0,Vt)}function Tr(){c.enableZoom&&Er(),c.enablePan&&Ar()}function ur(){c.enableZoom&&Er(),c.enableRotate&&sr()}function kt(zt){if(yt.length==1)st.set(zt.pageX,zt.pageY);else{const Vt=cr(zt),Ht=.5*(zt.pageX+Vt.x),Kt=.5*(zt.pageY+Vt.y);st.set(Ht,Kt)}ot.subVectors(st,ct).multiplyScalar(c.rotateSpeed);const hr=c.domElement;hr&&(wt(2*Math.PI*ot.x/hr.clientHeight),_t(2*Math.PI*ot.y/hr.clientHeight)),ct.copy(st)}function Xt(zt){if(yt.length==1)dt.set(zt.pageX,zt.pageY);else{const hr=cr(zt),Vt=.5*(zt.pageX+hr.x),Ht=.5*(zt.pageY+hr.y);dt.set(Vt,Ht)}ft.subVectors(dt,ht).multiplyScalar(c.panSpeed),Bt(ft.x,ft.y),ht.copy(dt)}function ar(zt){const hr=cr(zt),Vt=zt.pageX-hr.x,Ht=zt.pageY-hr.y,Kt=Math.sqrt(Vt*Vt+Ht*Ht);gt.set(0,Kt),vt.set(0,Math.pow(gt.y/mt.y,c.zoomSpeed)),Rt(vt.y),mt.copy(gt)}function yr(zt){c.enableZoom&&ar(zt),c.enablePan&&Xt(zt)}function mr(zt){c.enableZoom&&ar(zt),c.enableRotate&&kt(zt)}function Br(zt){var hr,Vt;c.enabled!==!1&&(yt.length===0&&((hr=c.domElement)==null||hr.ownerDocument.addEventListener("pointermove",_r),(Vt=c.domElement)==null||Vt.ownerDocument.addEventListener("pointerup",br)),Ir(zt),zt.pointerType==="touch"?ir(zt):Or(zt))}function _r(zt){c.enabled!==!1&&(zt.pointerType==="touch"?Sr(zt):Wr(zt))}function br(zt){var hr,Vt,Ht;Fr(zt),yt.length===0&&((hr=c.domElement)==null||hr.releasePointerCapture(zt.pointerId),(Vt=c.domElement)==null||Vt.ownerDocument.removeEventListener("pointermove",_r),(Ht=c.domElement)==null||Ht.ownerDocument.removeEventListener("pointerup",br)),c.dispatchEvent($),_e=j.NONE}function Pr(zt){Fr(zt)}function Or(zt){let hr;switch(zt.button){case 0:hr=c.mouseButtons.LEFT;break;case 1:hr=c.mouseButtons.MIDDLE;break;case 2:hr=c.mouseButtons.RIGHT;break;default:hr=-1}switch(hr){case MOUSE.DOLLY:if(c.enableZoom===!1)return;Dt(zt),_e=j.DOLLY;break;case MOUSE.ROTATE:if(zt.ctrlKey||zt.metaKey||zt.shiftKey){if(c.enablePan===!1)return;$t(zt),_e=j.PAN}else{if(c.enableRotate===!1)return;Pt(zt),_e=j.ROTATE}break;case MOUSE.PAN:if(zt.ctrlKey||zt.metaKey||zt.shiftKey){if(c.enableRotate===!1)return;Pt(zt),_e=j.ROTATE}else{if(c.enablePan===!1)return;$t(zt),_e=j.PAN}break;default:_e=j.NONE}_e!==j.NONE&&c.dispatchEvent(b)}function Wr(zt){if(c.enabled!==!1)switch(_e){case j.ROTATE:if(c.enableRotate===!1)return;Lt(zt);break;case j.DOLLY:if(c.enableZoom===!1)return;Jt(zt);break;case j.PAN:if(c.enablePan===!1)return;Qt(zt);break}}function Ot(zt){c.enabled===!1||c.enableZoom===!1||_e!==j.NONE&&_e!==j.ROTATE||(zt.preventDefault(),c.dispatchEvent(b),or(zt),c.dispatchEvent($))}function Ft(zt){c.enabled===!1||c.enablePan===!1||er(zt)}function ir(zt){switch(Mr(zt),yt.length){case 1:switch(c.touches.ONE){case TOUCH.ROTATE:if(c.enableRotate===!1)return;sr(),_e=j.TOUCH_ROTATE;break;case TOUCH.PAN:if(c.enablePan===!1)return;Ar(),_e=j.TOUCH_PAN;break;default:_e=j.NONE}break;case 2:switch(c.touches.TWO){case TOUCH.DOLLY_PAN:if(c.enableZoom===!1&&c.enablePan===!1)return;Tr(),_e=j.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(c.enableZoom===!1&&c.enableRotate===!1)return;ur(),_e=j.TOUCH_DOLLY_ROTATE;break;default:_e=j.NONE}break;default:_e=j.NONE}_e!==j.NONE&&c.dispatchEvent(b)}function Sr(zt){switch(Mr(zt),_e){case j.TOUCH_ROTATE:if(c.enableRotate===!1)return;kt(zt),c.update();break;case j.TOUCH_PAN:if(c.enablePan===!1)return;Xt(zt),c.update();break;case j.TOUCH_DOLLY_PAN:if(c.enableZoom===!1&&c.enablePan===!1)return;yr(zt),c.update();break;case j.TOUCH_DOLLY_ROTATE:if(c.enableZoom===!1&&c.enableRotate===!1)return;mr(zt),c.update();break;default:_e=j.NONE}}function xr(zt){c.enabled!==!1&&zt.preventDefault()}function Ir(zt){yt.push(zt)}function Fr(zt){delete Et[zt.pointerId];for(let hr=0;hr<yt.length;hr++)if(yt[hr].pointerId==zt.pointerId){yt.splice(hr,1);return}}function Mr(zt){let hr=Et[zt.pointerId];hr===void 0&&(hr=new Vector2$1,Et[zt.pointerId]=hr),hr.set(zt.pageX,zt.pageY)}function cr(zt){const hr=zt.pointerId===yt[0].pointerId?yt[1]:yt[0];return Et[hr.pointerId]}o!==void 0&&this.connect(o),this.update()}};class Pass{constructor(){__publicField(this,"enabled",!0),__publicField(this,"needsSwap",!0),__publicField(this,"clear",!1),__publicField(this,"renderToScreen",!1)}setSize(a,o){}render(a,o,c,d,b){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class FullScreenQuad{constructor(a){__publicField(this,"camera",new OrthographicCamera(-1,1,1,-1,0,1)),__publicField(this,"geometry",new PlaneGeometry(2,2)),__publicField(this,"mesh"),this.mesh=new Mesh(this.geometry,a)}get material(){return this.mesh.material}set material(a){this.mesh.material=a}dispose(){this.mesh.geometry.dispose()}render(a){a.render(this.mesh,this.camera)}}const CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)},SSAOShader={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Vector2$1},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","	return texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","		return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","		return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","	float depth = getDepth( vUv );","	float viewZ = getViewZ( depth );","	vec3 viewPosition = getViewPosition( vUv, depth, viewZ );","	vec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","	vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","	vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","	vec3 bitangent = cross( viewNormal, tangent );","	mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","		vec3 sampleVector = kernelMatrix * kernel[ i ];","		vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","		vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","		samplePointNDC /= samplePointNDC.w;","		vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","		float realDepth = getLinearDepth( samplePointUv );","		float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","		float delta = sampleDepth - realDepth;","		if ( delta > minDistance && delta < maxDistance ) {","			occlusion += 1.0;","		}","	}","	occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","	gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join(`
`)},SSAODepthShader={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","void main() {","	float depth = getLinearDepth( vUv );","	gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join(`
`)},SSAOBlurShader={uniforms:{tDiffuse:{value:null},resolution:{value:new Vector2$1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","	vec2 texelSize = ( 1.0 / resolution );","	float result = 0.0;","	for ( int i = - 2; i <= 2; i ++ ) {","		for ( int j = - 2; j <= 2; j ++ ) {","			vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","			result += texture2D( tDiffuse, vUv + offset ).r;","		}","	}","	gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join(`
`)},_SSAOPass=class extends Pass{constructor(s,a,o,c){super(),this.width=o!==void 0?o:512,this.height=c!==void 0?c:512,this.clear=!0,this.camera=a,this.scene=s,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const d=new DepthTexture;d.format=DepthStencilFormat,d.type=UnsignedInt248Type,this.beautyRenderTarget=new WebGLRenderTarget(this.width,this.height),this.normalRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,depthTexture:d}),this.ssaoRenderTarget=new WebGLRenderTarget(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),SSAOShader===void 0&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new ShaderMaterial({defines:Object.assign({},SSAOShader.defines),uniforms:UniformsUtils.clone(SSAOShader.uniforms),vertexShader:SSAOShader.vertexShader,fragmentShader:SSAOShader.fragmentShader,blending:NoBlending}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.blurMaterial=new ShaderMaterial({defines:Object.assign({},SSAOBlurShader.defines),uniforms:UniformsUtils.clone(SSAOBlurShader.uniforms),vertexShader:SSAOBlurShader.vertexShader,fragmentShader:SSAOBlurShader.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ShaderMaterial({defines:Object.assign({},SSAODepthShader.defines),uniforms:UniformsUtils.clone(SSAODepthShader.uniforms),vertexShader:SSAODepthShader.vertexShader,fragmentShader:SSAODepthShader.fragmentShader,blending:NoBlending}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:DstColorFactor,blendDst:ZeroFactor,blendEquation:AddEquation,blendSrcAlpha:DstAlphaFactor,blendDstAlpha:ZeroFactor,blendEquationAlpha:AddEquation}),this.fsQuad=new FullScreenQuad(null),this.originalClearColor=new Color}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(s,a){switch(s.capabilities.isWebGL2===!1&&(this.noiseTexture.format=LuminanceFormat),s.setRenderTarget(this.beautyRenderTarget),s.clear(),s.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(s,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(s,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(s,this.blurMaterial,this.blurRenderTarget),this.output){case _SSAOPass.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSAOPass.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSAOPass.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSAOPass.OUTPUT.Depth:this.renderPass(s,this.depthRenderMaterial,this.renderToScreen?null:a);break;case _SSAOPass.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSAOPass.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=CustomBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(s,a,o,c,d){s.getClearColor(this.originalClearColor);const b=s.getClearAlpha(),$=s.autoClear;s.setRenderTarget(o),s.autoClear=!1,c!=null&&(s.setClearColor(c),s.setClearAlpha(d||0),s.clear()),this.fsQuad.material=a,this.fsQuad.render(s),s.autoClear=$,s.setClearColor(this.originalClearColor),s.setClearAlpha(b)}renderOverride(s,a,o,c,d){s.getClearColor(this.originalClearColor);const b=s.getClearAlpha(),$=s.autoClear;s.setRenderTarget(o),s.autoClear=!1,c=a.clearColor||c,d=a.clearAlpha||d,c!=null&&(s.setClearColor(c),s.setClearAlpha(d||0),s.clear()),this.scene.overrideMaterial=a,s.render(this.scene,this.camera),this.scene.overrideMaterial=null,s.autoClear=$,s.setClearColor(this.originalClearColor),s.setClearAlpha(b)}setSize(s,a){this.width=s,this.height=a,this.beautyRenderTarget.setSize(s,a),this.ssaoRenderTarget.setSize(s,a),this.normalRenderTarget.setSize(s,a),this.blurRenderTarget.setSize(s,a),this.ssaoMaterial.uniforms.resolution.value.set(s,a),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(s,a)}generateSampleKernel(){const s=this.kernelSize,a=this.kernel;for(let o=0;o<s;o++){const c=new Vector3;c.x=Math.random()*2-1,c.y=Math.random()*2-1,c.z=Math.random(),c.normalize();let d=o/s;d=MathUtils.lerp(.1,1,d*d),c.multiplyScalar(d),a.push(c)}}generateRandomKernelRotations(){SimplexNoise===void 0&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const o=new SimplexNoise,c=4*4,d=new Float32Array(c);for(let b=0;b<c;b++){const $=Math.random()*2-1,j=Math.random()*2-1,_e=0;d[b]=o.noise3d($,j,_e)}this.noiseTexture=new DataTexture(d,4,4,RedFormat,FloatType),this.noiseTexture.wrapS=RepeatWrapping$1,this.noiseTexture.wrapT=RepeatWrapping$1,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const s=this.scene,a=this._visibilityCache;s.traverse(function(o){a.set(o,o.visible),(o.isPoints||o.isLine)&&(o.visible=!1)})}restoreVisibility(){const s=this.scene,a=this._visibilityCache;s.traverse(function(o){const c=a.get(o);o.visible=c}),a.clear()}};let SSAOPass=_SSAOPass;__publicField(SSAOPass,"OUTPUT",{Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5});const LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	vec3 luma = vec3( 0.299, 0.587, 0.114 );","	float v = dot( texel.xyz, luma );","	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","	gl_FragColor = mix( outputColor, texel, alpha );","}"].join(`
`)},_UnrealBloomPass=class extends Pass{constructor(s,a,o,c){super(),this.strength=a!==void 0?a:1,this.radius=o,this.threshold=c,this.resolution=s!==void 0?new Vector2$1(s.x,s.y):new Vector2$1(256,256),this.clearColor=new Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let d=Math.round(this.resolution.x/2),b=Math.round(this.resolution.y/2);this.renderTargetBright=new WebGLRenderTarget(d,b,{type:HalfFloatType}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let tt=0;tt<this.nMips;tt++){const rt=new WebGLRenderTarget(d,b,{type:HalfFloatType});rt.texture.name="UnrealBloomPass.h"+tt,rt.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(rt);const nt=new WebGLRenderTarget(d,b,{type:HalfFloatType});nt.texture.name="UnrealBloomPass.v"+tt,nt.texture.generateMipmaps=!1,this.renderTargetsVertical.push(nt),d=Math.round(d/2),b=Math.round(b/2)}const $=LuminosityHighPassShader;this.highPassUniforms=UniformsUtils.clone($.uniforms),this.highPassUniforms.luminosityThreshold.value=c,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:$.vertexShader,fragmentShader:$.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const j=[3,5,7,9,11];d=Math.round(this.resolution.x/2),b=Math.round(this.resolution.y/2);for(let tt=0;tt<this.nMips;tt++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(j[tt])),this.separableBlurMaterials[tt].uniforms.texSize.value=new Vector2$1(d,b),d=Math.round(d/2),b=Math.round(b/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=a,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const _e=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=_e,this.bloomTintColors=[new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const et=CopyShader;this.copyUniforms=UniformsUtils.clone(et.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:et.vertexShader,fragmentShader:et.fragmentShader,blending:AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Color,this.oldClearAlpha=1,this.basic=new MeshBasicMaterial,this.fsQuad=new FullScreenQuad(null)}dispose(){for(let s=0;s<this.renderTargetsHorizontal.length;s++)this.renderTargetsHorizontal[s].dispose();for(let s=0;s<this.renderTargetsVertical.length;s++)this.renderTargetsVertical[s].dispose();this.renderTargetBright.dispose();for(let s=0;s<this.separableBlurMaterials.length;s++)this.separableBlurMaterials[s].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(s,a){let o=Math.round(s/2),c=Math.round(a/2);this.renderTargetBright.setSize(o,c);for(let d=0;d<this.nMips;d++)this.renderTargetsHorizontal[d].setSize(o,c),this.renderTargetsVertical[d].setSize(o,c),this.separableBlurMaterials[d].uniforms.texSize.value=new Vector2$1(o,c),o=Math.round(o/2),c=Math.round(c/2)}render(s,a,o,c,d){s.getClearColor(this._oldClearColor),this.oldClearAlpha=s.getClearAlpha();const b=s.autoClear;s.autoClear=!1,s.setClearColor(this.clearColor,0),d&&s.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=o.texture,s.setRenderTarget(null),s.clear(),this.fsQuad.render(s)),this.highPassUniforms.tDiffuse.value=o.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,s.setRenderTarget(this.renderTargetBright),s.clear(),this.fsQuad.render(s);let $=this.renderTargetBright;for(let j=0;j<this.nMips;j++)this.fsQuad.material=this.separableBlurMaterials[j],this.separableBlurMaterials[j].uniforms.colorTexture.value=$.texture,this.separableBlurMaterials[j].uniforms.direction.value=_UnrealBloomPass.BlurDirectionX,s.setRenderTarget(this.renderTargetsHorizontal[j]),s.clear(),this.fsQuad.render(s),this.separableBlurMaterials[j].uniforms.colorTexture.value=this.renderTargetsHorizontal[j].texture,this.separableBlurMaterials[j].uniforms.direction.value=_UnrealBloomPass.BlurDirectionY,s.setRenderTarget(this.renderTargetsVertical[j]),s.clear(),this.fsQuad.render(s),$=this.renderTargetsVertical[j];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,s.setRenderTarget(this.renderTargetsHorizontal[0]),s.clear(),this.fsQuad.render(s),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,d&&s.state.buffers.stencil.setTest(!0),this.renderToScreen?(s.setRenderTarget(null),this.fsQuad.render(s)):(s.setRenderTarget(o),this.fsQuad.render(s)),s.setClearColor(this._oldClearColor,this.oldClearAlpha),s.autoClear=b}getSeperableBlurMaterial(s){return new ShaderMaterial({defines:{KERNEL_RADIUS:s,SIGMA:s},uniforms:{colorTexture:{value:null},texSize:{value:new Vector2$1(.5,.5)},direction:{value:new Vector2$1(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(s){return new ShaderMaterial({defines:{NUM_MIPS:s},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};let UnrealBloomPass=_UnrealBloomPass;__publicField(UnrealBloomPass,"BlurDirectionX",new Vector2$1(1,0));__publicField(UnrealBloomPass,"BlurDirectionY",new Vector2$1(0,1));const SAOShader={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new Vector2$1(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","	#if DIFFUSE_TEXTURE == 1","	return texture2D( tDiffuse, vUv );","	#else","	return vec4( 1.0 );","	#endif","}","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","	#if NORMAL_TEXTURE == 1","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","	#else","	return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","	#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","	vec3 viewDelta = sampleViewPosition - centerViewPosition;","	float viewDistance = length( viewDelta );","	float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","	return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","	// precompute some variables require in getOcclusion.","	scaleDividedByCameraFar = scale / cameraFar;","	minResolutionMultipliedByCameraFar = minResolution * cameraFar;","	vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","	// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","	float angle = rand( vUv + randomSeed ) * PI2;","	vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","	vec2 radiusStep = radius;","	float occlusionSum = 0.0;","	float weightSum = 0.0;","	for( int i = 0; i < NUM_SAMPLES; i ++ ) {","		vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","		radius += radiusStep;","		angle += ANGLE_STEP;","		float sampleDepth = getDepth( sampleUv );","		if( sampleDepth >= ( 1.0 - EPSILON ) ) {","			continue;","		}","		float sampleViewZ = getViewZ( sampleDepth );","		vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","		occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","		weightSum += 1.0;","	}","	if( weightSum == 0.0 ) discard;","	return occlusionSum * ( intensity / weightSum );","}","void main() {","	float centerDepth = getDepth( vUv );","	if( centerDepth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = getViewZ( centerDepth );","	vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","	float ambientOcclusion = getAmbientOcclusion( viewPosition );","	gl_FragColor = getDefaultColor( vUv );","	gl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join(`
`)},DepthLimitedBlurShader={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new Vector2$1(512,512)},sampleUvOffsets:{value:[new Vector2$1(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","	vUv = uv;","	vInvSize = 1.0 / size;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","void main() {","	float depth = getDepth( vUv );","	if( depth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = -getViewZ( depth );","	bool rBreak = false, lBreak = false;","	float weightSum = sampleWeights[0];","	vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","	for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","		float sampleWeight = sampleWeights[i];","		vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","		vec2 sampleUv = vUv + sampleUvOffset;","		float viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","		if( ! rBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","		sampleUv = vUv - sampleUvOffset;","		viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","		if( ! lBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","	}","	gl_FragColor = diffuseSum / weightSum;","}"].join(`
`)},BlurShaderUtils={createSampleWeights:(s,a)=>{const o=(d,b)=>Math.exp(-(d*d)/(2*(b*b)))/(Math.sqrt(2*Math.PI)*b),c=[];for(let d=0;d<=s;d++)c.push(o(d,a));return c},createSampleOffsets:(s,a)=>{const o=[];for(let c=0;c<=s;c++)o.push(a.clone().multiplyScalar(c));return o},configure:(s,a,o,c)=>{s.defines.KERNEL_RADIUS=a,s.uniforms.sampleUvOffsets.value=BlurShaderUtils.createSampleOffsets(a,c),s.uniforms.sampleWeights.value=BlurShaderUtils.createSampleWeights(a,o),s.needsUpdate=!0}};class SAOPass extends Pass{constructor(a,o,c=!1,d=!1,b=new Vector2$1(256,256)){super(),this.scene=a,this.camera=o,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=c,this.supportsNormalTexture=d,this.originalClearColor=new Color,this._oldClearColor=new Color,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new Vector2$1(b.x,b.y),this.saoRenderTarget=new WebGLRenderTarget(this.resolution.x,this.resolution.y,{type:HalfFloatType}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.depthRenderTarget=this.normalRenderTarget.clone();let $;this.supportsDepthTextureExtension&&($=new DepthTexture,$.type=UnsignedShortType,this.beautyRenderTarget.depthTexture=$,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new MeshDepthMaterial,this.depthMaterial.depthPacking=RGBADepthPacking,this.depthMaterial.blending=NoBlending,this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.saoMaterial=new ShaderMaterial({defines:Object.assign({},SAOShader.defines),fragmentShader:SAOShader.fragmentShader,vertexShader:SAOShader.vertexShader,uniforms:UniformsUtils.clone(SAOShader.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?$:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=NoBlending,this.vBlurMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(DepthLimitedBlurShader.uniforms),defines:Object.assign({},DepthLimitedBlurShader.defines),vertexShader:DepthLimitedBlurShader.vertexShader,fragmentShader:DepthLimitedBlurShader.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?$:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=NoBlending,this.hBlurMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(DepthLimitedBlurShader.uniforms),defines:Object.assign({},DepthLimitedBlurShader.defines),vertexShader:DepthLimitedBlurShader.vertexShader,fragmentShader:DepthLimitedBlurShader.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?$:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=NoBlending,this.materialCopy=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,blending:NoBlending}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=CustomBlending,this.materialCopy.blendSrc=DstColorFactor,this.materialCopy.blendDst=ZeroFactor,this.materialCopy.blendEquation=AddEquation,this.materialCopy.blendSrcAlpha=DstAlphaFactor,this.materialCopy.blendDstAlpha=ZeroFactor,this.materialCopy.blendEquationAlpha=AddEquation,this.depthCopy=new ShaderMaterial({uniforms:UniformsUtils.clone(UnpackDepthRGBAShader.uniforms),vertexShader:UnpackDepthRGBAShader.vertexShader,fragmentShader:UnpackDepthRGBAShader.fragmentShader,blending:NoBlending}),this.fsQuad=new FullScreenQuad(null)}render(a,o,c){if(this.renderToScreen&&(this.materialCopy.blending=NoBlending,this.materialCopy.uniforms.tDiffuse.value=c.texture,this.materialCopy.needsUpdate=!0,this.renderPass(a,this.materialCopy,null)),this.params.output===1)return;a.getClearColor(this._oldClearColor),this.oldClearAlpha=a.getClearAlpha();const d=a.autoClear;a.autoClear=!1,a.setRenderTarget(this.depthRenderTarget),a.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const b=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=b,this.hBlurMaterial.uniforms.depthCutoff.value=b,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(BlurShaderUtils.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Vector2$1(0,1)),BlurShaderUtils.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Vector2$1(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),a.setClearColor(0),a.setRenderTarget(this.beautyRenderTarget),a.clear(),a.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(a,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(a,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(a,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(a,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(a,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let $=this.materialCopy;this.params.output===3?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,$=this.depthCopy):this.params.output===4?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===0?$.blending=CustomBlending:$.blending=NoBlending,this.renderPass(a,$,this.renderToScreen?null:c),a.setClearColor(this._oldClearColor,this.oldClearAlpha),a.autoClear=d}renderPass(a,o,c,d,b){a.getClearColor(this.originalClearColor);const $=a.getClearAlpha(),j=a.autoClear;a.setRenderTarget(c),a.autoClear=!1,d!=null&&(a.setClearColor(d),a.setClearAlpha(b||0),a.clear()),this.fsQuad.material=o,this.fsQuad.render(a),a.autoClear=j,a.setClearColor(this.originalClearColor),a.setClearAlpha($)}renderOverride(a,o,c,d,b){a.getClearColor(this.originalClearColor);const $=a.getClearAlpha(),j=a.autoClear;a.setRenderTarget(c),a.autoClear=!1,d=o.clearColor||d,b=o.clearAlpha||b,d!=null&&(a.setClearColor(d),a.setClearAlpha(b||0),a.clear()),this.scene.overrideMaterial=o,a.render(this.scene,this.camera),this.scene.overrideMaterial=null,a.autoClear=j,a.setClearColor(this.originalClearColor),a.setClearAlpha($)}setSize(a,o){this.beautyRenderTarget.setSize(a,o),this.saoRenderTarget.setSize(a,o),this.blurIntermediateRenderTarget.setSize(a,o),this.normalRenderTarget.setSize(a,o),this.depthRenderTarget.setSize(a,o),this.saoMaterial.uniforms.size.value.set(a,o),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(a,o),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(a,o),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.depthRenderTarget.dispose(),this.depthMaterial.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.depthCopy.dispose(),this.fsQuad.dispose()}}__publicField(SAOPass,"OUTPUT",{Beauty:1,Default:0,SAO:2,Depth:3,Normal:4});const SSRShader={defines:{MAX_STEP:0,isPerspectiveCamera:!0,isDistanceAttenuation:!0,isFresnel:!0,isInfiniteThick:!1,isSelective:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Vector2$1},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},surfDist:{value:.007},thickTolerance:{value:.03}},vertexShader:`

    varying vec2 vUv;

    void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float surfDist;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		uniform float thickTolerance;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef isPerspectiveCamera
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef isSelective
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef isPerspectiveCamera
				vec3 viewIncidenceDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#else
				vec3 viewIncidenceDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef isPerspectiveCamera
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<MAX_STEP;i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef isPerspectiveCamera
					// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
					float sD=surfDist*cW;
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
					float sD=surfDist;
				#endif
				if(viewReflectRayZ-sD>vZ) continue;

				#ifdef isInfiniteThick
					if(viewReflectRayZ+thickTolerance*clipW<vP.z) break;
				#endif
				float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

				float op=opacity;

				if(away<sD){
					vec3 vN=getViewNormal( uv );
					if(dot(viewReflectDir,vN)>=0.) continue;
					float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
					if(distance>maxDistance) break;
					#ifdef isDistanceAttenuation
						float ratio=1.-(distance/maxDistance);
						float attenuation=ratio*ratio;
						op=opacity*attenuation;
					#endif
					#ifdef isFresnel
						float fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;
						op*=fresnel;
					#endif
					vec4 reflectColor=texture2D(tDiffuse,uv);
					gl_FragColor.xyz=reflectColor.xyz;
					gl_FragColor.a=op;
					break;
				}
			}
		}
	`},SSRDepthShader={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDepth;

    uniform float cameraNear;
    uniform float cameraFar;

    varying vec2 vUv;

    #include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

    void main() {

    	float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
    	gl_FragColor = vec4( vec3( d ), 1.0 );

    }

  `},SSRBlurShader={uniforms:{tDiffuse:{value:null},resolution:{value:new Vector2$1},opacity:{value:.5}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDiffuse;
    uniform vec2 resolution;
    varying vec2 vUv;
    void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

    	vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`},_SSRPass=class extends Pass{constructor({renderer:s,scene:a,camera:o,width:c,height:d,selects:b,bouncing:$=!1,groundReflector:j}){super(),this.width=c!==void 0?c:512,this.height=d!==void 0?d:512,this.clear=!0,this.renderer=s,this.scene=a,this.camera=o,this.groundReflector=j,this.opacity=SSRShader.uniforms.opacity.value,this.output=0,this.maxDistance=SSRShader.uniforms.maxDistance.value,this.thickness=SSRShader.uniforms.thickness.value,this.tempColor=new Color,this._selects=b,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(et){this._selects!==et&&(this._selects=et,Array.isArray(et)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=$,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(et){this._bouncing!==et&&(this._bouncing=et,et?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=SSRShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(et){this._distanceAttenuation!==et&&(this._distanceAttenuation=et,this.ssrMaterial.defines.DISTANCE_ATTENUATION=et,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=SSRShader.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(et){this._fresnel!==et&&(this._fresnel=et,this.ssrMaterial.defines.FRESNEL=et,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=SSRShader.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(et){this._infiniteThick!==et&&(this._infiniteThick=et,this.ssrMaterial.defines.INFINITE_THICK=et,this.ssrMaterial.needsUpdate=!0)}});const _e=new DepthTexture;_e.type=UnsignedShortType,_e.minFilter=NearestFilter,_e.magFilter=NearestFilter,this.beautyRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType,depthTexture:_e,depthBuffer:!0}),this.prevRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter}),this.normalRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.metalnessRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.ssrRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new ShaderMaterial({defines:Object.assign({},SSRShader.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:UniformsUtils.clone(SSRShader.uniforms),vertexShader:SSRShader.vertexShader,fragmentShader:SSRShader.fragmentShader,blending:NoBlending}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.metalnessOnMaterial=new MeshBasicMaterial({color:"white"}),this.metalnessOffMaterial=new MeshBasicMaterial({color:"black"}),this.blurMaterial=new ShaderMaterial({defines:Object.assign({},SSRBlurShader.defines),uniforms:UniformsUtils.clone(SSRBlurShader.uniforms),vertexShader:SSRBlurShader.vertexShader,fragmentShader:SSRBlurShader.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new ShaderMaterial({defines:Object.assign({},SSRBlurShader.defines),uniforms:UniformsUtils.clone(SSRBlurShader.uniforms),vertexShader:SSRBlurShader.vertexShader,fragmentShader:SSRBlurShader.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ShaderMaterial({defines:Object.assign({},SSRDepthShader.defines),uniforms:UniformsUtils.clone(SSRDepthShader.uniforms),vertexShader:SSRDepthShader.vertexShader,fragmentShader:SSRDepthShader.fragmentShader,blending:NoBlending}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendEquation:AddEquation,blendSrcAlpha:SrcAlphaFactor,blendDstAlpha:OneMinusSrcAlphaFactor,blendEquationAlpha:AddEquation}),this.fsQuad=new FullScreenQuad(null),this.originalClearColor=new Color}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(s,a){switch(s.setRenderTarget(this.beautyRenderTarget),s.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),s.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(s,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(s,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(s,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(s,this.blurMaterial,this.blurRenderTarget),this.renderPass(s,this.blurMaterial2,this.blurRenderTarget2)),this.output){case _SSRPass.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(s,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a));break;case _SSRPass.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(s,this.copyMaterial,this.prevRenderTarget));break;case _SSRPass.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSRPass.OUTPUT.Depth:this.renderPass(s,this.depthRenderMaterial,this.renderToScreen?null:a);break;case _SSRPass.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;case _SSRPass.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(s,this.copyMaterial,this.renderToScreen?null:a);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(s,a,o,c,d){this.originalClearColor.copy(s.getClearColor(this.tempColor));const b=s.getClearAlpha(this.tempColor),$=s.autoClear;s.setRenderTarget(o),s.autoClear=!1,c!=null&&(s.setClearColor(c),s.setClearAlpha(d||0),s.clear()),this.fsQuad.material=a,this.fsQuad.render(s),s.autoClear=$,s.setClearColor(this.originalClearColor),s.setClearAlpha(b)}renderOverride(s,a,o,c,d){this.originalClearColor.copy(s.getClearColor(this.tempColor));const b=s.getClearAlpha(this.tempColor),$=s.autoClear;s.setRenderTarget(o),s.autoClear=!1,c=a.clearColor||c,d=a.clearAlpha||d,c!=null&&(s.setClearColor(c),s.setClearAlpha(d||0),s.clear()),this.scene.overrideMaterial=a,s.render(this.scene,this.camera),this.scene.overrideMaterial=null,s.autoClear=$,s.setClearColor(this.originalClearColor),s.setClearAlpha(b)}renderMetalness(s,a,o,c,d){this.originalClearColor.copy(s.getClearColor(this.tempColor));const b=s.getClearAlpha(this.tempColor),$=s.autoClear;s.setRenderTarget(o),s.autoClear=!1,c=a.clearColor||c,d=a.clearAlpha||d,c!=null&&(s.setClearColor(c),s.setClearAlpha(d||0),s.clear()),this.scene.traverseVisible(j=>{j._SSRPassBackupMaterial=j.material,this._selects.includes(j)?j.material=this.metalnessOnMaterial:j.material=this.metalnessOffMaterial}),s.render(this.scene,this.camera),this.scene.traverseVisible(j=>{j.material=j._SSRPassBackupMaterial}),s.autoClear=$,s.setClearColor(this.originalClearColor),s.setClearAlpha(b)}setSize(s,a){this.width=s,this.height=a,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(s*s+a*a),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(s,a),this.prevRenderTarget.setSize(s,a),this.ssrRenderTarget.setSize(s,a),this.normalRenderTarget.setSize(s,a),this.metalnessRenderTarget.setSize(s,a),this.blurRenderTarget.setSize(s,a),this.blurRenderTarget2.setSize(s,a),this.ssrMaterial.uniforms.resolution.value.set(s,a),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(s,a),this.blurMaterial2.uniforms.resolution.value.set(s,a)}};let SSRPass=_SSRPass;__publicField(SSRPass,"OUTPUT",{Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7});class GLTFLoader extends Loader$2{constructor(a){super(a),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(o){return new GLTFMaterialsClearcoatExtension2(o)}),this.register(function(o){return new GLTFTextureBasisUExtension(o)}),this.register(function(o){return new GLTFTextureWebPExtension(o)}),this.register(function(o){return new GLTFTextureAVIFExtension(o)}),this.register(function(o){return new GLTFMaterialsSheenExtension2(o)}),this.register(function(o){return new GLTFMaterialsTransmissionExtension2(o)}),this.register(function(o){return new GLTFMaterialsVolumeExtension2(o)}),this.register(function(o){return new GLTFMaterialsIorExtension2(o)}),this.register(function(o){return new GLTFMaterialsEmissiveStrengthExtension2(o)}),this.register(function(o){return new GLTFMaterialsSpecularExtension2(o)}),this.register(function(o){return new GLTFMaterialsIridescenceExtension2(o)}),this.register(function(o){return new GLTFMaterialsAnisotropyExtension2(o)}),this.register(function(o){return new GLTFLightsExtension(o)}),this.register(function(o){return new GLTFMeshoptCompression(o)}),this.register(function(o){return new GLTFMeshGpuInstancing(o)})}load(a,o,c,d){const b=this;let $;this.resourcePath!==""?$=this.resourcePath:this.path!==""?$=this.path:$=LoaderUtils.extractUrlBase(a),this.manager.itemStart(a);const j=function(et){d?d(et):console.error(et),b.manager.itemError(a),b.manager.itemEnd(a)},_e=new FileLoader(this.manager);_e.setPath(this.path),_e.setResponseType("arraybuffer"),_e.setRequestHeader(this.requestHeader),_e.setWithCredentials(this.withCredentials),_e.load(a,function(et){try{b.parse(et,$,function(tt){o(tt),b.manager.itemEnd(a)},j)}catch(tt){j(tt)}},c,j)}setDRACOLoader(a){return this.dracoLoader=a,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(a){return this.ktx2Loader=a,this}setMeshoptDecoder(a){return this.meshoptDecoder=a,this}register(a){return this.pluginCallbacks.indexOf(a)===-1&&this.pluginCallbacks.push(a),this}unregister(a){return this.pluginCallbacks.indexOf(a)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a),1),this}parse(a,o,c,d){let b;const $={},j={};if(typeof a=="string")b=JSON.parse(a);else if(a instanceof ArrayBuffer)if(LoaderUtils.decodeText(new Uint8Array(a.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC){try{$[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(a)}catch(tt){d&&d(tt);return}b=JSON.parse($[EXTENSIONS.KHR_BINARY_GLTF].content)}else b=JSON.parse(LoaderUtils.decodeText(new Uint8Array(a)));else b=a;if(b.asset===void 0||b.asset.version[0]<2){d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const _e=new GLTFParser(b,{path:o||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});_e.fileLoader.setRequestHeader(this.requestHeader);for(let et=0;et<this.pluginCallbacks.length;et++){const tt=this.pluginCallbacks[et](_e);j[tt.name]=tt,$[tt.name]=!0}if(b.extensionsUsed)for(let et=0;et<b.extensionsUsed.length;++et){const tt=b.extensionsUsed[et],rt=b.extensionsRequired||[];switch(tt){case EXTENSIONS.KHR_MATERIALS_UNLIT:$[tt]=new GLTFMaterialsUnlitExtension2;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:$[tt]=new GLTFDracoMeshCompressionExtension(b,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:$[tt]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:$[tt]=new GLTFMeshQuantizationExtension;break;default:rt.indexOf(tt)>=0&&j[tt]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+tt+'".')}}_e.setExtensions($),_e.setPlugins(j),_e.parse(c,d)}parseAsync(a,o){const c=this;return new Promise(function(d,b){c.parse(a,o,d,b)})}}function GLTFRegistry(){let s={};return{get:function(a){return s[a]},add:function(a,o){s[a]=o},remove:function(a){delete s[a]},removeAll:function(){s={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const a=this.parser,o=this.parser.json.nodes||[];for(let c=0,d=o.length;c<d;c++){const b=o[c];b.extensions&&b.extensions[this.name]&&b.extensions[this.name].light!==void 0&&a._addNodeRef(this.cache,b.extensions[this.name].light)}}_loadLight(a){const o=this.parser,c="light:"+a;let d=o.cache.get(c);if(d)return d;const b=o.json,_e=((b.extensions&&b.extensions[this.name]||{}).lights||[])[a];let et;const tt=new Color(16777215);_e.color!==void 0&&tt.fromArray(_e.color);const rt=_e.range!==void 0?_e.range:0;switch(_e.type){case"directional":et=new DirectionalLight(tt),et.target.position.set(0,0,-1),et.add(et.target);break;case"point":et=new PointLight(tt),et.distance=rt;break;case"spot":et=new SpotLight(tt),et.distance=rt,_e.spot=_e.spot||{},_e.spot.innerConeAngle=_e.spot.innerConeAngle!==void 0?_e.spot.innerConeAngle:0,_e.spot.outerConeAngle=_e.spot.outerConeAngle!==void 0?_e.spot.outerConeAngle:Math.PI/4,et.angle=_e.spot.outerConeAngle,et.penumbra=1-_e.spot.innerConeAngle/_e.spot.outerConeAngle,et.target.position.set(0,0,-1),et.add(et.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+_e.type)}return et.position.set(0,0,0),et.decay=2,assignExtrasToUserData(et,_e),_e.intensity!==void 0&&(et.intensity=_e.intensity),et.name=o.createUniqueName(_e.name||"light_"+a),d=Promise.resolve(et),o.cache.add(c,d),d}getDependency(a,o){if(a==="light")return this._loadLight(o)}createNodeAttachment(a){const o=this,c=this.parser,b=c.json.nodes[a],j=(b.extensions&&b.extensions[this.name]||{}).light;return j===void 0?null:this._loadLight(j).then(function(_e){return c._getNodeRef(o.cache,j,_e)})}}class GLTFMaterialsUnlitExtension2{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(a,o,c){const d=[];a.color=new Color(1,1,1),a.opacity=1;const b=o.pbrMetallicRoughness;if(b){if(Array.isArray(b.baseColorFactor)){const $=b.baseColorFactor;a.color.fromArray($),a.opacity=$[3]}b.baseColorTexture!==void 0&&d.push(c.assignTexture(a,"map",b.baseColorTexture,3001))}return Promise.all(d)}}class GLTFMaterialsEmissiveStrengthExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(a,o){const d=this.parser.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=d.extensions[this.name].emissiveStrength;return b!==void 0&&(o.emissiveIntensity=b),Promise.resolve()}}class GLTFMaterialsClearcoatExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];if($.clearcoatFactor!==void 0&&(o.clearcoat=$.clearcoatFactor),$.clearcoatTexture!==void 0&&b.push(c.assignTexture(o,"clearcoatMap",$.clearcoatTexture)),$.clearcoatRoughnessFactor!==void 0&&(o.clearcoatRoughness=$.clearcoatRoughnessFactor),$.clearcoatRoughnessTexture!==void 0&&b.push(c.assignTexture(o,"clearcoatRoughnessMap",$.clearcoatRoughnessTexture)),$.clearcoatNormalTexture!==void 0&&(b.push(c.assignTexture(o,"clearcoatNormalMap",$.clearcoatNormalTexture)),$.clearcoatNormalTexture.scale!==void 0)){const j=$.clearcoatNormalTexture.scale;o.clearcoatNormalScale=new Vector2$1(j,j)}return Promise.all(b)}}class GLTFMaterialsIridescenceExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];return $.iridescenceFactor!==void 0&&(o.iridescence=$.iridescenceFactor),$.iridescenceTexture!==void 0&&b.push(c.assignTexture(o,"iridescenceMap",$.iridescenceTexture)),$.iridescenceIor!==void 0&&(o.iridescenceIOR=$.iridescenceIor),o.iridescenceThicknessRange===void 0&&(o.iridescenceThicknessRange=[100,400]),$.iridescenceThicknessMinimum!==void 0&&(o.iridescenceThicknessRange[0]=$.iridescenceThicknessMinimum),$.iridescenceThicknessMaximum!==void 0&&(o.iridescenceThicknessRange[1]=$.iridescenceThicknessMaximum),$.iridescenceThicknessTexture!==void 0&&b.push(c.assignTexture(o,"iridescenceThicknessMap",$.iridescenceThicknessTexture)),Promise.all(b)}}class GLTFMaterialsSheenExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[];o.sheenColor=new Color(0,0,0),o.sheenRoughness=0,o.sheen=1;const $=d.extensions[this.name];return $.sheenColorFactor!==void 0&&o.sheenColor.fromArray($.sheenColorFactor),$.sheenRoughnessFactor!==void 0&&(o.sheenRoughness=$.sheenRoughnessFactor),$.sheenColorTexture!==void 0&&b.push(c.assignTexture(o,"sheenColorMap",$.sheenColorTexture,3001)),$.sheenRoughnessTexture!==void 0&&b.push(c.assignTexture(o,"sheenRoughnessMap",$.sheenRoughnessTexture)),Promise.all(b)}}class GLTFMaterialsTransmissionExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];return $.transmissionFactor!==void 0&&(o.transmission=$.transmissionFactor),$.transmissionTexture!==void 0&&b.push(c.assignTexture(o,"transmissionMap",$.transmissionTexture)),Promise.all(b)}}class GLTFMaterialsVolumeExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];o.thickness=$.thicknessFactor!==void 0?$.thicknessFactor:0,$.thicknessTexture!==void 0&&b.push(c.assignTexture(o,"thicknessMap",$.thicknessTexture)),o.attenuationDistance=$.attenuationDistance||1/0;const j=$.attenuationColor||[1,1,1];return o.attenuationColor=new Color(j[0],j[1],j[2]),Promise.all(b)}}class GLTFMaterialsIorExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const d=this.parser.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=d.extensions[this.name];return o.ior=b.ior!==void 0?b.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];o.specularIntensity=$.specularFactor!==void 0?$.specularFactor:1,$.specularTexture!==void 0&&b.push(c.assignTexture(o,"specularIntensityMap",$.specularTexture));const j=$.specularColorFactor||[1,1,1];return o.specularColor=new Color(j[0],j[1],j[2]),$.specularColorTexture!==void 0&&b.push(c.assignTexture(o,"specularColorMap",$.specularColorTexture,3001)),Promise.all(b)}}class GLTFMaterialsAnisotropyExtension2{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(a){const c=this.parser.json.materials[a];return!c.extensions||!c.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(a,o){const c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const b=[],$=d.extensions[this.name];return $.anisotropyStrength!==void 0&&(o.anisotropy=$.anisotropyStrength),$.anisotropyRotation!==void 0&&(o.anisotropyRotation=$.anisotropyRotation),$.anisotropyTexture!==void 0&&b.push(c.assignTexture(o,"anisotropyMap",$.anisotropyTexture)),Promise.all(b)}}class GLTFTextureBasisUExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(a){const o=this.parser,c=o.json,d=c.textures[a];if(!d.extensions||!d.extensions[this.name])return null;const b=d.extensions[this.name],$=o.options.ktx2Loader;if(!$){if(c.extensionsRequired&&c.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return o.loadTextureImage(a,b.source,$)}}class GLTFTextureWebPExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(a){const o=this.name,c=this.parser,d=c.json,b=d.textures[a];if(!b.extensions||!b.extensions[o])return null;const $=b.extensions[o],j=d.images[$.source];let _e=c.textureLoader;if(j.uri){const et=c.options.manager.getHandler(j.uri);et!==null&&(_e=et)}return this.detectSupport().then(function(et){if(et)return c.loadTextureImage(a,$.source,_e);if(d.extensionsRequired&&d.extensionsRequired.indexOf(o)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return c.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){const o=new Image;o.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",o.onload=o.onerror=function(){a(o.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(a){this.parser=a,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(a){const o=this.name,c=this.parser,d=c.json,b=d.textures[a];if(!b.extensions||!b.extensions[o])return null;const $=b.extensions[o],j=d.images[$.source];let _e=c.textureLoader;if(j.uri){const et=c.options.manager.getHandler(j.uri);et!==null&&(_e=et)}return this.detectSupport().then(function(et){if(et)return c.loadTextureImage(a,$.source,_e);if(d.extensionsRequired&&d.extensionsRequired.indexOf(o)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return c.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){const o=new Image;o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",o.onload=o.onerror=function(){a(o.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(a){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=a}loadBufferView(a){const o=this.parser.json,c=o.bufferViews[a];if(c.extensions&&c.extensions[this.name]){const d=c.extensions[this.name],b=this.parser.getDependency("buffer",d.buffer),$=this.parser.options.meshoptDecoder;if(!$||!$.supported){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return b.then(function(j){const _e=d.byteOffset||0,et=d.byteLength||0,tt=d.count,rt=d.byteStride,nt=new Uint8Array(j,_e,et);return $.decodeGltfBufferAsync?$.decodeGltfBufferAsync(tt,rt,nt,d.mode,d.filter).then(function(it){return it.buffer}):$.ready.then(function(){const it=new ArrayBuffer(tt*rt);return $.decodeGltfBuffer(new Uint8Array(it),tt,rt,nt,d.mode,d.filter),it})})}else return null}}class GLTFMeshGpuInstancing{constructor(a){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=a}createNodeMesh(a){const o=this.parser.json,c=o.nodes[a];if(!c.extensions||!c.extensions[this.name]||c.mesh===void 0)return null;const d=o.meshes[c.mesh];for(const et of d.primitives)if(et.mode!==WEBGL_CONSTANTS.TRIANGLES&&et.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&et.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&et.mode!==void 0)return null;const $=c.extensions[this.name].attributes,j=[],_e={};for(const et in $)j.push(this.parser.getDependency("accessor",$[et]).then(tt=>(_e[et]=tt,_e[et])));return j.length<1?null:(j.push(this.parser.createNodeMesh(a)),Promise.all(j).then(et=>{const tt=et.pop(),rt=tt.isGroup?tt.children:[tt],nt=et[0].count,it=[];for(const at of rt){const ct=new Matrix4,st=new Vector3,ot=new Quaternion,ht=new Vector3(1,1,1),dt=new InstancedMesh(at.geometry,at.material,nt);for(let ft=0;ft<nt;ft++)_e.TRANSLATION&&st.fromBufferAttribute(_e.TRANSLATION,ft),_e.ROTATION&&ot.fromBufferAttribute(_e.ROTATION,ft),_e.SCALE&&ht.fromBufferAttribute(_e.SCALE,ft),dt.setMatrixAt(ft,ct.compose(st,ot,ht));for(const ft in _e)ft!=="TRANSLATION"&&ft!=="ROTATION"&&ft!=="SCALE"&&at.geometry.setAttribute(ft,_e[ft]);Object3D.prototype.copy.call(dt,at),this.parser.assignFinalMaterial(dt),it.push(dt)}return tt.isGroup?(tt.clear(),tt.add(...it),tt):it[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(a){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const o=new DataView(a,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(a.slice(0,4))),version:o.getUint32(4,!0),length:o.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const c=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,d=new DataView(a,BINARY_EXTENSION_HEADER_LENGTH);let b=0;for(;b<c;){const $=d.getUint32(b,!0);b+=4;const j=d.getUint32(b,!0);if(b+=4,j===BINARY_EXTENSION_CHUNK_TYPES.JSON){const _e=new Uint8Array(a,BINARY_EXTENSION_HEADER_LENGTH+b,$);this.content=LoaderUtils.decodeText(_e)}else if(j===BINARY_EXTENSION_CHUNK_TYPES.BIN){const _e=BINARY_EXTENSION_HEADER_LENGTH+b;this.body=a.slice(_e,_e+$)}b+=$}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(a,o){if(!o)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=o,this.dracoLoader.preload()}decodePrimitive(a,o){const c=this.json,d=this.dracoLoader,b=a.extensions[this.name].bufferView,$=a.extensions[this.name].attributes,j={},_e={},et={};for(const tt in $){const rt=ATTRIBUTES[tt]||tt.toLowerCase();j[rt]=$[tt]}for(const tt in a.attributes){const rt=ATTRIBUTES[tt]||tt.toLowerCase();if($[tt]!==void 0){const nt=c.accessors[a.attributes[tt]],it=WEBGL_COMPONENT_TYPES[nt.componentType];et[rt]=it.name,_e[rt]=nt.normalized===!0}}return o.getDependency("bufferView",b).then(function(tt){return new Promise(function(rt){d.decodeDracoFile(tt,function(nt){for(const it in nt.attributes){const at=nt.attributes[it],ct=_e[it];ct!==void 0&&(at.normalized=ct)}rt(nt)},j,et)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(a,o){return(o.texCoord===void 0||o.texCoord===a.channel)&&o.offset===void 0&&o.rotation===void 0&&o.scale===void 0||(a=a.clone(),o.texCoord!==void 0&&(a.channel=o.texCoord),o.offset!==void 0&&a.offset.fromArray(o.offset),o.rotation!==void 0&&(a.rotation=o.rotation),o.scale!==void 0&&a.repeat.fromArray(o.scale),a.needsUpdate=!0),a}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(a,o,c,d){super(a,o,c,d)}copySampleValue_(a){const o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,b=a*d*3+d;for(let $=0;$!==d;$++)o[$]=c[b+$];return o}interpolate_(a,o,c,d){const b=this.resultBuffer,$=this.sampleValues,j=this.valueSize,_e=j*2,et=j*3,tt=d-o,rt=(c-o)/tt,nt=rt*rt,it=nt*rt,at=a*et,ct=at-et,st=-2*it+3*nt,ot=it-nt,ht=1-st,dt=ot-nt+rt;for(let ft=0;ft!==j;ft++){const mt=$[ct+ft+j],gt=$[ct+ft+_e]*tt,vt=$[at+ft+j],yt=$[at+ft]*tt;b[ft]=ht*mt+dt*gt+st*vt+ot*yt}return b}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(a,o,c,d){const b=super.interpolate_(a,o,c,d);return _q.fromArray(b).normalize().toArray(b),b}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter$1,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter$1},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping$1,33648:MirroredRepeatWrapping$1,10497:RepeatWrapping$1},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...REVISION.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),s.DefaultMaterial}function addUnknownExtensionsToUserData(s,a,o){for(const c in o.extensions)s[c]===void 0&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[c]=o.extensions[c])}function assignExtrasToUserData(s,a){a.extras!==void 0&&(typeof a.extras=="object"?Object.assign(s.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function addMorphTargets(s,a,o){let c=!1,d=!1,b=!1;for(let et=0,tt=a.length;et<tt;et++){const rt=a[et];if(rt.POSITION!==void 0&&(c=!0),rt.NORMAL!==void 0&&(d=!0),rt.COLOR_0!==void 0&&(b=!0),c&&d&&b)break}if(!c&&!d&&!b)return Promise.resolve(s);const $=[],j=[],_e=[];for(let et=0,tt=a.length;et<tt;et++){const rt=a[et];if(c){const nt=rt.POSITION!==void 0?o.getDependency("accessor",rt.POSITION):s.attributes.position;$.push(nt)}if(d){const nt=rt.NORMAL!==void 0?o.getDependency("accessor",rt.NORMAL):s.attributes.normal;j.push(nt)}if(b){const nt=rt.COLOR_0!==void 0?o.getDependency("accessor",rt.COLOR_0):s.attributes.color;_e.push(nt)}}return Promise.all([Promise.all($),Promise.all(j),Promise.all(_e)]).then(function(et){const tt=et[0],rt=et[1],nt=et[2];return c&&(s.morphAttributes.position=tt),d&&(s.morphAttributes.normal=rt),b&&(s.morphAttributes.color=nt),s.morphTargetsRelative=!0,s})}function updateMorphTargets(s,a){if(s.updateMorphTargets(),a.weights!==void 0)for(let o=0,c=a.weights.length;o<c;o++)s.morphTargetInfluences[o]=a.weights[o];if(a.extras&&Array.isArray(a.extras.targetNames)){const o=a.extras.targetNames;if(s.morphTargetInfluences.length===o.length){s.morphTargetDictionary={};for(let c=0,d=o.length;c<d;c++)s.morphTargetDictionary[o[c]]=c}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(s){let a;const o=s.extensions&&s.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(o?a="draco:"+o.bufferView+":"+o.indices+":"+createAttributesKey(o.attributes):a=s.indices+":"+createAttributesKey(s.attributes)+":"+s.mode,s.targets!==void 0)for(let c=0,d=s.targets.length;c<d;c++)a+=":"+createAttributesKey(s.targets[c]);return a}function createAttributesKey(s){let a="";const o=Object.keys(s).sort();for(let c=0,d=o.length;c<d;c++)a+=o[c]+":"+s[o[c]]+";";return a}function getNormalizedComponentScale(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(a={},o={}){this.json=a,this.extensions={},this.plugins={},this.options=o,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let c=!1,d=!1,b=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,d=navigator.userAgent.indexOf("Firefox")>-1,b=d?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||c||d&&b<98?this.textureLoader=new TextureLoader$1(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(a){this.extensions=a}setPlugins(a){this.plugins=a}parse(a,o){const c=this,d=this.json,b=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function($){return $._markDefs&&$._markDefs()}),Promise.all(this._invokeAll(function($){return $.beforeRoot&&$.beforeRoot()})).then(function(){return Promise.all([c.getDependencies("scene"),c.getDependencies("animation"),c.getDependencies("camera")])}).then(function($){const j={scene:$[0][d.scene||0],scenes:$[0],animations:$[1],cameras:$[2],asset:d.asset,parser:c,userData:{}};addUnknownExtensionsToUserData(b,j,d),assignExtrasToUserData(j,d),Promise.all(c._invokeAll(function(_e){return _e.afterRoot&&_e.afterRoot(j)})).then(function(){a(j)})}).catch(o)}_markDefs(){const a=this.json.nodes||[],o=this.json.skins||[],c=this.json.meshes||[];for(let d=0,b=o.length;d<b;d++){const $=o[d].joints;for(let j=0,_e=$.length;j<_e;j++)a[$[j]].isBone=!0}for(let d=0,b=a.length;d<b;d++){const $=a[d];$.mesh!==void 0&&(this._addNodeRef(this.meshCache,$.mesh),$.skin!==void 0&&(c[$.mesh].isSkinnedMesh=!0)),$.camera!==void 0&&this._addNodeRef(this.cameraCache,$.camera)}}_addNodeRef(a,o){o!==void 0&&(a.refs[o]===void 0&&(a.refs[o]=a.uses[o]=0),a.refs[o]++)}_getNodeRef(a,o,c){if(a.refs[o]<=1)return c;const d=c.clone(),b=($,j)=>{const _e=this.associations.get($);_e!=null&&this.associations.set(j,_e);for(const[et,tt]of $.children.entries())b(tt,j.children[et])};return b(c,d),d.name+="_instance_"+a.uses[o]++,d}_invokeOne(a){const o=Object.values(this.plugins);o.push(this);for(let c=0;c<o.length;c++){const d=a(o[c]);if(d)return d}return null}_invokeAll(a){const o=Object.values(this.plugins);o.unshift(this);const c=[];for(let d=0;d<o.length;d++){const b=a(o[d]);b&&c.push(b)}return c}getDependency(a,o){const c=a+":"+o;let d=this.cache.get(c);if(!d){switch(a){case"scene":d=this.loadScene(o);break;case"node":d=this._invokeOne(function(b){return b.loadNode&&b.loadNode(o)});break;case"mesh":d=this._invokeOne(function(b){return b.loadMesh&&b.loadMesh(o)});break;case"accessor":d=this.loadAccessor(o);break;case"bufferView":d=this._invokeOne(function(b){return b.loadBufferView&&b.loadBufferView(o)});break;case"buffer":d=this.loadBuffer(o);break;case"material":d=this._invokeOne(function(b){return b.loadMaterial&&b.loadMaterial(o)});break;case"texture":d=this._invokeOne(function(b){return b.loadTexture&&b.loadTexture(o)});break;case"skin":d=this.loadSkin(o);break;case"animation":d=this._invokeOne(function(b){return b.loadAnimation&&b.loadAnimation(o)});break;case"camera":d=this.loadCamera(o);break;default:if(d=this._invokeOne(function(b){return b!=this&&b.getDependency&&b.getDependency(a,o)}),!d)throw new Error("Unknown type: "+a);break}this.cache.add(c,d)}return d}getDependencies(a){let o=this.cache.get(a);if(!o){const c=this,d=this.json[a+(a==="mesh"?"es":"s")]||[];o=Promise.all(d.map(function(b,$){return c.getDependency(a,$)})),this.cache.add(a,o)}return o}loadBuffer(a){const o=this.json.buffers[a],c=this.fileLoader;if(o.type&&o.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+o.type+" buffer type is not supported.");if(o.uri===void 0&&a===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(b,$){c.load(LoaderUtils.resolveURL(o.uri,d.path),b,void 0,function(){$(new Error('THREE.GLTFLoader: Failed to load buffer "'+o.uri+'".'))})})}loadBufferView(a){const o=this.json.bufferViews[a];return this.getDependency("buffer",o.buffer).then(function(c){const d=o.byteLength||0,b=o.byteOffset||0;return c.slice(b,b+d)})}loadAccessor(a){const o=this,c=this.json,d=this.json.accessors[a];if(d.bufferView===void 0&&d.sparse===void 0){const $=WEBGL_TYPE_SIZES[d.type],j=WEBGL_COMPONENT_TYPES[d.componentType],_e=d.normalized===!0,et=new j(d.count*$);return Promise.resolve(new BufferAttribute(et,$,_e))}const b=[];return d.bufferView!==void 0?b.push(this.getDependency("bufferView",d.bufferView)):b.push(null),d.sparse!==void 0&&(b.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),b.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(b).then(function($){const j=$[0],_e=WEBGL_TYPE_SIZES[d.type],et=WEBGL_COMPONENT_TYPES[d.componentType],tt=et.BYTES_PER_ELEMENT,rt=tt*_e,nt=d.byteOffset||0,it=d.bufferView!==void 0?c.bufferViews[d.bufferView].byteStride:void 0,at=d.normalized===!0;let ct,st;if(it&&it!==rt){const ot=Math.floor(nt/it),ht="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+ot+":"+d.count;let dt=o.cache.get(ht);dt||(ct=new et(j,ot*it,d.count*it/tt),dt=new InterleavedBuffer(ct,it/tt),o.cache.add(ht,dt)),st=new InterleavedBufferAttribute(dt,_e,nt%it/tt,at)}else j===null?ct=new et(d.count*_e):ct=new et(j,nt,d.count*_e),st=new BufferAttribute(ct,_e,at);if(d.sparse!==void 0){const ot=WEBGL_TYPE_SIZES.SCALAR,ht=WEBGL_COMPONENT_TYPES[d.sparse.indices.componentType],dt=d.sparse.indices.byteOffset||0,ft=d.sparse.values.byteOffset||0,mt=new ht($[1],dt,d.sparse.count*ot),gt=new et($[2],ft,d.sparse.count*_e);j!==null&&(st=new BufferAttribute(st.array.slice(),st.itemSize,st.normalized));for(let vt=0,yt=mt.length;vt<yt;vt++){const Et=mt[vt];if(st.setX(Et,gt[vt*_e]),_e>=2&&st.setY(Et,gt[vt*_e+1]),_e>=3&&st.setZ(Et,gt[vt*_e+2]),_e>=4&&st.setW(Et,gt[vt*_e+3]),_e>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return st})}loadTexture(a){const o=this.json,c=this.options,b=o.textures[a].source,$=o.images[b];let j=this.textureLoader;if($.uri){const _e=c.manager.getHandler($.uri);_e!==null&&(j=_e)}return this.loadTextureImage(a,b,j)}loadTextureImage(a,o,c){const d=this,b=this.json,$=b.textures[a],j=b.images[o],_e=(j.uri||j.bufferView)+":"+$.sampler;if(this.textureCache[_e])return this.textureCache[_e];const et=this.loadImageSource(o,c).then(function(tt){tt.flipY=!1,tt.name=$.name||j.name||"",tt.name===""&&typeof j.uri=="string"&&j.uri.startsWith("data:image/")===!1&&(tt.name=j.uri);const nt=(b.samplers||{})[$.sampler]||{};return tt.magFilter=WEBGL_FILTERS[nt.magFilter]||LinearFilter$1,tt.minFilter=WEBGL_FILTERS[nt.minFilter]||LinearMipmapLinearFilter$1,tt.wrapS=WEBGL_WRAPPINGS[nt.wrapS]||RepeatWrapping$1,tt.wrapT=WEBGL_WRAPPINGS[nt.wrapT]||RepeatWrapping$1,d.associations.set(tt,{textures:a}),tt}).catch(function(){return null});return this.textureCache[_e]=et,et}loadImageSource(a,o){const c=this,d=this.json,b=this.options;if(this.sourceCache[a]!==void 0)return this.sourceCache[a].then(rt=>rt.clone());const $=d.images[a],j=self.URL||self.webkitURL;let _e=$.uri||"",et=!1;if($.bufferView!==void 0)_e=c.getDependency("bufferView",$.bufferView).then(function(rt){et=!0;const nt=new Blob([rt],{type:$.mimeType});return _e=j.createObjectURL(nt),_e});else if($.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+a+" is missing URI and bufferView");const tt=Promise.resolve(_e).then(function(rt){return new Promise(function(nt,it){let at=nt;o.isImageBitmapLoader===!0&&(at=function(ct){const st=new Texture$1(ct);st.needsUpdate=!0,nt(st)}),o.load(LoaderUtils.resolveURL(rt,b.path),at,void 0,it)})}).then(function(rt){return et===!0&&j.revokeObjectURL(_e),rt.userData.mimeType=$.mimeType||getImageURIMimeType($.uri),rt}).catch(function(rt){throw console.error("THREE.GLTFLoader: Couldn't load texture",_e),rt});return this.sourceCache[a]=tt,tt}assignTexture(a,o,c,d){const b=this;return this.getDependency("texture",c.index).then(function($){if(!$)return null;if(c.texCoord!==void 0&&c.texCoord>0&&($=$.clone(),$.channel=c.texCoord),b.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const j=c.extensions!==void 0?c.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(j){const _e=b.associations.get($);$=b.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture($,j),b.associations.set($,_e)}}return d!==void 0&&("colorSpace"in $?$.colorSpace=d===3001?"srgb":"srgb-linear":$.encoding=d),a[o]=$,$})}assignFinalMaterial(a){const o=a.geometry;let c=a.material;const d=o.attributes.tangent===void 0,b=o.attributes.color!==void 0,$=o.attributes.normal===void 0;if(a.isPoints){const j="PointsMaterial:"+c.uuid;let _e=this.cache.get(j);_e||(_e=new PointsMaterial,Material.prototype.copy.call(_e,c),_e.color.copy(c.color),_e.map=c.map,_e.sizeAttenuation=!1,this.cache.add(j,_e)),c=_e}else if(a.isLine){const j="LineBasicMaterial:"+c.uuid;let _e=this.cache.get(j);_e||(_e=new LineBasicMaterial,Material.prototype.copy.call(_e,c),_e.color.copy(c.color),_e.map=c.map,this.cache.add(j,_e)),c=_e}if(d||b||$){let j="ClonedMaterial:"+c.uuid+":";d&&(j+="derivative-tangents:"),b&&(j+="vertex-colors:"),$&&(j+="flat-shading:");let _e=this.cache.get(j);_e||(_e=c.clone(),b&&(_e.vertexColors=!0),$&&(_e.flatShading=!0),d&&(_e.normalScale&&(_e.normalScale.y*=-1),_e.clearcoatNormalScale&&(_e.clearcoatNormalScale.y*=-1)),this.cache.add(j,_e),this.associations.set(_e,this.associations.get(c))),c=_e}a.material=c}getMaterialType(){return MeshStandardMaterial}loadMaterial(a){const o=this,c=this.json,d=this.extensions,b=c.materials[a];let $;const j={},_e=b.extensions||{},et=[];if(_e[EXTENSIONS.KHR_MATERIALS_UNLIT]){const rt=d[EXTENSIONS.KHR_MATERIALS_UNLIT];$=rt.getMaterialType(),et.push(rt.extendParams(j,b,o))}else{const rt=b.pbrMetallicRoughness||{};if(j.color=new Color(1,1,1),j.opacity=1,Array.isArray(rt.baseColorFactor)){const nt=rt.baseColorFactor;j.color.fromArray(nt),j.opacity=nt[3]}rt.baseColorTexture!==void 0&&et.push(o.assignTexture(j,"map",rt.baseColorTexture,3001)),j.metalness=rt.metallicFactor!==void 0?rt.metallicFactor:1,j.roughness=rt.roughnessFactor!==void 0?rt.roughnessFactor:1,rt.metallicRoughnessTexture!==void 0&&(et.push(o.assignTexture(j,"metalnessMap",rt.metallicRoughnessTexture)),et.push(o.assignTexture(j,"roughnessMap",rt.metallicRoughnessTexture))),$=this._invokeOne(function(nt){return nt.getMaterialType&&nt.getMaterialType(a)}),et.push(Promise.all(this._invokeAll(function(nt){return nt.extendMaterialParams&&nt.extendMaterialParams(a,j)})))}b.doubleSided===!0&&(j.side=DoubleSide);const tt=b.alphaMode||ALPHA_MODES.OPAQUE;if(tt===ALPHA_MODES.BLEND?(j.transparent=!0,j.depthWrite=!1):(j.transparent=!1,tt===ALPHA_MODES.MASK&&(j.alphaTest=b.alphaCutoff!==void 0?b.alphaCutoff:.5)),b.normalTexture!==void 0&&$!==MeshBasicMaterial&&(et.push(o.assignTexture(j,"normalMap",b.normalTexture)),j.normalScale=new Vector2$1(1,1),b.normalTexture.scale!==void 0)){const rt=b.normalTexture.scale;j.normalScale.set(rt,rt)}return b.occlusionTexture!==void 0&&$!==MeshBasicMaterial&&(et.push(o.assignTexture(j,"aoMap",b.occlusionTexture)),b.occlusionTexture.strength!==void 0&&(j.aoMapIntensity=b.occlusionTexture.strength)),b.emissiveFactor!==void 0&&$!==MeshBasicMaterial&&(j.emissive=new Color().fromArray(b.emissiveFactor)),b.emissiveTexture!==void 0&&$!==MeshBasicMaterial&&et.push(o.assignTexture(j,"emissiveMap",b.emissiveTexture,3001)),Promise.all(et).then(function(){const rt=new $(j);return b.name&&(rt.name=b.name),assignExtrasToUserData(rt,b),o.associations.set(rt,{materials:a}),b.extensions&&addUnknownExtensionsToUserData(d,rt,b),rt})}createUniqueName(a){const o=PropertyBinding.sanitizeNodeName(a||"");return o in this.nodeNamesUsed?o+"_"+ ++this.nodeNamesUsed[o]:(this.nodeNamesUsed[o]=0,o)}loadGeometries(a){const o=this,c=this.extensions,d=this.primitiveCache;function b(j){return c[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(j,o).then(function(_e){return addPrimitiveAttributes(_e,j,o)})}const $=[];for(let j=0,_e=a.length;j<_e;j++){const et=a[j],tt=createPrimitiveKey(et),rt=d[tt];if(rt)$.push(rt.promise);else{let nt;et.extensions&&et.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?nt=b(et):nt=addPrimitiveAttributes(new BufferGeometry,et,o),d[tt]={primitive:et,promise:nt},$.push(nt)}}return Promise.all($)}loadMesh(a){const o=this,c=this.json,d=this.extensions,b=c.meshes[a],$=b.primitives,j=[];for(let _e=0,et=$.length;_e<et;_e++){const tt=$[_e].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",$[_e].material);j.push(tt)}return j.push(o.loadGeometries($)),Promise.all(j).then(function(_e){const et=_e.slice(0,_e.length-1),tt=_e[_e.length-1],rt=[];for(let it=0,at=tt.length;it<at;it++){const ct=tt[it],st=$[it];let ot;const ht=et[it];if(st.mode===WEBGL_CONSTANTS.TRIANGLES||st.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||st.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||st.mode===void 0)ot=b.isSkinnedMesh===!0?new SkinnedMesh(ct,ht):new Mesh(ct,ht),ot.isSkinnedMesh===!0&&ot.normalizeSkinWeights(),st.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?ot.geometry=toTrianglesDrawMode(ot.geometry,TriangleStripDrawMode):st.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(ot.geometry=toTrianglesDrawMode(ot.geometry,TriangleFanDrawMode));else if(st.mode===WEBGL_CONSTANTS.LINES)ot=new LineSegments(ct,ht);else if(st.mode===WEBGL_CONSTANTS.LINE_STRIP)ot=new Line(ct,ht);else if(st.mode===WEBGL_CONSTANTS.LINE_LOOP)ot=new LineLoop(ct,ht);else if(st.mode===WEBGL_CONSTANTS.POINTS)ot=new Points(ct,ht);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+st.mode);Object.keys(ot.geometry.morphAttributes).length>0&&updateMorphTargets(ot,b),ot.name=o.createUniqueName(b.name||"mesh_"+a),assignExtrasToUserData(ot,b),st.extensions&&addUnknownExtensionsToUserData(d,ot,st),o.assignFinalMaterial(ot),rt.push(ot)}for(let it=0,at=rt.length;it<at;it++)o.associations.set(rt[it],{meshes:a,primitives:it});if(rt.length===1)return b.extensions&&addUnknownExtensionsToUserData(d,rt[0],b),rt[0];const nt=new Group;b.extensions&&addUnknownExtensionsToUserData(d,nt,b),o.associations.set(nt,{meshes:a});for(let it=0,at=rt.length;it<at;it++)nt.add(rt[it]);return nt})}loadCamera(a){let o;const c=this.json.cameras[a],d=c[c.type];if(!d){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return c.type==="perspective"?o=new PerspectiveCamera(MathUtils.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):c.type==="orthographic"&&(o=new OrthographicCamera(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),c.name&&(o.name=this.createUniqueName(c.name)),assignExtrasToUserData(o,c),Promise.resolve(o)}loadSkin(a){const o=this.json.skins[a],c=[];for(let d=0,b=o.joints.length;d<b;d++)c.push(this._loadNodeShallow(o.joints[d]));return o.inverseBindMatrices!==void 0?c.push(this.getDependency("accessor",o.inverseBindMatrices)):c.push(null),Promise.all(c).then(function(d){const b=d.pop(),$=d,j=[],_e=[];for(let et=0,tt=$.length;et<tt;et++){const rt=$[et];if(rt){j.push(rt);const nt=new Matrix4;b!==null&&nt.fromArray(b.array,et*16),_e.push(nt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[et])}return new Skeleton(j,_e)})}loadAnimation(a){const c=this.json.animations[a],d=c.name?c.name:"animation_"+a,b=[],$=[],j=[],_e=[],et=[];for(let tt=0,rt=c.channels.length;tt<rt;tt++){const nt=c.channels[tt],it=c.samplers[nt.sampler],at=nt.target,ct=at.node,st=c.parameters!==void 0?c.parameters[it.input]:it.input,ot=c.parameters!==void 0?c.parameters[it.output]:it.output;at.node!==void 0&&(b.push(this.getDependency("node",ct)),$.push(this.getDependency("accessor",st)),j.push(this.getDependency("accessor",ot)),_e.push(it),et.push(at))}return Promise.all([Promise.all(b),Promise.all($),Promise.all(j),Promise.all(_e),Promise.all(et)]).then(function(tt){const rt=tt[0],nt=tt[1],it=tt[2],at=tt[3],ct=tt[4],st=[];for(let ot=0,ht=rt.length;ot<ht;ot++){const dt=rt[ot],ft=nt[ot],mt=it[ot],gt=at[ot],vt=ct[ot];if(dt===void 0)continue;dt.updateMatrix();let yt;switch(PATH_PROPERTIES[vt.path]){case PATH_PROPERTIES.weights:yt=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:yt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:yt=VectorKeyframeTrack;break}const Et=dt.name?dt.name:dt.uuid,St=gt.interpolation!==void 0?INTERPOLATION[gt.interpolation]:InterpolateLinear,Ct=[];PATH_PROPERTIES[vt.path]===PATH_PROPERTIES.weights?dt.traverse(function(_t){_t.morphTargetInfluences&&Ct.push(_t.name?_t.name:_t.uuid)}):Ct.push(Et);let wt=mt.array;if(mt.normalized){const _t=getNormalizedComponentScale(wt.constructor),Tt=new Float32Array(wt.length);for(let Mt=0,Bt=wt.length;Mt<Bt;Mt++)Tt[Mt]=wt[Mt]*_t;wt=Tt}for(let _t=0,Tt=Ct.length;_t<Tt;_t++){const Mt=new yt(Ct[_t]+"."+PATH_PROPERTIES[vt.path],ft.array,wt,St);gt.interpolation==="CUBICSPLINE"&&(Mt.createInterpolant=function(Rt){const bt=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new bt(this.times,this.values,this.getValueSize()/3,Rt)},Mt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),st.push(Mt)}}return new AnimationClip(d,void 0,st)})}createNodeMesh(a){const o=this.json,c=this,d=o.nodes[a];return d.mesh===void 0?null:c.getDependency("mesh",d.mesh).then(function(b){const $=c._getNodeRef(c.meshCache,d.mesh,b);return d.weights!==void 0&&$.traverse(function(j){if(j.isMesh)for(let _e=0,et=d.weights.length;_e<et;_e++)j.morphTargetInfluences[_e]=d.weights[_e]}),$})}loadNode(a){const o=this.json,c=this,d=o.nodes[a],b=c._loadNodeShallow(a),$=[],j=d.children||[];for(let et=0,tt=j.length;et<tt;et++)$.push(c.getDependency("node",j[et]));const _e=d.skin===void 0?Promise.resolve(null):c.getDependency("skin",d.skin);return Promise.all([b,Promise.all($),_e]).then(function(et){const tt=et[0],rt=et[1],nt=et[2];nt!==null&&tt.traverse(function(it){it.isSkinnedMesh&&it.bind(nt,_identityMatrix)});for(let it=0,at=rt.length;it<at;it++)tt.add(rt[it]);return tt})}_loadNodeShallow(a){const o=this.json,c=this.extensions,d=this;if(this.nodeCache[a]!==void 0)return this.nodeCache[a];const b=o.nodes[a],$=b.name?d.createUniqueName(b.name):"",j=[],_e=d._invokeOne(function(et){return et.createNodeMesh&&et.createNodeMesh(a)});return _e&&j.push(_e),b.camera!==void 0&&j.push(d.getDependency("camera",b.camera).then(function(et){return d._getNodeRef(d.cameraCache,b.camera,et)})),d._invokeAll(function(et){return et.createNodeAttachment&&et.createNodeAttachment(a)}).forEach(function(et){j.push(et)}),this.nodeCache[a]=Promise.all(j).then(function(et){let tt;if(b.isBone===!0?tt=new Bone:et.length>1?tt=new Group:et.length===1?tt=et[0]:tt=new Object3D,tt!==et[0])for(let rt=0,nt=et.length;rt<nt;rt++)tt.add(et[rt]);if(b.name&&(tt.userData.name=b.name,tt.name=$),assignExtrasToUserData(tt,b),b.extensions&&addUnknownExtensionsToUserData(c,tt,b),b.matrix!==void 0){const rt=new Matrix4;rt.fromArray(b.matrix),tt.applyMatrix4(rt)}else b.translation!==void 0&&tt.position.fromArray(b.translation),b.rotation!==void 0&&tt.quaternion.fromArray(b.rotation),b.scale!==void 0&&tt.scale.fromArray(b.scale);return d.associations.has(tt)||d.associations.set(tt,{}),d.associations.get(tt).nodes=a,tt}),this.nodeCache[a]}loadScene(a){const o=this.extensions,c=this.json.scenes[a],d=this,b=new Group;c.name&&(b.name=d.createUniqueName(c.name)),assignExtrasToUserData(b,c),c.extensions&&addUnknownExtensionsToUserData(o,b,c);const $=c.nodes||[],j=[];for(let _e=0,et=$.length;_e<et;_e++)j.push(d.getDependency("node",$[_e]));return Promise.all(j).then(function(_e){for(let tt=0,rt=_e.length;tt<rt;tt++)b.add(_e[tt]);const et=tt=>{const rt=new Map;for(const[nt,it]of d.associations)(nt instanceof Material||nt instanceof Texture$1)&&rt.set(nt,it);return tt.traverse(nt=>{const it=d.associations.get(nt);it!=null&&rt.set(nt,it)}),rt};return d.associations=et(b),b})}}function computeBounds(s,a,o){const c=a.attributes,d=new Box3;if(c.POSITION!==void 0){const j=o.json.accessors[c.POSITION],_e=j.min,et=j.max;if(_e!==void 0&&et!==void 0){if(d.set(new Vector3(_e[0],_e[1],_e[2]),new Vector3(et[0],et[1],et[2])),j.normalized){const tt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[j.componentType]);d.min.multiplyScalar(tt),d.max.multiplyScalar(tt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const b=a.targets;if(b!==void 0){const j=new Vector3,_e=new Vector3;for(let et=0,tt=b.length;et<tt;et++){const rt=b[et];if(rt.POSITION!==void 0){const nt=o.json.accessors[rt.POSITION],it=nt.min,at=nt.max;if(it!==void 0&&at!==void 0){if(_e.setX(Math.max(Math.abs(it[0]),Math.abs(at[0]))),_e.setY(Math.max(Math.abs(it[1]),Math.abs(at[1]))),_e.setZ(Math.max(Math.abs(it[2]),Math.abs(at[2]))),nt.normalized){const ct=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[nt.componentType]);_e.multiplyScalar(ct)}j.max(_e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(j)}s.boundingBox=d;const $=new Sphere;d.getCenter($.center),$.radius=d.min.distanceTo(d.max)/2,s.boundingSphere=$}function addPrimitiveAttributes(s,a,o){const c=a.attributes,d=[];function b($,j){return o.getDependency("accessor",$).then(function(_e){s.setAttribute(j,_e)})}for(const $ in c){const j=ATTRIBUTES[$]||$.toLowerCase();j in s.attributes||d.push(b(c[$],j))}if(a.indices!==void 0&&!s.index){const $=o.getDependency("accessor",a.indices).then(function(j){s.setIndex(j)});d.push($)}return assignExtrasToUserData(s,a),computeBounds(s,a,o),Promise.all(d).then(function(){return a.targets!==void 0?addMorphTargets(s,a.targets,o):s})}const _VRButton=class{static createButton(s,a={}){const o=document.createElement("button");function c(){let j=null;async function _e(tt){tt.addEventListener("end",et),await s.xr.setSession(tt),o.textContent="EXIT VR",j=tt}function et(){j.removeEventListener("end",et),o.textContent="ENTER VR",j=null}o.style.display="",o.style.cursor="pointer",o.style.left="calc(50% - 50px)",o.style.width="100px",o.textContent="ENTER VR",o.onmouseenter=()=>{o.style.opacity="1.0"},o.onmouseleave=()=>{o.style.opacity="0.5"},o.onclick=()=>{var tt;if(j===null){const rt=[a.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);(tt=navigator.xr)==null||tt.requestSession("immersive-vr",{...a,optionalFeatures:rt}).then(_e)}else j.end()}}function d(){o.style.display="",o.style.cursor="auto",o.style.left="calc(50% - 75px)",o.style.width="150px",o.onmouseenter=null,o.onmouseleave=null,o.onclick=null}function b(){d(),o.textContent="VR NOT SUPPORTED"}function $(j){j.style.position="absolute",j.style.bottom="20px",j.style.padding="12px 6px",j.style.border="1px solid #fff",j.style.borderRadius="4px",j.style.background="rgba(0,0,0,0.1)",j.style.color="#fff",j.style.font="normal 13px sans-serif",j.style.textAlign="center",j.style.opacity="0.5",j.style.outline="none",j.style.zIndex="999"}if("xr"in navigator)return $(o),o.id="VRButton",o.style.display="none",navigator.xr.isSessionSupported("immersive-vr").then(j=>{j?c():b(),j&&_VRButton.xrSessionIsGranted&&o.click()}),o;{const j=document.createElement("a");return window.isSecureContext===!1?(j.href=document.location.href.replace(/^http:/,"https:"),j.innerHTML="WEBXR NEEDS HTTPS"):(j.href="https://immersiveweb.dev/",j.innerHTML="WEBXR NOT AVAILABLE"),j.style.left="calc(50% - 90px)",j.style.width="180px",j.style.textDecoration="none",$(j),j}}static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",()=>{_VRButton.xrSessionIsGranted=!0})}};let VRButton=_VRButton;__publicField(VRButton,"xrSessionIsGranted",!1);class Font{constructor(a){__publicField(this,"data"),this.data=a}generateShapes(a,o=100,c){const d=[],b={letterSpacing:0,lineHeight:1,...c},$=createPaths(a,o,this.data,b);for(let j=0,_e=$.length;j<_e;j++)Array.prototype.push.apply(d,$[j].toShapes(!1));return d}}__publicField(Font,"isFont");__publicField(Font,"type");function createPaths(s,a,o,c){const d=Array.from(s),b=a/o.resolution,$=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*b,j=[];let _e=0,et=0;for(let tt=0;tt<d.length;tt++){const rt=d[tt];if(rt===`
`)_e=0,et-=$*c.lineHeight;else{const nt=createPath(rt,b,_e,et,o);nt&&(_e+=nt.offsetX+c.letterSpacing,j.push(nt.path))}}return j}function createPath(s,a,o,c,d){const b=d.glyphs[s]||d.glyphs["?"];if(!b){console.error('THREE.Font: character "'+s+'" does not exists in font family '+d.familyName+".");return}const $=new ShapePath;let j,_e,et,tt,rt,nt,it,at;if(b.o){const ct=b._cachedOutline||(b._cachedOutline=b.o.split(" "));for(let st=0,ot=ct.length;st<ot;)switch(ct[st++]){case"m":j=parseInt(ct[st++])*a+o,_e=parseInt(ct[st++])*a+c,$.moveTo(j,_e);break;case"l":j=parseInt(ct[st++])*a+o,_e=parseInt(ct[st++])*a+c,$.lineTo(j,_e);break;case"q":et=parseInt(ct[st++])*a+o,tt=parseInt(ct[st++])*a+c,rt=parseInt(ct[st++])*a+o,nt=parseInt(ct[st++])*a+c,$.quadraticCurveTo(rt,nt,et,tt);break;case"b":et=parseInt(ct[st++])*a+o,tt=parseInt(ct[st++])*a+c,rt=parseInt(ct[st++])*a+o,nt=parseInt(ct[st++])*a+c,it=parseInt(ct[st++])*a+o,at=parseInt(ct[st++])*a+c,$.bezierCurveTo(rt,nt,it,at,et,tt);break}}return{offsetX:b.ha*a,path:$}}class Data3DTexture extends Texture$1{constructor(a=null,o=1,c=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:a,width:o,height:c,depth:d},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping$1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var freeGlobal$2=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1$1=freeGlobal$2;var freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal$1$1||freeSelf$1||Function("return this")();const root$1$1=root$9;var Symbol$1$1=root$1$1.Symbol;const Symbol$2$1=Symbol$1$1;var objectProto$j=Object.prototype,hasOwnProperty$g=objectProto$j.hasOwnProperty,nativeObjectToString$1$1=objectProto$j.toString,symToStringTag$1$1=Symbol$2$1?Symbol$2$1.toStringTag:void 0;function getRawTag$2(s){var a=hasOwnProperty$g.call(s,symToStringTag$1$1),o=s[symToStringTag$1$1];try{s[symToStringTag$1$1]=void 0;var c=!0}catch{}var d=nativeObjectToString$1$1.call(s);return c&&(a?s[symToStringTag$1$1]=o:delete s[symToStringTag$1$1]),d}var objectProto$i=Object.prototype,nativeObjectToString$2=objectProto$i.toString;function objectToString$3(s){return nativeObjectToString$2.call(s)}var nullTag$1="[object Null]",undefinedTag$1="[object Undefined]",symToStringTag$2=Symbol$2$1?Symbol$2$1.toStringTag:void 0;function baseGetTag$7(s){return s==null?s===void 0?undefinedTag$1:nullTag$1:symToStringTag$2&&symToStringTag$2 in Object(s)?getRawTag$2(s):objectToString$3(s)}function isObjectLike$8(s){return s!=null&&typeof s=="object"}var symbolTag$3="[object Symbol]";function isSymbol$5(s){return typeof s=="symbol"||isObjectLike$8(s)&&baseGetTag$7(s)==symbolTag$3}function arrayMap$3(s,a){for(var o=-1,c=s==null?0:s.length,d=Array(c);++o<c;)d[o]=a(s[o],o,s);return d}var isArray$h=Array.isArray;const isArray$1$1=isArray$h;var INFINITY$3=1/0,symbolProto$2=Symbol$2$1?Symbol$2$1.prototype:void 0,symbolToString$1=symbolProto$2?symbolProto$2.toString:void 0;function baseToString$2(s){if(typeof s=="string")return s;if(isArray$1$1(s))return arrayMap$3(s,baseToString$2)+"";if(isSymbol$5(s))return symbolToString$1?symbolToString$1.call(s):"";var a=s+"";return a=="0"&&1/s==-INFINITY$3?"-0":a}var reWhitespace=/\s/;function trimmedEndIndex(s){for(var a=s.length;a--&&reWhitespace.test(s.charAt(a)););return a}var reTrimStart=/^\s+/;function baseTrim(s){return s&&s.slice(0,trimmedEndIndex(s)+1).replace(reTrimStart,"")}function isObject$d(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(s){if(typeof s=="number")return s;if(isSymbol$5(s))return NAN;if(isObject$d(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=isObject$d(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=baseTrim(s);var o=reIsBinary.test(s);return o||reIsOctal.test(s)?freeParseInt(s.slice(2),o?2:8):reIsBadHex.test(s)?NAN:+s}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(s){if(!s)return s===0?s:0;if(s=toNumber(s),s===INFINITY$2||s===-INFINITY$2){var a=s<0?-1:1;return a*MAX_INTEGER}return s===s?s:0}function toInteger(s){var a=toFinite(s),o=a%1;return a===a?o?a-o:a:0}function identity$4(s){return s}var asyncTag$1="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag$1="[object Proxy]";function isFunction$6(s){if(!isObject$d(s))return!1;var a=baseGetTag$7(s);return a==funcTag$2||a==genTag$1||a==asyncTag$1||a==proxyTag$1}var coreJsData$2=root$1$1["__core-js_shared__"];const coreJsData$1$1=coreJsData$2;var maskSrcKey$1=function(){var s=/[^.]+$/.exec(coreJsData$1$1&&coreJsData$1$1.keys&&coreJsData$1$1.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function isMasked$2(s){return!!maskSrcKey$1&&maskSrcKey$1 in s}var funcProto$1$1=Function.prototype,funcToString$1$1=funcProto$1$1.toString;function toSource$3(s){if(s!=null){try{return funcToString$1$1.call(s)}catch{}try{return s+""}catch{}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor$1=/^\[object .+?Constructor\]$/,funcProto$3=Function.prototype,objectProto$h=Object.prototype,funcToString$3=funcProto$3.toString,hasOwnProperty$f=objectProto$h.hasOwnProperty,reIsNative$1=RegExp("^"+funcToString$3.call(hasOwnProperty$f).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$2(s){if(!isObject$d(s)||isMasked$2(s))return!1;var a=isFunction$6(s)?reIsNative$1:reIsHostCtor$1;return a.test(toSource$3(s))}function getValue$3(s,a){return s==null?void 0:s[a]}function getNative$8(s,a){var o=getValue$3(s,a);return baseIsNative$2(o)?o:void 0}var WeakMap$1$1=getNative$8(root$1$1,"WeakMap");const WeakMap$2$1=WeakMap$1$1;var objectCreate$1=Object.create,baseCreate$2=function(){function s(){}return function(a){if(!isObject$d(a))return{};if(objectCreate$1)return objectCreate$1(a);s.prototype=a;var o=new s;return s.prototype=void 0,o}}();const baseCreate$1$1=baseCreate$2;function apply$2(s,a,o){switch(o.length){case 0:return s.call(a);case 1:return s.call(a,o[0]);case 2:return s.call(a,o[0],o[1]);case 3:return s.call(a,o[0],o[1],o[2])}return s.apply(a,o)}function noop$2(){}function copyArray$2(s,a){var o=-1,c=s.length;for(a||(a=Array(c));++o<c;)a[o]=s[o];return a}var HOT_COUNT$1=800,HOT_SPAN$1=16,nativeNow$1=Date.now;function shortOut$2(s){var a=0,o=0;return function(){var c=nativeNow$1(),d=HOT_SPAN$1-(c-o);if(o=c,d>0){if(++a>=HOT_COUNT$1)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}function constant$2(s){return function(){return s}}var defineProperty$3=function(){try{var s=getNative$8(Object,"defineProperty");return s({},"",{}),s}catch{}}();const defineProperty$1$1=defineProperty$3;var baseSetToString$2=defineProperty$1$1?function(s,a){return defineProperty$1$1(s,"toString",{configurable:!0,enumerable:!1,value:constant$2(a),writable:!0})}:identity$4;const baseSetToString$1$1=baseSetToString$2;var setToString$2=shortOut$2(baseSetToString$1$1);const setToString$1$1=setToString$2;function arrayEach(s,a){for(var o=-1,c=s==null?0:s.length;++o<c&&a(s[o],o,s)!==!1;);return s}function baseFindIndex(s,a,o,c){for(var d=s.length,b=o+(c?1:-1);c?b--:++b<d;)if(a(s[b],b,s))return b;return-1}function baseIsNaN(s){return s!==s}function strictIndexOf(s,a,o){for(var c=o-1,d=s.length;++c<d;)if(s[c]===a)return c;return-1}function baseIndexOf(s,a,o){return a===a?strictIndexOf(s,a,o):baseFindIndex(s,baseIsNaN,o)}function arrayIncludes(s,a){var o=s==null?0:s.length;return!!o&&baseIndexOf(s,a,0)>-1}var MAX_SAFE_INTEGER$1$1=9007199254740991,reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$5(s,a){var o=typeof s;return a=a??MAX_SAFE_INTEGER$1$1,!!a&&(o=="number"||o!="symbol"&&reIsUint$1.test(s))&&s>-1&&s%1==0&&s<a}function baseAssignValue$4(s,a,o){a=="__proto__"&&defineProperty$1$1?defineProperty$1$1(s,a,{configurable:!0,enumerable:!0,value:o,writable:!0}):s[a]=o}function eq$6(s,a){return s===a||s!==s&&a!==a}var objectProto$g=Object.prototype,hasOwnProperty$e=objectProto$g.hasOwnProperty;function assignValue$3(s,a,o){var c=s[a];(!(hasOwnProperty$e.call(s,a)&&eq$6(c,o))||o===void 0&&!(a in s))&&baseAssignValue$4(s,a,o)}function copyObject$2(s,a,o,c){var d=!o;o||(o={});for(var b=-1,$=a.length;++b<$;){var j=a[b],_e=c?c(o[j],s[j],j,o,s):void 0;_e===void 0&&(_e=s[j]),d?baseAssignValue$4(o,j,_e):assignValue$3(o,j,_e)}return o}var nativeMax$3=Math.max;function overRest$2(s,a,o){return a=nativeMax$3(a===void 0?s.length-1:a,0),function(){for(var c=arguments,d=-1,b=nativeMax$3(c.length-a,0),$=Array(b);++d<b;)$[d]=c[a+d];d=-1;for(var j=Array(a+1);++d<a;)j[d]=c[d];return j[a]=o($),apply$2(s,this,j)}}function baseRest$2(s,a){return setToString$1$1(overRest$2(s,a,identity$4),s+"")}var MAX_SAFE_INTEGER$2=9007199254740991;function isLength$4(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=MAX_SAFE_INTEGER$2}function isArrayLike$5(s){return s!=null&&isLength$4(s.length)&&!isFunction$6(s)}function isIterateeCall$2(s,a,o){if(!isObject$d(o))return!1;var c=typeof a;return(c=="number"?isArrayLike$5(o)&&isIndex$5(a,o.length):c=="string"&&a in o)?eq$6(o[a],s):!1}function createAssigner$2(s){return baseRest$2(function(a,o){var c=-1,d=o.length,b=d>1?o[d-1]:void 0,$=d>2?o[2]:void 0;for(b=s.length>3&&typeof b=="function"?(d--,b):void 0,$&&isIterateeCall$2(o[0],o[1],$)&&(b=d<3?void 0:b,d=1),a=Object(a);++c<d;){var j=o[c];j&&s(a,j,c,b)}return a})}var objectProto$f=Object.prototype;function isPrototype$4(s){var a=s&&s.constructor,o=typeof a=="function"&&a.prototype||objectProto$f;return s===o}function baseTimes$2(s,a){for(var o=-1,c=Array(s);++o<s;)c[o]=a(o);return c}var argsTag$3="[object Arguments]";function baseIsArguments$2(s){return isObjectLike$8(s)&&baseGetTag$7(s)==argsTag$3}var objectProto$e$1=Object.prototype,hasOwnProperty$d=objectProto$e$1.hasOwnProperty,propertyIsEnumerable$1$1=objectProto$e$1.propertyIsEnumerable,isArguments$4=baseIsArguments$2(function(){return arguments}())?baseIsArguments$2:function(s){return isObjectLike$8(s)&&hasOwnProperty$d.call(s,"callee")&&!propertyIsEnumerable$1$1.call(s,"callee")};const isArguments$1$1=isArguments$4;function stubFalse$1(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$1$1.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer$5=nativeIsBuffer||stubFalse$1;const isBuffer$1$1=isBuffer$5;var argsTag$2$1="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$3$1="[object Object]",regexpTag$4="[object RegExp]",setTag$6="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags$1={};typedArrayTags$1[float32Tag$2]=typedArrayTags$1[float64Tag$2]=typedArrayTags$1[int8Tag$2]=typedArrayTags$1[int16Tag$2]=typedArrayTags$1[int32Tag$2]=typedArrayTags$1[uint8Tag$2]=typedArrayTags$1[uint8ClampedTag$2]=typedArrayTags$1[uint16Tag$2]=typedArrayTags$1[uint32Tag$2]=!0;typedArrayTags$1[argsTag$2$1]=typedArrayTags$1[arrayTag$2]=typedArrayTags$1[arrayBufferTag$3]=typedArrayTags$1[boolTag$3]=typedArrayTags$1[dataViewTag$4]=typedArrayTags$1[dateTag$3]=typedArrayTags$1[errorTag$2]=typedArrayTags$1[funcTag$1$1]=typedArrayTags$1[mapTag$6]=typedArrayTags$1[numberTag$3]=typedArrayTags$1[objectTag$3$1]=typedArrayTags$1[regexpTag$4]=typedArrayTags$1[setTag$6]=typedArrayTags$1[stringTag$4]=typedArrayTags$1[weakMapTag$2]=!1;function baseIsTypedArray$2(s){return isObjectLike$8(s)&&isLength$4(s.length)&&!!typedArrayTags$1[baseGetTag$7(s)]}function baseUnary$2(s){return function(a){return s(a)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1$1.process,nodeUtil$1=function(){try{var s=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return s||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1$1=nodeUtil$1;var nodeIsTypedArray$1=nodeUtil$1$1&&nodeUtil$1$1.isTypedArray,isTypedArray$4=nodeIsTypedArray$1?baseUnary$2(nodeIsTypedArray$1):baseIsTypedArray$2;const isTypedArray$1$1=isTypedArray$4;var objectProto$d$1=Object.prototype,hasOwnProperty$c=objectProto$d$1.hasOwnProperty;function arrayLikeKeys$3(s,a){var o=isArray$1$1(s),c=!o&&isArguments$1$1(s),d=!o&&!c&&isBuffer$1$1(s),b=!o&&!c&&!d&&isTypedArray$1$1(s),$=o||c||d||b,j=$?baseTimes$2(s.length,String):[],_e=j.length;for(var et in s)(a||hasOwnProperty$c.call(s,et))&&!($&&(et=="length"||d&&(et=="offset"||et=="parent")||b&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||isIndex$5(et,_e)))&&j.push(et);return j}function overArg$3(s,a){return function(o){return s(a(o))}}var nativeKeys$2=overArg$3(Object.keys,Object);const nativeKeys$1$1=nativeKeys$2;var objectProto$c$1=Object.prototype,hasOwnProperty$b$1=objectProto$c$1.hasOwnProperty;function baseKeys$2(s){if(!isPrototype$4(s))return nativeKeys$1$1(s);var a=[];for(var o in Object(s))hasOwnProperty$b$1.call(s,o)&&o!="constructor"&&a.push(o);return a}function keys$3(s){return isArrayLike$5(s)?arrayLikeKeys$3(s):baseKeys$2(s)}var objectProto$b$1=Object.prototype,hasOwnProperty$a$1=objectProto$b$1.hasOwnProperty,assign$7=createAssigner$2(function(s,a){if(isPrototype$4(a)||isArrayLike$5(a)){copyObject$2(a,keys$3(a),s);return}for(var o in a)hasOwnProperty$a$1.call(a,o)&&assignValue$3(s,o,a[o])});const assign$1$1=assign$7;function nativeKeysIn$2(s){var a=[];if(s!=null)for(var o in Object(s))a.push(o);return a}var objectProto$a$1=Object.prototype,hasOwnProperty$9$1=objectProto$a$1.hasOwnProperty;function baseKeysIn$2(s){if(!isObject$d(s))return nativeKeysIn$2(s);var a=isPrototype$4(s),o=[];for(var c in s)c=="constructor"&&(a||!hasOwnProperty$9$1.call(s,c))||o.push(c);return o}function keysIn$4(s){return isArrayLike$5(s)?arrayLikeKeys$3(s,!0):baseKeysIn$2(s)}var reIsDeepProp$1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp$1=/^\w*$/;function isKey$4(s,a){if(isArray$1$1(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||isSymbol$5(s)?!0:reIsPlainProp$1.test(s)||!reIsDeepProp$1.test(s)||a!=null&&s in Object(a)}var nativeCreate$5=getNative$8(Object,"create");const nativeCreate$1$1=nativeCreate$5;function hashClear$2(){this.__data__=nativeCreate$1$1?nativeCreate$1$1(null):{},this.size=0}function hashDelete$2(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var HASH_UNDEFINED$2$1="__lodash_hash_undefined__",objectProto$9$1=Object.prototype,hasOwnProperty$8$1=objectProto$9$1.hasOwnProperty;function hashGet$2(s){var a=this.__data__;if(nativeCreate$1$1){var o=a[s];return o===HASH_UNDEFINED$2$1?void 0:o}return hasOwnProperty$8$1.call(a,s)?a[s]:void 0}var objectProto$8$1=Object.prototype,hasOwnProperty$7$1=objectProto$8$1.hasOwnProperty;function hashHas$2(s){var a=this.__data__;return nativeCreate$1$1?a[s]!==void 0:hasOwnProperty$7$1.call(a,s)}var HASH_UNDEFINED$1$1="__lodash_hash_undefined__";function hashSet$2(s,a){var o=this.__data__;return this.size+=this.has(s)?0:1,o[s]=nativeCreate$1$1&&a===void 0?HASH_UNDEFINED$1$1:a,this}function Hash$2(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}Hash$2.prototype.clear=hashClear$2;Hash$2.prototype.delete=hashDelete$2;Hash$2.prototype.get=hashGet$2;Hash$2.prototype.has=hashHas$2;Hash$2.prototype.set=hashSet$2;function listCacheClear$2(){this.__data__=[],this.size=0}function assocIndexOf$5(s,a){for(var o=s.length;o--;)if(eq$6(s[o][0],a))return o;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete$2(s){var a=this.__data__,o=assocIndexOf$5(a,s);if(o<0)return!1;var c=a.length-1;return o==c?a.pop():splice$1.call(a,o,1),--this.size,!0}function listCacheGet$2(s){var a=this.__data__,o=assocIndexOf$5(a,s);return o<0?void 0:a[o][1]}function listCacheHas$2(s){return assocIndexOf$5(this.__data__,s)>-1}function listCacheSet$2(s,a){var o=this.__data__,c=assocIndexOf$5(o,s);return c<0?(++this.size,o.push([s,a])):o[c][1]=a,this}function ListCache$5(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}ListCache$5.prototype.clear=listCacheClear$2;ListCache$5.prototype.delete=listCacheDelete$2;ListCache$5.prototype.get=listCacheGet$2;ListCache$5.prototype.has=listCacheHas$2;ListCache$5.prototype.set=listCacheSet$2;var Map$1$1=getNative$8(root$1$1,"Map");const Map$2$1=Map$1$1;function mapCacheClear$2(){this.size=0,this.__data__={hash:new Hash$2,map:new(Map$2$1||ListCache$5),string:new Hash$2}}function isKeyable$2(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function getMapData$5(s,a){var o=s.__data__;return isKeyable$2(a)?o[typeof a=="string"?"string":"hash"]:o.map}function mapCacheDelete$2(s){var a=getMapData$5(this,s).delete(s);return this.size-=a?1:0,a}function mapCacheGet$2(s){return getMapData$5(this,s).get(s)}function mapCacheHas$2(s){return getMapData$5(this,s).has(s)}function mapCacheSet$2(s,a){var o=getMapData$5(this,s),c=o.size;return o.set(s,a),this.size+=o.size==c?0:1,this}function MapCache$4(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}MapCache$4.prototype.clear=mapCacheClear$2;MapCache$4.prototype.delete=mapCacheDelete$2;MapCache$4.prototype.get=mapCacheGet$2;MapCache$4.prototype.has=mapCacheHas$2;MapCache$4.prototype.set=mapCacheSet$2;var FUNC_ERROR_TEXT$1="Expected a function";function memoize$2(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var o=function(){var c=arguments,d=a?a.apply(this,c):c[0],b=o.cache;if(b.has(d))return b.get(d);var $=s.apply(this,c);return o.cache=b.set(d,$)||b,$};return o.cache=new(memoize$2.Cache||MapCache$4),o}memoize$2.Cache=MapCache$4;var MAX_MEMOIZE_SIZE$1=500;function memoizeCapped$2(s){var a=memoize$2(s,function(c){return o.size===MAX_MEMOIZE_SIZE$1&&o.clear(),c}),o=a.cache;return a}var rePropName$2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar$2=/\\(\\)?/g,stringToPath$3=memoizeCapped$2(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(rePropName$2,function(o,c,d,b){a.push(d?b.replace(reEscapeChar$2,"$1"):c||o)}),a});const stringToPath$1$1=stringToPath$3;function toString$4(s){return s==null?"":baseToString$2(s)}function castPath$5(s,a){return isArray$1$1(s)?s:isKey$4(s,a)?[s]:stringToPath$1$1(toString$4(s))}var INFINITY$1$1=1/0;function toKey$6(s){if(typeof s=="string"||isSymbol$5(s))return s;var a=s+"";return a=="0"&&1/s==-INFINITY$1$1?"-0":a}function baseGet$4(s,a){a=castPath$5(a,s);for(var o=0,c=a.length;s!=null&&o<c;)s=s[toKey$6(a[o++])];return o&&o==c?s:void 0}function get$2(s,a,o){var c=s==null?void 0:baseGet$4(s,a);return c===void 0?o:c}function arrayPush$3(s,a){for(var o=-1,c=a.length,d=s.length;++o<c;)s[d+o]=a[o];return s}var spreadableSymbol=Symbol$2$1?Symbol$2$1.isConcatSpreadable:void 0;function isFlattenable(s){return isArray$1$1(s)||isArguments$1$1(s)||!!(spreadableSymbol&&s&&s[spreadableSymbol])}function baseFlatten(s,a,o,c,d){var b=-1,$=s.length;for(o||(o=isFlattenable),d||(d=[]);++b<$;){var j=s[b];a>0&&o(j)?a>1?baseFlatten(j,a-1,o,c,d):arrayPush$3(d,j):c||(d[d.length]=j)}return d}function flatten$1(s){var a=s==null?0:s.length;return a?baseFlatten(s,1):[]}var getPrototype$4=overArg$3(Object.getPrototypeOf,Object);const getPrototype$1$1=getPrototype$4;function baseSlice(s,a,o){var c=-1,d=s.length;a<0&&(a=-a>d?0:d+a),o=o>d?d:o,o<0&&(o+=d),d=a>o?0:o-a>>>0,a>>>=0;for(var b=Array(d);++c<d;)b[c]=s[c+a];return b}function arrayReduce$2(s,a,o,c){var d=-1,b=s==null?0:s.length;for(c&&b&&(o=s[++d]);++d<b;)o=a(o,s[d],d,s);return o}function stackClear$2(){this.__data__=new ListCache$5,this.size=0}function stackDelete$2(s){var a=this.__data__,o=a.delete(s);return this.size=a.size,o}function stackGet$2(s){return this.__data__.get(s)}function stackHas$2(s){return this.__data__.has(s)}var LARGE_ARRAY_SIZE$2=200;function stackSet$2(s,a){var o=this.__data__;if(o instanceof ListCache$5){var c=o.__data__;if(!Map$2$1||c.length<LARGE_ARRAY_SIZE$2-1)return c.push([s,a]),this.size=++o.size,this;o=this.__data__=new MapCache$4(c)}return o.set(s,a),this.size=o.size,this}function Stack$4(s){var a=this.__data__=new ListCache$5(s);this.size=a.size}Stack$4.prototype.clear=stackClear$2;Stack$4.prototype.delete=stackDelete$2;Stack$4.prototype.get=stackGet$2;Stack$4.prototype.has=stackHas$2;Stack$4.prototype.set=stackSet$2;function baseAssign(s,a){return s&&copyObject$2(a,keys$3(a),s)}function baseAssignIn(s,a){return s&&copyObject$2(a,keysIn$4(a),s)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer2=moduleExports?root$1$1.Buffer:void 0,allocUnsafe=Buffer2?Buffer2.allocUnsafe:void 0;function cloneBuffer$1(s,a){if(a)return s.slice();var o=s.length,c=allocUnsafe?allocUnsafe(o):new s.constructor(o);return s.copy(c),c}function arrayFilter$2(s,a){for(var o=-1,c=s==null?0:s.length,d=0,b=[];++o<c;){var $=s[o];a($,o,s)&&(b[d++]=$)}return b}function stubArray$3(){return[]}var objectProto$7$1=Object.prototype,propertyIsEnumerable$2=objectProto$7$1.propertyIsEnumerable,nativeGetSymbols$1$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1$1?function(s){return s==null?[]:(s=Object(s),arrayFilter$2(nativeGetSymbols$1$1(s),function(a){return propertyIsEnumerable$2.call(s,a)}))}:stubArray$3;const getSymbols$1$1=getSymbols$3;function copySymbols(s,a){return copyObject$2(s,getSymbols$1$1(s),a)}var nativeGetSymbols$2=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols$2?function(s){for(var a=[];s;)arrayPush$3(a,getSymbols$1$1(s)),s=getPrototype$1$1(s);return a}:stubArray$3;const getSymbolsIn$1$1=getSymbolsIn$2;function copySymbolsIn(s,a){return copyObject$2(s,getSymbolsIn$1$1(s),a)}function baseGetAllKeys$3(s,a,o){var c=a(s);return isArray$1$1(s)?c:arrayPush$3(c,o(s))}function getAllKeys$2(s){return baseGetAllKeys$3(s,keys$3,getSymbols$1$1)}function getAllKeysIn$2(s){return baseGetAllKeys$3(s,keysIn$4,getSymbolsIn$1$1)}var DataView$1$1=getNative$8(root$1$1,"DataView");const DataView$2$1=DataView$1$1;var Promise$1$1=getNative$8(root$1$1,"Promise");const Promise$2$1=Promise$1$1;var Set$1$1=getNative$8(root$1$1,"Set");const Set$2$1=Set$1$1;var mapTag$5="[object Map]",objectTag$2$1="[object Object]",promiseTag$1="[object Promise]",setTag$5="[object Set]",weakMapTag$1$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString$1=toSource$3(DataView$2$1),mapCtorString$1=toSource$3(Map$2$1),promiseCtorString$1=toSource$3(Promise$2$1),setCtorString$1=toSource$3(Set$2$1),weakMapCtorString$1=toSource$3(WeakMap$2$1),getTag$2=baseGetTag$7;(DataView$2$1&&getTag$2(new DataView$2$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2$1&&getTag$2(new Map$2$1)!=mapTag$5||Promise$2$1&&getTag$2(Promise$2$1.resolve())!=promiseTag$1||Set$2$1&&getTag$2(new Set$2$1)!=setTag$5||WeakMap$2$1&&getTag$2(new WeakMap$2$1)!=weakMapTag$1$1)&&(getTag$2=function(s){var a=baseGetTag$7(s),o=a==objectTag$2$1?s.constructor:void 0,c=o?toSource$3(o):"";if(c)switch(c){case dataViewCtorString$1:return dataViewTag$3;case mapCtorString$1:return mapTag$5;case promiseCtorString$1:return promiseTag$1;case setCtorString$1:return setTag$5;case weakMapCtorString$1:return weakMapTag$1$1}return a});const getTag$1$1=getTag$2;var objectProto$6$1=Object.prototype,hasOwnProperty$6$1=objectProto$6$1.hasOwnProperty;function initCloneArray(s){var a=s.length,o=new s.constructor(a);return a&&typeof s[0]=="string"&&hasOwnProperty$6$1.call(s,"index")&&(o.index=s.index,o.input=s.input),o}var Uint8Array$1$1=root$1$1.Uint8Array;const Uint8Array$2$1=Uint8Array$1$1;function cloneArrayBuffer$2(s){var a=new s.constructor(s.byteLength);return new Uint8Array$2$1(a).set(new Uint8Array$2$1(s)),a}function cloneDataView(s,a){var o=a?cloneArrayBuffer$2(s.buffer):s.buffer;return new s.constructor(o,s.byteOffset,s.byteLength)}var reFlags=/\w*$/;function cloneRegExp(s){var a=new s.constructor(s.source,reFlags.exec(s));return a.lastIndex=s.lastIndex,a}var symbolProto$1$1=Symbol$2$1?Symbol$2$1.prototype:void 0,symbolValueOf$1=symbolProto$1$1?symbolProto$1$1.valueOf:void 0;function cloneSymbol(s){return symbolValueOf$1?Object(symbolValueOf$1.call(s)):{}}function cloneTypedArray$2(s,a){var o=a?cloneArrayBuffer$2(s.buffer):s.buffer;return new s.constructor(o,s.byteOffset,s.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$3="[object RegExp]",setTag$4="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(s,a,o){var c=s.constructor;switch(a){case arrayBufferTag$2:return cloneArrayBuffer$2(s);case boolTag$2:case dateTag$2:return new c(+s);case dataViewTag$2$1:return cloneDataView(s,o);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray$2(s,o);case mapTag$4:return new c;case numberTag$2:case stringTag$3:return new c(s);case regexpTag$3:return cloneRegExp(s);case setTag$4:return new c;case symbolTag$2:return cloneSymbol(s)}}function initCloneObject$2(s){return typeof s.constructor=="function"&&!isPrototype$4(s)?baseCreate$1$1(getPrototype$1$1(s)):{}}var mapTag$3="[object Map]";function baseIsMap(s){return isObjectLike$8(s)&&getTag$1$1(s)==mapTag$3}var nodeIsMap=nodeUtil$1$1&&nodeUtil$1$1.isMap,isMap$2=nodeIsMap?baseUnary$2(nodeIsMap):baseIsMap;const isMap$1$1=isMap$2;var setTag$3="[object Set]";function baseIsSet(s){return isObjectLike$8(s)&&getTag$1$1(s)==setTag$3}var nodeIsSet=nodeUtil$1$1&&nodeUtil$1$1.isSet,isSet$2=nodeIsSet?baseUnary$2(nodeIsSet):baseIsSet;const isSet$1$1=isSet$2;var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1$1="[object Arguments]",arrayTag$1$1="[object Array]",boolTag$1$1="[object Boolean]",dateTag$1$1="[object Date]",errorTag$1$1="[object Error]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",mapTag$2$1="[object Map]",numberTag$1$1="[object Number]",objectTag$1$1="[object Object]",regexpTag$2="[object RegExp]",setTag$2$1="[object Set]",stringTag$2="[object String]",symbolTag$1$1="[object Symbol]",weakMapTag$3="[object WeakMap]",arrayBufferTag$1$1="[object ArrayBuffer]",dataViewTag$1$1="[object DataView]",float32Tag$3="[object Float32Array]",float64Tag$3="[object Float64Array]",int8Tag$3="[object Int8Array]",int16Tag$3="[object Int16Array]",int32Tag$3="[object Int32Array]",uint8Tag$3="[object Uint8Array]",uint8ClampedTag$3="[object Uint8ClampedArray]",uint16Tag$3="[object Uint16Array]",uint32Tag$3="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1$1]=cloneableTags[arrayTag$1$1]=cloneableTags[arrayBufferTag$1$1]=cloneableTags[dataViewTag$1$1]=cloneableTags[boolTag$1$1]=cloneableTags[dateTag$1$1]=cloneableTags[float32Tag$3]=cloneableTags[float64Tag$3]=cloneableTags[int8Tag$3]=cloneableTags[int16Tag$3]=cloneableTags[int32Tag$3]=cloneableTags[mapTag$2$1]=cloneableTags[numberTag$1$1]=cloneableTags[objectTag$1$1]=cloneableTags[regexpTag$2]=cloneableTags[setTag$2$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1$1]=cloneableTags[uint8Tag$3]=cloneableTags[uint8ClampedTag$3]=cloneableTags[uint16Tag$3]=cloneableTags[uint32Tag$3]=!0;cloneableTags[errorTag$1$1]=cloneableTags[funcTag$3]=cloneableTags[weakMapTag$3]=!1;function baseClone(s,a,o,c,d,b){var $,j=a&CLONE_DEEP_FLAG,_e=a&CLONE_FLAT_FLAG,et=a&CLONE_SYMBOLS_FLAG$1;if(o&&($=d?o(s,c,d,b):o(s)),$!==void 0)return $;if(!isObject$d(s))return s;var tt=isArray$1$1(s);if(tt){if($=initCloneArray(s),!j)return copyArray$2(s,$)}else{var rt=getTag$1$1(s),nt=rt==funcTag$3||rt==genTag$2;if(isBuffer$1$1(s))return cloneBuffer$1(s,j);if(rt==objectTag$1$1||rt==argsTag$1$1||nt&&!d){if($=_e||nt?{}:initCloneObject$2(s),!j)return _e?copySymbolsIn(s,baseAssignIn($,s)):copySymbols(s,baseAssign($,s))}else{if(!cloneableTags[rt])return d?s:{};$=initCloneByTag(s,rt,j)}}b||(b=new Stack$4);var it=b.get(s);if(it)return it;b.set(s,$),isSet$1$1(s)?s.forEach(function(st){$.add(baseClone(st,a,o,st,s,b))}):isMap$1$1(s)&&s.forEach(function(st,ot){$.set(ot,baseClone(st,a,o,ot,s,b))});var at=et?_e?getAllKeysIn$2:getAllKeys$2:_e?keysIn$4:keys$3,ct=tt?void 0:at(s);return arrayEach(ct||s,function(st,ot){ct&&(ot=st,st=s[ot]),assignValue$3($,ot,baseClone(st,a,o,ot,s,b))}),$}var CLONE_SYMBOLS_FLAG=4;function clone$1(s){return baseClone(s,CLONE_SYMBOLS_FLAG)}function compact$1(s){for(var a=-1,o=s==null?0:s.length,c=0,d=[];++a<o;){var b=s[a];b&&(d[c++]=b)}return d}var HASH_UNDEFINED$3="__lodash_hash_undefined__";function setCacheAdd$2(s){return this.__data__.set(s,HASH_UNDEFINED$3),this}function setCacheHas$2(s){return this.__data__.has(s)}function SetCache$2(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new MapCache$4;++a<o;)this.add(s[a])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd$2;SetCache$2.prototype.has=setCacheHas$2;function arraySome$2(s,a){for(var o=-1,c=s==null?0:s.length;++o<c;)if(a(s[o],o,s))return!0;return!1}function cacheHas$2(s,a){return s.has(a)}var COMPARE_PARTIAL_FLAG$5$1=1,COMPARE_UNORDERED_FLAG$3$1=2;function equalArrays$3(s,a,o,c,d,b){var $=o&COMPARE_PARTIAL_FLAG$5$1,j=s.length,_e=a.length;if(j!=_e&&!($&&_e>j))return!1;var et=b.get(s),tt=b.get(a);if(et&&tt)return et==a&&tt==s;var rt=-1,nt=!0,it=o&COMPARE_UNORDERED_FLAG$3$1?new SetCache$2:void 0;for(b.set(s,a),b.set(a,s);++rt<j;){var at=s[rt],ct=a[rt];if(c)var st=$?c(ct,at,rt,a,s,b):c(at,ct,rt,s,a,b);if(st!==void 0){if(st)continue;nt=!1;break}if(it){if(!arraySome$2(a,function(ot,ht){if(!cacheHas$2(it,ht)&&(at===ot||d(at,ot,o,c,b)))return it.push(ht)})){nt=!1;break}}else if(!(at===ct||d(at,ct,o,c,b))){nt=!1;break}}return b.delete(s),b.delete(a),nt}function mapToArray$2(s){var a=-1,o=Array(s.size);return s.forEach(function(c,d){o[++a]=[d,c]}),o}function setToArray$2(s){var a=-1,o=Array(s.size);return s.forEach(function(c){o[++a]=c}),o}var COMPARE_PARTIAL_FLAG$4$1=1,COMPARE_UNORDERED_FLAG$2$1=2,boolTag$4="[object Boolean]",dateTag$4="[object Date]",errorTag$3="[object Error]",mapTag$1$1="[object Map]",numberTag$4="[object Number]",regexpTag$1$1="[object RegExp]",setTag$1$1="[object Set]",stringTag$1$1="[object String]",symbolTag$4="[object Symbol]",arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$5="[object DataView]",symbolProto$3=Symbol$2$1?Symbol$2$1.prototype:void 0,symbolValueOf$2=symbolProto$3?symbolProto$3.valueOf:void 0;function equalByTag$2(s,a,o,c,d,b,$){switch(o){case dataViewTag$5:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case arrayBufferTag$4:return!(s.byteLength!=a.byteLength||!b(new Uint8Array$2$1(s),new Uint8Array$2$1(a)));case boolTag$4:case dateTag$4:case numberTag$4:return eq$6(+s,+a);case errorTag$3:return s.name==a.name&&s.message==a.message;case regexpTag$1$1:case stringTag$1$1:return s==a+"";case mapTag$1$1:var j=mapToArray$2;case setTag$1$1:var _e=c&COMPARE_PARTIAL_FLAG$4$1;if(j||(j=setToArray$2),s.size!=a.size&&!_e)return!1;var et=$.get(s);if(et)return et==a;c|=COMPARE_UNORDERED_FLAG$2$1,$.set(s,a);var tt=equalArrays$3(j(s),j(a),c,d,b,$);return $.delete(s),tt;case symbolTag$4:if(symbolValueOf$2)return symbolValueOf$2.call(s)==symbolValueOf$2.call(a)}return!1}var COMPARE_PARTIAL_FLAG$3$1=1,objectProto$5$1=Object.prototype,hasOwnProperty$5$1=objectProto$5$1.hasOwnProperty;function equalObjects$2(s,a,o,c,d,b){var $=o&COMPARE_PARTIAL_FLAG$3$1,j=getAllKeys$2(s),_e=j.length,et=getAllKeys$2(a),tt=et.length;if(_e!=tt&&!$)return!1;for(var rt=_e;rt--;){var nt=j[rt];if(!($?nt in a:hasOwnProperty$5$1.call(a,nt)))return!1}var it=b.get(s),at=b.get(a);if(it&&at)return it==a&&at==s;var ct=!0;b.set(s,a),b.set(a,s);for(var st=$;++rt<_e;){nt=j[rt];var ot=s[nt],ht=a[nt];if(c)var dt=$?c(ht,ot,nt,a,s,b):c(ot,ht,nt,s,a,b);if(!(dt===void 0?ot===ht||d(ot,ht,o,c,b):dt)){ct=!1;break}st||(st=nt=="constructor")}if(ct&&!st){var ft=s.constructor,mt=a.constructor;ft!=mt&&"constructor"in s&&"constructor"in a&&!(typeof ft=="function"&&ft instanceof ft&&typeof mt=="function"&&mt instanceof mt)&&(ct=!1)}return b.delete(s),b.delete(a),ct}var COMPARE_PARTIAL_FLAG$2$1=1,argsTag$4="[object Arguments]",arrayTag$3="[object Array]",objectTag$4="[object Object]",objectProto$4$1=Object.prototype,hasOwnProperty$4$1=objectProto$4$1.hasOwnProperty;function baseIsEqualDeep$2(s,a,o,c,d,b){var $=isArray$1$1(s),j=isArray$1$1(a),_e=$?arrayTag$3:getTag$1$1(s),et=j?arrayTag$3:getTag$1$1(a);_e=_e==argsTag$4?objectTag$4:_e,et=et==argsTag$4?objectTag$4:et;var tt=_e==objectTag$4,rt=et==objectTag$4,nt=_e==et;if(nt&&isBuffer$1$1(s)){if(!isBuffer$1$1(a))return!1;$=!0,tt=!1}if(nt&&!tt)return b||(b=new Stack$4),$||isTypedArray$1$1(s)?equalArrays$3(s,a,o,c,d,b):equalByTag$2(s,a,_e,o,c,d,b);if(!(o&COMPARE_PARTIAL_FLAG$2$1)){var it=tt&&hasOwnProperty$4$1.call(s,"__wrapped__"),at=rt&&hasOwnProperty$4$1.call(a,"__wrapped__");if(it||at){var ct=it?s.value():s,st=at?a.value():a;return b||(b=new Stack$4),d(ct,st,o,c,b)}}return nt?(b||(b=new Stack$4),equalObjects$2(s,a,o,c,d,b)):!1}function baseIsEqual$3(s,a,o,c,d){return s===a?!0:s==null||a==null||!isObjectLike$8(s)&&!isObjectLike$8(a)?s!==s&&a!==a:baseIsEqualDeep$2(s,a,o,c,baseIsEqual$3,d)}var COMPARE_PARTIAL_FLAG$1$1=1,COMPARE_UNORDERED_FLAG$1$1=2;function baseIsMatch$2(s,a,o,c){var d=o.length,b=d,$=!c;if(s==null)return!b;for(s=Object(s);d--;){var j=o[d];if($&&j[2]?j[1]!==s[j[0]]:!(j[0]in s))return!1}for(;++d<b;){j=o[d];var _e=j[0],et=s[_e],tt=j[1];if($&&j[2]){if(et===void 0&&!(_e in s))return!1}else{var rt=new Stack$4;if(c)var nt=c(et,tt,_e,s,a,rt);if(!(nt===void 0?baseIsEqual$3(tt,et,COMPARE_PARTIAL_FLAG$1$1|COMPARE_UNORDERED_FLAG$1$1,c,rt):nt))return!1}}return!0}function isStrictComparable$3(s){return s===s&&!isObject$d(s)}function getMatchData$2(s){for(var a=keys$3(s),o=a.length;o--;){var c=a[o],d=s[c];a[o]=[c,d,isStrictComparable$3(d)]}return a}function matchesStrictComparable$3(s,a){return function(o){return o==null?!1:o[s]===a&&(a!==void 0||s in Object(o))}}function baseMatches$2(s){var a=getMatchData$2(s);return a.length==1&&a[0][2]?matchesStrictComparable$3(a[0][0],a[0][1]):function(o){return o===s||baseIsMatch$2(o,s,a)}}function baseHasIn$2(s,a){return s!=null&&a in Object(s)}function hasPath$2(s,a,o){a=castPath$5(a,s);for(var c=-1,d=a.length,b=!1;++c<d;){var $=toKey$6(a[c]);if(!(b=s!=null&&o(s,$)))break;s=s[$]}return b||++c!=d?b:(d=s==null?0:s.length,!!d&&isLength$4(d)&&isIndex$5($,d)&&(isArray$1$1(s)||isArguments$1$1(s)))}function hasIn$2(s,a){return s!=null&&hasPath$2(s,a,baseHasIn$2)}var COMPARE_PARTIAL_FLAG$6=1,COMPARE_UNORDERED_FLAG$4=2;function baseMatchesProperty$2(s,a){return isKey$4(s)&&isStrictComparable$3(a)?matchesStrictComparable$3(toKey$6(s),a):function(o){var c=get$2(o,s);return c===void 0&&c===a?hasIn$2(o,s):baseIsEqual$3(a,c,COMPARE_PARTIAL_FLAG$6|COMPARE_UNORDERED_FLAG$4)}}function baseProperty$2(s){return function(a){return a==null?void 0:a[s]}}function basePropertyDeep$2(s){return function(a){return baseGet$4(a,s)}}function property$2(s){return isKey$4(s)?baseProperty$2(toKey$6(s)):basePropertyDeep$2(s)}function baseIteratee$2(s){return typeof s=="function"?s:s==null?identity$4:typeof s=="object"?isArray$1$1(s)?baseMatchesProperty$2(s[0],s[1]):baseMatches$2(s):property$2(s)}function arrayAggregator(s,a,o,c){for(var d=-1,b=s==null?0:s.length;++d<b;){var $=s[d];a(c,$,o($),s)}return c}function createBaseFor$2(s){return function(a,o,c){for(var d=-1,b=Object(a),$=c(a),j=$.length;j--;){var _e=$[s?j:++d];if(o(b[_e],_e,b)===!1)break}return a}}var baseFor$2=createBaseFor$2();const baseFor$1$1=baseFor$2;function baseForOwn(s,a){return s&&baseFor$1$1(s,a,keys$3)}function createBaseEach(s,a){return function(o,c){if(o==null)return o;if(!isArrayLike$5(o))return s(o,c);for(var d=o.length,b=a?d:-1,$=Object(o);(a?b--:++b<d)&&c($[b],b,$)!==!1;);return o}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function baseAggregator(s,a,o,c){return baseEach$1(s,function(d,b,$){a(c,d,o(d),$)}),c}function createAggregator(s,a){return function(o,c){var d=isArray$1$1(o)?arrayAggregator:baseAggregator,b=a?a():{};return d(o,s,baseIteratee$2(c),b)}}var objectProto$3$1=Object.prototype,hasOwnProperty$3$1=objectProto$3$1.hasOwnProperty,defaults$4=baseRest$2(function(s,a){s=Object(s);var o=-1,c=a.length,d=c>2?a[2]:void 0;for(d&&isIterateeCall$2(a[0],a[1],d)&&(c=1);++o<c;)for(var b=a[o],$=keysIn$4(b),j=-1,_e=$.length;++j<_e;){var et=$[j],tt=s[et];(tt===void 0||eq$6(tt,objectProto$3$1[et])&&!hasOwnProperty$3$1.call(s,et))&&(s[et]=b[et])}return s});const defaults$1$1=defaults$4;function isArrayLikeObject$2(s){return isObjectLike$8(s)&&isArrayLike$5(s)}function arrayIncludesWith(s,a,o){for(var c=-1,d=s==null?0:s.length;++c<d;)if(o(a,s[c]))return!0;return!1}var LARGE_ARRAY_SIZE$1=200;function baseDifference(s,a,o,c){var d=-1,b=arrayIncludes,$=!0,j=s.length,_e=[],et=a.length;if(!j)return _e;o&&(a=arrayMap$3(a,baseUnary$2(o))),c?(b=arrayIncludesWith,$=!1):a.length>=LARGE_ARRAY_SIZE$1&&(b=cacheHas$2,$=!1,a=new SetCache$2(a));e:for(;++d<j;){var tt=s[d],rt=o==null?tt:o(tt);if(tt=c||tt!==0?tt:0,$&&rt===rt){for(var nt=et;nt--;)if(a[nt]===rt)continue e;_e.push(tt)}else b(a,rt,c)||_e.push(tt)}return _e}var difference=baseRest$2(function(s,a){return isArrayLikeObject$2(s)?baseDifference(s,baseFlatten(a,1,isArrayLikeObject$2,!0)):[]});const difference$1=difference;function last(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}function drop(s,a,o){var c=s==null?0:s.length;return c?(a=o||a===void 0?1:toInteger(a),baseSlice(s,a<0?0:a,c)):[]}function dropRight(s,a,o){var c=s==null?0:s.length;return c?(a=o||a===void 0?1:toInteger(a),a=c-a,baseSlice(s,0,a<0?0:a)):[]}function castFunction(s){return typeof s=="function"?s:identity$4}function forEach$1(s,a){var o=isArray$1$1(s)?arrayEach:baseEach$1;return o(s,castFunction(a))}function arrayEvery(s,a){for(var o=-1,c=s==null?0:s.length;++o<c;)if(!a(s[o],o,s))return!1;return!0}function baseEvery(s,a){var o=!0;return baseEach$1(s,function(c,d,b){return o=!!a(c,d,b),o}),o}function every(s,a,o){var c=isArray$1$1(s)?arrayEvery:baseEvery;return o&&isIterateeCall$2(s,a,o)&&(a=void 0),c(s,baseIteratee$2(a))}function baseFilter(s,a){var o=[];return baseEach$1(s,function(c,d,b){a(c,d,b)&&o.push(c)}),o}function filter$2(s,a){var o=isArray$1$1(s)?arrayFilter$2:baseFilter;return o(s,baseIteratee$2(a))}function createFind(s){return function(a,o,c){var d=Object(a);if(!isArrayLike$5(a)){var b=baseIteratee$2(o);a=keys$3(a),o=function(j){return b(d[j],j,d)}}var $=s(a,o,c);return $>-1?d[b?a[$]:$]:void 0}}var nativeMax$2=Math.max;function findIndex(s,a,o){var c=s==null?0:s.length;if(!c)return-1;var d=o==null?0:toInteger(o);return d<0&&(d=nativeMax$2(c+d,0)),baseFindIndex(s,baseIteratee$2(a),d)}var find=createFind(findIndex);const find$1=find;function head(s){return s&&s.length?s[0]:void 0}function baseMap(s,a){var o=-1,c=isArrayLike$5(s)?Array(s.length):[];return baseEach$1(s,function(d,b,$){c[++o]=a(d,b,$)}),c}function map(s,a){var o=isArray$1$1(s)?arrayMap$3:baseMap;return o(s,baseIteratee$2(a))}function flatMap(s,a){return baseFlatten(map(s,a),1)}var objectProto$2$1=Object.prototype,hasOwnProperty$2$1=objectProto$2$1.hasOwnProperty,groupBy=createAggregator(function(s,a,o){hasOwnProperty$2$1.call(s,o)?s[o].push(a):baseAssignValue$4(s,o,[a])});const groupBy$1=groupBy;var objectProto$1$1=Object.prototype,hasOwnProperty$1$1=objectProto$1$1.hasOwnProperty;function baseHas(s,a){return s!=null&&hasOwnProperty$1$1.call(s,a)}function has$6(s,a){return s!=null&&hasPath$2(s,a,baseHas)}var stringTag$5="[object String]";function isString$5(s){return typeof s=="string"||!isArray$1$1(s)&&isObjectLike$8(s)&&baseGetTag$7(s)==stringTag$5}function baseValues(s,a){return arrayMap$3(a,function(o){return s[o]})}function values(s){return s==null?[]:baseValues(s,keys$3(s))}var nativeMax$1=Math.max;function includes(s,a,o,c){s=isArrayLike$5(s)?s:values(s),o=o&&!c?toInteger(o):0;var d=s.length;return o<0&&(o=nativeMax$1(d+o,0)),isString$5(s)?o<=d&&s.indexOf(a,o)>-1:!!d&&baseIndexOf(s,a,o)>-1}var nativeMax$4=Math.max;function indexOf$1(s,a,o){var c=s==null?0:s.length;if(!c)return-1;var d=o==null?0:toInteger(o);return d<0&&(d=nativeMax$4(c+d,0)),baseIndexOf(s,a,d)}var mapTag$7="[object Map]",setTag$7="[object Set]",objectProto$k=Object.prototype,hasOwnProperty$h=objectProto$k.hasOwnProperty;function isEmpty$2(s){if(s==null)return!0;if(isArrayLike$5(s)&&(isArray$1$1(s)||typeof s=="string"||typeof s.splice=="function"||isBuffer$1$1(s)||isTypedArray$1$1(s)||isArguments$1$1(s)))return!s.length;var a=getTag$1$1(s);if(a==mapTag$7||a==setTag$7)return!s.size;if(isPrototype$4(s))return!baseKeys$2(s).length;for(var o in s)if(hasOwnProperty$h.call(s,o))return!1;return!0}var regexpTag$5="[object RegExp]";function baseIsRegExp(s){return isObjectLike$8(s)&&baseGetTag$7(s)==regexpTag$5}var nodeIsRegExp=nodeUtil$1$1&&nodeUtil$1$1.isRegExp,isRegExp$2=nodeIsRegExp?baseUnary$2(nodeIsRegExp):baseIsRegExp;const isRegExp$1$1=isRegExp$2;function isUndefined(s){return s===void 0}var FUNC_ERROR_TEXT$2="Expected a function";function negate(s){if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$2);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function baseSet$2(s,a,o,c){if(!isObject$d(s))return s;a=castPath$5(a,s);for(var d=-1,b=a.length,$=b-1,j=s;j!=null&&++d<b;){var _e=toKey$6(a[d]),et=o;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return s;if(d!=$){var tt=j[_e];et=c?c(tt,_e,j):void 0,et===void 0&&(et=isObject$d(tt)?tt:isIndex$5(a[d+1])?[]:{})}assignValue$3(j,_e,et),j=j[_e]}return s}function basePickBy$2(s,a,o){for(var c=-1,d=a.length,b={};++c<d;){var $=a[c],j=baseGet$4(s,$);o(j,$)&&baseSet$2(b,castPath$5($,s),j)}return b}function pickBy$2(s,a){if(s==null)return{};var o=arrayMap$3(getAllKeysIn$2(s),function(c){return[c]});return a=baseIteratee$2(a),basePickBy$2(s,o,function(c,d){return a(c,d[0])})}function baseReduce(s,a,o,c,d){return d(s,function(b,$,j){o=c?(c=!1,b):a(o,b,$,j)}),o}function reduce$1(s,a,o){var c=isArray$1$1(s)?arrayReduce$2:baseReduce,d=arguments.length<3;return c(s,baseIteratee$2(a),o,d,baseEach$1)}function reject(s,a){var o=isArray$1$1(s)?arrayFilter$2:baseFilter;return o(s,negate(baseIteratee$2(a)))}function baseSome(s,a){var o;return baseEach$1(s,function(c,d,b){return o=a(c,d,b),!o}),!!o}function some(s,a,o){var c=isArray$1$1(s)?arraySome$2:baseSome;return o&&isIterateeCall$2(s,a,o)&&(a=void 0),c(s,baseIteratee$2(a))}var INFINITY$4=1/0,createSet=Set$2$1&&1/setToArray$2(new Set$2$1([,-0]))[1]==INFINITY$4?function(s){return new Set$2$1(s)}:noop$2;const createSet$1=createSet;var LARGE_ARRAY_SIZE$3=200;function baseUniq(s,a,o){var c=-1,d=arrayIncludes,b=s.length,$=!0,j=[],_e=j;if(o)$=!1,d=arrayIncludesWith;else if(b>=LARGE_ARRAY_SIZE$3){var et=a?null:createSet$1(s);if(et)return setToArray$2(et);$=!1,d=cacheHas$2,_e=new SetCache$2}else _e=a?[]:j;e:for(;++c<b;){var tt=s[c],rt=a?a(tt):tt;if(tt=o||tt!==0?tt:0,$&&rt===rt){for(var nt=_e.length;nt--;)if(_e[nt]===rt)continue e;a&&_e.push(rt),j.push(tt)}else d(_e,rt,o)||(_e!==j&&_e.push(rt),j.push(tt))}return j}function uniq(s){return s&&s.length?baseUniq(s):[]}function PRINT_ERROR(s){console&&console.error&&console.error(`Error: ${s}`)}function PRINT_WARNING(s){console&&console.warn&&console.warn(`Warning: ${s}`)}function timer(s){const a=new Date().getTime(),o=s();return{time:new Date().getTime()-a,value:o}}function toFastProperties(s){function a(){}a.prototype=s;const o=new a;function c(){return typeof o.bar}return c(),c(),s}function tokenLabel$1(s){return hasTokenLabel$1(s)?s.LABEL:s.name}function hasTokenLabel$1(s){return isString$5(s.LABEL)&&s.LABEL!==""}class AbstractProduction{get definition(){return this._definition}set definition(a){this._definition=a}constructor(a){this._definition=a}accept(a){a.visit(this),forEach$1(this.definition,o=>{o.accept(a)})}}class NonTerminal extends AbstractProduction{constructor(a){super([]),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}set definition(a){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(a){a.visit(this)}}class Rule extends AbstractProduction{constructor(a){super(a.definition),this.orgText="",assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class Alternative extends AbstractProduction{constructor(a){super(a.definition),this.ignoreAmbiguities=!1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class Option extends AbstractProduction{constructor(a){super(a.definition),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class RepetitionMandatory extends AbstractProduction{constructor(a){super(a.definition),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class RepetitionMandatoryWithSeparator extends AbstractProduction{constructor(a){super(a.definition),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class Repetition extends AbstractProduction{constructor(a){super(a.definition),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class RepetitionWithSeparator extends AbstractProduction{constructor(a){super(a.definition),this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class Alternation extends AbstractProduction{get definition(){return this._definition}set definition(a){this._definition=a}constructor(a){super(a.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}}class Terminal{constructor(a){this.idx=1,assign$1$1(this,pickBy$2(a,o=>o!==void 0))}accept(a){a.visit(this)}}function serializeGrammar(s){return map(s,serializeProduction)}function serializeProduction(s){function a(o){return map(o,serializeProduction)}if(s instanceof NonTerminal){const o={type:"NonTerminal",name:s.nonTerminalName,idx:s.idx};return isString$5(s.label)&&(o.label=s.label),o}else{if(s instanceof Alternative)return{type:"Alternative",definition:a(s.definition)};if(s instanceof Option)return{type:"Option",idx:s.idx,definition:a(s.definition)};if(s instanceof RepetitionMandatory)return{type:"RepetitionMandatory",idx:s.idx,definition:a(s.definition)};if(s instanceof RepetitionMandatoryWithSeparator)return{type:"RepetitionMandatoryWithSeparator",idx:s.idx,separator:serializeProduction(new Terminal({terminalType:s.separator})),definition:a(s.definition)};if(s instanceof RepetitionWithSeparator)return{type:"RepetitionWithSeparator",idx:s.idx,separator:serializeProduction(new Terminal({terminalType:s.separator})),definition:a(s.definition)};if(s instanceof Repetition)return{type:"Repetition",idx:s.idx,definition:a(s.definition)};if(s instanceof Alternation)return{type:"Alternation",idx:s.idx,definition:a(s.definition)};if(s instanceof Terminal){const o={type:"Terminal",name:s.terminalType.name,label:tokenLabel$1(s.terminalType),idx:s.idx};isString$5(s.label)&&(o.terminalLabel=s.label);const c=s.terminalType.PATTERN;return s.terminalType.PATTERN&&(o.pattern=isRegExp$1$1(c)?c.source:c),o}else{if(s instanceof Rule)return{type:"Rule",name:s.name,orgText:s.orgText,definition:a(s.definition)};throw Error("non exhaustive match")}}}class GAstVisitor{visit(a){const o=a;switch(o.constructor){case NonTerminal:return this.visitNonTerminal(o);case Alternative:return this.visitAlternative(o);case Option:return this.visitOption(o);case RepetitionMandatory:return this.visitRepetitionMandatory(o);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(o);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(o);case Repetition:return this.visitRepetition(o);case Alternation:return this.visitAlternation(o);case Terminal:return this.visitTerminal(o);case Rule:return this.visitRule(o);default:throw Error("non exhaustive match")}}visitNonTerminal(a){}visitAlternative(a){}visitOption(a){}visitRepetition(a){}visitRepetitionMandatory(a){}visitRepetitionMandatoryWithSeparator(a){}visitRepetitionWithSeparator(a){}visitAlternation(a){}visitTerminal(a){}visitRule(a){}}function isSequenceProd(s){return s instanceof Alternative||s instanceof Option||s instanceof Repetition||s instanceof RepetitionMandatory||s instanceof RepetitionMandatoryWithSeparator||s instanceof RepetitionWithSeparator||s instanceof Terminal||s instanceof Rule}function isOptionalProd(s,a=[]){return s instanceof Option||s instanceof Repetition||s instanceof RepetitionWithSeparator?!0:s instanceof Alternation?some(s.definition,c=>isOptionalProd(c,a)):s instanceof NonTerminal&&includes(a,s)?!1:s instanceof AbstractProduction?(s instanceof NonTerminal&&a.push(s),every(s.definition,c=>isOptionalProd(c,a))):!1}function isBranchingProd(s){return s instanceof Alternation}function getProductionDslName(s){if(s instanceof NonTerminal)return"SUBRULE";if(s instanceof Option)return"OPTION";if(s instanceof Alternation)return"OR";if(s instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(s instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(s instanceof RepetitionWithSeparator)return"MANY_SEP";if(s instanceof Repetition)return"MANY";if(s instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}class RestWalker{walk(a,o=[]){forEach$1(a.definition,(c,d)=>{const b=drop(a.definition,d+1);if(c instanceof NonTerminal)this.walkProdRef(c,b,o);else if(c instanceof Terminal)this.walkTerminal(c,b,o);else if(c instanceof Alternative)this.walkFlat(c,b,o);else if(c instanceof Option)this.walkOption(c,b,o);else if(c instanceof RepetitionMandatory)this.walkAtLeastOne(c,b,o);else if(c instanceof RepetitionMandatoryWithSeparator)this.walkAtLeastOneSep(c,b,o);else if(c instanceof RepetitionWithSeparator)this.walkManySep(c,b,o);else if(c instanceof Repetition)this.walkMany(c,b,o);else if(c instanceof Alternation)this.walkOr(c,b,o);else throw Error("non exhaustive match")})}walkTerminal(a,o,c){}walkProdRef(a,o,c){}walkFlat(a,o,c){const d=o.concat(c);this.walk(a,d)}walkOption(a,o,c){const d=o.concat(c);this.walk(a,d)}walkAtLeastOne(a,o,c){const d=[new Option({definition:a.definition})].concat(o,c);this.walk(a,d)}walkAtLeastOneSep(a,o,c){const d=restForRepetitionWithSeparator(a,o,c);this.walk(a,d)}walkMany(a,o,c){const d=[new Option({definition:a.definition})].concat(o,c);this.walk(a,d)}walkManySep(a,o,c){const d=restForRepetitionWithSeparator(a,o,c);this.walk(a,d)}walkOr(a,o,c){const d=o.concat(c);forEach$1(a.definition,b=>{const $=new Alternative({definition:[b]});this.walk($,d)})}}function restForRepetitionWithSeparator(s,a,o){return[new Option({definition:[new Terminal({terminalType:s.separator})].concat(s.definition)})].concat(a,o)}function first(s){if(s instanceof NonTerminal)return first(s.referencedRule);if(s instanceof Terminal)return firstForTerminal(s);if(isSequenceProd(s))return firstForSequence(s);if(isBranchingProd(s))return firstForBranching(s);throw Error("non exhaustive match")}function firstForSequence(s){let a=[];const o=s.definition;let c=0,d=o.length>c,b,$=!0;for(;d&&$;)b=o[c],$=isOptionalProd(b),a=a.concat(first(b)),c=c+1,d=o.length>c;return uniq(a)}function firstForBranching(s){const a=map(s.definition,o=>first(o));return uniq(flatten$1(a))}function firstForTerminal(s){return[s.terminalType]}const IN="_~IN~_";class ResyncFollowsWalker extends RestWalker{constructor(a){super(),this.topProd=a,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(a,o,c){}walkProdRef(a,o,c){const d=buildBetweenProdsFollowPrefix(a.referencedRule,a.idx)+this.topProd.name,b=o.concat(c),$=new Alternative({definition:b}),j=first($);this.follows[d]=j}}function computeAllProdsFollows(s){const a={};return forEach$1(s,o=>{const c=new ResyncFollowsWalker(o).startWalking();assign$1$1(a,c)}),a}function buildBetweenProdsFollowPrefix(s,a){return s.name+a+IN}function cc(s){return s.charCodeAt(0)}function insertToSet(s,a){Array.isArray(s)?s.forEach(function(o){a.push(o)}):a.push(s)}function addFlag(s,a){if(s[a]===!0)throw"duplicate flag "+a;s[a],s[a]=!0}function ASSERT_EXISTS(s){if(s===void 0)throw Error("Internal Error - Should never get here!");return!0}function ASSERT_NEVER_REACH_HERE(){throw Error("Internal Error - Should never get here!")}function isCharacter(s){return s.type==="Character"}const digitsCharCodes=[];for(let s=cc("0");s<=cc("9");s++)digitsCharCodes.push(s);const wordCharCodes=[cc("_")].concat(digitsCharCodes);for(let s=cc("a");s<=cc("z");s++)wordCharCodes.push(s);for(let s=cc("A");s<=cc("Z");s++)wordCharCodes.push(s);const whitespaceCodes=[cc(" "),cc("\f"),cc(`
`),cc("\r"),cc("	"),cc("\v"),cc("	"),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc("\u2028"),cc("\u2029"),cc(""),cc(""),cc(""),cc("\uFEFF")],hexDigitPattern=/[0-9a-fA-F]/,decimalPattern=/[0-9]/,decimalPatternNoZero=/[1-9]/;class RegExpParser{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(a){this.idx=a.idx,this.input=a.input,this.groupIdx=a.groupIdx}pattern(a){this.idx=0,this.input=a,this.groupIdx=0,this.consumeChar("/");const o=this.disjunction();this.consumeChar("/");const c={type:"Flags",loc:{begin:this.idx,end:a.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":addFlag(c,"global");break;case"i":addFlag(c,"ignoreCase");break;case"m":addFlag(c,"multiLine");break;case"u":addFlag(c,"unicode");break;case"y":addFlag(c,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:c,value:o,loc:this.loc(0)}}disjunction(){const a=[],o=this.idx;for(a.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),a.push(this.alternative());return{type:"Disjunction",value:a,loc:this.loc(o)}}alternative(){const a=[],o=this.idx;for(;this.isTerm();)a.push(this.term());return{type:"Alternative",value:a,loc:this.loc(o)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const a=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(a)};case"$":return{type:"EndAnchor",loc:this.loc(a)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(a)};case"B":return{type:"NonWordBoundary",loc:this.loc(a)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let o;switch(this.popChar()){case"=":o="Lookahead";break;case"!":o="NegativeLookahead";break}ASSERT_EXISTS(o);const c=this.disjunction();return this.consumeChar(")"),{type:o,value:c,loc:this.loc(a)}}return ASSERT_NEVER_REACH_HERE()}quantifier(a=!1){let o;const c=this.idx;switch(this.popChar()){case"*":o={atLeast:0,atMost:1/0};break;case"+":o={atLeast:1,atMost:1/0};break;case"?":o={atLeast:0,atMost:1};break;case"{":const d=this.integerIncludingZero();switch(this.popChar()){case"}":o={atLeast:d,atMost:d};break;case",":let b;this.isDigit()?(b=this.integerIncludingZero(),o={atLeast:d,atMost:b}):o={atLeast:d,atMost:1/0},this.consumeChar("}");break}if(a===!0&&o===void 0)return;ASSERT_EXISTS(o);break}if(!(a===!0&&o===void 0)&&ASSERT_EXISTS(o))return this.peekChar(0)==="?"?(this.consumeChar("?"),o.greedy=!1):o.greedy=!0,o.type="Quantifier",o.loc=this.loc(c),o}atom(){let a;const o=this.idx;switch(this.peekChar()){case".":a=this.dotAll();break;case"\\":a=this.atomEscape();break;case"[":a=this.characterClass();break;case"(":a=this.group();break}if(a===void 0&&this.isPatternCharacter()&&(a=this.patternCharacter()),ASSERT_EXISTS(a))return a.loc=this.loc(o),this.isQuantifier()&&(a.quantifier=this.quantifier()),a}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[cc(`
`),cc("\r"),cc("\u2028"),cc("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let a,o=!1;switch(this.popChar()){case"d":a=digitsCharCodes;break;case"D":a=digitsCharCodes,o=!0;break;case"s":a=whitespaceCodes;break;case"S":a=whitespaceCodes,o=!0;break;case"w":a=wordCharCodes;break;case"W":a=wordCharCodes,o=!0;break}if(ASSERT_EXISTS(a))return{type:"Set",value:a,complement:o}}controlEscapeAtom(){let a;switch(this.popChar()){case"f":a=cc("\f");break;case"n":a=cc(`
`);break;case"r":a=cc("\r");break;case"t":a=cc("	");break;case"v":a=cc("\v");break}if(ASSERT_EXISTS(a))return{type:"Character",value:a}}controlLetterEscapeAtom(){this.consumeChar("c");const a=this.popChar();if(/[a-zA-Z]/.test(a)===!1)throw Error("Invalid ");return{type:"Character",value:a.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:cc("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const a=this.popChar();return{type:"Character",value:cc(a)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const a=this.popChar();return{type:"Character",value:cc(a)}}}characterClass(){const a=[];let o=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),o=!0);this.isClassAtom();){const c=this.classAtom();if(c.type,isCharacter(c)&&this.isRangeDash()){this.consumeChar("-");const d=this.classAtom();if(d.type,isCharacter(d)){if(d.value<c.value)throw Error("Range out of order in character class");a.push({from:c.value,to:d.value})}else insertToSet(c.value,a),a.push(cc("-")),insertToSet(d.value,a)}else insertToSet(c.value,a)}return this.consumeChar("]"),{type:"Set",complement:o,value:a}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:cc("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let a=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),a=!1;break;default:this.groupIdx++;break}const o=this.disjunction();this.consumeChar(")");const c={type:"Group",capturing:a,value:o};return a&&(c.idx=this.groupIdx),c}positiveInteger(){let a=this.popChar();if(decimalPatternNoZero.test(a)===!1)throw Error("Expecting a positive integer");for(;decimalPattern.test(this.peekChar(0));)a+=this.popChar();return parseInt(a,10)}integerIncludingZero(){let a=this.popChar();if(decimalPattern.test(a)===!1)throw Error("Expecting an integer");for(;decimalPattern.test(this.peekChar(0));)a+=this.popChar();return parseInt(a,10)}patternCharacter(){const a=this.popChar();switch(a){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:cc(a)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return decimalPattern.test(this.peekChar(0))}isClassAtom(a=0){switch(this.peekChar(a)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const a=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(a)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(a){let o="";for(let d=0;d<a;d++){const b=this.popChar();if(hexDigitPattern.test(b)===!1)throw Error("Expecting a HexDecimal digits");o+=b}return{type:"Character",value:parseInt(o,16)}}peekChar(a=0){return this.input[this.idx+a]}popChar(){const a=this.peekChar(0);return this.consumeChar(void 0),a}consumeChar(a){if(a!==void 0&&this.input[this.idx]!==a)throw Error("Expected: '"+a+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(a){return{begin:a,end:this.idx}}}class BaseRegExpVisitor{visitChildren(a){for(const o in a){const c=a[o];a.hasOwnProperty(o)&&(c.type!==void 0?this.visit(c):Array.isArray(c)&&c.forEach(d=>{this.visit(d)},this))}}visit(a){switch(a.type){case"Pattern":this.visitPattern(a);break;case"Flags":this.visitFlags(a);break;case"Disjunction":this.visitDisjunction(a);break;case"Alternative":this.visitAlternative(a);break;case"StartAnchor":this.visitStartAnchor(a);break;case"EndAnchor":this.visitEndAnchor(a);break;case"WordBoundary":this.visitWordBoundary(a);break;case"NonWordBoundary":this.visitNonWordBoundary(a);break;case"Lookahead":this.visitLookahead(a);break;case"NegativeLookahead":this.visitNegativeLookahead(a);break;case"Character":this.visitCharacter(a);break;case"Set":this.visitSet(a);break;case"Group":this.visitGroup(a);break;case"GroupBackReference":this.visitGroupBackReference(a);break;case"Quantifier":this.visitQuantifier(a);break}this.visitChildren(a)}visitPattern(a){}visitFlags(a){}visitDisjunction(a){}visitAlternative(a){}visitStartAnchor(a){}visitEndAnchor(a){}visitWordBoundary(a){}visitNonWordBoundary(a){}visitLookahead(a){}visitNegativeLookahead(a){}visitCharacter(a){}visitSet(a){}visitGroup(a){}visitGroupBackReference(a){}visitQuantifier(a){}}let regExpAstCache={};const regExpParser=new RegExpParser;function getRegExpAst(s){const a=s.toString();if(regExpAstCache.hasOwnProperty(a))return regExpAstCache[a];{const o=regExpParser.pattern(a);return regExpAstCache[a]=o,o}}function clearRegExpParserCache(){regExpAstCache={}}const complementErrorMessage="Complement Sets are not supported for first char optimization",failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function getOptimizedStartCodesIndices(s,a=!1){try{const o=getRegExpAst(s);return firstCharOptimizedIndices(o.value,{},o.flags.ignoreCase)}catch(o){if(o.message===complementErrorMessage)a&&PRINT_WARNING(`${failedOptimizationPrefixMsg}	Unable to optimize: < ${s.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let c="";a&&(c=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),PRINT_ERROR(`${failedOptimizationPrefixMsg}
	Failed parsing: < ${s.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+c)}}return[]}function firstCharOptimizedIndices(s,a,o){switch(s.type){case"Disjunction":for(let d=0;d<s.value.length;d++)firstCharOptimizedIndices(s.value[d],a,o);break;case"Alternative":const c=s.value;for(let d=0;d<c.length;d++){const b=c[d];switch(b.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const $=b;switch($.type){case"Character":addOptimizedIdxToResult($.value,a,o);break;case"Set":if($.complement===!0)throw Error(complementErrorMessage);forEach$1($.value,_e=>{if(typeof _e=="number")addOptimizedIdxToResult(_e,a,o);else{const et=_e;if(o===!0)for(let tt=et.from;tt<=et.to;tt++)addOptimizedIdxToResult(tt,a,o);else{for(let tt=et.from;tt<=et.to&&tt<minOptimizationVal;tt++)addOptimizedIdxToResult(tt,a,o);if(et.to>=minOptimizationVal){const tt=et.from>=minOptimizationVal?et.from:minOptimizationVal,rt=et.to,nt=charCodeToOptimizedIndex(tt),it=charCodeToOptimizedIndex(rt);for(let at=nt;at<=it;at++)a[at]=at}}}});break;case"Group":firstCharOptimizedIndices($.value,a,o);break;default:throw Error("Non Exhaustive Match")}const j=$.quantifier!==void 0&&$.quantifier.atLeast===0;if($.type==="Group"&&isWholeOptional($)===!1||$.type!=="Group"&&j===!1)break}break;default:throw Error("non exhaustive match!")}return values(a)}function addOptimizedIdxToResult(s,a,o){const c=charCodeToOptimizedIndex(s);a[c]=c,o===!0&&handleIgnoreCase(s,a)}function handleIgnoreCase(s,a){const o=String.fromCharCode(s),c=o.toUpperCase();if(c!==o){const d=charCodeToOptimizedIndex(c.charCodeAt(0));a[d]=d}else{const d=o.toLowerCase();if(d!==o){const b=charCodeToOptimizedIndex(d.charCodeAt(0));a[b]=b}}}function findCode(s,a){return find$1(s.value,o=>{if(typeof o=="number")return includes(a,o);{const c=o;return find$1(a,d=>c.from<=d&&d<=c.to)!==void 0}})}function isWholeOptional(s){const a=s.quantifier;return a&&a.atLeast===0?!0:s.value?isArray$1$1(s.value)?every(s.value,isWholeOptional):isWholeOptional(s.value):!1}class CharCodeFinder extends BaseRegExpVisitor{constructor(a){super(),this.targetCharCodes=a,this.found=!1}visitChildren(a){if(this.found!==!0){switch(a.type){case"Lookahead":this.visitLookahead(a);return;case"NegativeLookahead":this.visitNegativeLookahead(a);return}super.visitChildren(a)}}visitCharacter(a){includes(this.targetCharCodes,a.value)&&(this.found=!0)}visitSet(a){a.complement?findCode(a,this.targetCharCodes)===void 0&&(this.found=!0):findCode(a,this.targetCharCodes)!==void 0&&(this.found=!0)}}function canMatchCharCode(s,a){if(a instanceof RegExp){const o=getRegExpAst(a),c=new CharCodeFinder(s);return c.visit(o),c.found}else return find$1(a,o=>includes(s,o.charCodeAt(0)))!==void 0}const PATTERN="PATTERN",DEFAULT_MODE="defaultMode",MODES="modes";let SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function analyzeTokenTypes(s,a){a=defaults$1$1(a,{useSticky:SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(ht,dt)=>dt()});const o=a.tracer;o("initCharCodeToOptimizedIndexMap",()=>{initCharCodeToOptimizedIndexMap()});let c;o("Reject Lexer.NA",()=>{c=reject(s,ht=>ht[PATTERN]===Lexer.NA)});let d=!1,b;o("Transform Patterns",()=>{d=!1,b=map(c,ht=>{const dt=ht[PATTERN];if(isRegExp$1$1(dt)){const ft=dt.source;return ft.length===1&&ft!=="^"&&ft!=="$"&&ft!=="."&&!dt.ignoreCase?ft:ft.length===2&&ft[0]==="\\"&&!includes(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],ft[1])?ft[1]:a.useSticky?addStickyFlag(dt):addStartOfInput(dt)}else{if(isFunction$6(dt))return d=!0,{exec:dt};if(typeof dt=="object")return d=!0,dt;if(typeof dt=="string"){if(dt.length===1)return dt;{const ft=dt.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),mt=new RegExp(ft);return a.useSticky?addStickyFlag(mt):addStartOfInput(mt)}}else throw Error("non exhaustive match")}})});let $,j,_e,et,tt;o("misc mapping",()=>{$=map(c,ht=>ht.tokenTypeIdx),j=map(c,ht=>{const dt=ht.GROUP;if(dt!==Lexer.SKIPPED){if(isString$5(dt))return dt;if(isUndefined(dt))return!1;throw Error("non exhaustive match")}}),_e=map(c,ht=>{const dt=ht.LONGER_ALT;if(dt)return isArray$1$1(dt)?map(dt,mt=>indexOf$1(c,mt)):[indexOf$1(c,dt)]}),et=map(c,ht=>ht.PUSH_MODE),tt=map(c,ht=>has$6(ht,"POP_MODE"))});let rt;o("Line Terminator Handling",()=>{const ht=getCharCodes(a.lineTerminatorCharacters);rt=map(c,dt=>!1),a.positionTracking!=="onlyOffset"&&(rt=map(c,dt=>has$6(dt,"LINE_BREAKS")?!!dt.LINE_BREAKS:checkLineBreaksIssues(dt,ht)===!1&&canMatchCharCode(ht,dt.PATTERN)))});let nt,it,at,ct;o("Misc Mapping #2",()=>{nt=map(c,isCustomPattern),it=map(b,isShortPattern),at=reduce$1(c,(ht,dt)=>{const ft=dt.GROUP;return isString$5(ft)&&ft!==Lexer.SKIPPED&&(ht[ft]=[]),ht},{}),ct=map(b,(ht,dt)=>({pattern:b[dt],longerAlt:_e[dt],canLineTerminator:rt[dt],isCustom:nt[dt],short:it[dt],group:j[dt],push:et[dt],pop:tt[dt],tokenTypeIdx:$[dt],tokenType:c[dt]}))});let st=!0,ot=[];return a.safeMode||o("First Char Optimization",()=>{ot=reduce$1(c,(ht,dt,ft)=>{if(typeof dt.PATTERN=="string"){const mt=dt.PATTERN.charCodeAt(0),gt=charCodeToOptimizedIndex(mt);addToMapOfArrays(ht,gt,ct[ft])}else if(isArray$1$1(dt.START_CHARS_HINT)){let mt;forEach$1(dt.START_CHARS_HINT,gt=>{const vt=typeof gt=="string"?gt.charCodeAt(0):gt,yt=charCodeToOptimizedIndex(vt);mt!==yt&&(mt=yt,addToMapOfArrays(ht,yt,ct[ft]))})}else if(isRegExp$1$1(dt.PATTERN))if(dt.PATTERN.unicode)st=!1,a.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}	Unable to analyze < ${dt.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const mt=getOptimizedStartCodesIndices(dt.PATTERN,a.ensureOptimizations);isEmpty$2(mt)&&(st=!1),forEach$1(mt,gt=>{addToMapOfArrays(ht,gt,ct[ft])})}else a.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}	TokenType: <${dt.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),st=!1;return ht},[])}),{emptyGroups:at,patternIdxToConfig:ct,charCodeToPatternIdxToConfig:ot,hasCustom:d,canBeOptimized:st}}function validatePatterns(s,a){let o=[];const c=findMissingPatterns(s);o=o.concat(c.errors);const d=findInvalidPatterns(c.valid),b=d.valid;return o=o.concat(d.errors),o=o.concat(validateRegExpPattern(b)),o=o.concat(findInvalidGroupType(b)),o=o.concat(findModesThatDoNotExist(b,a)),o=o.concat(findUnreachablePatterns(b)),o}function validateRegExpPattern(s){let a=[];const o=filter$2(s,c=>isRegExp$1$1(c[PATTERN]));return a=a.concat(findEndOfInputAnchor(o)),a=a.concat(findStartOfInputAnchor(o)),a=a.concat(findUnsupportedFlags(o)),a=a.concat(findDuplicatePatterns(o)),a=a.concat(findEmptyMatchRegExps(o)),a}function findMissingPatterns(s){const a=filter$2(s,d=>!has$6(d,PATTERN)),o=map(a,d=>({message:"Token Type: ->"+d.name+"<- missing static 'PATTERN' property",type:LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[d]})),c=difference$1(s,a);return{errors:o,valid:c}}function findInvalidPatterns(s){const a=filter$2(s,d=>{const b=d[PATTERN];return!isRegExp$1$1(b)&&!isFunction$6(b)&&!has$6(b,"exec")&&!isString$5(b)}),o=map(a,d=>({message:"Token Type: ->"+d.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[d]})),c=difference$1(s,a);return{errors:o,valid:c}}const end_of_input=/[^\\][$]/;function findEndOfInputAnchor(s){class a extends BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitEndAnchor(b){this.found=!0}}const o=filter$2(s,d=>{const b=d.PATTERN;try{const $=getRegExpAst(b),j=new a;return j.visit($),j.found}catch{return end_of_input.test(b.source)}});return map(o,d=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+d.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[d]}))}function findEmptyMatchRegExps(s){const a=filter$2(s,c=>c.PATTERN.test(""));return map(a,c=>({message:"Token Type: ->"+c.name+"<- static 'PATTERN' must not match an empty string",type:LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[c]}))}const start_of_input=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(s){class a extends BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitStartAnchor(b){this.found=!0}}const o=filter$2(s,d=>{const b=d.PATTERN;try{const $=getRegExpAst(b),j=new a;return j.visit($),j.found}catch{return start_of_input.test(b.source)}});return map(o,d=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+d.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[d]}))}function findUnsupportedFlags(s){const a=filter$2(s,c=>{const d=c[PATTERN];return d instanceof RegExp&&(d.multiline||d.global)});return map(a,c=>({message:"Token Type: ->"+c.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[c]}))}function findDuplicatePatterns(s){const a=[];let o=map(s,b=>reduce$1(s,($,j)=>(b.PATTERN.source===j.PATTERN.source&&!includes(a,j)&&j.PATTERN!==Lexer.NA&&(a.push(j),$.push(j)),$),[]));o=compact$1(o);const c=filter$2(o,b=>b.length>1);return map(c,b=>{const $=map(b,_e=>_e.name);return{message:`The same RegExp pattern ->${head(b).PATTERN}<-has been used in all of the following Token Types: ${$.join(", ")} <-`,type:LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:b}})}function findInvalidGroupType(s){const a=filter$2(s,c=>{if(!has$6(c,"GROUP"))return!1;const d=c.GROUP;return d!==Lexer.SKIPPED&&d!==Lexer.NA&&!isString$5(d)});return map(a,c=>({message:"Token Type: ->"+c.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[c]}))}function findModesThatDoNotExist(s,a){const o=filter$2(s,d=>d.PUSH_MODE!==void 0&&!includes(a,d.PUSH_MODE));return map(o,d=>({message:`Token Type: ->${d.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${d.PUSH_MODE}<-which does not exist`,type:LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[d]}))}function findUnreachablePatterns(s){const a=[],o=reduce$1(s,(c,d,b)=>{const $=d.PATTERN;return $===Lexer.NA||(isString$5($)?c.push({str:$,idx:b,tokenType:d}):isRegExp$1$1($)&&noMetaChar($)&&c.push({str:$.source,idx:b,tokenType:d})),c},[]);return forEach$1(s,(c,d)=>{forEach$1(o,({str:b,idx:$,tokenType:j})=>{if(d<$&&testTokenType(b,c.PATTERN)){const _e=`Token: ->${j.name}<- can never be matched.
Because it appears AFTER the Token Type ->${c.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;a.push({message:_e,type:LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[c,j]})}})}),a}function testTokenType(s,a){if(isRegExp$1$1(a)){const o=a.exec(s);return o!==null&&o.index===0}else{if(isFunction$6(a))return a(s,0,[],{});if(has$6(a,"exec"))return a.exec(s,0,[],{});if(typeof a=="string")return a===s;throw Error("non exhaustive match")}}function noMetaChar(s){return find$1([".","\\","[","]","|","^","$","(",")","?","*","+","{"],o=>s.source.indexOf(o)!==-1)===void 0}function addStartOfInput(s){const a=s.ignoreCase?"i":"";return new RegExp(`^(?:${s.source})`,a)}function addStickyFlag(s){const a=s.ignoreCase?"iy":"y";return new RegExp(`${s.source}`,a)}function performRuntimeChecks(s,a,o){const c=[];return has$6(s,DEFAULT_MODE)||c.push({message:"A MultiMode Lexer cannot be initialized without a <"+DEFAULT_MODE+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),has$6(s,MODES)||c.push({message:"A MultiMode Lexer cannot be initialized without a <"+MODES+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),has$6(s,MODES)&&has$6(s,DEFAULT_MODE)&&!has$6(s.modes,s.defaultMode)&&c.push({message:`A MultiMode Lexer cannot be initialized with a ${DEFAULT_MODE}: <${s.defaultMode}>which does not exist
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),has$6(s,MODES)&&forEach$1(s.modes,(d,b)=>{forEach$1(d,($,j)=>{if(isUndefined($))c.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${b}> at index: <${j}>
`,type:LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(has$6($,"LONGER_ALT")){const _e=isArray$1$1($.LONGER_ALT)?$.LONGER_ALT:[$.LONGER_ALT];forEach$1(_e,et=>{!isUndefined(et)&&!includes(d,et)&&c.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${et.name}> on token <${$.name}> outside of mode <${b}>
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),c}function performWarningRuntimeChecks(s,a,o){const c=[];let d=!1;const b=compact$1(flatten$1(values(s.modes))),$=reject(b,_e=>_e[PATTERN]===Lexer.NA),j=getCharCodes(o);return a&&forEach$1($,_e=>{const et=checkLineBreaksIssues(_e,j);if(et!==!1){const rt={message:buildLineBreakIssueMessage(_e,et),type:et.issue,tokenType:_e};c.push(rt)}else has$6(_e,"LINE_BREAKS")?_e.LINE_BREAKS===!0&&(d=!0):canMatchCharCode(j,_e.PATTERN)&&(d=!0)}),a&&!d&&c.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),c}function cloneEmptyGroups(s){const a={},o=keys$3(s);return forEach$1(o,c=>{const d=s[c];if(isArray$1$1(d))a[c]=[];else throw Error("non exhaustive match")}),a}function isCustomPattern(s){const a=s.PATTERN;if(isRegExp$1$1(a))return!1;if(isFunction$6(a))return!0;if(has$6(a,"exec"))return!0;if(isString$5(a))return!1;throw Error("non exhaustive match")}function isShortPattern(s){return isString$5(s)&&s.length===1?s.charCodeAt(0):!1}const LineTerminatorOptimizedTester={test:function(s){const a=s.length;for(let o=this.lastIndex;o<a;o++){const c=s.charCodeAt(o);if(c===10)return this.lastIndex=o+1,!0;if(c===13)return s.charCodeAt(o+1)===10?this.lastIndex=o+2:this.lastIndex=o+1,!0}return!1},lastIndex:0};function checkLineBreaksIssues(s,a){if(has$6(s,"LINE_BREAKS"))return!1;if(isRegExp$1$1(s.PATTERN)){try{canMatchCharCode(a,s.PATTERN)}catch(o){return{issue:LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:o.message}}return!1}else{if(isString$5(s.PATTERN))return!1;if(isCustomPattern(s))return{issue:LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function buildLineBreakIssueMessage(s,a){if(a.issue===LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${s.name}> Token Type
	 Root cause: ${a.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(a.issue===LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${s.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function getCharCodes(s){return map(s,o=>isString$5(o)?o.charCodeAt(0):o)}function addToMapOfArrays(s,a,o){s[a]===void 0?s[a]=[o]:s[a].push(o)}const minOptimizationVal=256;let charCodeToOptimizedIdxMap=[];function charCodeToOptimizedIndex(s){return s<minOptimizationVal?s:charCodeToOptimizedIdxMap[s]}function initCharCodeToOptimizedIndexMap(){if(isEmpty$2(charCodeToOptimizedIdxMap)){charCodeToOptimizedIdxMap=new Array(65536);for(let s=0;s<65536;s++)charCodeToOptimizedIdxMap[s]=s>255?255+~~(s/255):s}}function tokenStructuredMatcher(s,a){const o=s.tokenTypeIdx;return o===a.tokenTypeIdx?!0:a.isParent===!0&&a.categoryMatchesMap[o]===!0}function tokenStructuredMatcherNoCategories(s,a){return s.tokenTypeIdx===a.tokenTypeIdx}let tokenShortNameIdx=1;const tokenIdxToClass={};function augmentTokenTypes(s){const a=expandCategories(s);assignTokenDefaultProps(a),assignCategoriesMapProp(a),assignCategoriesTokensProp(a),forEach$1(a,o=>{o.isParent=o.categoryMatches.length>0})}function expandCategories(s){let a=clone$1(s),o=s,c=!0;for(;c;){o=compact$1(flatten$1(map(o,b=>b.CATEGORIES)));const d=difference$1(o,a);a=a.concat(d),isEmpty$2(d)?c=!1:o=d}return a}function assignTokenDefaultProps(s){forEach$1(s,a=>{hasShortKeyProperty(a)||(tokenIdxToClass[tokenShortNameIdx]=a,a.tokenTypeIdx=tokenShortNameIdx++),hasCategoriesProperty(a)&&!isArray$1$1(a.CATEGORIES)&&(a.CATEGORIES=[a.CATEGORIES]),hasCategoriesProperty(a)||(a.CATEGORIES=[]),hasExtendingTokensTypesProperty(a)||(a.categoryMatches=[]),hasExtendingTokensTypesMapProperty(a)||(a.categoryMatchesMap={})})}function assignCategoriesTokensProp(s){forEach$1(s,a=>{a.categoryMatches=[],forEach$1(a.categoryMatchesMap,(o,c)=>{a.categoryMatches.push(tokenIdxToClass[c].tokenTypeIdx)})})}function assignCategoriesMapProp(s){forEach$1(s,a=>{singleAssignCategoriesToksMap([],a)})}function singleAssignCategoriesToksMap(s,a){forEach$1(s,o=>{a.categoryMatchesMap[o.tokenTypeIdx]=!0}),forEach$1(a.CATEGORIES,o=>{const c=s.concat(a);includes(c,o)||singleAssignCategoriesToksMap(c,o)})}function hasShortKeyProperty(s){return has$6(s,"tokenTypeIdx")}function hasCategoriesProperty(s){return has$6(s,"CATEGORIES")}function hasExtendingTokensTypesProperty(s){return has$6(s,"categoryMatches")}function hasExtendingTokensTypesMapProperty(s){return has$6(s,"categoryMatchesMap")}function isTokenType(s){return has$6(s,"tokenTypeIdx")}const defaultLexerErrorProvider={buildUnableToPopLexerModeMessage(s){return`Unable to pop Lexer Mode after encountering Token ->${s.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(s,a,o,c,d){return`unexpected character: ->${s.charAt(a)}<- at offset: ${a}, skipped ${o} characters.`}};var LexerDefinitionErrorType;(function(s){s[s.MISSING_PATTERN=0]="MISSING_PATTERN",s[s.INVALID_PATTERN=1]="INVALID_PATTERN",s[s.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",s[s.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",s[s.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",s[s.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",s[s.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",s[s.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",s[s.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",s[s.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",s[s.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",s[s.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",s[s.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",s[s.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",s[s.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",s[s.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",s[s.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",s[s.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(LexerDefinitionErrorType||(LexerDefinitionErrorType={}));const DEFAULT_LEXER_CONFIG={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(DEFAULT_LEXER_CONFIG);class Lexer{constructor(a,o=DEFAULT_LEXER_CONFIG){if(this.lexerDefinition=a,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(d,b)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const $=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${$}--> <${d}>`);const{time:j,value:_e}=timer(b),et=j>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&et(`${$}<-- <${d}> time: ${j}ms`),this.traceInitIndent--,_e}else return b()},typeof o=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=assign$1$1({},DEFAULT_LEXER_CONFIG,o);const c=this.config.traceInitPerf;c===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof c=="number"&&(this.traceInitMaxIdent=c,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let d,b=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===DEFAULT_LEXER_CONFIG.lineTerminatorsPattern)this.config.lineTerminatorsPattern=LineTerminatorOptimizedTester;else if(this.config.lineTerminatorCharacters===DEFAULT_LEXER_CONFIG.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(o.safeMode&&o.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),isArray$1$1(a)?d={modes:{defaultMode:clone$1(a)},defaultMode:DEFAULT_MODE}:(b=!1,d=clone$1(a))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(performRuntimeChecks(d,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(performWarningRuntimeChecks(d,this.trackStartLines,this.config.lineTerminatorCharacters))})),d.modes=d.modes?d.modes:{},forEach$1(d.modes,(j,_e)=>{d.modes[_e]=reject(j,et=>isUndefined(et))});const $=keys$3(d.modes);if(forEach$1(d.modes,(j,_e)=>{this.TRACE_INIT(`Mode: <${_e}> processing`,()=>{if(this.modes.push(_e),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(validatePatterns(j,$))}),isEmpty$2(this.lexerDefinitionErrors)){augmentTokenTypes(j);let et;this.TRACE_INIT("analyzeTokenTypes",()=>{et=analyzeTokenTypes(j,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:o.positionTracking,ensureOptimizations:o.ensureOptimizations,safeMode:o.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[_e]=et.patternIdxToConfig,this.charCodeToPatternIdxToConfig[_e]=et.charCodeToPatternIdxToConfig,this.emptyGroups=assign$1$1({},this.emptyGroups,et.emptyGroups),this.hasCustom=et.hasCustom||this.hasCustom,this.canModeBeOptimized[_e]=et.canBeOptimized}})}),this.defaultMode=d.defaultMode,!isEmpty$2(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const _e=map(this.lexerDefinitionErrors,et=>et.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+_e)}forEach$1(this.lexerDefinitionWarning,j=>{PRINT_WARNING(j.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(SUPPORT_STICKY?(this.chopInput=identity$4,this.match=this.matchWithTest):(this.updateLastIndex=noop$2,this.match=this.matchWithExec),b&&(this.handleModes=noop$2),this.trackStartLines===!1&&(this.computeNewColumn=identity$4),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=noop$2),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const j=reduce$1(this.canModeBeOptimized,(_e,et,tt)=>(et===!1&&_e.push(tt),_e),[]);if(o.ensureOptimizations&&!isEmpty$2(j))throw Error(`Lexer Modes: < ${j.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{clearRegExpParserCache()}),this.TRACE_INIT("toFastProperties",()=>{toFastProperties(this)})})}tokenize(a,o=this.defaultMode){if(!isEmpty$2(this.lexerDefinitionErrors)){const d=map(this.lexerDefinitionErrors,b=>b.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+d)}return this.tokenizeInternal(a,o)}tokenizeInternal(a,o){let c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st,ot;const ht=a,dt=ht.length;let ft=0,mt=0;const gt=this.hasCustom?0:Math.floor(a.length/10),vt=new Array(gt),yt=[];let Et=this.trackStartLines?1:void 0,St=this.trackStartLines?1:void 0;const Ct=cloneEmptyGroups(this.emptyGroups),wt=this.trackStartLines,_t=this.config.lineTerminatorsPattern;let Tt=0,Mt=[],Bt=[];const Rt=[],bt=[];Object.freeze(bt);let Pt;function Dt(){return Mt}function $t(er){const sr=charCodeToOptimizedIndex(er),Ar=Bt[sr];return Ar===void 0?bt:Ar}const Lt=er=>{if(Rt.length===1&&er.tokenType.PUSH_MODE===void 0){const sr=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(er);yt.push({offset:er.startOffset,line:er.startLine,column:er.startColumn,length:er.image.length,message:sr})}else{Rt.pop();const sr=last(Rt);Mt=this.patternIdxToConfig[sr],Bt=this.charCodeToPatternIdxToConfig[sr],Tt=Mt.length;const Ar=this.canModeBeOptimized[sr]&&this.config.safeMode===!1;Bt&&Ar?Pt=$t:Pt=Dt}};function Jt(er){Rt.push(er),Bt=this.charCodeToPatternIdxToConfig[er],Mt=this.patternIdxToConfig[er],Tt=Mt.length,Tt=Mt.length;const sr=this.canModeBeOptimized[er]&&this.config.safeMode===!1;Bt&&sr?Pt=$t:Pt=Dt}Jt.call(this,o);let Qt;const or=this.config.recoveryEnabled;for(;ft<dt;){_e=null;const er=ht.charCodeAt(ft),sr=Pt(er),Ar=sr.length;for(c=0;c<Ar;c++){Qt=sr[c];const Er=Qt.pattern;et=null;const Tr=Qt.short;if(Tr!==!1?er===Tr&&(_e=Er):Qt.isCustom===!0?(ot=Er.exec(ht,ft,vt,Ct),ot!==null?(_e=ot[0],ot.payload!==void 0&&(et=ot.payload)):_e=null):(this.updateLastIndex(Er,ft),_e=this.match(Er,a,ft)),_e!==null){if(j=Qt.longerAlt,j!==void 0){const ur=j.length;for(b=0;b<ur;b++){const kt=Mt[j[b]],Xt=kt.pattern;if(tt=null,kt.isCustom===!0?(ot=Xt.exec(ht,ft,vt,Ct),ot!==null?($=ot[0],ot.payload!==void 0&&(tt=ot.payload)):$=null):(this.updateLastIndex(Xt,ft),$=this.match(Xt,a,ft)),$&&$.length>_e.length){_e=$,et=tt,Qt=kt;break}}}break}}if(_e!==null){if(rt=_e.length,nt=Qt.group,nt!==void 0&&(it=Qt.tokenTypeIdx,at=this.createTokenInstance(_e,ft,it,Qt.tokenType,Et,St,rt),this.handlePayload(at,et),nt===!1?mt=this.addToken(vt,mt,at):Ct[nt].push(at)),a=this.chopInput(a,rt),ft=ft+rt,St=this.computeNewColumn(St,rt),wt===!0&&Qt.canLineTerminator===!0){let Er=0,Tr,ur;_t.lastIndex=0;do Tr=_t.test(_e),Tr===!0&&(ur=_t.lastIndex-1,Er++);while(Tr===!0);Er!==0&&(Et=Et+Er,St=rt-ur,this.updateTokenEndLineColumnLocation(at,nt,ur,Er,Et,St,rt))}this.handleModes(Qt,Lt,Jt,at)}else{const Er=ft,Tr=Et,ur=St;let kt=or===!1;for(;kt===!1&&ft<dt;)for(a=this.chopInput(a,1),ft++,d=0;d<Tt;d++){const Xt=Mt[d],ar=Xt.pattern,yr=Xt.short;if(yr!==!1?ht.charCodeAt(ft)===yr&&(kt=!0):Xt.isCustom===!0?kt=ar.exec(ht,ft,vt,Ct)!==null:(this.updateLastIndex(ar,ft),kt=ar.exec(a)!==null),kt===!0)break}if(ct=ft-Er,St=this.computeNewColumn(St,ct),st=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(ht,Er,ct,Tr,ur),yt.push({offset:Er,line:Tr,column:ur,length:ct,message:st}),or===!1)break}}return this.hasCustom||(vt.length=mt),{tokens:vt,groups:Ct,errors:yt}}handleModes(a,o,c,d){if(a.pop===!0){const b=a.push;o(d),b!==void 0&&c.call(this,b)}else a.push!==void 0&&c.call(this,a.push)}chopInput(a,o){return a.substring(o)}updateLastIndex(a,o){a.lastIndex=o}updateTokenEndLineColumnLocation(a,o,c,d,b,$,j){let _e,et;o!==void 0&&(_e=c===j-1,et=_e?-1:0,d===1&&_e===!0||(a.endLine=b+et,a.endColumn=$-1+-et))}computeNewColumn(a,o){return a+o}createOffsetOnlyToken(a,o,c,d){return{image:a,startOffset:o,tokenTypeIdx:c,tokenType:d}}createStartOnlyToken(a,o,c,d,b,$){return{image:a,startOffset:o,startLine:b,startColumn:$,tokenTypeIdx:c,tokenType:d}}createFullToken(a,o,c,d,b,$,j){return{image:a,startOffset:o,endOffset:o+j-1,startLine:b,endLine:b,startColumn:$,endColumn:$+j-1,tokenTypeIdx:c,tokenType:d}}addTokenUsingPush(a,o,c){return a.push(c),o}addTokenUsingMemberAccess(a,o,c){return a[o]=c,o++,o}handlePayloadNoCustom(a,o){}handlePayloadWithCustom(a,o){o!==null&&(a.payload=o)}matchWithTest(a,o,c){return a.test(o)===!0?o.substring(c,a.lastIndex):null}matchWithExec(a,o){const c=a.exec(o);return c!==null?c[0]:null}}Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Lexer.NA=/NOT_APPLICABLE/;function tokenLabel(s){return hasTokenLabel(s)?s.LABEL:s.name}function hasTokenLabel(s){return isString$5(s.LABEL)&&s.LABEL!==""}const PARENT="parent",CATEGORIES="categories",LABEL="label",GROUP="group",PUSH_MODE="push_mode",POP_MODE="pop_mode",LONGER_ALT="longer_alt",LINE_BREAKS="line_breaks",START_CHARS_HINT="start_chars_hint";function createToken(s){return createTokenInternal(s)}function createTokenInternal(s){const a=s.pattern,o={};if(o.name=s.name,isUndefined(a)||(o.PATTERN=a),has$6(s,PARENT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return has$6(s,CATEGORIES)&&(o.CATEGORIES=s[CATEGORIES]),augmentTokenTypes([o]),has$6(s,LABEL)&&(o.LABEL=s[LABEL]),has$6(s,GROUP)&&(o.GROUP=s[GROUP]),has$6(s,POP_MODE)&&(o.POP_MODE=s[POP_MODE]),has$6(s,PUSH_MODE)&&(o.PUSH_MODE=s[PUSH_MODE]),has$6(s,LONGER_ALT)&&(o.LONGER_ALT=s[LONGER_ALT]),has$6(s,LINE_BREAKS)&&(o.LINE_BREAKS=s[LINE_BREAKS]),has$6(s,START_CHARS_HINT)&&(o.START_CHARS_HINT=s[START_CHARS_HINT]),o}const EOF=createToken({name:"EOF",pattern:Lexer.NA});augmentTokenTypes([EOF]);function createTokenInstance(s,a,o,c,d,b,$,j){return{image:a,startOffset:o,endOffset:c,startLine:d,endLine:b,startColumn:$,endColumn:j,tokenTypeIdx:s.tokenTypeIdx,tokenType:s}}function tokenMatcher(s,a){return tokenStructuredMatcher(s,a)}const defaultParserErrorProvider={buildMismatchTokenMessage({expected:s,actual:a,previous:o,ruleName:c}){return`Expecting ${hasTokenLabel(s)?`--> ${tokenLabel(s)} <--`:`token of type --> ${s.name} <--`} but found --> '${a.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:s,ruleName:a}){return"Redundant input, expecting EOF but found: "+s.image},buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:c,ruleName:d}){const b="Expecting: ",j=`
but found: '`+head(a).image+"'";if(c)return b+c+j;{const _e=reduce$1(s,(nt,it)=>nt.concat(it),[]),et=map(_e,nt=>`[${map(nt,it=>tokenLabel(it)).join(", ")}]`),rt=`one of these possible Token sequences:
${map(et,(nt,it)=>`  ${it+1}. ${nt}`).join(`
`)}`;return b+rt+j}},buildEarlyExitMessage({expectedIterationPaths:s,actual:a,customUserDescription:o,ruleName:c}){const d="Expecting: ",$=`
but found: '`+head(a).image+"'";if(o)return d+o+$;{const _e=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${map(s,et=>`[${map(et,tt=>tokenLabel(tt)).join(",")}]`).join(" ,")}>`;return d+_e+$}}};Object.freeze(defaultParserErrorProvider);const defaultGrammarResolverErrorProvider={buildRuleNotFoundError(s,a){return"Invalid grammar, reference to a rule which is not defined: ->"+a.nonTerminalName+`<-
inside top level rule: ->`+s.name+"<-"}},defaultGrammarValidatorErrorProvider={buildDuplicateFoundError(s,a){function o(tt){return tt instanceof Terminal?tt.terminalType.name:tt instanceof NonTerminal?tt.nonTerminalName:""}const c=s.name,d=head(a),b=d.idx,$=getProductionDslName(d),j=o(d),_e=b>0;let et=`->${$}${_e?b:""}<- ${j?`with argument: ->${j}<-`:""}
                  appears more than once (${a.length} times) in the top level rule: ->${c}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return et=et.replace(/[ \t]+/g," "),et=et.replace(/\s\s+/g,`
`),et},buildNamespaceConflictError(s){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${s.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(s){const a=map(s.prefixPath,d=>tokenLabel(d)).join(", "),o=s.alternation.idx===0?"":s.alternation.idx;return`Ambiguous alternatives: <${s.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${o}> inside <${s.topLevelRule.name}> Rule,
<${a}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(s){const a=map(s.prefixPath,d=>tokenLabel(d)).join(", "),o=s.alternation.idx===0?"":s.alternation.idx;let c=`Ambiguous Alternatives Detected: <${s.ambiguityIndices.join(" ,")}> in <OR${o}> inside <${s.topLevelRule.name}> Rule,
<${a}> may appears as a prefix path in all these alternatives.
`;return c=c+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,c},buildEmptyRepetitionError(s){let a=getProductionDslName(s.repetition);return s.repetition.idx!==0&&(a+=s.repetition.idx),`The repetition <${a}> within Rule <${s.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(s){return"deprecated"},buildEmptyAlternationError(s){return`Ambiguous empty alternative: <${s.emptyChoiceIdx+1}> in <OR${s.alternation.idx}> inside <${s.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(s){return`An Alternation cannot have more than 256 alternatives:
<OR${s.alternation.idx}> inside <${s.topLevelRule.name}> Rule.
 has ${s.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(s){const a=s.topLevelRule.name,o=map(s.leftRecursionPath,b=>b.name),c=`${a} --> ${o.concat([a]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${a}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${c}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(s){return"deprecated"},buildDuplicateRuleNameError(s){let a;return s.topLevelRule instanceof Rule?a=s.topLevelRule.name:a=s.topLevelRule,`Duplicate definition, rule: ->${a}<- is already defined in the grammar: ->${s.grammarName}<-`}};function resolveGrammar$1(s,a){const o=new GastRefResolverVisitor(s,a);return o.resolveRefs(),o.errors}class GastRefResolverVisitor extends GAstVisitor{constructor(a,o){super(),this.nameToTopRule=a,this.errMsgProvider=o,this.errors=[]}resolveRefs(){forEach$1(values(this.nameToTopRule),a=>{this.currTopLevel=a,a.accept(this)})}visitNonTerminal(a){const o=this.nameToTopRule[a.nonTerminalName];if(o)a.referencedRule=o;else{const c=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,a);this.errors.push({message:c,type:ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:a.nonTerminalName})}}}class AbstractNextPossibleTokensWalker extends RestWalker{constructor(a,o){super(),this.topProd=a,this.path=o,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=clone$1(this.path.ruleStack).reverse(),this.occurrenceStack=clone$1(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(a,o=[]){this.found||super.walk(a,o)}walkProdRef(a,o,c){if(a.referencedRule.name===this.nextProductionName&&a.idx===this.nextProductionOccurrence){const d=o.concat(c);this.updateExpectedNext(),this.walk(a.referencedRule,d)}}updateExpectedNext(){isEmpty$2(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class NextAfterTokenWalker extends AbstractNextPossibleTokensWalker{constructor(a,o){super(a,o),this.path=o,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(a,o,c){if(this.isAtEndOfPath&&a.terminalType.name===this.nextTerminalName&&a.idx===this.nextTerminalOccurrence&&!this.found){const d=o.concat(c),b=new Alternative({definition:d});this.possibleTokTypes=first(b),this.found=!0}}}class AbstractNextTerminalAfterProductionWalker extends RestWalker{constructor(a,o){super(),this.topRule=a,this.occurrence=o,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class NextTerminalAfterManyWalker extends AbstractNextTerminalAfterProductionWalker{walkMany(a,o,c){if(a.idx===this.occurrence){const d=head(o.concat(c));this.result.isEndOfRule=d===void 0,d instanceof Terminal&&(this.result.token=d.terminalType,this.result.occurrence=d.idx)}else super.walkMany(a,o,c)}}class NextTerminalAfterManySepWalker extends AbstractNextTerminalAfterProductionWalker{walkManySep(a,o,c){if(a.idx===this.occurrence){const d=head(o.concat(c));this.result.isEndOfRule=d===void 0,d instanceof Terminal&&(this.result.token=d.terminalType,this.result.occurrence=d.idx)}else super.walkManySep(a,o,c)}}class NextTerminalAfterAtLeastOneWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOne(a,o,c){if(a.idx===this.occurrence){const d=head(o.concat(c));this.result.isEndOfRule=d===void 0,d instanceof Terminal&&(this.result.token=d.terminalType,this.result.occurrence=d.idx)}else super.walkAtLeastOne(a,o,c)}}class NextTerminalAfterAtLeastOneSepWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOneSep(a,o,c){if(a.idx===this.occurrence){const d=head(o.concat(c));this.result.isEndOfRule=d===void 0,d instanceof Terminal&&(this.result.token=d.terminalType,this.result.occurrence=d.idx)}else super.walkAtLeastOneSep(a,o,c)}}function possiblePathsFrom(s,a,o=[]){o=clone$1(o);let c=[],d=0;function b(j){return j.concat(drop(s,d+1))}function $(j){const _e=possiblePathsFrom(b(j),a,o);return c.concat(_e)}for(;o.length<a&&d<s.length;){const j=s[d];if(j instanceof Alternative)return $(j.definition);if(j instanceof NonTerminal)return $(j.definition);if(j instanceof Option)c=$(j.definition);else if(j instanceof RepetitionMandatory){const _e=j.definition.concat([new Repetition({definition:j.definition})]);return $(_e)}else if(j instanceof RepetitionMandatoryWithSeparator){const _e=[new Alternative({definition:j.definition}),new Repetition({definition:[new Terminal({terminalType:j.separator})].concat(j.definition)})];return $(_e)}else if(j instanceof RepetitionWithSeparator){const _e=j.definition.concat([new Repetition({definition:[new Terminal({terminalType:j.separator})].concat(j.definition)})]);c=$(_e)}else if(j instanceof Repetition){const _e=j.definition.concat([new Repetition({definition:j.definition})]);c=$(_e)}else{if(j instanceof Alternation)return forEach$1(j.definition,_e=>{isEmpty$2(_e.definition)===!1&&(c=$(_e.definition))}),c;if(j instanceof Terminal)o.push(j.terminalType);else throw Error("non exhaustive match")}d++}return c.push({partialPath:o,suffixDef:drop(s,d)}),c}function nextPossibleTokensAfter(s,a,o,c){const d="EXIT_NONE_TERMINAL",b=[d],$="EXIT_ALTERNATIVE";let j=!1;const _e=a.length,et=_e-c-1,tt=[],rt=[];for(rt.push({idx:-1,def:s,ruleStack:[],occurrenceStack:[]});!isEmpty$2(rt);){const nt=rt.pop();if(nt===$){j&&last(rt).idx<=et&&rt.pop();continue}const it=nt.def,at=nt.idx,ct=nt.ruleStack,st=nt.occurrenceStack;if(isEmpty$2(it))continue;const ot=it[0];if(ot===d){const ht={idx:at,def:drop(it),ruleStack:dropRight(ct),occurrenceStack:dropRight(st)};rt.push(ht)}else if(ot instanceof Terminal)if(at<_e-1){const ht=at+1,dt=a[ht];if(o(dt,ot.terminalType)){const ft={idx:ht,def:drop(it),ruleStack:ct,occurrenceStack:st};rt.push(ft)}}else if(at===_e-1)tt.push({nextTokenType:ot.terminalType,nextTokenOccurrence:ot.idx,ruleStack:ct,occurrenceStack:st}),j=!0;else throw Error("non exhaustive match");else if(ot instanceof NonTerminal){const ht=clone$1(ct);ht.push(ot.nonTerminalName);const dt=clone$1(st);dt.push(ot.idx);const ft={idx:at,def:ot.definition.concat(b,drop(it)),ruleStack:ht,occurrenceStack:dt};rt.push(ft)}else if(ot instanceof Option){const ht={idx:at,def:drop(it),ruleStack:ct,occurrenceStack:st};rt.push(ht),rt.push($);const dt={idx:at,def:ot.definition.concat(drop(it)),ruleStack:ct,occurrenceStack:st};rt.push(dt)}else if(ot instanceof RepetitionMandatory){const ht=new Repetition({definition:ot.definition,idx:ot.idx}),dt=ot.definition.concat([ht],drop(it)),ft={idx:at,def:dt,ruleStack:ct,occurrenceStack:st};rt.push(ft)}else if(ot instanceof RepetitionMandatoryWithSeparator){const ht=new Terminal({terminalType:ot.separator}),dt=new Repetition({definition:[ht].concat(ot.definition),idx:ot.idx}),ft=ot.definition.concat([dt],drop(it)),mt={idx:at,def:ft,ruleStack:ct,occurrenceStack:st};rt.push(mt)}else if(ot instanceof RepetitionWithSeparator){const ht={idx:at,def:drop(it),ruleStack:ct,occurrenceStack:st};rt.push(ht),rt.push($);const dt=new Terminal({terminalType:ot.separator}),ft=new Repetition({definition:[dt].concat(ot.definition),idx:ot.idx}),mt=ot.definition.concat([ft],drop(it)),gt={idx:at,def:mt,ruleStack:ct,occurrenceStack:st};rt.push(gt)}else if(ot instanceof Repetition){const ht={idx:at,def:drop(it),ruleStack:ct,occurrenceStack:st};rt.push(ht),rt.push($);const dt=new Repetition({definition:ot.definition,idx:ot.idx}),ft=ot.definition.concat([dt],drop(it)),mt={idx:at,def:ft,ruleStack:ct,occurrenceStack:st};rt.push(mt)}else if(ot instanceof Alternation)for(let ht=ot.definition.length-1;ht>=0;ht--){const dt=ot.definition[ht],ft={idx:at,def:dt.definition.concat(drop(it)),ruleStack:ct,occurrenceStack:st};rt.push(ft),rt.push($)}else if(ot instanceof Alternative)rt.push({idx:at,def:ot.definition.concat(drop(it)),ruleStack:ct,occurrenceStack:st});else if(ot instanceof Rule)rt.push(expandTopLevelRule(ot,at,ct,st));else throw Error("non exhaustive match")}return tt}function expandTopLevelRule(s,a,o,c){const d=clone$1(o);d.push(s.name);const b=clone$1(c);return b.push(1),{idx:a,def:s.definition,ruleStack:d,occurrenceStack:b}}var PROD_TYPE;(function(s){s[s.OPTION=0]="OPTION",s[s.REPETITION=1]="REPETITION",s[s.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",s[s.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",s[s.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",s[s.ALTERNATION=5]="ALTERNATION"})(PROD_TYPE||(PROD_TYPE={}));function getProdType(s){if(s instanceof Option||s==="Option")return PROD_TYPE.OPTION;if(s instanceof Repetition||s==="Repetition")return PROD_TYPE.REPETITION;if(s instanceof RepetitionMandatory||s==="RepetitionMandatory")return PROD_TYPE.REPETITION_MANDATORY;if(s instanceof RepetitionMandatoryWithSeparator||s==="RepetitionMandatoryWithSeparator")return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;if(s instanceof RepetitionWithSeparator||s==="RepetitionWithSeparator")return PROD_TYPE.REPETITION_WITH_SEPARATOR;if(s instanceof Alternation||s==="Alternation")return PROD_TYPE.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(s,a,o,c,d,b){const $=getLookaheadPathsForOr(s,a,o),j=areTokenCategoriesNotUsed($)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return b($,c,j,d)}function buildLookaheadFuncForOptionalProd(s,a,o,c,d,b){const $=getLookaheadPathsForOptionalProd(s,a,d,o),j=areTokenCategoriesNotUsed($)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return b($[0],j,c)}function buildAlternativesLookAheadFunc(s,a,o,c){const d=s.length,b=every(s,$=>every($,j=>j.length===1));if(a)return function($){const j=map($,_e=>_e.GATE);for(let _e=0;_e<d;_e++){const et=s[_e],tt=et.length,rt=j[_e];if(!(rt!==void 0&&rt.call(this)===!1))e:for(let nt=0;nt<tt;nt++){const it=et[nt],at=it.length;for(let ct=0;ct<at;ct++){const st=this.LA(ct+1);if(o(st,it[ct])===!1)continue e}return _e}}};if(b&&!c){const $=map(s,_e=>flatten$1(_e)),j=reduce$1($,(_e,et,tt)=>(forEach$1(et,rt=>{has$6(_e,rt.tokenTypeIdx)||(_e[rt.tokenTypeIdx]=tt),forEach$1(rt.categoryMatches,nt=>{has$6(_e,nt)||(_e[nt]=tt)})}),_e),{});return function(){const _e=this.LA(1);return j[_e.tokenTypeIdx]}}else return function(){for(let $=0;$<d;$++){const j=s[$],_e=j.length;e:for(let et=0;et<_e;et++){const tt=j[et],rt=tt.length;for(let nt=0;nt<rt;nt++){const it=this.LA(nt+1);if(o(it,tt[nt])===!1)continue e}return $}}}}function buildSingleAlternativeLookaheadFunction(s,a,o){const c=every(s,b=>b.length===1),d=s.length;if(c&&!o){const b=flatten$1(s);if(b.length===1&&isEmpty$2(b[0].categoryMatches)){const j=b[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===j}}else{const $=reduce$1(b,(j,_e,et)=>(j[_e.tokenTypeIdx]=!0,forEach$1(_e.categoryMatches,tt=>{j[tt]=!0}),j),[]);return function(){const j=this.LA(1);return $[j.tokenTypeIdx]===!0}}}else return function(){e:for(let b=0;b<d;b++){const $=s[b],j=$.length;for(let _e=0;_e<j;_e++){const et=this.LA(_e+1);if(a(et,$[_e])===!1)continue e}return!0}return!1}}class RestDefinitionFinderWalker extends RestWalker{constructor(a,o,c){super(),this.topProd=a,this.targetOccurrence=o,this.targetProdType=c}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(a,o,c,d){return a.idx===this.targetOccurrence&&this.targetProdType===o?(this.restDef=c.concat(d),!0):!1}walkOption(a,o,c){this.checkIsTarget(a,PROD_TYPE.OPTION,o,c)||super.walkOption(a,o,c)}walkAtLeastOne(a,o,c){this.checkIsTarget(a,PROD_TYPE.REPETITION_MANDATORY,o,c)||super.walkOption(a,o,c)}walkAtLeastOneSep(a,o,c){this.checkIsTarget(a,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,o,c)||super.walkOption(a,o,c)}walkMany(a,o,c){this.checkIsTarget(a,PROD_TYPE.REPETITION,o,c)||super.walkOption(a,o,c)}walkManySep(a,o,c){this.checkIsTarget(a,PROD_TYPE.REPETITION_WITH_SEPARATOR,o,c)||super.walkOption(a,o,c)}}class InsideDefinitionFinderVisitor extends GAstVisitor{constructor(a,o,c){super(),this.targetOccurrence=a,this.targetProdType=o,this.targetRef=c,this.result=[]}checkIsTarget(a,o){a.idx===this.targetOccurrence&&this.targetProdType===o&&(this.targetRef===void 0||a===this.targetRef)&&(this.result=a.definition)}visitOption(a){this.checkIsTarget(a,PROD_TYPE.OPTION)}visitRepetition(a){this.checkIsTarget(a,PROD_TYPE.REPETITION)}visitRepetitionMandatory(a){this.checkIsTarget(a,PROD_TYPE.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(a){this.checkIsTarget(a,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(a){this.checkIsTarget(a,PROD_TYPE.REPETITION_WITH_SEPARATOR)}visitAlternation(a){this.checkIsTarget(a,PROD_TYPE.ALTERNATION)}}function initializeArrayOfArrays(s){const a=new Array(s);for(let o=0;o<s;o++)a[o]=[];return a}function pathToHashKeys(s){let a=[""];for(let o=0;o<s.length;o++){const c=s[o],d=[];for(let b=0;b<a.length;b++){const $=a[b];d.push($+"_"+c.tokenTypeIdx);for(let j=0;j<c.categoryMatches.length;j++){const _e="_"+c.categoryMatches[j];d.push($+_e)}}a=d}return a}function isUniquePrefixHash(s,a,o){for(let c=0;c<s.length;c++){if(c===o)continue;const d=s[c];for(let b=0;b<a.length;b++){const $=a[b];if(d[$]===!0)return!1}}return!0}function lookAheadSequenceFromAlternatives(s,a){const o=map(s,$=>possiblePathsFrom([$],1)),c=initializeArrayOfArrays(o.length),d=map(o,$=>{const j={};return forEach$1($,_e=>{const et=pathToHashKeys(_e.partialPath);forEach$1(et,tt=>{j[tt]=!0})}),j});let b=o;for(let $=1;$<=a;$++){const j=b;b=initializeArrayOfArrays(j.length);for(let _e=0;_e<j.length;_e++){const et=j[_e];for(let tt=0;tt<et.length;tt++){const rt=et[tt].partialPath,nt=et[tt].suffixDef,it=pathToHashKeys(rt);if(isUniquePrefixHash(d,it,_e)||isEmpty$2(nt)||rt.length===a){const ct=c[_e];if(containsPath(ct,rt)===!1){ct.push(rt);for(let st=0;st<it.length;st++){const ot=it[st];d[_e][ot]=!0}}}else{const ct=possiblePathsFrom(nt,$+1,rt);b[_e]=b[_e].concat(ct),forEach$1(ct,st=>{const ot=pathToHashKeys(st.partialPath);forEach$1(ot,ht=>{d[_e][ht]=!0})})}}}}return c}function getLookaheadPathsForOr(s,a,o,c){const d=new InsideDefinitionFinderVisitor(s,PROD_TYPE.ALTERNATION,c);return a.accept(d),lookAheadSequenceFromAlternatives(d.result,o)}function getLookaheadPathsForOptionalProd(s,a,o,c){const d=new InsideDefinitionFinderVisitor(s,o);a.accept(d);const b=d.result,j=new RestDefinitionFinderWalker(a,s,o).startWalking(),_e=new Alternative({definition:b}),et=new Alternative({definition:j});return lookAheadSequenceFromAlternatives([_e,et],c)}function containsPath(s,a){e:for(let o=0;o<s.length;o++){const c=s[o];if(c.length===a.length){for(let d=0;d<c.length;d++){const b=a[d],$=c[d];if((b===$||$.categoryMatchesMap[b.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function isStrictPrefixOfPath(s,a){return s.length<a.length&&every(s,(o,c)=>{const d=a[c];return o===d||d.categoryMatchesMap[o.tokenTypeIdx]})}function areTokenCategoriesNotUsed(s){return every(s,a=>every(a,o=>every(o,c=>isEmpty$2(c.categoryMatches))))}function validateLookahead(s){const a=s.lookaheadStrategy.validate({rules:s.rules,tokenTypes:s.tokenTypes,grammarName:s.grammarName});return map(a,o=>Object.assign({type:ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION},o))}function validateGrammar$1(s,a,o,c){const d=flatMap(s,_e=>validateDuplicateProductions(_e,o)),b=checkTerminalAndNoneTerminalsNameSpace(s,a,o),$=flatMap(s,_e=>validateTooManyAlts(_e,o)),j=flatMap(s,_e=>validateRuleDoesNotAlreadyExist(_e,s,c,o));return d.concat(b,$,j)}function validateDuplicateProductions(s,a){const o=new OccurrenceValidationCollector;s.accept(o);const c=o.allProductions,d=groupBy$1(c,identifyProductionForDuplicates),b=pickBy$2(d,j=>j.length>1);return map(values(b),j=>{const _e=head(j),et=a.buildDuplicateFoundError(s,j),tt=getProductionDslName(_e),rt={message:et,type:ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:s.name,dslName:tt,occurrence:_e.idx},nt=getExtraProductionArgument(_e);return nt&&(rt.parameter=nt),rt})}function identifyProductionForDuplicates(s){return`${getProductionDslName(s)}_#_${s.idx}_#_${getExtraProductionArgument(s)}`}function getExtraProductionArgument(s){return s instanceof Terminal?s.terminalType.name:s instanceof NonTerminal?s.nonTerminalName:""}class OccurrenceValidationCollector extends GAstVisitor{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(a){this.allProductions.push(a)}visitOption(a){this.allProductions.push(a)}visitRepetitionWithSeparator(a){this.allProductions.push(a)}visitRepetitionMandatory(a){this.allProductions.push(a)}visitRepetitionMandatoryWithSeparator(a){this.allProductions.push(a)}visitRepetition(a){this.allProductions.push(a)}visitAlternation(a){this.allProductions.push(a)}visitTerminal(a){this.allProductions.push(a)}}function validateRuleDoesNotAlreadyExist(s,a,o,c){const d=[];if(reduce$1(a,($,j)=>j.name===s.name?$+1:$,0)>1){const $=c.buildDuplicateRuleNameError({topLevelRule:s,grammarName:o});d.push({message:$,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:s.name})}return d}function validateRuleIsOverridden(s,a,o){const c=[];let d;return includes(a,s)||(d=`Invalid rule override, rule: ->${s}<- cannot be overridden in the grammar: ->${o}<-as it is not defined in any of the super grammars `,c.push({message:d,type:ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:s})),c}function validateNoLeftRecursion(s,a,o,c=[]){const d=[],b=getFirstNoneTerminal(a.definition);if(isEmpty$2(b))return[];{const $=s.name;includes(b,s)&&d.push({message:o.buildLeftRecursionError({topLevelRule:s,leftRecursionPath:c}),type:ParserDefinitionErrorType.LEFT_RECURSION,ruleName:$});const _e=difference$1(b,c.concat([s])),et=flatMap(_e,tt=>{const rt=clone$1(c);return rt.push(tt),validateNoLeftRecursion(s,tt,o,rt)});return d.concat(et)}}function getFirstNoneTerminal(s){let a=[];if(isEmpty$2(s))return a;const o=head(s);if(o instanceof NonTerminal)a.push(o.referencedRule);else if(o instanceof Alternative||o instanceof Option||o instanceof RepetitionMandatory||o instanceof RepetitionMandatoryWithSeparator||o instanceof RepetitionWithSeparator||o instanceof Repetition)a=a.concat(getFirstNoneTerminal(o.definition));else if(o instanceof Alternation)a=flatten$1(map(o.definition,b=>getFirstNoneTerminal(b.definition)));else if(!(o instanceof Terminal))throw Error("non exhaustive match");const c=isOptionalProd(o),d=s.length>1;if(c&&d){const b=drop(s);return a.concat(getFirstNoneTerminal(b))}else return a}class OrCollector extends GAstVisitor{constructor(){super(...arguments),this.alternations=[]}visitAlternation(a){this.alternations.push(a)}}function validateEmptyOrAlternative(s,a){const o=new OrCollector;s.accept(o);const c=o.alternations;return flatMap(c,b=>{const $=dropRight(b.definition);return flatMap($,(j,_e)=>{const et=nextPossibleTokensAfter([j],[],tokenStructuredMatcher,1);return isEmpty$2(et)?[{message:a.buildEmptyAlternationError({topLevelRule:s,alternation:b,emptyChoiceIdx:_e}),type:ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:s.name,occurrence:b.idx,alternative:_e+1}]:[]})})}function validateAmbiguousAlternationAlternatives(s,a,o){const c=new OrCollector;s.accept(c);let d=c.alternations;return d=reject(d,$=>$.ignoreAmbiguities===!0),flatMap(d,$=>{const j=$.idx,_e=$.maxLookahead||a,et=getLookaheadPathsForOr(j,s,_e,$),tt=checkAlternativesAmbiguities(et,$,s,o),rt=checkPrefixAlternativesAmbiguities(et,$,s,o);return tt.concat(rt)})}class RepetitionCollector extends GAstVisitor{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(a){this.allProductions.push(a)}visitRepetitionMandatory(a){this.allProductions.push(a)}visitRepetitionMandatoryWithSeparator(a){this.allProductions.push(a)}visitRepetition(a){this.allProductions.push(a)}}function validateTooManyAlts(s,a){const o=new OrCollector;s.accept(o);const c=o.alternations;return flatMap(c,b=>b.definition.length>255?[{message:a.buildTooManyAlternativesError({topLevelRule:s,alternation:b}),type:ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:s.name,occurrence:b.idx}]:[])}function validateSomeNonEmptyLookaheadPath(s,a,o){const c=[];return forEach$1(s,d=>{const b=new RepetitionCollector;d.accept(b);const $=b.allProductions;forEach$1($,j=>{const _e=getProdType(j),et=j.maxLookahead||a,tt=j.idx,nt=getLookaheadPathsForOptionalProd(tt,d,_e,et)[0];if(isEmpty$2(flatten$1(nt))){const it=o.buildEmptyRepetitionError({topLevelRule:d,repetition:j});c.push({message:it,type:ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:d.name})}})}),c}function checkAlternativesAmbiguities(s,a,o,c){const d=[],b=reduce$1(s,(j,_e,et)=>(a.definition[et].ignoreAmbiguities===!0||forEach$1(_e,tt=>{const rt=[et];forEach$1(s,(nt,it)=>{et!==it&&containsPath(nt,tt)&&a.definition[it].ignoreAmbiguities!==!0&&rt.push(it)}),rt.length>1&&!containsPath(d,tt)&&(d.push(tt),j.push({alts:rt,path:tt}))}),j),[]);return map(b,j=>{const _e=map(j.alts,tt=>tt+1);return{message:c.buildAlternationAmbiguityError({topLevelRule:o,alternation:a,ambiguityIndices:_e,prefixPath:j.path}),type:ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:o.name,occurrence:a.idx,alternatives:j.alts}})}function checkPrefixAlternativesAmbiguities(s,a,o,c){const d=reduce$1(s,($,j,_e)=>{const et=map(j,tt=>({idx:_e,path:tt}));return $.concat(et)},[]);return compact$1(flatMap(d,$=>{if(a.definition[$.idx].ignoreAmbiguities===!0)return[];const _e=$.idx,et=$.path,tt=filter$2(d,nt=>a.definition[nt.idx].ignoreAmbiguities!==!0&&nt.idx<_e&&isStrictPrefixOfPath(nt.path,et));return map(tt,nt=>{const it=[nt.idx+1,_e+1],at=a.idx===0?"":a.idx;return{message:c.buildAlternationPrefixAmbiguityError({topLevelRule:o,alternation:a,ambiguityIndices:it,prefixPath:nt.path}),type:ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:o.name,occurrence:at,alternatives:it}})}))}function checkTerminalAndNoneTerminalsNameSpace(s,a,o){const c=[],d=map(a,b=>b.name);return forEach$1(s,b=>{const $=b.name;if(includes(d,$)){const j=o.buildNamespaceConflictError(b);c.push({message:j,type:ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:$})}}),c}function resolveGrammar(s){const a=defaults$1$1(s,{errMsgProvider:defaultGrammarResolverErrorProvider}),o={};return forEach$1(s.rules,c=>{o[c.name]=c}),resolveGrammar$1(o,a.errMsgProvider)}function validateGrammar(s){return s=defaults$1$1(s,{errMsgProvider:defaultGrammarValidatorErrorProvider}),validateGrammar$1(s.rules,s.tokenTypes,s.errMsgProvider,s.grammarName)}const MISMATCHED_TOKEN_EXCEPTION="MismatchedTokenException",NO_VIABLE_ALT_EXCEPTION="NoViableAltException",EARLY_EXIT_EXCEPTION="EarlyExitException",NOT_ALL_INPUT_PARSED_EXCEPTION="NotAllInputParsedException",RECOGNITION_EXCEPTION_NAMES=[MISMATCHED_TOKEN_EXCEPTION,NO_VIABLE_ALT_EXCEPTION,EARLY_EXIT_EXCEPTION,NOT_ALL_INPUT_PARSED_EXCEPTION];Object.freeze(RECOGNITION_EXCEPTION_NAMES);function isRecognitionException(s){return includes(RECOGNITION_EXCEPTION_NAMES,s.name)}class RecognitionException extends Error{constructor(a,o){super(a),this.token=o,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class MismatchedTokenException extends RecognitionException{constructor(a,o,c){super(a,o),this.previousToken=c,this.name=MISMATCHED_TOKEN_EXCEPTION}}class NoViableAltException extends RecognitionException{constructor(a,o,c){super(a,o),this.previousToken=c,this.name=NO_VIABLE_ALT_EXCEPTION}}class NotAllInputParsedException extends RecognitionException{constructor(a,o){super(a,o),this.name=NOT_ALL_INPUT_PARSED_EXCEPTION}}class EarlyExitException extends RecognitionException{constructor(a,o,c){super(a,o),this.previousToken=c,this.name=EARLY_EXIT_EXCEPTION}}const EOF_FOLLOW_KEY={},IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";class InRuleRecoveryException extends Error{constructor(a){super(a),this.name=IN_RULE_RECOVERY_EXCEPTION}}class Recoverable{initRecoverable(a){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=has$6(a,"recoveryEnabled")?a.recoveryEnabled:DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)}getTokenToInsert(a){const o=createTokenInstance(a,"",NaN,NaN,NaN,NaN,NaN,NaN);return o.isInsertedInRecovery=!0,o}canTokenTypeBeInsertedInRecovery(a){return!0}canTokenTypeBeDeletedInRecovery(a){return!0}tryInRepetitionRecovery(a,o,c,d){const b=this.findReSyncTokenType(),$=this.exportLexerState(),j=[];let _e=!1;const et=this.LA(1);let tt=this.LA(1);const rt=()=>{const nt=this.LA(0),it=this.errorMessageProvider.buildMismatchTokenMessage({expected:d,actual:et,previous:nt,ruleName:this.getCurrRuleFullName()}),at=new MismatchedTokenException(it,et,this.LA(0));at.resyncedTokens=dropRight(j),this.SAVE_ERROR(at)};for(;!_e;)if(this.tokenMatcher(tt,d)){rt();return}else if(c.call(this)){rt(),a.apply(this,o);return}else this.tokenMatcher(tt,b)?_e=!0:(tt=this.SKIP_TOKEN(),this.addToResyncTokens(tt,j));this.importLexerState($)}shouldInRepetitionRecoveryBeTried(a,o,c){return!(c===!1||this.tokenMatcher(this.LA(1),a)||this.isBackTracking()||this.canPerformInRuleRecovery(a,this.getFollowsForInRuleRecovery(a,o)))}getFollowsForInRuleRecovery(a,o){const c=this.getCurrentGrammarPath(a,o);return this.getNextPossibleTokenTypes(c)}tryInRuleRecovery(a,o){if(this.canRecoverWithSingleTokenInsertion(a,o))return this.getTokenToInsert(a);if(this.canRecoverWithSingleTokenDeletion(a)){const c=this.SKIP_TOKEN();return this.consumeToken(),c}throw new InRuleRecoveryException("sad sad panda")}canPerformInRuleRecovery(a,o){return this.canRecoverWithSingleTokenInsertion(a,o)||this.canRecoverWithSingleTokenDeletion(a)}canRecoverWithSingleTokenInsertion(a,o){if(!this.canTokenTypeBeInsertedInRecovery(a)||isEmpty$2(o))return!1;const c=this.LA(1);return find$1(o,b=>this.tokenMatcher(c,b))!==void 0}canRecoverWithSingleTokenDeletion(a){return this.canTokenTypeBeDeletedInRecovery(a)?this.tokenMatcher(this.LA(2),a):!1}isInCurrentRuleReSyncSet(a){const o=this.getCurrFollowKey(),c=this.getFollowSetFromFollowKey(o);return includes(c,a)}findReSyncTokenType(){const a=this.flattenFollowSet();let o=this.LA(1),c=2;for(;;){const d=find$1(a,b=>tokenMatcher(o,b));if(d!==void 0)return d;o=this.LA(c),c++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return EOF_FOLLOW_KEY;const a=this.getLastExplicitRuleShortName(),o=this.getLastExplicitRuleOccurrenceIndex(),c=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(a),idxInCallingRule:o,inRule:this.shortRuleNameToFullName(c)}}buildFullFollowKeyStack(){const a=this.RULE_STACK,o=this.RULE_OCCURRENCE_STACK;return map(a,(c,d)=>d===0?EOF_FOLLOW_KEY:{ruleName:this.shortRuleNameToFullName(c),idxInCallingRule:o[d],inRule:this.shortRuleNameToFullName(a[d-1])})}flattenFollowSet(){const a=map(this.buildFullFollowKeyStack(),o=>this.getFollowSetFromFollowKey(o));return flatten$1(a)}getFollowSetFromFollowKey(a){if(a===EOF_FOLLOW_KEY)return[EOF];const o=a.ruleName+a.idxInCallingRule+IN+a.inRule;return this.resyncFollows[o]}addToResyncTokens(a,o){return this.tokenMatcher(a,EOF)||o.push(a),o}reSyncTo(a){const o=[];let c=this.LA(1);for(;this.tokenMatcher(c,a)===!1;)c=this.SKIP_TOKEN(),this.addToResyncTokens(c,o);return dropRight(o)}attemptInRepetitionRecovery(a,o,c,d,b,$,j){}getCurrentGrammarPath(a,o){const c=this.getHumanReadableRuleStack(),d=clone$1(this.RULE_OCCURRENCE_STACK);return{ruleStack:c,occurrenceStack:d,lastTok:a,lastTokOccurrence:o}}getHumanReadableRuleStack(){return map(this.RULE_STACK,a=>this.shortRuleNameToFullName(a))}}function attemptInRepetitionRecovery(s,a,o,c,d,b,$){const j=this.getKeyForAutomaticLookahead(c,d);let _e=this.firstAfterRepMap[j];if(_e===void 0){const nt=this.getCurrRuleFullName(),it=this.getGAstProductions()[nt];_e=new b(it,d).startWalking(),this.firstAfterRepMap[j]=_e}let et=_e.token,tt=_e.occurrence;const rt=_e.isEndOfRule;this.RULE_STACK.length===1&&rt&&et===void 0&&(et=EOF,tt=1),!(et===void 0||tt===void 0)&&this.shouldInRepetitionRecoveryBeTried(et,tt,$)&&this.tryInRepetitionRecovery(s,a,o,et)}const BITS_FOR_METHOD_TYPE=4,BITS_FOR_OCCURRENCE_IDX=8,OR_IDX=1<<BITS_FOR_OCCURRENCE_IDX,OPTION_IDX=2<<BITS_FOR_OCCURRENCE_IDX,MANY_IDX=3<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_IDX=4<<BITS_FOR_OCCURRENCE_IDX,MANY_SEP_IDX=5<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_SEP_IDX=6<<BITS_FOR_OCCURRENCE_IDX;function getKeyForAutomaticLookahead(s,a,o){return o|a|s}class LLkLookaheadStrategy{constructor(a){var o;this.maxLookahead=(o=a==null?void 0:a.maxLookahead)!==null&&o!==void 0?o:DEFAULT_PARSER_CONFIG.maxLookahead}validate(a){const o=this.validateNoLeftRecursion(a.rules);if(isEmpty$2(o)){const c=this.validateEmptyOrAlternatives(a.rules),d=this.validateAmbiguousAlternationAlternatives(a.rules,this.maxLookahead),b=this.validateSomeNonEmptyLookaheadPath(a.rules,this.maxLookahead);return[...o,...c,...d,...b]}return o}validateNoLeftRecursion(a){return flatMap(a,o=>validateNoLeftRecursion(o,o,defaultGrammarValidatorErrorProvider))}validateEmptyOrAlternatives(a){return flatMap(a,o=>validateEmptyOrAlternative(o,defaultGrammarValidatorErrorProvider))}validateAmbiguousAlternationAlternatives(a,o){return flatMap(a,c=>validateAmbiguousAlternationAlternatives(c,o,defaultGrammarValidatorErrorProvider))}validateSomeNonEmptyLookaheadPath(a,o){return validateSomeNonEmptyLookaheadPath(a,o,defaultGrammarValidatorErrorProvider)}buildLookaheadForAlternation(a){return buildLookaheadFuncForOr(a.prodOccurrence,a.rule,a.maxLookahead,a.hasPredicates,a.dynamicTokensEnabled,buildAlternativesLookAheadFunc)}buildLookaheadForOptional(a){return buildLookaheadFuncForOptionalProd(a.prodOccurrence,a.rule,a.maxLookahead,a.dynamicTokensEnabled,getProdType(a.prodType),buildSingleAlternativeLookaheadFunction)}}class LooksAhead{initLooksAhead(a){this.dynamicTokensEnabled=has$6(a,"dynamicTokensEnabled")?a.dynamicTokensEnabled:DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=has$6(a,"maxLookahead")?a.maxLookahead:DEFAULT_PARSER_CONFIG.maxLookahead,this.lookaheadStrategy=has$6(a,"lookaheadStrategy")?a.lookaheadStrategy:new LLkLookaheadStrategy({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(a){forEach$1(a,o=>{this.TRACE_INIT(`${o.name} Rule Lookahead`,()=>{const{alternation:c,repetition:d,option:b,repetitionMandatory:$,repetitionMandatoryWithSeparator:j,repetitionWithSeparator:_e}=collectMethods(o);forEach$1(c,et=>{const tt=et.idx===0?"":et.idx;this.TRACE_INIT(`${getProductionDslName(et)}${tt}`,()=>{const rt=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:et.idx,rule:o,maxLookahead:et.maxLookahead||this.maxLookahead,hasPredicates:et.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),nt=getKeyForAutomaticLookahead(this.fullRuleNameToShort[o.name],OR_IDX,et.idx);this.setLaFuncCache(nt,rt)})}),forEach$1(d,et=>{this.computeLookaheadFunc(o,et.idx,MANY_IDX,"Repetition",et.maxLookahead,getProductionDslName(et))}),forEach$1(b,et=>{this.computeLookaheadFunc(o,et.idx,OPTION_IDX,"Option",et.maxLookahead,getProductionDslName(et))}),forEach$1($,et=>{this.computeLookaheadFunc(o,et.idx,AT_LEAST_ONE_IDX,"RepetitionMandatory",et.maxLookahead,getProductionDslName(et))}),forEach$1(j,et=>{this.computeLookaheadFunc(o,et.idx,AT_LEAST_ONE_SEP_IDX,"RepetitionMandatoryWithSeparator",et.maxLookahead,getProductionDslName(et))}),forEach$1(_e,et=>{this.computeLookaheadFunc(o,et.idx,MANY_SEP_IDX,"RepetitionWithSeparator",et.maxLookahead,getProductionDslName(et))})})})}computeLookaheadFunc(a,o,c,d,b,$){this.TRACE_INIT(`${$}${o===0?"":o}`,()=>{const j=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:o,rule:a,maxLookahead:b||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:d}),_e=getKeyForAutomaticLookahead(this.fullRuleNameToShort[a.name],c,o);this.setLaFuncCache(_e,j)})}getKeyForAutomaticLookahead(a,o){const c=this.getLastExplicitRuleShortName();return getKeyForAutomaticLookahead(c,a,o)}getLaFuncFromCache(a){return this.lookAheadFuncsCache.get(a)}setLaFuncCache(a,o){this.lookAheadFuncsCache.set(a,o)}}class DslMethodsCollectorVisitor extends GAstVisitor{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(a){this.dslMethods.option.push(a)}visitRepetitionWithSeparator(a){this.dslMethods.repetitionWithSeparator.push(a)}visitRepetitionMandatory(a){this.dslMethods.repetitionMandatory.push(a)}visitRepetitionMandatoryWithSeparator(a){this.dslMethods.repetitionMandatoryWithSeparator.push(a)}visitRepetition(a){this.dslMethods.repetition.push(a)}visitAlternation(a){this.dslMethods.alternation.push(a)}}const collectorVisitor=new DslMethodsCollectorVisitor;function collectMethods(s){collectorVisitor.reset(),s.accept(collectorVisitor);const a=collectorVisitor.dslMethods;return collectorVisitor.reset(),a}function setNodeLocationOnlyOffset(s,a){isNaN(s.startOffset)===!0?(s.startOffset=a.startOffset,s.endOffset=a.endOffset):s.endOffset<a.endOffset&&(s.endOffset=a.endOffset)}function setNodeLocationFull(s,a){isNaN(s.startOffset)===!0?(s.startOffset=a.startOffset,s.startColumn=a.startColumn,s.startLine=a.startLine,s.endOffset=a.endOffset,s.endColumn=a.endColumn,s.endLine=a.endLine):s.endOffset<a.endOffset&&(s.endOffset=a.endOffset,s.endColumn=a.endColumn,s.endLine=a.endLine)}function addTerminalToCst(s,a,o){s.children[o]===void 0?s.children[o]=[a]:s.children[o].push(a)}function addNoneTerminalToCst(s,a,o){s.children[a]===void 0?s.children[a]=[o]:s.children[a].push(o)}const NAME="name";function defineNameProp(s,a){Object.defineProperty(s,NAME,{enumerable:!1,configurable:!0,writable:!1,value:a})}function defaultVisit(s,a){const o=keys$3(s),c=o.length;for(let d=0;d<c;d++){const b=o[d],$=s[b],j=$.length;for(let _e=0;_e<j;_e++){const et=$[_e];et.tokenTypeIdx===void 0&&this[et.name](et.children,a)}}}function createBaseSemanticVisitorConstructor(s,a){const o=function(){};defineNameProp(o,s+"BaseSemantics");const c={visit:function(d,b){if(isArray$1$1(d)&&(d=d[0]),!isUndefined(d))return this[d.name](d.children,b)},validateVisitor:function(){const d=validateVisitor(this,a);if(!isEmpty$2(d)){const b=map(d,$=>$.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${b.join(`

`).replace(/\n/g,`
	`)}`)}}};return o.prototype=c,o.prototype.constructor=o,o._RULE_NAMES=a,o}function createBaseVisitorConstructorWithDefaults(s,a,o){const c=function(){};defineNameProp(c,s+"BaseSemanticsWithDefaults");const d=Object.create(o.prototype);return forEach$1(a,b=>{d[b]=defaultVisit}),c.prototype=d,c.prototype.constructor=c,c}var CstVisitorDefinitionError;(function(s){s[s.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",s[s.MISSING_METHOD=1]="MISSING_METHOD"})(CstVisitorDefinitionError||(CstVisitorDefinitionError={}));function validateVisitor(s,a){return validateMissingCstMethods(s,a)}function validateMissingCstMethods(s,a){const o=filter$2(a,d=>isFunction$6(s[d])===!1),c=map(o,d=>({msg:`Missing visitor method: <${d}> on ${s.constructor.name} CST Visitor.`,type:CstVisitorDefinitionError.MISSING_METHOD,methodName:d}));return compact$1(c)}class TreeBuilder{initTreeBuilder(a){if(this.CST_STACK=[],this.outputCst=a.outputCst,this.nodeLocationTracking=has$6(a,"nodeLocationTracking")?a.nodeLocationTracking:DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=noop$2,this.cstFinallyStateUpdate=noop$2,this.cstPostTerminal=noop$2,this.cstPostNonTerminal=noop$2,this.cstPostRule=noop$2;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationFull,this.setNodeLocationFromNode=setNodeLocationFull,this.cstPostRule=noop$2,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=noop$2,this.setNodeLocationFromNode=noop$2,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationOnlyOffset,this.setNodeLocationFromNode=setNodeLocationOnlyOffset,this.cstPostRule=noop$2,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=noop$2,this.setNodeLocationFromNode=noop$2,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=noop$2,this.setNodeLocationFromNode=noop$2,this.cstPostRule=noop$2,this.setInitialNodeLocation=noop$2;else throw Error(`Invalid <nodeLocationTracking> config option: "${a.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(a){a.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(a){a.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(a){a.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(a){const o=this.LA(1);a.location={startOffset:o.startOffset,startLine:o.startLine,startColumn:o.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(a){const o={name:a,children:Object.create(null)};this.setInitialNodeLocation(o),this.CST_STACK.push(o)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(a){const o=this.LA(0),c=a.location;c.startOffset<=o.startOffset?(c.endOffset=o.endOffset,c.endLine=o.endLine,c.endColumn=o.endColumn):(c.startOffset=NaN,c.startLine=NaN,c.startColumn=NaN)}cstPostRuleOnlyOffset(a){const o=this.LA(0),c=a.location;c.startOffset<=o.startOffset?c.endOffset=o.endOffset:c.startOffset=NaN}cstPostTerminal(a,o){const c=this.CST_STACK[this.CST_STACK.length-1];addTerminalToCst(c,o,a),this.setNodeLocationFromToken(c.location,o)}cstPostNonTerminal(a,o){const c=this.CST_STACK[this.CST_STACK.length-1];addNoneTerminalToCst(c,o,a),this.setNodeLocationFromNode(c.location,a.location)}getBaseCstVisitorConstructor(){if(isUndefined(this.baseCstVisitorConstructor)){const a=createBaseSemanticVisitorConstructor(this.className,keys$3(this.gastProductionsCache));return this.baseCstVisitorConstructor=a,a}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(isUndefined(this.baseCstVisitorWithDefaultsConstructor)){const a=createBaseVisitorConstructorWithDefaults(this.className,keys$3(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=a,a}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const a=this.RULE_STACK;return a[a.length-1]}getPreviousExplicitRuleShortName(){const a=this.RULE_STACK;return a[a.length-2]}getLastExplicitRuleOccurrenceIndex(){const a=this.RULE_OCCURRENCE_STACK;return a[a.length-1]}}class LexerAdapter{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(a){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=a,this.tokVectorLength=a.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):END_OF_FILE}LA(a){const o=this.currIdx+a;return o<0||this.tokVectorLength<=o?END_OF_FILE:this.tokVector[o]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(a){this.currIdx=a}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class RecognizerApi{ACTION(a){return a.call(this)}consume(a,o,c){return this.consumeInternal(o,a,c)}subrule(a,o,c){return this.subruleInternal(o,a,c)}option(a,o){return this.optionInternal(o,a)}or(a,o){return this.orInternal(o,a)}many(a,o){return this.manyInternal(a,o)}atLeastOne(a,o){return this.atLeastOneInternal(a,o)}CONSUME(a,o){return this.consumeInternal(a,0,o)}CONSUME1(a,o){return this.consumeInternal(a,1,o)}CONSUME2(a,o){return this.consumeInternal(a,2,o)}CONSUME3(a,o){return this.consumeInternal(a,3,o)}CONSUME4(a,o){return this.consumeInternal(a,4,o)}CONSUME5(a,o){return this.consumeInternal(a,5,o)}CONSUME6(a,o){return this.consumeInternal(a,6,o)}CONSUME7(a,o){return this.consumeInternal(a,7,o)}CONSUME8(a,o){return this.consumeInternal(a,8,o)}CONSUME9(a,o){return this.consumeInternal(a,9,o)}SUBRULE(a,o){return this.subruleInternal(a,0,o)}SUBRULE1(a,o){return this.subruleInternal(a,1,o)}SUBRULE2(a,o){return this.subruleInternal(a,2,o)}SUBRULE3(a,o){return this.subruleInternal(a,3,o)}SUBRULE4(a,o){return this.subruleInternal(a,4,o)}SUBRULE5(a,o){return this.subruleInternal(a,5,o)}SUBRULE6(a,o){return this.subruleInternal(a,6,o)}SUBRULE7(a,o){return this.subruleInternal(a,7,o)}SUBRULE8(a,o){return this.subruleInternal(a,8,o)}SUBRULE9(a,o){return this.subruleInternal(a,9,o)}OPTION(a){return this.optionInternal(a,0)}OPTION1(a){return this.optionInternal(a,1)}OPTION2(a){return this.optionInternal(a,2)}OPTION3(a){return this.optionInternal(a,3)}OPTION4(a){return this.optionInternal(a,4)}OPTION5(a){return this.optionInternal(a,5)}OPTION6(a){return this.optionInternal(a,6)}OPTION7(a){return this.optionInternal(a,7)}OPTION8(a){return this.optionInternal(a,8)}OPTION9(a){return this.optionInternal(a,9)}OR(a){return this.orInternal(a,0)}OR1(a){return this.orInternal(a,1)}OR2(a){return this.orInternal(a,2)}OR3(a){return this.orInternal(a,3)}OR4(a){return this.orInternal(a,4)}OR5(a){return this.orInternal(a,5)}OR6(a){return this.orInternal(a,6)}OR7(a){return this.orInternal(a,7)}OR8(a){return this.orInternal(a,8)}OR9(a){return this.orInternal(a,9)}MANY(a){this.manyInternal(0,a)}MANY1(a){this.manyInternal(1,a)}MANY2(a){this.manyInternal(2,a)}MANY3(a){this.manyInternal(3,a)}MANY4(a){this.manyInternal(4,a)}MANY5(a){this.manyInternal(5,a)}MANY6(a){this.manyInternal(6,a)}MANY7(a){this.manyInternal(7,a)}MANY8(a){this.manyInternal(8,a)}MANY9(a){this.manyInternal(9,a)}MANY_SEP(a){this.manySepFirstInternal(0,a)}MANY_SEP1(a){this.manySepFirstInternal(1,a)}MANY_SEP2(a){this.manySepFirstInternal(2,a)}MANY_SEP3(a){this.manySepFirstInternal(3,a)}MANY_SEP4(a){this.manySepFirstInternal(4,a)}MANY_SEP5(a){this.manySepFirstInternal(5,a)}MANY_SEP6(a){this.manySepFirstInternal(6,a)}MANY_SEP7(a){this.manySepFirstInternal(7,a)}MANY_SEP8(a){this.manySepFirstInternal(8,a)}MANY_SEP9(a){this.manySepFirstInternal(9,a)}AT_LEAST_ONE(a){this.atLeastOneInternal(0,a)}AT_LEAST_ONE1(a){return this.atLeastOneInternal(1,a)}AT_LEAST_ONE2(a){this.atLeastOneInternal(2,a)}AT_LEAST_ONE3(a){this.atLeastOneInternal(3,a)}AT_LEAST_ONE4(a){this.atLeastOneInternal(4,a)}AT_LEAST_ONE5(a){this.atLeastOneInternal(5,a)}AT_LEAST_ONE6(a){this.atLeastOneInternal(6,a)}AT_LEAST_ONE7(a){this.atLeastOneInternal(7,a)}AT_LEAST_ONE8(a){this.atLeastOneInternal(8,a)}AT_LEAST_ONE9(a){this.atLeastOneInternal(9,a)}AT_LEAST_ONE_SEP(a){this.atLeastOneSepFirstInternal(0,a)}AT_LEAST_ONE_SEP1(a){this.atLeastOneSepFirstInternal(1,a)}AT_LEAST_ONE_SEP2(a){this.atLeastOneSepFirstInternal(2,a)}AT_LEAST_ONE_SEP3(a){this.atLeastOneSepFirstInternal(3,a)}AT_LEAST_ONE_SEP4(a){this.atLeastOneSepFirstInternal(4,a)}AT_LEAST_ONE_SEP5(a){this.atLeastOneSepFirstInternal(5,a)}AT_LEAST_ONE_SEP6(a){this.atLeastOneSepFirstInternal(6,a)}AT_LEAST_ONE_SEP7(a){this.atLeastOneSepFirstInternal(7,a)}AT_LEAST_ONE_SEP8(a){this.atLeastOneSepFirstInternal(8,a)}AT_LEAST_ONE_SEP9(a){this.atLeastOneSepFirstInternal(9,a)}RULE(a,o,c=DEFAULT_RULE_CONFIG){if(includes(this.definedRulesNames,a)){const $={message:defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:a,grammarName:this.className}),type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:a};this.definitionErrors.push($)}this.definedRulesNames.push(a);const d=this.defineRule(a,o,c);return this[a]=d,d}OVERRIDE_RULE(a,o,c=DEFAULT_RULE_CONFIG){const d=validateRuleIsOverridden(a,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(d);const b=this.defineRule(a,o,c);return this[a]=b,b}BACKTRACK(a,o){return function(){this.isBackTrackingStack.push(1);const c=this.saveRecogState();try{return a.apply(this,o),!0}catch(d){if(isRecognitionException(d))return!1;throw d}finally{this.reloadRecogState(c),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return serializeGrammar(values(this.gastProductionsCache))}}class RecognizerEngine{initRecognizerEngine(a,o){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tokenStructuredMatcherNoCategories,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},has$6(o,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(isArray$1$1(a)){if(isEmpty$2(a))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof a[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(isArray$1$1(a))this.tokensMap=reduce$1(a,(b,$)=>(b[$.name]=$,b),{});else if(has$6(a,"modes")&&every(flatten$1(values(a.modes)),isTokenType)){const b=flatten$1(values(a.modes)),$=uniq(b);this.tokensMap=reduce$1($,(j,_e)=>(j[_e.name]=_e,j),{})}else if(isObject$d(a))this.tokensMap=clone$1(a);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=EOF;const c=has$6(a,"modes")?flatten$1(values(a.modes)):values(a),d=every(c,b=>isEmpty$2(b.categoryMatches));this.tokenMatcher=d?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,augmentTokenTypes(values(this.tokensMap))}defineRule(a,o,c){if(this.selfAnalysisDone)throw Error(`Grammar rule <${a}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const d=has$6(c,"resyncEnabled")?c.resyncEnabled:DEFAULT_RULE_CONFIG.resyncEnabled,b=has$6(c,"recoveryValueFunc")?c.recoveryValueFunc:DEFAULT_RULE_CONFIG.recoveryValueFunc,$=this.ruleShortNameIdx<<BITS_FOR_METHOD_TYPE+BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[$]=a,this.fullRuleNameToShort[a]=$;let j;return this.outputCst===!0?j=function(...tt){try{this.ruleInvocationStateUpdate($,a,this.subruleIdx),o.apply(this,tt);const rt=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(rt),rt}catch(rt){return this.invokeRuleCatch(rt,d,b)}finally{this.ruleFinallyStateUpdate()}}:j=function(...tt){try{return this.ruleInvocationStateUpdate($,a,this.subruleIdx),o.apply(this,tt)}catch(rt){return this.invokeRuleCatch(rt,d,b)}finally{this.ruleFinallyStateUpdate()}},Object.assign(j,{ruleName:a,originalGrammarAction:o})}invokeRuleCatch(a,o,c){const d=this.RULE_STACK.length===1,b=o&&!this.isBackTracking()&&this.recoveryEnabled;if(isRecognitionException(a)){const $=a;if(b){const j=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(j))if($.resyncedTokens=this.reSyncTo(j),this.outputCst){const _e=this.CST_STACK[this.CST_STACK.length-1];return _e.recoveredNode=!0,_e}else return c(a);else{if(this.outputCst){const _e=this.CST_STACK[this.CST_STACK.length-1];_e.recoveredNode=!0,$.partialCstResult=_e}throw $}}else{if(d)return this.moveToTerminatedState(),c(a);throw $}}else throw a}optionInternal(a,o){const c=this.getKeyForAutomaticLookahead(OPTION_IDX,o);return this.optionInternalLogic(a,o,c)}optionInternalLogic(a,o,c){let d=this.getLaFuncFromCache(c),b;if(typeof a!="function"){b=a.DEF;const $=a.GATE;if($!==void 0){const j=d;d=()=>$.call(this)&&j.call(this)}}else b=a;if(d.call(this)===!0)return b.call(this)}atLeastOneInternal(a,o){const c=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_IDX,a);return this.atLeastOneInternalLogic(a,o,c)}atLeastOneInternalLogic(a,o,c){let d=this.getLaFuncFromCache(c),b;if(typeof o!="function"){b=o.DEF;const $=o.GATE;if($!==void 0){const j=d;d=()=>$.call(this)&&j.call(this)}}else b=o;if(d.call(this)===!0){let $=this.doSingleRepetition(b);for(;d.call(this)===!0&&$===!0;)$=this.doSingleRepetition(b)}else throw this.raiseEarlyExitException(a,PROD_TYPE.REPETITION_MANDATORY,o.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[a,o],d,AT_LEAST_ONE_IDX,a,NextTerminalAfterAtLeastOneWalker)}atLeastOneSepFirstInternal(a,o){const c=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_SEP_IDX,a);this.atLeastOneSepFirstInternalLogic(a,o,c)}atLeastOneSepFirstInternalLogic(a,o,c){const d=o.DEF,b=o.SEP;if(this.getLaFuncFromCache(c).call(this)===!0){d.call(this);const j=()=>this.tokenMatcher(this.LA(1),b);for(;this.tokenMatcher(this.LA(1),b)===!0;)this.CONSUME(b),d.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[a,b,j,d,NextTerminalAfterAtLeastOneSepWalker],j,AT_LEAST_ONE_SEP_IDX,a,NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(a,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,o.ERR_MSG)}manyInternal(a,o){const c=this.getKeyForAutomaticLookahead(MANY_IDX,a);return this.manyInternalLogic(a,o,c)}manyInternalLogic(a,o,c){let d=this.getLaFuncFromCache(c),b;if(typeof o!="function"){b=o.DEF;const j=o.GATE;if(j!==void 0){const _e=d;d=()=>j.call(this)&&_e.call(this)}}else b=o;let $=!0;for(;d.call(this)===!0&&$===!0;)$=this.doSingleRepetition(b);this.attemptInRepetitionRecovery(this.manyInternal,[a,o],d,MANY_IDX,a,NextTerminalAfterManyWalker,$)}manySepFirstInternal(a,o){const c=this.getKeyForAutomaticLookahead(MANY_SEP_IDX,a);this.manySepFirstInternalLogic(a,o,c)}manySepFirstInternalLogic(a,o,c){const d=o.DEF,b=o.SEP;if(this.getLaFuncFromCache(c).call(this)===!0){d.call(this);const j=()=>this.tokenMatcher(this.LA(1),b);for(;this.tokenMatcher(this.LA(1),b)===!0;)this.CONSUME(b),d.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[a,b,j,d,NextTerminalAfterManySepWalker],j,MANY_SEP_IDX,a,NextTerminalAfterManySepWalker)}}repetitionSepSecondInternal(a,o,c,d,b){for(;c();)this.CONSUME(o),d.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[a,o,c,d,b],c,AT_LEAST_ONE_SEP_IDX,a,b)}doSingleRepetition(a){const o=this.getLexerPosition();return a.call(this),this.getLexerPosition()>o}orInternal(a,o){const c=this.getKeyForAutomaticLookahead(OR_IDX,o),d=isArray$1$1(a)?a:a.DEF,$=this.getLaFuncFromCache(c).call(this,d);if($!==void 0)return d[$].ALT.call(this);this.raiseNoAltException(o,a.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const a=this.LA(1),o=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:a,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException(o,a))}}subruleInternal(a,o,c){let d;try{const b=c!==void 0?c.ARGS:void 0;return this.subruleIdx=o,d=a.apply(this,b),this.cstPostNonTerminal(d,c!==void 0&&c.LABEL!==void 0?c.LABEL:a.ruleName),d}catch(b){throw this.subruleInternalError(b,c,a.ruleName)}}subruleInternalError(a,o,c){throw isRecognitionException(a)&&a.partialCstResult!==void 0&&(this.cstPostNonTerminal(a.partialCstResult,o!==void 0&&o.LABEL!==void 0?o.LABEL:c),delete a.partialCstResult),a}consumeInternal(a,o,c){let d;try{const b=this.LA(1);this.tokenMatcher(b,a)===!0?(this.consumeToken(),d=b):this.consumeInternalError(a,b,c)}catch(b){d=this.consumeInternalRecovery(a,o,b)}return this.cstPostTerminal(c!==void 0&&c.LABEL!==void 0?c.LABEL:a.name,d),d}consumeInternalError(a,o,c){let d;const b=this.LA(0);throw c!==void 0&&c.ERR_MSG?d=c.ERR_MSG:d=this.errorMessageProvider.buildMismatchTokenMessage({expected:a,actual:o,previous:b,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new MismatchedTokenException(d,o,b))}consumeInternalRecovery(a,o,c){if(this.recoveryEnabled&&c.name==="MismatchedTokenException"&&!this.isBackTracking()){const d=this.getFollowsForInRuleRecovery(a,o);try{return this.tryInRuleRecovery(a,d)}catch(b){throw b.name===IN_RULE_RECOVERY_EXCEPTION?c:b}}else throw c}saveRecogState(){const a=this.errors,o=clone$1(this.RULE_STACK);return{errors:a,lexerState:this.exportLexerState(),RULE_STACK:o,CST_STACK:this.CST_STACK}}reloadRecogState(a){this.errors=a.errors,this.importLexerState(a.lexerState),this.RULE_STACK=a.RULE_STACK}ruleInvocationStateUpdate(a,o,c){this.RULE_OCCURRENCE_STACK.push(c),this.RULE_STACK.push(a),this.cstInvocationStateUpdate(o)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const a=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[a]}shortRuleNameToFullName(a){return this.shortRuleNameToFull[a]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),EOF)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class ErrorHandler{initErrorHandler(a){this._errors=[],this.errorMessageProvider=has$6(a,"errorMessageProvider")?a.errorMessageProvider:DEFAULT_PARSER_CONFIG.errorMessageProvider}SAVE_ERROR(a){if(isRecognitionException(a))return a.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:clone$1(this.RULE_OCCURRENCE_STACK)},this._errors.push(a),a;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return clone$1(this._errors)}set errors(a){this._errors=a}raiseEarlyExitException(a,o,c){const d=this.getCurrRuleFullName(),b=this.getGAstProductions()[d],j=getLookaheadPathsForOptionalProd(a,b,o,this.maxLookahead)[0],_e=[];for(let tt=1;tt<=this.maxLookahead;tt++)_e.push(this.LA(tt));const et=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:j,actual:_e,previous:this.LA(0),customUserDescription:c,ruleName:d});throw this.SAVE_ERROR(new EarlyExitException(et,this.LA(1),this.LA(0)))}raiseNoAltException(a,o){const c=this.getCurrRuleFullName(),d=this.getGAstProductions()[c],b=getLookaheadPathsForOr(a,d,this.maxLookahead),$=[];for(let et=1;et<=this.maxLookahead;et++)$.push(this.LA(et));const j=this.LA(0),_e=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:b,actual:$,previous:j,customUserDescription:o,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(_e,this.LA(1),j))}}class ContentAssist{initContentAssist(){}computeContentAssist(a,o){const c=this.gastProductionsCache[a];if(isUndefined(c))throw Error(`Rule ->${a}<- does not exist in this grammar.`);return nextPossibleTokensAfter([c],o,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(a){const o=head(a.ruleStack),d=this.getGAstProductions()[o];return new NextAfterTokenWalker(d,a).startWalking()}}const RECORDING_NULL_OBJECT={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(RECORDING_NULL_OBJECT);const HANDLE_SEPARATOR=!0,MAX_METHOD_IDX=Math.pow(2,BITS_FOR_OCCURRENCE_IDX)-1,RFT=createToken({name:"RECORDING_PHASE_TOKEN",pattern:Lexer.NA});augmentTokenTypes([RFT]);const RECORDING_PHASE_TOKEN=createTokenInstance(RFT,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(RECORDING_PHASE_TOKEN);const RECORDING_PHASE_CSTNODE={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class GastRecorder{initGastRecorder(a){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let a=0;a<10;a++){const o=a>0?a:"";this[`CONSUME${o}`]=function(c,d){return this.consumeInternalRecord(c,a,d)},this[`SUBRULE${o}`]=function(c,d){return this.subruleInternalRecord(c,a,d)},this[`OPTION${o}`]=function(c){return this.optionInternalRecord(c,a)},this[`OR${o}`]=function(c){return this.orInternalRecord(c,a)},this[`MANY${o}`]=function(c){this.manyInternalRecord(a,c)},this[`MANY_SEP${o}`]=function(c){this.manySepFirstInternalRecord(a,c)},this[`AT_LEAST_ONE${o}`]=function(c){this.atLeastOneInternalRecord(a,c)},this[`AT_LEAST_ONE_SEP${o}`]=function(c){this.atLeastOneSepFirstInternalRecord(a,c)}}this.consume=function(a,o,c){return this.consumeInternalRecord(o,a,c)},this.subrule=function(a,o,c){return this.subruleInternalRecord(o,a,c)},this.option=function(a,o){return this.optionInternalRecord(o,a)},this.or=function(a,o){return this.orInternalRecord(o,a)},this.many=function(a,o){this.manyInternalRecord(a,o)},this.atLeastOne=function(a,o){this.atLeastOneInternalRecord(a,o)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const a=this;for(let o=0;o<10;o++){const c=o>0?o:"";delete a[`CONSUME${c}`],delete a[`SUBRULE${c}`],delete a[`OPTION${c}`],delete a[`OR${c}`],delete a[`MANY${c}`],delete a[`MANY_SEP${c}`],delete a[`AT_LEAST_ONE${c}`],delete a[`AT_LEAST_ONE_SEP${c}`]}delete a.consume,delete a.subrule,delete a.option,delete a.or,delete a.many,delete a.atLeastOne,delete a.ACTION,delete a.BACKTRACK,delete a.LA})}ACTION_RECORD(a){}BACKTRACK_RECORD(a,o){return()=>!0}LA_RECORD(a){return END_OF_FILE}topLevelRuleRecord(a,o){try{const c=new Rule({definition:[],name:a});return c.name=a,this.recordingProdStack.push(c),o.call(this),this.recordingProdStack.pop(),c}catch(c){if(c.KNOWN_RECORDER_ERROR!==!0)try{c.message=c.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw c}throw c}}optionInternalRecord(a,o){return recordProd.call(this,Option,a,o)}atLeastOneInternalRecord(a,o){recordProd.call(this,RepetitionMandatory,o,a)}atLeastOneSepFirstInternalRecord(a,o){recordProd.call(this,RepetitionMandatoryWithSeparator,o,a,HANDLE_SEPARATOR)}manyInternalRecord(a,o){recordProd.call(this,Repetition,o,a)}manySepFirstInternalRecord(a,o){recordProd.call(this,RepetitionWithSeparator,o,a,HANDLE_SEPARATOR)}orInternalRecord(a,o){return recordOrProd.call(this,a,o)}subruleInternalRecord(a,o,c){if(assertMethodIdxIsValid(o),!a||has$6(a,"ruleName")===!1){const j=new Error(`<SUBRULE${getIdxSuffix(o)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(a)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw j.KNOWN_RECORDER_ERROR=!0,j}const d=last(this.recordingProdStack),b=a.ruleName,$=new NonTerminal({idx:o,nonTerminalName:b,label:c==null?void 0:c.LABEL,referencedRule:void 0});return d.definition.push($),this.outputCst?RECORDING_PHASE_CSTNODE:RECORDING_NULL_OBJECT}consumeInternalRecord(a,o,c){if(assertMethodIdxIsValid(o),!hasShortKeyProperty(a)){const $=new Error(`<CONSUME${getIdxSuffix(o)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(a)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw $.KNOWN_RECORDER_ERROR=!0,$}const d=last(this.recordingProdStack),b=new Terminal({idx:o,terminalType:a,label:c==null?void 0:c.LABEL});return d.definition.push(b),RECORDING_PHASE_TOKEN}}function recordProd(s,a,o,c=!1){assertMethodIdxIsValid(o);const d=last(this.recordingProdStack),b=isFunction$6(a)?a:a.DEF,$=new s({definition:[],idx:o});return c&&($.separator=a.SEP),has$6(a,"MAX_LOOKAHEAD")&&($.maxLookahead=a.MAX_LOOKAHEAD),this.recordingProdStack.push($),b.call(this),d.definition.push($),this.recordingProdStack.pop(),RECORDING_NULL_OBJECT}function recordOrProd(s,a){assertMethodIdxIsValid(a);const o=last(this.recordingProdStack),c=isArray$1$1(s)===!1,d=c===!1?s:s.DEF,b=new Alternation({definition:[],idx:a,ignoreAmbiguities:c&&s.IGNORE_AMBIGUITIES===!0});has$6(s,"MAX_LOOKAHEAD")&&(b.maxLookahead=s.MAX_LOOKAHEAD);const $=some(d,j=>isFunction$6(j.GATE));return b.hasPredicates=$,o.definition.push(b),forEach$1(d,j=>{const _e=new Alternative({definition:[]});b.definition.push(_e),has$6(j,"IGNORE_AMBIGUITIES")?_e.ignoreAmbiguities=j.IGNORE_AMBIGUITIES:has$6(j,"GATE")&&(_e.ignoreAmbiguities=!0),this.recordingProdStack.push(_e),j.ALT.call(this),this.recordingProdStack.pop()}),RECORDING_NULL_OBJECT}function getIdxSuffix(s){return s===0?"":`${s}`}function assertMethodIdxIsValid(s){if(s<0||s>MAX_METHOD_IDX){const a=new Error(`Invalid DSL Method idx value: <${s}>
	Idx value must be a none negative value smaller than ${MAX_METHOD_IDX+1}`);throw a.KNOWN_RECORDER_ERROR=!0,a}}class PerformanceTracer{initPerformanceTracer(a){if(has$6(a,"traceInitPerf")){const o=a.traceInitPerf,c=typeof o=="number";this.traceInitMaxIdent=c?o:1/0,this.traceInitPerf=c?o>0:o}else this.traceInitMaxIdent=0,this.traceInitPerf=DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(a,o){if(this.traceInitPerf===!0){this.traceInitIndent++;const c=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${c}--> <${a}>`);const{time:d,value:b}=timer(o),$=d>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&$(`${c}<-- <${a}> time: ${d}ms`),this.traceInitIndent--,b}else return o()}}function applyMixins(s,a){a.forEach(o=>{const c=o.prototype;Object.getOwnPropertyNames(c).forEach(d=>{if(d==="constructor")return;const b=Object.getOwnPropertyDescriptor(c,d);b&&(b.get||b.set)?Object.defineProperty(s.prototype,d,b):s.prototype[d]=o.prototype[d]})})}const END_OF_FILE=createTokenInstance(EOF,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(END_OF_FILE);const DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ParserDefinitionErrorType;(function(s){s[s.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",s[s.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",s[s.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",s[s.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",s[s.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",s[s.LEFT_RECURSION=5]="LEFT_RECURSION",s[s.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",s[s.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",s[s.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",s[s.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",s[s.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",s[s.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",s[s.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",s[s.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ParserDefinitionErrorType||(ParserDefinitionErrorType={}));class Parser{static performSelfAnalysis(a){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let a;this.selfAnalysisDone=!0;const o=this.className;this.TRACE_INIT("toFastProps",()=>{toFastProperties(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),forEach$1(this.definedRulesNames,d=>{const $=this[d].originalGrammarAction;let j;this.TRACE_INIT(`${d} Rule`,()=>{j=this.topLevelRuleRecord(d,$)}),this.gastProductionsCache[d]=j})}finally{this.disableRecording()}});let c=[];if(this.TRACE_INIT("Grammar Resolving",()=>{c=resolveGrammar({rules:values(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(c)}),this.TRACE_INIT("Grammar Validations",()=>{if(isEmpty$2(c)&&this.skipValidations===!1){const d=validateGrammar({rules:values(this.gastProductionsCache),tokenTypes:values(this.tokensMap),errMsgProvider:defaultGrammarValidatorErrorProvider,grammarName:o}),b=validateLookahead({lookaheadStrategy:this.lookaheadStrategy,rules:values(this.gastProductionsCache),tokenTypes:values(this.tokensMap),grammarName:o});this.definitionErrors=this.definitionErrors.concat(d,b)}}),isEmpty$2(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const d=computeAllProdsFollows(values(this.gastProductionsCache));this.resyncFollows=d}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var d,b;(b=(d=this.lookaheadStrategy).initialize)===null||b===void 0||b.call(d,{rules:values(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(values(this.gastProductionsCache))})),!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!isEmpty$2(this.definitionErrors))throw a=map(this.definitionErrors,d=>d.message),new Error(`Parser Definition Errors detected:
 ${a.join(`
-------------------------------
`)}`)})}constructor(a,o){this.definitionErrors=[],this.selfAnalysisDone=!1;const c=this;if(c.initErrorHandler(o),c.initLexerAdapter(),c.initLooksAhead(o),c.initRecognizerEngine(a,o),c.initRecoverable(o),c.initTreeBuilder(o),c.initContentAssist(),c.initGastRecorder(o),c.initPerformanceTracer(o),has$6(o,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=has$6(o,"skipValidations")?o.skipValidations:DEFAULT_PARSER_CONFIG.skipValidations}}Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1;applyMixins(Parser,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);class WorkerPool{constructor(a=4){this.pool=a,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(a){if(!this.workers[a]){const o=this.workerCreator();o.addEventListener("message",this._onMessage.bind(this,a)),this.workers[a]=o}}_getIdleWorker(){for(let a=0;a<this.pool;a++)if(!(this.workerStatus&1<<a))return a;return-1}_onMessage(a,o){const c=this.workersResolve[a];if(c&&c(o),this.queue.length){const{resolve:d,msg:b,transfer:$}=this.queue.shift();this.workersResolve[a]=d,this.workers[a].postMessage(b,$)}else this.workerStatus^=1<<a}setWorkerCreator(a){this.workerCreator=a}setWorkerLimit(a){this.pool=a}postMessage(a,o){return new Promise(c=>{const d=this._getIdleWorker();d!==-1?(this._initWorker(d),this.workerStatus|=1<<d,this.workersResolve[d]=c,this.workers[d].postMessage(a,o)):this.queue.push({resolve:c,msg:a,transfer:o})})}dispose(){this.workers.forEach(a=>a.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class CompressedArrayTexture extends CompressedTexture{constructor(a,o,c,d,b,$){super(a,o,c,b,$),this.isCompressedArrayTexture=!0,this.image.depth=d,this.wrapR=ClampToEdgeWrapping$1}}const _taskCache$3=new WeakMap;let _activeLoaders=0,_zstd;const _KTX2Loader=class extends Loader$2{constructor(s){super(s),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(s){return this.transcoderPath=s,this}setWorkerLimit(s){return this.workerPool.setWorkerLimit(s),this}detectSupport(s){return this.workerConfig={astcSupported:s.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:s.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:s.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:s.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:s.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:s.extensions.has("WEBGL_compressed_texture_pvrtc")||s.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},s.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const s=new FileLoader(this.manager);s.setPath(this.transcoderPath),s.setWithCredentials(this.withCredentials);const a=s.loadAsync("basis_transcoder.js"),o=new FileLoader(this.manager);o.setPath(this.transcoderPath),o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials);const c=o.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([a,c]).then(([d,b])=>{const $=_KTX2Loader.BasisWorker.toString(),j=["/* constants */","let _EngineFormat = "+JSON.stringify(_KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_KTX2Loader.BasisFormat),"/* basis_transcoder.js */",d,"/* worker */",$.substring($.indexOf("{")+1,$.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([j])),this.transcoderBinary=b,this.workerPool.setWorkerCreator(()=>{const _e=new Worker(this.workerSourceURL),et=this.transcoderBinary.slice(0);return _e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:et},[et]),_e})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(s,a,o,c){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const d=new FileLoader(this.manager);d.setResponseType("arraybuffer"),d.setWithCredentials(this.withCredentials),d.load(s,b=>{if(_taskCache$3.has(b))return _taskCache$3.get(b).promise.then(a).catch(c);this._createTexture(b).then($=>a?a($):null).catch(c)},o,c)}_createTextureFrom(s,a){const{mipmaps:o,width:c,height:d,format:b,type:$,error:j,dfdTransferFn:_e,dfdFlags:et}=s;if($==="error")return Promise.reject(j);const tt=a.layerCount>1?new CompressedArrayTexture(o,c,d,a.layerCount,b,UnsignedByteType$1):new CompressedTexture(o,c,d,b,UnsignedByteType$1);return tt.minFilter=o.length===1?LinearFilter$1:LinearMipmapLinearFilter$1,tt.magFilter=LinearFilter$1,tt.generateMipmaps=!1,tt.needsUpdate=!0,"colorSpace"in tt?tt.colorSpace=_e===KHR_DF_TRANSFER_SRGB?"srgb":"srgb-linear":tt.encoding=_e===KHR_DF_TRANSFER_SRGB?3001:3e3,tt.premultiplyAlpha=!!(et&KHR_DF_FLAG_ALPHA_PREMULTIPLIED),tt}async _createTexture(s,a={}){const o=read(new Uint8Array(s));if(o.vkFormat!==VK_FORMAT_UNDEFINED)return createDataTexture(o);const c=a,d=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:s,taskConfig:c},[s])).then(b=>this._createTextureFrom(b.data,o));return _taskCache$3.set(s,{promise:d}),d}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}};let KTX2Loader=_KTX2Loader;__publicField(KTX2Loader,"BasisFormat",{ETC1S:0,UASTC_4x4:1});__publicField(KTX2Loader,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});__publicField(KTX2Loader,"EngineFormat",{RGBAFormat:RGBAFormat$1,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format});__publicField(KTX2Loader,"BasisWorker",function(){let s,a,o;const c=_EngineFormat,d=_TranscoderFormat,b=_BasisFormat;self.addEventListener("message",function(at){const ct=at.data;switch(ct.type){case"init":s=ct.config,$(ct.transcoderBinary);break;case"transcode":a.then(()=>{try{const{width:st,height:ot,hasAlpha:ht,mipmaps:dt,format:ft,dfdTransferFn:mt,dfdFlags:gt}=j(ct.buffer),vt=[];for(let yt=0;yt<dt.length;++yt)vt.push(dt[yt].data.buffer);self.postMessage({type:"transcode",id:ct.id,width:st,height:ot,hasAlpha:ht,mipmaps:dt,format:ft,dfdTransferFn:mt,dfdFlags:gt},vt)}catch(st){console.error(st),self.postMessage({type:"error",id:ct.id,error:st.message})}});break}});function $(at){a=new Promise(ct=>{o={wasmBinary:at,onRuntimeInitialized:ct},BASIS(o)}).then(()=>{o.initializeBasis(),o.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function j(at){const ct=new o.KTX2File(new Uint8Array(at));function st(){ct.close(),ct.delete()}if(!ct.isValid())throw st(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const ot=ct.isUASTC()?b.UASTC_4x4:b.ETC1S,ht=ct.getWidth(),dt=ct.getHeight(),ft=ct.getLayers()||1,mt=ct.getLevels(),gt=ct.getHasAlpha(),vt=ct.getDFDTransferFunc(),yt=ct.getDFDFlags(),{transcoderFormat:Et,engineFormat:St}=rt(ot,ht,dt,gt);if(!ht||!dt||!mt)throw st(),new Error("THREE.KTX2Loader:	Invalid texture");if(!ct.startTranscoding())throw st(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Ct=[];for(let wt=0;wt<mt;wt++){const _t=[];let Tt,Mt;for(let Bt=0;Bt<ft;Bt++){const Rt=ct.getImageLevelInfo(wt,Bt,0);Tt=Rt.origWidth<4?Rt.origWidth:Rt.width,Mt=Rt.origHeight<4?Rt.origHeight:Rt.height;const bt=new Uint8Array(ct.getImageTranscodedSizeInBytes(wt,Bt,0,Et));if(!ct.transcodeImage(bt,wt,Bt,0,Et,0,-1,-1))throw st(),new Error("THREE.KTX2Loader: .transcodeImage failed.");_t.push(bt)}Ct.push({data:it(_t),width:Tt,height:Mt})}return st(),{width:ht,height:dt,hasAlpha:gt,mipmaps:Ct,format:St,dfdTransferFn:vt,dfdFlags:yt}}const _e=[{if:"astcSupported",basisFormat:[b.UASTC_4x4],transcoderFormat:[d.ASTC_4x4,d.ASTC_4x4],engineFormat:[c.RGBA_ASTC_4x4_Format,c.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.BC7_M5,d.BC7_M5],engineFormat:[c.RGBA_BPTC_Format,c.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.BC1,d.BC3],engineFormat:[c.RGB_S3TC_DXT1_Format,c.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.ETC1,d.ETC2],engineFormat:[c.RGB_ETC2_Format,c.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.ETC1],engineFormat:[c.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.PVRTC1_4_RGB,d.PVRTC1_4_RGBA],engineFormat:[c.RGB_PVRTC_4BPPV1_Format,c.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],et=_e.sort(function(at,ct){return at.priorityETC1S-ct.priorityETC1S}),tt=_e.sort(function(at,ct){return at.priorityUASTC-ct.priorityUASTC});function rt(at,ct,st,ot){let ht,dt;const ft=at===b.ETC1S?et:tt;for(let mt=0;mt<ft.length;mt++){const gt=ft[mt];if(s[gt.if]&&gt.basisFormat.includes(at)&&!(ot&&gt.transcoderFormat.length<2)&&!(gt.needsPowerOfTwo&&!(nt(ct)&&nt(st))))return ht=gt.transcoderFormat[ot?1:0],dt=gt.engineFormat[ot?1:0],{transcoderFormat:ht,engineFormat:dt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),ht=d.RGBA32,dt=c.RGBAFormat,{transcoderFormat:ht,engineFormat:dt}}function nt(at){return at<=2?!0:(at&at-1)===0&&at!==0}function it(at){let ct=0;for(let ht=0;ht<at.length;ht++){const dt=at[ht];ct+=dt.byteLength}const st=new Uint8Array(ct);let ot=0;for(let ht=0;ht<at.length;ht++){const dt=at[ht];st.set(dt,ot),ot+=dt.byteLength}return st}});const FORMAT_MAP={[VK_FORMAT_R32G32B32A32_SFLOAT]:RGBAFormat$1,[VK_FORMAT_R16G16B16A16_SFLOAT]:RGBAFormat$1,[VK_FORMAT_R8G8B8A8_UNORM]:RGBAFormat$1,[VK_FORMAT_R8G8B8A8_SRGB]:RGBAFormat$1,[VK_FORMAT_R32G32_SFLOAT]:RGFormat,[VK_FORMAT_R16G16_SFLOAT]:RGFormat,[VK_FORMAT_R8G8_UNORM]:RGFormat,[VK_FORMAT_R8G8_SRGB]:RGFormat,[VK_FORMAT_R32_SFLOAT]:RedFormat,[VK_FORMAT_R16_SFLOAT]:RedFormat,[VK_FORMAT_R8_SRGB]:RedFormat,[VK_FORMAT_R8_UNORM]:RedFormat},TYPE_MAP={[VK_FORMAT_R32G32B32A32_SFLOAT]:FloatType,[VK_FORMAT_R16G16B16A16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8G8B8A8_UNORM]:UnsignedByteType$1,[VK_FORMAT_R8G8B8A8_SRGB]:UnsignedByteType$1,[VK_FORMAT_R32G32_SFLOAT]:FloatType,[VK_FORMAT_R16G16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8G8_UNORM]:UnsignedByteType$1,[VK_FORMAT_R8G8_SRGB]:UnsignedByteType$1,[VK_FORMAT_R32_SFLOAT]:FloatType,[VK_FORMAT_R16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8_SRGB]:UnsignedByteType$1,[VK_FORMAT_R8_UNORM]:UnsignedByteType$1},ENCODING_MAP={[VK_FORMAT_R8G8B8A8_SRGB]:3001,[VK_FORMAT_R8G8_SRGB]:3001,[VK_FORMAT_R8_SRGB]:3001};async function createDataTexture(s){const{vkFormat:a,pixelWidth:o,pixelHeight:c,pixelDepth:d}=s;if(FORMAT_MAP[a]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const b=s.levels[0];let $,j;if(s.supercompressionScheme===KHR_SUPERCOMPRESSION_NONE)$=b.levelData;else if(s.supercompressionScheme===KHR_SUPERCOMPRESSION_ZSTD)_zstd||(_zstd=new Promise(async et=>{const tt=new Q;await tt.init(),et(tt)})),$=(await _zstd).decode(b.levelData,b.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[a]===FloatType?j=new Float32Array($.buffer,$.byteOffset,$.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[a]===HalfFloatType?j=new Uint16Array($.buffer,$.byteOffset,$.byteLength/Uint16Array.BYTES_PER_ELEMENT):j=$;const _e=d===0?new DataTexture(j,o,c):new Data3DTexture(j,o,c,d);return _e.type=TYPE_MAP[a],_e.format=FORMAT_MAP[a],_e.encoding=ENCODING_MAP[a]||3e3,_e.needsUpdate=!0,Promise.resolve(_e)}const _taskCache$2=new WeakMap,_BasisTextureLoader=class extends Loader$2{constructor(s){super(s),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig=null}setTranscoderPath(s){return this.transcoderPath=s,this}setWorkerLimit(s){return this.workerLimit=s,this}detectSupport(s){return this.workerConfig={astcSupported:s.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:s.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:s.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:s.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:s.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:s.extensions.has("WEBGL_compressed_texture_pvrtc")||s.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}load(s,a,o,c){const d=new FileLoader(this.manager);d.setResponseType("arraybuffer"),d.setWithCredentials(this.withCredentials);const b=new CompressedTexture;return d.load(s,$=>{if(_taskCache$2.has($))return _taskCache$2.get($).promise.then(a).catch(c);this._createTexture([$]).then(function(j){b.copy(j),b.needsUpdate=!0,a&&a(b)}).catch(c)},o,c),b}parseInternalAsync(s){const{levels:a}=s,o=new Set;for(let c=0;c<a.length;c++)o.add(a[c].data.buffer);return this._createTexture(Array.from(o),{...s,lowLevel:!0})}_createTexture(s,a={}){let o,c;const d=a;let b=0;for(let j=0;j<s.length;j++)b+=s[j].byteLength;const $=this._allocateWorker(b).then(j=>(o=j,c=this.workerNextTaskID++,new Promise((_e,et)=>{o._callbacks[c]={resolve:_e,reject:et},o.postMessage({type:"transcode",id:c,buffers:s,taskConfig:d},s)}))).then(j=>{const{mipmaps:_e,width:et,height:tt,format:rt}=j,nt=new CompressedTexture(_e,et,tt,rt,UnsignedByteType$1);return nt.minFilter=_e.length===1?LinearFilter$1:LinearMipmapLinearFilter$1,nt.magFilter=LinearFilter$1,nt.generateMipmaps=!1,nt.needsUpdate=!0,nt});return $.catch(()=>!0).then(()=>{o&&c&&(o._taskLoad-=b,delete o._callbacks[c])}),_taskCache$2.set(s[0],{promise:$}),$}_initTranscoder(){if(!this.transcoderPending){const s=new FileLoader(this.manager);s.setPath(this.transcoderPath),s.setWithCredentials(this.withCredentials);const a=new Promise((d,b)=>{s.load("basis_transcoder.js",d,void 0,b)}),o=new FileLoader(this.manager);o.setPath(this.transcoderPath),o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials);const c=new Promise((d,b)=>{o.load("basis_transcoder.wasm",d,void 0,b)});this.transcoderPending=Promise.all([a,c]).then(([d,b])=>{const $=_BasisTextureLoader.BasisWorker.toString(),j=["/* constants */","let _EngineFormat = "+JSON.stringify(_BasisTextureLoader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_BasisTextureLoader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_BasisTextureLoader.BasisFormat),"/* basis_transcoder.js */",d,"/* worker */",$.substring($.indexOf("{")+1,$.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([j])),this.transcoderBinary=b})}return this.transcoderPending}_allocateWorker(s){return this._initTranscoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskLoad=0,o.postMessage({type:"init",config:this.workerConfig,transcoderBinary:this.transcoderBinary}),o.onmessage=function(c){const d=c.data;switch(d.type){case"transcode":o._callbacks[d.id].resolve(d);break;case"error":o._callbacks[d.id].reject(d);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+d.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,c){return o._taskLoad>c._taskLoad?-1:1});const a=this.workerPool[this.workerPool.length-1];return a._taskLoad+=s,a})}dispose(){for(let s=0;s<this.workerPool.length;s++)this.workerPool[s].terminate();return this.workerPool.length=0,this}};let BasisTextureLoader=_BasisTextureLoader;__publicField(BasisTextureLoader,"BasisFormat",{ETC1S:0,UASTC_4x4:1});__publicField(BasisTextureLoader,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});__publicField(BasisTextureLoader,"EngineFormat",{RGBAFormat:RGBAFormat$1,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format});__publicField(BasisTextureLoader,"BasisWorker",function(){let s,a,o;const c=_EngineFormat,d=_TranscoderFormat,b=_BasisFormat;onmessage=function(ht){const dt=ht.data;switch(dt.type){case"init":s=dt.config,$(dt.transcoderBinary);break;case"transcode":a.then(()=>{try{const{width:ft,height:mt,hasAlpha:gt,mipmaps:vt,format:yt}=dt.taskConfig.lowLevel?j(dt.taskConfig):_e(dt.buffers[0]),Et=[];for(let St=0;St<vt.length;++St)Et.push(vt[St].data.buffer);self.postMessage({type:"transcode",id:dt.id,width:ft,height:mt,hasAlpha:gt,mipmaps:vt,format:yt},Et)}catch(ft){console.error(ft),self.postMessage({type:"error",id:dt.id,error:ft.message})}});break}};function $(ht){a=new Promise(dt=>{o={wasmBinary:ht,onRuntimeInitialized:dt},BASIS(o)}).then(()=>{o.initializeBasis()})}function j(ht){const{basisFormat:dt,width:ft,height:mt,hasAlpha:gt}=ht,{transcoderFormat:vt,engineFormat:yt}=nt(dt,ft,mt,gt),Et=o.getBytesPerBlockOrPixel(vt);it(o.isFormatSupported(vt),"THREE.BasisTextureLoader: Unsupported format.");const St=[];if(dt===b.ETC1S){const Ct=new o.LowLevelETC1SImageTranscoder,{endpointCount:wt,endpointsData:_t,selectorCount:Tt,selectorsData:Mt,tablesData:Bt}=ht.globalData;try{let Rt;Rt=Ct.decodePalettes(wt,_t,Tt,Mt),it(Rt,"THREE.BasisTextureLoader: decodePalettes() failed."),Rt=Ct.decodeTables(Bt),it(Rt,"THREE.BasisTextureLoader: decodeTables() failed.");for(let bt=0;bt<ht.levels.length;bt++){const Pt=ht.levels[bt],Dt=ht.globalData.imageDescs[bt],$t=st(vt,Pt.width,Pt.height),Lt=new Uint8Array($t);Rt=Ct.transcodeImage(vt,Lt,$t/Et,Pt.data,at(vt,Pt.width),ct(vt,Pt.height),Pt.width,Pt.height,Pt.index,Dt.rgbSliceByteOffset,Dt.rgbSliceByteLength,Dt.alphaSliceByteOffset,Dt.alphaSliceByteLength,Dt.imageFlags,gt,!1,0,0),it(Rt,"THREE.BasisTextureLoader: transcodeImage() failed for level "+Pt.index+"."),St.push({data:Lt,width:Pt.width,height:Pt.height})}}finally{Ct.delete()}}else for(let Ct=0;Ct<ht.levels.length;Ct++){const wt=ht.levels[Ct],_t=st(vt,wt.width,wt.height),Tt=new Uint8Array(_t),Mt=o.transcodeUASTCImage(vt,Tt,_t/Et,wt.data,at(vt,wt.width),ct(vt,wt.height),wt.width,wt.height,wt.index,0,wt.data.byteLength,0,gt,!1,0,0,-1,-1);it(Mt,"THREE.BasisTextureLoader: transcodeUASTCImage() failed for level "+wt.index+"."),St.push({data:Tt,width:wt.width,height:wt.height})}return{width:ft,height:mt,hasAlpha:gt,mipmaps:St,format:yt}}function _e(ht){const dt=new o.BasisFile(new Uint8Array(ht)),ft=dt.isUASTC()?b.UASTC_4x4:b.ETC1S,mt=dt.getImageWidth(0,0),gt=dt.getImageHeight(0,0),vt=dt.getNumLevels(0),yt=dt.getHasAlpha();function Et(){dt.close(),dt.delete()}const{transcoderFormat:St,engineFormat:Ct}=nt(ft,mt,gt,yt);if(!mt||!gt||!vt)throw Et(),new Error("THREE.BasisTextureLoader:	Invalid texture");if(!dt.startTranscoding())throw Et(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");const wt=[];for(let _t=0;_t<vt;_t++){const Tt=dt.getImageWidth(0,_t),Mt=dt.getImageHeight(0,_t),Bt=new Uint8Array(dt.getImageTranscodedSizeInBytes(0,_t,St));if(!dt.transcodeImage(Bt,0,_t,St,0,yt))throw Et(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");wt.push({data:Bt,width:Tt,height:Mt})}return Et(),{width:mt,height:gt,hasAlpha:yt,mipmaps:wt,format:Ct}}const et=[{if:"astcSupported",basisFormat:[b.UASTC_4x4],transcoderFormat:[d.ASTC_4x4,d.ASTC_4x4],engineFormat:[c.RGBA_ASTC_4x4_Format,c.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.BC7_M5,d.BC7_M5],engineFormat:[c.RGBA_BPTC_Format,c.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.BC1,d.BC3],engineFormat:[c.RGB_S3TC_DXT1_Format,c.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.ETC1,d.ETC2],engineFormat:[c.RGB_ETC2_Format,c.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.ETC1,d.ETC1],engineFormat:[c.RGB_ETC1_Format,c.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[b.ETC1S,b.UASTC_4x4],transcoderFormat:[d.PVRTC1_4_RGB,d.PVRTC1_4_RGBA],engineFormat:[c.RGB_PVRTC_4BPPV1_Format,c.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],tt=et.sort(function(ht,dt){return ht.priorityETC1S-dt.priorityETC1S}),rt=et.sort(function(ht,dt){return ht.priorityUASTC-dt.priorityUASTC});function nt(ht,dt,ft,mt){let gt,vt;const yt=ht===b.ETC1S?tt:rt;for(let Et=0;Et<yt.length;Et++){const St=yt[Et];if(s[St.if]&&St.basisFormat.includes(ht)&&!(St.needsPowerOfTwo&&!(ot(dt)&&ot(ft))))return gt=St.transcoderFormat[mt?1:0],vt=St.engineFormat[mt?1:0],{transcoderFormat:gt,engineFormat:vt}}return console.warn("THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32."),gt=d.RGBA32,vt=c.RGBAFormat,{transcoderFormat:gt,engineFormat:vt}}function it(ht,dt){if(!ht)throw new Error(dt)}function at(ht,dt){return Math.ceil(dt/o.getFormatBlockWidth(ht))}function ct(ht,dt){return Math.ceil(dt/o.getFormatBlockHeight(ht))}function st(ht,dt,ft){const mt=o.getBytesPerBlockOrPixel(ht);if(o.formatIsUncompressed(ht))return dt*ft*mt;if(ht===d.PVRTC1_4_RGB||ht===d.PVRTC1_4_RGBA){const gt=dt+3&-4,vt=ft+3&-4;return(Math.max(8,gt)*Math.max(8,vt)*4+7)/8}return at(ht,dt)*ct(ht,ft)*mt}function ot(ht){return ht<=2?!0:(ht&ht-1)===0&&ht!==0}});const _taskCache=new WeakMap;class DRACOLoader extends Loader$2{constructor(a){super(a),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(a){return this.decoderPath=a,this}setDecoderConfig(a){return this.decoderConfig=a,this}setWorkerLimit(a){return this.workerLimit=a,this}load(a,o,c,d){const b=new FileLoader(this.manager);b.setPath(this.path),b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(a,$=>{const j={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry($,j).then(o).catch(d)},c,d)}decodeDracoFile(a,o,c,d){const b={attributeIDs:c||this.defaultAttributeIDs,attributeTypes:d||this.defaultAttributeTypes,useUniqueIDs:!!c};this.decodeGeometry(a,b).then(o)}decodeGeometry(a,o){for(const _e in o.attributeTypes){const et=o.attributeTypes[_e];et.BYTES_PER_ELEMENT!==void 0&&(o.attributeTypes[_e]=et.name)}const c=JSON.stringify(o);if(_taskCache.has(a)){const _e=_taskCache.get(a);if(_e.key===c)return _e.promise;if(a.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let d;const b=this.workerNextTaskID++,$=a.byteLength,j=this._getWorker(b,$).then(_e=>(d=_e,new Promise((et,tt)=>{d._callbacks[b]={resolve:et,reject:tt},d.postMessage({type:"decode",id:b,taskConfig:o,buffer:a},[a])}))).then(_e=>this._createGeometry(_e.geometry));return j.catch(()=>!0).then(()=>{d&&b&&this._releaseTask(d,b)}),_taskCache.set(a,{key:c,promise:j}),j}_createGeometry(a){const o=new BufferGeometry;a.index&&o.setIndex(new BufferAttribute(a.index.array,1));for(let c=0;c<a.attributes.length;c++){const d=a.attributes[c],b=d.name,$=d.array,j=d.itemSize;o.setAttribute(b,new BufferAttribute($,j))}return o}_loadLibrary(a,o){const c=new FileLoader(this.manager);return c.setPath(this.decoderPath),c.setResponseType(o),c.setWithCredentials(this.withCredentials),new Promise((d,b)=>{c.load(a,d,void 0,b)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const a=typeof WebAssembly!="object"||this.decoderConfig.type==="js",o=[];return a?o.push(this._loadLibrary("draco_decoder.js","text")):(o.push(this._loadLibrary("draco_wasm_wrapper.js","text")),o.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(o).then(c=>{const d=c[0];a||(this.decoderConfig.wasmBinary=c[1]);const b=DRACOWorker.toString(),$=["/* draco decoder */",d,"","/* worker */",b.substring(b.indexOf("{")+1,b.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([$]))}),this.decoderPending}_getWorker(a,o){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const d=new Worker(this.workerSourceURL);d._callbacks={},d._taskCosts={},d._taskLoad=0,d.postMessage({type:"init",decoderConfig:this.decoderConfig}),d.onmessage=function(b){const $=b.data;switch($.type){case"decode":d._callbacks[$.id].resolve($);break;case"error":d._callbacks[$.id].reject($);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+$.type+'"')}},this.workerPool.push(d)}else this.workerPool.sort(function(d,b){return d._taskLoad>b._taskLoad?-1:1});const c=this.workerPool[this.workerPool.length-1];return c._taskCosts[a]=o,c._taskLoad+=o,c})}_releaseTask(a,o){a._taskLoad-=a._taskCosts[o],delete a._callbacks[o],delete a._taskCosts[o]}debug(){console.log("Task load: ",this.workerPool.map(a=>a._taskLoad))}dispose(){for(let a=0;a<this.workerPool.length;++a)this.workerPool[a].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let s,a;onmessage=function($){const j=$.data;switch(j.type){case"init":s=j.decoderConfig,a=new Promise(function(tt){s.onModuleLoaded=function(rt){tt({draco:rt})},DracoDecoderModule(s)});break;case"decode":const _e=j.buffer,et=j.taskConfig;a.then(tt=>{const rt=tt.draco,nt=new rt.Decoder,it=new rt.DecoderBuffer;it.Init(new Int8Array(_e),_e.byteLength);try{const at=o(rt,nt,it,et),ct=at.attributes.map(st=>st.array.buffer);at.index&&ct.push(at.index.array.buffer),self.postMessage({type:"decode",id:j.id,geometry:at},ct)}catch(at){console.error(at),self.postMessage({type:"error",id:j.id,error:at.message})}finally{rt.destroy(it),rt.destroy(nt)}});break}};function o($,j,_e,et){const tt=et.attributeIDs,rt=et.attributeTypes;let nt,it;const at=j.GetEncodedGeometryType(_e);if(at===$.TRIANGULAR_MESH)nt=new $.Mesh,it=j.DecodeBufferToMesh(_e,nt);else if(at===$.POINT_CLOUD)nt=new $.PointCloud,it=j.DecodeBufferToPointCloud(_e,nt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!it.ok()||nt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+it.error_msg());const ct={index:null,attributes:[]};for(const st in tt){const ot=self[rt[st]];let ht,dt;if(et.useUniqueIDs)dt=tt[st],ht=j.GetAttributeByUniqueId(nt,dt);else{if(dt=j.GetAttributeId(nt,$[tt[st]]),dt===-1)continue;ht=j.GetAttribute(nt,dt)}ct.attributes.push(d($,j,nt,st,ot,ht))}return at===$.TRIANGULAR_MESH&&(ct.index=c($,j,nt)),$.destroy(nt),ct}function c($,j,_e){const tt=_e.num_faces()*3,rt=tt*4,nt=$._malloc(rt);j.GetTrianglesUInt32Array(_e,rt,nt);const it=new Uint32Array($.HEAPF32.buffer,nt,tt).slice();return $._free(nt),{array:it,itemSize:1}}function d($,j,_e,et,tt,rt){const nt=rt.num_components(),at=_e.num_points()*nt,ct=at*tt.BYTES_PER_ELEMENT,st=b($,tt),ot=$._malloc(ct);j.GetAttributeDataArrayForAllPoints(_e,rt,st,ct,ot);const ht=new tt($.HEAPF32.buffer,ot,at).slice();return $._free(ot),{name:et,array:ht,itemSize:nt}}function b($,j){switch(j){case Float32Array:return $.DT_FLOAT32;case Int8Array:return $.DT_INT8;case Int16Array:return $.DT_INT16;case Int32Array:return $.DT_INT32;case Uint8Array:return $.DT_UINT8;case Uint16Array:return $.DT_UINT16;case Uint32Array:return $.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",a="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",o=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),c=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let d=s;WebAssembly.validate(o)&&(d=a);let b;const $=WebAssembly.instantiate(j(d),{}).then(rt=>{b=rt.instance,b.exports.__wasm_call_ctors()});function j(rt){const nt=new Uint8Array(rt.length);for(let at=0;at<rt.length;++at){const ct=rt.charCodeAt(at);nt[at]=ct>96?ct-71:ct>64?ct-65:ct>47?ct+4:ct>46?63:62}let it=0;for(let at=0;at<rt.length;++at)nt[it++]=nt[at]<60?c[nt[at]]:(nt[at]-60)*64+nt[++at];return nt.buffer.slice(0,it)}function _e(rt,nt,it,at,ct,st){const ot=b.exports.sbrk,ht=it+3&-4,dt=ot(ht*at),ft=ot(ct.length),mt=new Uint8Array(b.exports.memory.buffer);mt.set(ct,ft);const gt=rt(dt,it,at,ft,ct.length);if(gt===0&&st&&st(dt,ht,at),nt.set(mt.subarray(dt,dt+it*at)),ot(dt-ot(0)),gt!==0)throw new Error(`Malformed buffer data: ${gt}`)}const et={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},tt={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:$,supported:!0,decodeVertexBuffer(rt,nt,it,at,ct){_e(b.exports.meshopt_decodeVertexBuffer,rt,nt,it,at,b.exports[et[ct]])},decodeIndexBuffer(rt,nt,it,at){_e(b.exports.meshopt_decodeIndexBuffer,rt,nt,it,at)},decodeIndexSequence(rt,nt,it,at){_e(b.exports.meshopt_decodeIndexSequence,rt,nt,it,at)},decodeGltfBuffer(rt,nt,it,at,ct,st){_e(b.exports[tt[ct]],rt,nt,it,at,b.exports[et[st]])}},generated};let dracoLoader=null;function extensions(s,a,o){return c=>{o&&o(c),s&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof s=="string"?s:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),c.setDRACOLoader(dracoLoader)),a&&c.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(s,a=!0,o=!0,c){return useLoader(GLTFLoader,s,extensions(a,o,c))}useGLTF.preload=(s,a=!0,o=!0,c)=>useLoader.preload(GLTFLoader,s,extensions(a,o,c));useGLTF.clear=s=>useLoader.clear(GLTFLoader,s);const OrbitControls=reactExports.forwardRef(({makeDefault:s,camera:a,regress:o,domElement:c,enableDamping:d=!0,keyEvents:b=!1,onChange:$,onStart:j,onEnd:_e,...et},tt)=>{const rt=useThree(gt=>gt.invalidate),nt=useThree(gt=>gt.camera),it=useThree(gt=>gt.gl),at=useThree(gt=>gt.events),ct=useThree(gt=>gt.setEvents),st=useThree(gt=>gt.set),ot=useThree(gt=>gt.get),ht=useThree(gt=>gt.performance),dt=a||nt,ft=c||at.connected||it.domElement,mt=reactExports.useMemo(()=>new OrbitControls$1(dt),[dt]);return useFrame(()=>{mt.enabled&&mt.update()},-1),reactExports.useEffect(()=>(b&&mt.connect(b===!0?ft:b),mt.connect(ft),()=>void mt.dispose()),[b,ft,o,mt,rt]),reactExports.useEffect(()=>{const gt=Et=>{rt(),o&&ht.regress(),$&&$(Et)},vt=Et=>{j&&j(Et)},yt=Et=>{_e&&_e(Et)};return mt.addEventListener("change",gt),mt.addEventListener("start",vt),mt.addEventListener("end",yt),()=>{mt.removeEventListener("start",vt),mt.removeEventListener("end",yt),mt.removeEventListener("change",gt)}},[$,j,_e,mt,rt,ct]),reactExports.useEffect(()=>{if(s){const gt=ot().controls;return st({controls:mt}),()=>st({controls:gt})}},[s,mt]),reactExports.createElement("primitive",_extends({ref:tt,object:mt,enableDamping:d},et))});var client={exports:{}},componentEmitter={exports:{}};(function(s){s.exports=a;function a(c){if(c)return o(c)}function o(c){for(var d in a.prototype)c[d]=a.prototype[d];return c}a.prototype.on=a.prototype.addEventListener=function(c,d){return this._callbacks=this._callbacks||{},(this._callbacks["$"+c]=this._callbacks["$"+c]||[]).push(d),this},a.prototype.once=function(c,d){function b(){this.off(c,b),d.apply(this,arguments)}return b.fn=d,this.on(c,b),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(c,d){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var b=this._callbacks["$"+c];if(!b)return this;if(arguments.length==1)return delete this._callbacks["$"+c],this;for(var $,j=0;j<b.length;j++)if($=b[j],$===d||$.fn===d){b.splice(j,1);break}return b.length===0&&delete this._callbacks["$"+c],this},a.prototype.emit=function(c){this._callbacks=this._callbacks||{};for(var d=new Array(arguments.length-1),b=this._callbacks["$"+c],$=1;$<arguments.length;$++)d[$-1]=arguments[$];if(b){b=b.slice(0);for(var $=0,j=b.length;$<j;++$)b[$].apply(this,d)}return this},a.prototype.listeners=function(c){return this._callbacks=this._callbacks||{},this._callbacks["$"+c]||[]},a.prototype.hasListeners=function(c){return!!this.listeners(c).length}})(componentEmitter);var componentEmitterExports=componentEmitter.exports,fastSafeStringify=stringify$2;stringify$2.default=stringify$2;stringify$2.stable=deterministicStringify;stringify$2.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions$2(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify$2(s,a,o,c){typeof c>"u"&&(c=defaultOptions$2()),decirc(s,"",0,[],void 0,0,c);var d;try{replacerStack.length===0?d=JSON.stringify(s,a,o):d=JSON.stringify(s,replaceGetterValues(a),o)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var b=arr.pop();b.length===4?Object.defineProperty(b[0],b[1],b[3]):b[0][b[1]]=b[2]}}return d}function setReplace(s,a,o,c){var d=Object.getOwnPropertyDescriptor(c,o);d.get!==void 0?d.configurable?(Object.defineProperty(c,o,{value:s}),arr.push([c,o,a,d])):replacerStack.push([a,o,s]):(c[o]=s,arr.push([c,o,a]))}function decirc(s,a,o,c,d,b,$){b+=1;var j;if(typeof s=="object"&&s!==null){for(j=0;j<c.length;j++)if(c[j]===s){setReplace(CIRCULAR_REPLACE_NODE,s,a,d);return}if(typeof $.depthLimit<"u"&&b>$.depthLimit){setReplace(LIMIT_REPLACE_NODE,s,a,d);return}if(typeof $.edgesLimit<"u"&&o+1>$.edgesLimit){setReplace(LIMIT_REPLACE_NODE,s,a,d);return}if(c.push(s),Array.isArray(s))for(j=0;j<s.length;j++)decirc(s[j],j,j,c,s,b,$);else{var _e=Object.keys(s);for(j=0;j<_e.length;j++){var et=_e[j];decirc(s[et],et,j,c,s,b,$)}}c.pop()}}function compareFunction(s,a){return s<a?-1:s>a?1:0}function deterministicStringify(s,a,o,c){typeof c>"u"&&(c=defaultOptions$2());var d=deterministicDecirc(s,"",0,[],void 0,0,c)||s,b;try{replacerStack.length===0?b=JSON.stringify(d,a,o):b=JSON.stringify(d,replaceGetterValues(a),o)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var $=arr.pop();$.length===4?Object.defineProperty($[0],$[1],$[3]):$[0][$[1]]=$[2]}}return b}function deterministicDecirc(s,a,o,c,d,b,$){b+=1;var j;if(typeof s=="object"&&s!==null){for(j=0;j<c.length;j++)if(c[j]===s){setReplace(CIRCULAR_REPLACE_NODE,s,a,d);return}try{if(typeof s.toJSON=="function")return}catch{return}if(typeof $.depthLimit<"u"&&b>$.depthLimit){setReplace(LIMIT_REPLACE_NODE,s,a,d);return}if(typeof $.edgesLimit<"u"&&o+1>$.edgesLimit){setReplace(LIMIT_REPLACE_NODE,s,a,d);return}if(c.push(s),Array.isArray(s))for(j=0;j<s.length;j++)deterministicDecirc(s[j],j,j,c,s,b,$);else{var _e={},et=Object.keys(s).sort(compareFunction);for(j=0;j<et.length;j++){var tt=et[j];deterministicDecirc(s[tt],tt,j,c,s,b,$),_e[tt]=s[tt]}if(typeof d<"u")arr.push([d,a,s]),d[a]=_e;else return _e}c.pop()}}function replaceGetterValues(s){return s=typeof s<"u"?s:function(a,o){return o},function(a,o){if(replacerStack.length>0)for(var c=0;c<replacerStack.length;c++){var d=replacerStack[c];if(d[1]===a&&d[0]===o){o=d[2],replacerStack.splice(c,1);break}}return s.call(this,a,o)}}var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var a={},o=Symbol("test"),c=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(c)!=="[object Symbol]")return!1;var d=42;a[o]=d;for(o in a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var b=Object.getOwnPropertySymbols(a);if(b.length!==1||b[0]!==o||!Object.prototype.propertyIsEnumerable.call(a,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var $=Object.getOwnPropertyDescriptor(a,o);if($.value!==d||$.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test$1={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test$1}.foo===test$1.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(a){var o=this;if(typeof o!="function"||toStr$1.call(o)!==funcType)throw new TypeError(ERROR_MESSAGE+o);for(var c=slice.call(arguments,1),d,b=function(){if(this instanceof d){var tt=o.apply(this,c.concat(slice.call(arguments)));return Object(tt)===tt?tt:this}else return o.apply(a,c.concat(slice.call(arguments)))},$=Math.max(0,o.length-c.length),j=[],_e=0;_e<$;_e++)j.push("$"+_e);if(d=Function("binder","return function ("+j.join(",")+"){ return binder.apply(this,arguments); }")(b),o.prototype){var et=function(){};et.prototype=o.prototype,d.prototype=new et,et.prototype=null}return d},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$1=functionBind,src=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(s){try{return $Function('"use strict"; return ('+s+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(s){return s.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(s){var errorProto=getProto(getProto(s));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function s(a){var o;if(a==="%AsyncFunction%")o=getEvalledConstructor("async function () {}");else if(a==="%GeneratorFunction%")o=getEvalledConstructor("function* () {}");else if(a==="%AsyncGeneratorFunction%")o=getEvalledConstructor("async function* () {}");else if(a==="%AsyncGenerator%"){var c=s("%AsyncGeneratorFunction%");c&&(o=c.prototype)}else if(a==="%AsyncIteratorPrototype%"){var d=s("%AsyncGenerator%");d&&getProto&&(o=getProto(d.prototype))}return INTRINSICS[a]=o,o},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$2=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName$1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar$1=/\\(\\)?/g,stringToPath$2=function(a){var o=$strSlice(a,0,1),c=$strSlice(a,-1);if(o==="%"&&c!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(c==="%"&&o!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var d=[];return $replace$1(a,rePropName$1,function(b,$,j,_e){d[d.length]=j?$replace$1(_e,reEscapeChar$1,"$1"):$||b}),d},getBaseIntrinsic=function(a,o){var c=a,d;if(hasOwn$2(LEGACY_ALIASES,c)&&(d=LEGACY_ALIASES[c],c="%"+d[0]+"%"),hasOwn$2(INTRINSICS,c)){var b=INTRINSICS[c];if(b===needsEval&&(b=doEval(c)),typeof b>"u"&&!o)throw new $TypeError$1("intrinsic "+a+" exists, but is not available. Please file an issue!");return{alias:d,name:c,value:b}}throw new $SyntaxError("intrinsic "+a+" does not exist!")},getIntrinsic=function(a,o){if(typeof a!="string"||a.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof o!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,a)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var c=stringToPath$2(a),d=c.length>0?c[0]:"",b=getBaseIntrinsic("%"+d+"%",o),$=b.name,j=b.value,_e=!1,et=b.alias;et&&(d=et[0],$spliceApply(c,$concat$1([0,1],et)));for(var tt=1,rt=!0;tt<c.length;tt+=1){var nt=c[tt],it=$strSlice(nt,0,1),at=$strSlice(nt,-1);if((it==='"'||it==="'"||it==="`"||at==='"'||at==="'"||at==="`")&&it!==at)throw new $SyntaxError("property names with quotes must have matching quotes");if((nt==="constructor"||!rt)&&(_e=!0),d+="."+nt,$="%"+d+"%",hasOwn$2(INTRINSICS,$))j=INTRINSICS[$];else if(j!=null){if(!(nt in j)){if(!o)throw new $TypeError$1("base intrinsic for "+a+" exists, but the property is not available.");return}if($gOPD&&tt+1>=c.length){var ct=$gOPD(j,nt);rt=!!ct,rt&&"get"in ct&&!("originalValue"in ct.get)?j=ct.get:j=j[nt]}else rt=hasOwn$2(j,nt),j=j[nt];rt&&!_e&&(INTRINSICS[$]=j)}}return j},callBind$1={exports:{}};(function(s){var a=functionBind,o=getIntrinsic,c=o("%Function.prototype.apply%"),d=o("%Function.prototype.call%"),b=o("%Reflect.apply%",!0)||a.call(d,c),$=o("%Object.getOwnPropertyDescriptor%",!0),j=o("%Object.defineProperty%",!0),_e=o("%Math.max%");if(j)try{j({},"a",{value:1})}catch{j=null}s.exports=function(rt){var nt=b(a,d,arguments);if($&&j){var it=$(nt,"length");it.configurable&&j(nt,"length",{value:1+_e(0,rt.length-(arguments.length-1))})}return nt};var et=function(){return b(a,c,arguments)};j?j(s.exports,"apply",{value:et}):s.exports.apply=et})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(a,o){var c=GetIntrinsic$1(a,!!o);return typeof c=="function"&&$indexOf(a,".prototype.")>-1?callBind(c):c};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString$2=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(s){return s.__proto__}:null);function addNumericSeparator(s,a){if(s===1/0||s===-1/0||s!==s||s&&s>-1e3&&s<1e3||$test.call(/e/,a))return a;var o=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof s=="number"){var c=s<0?-$floor(-s):$floor(s);if(c!==s){var d=String(c),b=$slice.call(a,d.length+1);return $replace.call(d,o,"$&_")+"."+$replace.call($replace.call(b,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(a,o,"$&_")}var utilInspect=require$$0$1,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$4(inspectCustom)?inspectCustom:null,objectInspect=function s(a,o,c,d){var b=o||{};if(has$5(b,"quoteStyle")&&b.quoteStyle!=="single"&&b.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$5(b,"maxStringLength")&&(typeof b.maxStringLength=="number"?b.maxStringLength<0&&b.maxStringLength!==1/0:b.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var $=has$5(b,"customInspect")?b.customInspect:!0;if(typeof $!="boolean"&&$!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$5(b,"indent")&&b.indent!==null&&b.indent!=="	"&&!(parseInt(b.indent,10)===b.indent&&b.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$5(b,"numericSeparator")&&typeof b.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var j=b.numericSeparator;if(typeof a>"u")return"undefined";if(a===null)return"null";if(typeof a=="boolean")return a?"true":"false";if(typeof a=="string")return inspectString(a,b);if(typeof a=="number"){if(a===0)return 1/0/a>0?"0":"-0";var _e=String(a);return j?addNumericSeparator(a,_e):_e}if(typeof a=="bigint"){var et=String(a)+"n";return j?addNumericSeparator(a,et):et}var tt=typeof b.depth>"u"?5:b.depth;if(typeof c>"u"&&(c=0),c>=tt&&tt>0&&typeof a=="object")return isArray$g(a)?"[Array]":"[Object]";var rt=getIndent(b,c);if(typeof d>"u")d=[];else if(indexOf(d,a)>=0)return"[Circular]";function nt(_t,Tt,Mt){if(Tt&&(d=$arrSlice.call(d),d.push(Tt)),Mt){var Bt={depth:b.depth};return has$5(b,"quoteStyle")&&(Bt.quoteStyle=b.quoteStyle),s(_t,Bt,c+1,d)}return s(_t,b,c+1,d)}if(typeof a=="function"&&!isRegExp$1(a)){var it=nameOf(a),at=arrObjKeys(a,nt);return"[Function"+(it?": "+it:" (anonymous)")+"]"+(at.length>0?" { "+$join.call(at,", ")+" }":"")}if(isSymbol$4(a)){var ct=hasShammedSymbols?$replace.call(String(a),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(a);return typeof a=="object"&&!hasShammedSymbols?markBoxed(ct):ct}if(isElement(a)){for(var st="<"+$toLowerCase.call(String(a.nodeName)),ot=a.attributes||[],ht=0;ht<ot.length;ht++)st+=" "+ot[ht].name+"="+wrapQuotes(quote(ot[ht].value),"double",b);return st+=">",a.childNodes&&a.childNodes.length&&(st+="..."),st+="</"+$toLowerCase.call(String(a.nodeName))+">",st}if(isArray$g(a)){if(a.length===0)return"[]";var dt=arrObjKeys(a,nt);return rt&&!singleLineValues(dt)?"["+indentedJoin(dt,rt)+"]":"[ "+$join.call(dt,", ")+" ]"}if(isError(a)){var ft=arrObjKeys(a,nt);return!("cause"in Error.prototype)&&"cause"in a&&!isEnumerable.call(a,"cause")?"{ ["+String(a)+"] "+$join.call($concat.call("[cause]: "+nt(a.cause),ft),", ")+" }":ft.length===0?"["+String(a)+"]":"{ ["+String(a)+"] "+$join.call(ft,", ")+" }"}if(typeof a=="object"&&$){if(inspectSymbol&&typeof a[inspectSymbol]=="function"&&utilInspect)return utilInspect(a,{depth:tt-c});if($!=="symbol"&&typeof a.inspect=="function")return a.inspect()}if(isMap$1(a)){var mt=[];return mapForEach&&mapForEach.call(a,function(_t,Tt){mt.push(nt(Tt,a,!0)+" => "+nt(_t,a))}),collectionOf("Map",mapSize.call(a),mt,rt)}if(isSet$1(a)){var gt=[];return setForEach&&setForEach.call(a,function(_t){gt.push(nt(_t,a))}),collectionOf("Set",setSize.call(a),gt,rt)}if(isWeakMap(a))return weakCollectionOf("WeakMap");if(isWeakSet(a))return weakCollectionOf("WeakSet");if(isWeakRef(a))return weakCollectionOf("WeakRef");if(isNumber(a))return markBoxed(nt(Number(a)));if(isBigInt(a))return markBoxed(nt(bigIntValueOf.call(a)));if(isBoolean(a))return markBoxed(booleanValueOf.call(a));if(isString$4(a))return markBoxed(nt(String(a)));if(!isDate(a)&&!isRegExp$1(a)){var vt=arrObjKeys(a,nt),yt=gPO?gPO(a)===Object.prototype:a instanceof Object||a.constructor===Object,Et=a instanceof Object?"":"null prototype",St=!yt&&toStringTag&&Object(a)===a&&toStringTag in a?$slice.call(toStr(a),8,-1):Et?"Object":"",Ct=yt||typeof a.constructor!="function"?"":a.constructor.name?a.constructor.name+" ":"",wt=Ct+(St||Et?"["+$join.call($concat.call([],St||[],Et||[]),": ")+"] ":"");return vt.length===0?wt+"{}":rt?wt+"{"+indentedJoin(vt,rt)+"}":wt+"{ "+$join.call(vt,", ")+" }"}return String(a)};function wrapQuotes(s,a,o){var c=(o.quoteStyle||a)==="double"?'"':"'";return c+s+c}function quote(s){return $replace.call(String(s),/"/g,"&quot;")}function isArray$g(s){return toStr(s)==="[object Array]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isDate(s){return toStr(s)==="[object Date]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isRegExp$1(s){return toStr(s)==="[object RegExp]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isError(s){return toStr(s)==="[object Error]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isString$4(s){return toStr(s)==="[object String]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isNumber(s){return toStr(s)==="[object Number]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isBoolean(s){return toStr(s)==="[object Boolean]"&&(!toStringTag||!(typeof s=="object"&&toStringTag in s))}function isSymbol$4(s){if(hasShammedSymbols)return s&&typeof s=="object"&&s instanceof Symbol;if(typeof s=="symbol")return!0;if(!s||typeof s!="object"||!symToString)return!1;try{return symToString.call(s),!0}catch{}return!1}function isBigInt(s){if(!s||typeof s!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(s),!0}catch{}return!1}var hasOwn$1=Object.prototype.hasOwnProperty||function(s){return s in this};function has$5(s,a){return hasOwn$1.call(s,a)}function toStr(s){return objectToString$2.call(s)}function nameOf(s){if(s.name)return s.name;var a=$match.call(functionToString.call(s),/^function\s*([\w$]+)/);return a?a[1]:null}function indexOf(s,a){if(s.indexOf)return s.indexOf(a);for(var o=0,c=s.length;o<c;o++)if(s[o]===a)return o;return-1}function isMap$1(s){if(!mapSize||!s||typeof s!="object")return!1;try{mapSize.call(s);try{setSize.call(s)}catch{return!0}return s instanceof Map}catch{}return!1}function isWeakMap(s){if(!weakMapHas||!s||typeof s!="object")return!1;try{weakMapHas.call(s,weakMapHas);try{weakSetHas.call(s,weakSetHas)}catch{return!0}return s instanceof WeakMap}catch{}return!1}function isWeakRef(s){if(!weakRefDeref||!s||typeof s!="object")return!1;try{return weakRefDeref.call(s),!0}catch{}return!1}function isSet$1(s){if(!setSize||!s||typeof s!="object")return!1;try{setSize.call(s);try{mapSize.call(s)}catch{return!0}return s instanceof Set}catch{}return!1}function isWeakSet(s){if(!weakSetHas||!s||typeof s!="object")return!1;try{weakSetHas.call(s,weakSetHas);try{weakMapHas.call(s,weakMapHas)}catch{return!0}return s instanceof WeakSet}catch{}return!1}function isElement(s){return!s||typeof s!="object"?!1:typeof HTMLElement<"u"&&s instanceof HTMLElement?!0:typeof s.nodeName=="string"&&typeof s.getAttribute=="function"}function inspectString(s,a){if(s.length>a.maxStringLength){var o=s.length-a.maxStringLength,c="... "+o+" more character"+(o>1?"s":"");return inspectString($slice.call(s,0,a.maxStringLength),a)+c}var d=$replace.call($replace.call(s,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(d,"single",a)}function lowbyte(s){var a=s.charCodeAt(0),o={8:"b",9:"t",10:"n",12:"f",13:"r"}[a];return o?"\\"+o:"\\x"+(a<16?"0":"")+$toUpperCase.call(a.toString(16))}function markBoxed(s){return"Object("+s+")"}function weakCollectionOf(s){return s+" { ? }"}function collectionOf(s,a,o,c){var d=c?indentedJoin(o,c):$join.call(o,", ");return s+" ("+a+") {"+d+"}"}function singleLineValues(s){for(var a=0;a<s.length;a++)if(indexOf(s[a],`
`)>=0)return!1;return!0}function getIndent(s,a){var o;if(s.indent==="	")o="	";else if(typeof s.indent=="number"&&s.indent>0)o=$join.call(Array(s.indent+1)," ");else return null;return{base:o,prev:$join.call(Array(a+1),o)}}function indentedJoin(s,a){if(s.length===0)return"";var o=`
`+a.prev+a.base;return o+$join.call(s,","+o)+`
`+a.prev}function arrObjKeys(s,a){var o=isArray$g(s),c=[];if(o){c.length=s.length;for(var d=0;d<s.length;d++)c[d]=has$5(s,d)?a(s[d],s):""}var b=typeof gOPS=="function"?gOPS(s):[],$;if(hasShammedSymbols){$={};for(var j=0;j<b.length;j++)$["$"+b[j]]=b[j]}for(var _e in s)has$5(s,_e)&&(o&&String(Number(_e))===_e&&_e<s.length||hasShammedSymbols&&$["$"+_e]instanceof Symbol||($test.call(/[^\w$]/,_e)?c.push(a(_e,s)+": "+a(s[_e],s)):c.push(_e+": "+a(s[_e],s))));if(typeof gOPS=="function")for(var et=0;et<b.length;et++)isEnumerable.call(s,b[et])&&c.push("["+a(b[et])+"]: "+a(s[b[et]],s));return c}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(s,a){for(var o=s,c;(c=o.next)!==null;o=c)if(c.key===a)return o.next=c.next,c.next=s.next,s.next=c,c},listGet=function(s,a){var o=listGetNode(s,a);return o&&o.value},listSet=function(s,a,o){var c=listGetNode(s,a);c?c.value=o:s.next={key:a,next:s.next,value:o}},listHas=function(s,a){return!!listGetNode(s,a)},sideChannel=function(){var a,o,c,d={assert:function(b){if(!d.has(b))throw new $TypeError("Side channel does not contain "+inspect(b))},get:function(b){if($WeakMap&&b&&(typeof b=="object"||typeof b=="function")){if(a)return $weakMapGet(a,b)}else if($Map){if(o)return $mapGet(o,b)}else if(c)return listGet(c,b)},has:function(b){if($WeakMap&&b&&(typeof b=="object"||typeof b=="function")){if(a)return $weakMapHas(a,b)}else if($Map){if(o)return $mapHas(o,b)}else if(c)return listHas(c,b);return!1},set:function(b,$){$WeakMap&&b&&(typeof b=="object"||typeof b=="function")?(a||(a=new $WeakMap),$weakMapSet(a,b,$)):$Map?(o||(o=new $Map),$mapSet(o,b,$)):(c||(c={key:{},next:null}),listSet(c,b,$))}};return d},replace$1=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(s){return replace$1.call(s,percentTwenties,"+")},RFC3986:function(s){return String(s)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$4=Object.prototype.hasOwnProperty,isArray$f=Array.isArray,hexTable=function(){for(var s=[],a=0;a<256;++a)s.push("%"+((a<16?"0":"")+a.toString(16)).toUpperCase());return s}(),compactQueue=function(a){for(;a.length>1;){var o=a.pop(),c=o.obj[o.prop];if(isArray$f(c)){for(var d=[],b=0;b<c.length;++b)typeof c[b]<"u"&&d.push(c[b]);o.obj[o.prop]=d}}},arrayToObject=function(a,o){for(var c=o&&o.plainObjects?Object.create(null):{},d=0;d<a.length;++d)typeof a[d]<"u"&&(c[d]=a[d]);return c},merge$2=function s(a,o,c){if(!o)return a;if(typeof o!="object"){if(isArray$f(a))a.push(o);else if(a&&typeof a=="object")(c&&(c.plainObjects||c.allowPrototypes)||!has$4.call(Object.prototype,o))&&(a[o]=!0);else return[a,o];return a}if(!a||typeof a!="object")return[a].concat(o);var d=a;return isArray$f(a)&&!isArray$f(o)&&(d=arrayToObject(a,c)),isArray$f(a)&&isArray$f(o)?(o.forEach(function(b,$){if(has$4.call(a,$)){var j=a[$];j&&typeof j=="object"&&b&&typeof b=="object"?a[$]=s(j,b,c):a.push(b)}else a[$]=b}),a):Object.keys(o).reduce(function(b,$){var j=o[$];return has$4.call(b,$)?b[$]=s(b[$],j,c):b[$]=j,b},d)},assign$6=function(a,o){return Object.keys(o).reduce(function(c,d){return c[d]=o[d],c},a)},decode=function(s,a,o){var c=s.replace(/\+/g," ");if(o==="iso-8859-1")return c.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(c)}catch{return c}},encode=function(a,o,c,d,b){if(a.length===0)return a;var $=a;if(typeof a=="symbol"?$=Symbol.prototype.toString.call(a):typeof a!="string"&&($=String(a)),c==="iso-8859-1")return escape($).replace(/%u[0-9a-f]{4}/gi,function(tt){return"%26%23"+parseInt(tt.slice(2),16)+"%3B"});for(var j="",_e=0;_e<$.length;++_e){var et=$.charCodeAt(_e);if(et===45||et===46||et===95||et===126||et>=48&&et<=57||et>=65&&et<=90||et>=97&&et<=122||b===formats$2.RFC1738&&(et===40||et===41)){j+=$.charAt(_e);continue}if(et<128){j=j+hexTable[et];continue}if(et<2048){j=j+(hexTable[192|et>>6]+hexTable[128|et&63]);continue}if(et<55296||et>=57344){j=j+(hexTable[224|et>>12]+hexTable[128|et>>6&63]+hexTable[128|et&63]);continue}_e+=1,et=65536+((et&1023)<<10|$.charCodeAt(_e)&1023),j+=hexTable[240|et>>18]+hexTable[128|et>>12&63]+hexTable[128|et>>6&63]+hexTable[128|et&63]}return j},compact=function(a){for(var o=[{obj:{o:a},prop:"o"}],c=[],d=0;d<o.length;++d)for(var b=o[d],$=b.obj[b.prop],j=Object.keys($),_e=0;_e<j.length;++_e){var et=j[_e],tt=$[et];typeof tt=="object"&&tt!==null&&c.indexOf(tt)===-1&&(o.push({obj:$,prop:et}),c.push(tt))}return compactQueue(o),a},isRegExp=function(a){return Object.prototype.toString.call(a)==="[object RegExp]"},isBuffer$4=function(a){return!a||typeof a!="object"?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))},combine=function(a,o){return[].concat(a,o)},maybeMap=function(a,o){if(isArray$f(a)){for(var c=[],d=0;d<a.length;d+=1)c.push(o(a[d]));return c}return o(a)},utils$6={arrayToObject,assign:assign$6,combine,compact,decode,encode,isBuffer:isBuffer$4,isRegExp,maybeMap,merge:merge$2},getSideChannel=sideChannel,utils$5=utils$6,formats$1=formats$3,has$3=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(a){return a+"[]"},comma:"comma",indices:function(a,o){return a+"["+o+"]"},repeat:function(a){return a}},isArray$e=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(s,a){push.apply(s,isArray$e(a)?a:[a])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$3={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$5.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(a){return toISO.call(a)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(a){return typeof a=="string"||typeof a=="number"||typeof a=="boolean"||typeof a=="symbol"||typeof a=="bigint"},sentinel={},stringify$1=function s(a,o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st){for(var ot=a,ht=st,dt=0,ft=!1;(ht=ht.get(sentinel))!==void 0&&!ft;){var mt=ht.get(a);if(dt+=1,typeof mt<"u"){if(mt===dt)throw new RangeError("Cyclic object value");ft=!0}typeof ht.get(sentinel)>"u"&&(dt=0)}if(typeof _e=="function"?ot=_e(o,ot):ot instanceof Date?ot=rt(ot):c==="comma"&&isArray$e(ot)&&(ot=utils$5.maybeMap(ot,function(Pt){return Pt instanceof Date?rt(Pt):Pt})),ot===null){if(b)return j&&!at?j(o,defaults$3.encoder,ct,"key",nt):o;ot=""}if(isNonNullishPrimitive(ot)||utils$5.isBuffer(ot)){if(j){var gt=at?o:j(o,defaults$3.encoder,ct,"key",nt);if(c==="comma"&&at){for(var vt=split.call(String(ot),","),yt="",Et=0;Et<vt.length;++Et)yt+=(Et===0?"":",")+it(j(vt[Et],defaults$3.encoder,ct,"value",nt));return[it(gt)+(d&&isArray$e(ot)&&vt.length===1?"[]":"")+"="+yt]}return[it(gt)+"="+it(j(ot,defaults$3.encoder,ct,"value",nt))]}return[it(o)+"="+it(String(ot))]}var St=[];if(typeof ot>"u")return St;var Ct;if(c==="comma"&&isArray$e(ot))Ct=[{value:ot.length>0?ot.join(",")||null:void 0}];else if(isArray$e(_e))Ct=_e;else{var wt=Object.keys(ot);Ct=et?wt.sort(et):wt}for(var _t=d&&isArray$e(ot)&&ot.length===1?o+"[]":o,Tt=0;Tt<Ct.length;++Tt){var Mt=Ct[Tt],Bt=typeof Mt=="object"&&typeof Mt.value<"u"?Mt.value:ot[Mt];if(!($&&Bt===null)){var Rt=isArray$e(ot)?typeof c=="function"?c(_t,Mt):_t:_t+(tt?"."+Mt:"["+Mt+"]");st.set(a,dt);var bt=getSideChannel();bt.set(sentinel,st),pushToArray(St,s(Bt,Rt,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,bt))}}return St},normalizeStringifyOptions=function(a){if(!a)return defaults$3;if(a.encoder!==null&&typeof a.encoder<"u"&&typeof a.encoder!="function")throw new TypeError("Encoder has to be a function.");var o=a.charset||defaults$3.charset;if(typeof a.charset<"u"&&a.charset!=="utf-8"&&a.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var c=formats$1.default;if(typeof a.format<"u"){if(!has$3.call(formats$1.formatters,a.format))throw new TypeError("Unknown format option provided.");c=a.format}var d=formats$1.formatters[c],b=defaults$3.filter;return(typeof a.filter=="function"||isArray$e(a.filter))&&(b=a.filter),{addQueryPrefix:typeof a.addQueryPrefix=="boolean"?a.addQueryPrefix:defaults$3.addQueryPrefix,allowDots:typeof a.allowDots>"u"?defaults$3.allowDots:!!a.allowDots,charset:o,charsetSentinel:typeof a.charsetSentinel=="boolean"?a.charsetSentinel:defaults$3.charsetSentinel,delimiter:typeof a.delimiter>"u"?defaults$3.delimiter:a.delimiter,encode:typeof a.encode=="boolean"?a.encode:defaults$3.encode,encoder:typeof a.encoder=="function"?a.encoder:defaults$3.encoder,encodeValuesOnly:typeof a.encodeValuesOnly=="boolean"?a.encodeValuesOnly:defaults$3.encodeValuesOnly,filter:b,format:c,formatter:d,serializeDate:typeof a.serializeDate=="function"?a.serializeDate:defaults$3.serializeDate,skipNulls:typeof a.skipNulls=="boolean"?a.skipNulls:defaults$3.skipNulls,sort:typeof a.sort=="function"?a.sort:null,strictNullHandling:typeof a.strictNullHandling=="boolean"?a.strictNullHandling:defaults$3.strictNullHandling}},stringify_1=function(s,a){var o=s,c=normalizeStringifyOptions(a),d,b;typeof c.filter=="function"?(b=c.filter,o=b("",o)):isArray$e(c.filter)&&(b=c.filter,d=b);var $=[];if(typeof o!="object"||o===null)return"";var j;a&&a.arrayFormat in arrayPrefixGenerators?j=a.arrayFormat:a&&"indices"in a?j=a.indices?"indices":"repeat":j="indices";var _e=arrayPrefixGenerators[j];if(a&&"commaRoundTrip"in a&&typeof a.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var et=_e==="comma"&&a&&a.commaRoundTrip;d||(d=Object.keys(o)),c.sort&&d.sort(c.sort);for(var tt=getSideChannel(),rt=0;rt<d.length;++rt){var nt=d[rt];c.skipNulls&&o[nt]===null||pushToArray($,stringify$1(o[nt],nt,_e,et,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,tt))}var it=$.join(c.delimiter),at=c.addQueryPrefix===!0?"?":"";return c.charsetSentinel&&(c.charset==="iso-8859-1"?at+="utf8=%26%2310003%3B&":at+="utf8=%E2%9C%93&"),it.length>0?at+it:""},utils$4=utils$6,has$2=Object.prototype.hasOwnProperty,isArray$d=Array.isArray,defaults$2={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$4.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(s){return s.replace(/&#(\d+);/g,function(a,o){return String.fromCharCode(parseInt(o,10))})},parseArrayValue=function(s,a){return s&&typeof s=="string"&&a.comma&&s.indexOf(",")>-1?s.split(","):s},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(a,o){var c={},d=o.ignoreQueryPrefix?a.replace(/^\?/,""):a,b=o.parameterLimit===1/0?void 0:o.parameterLimit,$=d.split(o.delimiter,b),j=-1,_e,et=o.charset;if(o.charsetSentinel)for(_e=0;_e<$.length;++_e)$[_e].indexOf("utf8=")===0&&($[_e]===charsetSentinel?et="utf-8":$[_e]===isoSentinel&&(et="iso-8859-1"),j=_e,_e=$.length);for(_e=0;_e<$.length;++_e)if(_e!==j){var tt=$[_e],rt=tt.indexOf("]="),nt=rt===-1?tt.indexOf("="):rt+1,it,at;nt===-1?(it=o.decoder(tt,defaults$2.decoder,et,"key"),at=o.strictNullHandling?null:""):(it=o.decoder(tt.slice(0,nt),defaults$2.decoder,et,"key"),at=utils$4.maybeMap(parseArrayValue(tt.slice(nt+1),o),function(ct){return o.decoder(ct,defaults$2.decoder,et,"value")})),at&&o.interpretNumericEntities&&et==="iso-8859-1"&&(at=interpretNumericEntities(at)),tt.indexOf("[]=")>-1&&(at=isArray$d(at)?[at]:at),has$2.call(c,it)?c[it]=utils$4.combine(c[it],at):c[it]=at}return c},parseObject=function(s,a,o,c){for(var d=c?a:parseArrayValue(a,o),b=s.length-1;b>=0;--b){var $,j=s[b];if(j==="[]"&&o.parseArrays)$=[].concat(d);else{$=o.plainObjects?Object.create(null):{};var _e=j.charAt(0)==="["&&j.charAt(j.length-1)==="]"?j.slice(1,-1):j,et=parseInt(_e,10);!o.parseArrays&&_e===""?$={0:d}:!isNaN(et)&&j!==_e&&String(et)===_e&&et>=0&&o.parseArrays&&et<=o.arrayLimit?($=[],$[et]=d):_e!=="__proto__"&&($[_e]=d)}d=$}return d},parseKeys=function(a,o,c,d){if(a){var b=c.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a,$=/(\[[^[\]]*])/,j=/(\[[^[\]]*])/g,_e=c.depth>0&&$.exec(b),et=_e?b.slice(0,_e.index):b,tt=[];if(et){if(!c.plainObjects&&has$2.call(Object.prototype,et)&&!c.allowPrototypes)return;tt.push(et)}for(var rt=0;c.depth>0&&(_e=j.exec(b))!==null&&rt<c.depth;){if(rt+=1,!c.plainObjects&&has$2.call(Object.prototype,_e[1].slice(1,-1))&&!c.allowPrototypes)return;tt.push(_e[1])}return _e&&tt.push("["+b.slice(_e.index)+"]"),parseObject(tt,o,c,d)}},normalizeParseOptions=function(a){if(!a)return defaults$2;if(a.decoder!==null&&a.decoder!==void 0&&typeof a.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof a.charset<"u"&&a.charset!=="utf-8"&&a.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=typeof a.charset>"u"?defaults$2.charset:a.charset;return{allowDots:typeof a.allowDots>"u"?defaults$2.allowDots:!!a.allowDots,allowPrototypes:typeof a.allowPrototypes=="boolean"?a.allowPrototypes:defaults$2.allowPrototypes,allowSparse:typeof a.allowSparse=="boolean"?a.allowSparse:defaults$2.allowSparse,arrayLimit:typeof a.arrayLimit=="number"?a.arrayLimit:defaults$2.arrayLimit,charset:o,charsetSentinel:typeof a.charsetSentinel=="boolean"?a.charsetSentinel:defaults$2.charsetSentinel,comma:typeof a.comma=="boolean"?a.comma:defaults$2.comma,decoder:typeof a.decoder=="function"?a.decoder:defaults$2.decoder,delimiter:typeof a.delimiter=="string"||utils$4.isRegExp(a.delimiter)?a.delimiter:defaults$2.delimiter,depth:typeof a.depth=="number"||a.depth===!1?+a.depth:defaults$2.depth,ignoreQueryPrefix:a.ignoreQueryPrefix===!0,interpretNumericEntities:typeof a.interpretNumericEntities=="boolean"?a.interpretNumericEntities:defaults$2.interpretNumericEntities,parameterLimit:typeof a.parameterLimit=="number"?a.parameterLimit:defaults$2.parameterLimit,parseArrays:a.parseArrays!==!1,plainObjects:typeof a.plainObjects=="boolean"?a.plainObjects:defaults$2.plainObjects,strictNullHandling:typeof a.strictNullHandling=="boolean"?a.strictNullHandling:defaults$2.strictNullHandling}},parse$1=function(s,a){var o=normalizeParseOptions(a);if(s===""||s===null||typeof s>"u")return o.plainObjects?Object.create(null):{};for(var c=typeof s=="string"?parseValues(s,o):s,d=o.plainObjects?Object.create(null):{},b=Object.keys(c),$=0;$<b.length;++$){var j=b[$],_e=parseKeys(j,c[j],o,typeof s=="string");d=utils$4.merge(d,_e,o)}return o.allowSparse===!0?d:utils$4.compact(d)},stringify=stringify_1,parse=parse$1,formats=formats$3,lib={formats,parse,stringify},utils$3={};(function(s){function a(d,b){var $=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!$){if(Array.isArray(d)||($=o(d))||b&&d&&typeof d.length=="number"){$&&(d=$);var j=0,_e=function(){};return{s:_e,n:function(){return j>=d.length?{done:!0}:{done:!1,value:d[j++]}},e:function(it){throw it},f:_e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et=!0,tt=!1,rt;return{s:function(){$=$.call(d)},n:function(){var it=$.next();return et=it.done,it},e:function(it){tt=!0,rt=it},f:function(){try{!et&&$.return!=null&&$.return()}finally{if(tt)throw rt}}}}function o(d,b){if(d){if(typeof d=="string")return c(d,b);var $=Object.prototype.toString.call(d).slice(8,-1);if($==="Object"&&d.constructor&&($=d.constructor.name),$==="Map"||$==="Set")return Array.from(d);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return c(d,b)}}function c(d,b){(b==null||b>d.length)&&(b=d.length);for(var $=0,j=new Array(b);$<b;$++)j[$]=d[$];return j}s.type=d=>d.split(/ *; */).shift(),s.params=d=>{const b={};var $=a(d.split(/ *; */)),j;try{for($.s();!(j=$.n()).done;){const et=j.value.split(/ *= */),tt=et.shift(),rt=et.shift();tt&&rt&&(b[tt]=rt)}}catch(_e){$.e(_e)}finally{$.f()}return b},s.parseLinks=d=>{const b={};var $=a(d.split(/ *, */)),j;try{for($.s();!(j=$.n()).done;){const et=j.value.split(/ *; */),tt=et[0].slice(1,-1),rt=et[1].split(/ *= */)[1].slice(1,-1);b[rt]=tt}}catch(_e){$.e(_e)}finally{$.f()}return b},s.cleanHeader=(d,b)=>(delete d["content-type"],delete d["content-length"],delete d["transfer-encoding"],delete d.host,b&&(delete d.authorization,delete d.cookie),d),s.isObject=d=>d!==null&&typeof d=="object",s.hasOwn=Object.hasOwn||function(d,b){if(d==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(d),b)},s.mixin=(d,b)=>{for(const $ in b)s.hasOwn(b,$)&&(d[$]=b[$])}})(utils$3);const semver=require$$0$1,_require=utils$3,isObject$c=_require.isObject,hasOwn=_require.hasOwn;var requestBase=RequestBase;function RequestBase(){}RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this};RequestBase.prototype.parse=function(s){return this._parser=s,this};RequestBase.prototype.responseType=function(s){return this._responseType=s,this};RequestBase.prototype.serialize=function(s){return this._serializer=s,this};RequestBase.prototype.timeout=function(s){if(!s||typeof s!="object")return this._timeout=s,this._responseTimeout=0,this._uploadTimeout=0,this;for(const a in s)if(hasOwn(s,a))switch(a){case"deadline":this._timeout=s.deadline;break;case"response":this._responseTimeout=s.response;break;case"upload":this._uploadTimeout=s.upload;break;default:console.warn("Unknown timeout option",a)}return this};RequestBase.prototype.retry=function(s,a){return(arguments.length===0||s===!0)&&(s=1),s<=0&&(s=0),this._maxRetries=s,this._retries=0,this._retryCallback=a,this};const ERROR_CODES=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),STATUS_CODES=new Set([408,413,429,500,502,503,504,521,522,524]);RequestBase.prototype._shouldRetry=function(s,a){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{const o=this._retryCallback(s,a);if(o===!0)return!0;if(o===!1)return!1}catch(o){console.error(o)}return!!(a&&a.status&&STATUS_CODES.has(a.status)||s&&(s.code&&ERROR_CODES.has(s.code)||s.timeout&&s.code==="ECONNABORTED"||s.crossDomain))};RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()};RequestBase.prototype.then=function(s,a){if(!this._fullfilledPromise){const o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((c,d)=>{o.on("abort",()=>{if(this._maxRetries&&this._maxRetries>this._retries)return;if(this.timedout&&this.timedoutError){d(this.timedoutError);return}const b=new Error("Aborted");b.code="ABORTED",b.status=this.status,b.method=this.method,b.url=this.url,d(b)}),o.end((b,$)=>{b?d(b):c($)})})}return this._fullfilledPromise.then(s,a)};RequestBase.prototype.catch=function(s){return this.then(void 0,s)};RequestBase.prototype.use=function(s){return s(this),this};RequestBase.prototype.ok=function(s){if(typeof s!="function")throw new Error("Callback required");return this._okCallback=s,this};RequestBase.prototype._isResponseOK=function(s){return s?this._okCallback?this._okCallback(s):s.status>=200&&s.status<300:!1};RequestBase.prototype.get=function(s){return this._header[s.toLowerCase()]};RequestBase.prototype.getHeader=RequestBase.prototype.get;RequestBase.prototype.set=function(s,a){if(isObject$c(s)){for(const o in s)hasOwn(s,o)&&this.set(o,s[o]);return this}return this._header[s.toLowerCase()]=a,this.header[s]=a,this};RequestBase.prototype.unset=function(s){return delete this._header[s.toLowerCase()],delete this.header[s],this};RequestBase.prototype.field=function(s,a,o){if(s==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(isObject$c(s)){for(const c in s)hasOwn(s,c)&&this.field(c,s[c]);return this}if(Array.isArray(a)){for(const c in a)hasOwn(a,c)&&this.field(s,a[c]);return this}if(a==null)throw new Error(".field(name, val) val can not be empty");return typeof a=="boolean"&&(a=String(a)),o?this._getFormData().append(s,a,o):this._getFormData().append(s,a),this};RequestBase.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(semver.gte(process.version,"v13.0.0")&&semver.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");this.req.abort()}return this.clearTimeout(),this.emit("abort"),this};RequestBase.prototype._auth=function(s,a,o,c){switch(o.type){case"basic":this.set("Authorization",`Basic ${c(`${s}:${a}`)}`);break;case"auto":this.username=s,this.password=a;break;case"bearer":this.set("Authorization",`Bearer ${s}`);break}return this};RequestBase.prototype.withCredentials=function(s){return s===void 0&&(s=!0),this._withCredentials=s,this};RequestBase.prototype.redirects=function(s){return this._maxRedirects=s,this};RequestBase.prototype.maxResponseSize=function(s){if(typeof s!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=s,this};RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};RequestBase.prototype.send=function(s){const a=isObject$c(s);let o=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(a&&!this._data)Array.isArray(s)?this._data=[]:this._isHost(s)||(this._data={});else if(s&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(a&&isObject$c(this._data))for(const c in s){if(typeof s[c]=="bigint"&&!s[c].toJSON)throw new Error("Cannot serialize BigInt value to json");hasOwn(s,c)&&(this._data[c]=s[c])}else{if(typeof s=="bigint")throw new Error("Cannot send value of type BigInt");typeof s=="string"?(o||this.type("form"),o=this._header["content-type"],o&&(o=o.toLowerCase().trim()),o==="application/x-www-form-urlencoded"?this._data=this._data?`${this._data}&${s}`:s:this._data=(this._data||"")+s):this._data=s}return!a||this._isHost(s)?this:(o||this.type("json"),this)};RequestBase.prototype.sortQuery=function(s){return this._sort=typeof s>"u"?!0:s,this};RequestBase.prototype._finalizeQueryString=function(){const s=this._query.join("&");if(s&&(this.url+=(this.url.includes("?")?"&":"?")+s),this._query.length=0,this._sort){const a=this.url.indexOf("?");if(a>=0){const o=this.url.slice(a+1).split("&");typeof this._sort=="function"?o.sort(this._sort):o.sort(),this.url=this.url.slice(0,a)+"?"+o.join("&")}}};RequestBase.prototype._appendQueryString=()=>{console.warn("Unsupported")};RequestBase.prototype._timeoutError=function(s,a,o){if(this._aborted)return;const c=new Error(`${s+a}ms exceeded`);c.timeout=a,c.code="ECONNABORTED",c.errno=o,this.timedout=!0,this.timedoutError=c,this.abort(),this.callback(c)};RequestBase.prototype._setTimeouts=function(){const s=this;this._timeout&&!this._timer&&(this._timer=setTimeout(()=>{s._timeoutError("Timeout of ",s._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(()=>{s._timeoutError("Response timeout of ",s._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};const utils$2=utils$3;var responseBase=ResponseBase;function ResponseBase(){}ResponseBase.prototype.get=function(s){return this.header[s.toLowerCase()]};ResponseBase.prototype._setHeaderProperties=function(s){const a=s["content-type"]||"";this.type=utils$2.type(a);const o=utils$2.params(a);for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&(this[c]=o[c]);this.links={};try{s.link&&(this.links=utils$2.parseLinks(s.link))}catch{}};ResponseBase.prototype._setStatusProperties=function(s){const a=Math.trunc(s/100);this.statusCode=s,this.status=this.statusCode,this.statusType=a,this.info=a===1,this.ok=a===2,this.redirect=a===3,this.clientError=a===4,this.serverError=a===5,this.error=a===4||a===5?this.toError():!1,this.created=s===201,this.accepted=s===202,this.noContent=s===204,this.badRequest=s===400,this.unauthorized=s===401,this.notAcceptable=s===406,this.forbidden=s===403,this.notFound=s===404,this.unprocessableEntity=s===422};function _createForOfIteratorHelper(s,a){var o=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!o){if(Array.isArray(s)||(o=_unsupportedIterableToArray(s))||a&&s&&typeof s.length=="number"){o&&(s=o);var c=0,d=function(){};return{s:d,n:function(){return c>=s.length?{done:!0}:{done:!1,value:s[c++]}},e:function(et){throw et},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b=!0,$=!1,j;return{s:function(){o=o.call(s)},n:function(){var et=o.next();return b=et.done,et},e:function(et){$=!0,j=et},f:function(){try{!b&&o.return!=null&&o.return()}finally{if($)throw j}}}}function _unsupportedIterableToArray(s,a){if(s){if(typeof s=="string")return _arrayLikeToArray(s,a);var o=Object.prototype.toString.call(s).slice(8,-1);if(o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set")return Array.from(s);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _arrayLikeToArray(s,a)}}function _arrayLikeToArray(s,a){(a==null||a>s.length)&&(a=s.length);for(var o=0,c=new Array(a);o<a;o++)c[o]=s[o];return c}function Agent(){this._defaults=[]}for(var _i=0,_arr=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];_i<_arr.length;_i++){const s=_arr[_i];Agent.prototype[s]=function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return this._defaults.push({fn:s,args:o}),this}}Agent.prototype._setDefaults=function(s){var a=_createForOfIteratorHelper(this._defaults),o;try{for(a.s();!(o=a.n()).done;){const c=o.value;s[c.fn](...c.args)}}catch(c){a.e(c)}finally{a.f()}};var agentBase=Agent;(function(s,a){function o(_t,Tt){var Mt=typeof Symbol<"u"&&_t[Symbol.iterator]||_t["@@iterator"];if(!Mt){if(Array.isArray(_t)||(Mt=c(_t))||Tt&&_t&&typeof _t.length=="number"){Mt&&(_t=Mt);var Bt=0,Rt=function(){};return{s:Rt,n:function(){return Bt>=_t.length?{done:!0}:{done:!1,value:_t[Bt++]}},e:function(Lt){throw Lt},f:Rt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bt=!0,Pt=!1,Dt;return{s:function(){Mt=Mt.call(_t)},n:function(){var Lt=Mt.next();return bt=Lt.done,Lt},e:function(Lt){Pt=!0,Dt=Lt},f:function(){try{!bt&&Mt.return!=null&&Mt.return()}finally{if(Pt)throw Dt}}}}function c(_t,Tt){if(_t){if(typeof _t=="string")return d(_t,Tt);var Mt=Object.prototype.toString.call(_t).slice(8,-1);if(Mt==="Object"&&_t.constructor&&(Mt=_t.constructor.name),Mt==="Map"||Mt==="Set")return Array.from(_t);if(Mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mt))return d(_t,Tt)}}function d(_t,Tt){(Tt==null||Tt>_t.length)&&(Tt=_t.length);for(var Mt=0,Bt=new Array(Tt);Mt<Tt;Mt++)Bt[Mt]=_t[Mt];return Bt}let b;typeof window<"u"?b=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),b=void 0):b=self;const $=componentEmitterExports,j=fastSafeStringify,_e=lib,et=requestBase,tt=utils$3,rt=tt.isObject,nt=tt.mixin,it=tt.hasOwn,at=responseBase,ct=agentBase;function st(){}s.exports=function(_t,Tt){return typeof Tt=="function"?new a.Request("GET",_t).end(Tt):arguments.length===1?new a.Request("GET",_t):new a.Request(_t,Tt)},a=s.exports;const ot=a;a.Request=Et,ot.getXHR=()=>{if(b.XMLHttpRequest)return new b.XMLHttpRequest;throw new Error("Browser-only version of superagent could not find XHR")};const ht="".trim?_t=>_t.trim():_t=>_t.replace(/(^\s*|\s*$)/g,"");function dt(_t){if(!rt(_t))return _t;const Tt=[];for(const Mt in _t)it(_t,Mt)&&ft(Tt,Mt,_t[Mt]);return Tt.join("&")}function ft(_t,Tt,Mt){if(Mt!==void 0){if(Mt===null){_t.push(encodeURI(Tt));return}if(Array.isArray(Mt)){var Bt=o(Mt),Rt;try{for(Bt.s();!(Rt=Bt.n()).done;){const bt=Rt.value;ft(_t,Tt,bt)}}catch(bt){Bt.e(bt)}finally{Bt.f()}}else if(rt(Mt))for(const bt in Mt)it(Mt,bt)&&ft(_t,`${Tt}[${bt}]`,Mt[bt]);else _t.push(encodeURI(Tt)+"="+encodeURIComponent(Mt))}}ot.serializeObject=dt;function mt(_t){const Tt={},Mt=_t.split("&");let Bt,Rt;for(let bt=0,Pt=Mt.length;bt<Pt;++bt)Bt=Mt[bt],Rt=Bt.indexOf("="),Rt===-1?Tt[decodeURIComponent(Bt)]="":Tt[decodeURIComponent(Bt.slice(0,Rt))]=decodeURIComponent(Bt.slice(Rt+1));return Tt}ot.parseString=mt,ot.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},ot.serialize={"application/x-www-form-urlencoded":_e.stringify,"application/json":j},ot.parse={"application/x-www-form-urlencoded":mt,"application/json":JSON.parse};function gt(_t){const Tt=_t.split(/\r?\n/),Mt={};let Bt,Rt,bt,Pt;for(let Dt=0,$t=Tt.length;Dt<$t;++Dt)Rt=Tt[Dt],Bt=Rt.indexOf(":"),Bt!==-1&&(bt=Rt.slice(0,Bt).toLowerCase(),Pt=ht(Rt.slice(Bt+1)),Mt[bt]=Pt);return Mt}function vt(_t){return/[/+]json($|[^-\w])/i.test(_t)}function yt(_t){this.req=_t,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;let Tt=this.xhr.status;Tt===1223&&(Tt=204),this._setStatusProperties(Tt),this.headers=gt(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&_t._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}nt(yt.prototype,at.prototype),yt.prototype._parseBody=function(_t){let Tt=ot.parse[this.type];return this.req._parser?this.req._parser(this,_t):(!Tt&&vt(this.type)&&(Tt=ot.parse["application/json"]),Tt&&_t&&(_t.length>0||_t instanceof Object)?Tt(_t):null)},yt.prototype.toError=function(){const _t=this.req,Tt=_t.method,Mt=_t.url,Bt=`cannot ${Tt} ${Mt} (${this.status})`,Rt=new Error(Bt);return Rt.status=this.status,Rt.method=Tt,Rt.url=Mt,Rt},ot.Response=yt;function Et(_t,Tt){const Mt=this;this._query=this._query||[],this.method=_t,this.url=Tt,this.header={},this._header={},this.on("end",()=>{let Bt=null,Rt=null;try{Rt=new yt(Mt)}catch(Pt){return Bt=new Error("Parser is unable to parse the response"),Bt.parse=!0,Bt.original=Pt,Mt.xhr?(Bt.rawResponse=typeof Mt.xhr.responseType>"u"?Mt.xhr.responseText:Mt.xhr.response,Bt.status=Mt.xhr.status?Mt.xhr.status:null,Bt.statusCode=Bt.status):(Bt.rawResponse=null,Bt.status=null),Mt.callback(Bt)}Mt.emit("response",Rt);let bt;try{Mt._isResponseOK(Rt)||(bt=new Error(Rt.statusText||Rt.text||"Unsuccessful HTTP response"))}catch(Pt){bt=Pt}bt?(bt.original=Bt,bt.response=Rt,bt.status=bt.status||Rt.status,Mt.callback(bt,Rt)):Mt.callback(null,Rt)})}$(Et.prototype),nt(Et.prototype,et.prototype),Et.prototype.type=function(_t){return this.set("Content-Type",ot.types[_t]||_t),this},Et.prototype.accept=function(_t){return this.set("Accept",ot.types[_t]||_t),this},Et.prototype.auth=function(_t,Tt,Mt){arguments.length===1&&(Tt=""),typeof Tt=="object"&&Tt!==null&&(Mt=Tt,Tt=""),Mt||(Mt={type:typeof btoa=="function"?"basic":"auto"});const Bt=Mt.encoder?Mt.encoder:Rt=>{if(typeof btoa=="function")return btoa(Rt);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(_t,Tt,Mt,Bt)},Et.prototype.query=function(_t){return typeof _t!="string"&&(_t=dt(_t)),_t&&this._query.push(_t),this},Et.prototype.attach=function(_t,Tt,Mt){if(Tt){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(_t,Tt,Mt||Tt.name)}return this},Et.prototype._getFormData=function(){return this._formData||(this._formData=new b.FormData),this._formData},Et.prototype.callback=function(_t,Tt){if(this._shouldRetry(_t,Tt))return this._retry();const Mt=this._callback;this.clearTimeout(),_t&&(this._maxRetries&&(_t.retries=this._retries-1),this.emit("error",_t)),Mt(_t,Tt)},Et.prototype.crossDomainError=function(){const _t=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);_t.crossDomain=!0,_t.status=this.status,_t.method=this.method,_t.url=this.url,this.callback(_t)},Et.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},Et.prototype.ca=Et.prototype.agent,Et.prototype.buffer=Et.prototype.ca,Et.prototype.write=()=>{throw new Error("Streaming is not supported in browser version of superagent")},Et.prototype.pipe=Et.prototype.write,Et.prototype._isHost=function(_t){return _t&&typeof _t=="object"&&!Array.isArray(_t)&&Object.prototype.toString.call(_t)!=="[object Object]"},Et.prototype.end=function(_t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=_t||st,this._finalizeQueryString(),this._end()},Et.prototype._setUploadTimeout=function(){const _t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(()=>{_t._timeoutError("Upload timeout of ",_t._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},Et.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));const _t=this;this.xhr=ot.getXHR();const Tt=this.xhr;let Mt=this._formData||this._data;this._setTimeouts(),Tt.addEventListener("readystatechange",()=>{const Rt=Tt.readyState;if(Rt>=2&&_t._responseTimeoutTimer&&clearTimeout(_t._responseTimeoutTimer),Rt!==4)return;let bt;try{bt=Tt.status}catch{bt=0}if(!bt)return _t.timedout||_t._aborted?void 0:_t.crossDomainError();_t.emit("end")});const Bt=(Rt,bt)=>{bt.total>0&&(bt.percent=bt.loaded/bt.total*100,bt.percent===100&&clearTimeout(_t._uploadTimeoutTimer)),bt.direction=Rt,_t.emit("progress",bt)};if(this.hasListeners("progress"))try{Tt.addEventListener("progress",Bt.bind(null,"download")),Tt.upload&&Tt.upload.addEventListener("progress",Bt.bind(null,"upload"))}catch{}Tt.upload&&this._setUploadTimeout();try{this.username&&this.password?Tt.open(this.method,this.url,!0,this.username,this.password):Tt.open(this.method,this.url,!0)}catch(Rt){return this.callback(Rt)}if(this._withCredentials&&(Tt.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof Mt!="string"&&!this._isHost(Mt)){const Rt=this._header["content-type"];let bt=this._serializer||ot.serialize[Rt?Rt.split(";")[0]:""];!bt&&vt(Rt)&&(bt=ot.serialize["application/json"]),bt&&(Mt=bt(Mt))}for(const Rt in this.header)this.header[Rt]!==null&&it(this.header,Rt)&&Tt.setRequestHeader(Rt,this.header[Rt]);this._responseType&&(Tt.responseType=this._responseType),this.emit("request",this),Tt.send(typeof Mt>"u"?null:Mt)},ot.agent=()=>new ct;for(var St=0,Ct=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];St<Ct.length;St++){const _t=Ct[St];ct.prototype[_t.toLowerCase()]=function(Tt,Mt){const Bt=new ot.Request(_t,Tt);return this._setDefaults(Bt),Mt&&Bt.end(Mt),Bt}}ct.prototype.del=ct.prototype.delete,ot.get=(_t,Tt,Mt)=>{const Bt=ot("GET",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.query(Tt),Mt&&Bt.end(Mt),Bt},ot.head=(_t,Tt,Mt)=>{const Bt=ot("HEAD",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.query(Tt),Mt&&Bt.end(Mt),Bt},ot.options=(_t,Tt,Mt)=>{const Bt=ot("OPTIONS",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.send(Tt),Mt&&Bt.end(Mt),Bt};function wt(_t,Tt,Mt){const Bt=ot("DELETE",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.send(Tt),Mt&&Bt.end(Mt),Bt}ot.del=wt,ot.delete=wt,ot.patch=(_t,Tt,Mt)=>{const Bt=ot("PATCH",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.send(Tt),Mt&&Bt.end(Mt),Bt},ot.post=(_t,Tt,Mt)=>{const Bt=ot("POST",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.send(Tt),Mt&&Bt.end(Mt),Bt},ot.put=(_t,Tt,Mt)=>{const Bt=ot("PUT",_t);return typeof Tt=="function"&&(Mt=Tt,Tt=null),Tt&&Bt.send(Tt),Mt&&Bt.end(Mt),Bt}})(client,client.exports);var clientExports=client.exports;const request=getDefaultExportFromCjs(clientExports),rootUrl="/api/v1/donuts";async function fetchGlazes(){return(await request.get(`${rootUrl}/glazes`)).body}async function fetchBases(){return(await request.get(`${rootUrl}/bases`)).body}async function fetchBase(s){return(await request.get(`${rootUrl}/bases/${s}`)).body}async function fetchGlaze(s){return(await request.get(`${rootUrl}/glazes/${s}`)).body}async function saveDonut(s){return(await request.post(rootUrl).set("Authorization",`Bearer ${s.token}`).send({base:s.base,glaze:s.glaze,gold:s.gold})).body}async function fetchDonuts({token:s}){return(await request.get(`${rootUrl}/me`).set("Authorization",`Bearer ${s}`)).body}async function delDonut(s,a){console.log(a),await request.delete(`${rootUrl}/${s}`).set("Authorization",`Bearer ${a}`)}function DonutForm(s){const{selectedGlaze:a,selectedBase:o,changeBase:c,changeGlaze:d}=s,[b,$]=useSearchParams(),{data:j,isLoading:_e,isError:et}=useQuery(["glazes"],fetchGlazes),{data:tt,isLoading:rt,isError:nt}=useQuery(["bases"],fetchBases);if(et)return jsx("p",{children:"Something went wrong"});if(nt)return jsx("p",{children:"Something went wrong"});if(!j||_e)return jsx(Fragment,{children:"loading..."});if(!tt||rt)return jsx(Fragment,{children:"loading..."});const it=ct=>{const st=j.filter(ot=>ot.id==ct.target.value)[0];console.log(st),b.set("glaze",String(st.id)),$(b),d(st)},at=ct=>{const st=tt.filter(ot=>ot.id==ct.target.value)[0];b.set("base",String(st.id)),$(b),c(st)};return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center",children:[jsxs("h1",{className:"text-5xl text-[#E26A5E] font-extrabold leading-snug",children:["Create your own ",jsx("br",{}),"yummy donuts!"]}),jsx("img",{src:"/images/donut2.png",alt:"sloth-donut"})]}),jsx("form",{className:"mt-10 w-96",children:jsxs("div",{className:"grid grid-cols-1 gap-3 mt-11 place-items-center",children:[jsxs("div",{id:"glaze-select",className:"flex items-center",children:[jsx("label",{className:"mr-2 text-xl",htmlFor:"glaze",children:"Glaze"}),jsx("select",{id:"glaze",className:"w-64 h-12 p-2 text-md text-gray-500 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none appearance-none",onChange:it,value:a.id,name:"glaze",children:j.map((ct,st)=>jsx("option",{value:ct.id,children:ct.name},st))})]}),jsxs("div",{id:"base-select",className:"flex items-center",children:[jsx("label",{htmlFor:"base",className:"mr-2 text-xl",children:"Base"}),jsx("select",{id:"base",className:"w-64 h-12 p-2 ml-1 text-md text-gray-500 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none appearance-none",onChange:at,value:o.id,name:"base",children:tt.map((ct,st)=>jsx("option",{value:ct.id,children:ct.name},st))})]})]})})]})}function DonutDetails(s){const{selectedBase:a,selectedGlaze:o,withGold:c}=s,d={name:"coated with gold",price:1e3};return jsxs("div",{className:"grid grid-flow-row-dense grid-cols-1 gap-3",children:[jsx("div",{className:"col-span-1",children:jsxs("div",{className:"flex items-center",children:[jsx("h2",{className:"text-5xl font-extrabold leading-snug",children:"Donut Details"}),jsx("img",{src:"/images/donut3.png",alt:"white-cat-donut"})]})}),jsx("div",{className:"col-span-1",children:jsxs("h3",{className:"mt-5 text-3xl",children:[a.name," base with ",o.name," topping"," ",jsx("span",{className:"font-bold text-[#8f8f32]",children:c?d.name:""})]})}),jsx("div",{className:"col-span-1",children:jsxs("h3",{className:"mt-3 text-2xl",children:["Price: $",o.price," ",c?`+ $${d.price}`:""]})})]})}const Cache={enabled:!1,files:{},add:function(s,a){this.enabled!==!1&&(this.files[s]=a)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class LoadingManager{constructor(a,o,c){const d=this;let b=!1,$=0,j=0,_e;const et=[];this.onStart=void 0,this.onLoad=a,this.onProgress=o,this.onError=c,this.itemStart=function(tt){j++,b===!1&&d.onStart!==void 0&&d.onStart(tt,$,j),b=!0},this.itemEnd=function(tt){$++,d.onProgress!==void 0&&d.onProgress(tt,$,j),$===j&&(b=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(tt){d.onError!==void 0&&d.onError(tt)},this.resolveURL=function(tt){return _e?_e(tt):tt},this.setURLModifier=function(tt){return _e=tt,this},this.addHandler=function(tt,rt){return et.push(tt,rt),this},this.removeHandler=function(tt){const rt=et.indexOf(tt);return rt!==-1&&et.splice(rt,2),this},this.getHandler=function(tt){for(let rt=0,nt=et.length;rt<nt;rt+=2){const it=et[rt],at=et[rt+1];if(it.global&&(it.lastIndex=0),it.test(tt))return at}return null}}}const DefaultLoadingManager=new LoadingManager;let Loader$1=class{constructor(a){this.manager=a!==void 0?a:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,o){const c=this;return new Promise(function(d,b){c.load(a,d,o,b)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}};function createElementNS(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}const _cache={};function warnOnce(s){s in _cache||(_cache[s]=!0,console.warn(s))}class ImageLoader extends Loader$1{constructor(a){super(a)}load(a,o,c,d){this.path!==void 0&&(a=this.path+a),a=this.manager.resolveURL(a);const b=this,$=Cache.get(a);if($!==void 0)return b.manager.itemStart(a),setTimeout(function(){o&&o($),b.manager.itemEnd(a)},0),$;const j=createElementNS("img");function _e(){tt(),Cache.add(a,this),o&&o(this),b.manager.itemEnd(a)}function et(rt){tt(),d&&d(rt),b.manager.itemError(a),b.manager.itemEnd(a)}function tt(){j.removeEventListener("load",_e,!1),j.removeEventListener("error",et,!1)}return j.addEventListener("load",_e,!1),j.addEventListener("error",et,!1),a.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(j.crossOrigin=this.crossOrigin),b.manager.itemStart(a),j.src=a,j}}class EventDispatcher{addEventListener(a,o){this._listeners===void 0&&(this._listeners={});const c=this._listeners;c[a]===void 0&&(c[a]=[]),c[a].indexOf(o)===-1&&c[a].push(o)}hasEventListener(a,o){if(this._listeners===void 0)return!1;const c=this._listeners;return c[a]!==void 0&&c[a].indexOf(o)!==-1}removeEventListener(a,o){if(this._listeners===void 0)return;const d=this._listeners[a];if(d!==void 0){const b=d.indexOf(o);b!==-1&&d.splice(b,1)}}dispatchEvent(a){if(this._listeners===void 0)return;const c=this._listeners[a.type];if(c!==void 0){a.target=this;const d=c.slice(0);for(let b=0,$=d.length;b<$;b++)d[b].call(this,a);a.target=null}}}const UVMapping=300,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,LinearFilter=1006,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,RGBAFormat=1023,LinearEncoding=3e3,sRGBEncoding=3001,NoColorSpace="",SRGBColorSpace="srgb",_lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function generateUUID(){const s=Math.random()*4294967295|0,a=Math.random()*4294967295|0,o=Math.random()*4294967295|0,c=Math.random()*4294967295|0;return(_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]+"-"+_lut[a&255]+_lut[a>>8&255]+"-"+_lut[a>>16&15|64]+_lut[a>>24&255]+"-"+_lut[o&63|128]+_lut[o>>8&255]+"-"+_lut[o>>16&255]+_lut[o>>24&255]+_lut[c&255]+_lut[c>>8&255]+_lut[c>>16&255]+_lut[c>>24&255]).toLowerCase()}function clamp$1(s,a,o){return Math.max(a,Math.min(o,s))}class Vector2{constructor(a=0,o=0){Vector2.prototype.isVector2=!0,this.x=a,this.y=o}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,o){return this.x=a,this.y=o,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a){return this.x+=a.x,this.y+=a.y,this}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this}sub(a){return this.x-=a.x,this.y-=a.y,this}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const o=this.x,c=this.y,d=a.elements;return this.x=d[0]*o+d[3]*c+d[6],this.y=d[1]*o+d[4]*c+d[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(a){const o=Math.sqrt(this.lengthSq()*a.lengthSq());if(o===0)return Math.PI/2;const c=this.dot(a)/o;return Math.acos(clamp$1(c,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y;return o*o+c*c}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a}fromBufferAttribute(a,o){return this.x=a.getX(o),this.y=a.getY(o),this}rotateAround(a,o){const c=Math.cos(o),d=Math.sin(o),b=this.x-a.x,$=this.y-a.y;return this.x=b*c-$*d+a.x,this.y=b*d+$*c+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(a,o,c,d,b,$,j,_e,et){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],a!==void 0&&this.set(a,o,c,d,b,$,j,_e,et)}set(a,o,c,d,b,$,j,_e,et){const tt=this.elements;return tt[0]=a,tt[1]=d,tt[2]=j,tt[3]=o,tt[4]=b,tt[5]=_e,tt[6]=c,tt[7]=$,tt[8]=et,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this}extractBasis(a,o,c){return a.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const o=a.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,d=o.elements,b=this.elements,$=c[0],j=c[3],_e=c[6],et=c[1],tt=c[4],rt=c[7],nt=c[2],it=c[5],at=c[8],ct=d[0],st=d[3],ot=d[6],ht=d[1],dt=d[4],ft=d[7],mt=d[2],gt=d[5],vt=d[8];return b[0]=$*ct+j*ht+_e*mt,b[3]=$*st+j*dt+_e*gt,b[6]=$*ot+j*ft+_e*vt,b[1]=et*ct+tt*ht+rt*mt,b[4]=et*st+tt*dt+rt*gt,b[7]=et*ot+tt*ft+rt*vt,b[2]=nt*ct+it*ht+at*mt,b[5]=nt*st+it*dt+at*gt,b[8]=nt*ot+it*ft+at*vt,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[3]*=a,o[6]*=a,o[1]*=a,o[4]*=a,o[7]*=a,o[2]*=a,o[5]*=a,o[8]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[1],d=a[2],b=a[3],$=a[4],j=a[5],_e=a[6],et=a[7],tt=a[8];return o*$*tt-o*j*et-c*b*tt+c*j*_e+d*b*et-d*$*_e}invert(){const a=this.elements,o=a[0],c=a[1],d=a[2],b=a[3],$=a[4],j=a[5],_e=a[6],et=a[7],tt=a[8],rt=tt*$-j*et,nt=j*_e-tt*b,it=et*b-$*_e,at=o*rt+c*nt+d*it;if(at===0)return this.set(0,0,0,0,0,0,0,0,0);const ct=1/at;return a[0]=rt*ct,a[1]=(d*et-tt*c)*ct,a[2]=(j*c-d*$)*ct,a[3]=nt*ct,a[4]=(tt*o-d*_e)*ct,a[5]=(d*b-j*o)*ct,a[6]=it*ct,a[7]=(c*_e-et*o)*ct,a[8]=($*o-c*b)*ct,this}transpose(){let a;const o=this.elements;return a=o[1],o[1]=o[3],o[3]=a,a=o[2],o[2]=o[6],o[6]=a,a=o[5],o[5]=o[7],o[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const o=this.elements;return a[0]=o[0],a[1]=o[3],a[2]=o[6],a[3]=o[1],a[4]=o[4],a[5]=o[7],a[6]=o[2],a[7]=o[5],a[8]=o[8],this}setUvTransform(a,o,c,d,b,$,j){const _e=Math.cos(b),et=Math.sin(b);return this.set(c*_e,c*et,-c*(_e*$+et*j)+$+a,-d*et,d*_e,-d*(-et*$+_e*j)+j+o,0,0,1),this}scale(a,o){return this.premultiply(_m3.makeScale(a,o)),this}rotate(a){return this.premultiply(_m3.makeRotation(-a)),this}translate(a,o){return this.premultiply(_m3.makeTranslation(a,o)),this}makeTranslation(a,o){return a.isVector2?this.set(1,0,a.x,0,1,a.y,0,0,1):this.set(1,0,a,0,1,o,0,0,1),this}makeRotation(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,-c,0,c,o,0,0,0,1),this}makeScale(a,o){return this.set(a,0,0,0,o,0,0,0,1),this}equals(a){const o=this.elements,c=a.elements;for(let d=0;d<9;d++)if(o[d]!==c[d])return!1;return!0}fromArray(a,o=0){for(let c=0;c<9;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function SRGBToLinear(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}let _canvas;class ImageUtils{static getDataURL(a){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement>"u")return a.src;let o;if(a instanceof HTMLCanvasElement)o=a;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=a.width,_canvas.height=a.height;const c=_canvas.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height),o=_canvas}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(a){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const o=createElementNS("canvas");o.width=a.width,o.height=a.height;const c=o.getContext("2d");c.drawImage(a,0,0,a.width,a.height);const d=c.getImageData(0,0,a.width,a.height),b=d.data;for(let $=0;$<b.length;$++)b[$]=SRGBToLinear(b[$]/255)*255;return c.putImageData(d,0,0),o}else if(a.data){const o=a.data.slice(0);for(let c=0;c<o.length;c++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[c]=Math.floor(SRGBToLinear(o[c]/255)*255):o[c]=SRGBToLinear(o[c]);return{data:o,width:a.width,height:a.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}let sourceId=0;class Source{constructor(a=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sourceId++}),this.uuid=generateUUID(),this.data=a,this.version=0}set needsUpdate(a){a===!0&&this.version++}toJSON(a){const o=a===void 0||typeof a=="string";if(!o&&a.images[this.uuid]!==void 0)return a.images[this.uuid];const c={uuid:this.uuid,url:""},d=this.data;if(d!==null){let b;if(Array.isArray(d)){b=[];for(let $=0,j=d.length;$<j;$++)d[$].isDataTexture?b.push(serializeImage(d[$].image)):b.push(serializeImage(d[$]))}else b=serializeImage(d);c.url=b}return o||(a.images[this.uuid]=c),c}}function serializeImage(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?ImageUtils.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(a=Texture.DEFAULT_IMAGE,o=Texture.DEFAULT_MAPPING,c=ClampToEdgeWrapping,d=ClampToEdgeWrapping,b=LinearFilter,$=LinearMipmapLinearFilter,j=RGBAFormat,_e=UnsignedByteType,et=Texture.DEFAULT_ANISOTROPY,tt=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(a),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=c,this.wrapT=d,this.magFilter=b,this.minFilter=$,this.anisotropy=et,this.format=j,this.internalFormat=null,this.type=_e,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof tt=="string"?this.colorSpace=tt:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=tt===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(a=null){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(a){return this.name=a.name,this.source=a.source,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.channel=a.channel,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.colorSpace=a.colorSpace,this.userData=JSON.parse(JSON.stringify(a.userData)),this.needsUpdate=!0,this}toJSON(a){const o=a===void 0||typeof a=="string";if(!o&&a.textures[this.uuid]!==void 0)return a.textures[this.uuid];const c={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(c.userData=this.userData),o||(a.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(this.mapping!==UVMapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case RepeatWrapping:a.x=a.x-Math.floor(a.x);break;case ClampToEdgeWrapping:a.x=a.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(a.x)%2)===1?a.x=Math.ceil(a.x)-a.x:a.x=a.x-Math.floor(a.x);break}if(a.y<0||a.y>1)switch(this.wrapT){case RepeatWrapping:a.y=a.y-Math.floor(a.y);break;case ClampToEdgeWrapping:a.y=a.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(a.y)%2)===1?a.y=Math.ceil(a.y)-a.y:a.y=a.y-Math.floor(a.y);break}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){a===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(a){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=a===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class TextureLoader extends Loader$1{constructor(a){super(a)}load(a,o,c,d){const b=new Texture,$=new ImageLoader(this.manager);return $.setCrossOrigin(this.crossOrigin),$.setPath(this.path),$.load(a,function(j){b.image=j,b.needsUpdate=!0,o!==void 0&&o(b)},c,d),b}}function Footer(){return jsxs("footer",{className:"pb-3 font-sans text-xs ",children:[jsxs("p",{className:"mx-auto w-full flex justify-center",children:["Copyright 2023 Tiff, Jacob, Lari, Nathalia, Paul, and Kira."," "]}),jsx("p",{className:"mx-auto w-full flex justify-center",children:"The 3d model is created by Cresis from Sketchfab.com."}),jsxs("p",{className:"mx-auto w-full flex justify-center",children:["Nav icon is created by Triberion from"," ",jsx("a",{href:"https://www.flaticon.com/free-icons/donut",title:"donut icons",children:"Flaticon"})]})]})}var LogType;(function(s){s.DEBUG="DEBUG",s.ERROR="ERROR",s.INFO="INFO",s.WARN="WARN",s.VERBOSE="VERBOSE"})(LogType||(LogType={}));const AWS_CLOUDWATCH_CATEGORY="Logging",USER_AGENT_HEADER="x-amz-user-agent",NO_HUBCALLBACK_PROVIDED_EXCEPTION="NoHubcallbackProvidedException",LOG_LEVELS={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};class ConsoleLogger{constructor(a,o=LogType.WARN){this.name=a,this.level=o,this._pluggables=[]}_padding(a){return a<10?"0"+a:""+a}_ts(){const a=new Date;return[this._padding(a.getMinutes()),this._padding(a.getSeconds())].join(":")+"."+a.getMilliseconds()}configure(a){return a?(this._config=a,this._config):this._config}_log(a,...o){let c=this.level;ConsoleLogger.LOG_LEVEL&&(c=ConsoleLogger.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(c=window.LOG_LEVEL);const d=LOG_LEVELS[c];if(!(LOG_LEVELS[a]>=d))return;let $=console.log.bind(console);a===LogType.ERROR&&console.error&&($=console.error.bind(console)),a===LogType.WARN&&console.warn&&($=console.warn.bind(console));const j=`[${a}] ${this._ts()} ${this.name}`;let _e="";if(o.length===1&&typeof o[0]=="string")_e=`${j} - ${o[0]}`,$(_e);else if(o.length===1)_e=`${j} ${o[0]}`,$(j,o[0]);else if(typeof o[0]=="string"){let et=o.slice(1);et.length===1&&(et=et[0]),_e=`${j} - ${o[0]} ${et}`,$(`${j} - ${o[0]}`,et)}else _e=`${j} ${o}`,$(j,o);for(const et of this._pluggables){const tt={message:_e,timestamp:Date.now()};et.pushLogs([tt])}}log(...a){this._log(LogType.INFO,...a)}info(...a){this._log(LogType.INFO,...a)}warn(...a){this._log(LogType.WARN,...a)}error(...a){this._log(LogType.ERROR,...a)}debug(...a){this._log(LogType.DEBUG,...a)}verbose(...a){this._log(LogType.VERBOSE,...a)}addPluggable(a){a&&a.getCategoryName()===AWS_CLOUDWATCH_CATEGORY&&(this._pluggables.push(a),a.configure(this._config))}listPluggables(){return this._pluggables}}ConsoleLogger.LOG_LEVEL=null;class AmplifyError extends Error{constructor({message:a,name:o,recoverySuggestion:c,underlyingError:d}){super(a),this.name=o,this.underlyingError=d,this.recoverySuggestion=c,this.constructor=AmplifyError,Object.setPrototypeOf(this,AmplifyError.prototype)}}var AmplifyErrorCode;(function(s){s.NoEndpointId="NoEndpointId",s.PlatformNotSupported="PlatformNotSupported",s.Unknown="Unknown"})(AmplifyErrorCode||(AmplifyErrorCode={}));const createAssertionFunction=(s,a=AmplifyError)=>(o,c,d)=>{const{message:b,recoverySuggestion:$}=s[c];if(!o)throw new a({name:c,message:d?`${b} ${d}`:b,recoverySuggestion:$})},AMPLIFY_SYMBOL=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",logger$8=new ConsoleLogger("Hub");class HubClass{constructor(a){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=a}_remove(a,o){const c=this.listeners.get(a);if(!c){logger$8.warn(`No listeners for ${a}`);return}this.listeners.set(a,[...c.filter(({callback:d})=>d!==o)])}dispatch(a,o,c,d){typeof a=="string"&&this.protectedChannels.indexOf(a)>-1&&(d===AMPLIFY_SYMBOL||logger$8.warn(`WARNING: ${a} is protected and dispatching on it can have unintended consequences`));const b={channel:a,payload:{...o},source:c,patternInfo:[]};try{this._toListeners(b)}catch($){logger$8.error($)}}listen(a,o,c="noname"){let d;if(typeof o!="function")throw new AmplifyError({name:NO_HUBCALLBACK_PROVIDED_EXCEPTION,message:"No callback supplied to Hub"});d=o;let b=this.listeners.get(a);return b||(b=[],this.listeners.set(a,b)),b.push({name:c,callback:d}),()=>{this._remove(a,d)}}_toListeners(a){const{channel:o,payload:c}=a,d=this.listeners.get(o);d&&d.forEach(b=>{logger$8.debug(`Dispatching to ${o} with `,c);try{b.callback(a)}catch($){logger$8.error($)}})}}const Hub=new HubClass("__default__"),HubInternal=new HubClass("internal-hub");var AuthConfigurationErrorCode;(function(s){s.AuthTokenConfigException="AuthTokenConfigException",s.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",s.AuthUserPoolException="AuthUserPoolException",s.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",s.OAuthNotConfigureException="OAuthNotConfigureException"})(AuthConfigurationErrorCode||(AuthConfigurationErrorCode={}));const authConfigurationErrorMap={[AuthConfigurationErrorCode.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[AuthConfigurationErrorCode.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[AuthConfigurationErrorCode.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[AuthConfigurationErrorCode.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[AuthConfigurationErrorCode.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},assert$2=createAssertionFunction(authConfigurationErrorMap),getCrypto=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new AmplifyError({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},getBtoa=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new AmplifyError({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},getAtob=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new AmplifyError({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},base64Decoder={convert(s){return getAtob()(s)}};function assertTokenProviderConfig(s){let a=!0;return s?a=!!s.userPoolId&&!!s.userPoolClientId:a=!1,assert$2(a,AuthConfigurationErrorCode.AuthUserPoolException)}function assertOAuthConfig(s){var o,c,d,b,$,j,_e,et;const a=!!((c=(o=s==null?void 0:s.loginWith)==null?void 0:o.oauth)!=null&&c.domain)&&!!((b=(d=s==null?void 0:s.loginWith)==null?void 0:d.oauth)!=null&&b.redirectSignOut)&&!!((j=($=s==null?void 0:s.loginWith)==null?void 0:$.oauth)!=null&&j.redirectSignIn)&&!!((et=(_e=s==null?void 0:s.loginWith)==null?void 0:_e.oauth)!=null&&et.responseType);return assert$2(a,AuthConfigurationErrorCode.OAuthNotConfigureException)}function assertIdentityPoolIdConfig(s){const a=!!(s!=null&&s.identityPoolId);return assert$2(a,AuthConfigurationErrorCode.InvalidIdentityPoolIdException)}function decodeJWT(s){const a=s.split(".");if(a.length!==3)throw new Error("Invalid token");try{const c=a[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(base64Decoder.convert(c).split("").map($=>`%${`00${$.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),b=JSON.parse(d);return{toString:()=>s,payload:b}}catch{throw new Error("Invalid token payload")}}function isTokenExpired({expiresAt:s,clockDrift:a}){return Date.now()+a>s}class AuthClass{constructor(){}configure(a,o){this.authConfig=a,this.authOptions=o}async fetchAuthSession(a={}){var b,$,j,_e,et,tt;let o,c,d;return o=await this.getTokens(a),o?(d=($=(b=o.accessToken)==null?void 0:b.payload)==null?void 0:$.sub,c=await((_e=(j=this.authOptions)==null?void 0:j.credentialsProvider)==null?void 0:_e.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:o,authenticated:!0,forceRefresh:a.forceRefresh}))):c=await((tt=(et=this.authOptions)==null?void 0:et.credentialsProvider)==null?void 0:tt.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:a.forceRefresh})),{tokens:o,credentials:c==null?void 0:c.credentials,identityId:c==null?void 0:c.identityId,userSub:d}}async clearCredentials(){var a;if((a=this.authOptions)!=null&&a.credentialsProvider)return await this.authOptions.credentialsProvider.clearCredentialsAndIdentityId()}async getTokens(a){var o,c;return await((c=(o=this.authOptions)==null?void 0:o.tokenProvider)==null?void 0:c.getTokens(a))??void 0}}const logger$7=new ConsoleLogger("parseAWSExports"),authTypeMapping={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",LAMBDA:"lambda"},parseAWSExports=(s={})=>{var or,er,sr,Ar,Er,Tr;const{aws_appsync_apiKey:a,aws_appsync_authenticationType:o,aws_appsync_graphqlEndpoint:c,aws_appsync_region:d,aws_bots:b,aws_bots_config:$,aws_cognito_identity_pool_id:j,aws_cognito_sign_up_verification_method:_e,aws_cognito_mfa_configuration:et,aws_cognito_mfa_types:tt,aws_cognito_password_protection_settings:rt,aws_cognito_verification_mechanisms:nt,aws_cognito_signup_attributes:it,aws_cognito_social_providers:at,aws_cognito_username_attributes:ct,aws_mandatory_sign_in:st,aws_mobile_analytics_app_id:ot,aws_mobile_analytics_app_region:ht,aws_user_files_s3_bucket:dt,aws_user_files_s3_bucket_region:ft,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:mt,aws_user_pools_id:gt,aws_user_pools_web_client_id:vt,geo:yt,oauth:Et,predictions:St,aws_cloud_logic_custom:Ct,Notifications:wt,modelIntrospection:_t}=s,Tt={};ot&&(Tt.Analytics={Pinpoint:{appId:ot,region:ht}});const{InAppMessaging:Mt,Push:Bt}=wt??{};if(Mt!=null&&Mt.AWSPinpoint||Bt!=null&&Bt.AWSPinpoint){if(Mt!=null&&Mt.AWSPinpoint){const{appId:ur,region:kt}=Mt.AWSPinpoint;Tt.Notifications={InAppMessaging:{Pinpoint:{appId:ur,region:kt}}}}if(Bt!=null&&Bt.AWSPinpoint){const{appId:ur,region:kt}=Bt.AWSPinpoint;Tt.Notifications={PushNotification:{Pinpoint:{appId:ur,region:kt}}}}}if(Array.isArray($)&&(Tt.Interactions={LexV1:Object.fromEntries($.map(ur=>[ur.name,ur]))}),c){const ur=authTypeMapping[o];ur||logger$7.debug(`Invalid authentication type ${o}. Falling back to IAM.`),Tt.API={GraphQL:{endpoint:c,apiKey:a,region:d,defaultAuthMode:ur??"iam"}},_t&&(Tt.API.GraphQL.modelIntrospection=_t)}const Rt=et?{status:et&&et.toLowerCase(),totpEnabled:(tt==null?void 0:tt.includes("TOTP"))??!1,smsEnabled:(tt==null?void 0:tt.includes("SMS"))??!1}:void 0,bt=rt?{minLength:rt.passwordPolicyMinLength,requireLowercase:((or=rt.passwordPolicyCharacters)==null?void 0:or.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((er=rt.passwordPolicyCharacters)==null?void 0:er.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((sr=rt.passwordPolicyCharacters)==null?void 0:sr.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((Ar=rt.passwordPolicyCharacters)==null?void 0:Ar.includes("REQUIRES_SYMBOLS"))??!1}:void 0,Dt=Array.from(new Set([...nt??[],...it??[]])).map(ur=>({[ur.toLowerCase()]:{required:!0}})),$t=(ct==null?void 0:ct.includes("EMAIL"))??!1,Lt=(ct==null?void 0:ct.includes("PHONE_NUMBER"))??!1;(j||gt)&&(Tt.Auth={Cognito:{identityPoolId:j,allowGuestAccess:st!=="enable",signUpVerificationMethod:_e,userAttributes:Dt,userPoolClientId:vt,userPoolId:gt,mfa:Rt,passwordFormat:bt,loginWith:{username:!($t||Lt),email:$t,phone:Lt}}});const Jt=Et?Object.keys(Et).length>0:!1,Qt=at?at.length>0:!1;if(Tt.Auth&&Jt&&(Tt.Auth.Cognito.loginWith={...Tt.Auth.Cognito.loginWith,oauth:{...getOAuthConfig(Et),...Qt&&{providers:parseSocialProviders(at)}}}),dt&&(Tt.Storage={S3:{bucket:dt,region:ft,dangerouslyConnectToHttpEndpointForTesting:mt}}),yt){const{amazon_location_service:ur}=yt;Tt.Geo=ur?{LocationService:{...ur,searchIndices:ur.search_indices,region:ur.region}}:{...yt}}if(Ct&&(Tt.API={...Tt.API,REST:Ct.reduce((ur,kt)=>{const{name:Xt,endpoint:ar,region:yr,service:mr}=kt;return{...ur,[Xt]:{endpoint:ar,...mr?{service:mr}:void 0,...yr?{region:yr}:void 0}}},{})}),St){const{VoiceId:ur}=((Tr=(Er=St==null?void 0:St.convert)==null?void 0:Er.speechGenerator)==null?void 0:Tr.defaults)??{};Tt.Predictions=ur?{...St,convert:{...St.convert,speechGenerator:{...St.convert.speechGenerator,defaults:{voiceId:ur}}}}:St}return Tt},getRedirectUrl$1=s=>(s==null?void 0:s.split(","))??[],getOAuthConfig=({domain:s,scope:a,redirectSignIn:o,redirectSignOut:c,responseType:d})=>({domain:s,scopes:a,redirectSignIn:getRedirectUrl$1(o),redirectSignOut:getRedirectUrl$1(c),responseType:d}),parseSocialProviders=s=>s.map(a=>{const o=a.toLowerCase();return o.charAt(0).toUpperCase()+o.slice(1)}),deepFreeze=s=>{const a=Reflect.ownKeys(s);for(const o of a){const c=s[o];(c&&typeof c=="object"||typeof c=="function")&&deepFreeze(c)}return Object.freeze(s)};class AmplifyClass{constructor(){this.resourcesConfig={},this.libraryOptions={},this.Auth=new AuthClass}configure(a,o){let c;Object.keys(a).some(d=>d.startsWith("aws_"))?c=parseAWSExports(a):c=a,this.resourcesConfig=c,o&&(this.libraryOptions=o),this.resourcesConfig=deepFreeze(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),Hub.dispatch("core",{event:"configure",data:a},"Configure",AMPLIFY_SYMBOL)}getConfig(){return this.resourcesConfig}}const Amplify=new AmplifyClass,fetchAuthSession$1=(s,a)=>s.Auth.fetchAuthSession(a),fetchAuthSession=s=>fetchAuthSession$1(Amplify,s);function clearCredentials(){return Amplify.Auth.clearCredentials()}const defaultPartition={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},partitionsInfo={partitions:[defaultPartition,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},getDnsSuffix=s=>{const{partitions:a}=partitionsInfo;for(const{regions:o,outputs:c,regionRegex:d}of a){const b=new RegExp(d);if(o.includes(s)||b.test(s))return c.dnsSuffix}return defaultPartition.outputs.dnsSuffix},DEFAULT_RETRY_ATTEMPTS=3,retryMiddleware=({maxAttempts:s=DEFAULT_RETRY_ATTEMPTS,retryDecider:a,computeDelay:o,abortSignal:c})=>{if(s<1)throw new Error("maxAttempts must be greater than 0");return(d,b)=>async function(j){let _e,et=b.attemptsCount??0,tt;const rt=()=>{if(tt)return addOrIncrementMetadataAttempts(tt,et),tt;throw addOrIncrementMetadataAttempts(_e,et),_e};for(;!(c!=null&&c.aborted)&&et<s;){try{tt=await d(j),_e=void 0}catch(nt){_e=nt,tt=void 0}if(et=(b.attemptsCount??0)>et?b.attemptsCount??0:et+1,b.attemptsCount=et,await a(tt,_e)){if(!(c!=null&&c.aborted)&&et<s){const nt=o(et);await cancellableSleep(nt,c)}continue}else return rt()}if(c!=null&&c.aborted)throw new Error("Request aborted.");return rt()}},cancellableSleep=(s,a)=>{if(a!=null&&a.aborted)return Promise.resolve();let o,c;const d=new Promise(b=>{c=b,o=setTimeout(b,s)});return a==null||a.addEventListener("abort",function b($){clearTimeout(o),a==null||a.removeEventListener("abort",b),c()}),d},addOrIncrementMetadataAttempts=(s,a)=>{Object.prototype.toString.call(s)==="[object Object]"&&(s.$metadata={...s.$metadata??{},attempts:a})},userAgentMiddleware=({userAgentHeader:s="x-amz-user-agent",userAgentValue:a=""})=>o=>async function(d){if(a.trim().length===0)return await o(d);{const b=s.toLowerCase();return d.headers[b]=d.headers[b]?`${d.headers[b]} ${a}`:a,await o(d)}},composeTransferHandler=(s,a)=>(o,c)=>{const d={};let b=$=>s($,c);for(let $=a.length-1;$>=0;$--){const j=a[$];b=j(c)(b,d)}return b(o)},withMemoization=s=>{let a;return()=>(a||(a=s()),a)},shouldSendBody=s=>!["HEAD","GET","DELETE"].includes(s.toUpperCase()),fetchTransferHandler=async({url:s,method:a,headers:o,body:c},{abortSignal:d,cache:b,withCrossDomainCredentials:$})=>{var rt;let j;try{j=await fetch(s,{method:a,headers:o,body:shouldSendBody(a)?c:void 0,signal:d,cache:b,credentials:$?"include":"same-origin"})}catch(nt){throw nt instanceof TypeError?new Error("Network error"):nt}const _e={};(rt=j.headers)==null||rt.forEach((nt,it)=>{_e[it.toLowerCase()]=nt});const et={statusCode:j.status,headers:_e,body:null},tt=Object.assign(j.body??{},{text:withMemoization(()=>j.text()),blob:withMemoization(()=>j.blob()),json:withMemoization(()=>j.json())});return{...et,body:tt}},unauthenticatedHandler=composeTransferHandler(fetchTransferHandler,[userAgentMiddleware,retryMiddleware]),MAX_DELAY_MS=5*60*1e3;function jitteredBackoff$1(s=MAX_DELAY_MS){return c=>{const d=2**c*100+100*Math.random();return d>s?!1:d}}const DEFAULT_MAX_DELAY_MS=5*60*1e3,jitteredBackoff=s=>{const o=jitteredBackoff$1(DEFAULT_MAX_DELAY_MS)(s);return o===!1?DEFAULT_MAX_DELAY_MS:o},CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],isClockSkewError=s=>!!s&&CLOCK_SKEW_ERROR_CODES.includes(s),getRetryDecider=s=>async(a,o)=>{const c=o??await s(a)??void 0,d=c==null?void 0:c.code,b=a==null?void 0:a.statusCode;return isConnectionError(o)||isThrottlingError(b,d)||isClockSkewError(d)||isServerSideError(b,d)},THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],TIMEOUT_ERROR_CODES=["TimeoutError","RequestTimeout","RequestTimeoutException"],isThrottlingError=(s,a)=>s===429||!!a&&THROTTLING_ERROR_CODES.includes(a),isConnectionError=s=>(s==null?void 0:s.name)==="Network error",isServerSideError=(s,a)=>!!s&&[500,502,503,504].includes(s)||!!a&&TIMEOUT_ERROR_CODES.includes(a);var __assign$3=function(){return __assign$3=Object.assign||function(a){for(var o,c=1,d=arguments.length;c<d;c++){o=arguments[c];for(var b in o)Object.prototype.hasOwnProperty.call(o,b)&&(a[b]=o[b])}return a},__assign$3.apply(this,arguments)};function __rest$2(s,a){var o={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.indexOf(c)<0&&(o[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(s);d<c.length;d++)a.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(s,c[d])&&(o[c[d]]=s[c[d]]);return o}function __awaiter$1(s,a,o,c){function d(b){return b instanceof o?b:new o(function($){$(b)})}return new(o||(o=Promise))(function(b,$){function j(tt){try{et(c.next(tt))}catch(rt){$(rt)}}function _e(tt){try{et(c.throw(tt))}catch(rt){$(rt)}}function et(tt){tt.done?b(tt.value):d(tt.value).then(j,_e)}et((c=c.apply(s,a||[])).next())})}function __generator$1(s,a){var o={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},c,d,b,$;return $={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function j(et){return function(tt){return _e([et,tt])}}function _e(et){if(c)throw new TypeError("Generator is already executing.");for(;$&&($=0,et[0]&&(o=0)),o;)try{if(c=1,d&&(b=et[0]&2?d.return:et[0]?d.throw||((b=d.return)&&b.call(d),0):d.next)&&!(b=b.call(d,et[1])).done)return b;switch(d=0,b&&(et=[et[0]&2,b.value]),et[0]){case 0:case 1:b=et;break;case 4:return o.label++,{value:et[1],done:!1};case 5:o.label++,d=et[1],et=[0];continue;case 7:et=o.ops.pop(),o.trys.pop();continue;default:if(b=o.trys,!(b=b.length>0&&b[b.length-1])&&(et[0]===6||et[0]===2)){o=0;continue}if(et[0]===3&&(!b||et[1]>b[0]&&et[1]<b[3])){o.label=et[1];break}if(et[0]===6&&o.label<b[1]){o.label=b[1],b=et;break}if(b&&o.label<b[2]){o.label=b[2],o.ops.push(et);break}b[2]&&o.ops.pop(),o.trys.pop();continue}et=a.call(s,o)}catch(tt){et=[6,tt],d=0}finally{c=b=0}if(et[0]&5)throw et[1];return{value:et[0]?et[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;var BLOCK_SIZE=64,DIGEST_LENGTH=32,KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],MAX_HASHABLE_LENGTH=Math.pow(2,53)-1,RawSha256=function(){function s(){this.state=Int32Array.from(INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s.prototype.update=function(a){if(this.finished)throw new Error("Attempted to update an already finished hash.");var o=0,c=a.byteLength;if(this.bytesHashed+=c,this.bytesHashed*8>MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=a[o++],c--,this.bufferLength===BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},s.prototype.digest=function(){if(!this.finished){var a=this.bytesHashed*8,o=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),c=this.bufferLength;if(o.setUint8(this.bufferLength++,128),c%BLOCK_SIZE>=BLOCK_SIZE-8){for(var d=this.bufferLength;d<BLOCK_SIZE;d++)o.setUint8(d,0);this.hashBuffer(),this.bufferLength=0}for(var d=this.bufferLength;d<BLOCK_SIZE-8;d++)o.setUint8(d,0);o.setUint32(BLOCK_SIZE-8,Math.floor(a/4294967296),!0),o.setUint32(BLOCK_SIZE-4,a),this.hashBuffer(),this.finished=!0}for(var b=new Uint8Array(DIGEST_LENGTH),d=0;d<8;d++)b[d*4]=this.state[d]>>>24&255,b[d*4+1]=this.state[d]>>>16&255,b[d*4+2]=this.state[d]>>>8&255,b[d*4+3]=this.state[d]>>>0&255;return b},s.prototype.hashBuffer=function(){for(var a=this,o=a.buffer,c=a.state,d=c[0],b=c[1],$=c[2],j=c[3],_e=c[4],et=c[5],tt=c[6],rt=c[7],nt=0;nt<BLOCK_SIZE;nt++){if(nt<16)this.temp[nt]=(o[nt*4]&255)<<24|(o[nt*4+1]&255)<<16|(o[nt*4+2]&255)<<8|o[nt*4+3]&255;else{var it=this.temp[nt-2],at=(it>>>17|it<<15)^(it>>>19|it<<13)^it>>>10;it=this.temp[nt-15];var ct=(it>>>7|it<<25)^(it>>>18|it<<14)^it>>>3;this.temp[nt]=(at+this.temp[nt-7]|0)+(ct+this.temp[nt-16]|0)}var st=(((_e>>>6|_e<<26)^(_e>>>11|_e<<21)^(_e>>>25|_e<<7))+(_e&et^~_e&tt)|0)+(rt+(KEY[nt]+this.temp[nt]|0)|0)|0,ot=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&b^d&$^b&$)|0;rt=tt,tt=et,et=_e,_e=j+st|0,j=$,$=b,b=d,d=st+ot|0}c[0]+=d,c[1]+=b,c[2]+=$,c[3]+=j,c[4]+=_e,c[5]+=et,c[6]+=tt,c[7]+=rt},s}();const fromUtf8$1=s=>new TextEncoder().encode(s);var fromUtf8=typeof Buffer<"u"&&Buffer.from?function(s){return Buffer.from(s,"utf8")}:fromUtf8$1;function convertToBuffer(s){return s instanceof Uint8Array?s:typeof s=="string"?fromUtf8(s):ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(s)}function isEmptyData(s){return typeof s=="string"?s.length===0:s.byteLength===0}var Sha256=function(){function s(a){this.secret=a,this.hash=new RawSha256,this.reset()}return s.prototype.update=function(a){if(!(isEmptyData(a)||this.error))try{this.hash.update(convertToBuffer(a))}catch(o){this.error=o}},s.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},s.prototype.digest=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(a){return[2,this.digestSync()]})})},s.prototype.reset=function(){if(this.hash=new RawSha256,this.secret){this.outer=new RawSha256;var a=bufferFromSecret(this.secret),o=new Uint8Array(BLOCK_SIZE);o.set(a);for(var c=0;c<BLOCK_SIZE;c++)a[c]^=54,o[c]^=92;this.hash.update(a),this.outer.update(o);for(var c=0;c<a.byteLength;c++)a[c]=0}},s}();function bufferFromSecret(s){var a=convertToBuffer(s);if(a.byteLength>BLOCK_SIZE){var o=new RawSha256;o.update(a),a=o.digest()}var c=new Uint8Array(BLOCK_SIZE);return c.set(a),c}for(let s=0;s<256;s++){let a=s.toString(16).toLowerCase();a.length===1&&(a=`0${a}`)}const AmplifyUrl=URL,parseMetadata=s=>{const{headers:a,statusCode:o}=s;return{...isMetadataBearer(s)?s.$metadata:{},httpStatusCode:o,requestId:a["x-amzn-requestid"]??a["x-amzn-request-id"]??a["x-amz-request-id"],extendedRequestId:a["x-amz-id-2"],cfId:a["x-amz-cf-id"]}},isMetadataBearer=s=>typeof(s==null?void 0:s.$metadata)=="object",parseJsonError=async s=>{if(!s||s.statusCode<300)return;const a=await parseJsonBody(s),c=($=>{const[j]=$.toString().split(/[\,\:]+/);return j.includes("#")?j.split("#")[1]:j})(s.headers["x-amzn-errortype"]??a.code??a.__type??"UnknownError"),d=a.message??a.Message??"Unknown error",b=new Error(d);return Object.assign(b,{name:c,$metadata:parseMetadata(s)})},parseJsonBody=async s=>{if(!s.body)throw new Error("Missing response payload");const a=await s.body.json();return Object.assign(a,{$metadata:parseMetadata(s)})};var Framework;(function(s){s.WebUnknown="0",s.React="1",s.NextJs="2",s.Angular="3",s.VueJs="4",s.Nuxt="5",s.Svelte="6",s.ServerSideUnknown="100",s.ReactSSR="101",s.NextJsSSR="102",s.AngularSSR="103",s.VueJsSSR="104",s.NuxtSSR="105",s.SvelteSSR="106",s.ReactNative="201",s.Expo="202"})(Framework||(Framework={}));var Category;(function(s){s.API="api",s.Auth="auth",s.Analytics="analytics",s.DataStore="datastore",s.Geo="geo",s.InAppMessaging="inappmessaging",s.Interactions="interactions",s.Predictions="predictions",s.PubSub="pubsub",s.PushNotification="pushnotification",s.Storage="storage"})(Category||(Category={}));var AnalyticsAction;(function(s){s.Record="1",s.IdentifyUser="2"})(AnalyticsAction||(AnalyticsAction={}));var ApiAction;(function(s){s.GraphQl="1",s.Get="2",s.Post="3",s.Put="4",s.Patch="5",s.Del="6",s.Head="7"})(ApiAction||(ApiAction={}));var AuthAction;(function(s){s.SignUp="1",s.ConfirmSignUp="2",s.ResendSignUpCode="3",s.SignIn="4",s.FetchMFAPreference="6",s.UpdateMFAPreference="7",s.SetUpTOTP="10",s.VerifyTOTPSetup="11",s.ConfirmSignIn="12",s.DeleteUserAttributes="15",s.DeleteUser="16",s.UpdateUserAttributes="17",s.FetchUserAttributes="18",s.ConfirmUserAttribute="22",s.SignOut="26",s.UpdatePassword="27",s.ResetPassword="28",s.ConfirmResetPassword="29",s.FederatedSignIn="30",s.RememberDevice="32",s.ForgetDevice="33",s.FetchDevices="34",s.SendUserAttributeVerificationCode="35",s.SignInWithRedirect="36"})(AuthAction||(AuthAction={}));var DataStoreAction;(function(s){s.Subscribe="1",s.GraphQl="2"})(DataStoreAction||(DataStoreAction={}));var GeoAction;(function(s){s.SearchByText="0",s.SearchByCoordinates="1",s.SearchForSuggestions="2",s.SearchByPlaceId="3",s.SaveGeofences="4",s.GetGeofence="5",s.ListGeofences="6",s.DeleteGeofences="7"})(GeoAction||(GeoAction={}));var InAppMessagingAction;(function(s){s.SyncMessages="1",s.IdentifyUser="2",s.NotifyMessageInteraction="3"})(InAppMessagingAction||(InAppMessagingAction={}));var InteractionsAction;(function(s){s.None="0"})(InteractionsAction||(InteractionsAction={}));var PredictionsAction;(function(s){s.Convert="1",s.Identify="2",s.Interpret="3"})(PredictionsAction||(PredictionsAction={}));var PubSubAction;(function(s){s.Subscribe="1"})(PubSubAction||(PubSubAction={}));var PushNotificationAction;(function(s){s.InitializePushNotifications="1",s.IdentifyUser="2"})(PushNotificationAction||(PushNotificationAction={}));var StorageAction;(function(s){s.UploadData="1",s.DownloadData="2",s.List="3",s.Copy="4",s.Remove="5",s.GetProperties="6",s.GetUrl="7"})(StorageAction||(StorageAction={}));const version$1="6.0.5",globalExists=()=>typeof global<"u",windowExists=()=>typeof window<"u",documentExists=()=>typeof document<"u",processExists=()=>typeof process<"u",keyPrefixMatch=(s,a)=>!!Object.keys(s).find(o=>o.startsWith(a));function reactWebDetect(){const s=c=>c.startsWith("_react")||c.startsWith("__react"),a=c=>Object.keys(c).find(s),o=()=>Array.from(document.querySelectorAll("[id]"));return documentExists()&&o().some(a)}function reactSSRDetect(){return processExists()&&typeof process.env<"u"&&!!Object.keys(process.env).find(s=>s.includes("react"))}function vueWebDetect(){return windowExists()&&keyPrefixMatch(window,"__VUE")}function vueSSRDetect(){return globalExists()&&keyPrefixMatch(global,"__VUE")}function svelteWebDetect(){return windowExists()&&keyPrefixMatch(window,"__SVELTE")}function svelteSSRDetect(){return processExists()&&typeof process.env<"u"&&!!Object.keys(process.env).find(s=>s.includes("svelte"))}function nextWebDetect(){return windowExists()&&window.next&&typeof window.next=="object"}function nextSSRDetect(){return globalExists()&&(keyPrefixMatch(global,"__next")||keyPrefixMatch(global,"__NEXT"))}function nuxtWebDetect(){return windowExists()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function nuxtSSRDetect(){return globalExists()&&typeof global.__NUXT_PATHS__<"u"}function angularWebDetect(){const s=!!(documentExists()&&document.querySelector("[ng-version]")),a=!!(windowExists()&&typeof window.ng<"u");return s||a}function angularSSRDetect(){var s;return processExists()&&typeof process.env=="object"&&((s=process.env.npm_lifecycle_script)==null?void 0:s.startsWith("ng "))||!1}function reactNativeDetect(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function expoDetect(){return globalExists()&&typeof global.expo<"u"}function webDetect(){return windowExists()}const detectionMap=[{platform:Framework.Expo,detectionMethod:expoDetect},{platform:Framework.ReactNative,detectionMethod:reactNativeDetect},{platform:Framework.NextJs,detectionMethod:nextWebDetect},{platform:Framework.Nuxt,detectionMethod:nuxtWebDetect},{platform:Framework.Angular,detectionMethod:angularWebDetect},{platform:Framework.React,detectionMethod:reactWebDetect},{platform:Framework.VueJs,detectionMethod:vueWebDetect},{platform:Framework.Svelte,detectionMethod:svelteWebDetect},{platform:Framework.WebUnknown,detectionMethod:webDetect},{platform:Framework.NextJsSSR,detectionMethod:nextSSRDetect},{platform:Framework.NuxtSSR,detectionMethod:nuxtSSRDetect},{platform:Framework.ReactSSR,detectionMethod:reactSSRDetect},{platform:Framework.VueJsSSR,detectionMethod:vueSSRDetect},{platform:Framework.AngularSSR,detectionMethod:angularSSRDetect},{platform:Framework.SvelteSSR,detectionMethod:svelteSSRDetect}];function detect(){var s;return((s=detectionMap.find(a=>a.detectionMethod()))==null?void 0:s.platform)||Framework.ServerSideUnknown}let frameworkCache;const frameworkChangeObservers=[];let resetTriggered=!1;const SSR_RESET_TIMEOUT=10,WEB_RESET_TIMEOUT=10,PRIME_FRAMEWORK_DELAY=1e3,detectFramework=()=>{var s;if(!frameworkCache){if(frameworkCache=detect(),resetTriggered)for(;frameworkChangeObservers.length;)(s=frameworkChangeObservers.pop())==null||s();else frameworkChangeObservers.forEach(a=>a());resetTimeout(Framework.ServerSideUnknown,SSR_RESET_TIMEOUT),resetTimeout(Framework.WebUnknown,WEB_RESET_TIMEOUT)}return frameworkCache},observeFrameworkChanges=s=>{resetTriggered||frameworkChangeObservers.push(s)};function clearCache(){frameworkCache=void 0}function resetTimeout(s,a){frameworkCache===s&&!resetTriggered&&setTimeout(()=>{clearCache(),resetTriggered=!0,setTimeout(detectFramework,PRIME_FRAMEWORK_DELAY)},a)}const customUserAgentState={},setCustomUserAgent=s=>{customUserAgentState[s.category]=s.apis.reduce((c,d)=>{var b;return{...c,[d]:{refCount:(b=c[d])!=null&&b.refCount?c[d].refCount+1:1,additionalDetails:s.additionalDetails}}},customUserAgentState[s.category]??{});let a=!1;return()=>{a||(a=!0,s.apis.forEach(c=>{const d=customUserAgentState[s.category][c].refCount;d>1?customUserAgentState[s.category][c].refCount=d-1:(delete customUserAgentState[s.category][c],Object.keys(customUserAgentState[s.category]).length||delete customUserAgentState[s.category])}))}},getCustomUserAgent=(s,a)=>{var o,c;return(c=(o=customUserAgentState[s])==null?void 0:o[a])==null?void 0:c.additionalDetails},BASE_USER_AGENT="aws-amplify",getAmplifyUserAgentObject=({category:s,action:a,framework:o}={})=>{const c=[[BASE_USER_AGENT,version$1]];if(s&&c.push([s,a]),c.push(["framework",detectFramework()]),s&&a){const d=getCustomUserAgent(s,a);d&&d.forEach(b=>{c.push(b)})}return c},getAmplifyUserAgent=s=>getAmplifyUserAgentObject(s).map(([c,d])=>c&&d?`${c}/${d}`:c).join(" "),SERVICE_NAME$1="cognito-identity",endpointResolver$1=({region:s})=>({url:new AmplifyUrl(`https://cognito-identity.${s}.${getDnsSuffix(s)}`)}),disableCacheMiddleware$1=()=>(s,a)=>async function(c){return c.headers["cache-control"]="no-store",s(c)},cognitoIdentityTransferHandler=composeTransferHandler(unauthenticatedHandler,[disableCacheMiddleware$1]),defaultConfig$1={service:SERVICE_NAME$1,endpointResolver:endpointResolver$1,retryDecider:getRetryDecider(parseJsonError),computeDelay:jitteredBackoff,userAgentValue:getAmplifyUserAgent(),cache:"no-store"};observeFrameworkChanges(()=>{defaultConfig$1.userAgentValue=getAmplifyUserAgent()});const getSharedHeaders$1=s=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${s}`}),buildHttpRpcRequest$1=({url:s},a,o)=>({headers:a,url:s,body:o,method:"POST"}),composeServiceApi=(s,a,o,c)=>async(d,b)=>{const $={...c,...d},j=await $.endpointResolver($,b),_e=await a(b,j),et=await s(_e,{...$});return await o(et)},getIdSerializer=(s,a)=>{const o=getSharedHeaders$1("GetId"),c=JSON.stringify(s);return buildHttpRpcRequest$1(a,o,c)},getIdDeserializer=async s=>{if(s.statusCode>=300)throw await parseJsonError(s);return{IdentityId:(await parseJsonBody(s)).IdentityId,$metadata:parseMetadata(s)}},getId=composeServiceApi(cognitoIdentityTransferHandler,getIdSerializer,getIdDeserializer,defaultConfig$1),getCredentialsForIdentitySerializer=(s,a)=>{const o=getSharedHeaders$1("GetCredentialsForIdentity"),c=JSON.stringify(s);return buildHttpRpcRequest$1(a,o,c)},getCredentialsForIdentityDeserializer=async s=>{if(s.statusCode>=300)throw await parseJsonError(s);{const a=await parseJsonBody(s);return{IdentityId:a.IdentityId,Credentials:deserializeCredentials(a.Credentials),$metadata:parseMetadata(s)}}},deserializeCredentials=({AccessKeyId:s,SecretKey:a,SessionToken:o,Expiration:c}={})=>({AccessKeyId:s,SecretKey:a,SessionToken:o,Expiration:c&&new Date(c*1e3)}),getCredentialsForIdentity=composeServiceApi(cognitoIdentityTransferHandler,getCredentialsForIdentitySerializer,getCredentialsForIdentityDeserializer,defaultConfig$1);class PlatformNotSupportedError extends AmplifyError{constructor(){super({name:AmplifyErrorCode.PlatformNotSupported,message:"Function not supported on current platform"})}}class KeyValueStorage{constructor(a){this.storage=a}async setItem(a,o){if(!this.storage)throw new PlatformNotSupportedError;this.storage.setItem(a,o)}async getItem(a){if(!this.storage)throw new PlatformNotSupportedError;return this.storage.getItem(a)}async removeItem(a){if(!this.storage)throw new PlatformNotSupportedError;this.storage.removeItem(a)}async clear(){if(!this.storage)throw new PlatformNotSupportedError;this.storage.clear()}}class InMemoryStorage{constructor(){this.storage=new Map}get length(){return this.storage.size}key(a){return a>this.length-1?null:Array.from(this.storage.keys())[a]}setItem(a,o){this.storage.set(a,o)}getItem(a){return this.storage.get(a)??null}removeItem(a){this.storage.delete(a)}clear(){this.storage.clear()}}const getLocalStorageWithFallback=()=>typeof window<"u"&&window.localStorage?window.localStorage:new InMemoryStorage,getSessionStorageWithFallback=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new InMemoryStorage;class DefaultStorage extends KeyValueStorage{constructor(){super(getLocalStorageWithFallback())}}class SessionStorage extends KeyValueStorage{constructor(){super(getSessionStorageWithFallback())}}/*! js-cookie v3.0.5 | MIT */function assign$5(s){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var c in o)s[c]=o[c]}return s}var defaultConverter={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$1(s,a){function o(d,b,$){if(!(typeof document>"u")){$=assign$5({},a,$),typeof $.expires=="number"&&($.expires=new Date(Date.now()+$.expires*864e5)),$.expires&&($.expires=$.expires.toUTCString()),d=encodeURIComponent(d).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var j="";for(var _e in $)$[_e]&&(j+="; "+_e,$[_e]!==!0&&(j+="="+$[_e].split(";")[0]));return document.cookie=d+"="+s.write(b,d)+j}}function c(d){if(!(typeof document>"u"||arguments.length&&!d)){for(var b=document.cookie?document.cookie.split("; "):[],$={},j=0;j<b.length;j++){var _e=b[j].split("="),et=_e.slice(1).join("=");try{var tt=decodeURIComponent(_e[0]);if($[tt]=s.read(et,tt),d===tt)break}catch{}}return d?$[d]:$}}return Object.create({set:o,get:c,remove:function(d,b){o(d,"",assign$5({},b,{expires:-1}))},withAttributes:function(d){return init$1(this.converter,assign$5({},this.attributes,d))},withConverter:function(d){return init$1(assign$5({},this.converter,d),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(s)}})}var api=init$1(defaultConverter,{path:"/"});class CookieStorage{constructor(a={}){const{path:o,domain:c,expires:d,sameSite:b,secure:$}=a;if(this.domain=c,this.path=o||"/",this.expires=a.hasOwnProperty("expires")?d:365,this.secure=a.hasOwnProperty("secure")?$:!0,a.hasOwnProperty("sameSite")){if(!b||!["strict","lax","none"].includes(b))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(b==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=b}}async setItem(a,o){api.set(a,o,this.getData())}async getItem(a){return api.get(a)??null}async removeItem(a){api.remove(a,this.getData())}async clear(){const a=api.get(),o=Object.keys(a).map(c=>this.removeItem(c));await Promise.all(o)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const defaultStorage=new DefaultStorage;new SessionStorage;const logger$6=new ConsoleLogger("I18n");let I18n$1=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),logger$6.debug(this._lang)}setLanguage(a){this._lang=a}get(a,o=void 0){if(!this._lang)return typeof o<"u"?o:a;const c=this._lang;let d=this.getByLanguage(a,c);return d||(c.indexOf("-")>0&&(d=this.getByLanguage(a,c.split("-")[0])),d)?d:typeof o<"u"?o:a}getByLanguage(a,o,c=null){if(!o)return c;const d=this._dict[o];return d?d[a]:c}putVocabulariesForLanguage(a,o){let c=this._dict[a];c||(c=this._dict[a]={}),this._dict[a]={...c,...o}}putVocabularies(a){Object.keys(a).map(o=>{this.putVocabulariesForLanguage(o,a[o])})}};var I18nErrorCode;(function(s){s.NotConfigured="NotConfigured"})(I18nErrorCode||(I18nErrorCode={}));const i18nErrorMap={[I18nErrorCode.NotConfigured]:{message:"i18n is not configured."}},assert$1=createAssertionFunction(i18nErrorMap),logger$5=new ConsoleLogger("I18n");let _config={language:null},_i18n=null;class I18n{static configure(a){return logger$5.debug("configure I18n"),a&&(_config=Object.assign({},_config,a.I18n||a),I18n.createInstance()),_config}static getModuleName(){return"I18n"}static createInstance(){logger$5.debug("create I18n instance"),!_i18n&&(_i18n=new I18n$1)}static setLanguage(a){return I18n.checkConfig(),assert$1(!!_i18n,I18nErrorCode.NotConfigured),_i18n.setLanguage(a)}static get(a,o){return I18n.checkConfig()?(assert$1(!!_i18n,I18nErrorCode.NotConfigured),_i18n.get(a,o)):typeof o>"u"?a:o}static putVocabulariesForLanguage(a,o){return I18n.checkConfig(),assert$1(!!_i18n,I18nErrorCode.NotConfigured),_i18n.putVocabulariesForLanguage(a,o)}static putVocabularies(a){return I18n.checkConfig(),assert$1(!!_i18n,I18nErrorCode.NotConfigured),_i18n.putVocabularies(a)}static checkConfig(){return _i18n||I18n.createInstance(),!0}}I18n.createInstance();const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u";function cryptoSecureRandomInt(){return getCrypto().getRandomValues(new Uint32Array(1))[0]}function hexStringify(s){const a=s.words,o=s.sigBytes,c=[];for(let d=0;d<o;d++){const b=a[d>>>2]>>>24-d%4*8&255;c.push((b>>>4).toString(16)),c.push((b&15).toString(16))}return c.join("")}class WordArray{constructor(a,o){this.words=[];let c=a;c=this.words=c||[],o!==void 0?this.sigBytes=o:this.sigBytes=c.length*4}random(a){const o=[];for(let c=0;c<a;c+=4)o.push(cryptoSecureRandomInt());return new WordArray(o,a)}toString(){return hexStringify(this)}}const generateRandomString=s=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let o="";for(let c=0;c<s;c++)o+=a.charAt(Math.floor(Math.random()*a.length));return o};function urlSafeDecode(s){return(s.match(/.{2}/g)||[]).map(o=>String.fromCharCode(parseInt(o,16))).join("")}function urlSafeEncode(s){return s.split("").map(a=>a.charCodeAt(0).toString(16).padStart(2,"0")).join("")}function bytesToString(s){return Array.from(s,a=>String.fromCodePoint(a)).join("")}const base64Encoder={convert(s,{urlSafe:a}={urlSafe:!1}){const o=typeof s=="string"?s:bytesToString(s),c=getBtoa()(o);return a?c.replace(/\+/g,"-").replace(/\//g,"_"):c}},SERVICE_NAME="cognito-idp",endpointResolver=({region:s})=>{var d;const a=(d=Amplify.getConfig().Auth)==null?void 0:d.Cognito,o=a==null?void 0:a.userPoolEndpoint,c=new AmplifyUrl(`https://${SERVICE_NAME}.${s}.${getDnsSuffix(s)}`);return{url:o?new AmplifyUrl(o):c}},disableCacheMiddleware=()=>(s,a)=>async function(c){return c.headers["cache-control"]="no-store",s(c)},cognitoUserPoolTransferHandler=composeTransferHandler(unauthenticatedHandler,[disableCacheMiddleware]),defaultConfig={service:SERVICE_NAME,endpointResolver,retryDecider:getRetryDecider(parseJsonError),computeDelay:jitteredBackoff,userAgentValue:getAmplifyUserAgent(),cache:"no-store"},getSharedHeaders=s=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${s}`}),buildHttpRpcRequest=({url:s},a,o)=>({headers:a,url:s,body:o,method:"POST"});class AuthError extends AmplifyError{constructor(a){super(a),this.constructor=AuthError,Object.setPrototypeOf(this,AuthError.prototype)}}function assertServiceError(s){if(!s||s.name==="Error"||s instanceof TypeError)throw new AuthError({name:AmplifyErrorCode.Unknown,message:"An unknown error has ocurred.",underlyingError:s})}const buildUserPoolSerializer=s=>(a,o)=>{const c=getSharedHeaders(s),d=JSON.stringify(a);return buildHttpRpcRequest(o,c,d)},buildUserPoolDeserializer=()=>async s=>{if(s.statusCode>=300){const a=await parseJsonError(s);throw assertServiceError(a),new AuthError({name:a.name,message:a.message})}else return await parseJsonBody(s)},initiateAuth=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("InitiateAuth"),buildUserPoolDeserializer(),defaultConfig),revokeToken=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("RevokeToken"),buildUserPoolDeserializer(),defaultConfig),signUp$1=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("SignUp"),buildUserPoolDeserializer(),defaultConfig),confirmSignUp$1=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("ConfirmSignUp"),buildUserPoolDeserializer(),defaultConfig),forgotPassword=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("ForgotPassword"),buildUserPoolDeserializer(),defaultConfig),confirmForgotPassword=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("ConfirmForgotPassword"),buildUserPoolDeserializer(),defaultConfig),respondToAuthChallenge=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("RespondToAuthChallenge"),buildUserPoolDeserializer(),defaultConfig),resendConfirmationCode=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("ResendConfirmationCode"),buildUserPoolDeserializer(),defaultConfig),verifySoftwareToken=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("VerifySoftwareToken"),buildUserPoolDeserializer(),defaultConfig),associateSoftwareToken=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("AssociateSoftwareToken"),buildUserPoolDeserializer(),defaultConfig),getUser=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("GetUser"),buildUserPoolDeserializer(),defaultConfig),confirmDevice=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("ConfirmDevice"),buildUserPoolDeserializer(),defaultConfig),getUserAttributeVerificationCode=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("GetUserAttributeVerificationCode"),buildUserPoolDeserializer(),defaultConfig),globalSignOut$1=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("GlobalSignOut"),buildUserPoolDeserializer(),defaultConfig),verifyUserAttribute=composeServiceApi(cognitoUserPoolTransferHandler,buildUserPoolSerializer("VerifyUserAttribute"),buildUserPoolDeserializer(),defaultConfig);var AuthValidationErrorCode;(function(s){s.EmptySignInUsername="EmptySignInUsername",s.EmptySignInPassword="EmptySignInPassword",s.CustomAuthSignInPassword="CustomAuthSignInPassword",s.EmptySignUpUsername="EmptySignUpUsername",s.EmptySignUpPassword="EmptySignUpPassword",s.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",s.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",s.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",s.EmptyChallengeResponse="EmptyChallengeResponse",s.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",s.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",s.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",s.EmptyResetPasswordUsername="EmptyResetPasswordUsername",s.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",s.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",s.IncorrectMFAMethod="IncorrectMFAMethod",s.EmptyUpdatePassword="EmptyUpdatePassword"})(AuthValidationErrorCode||(AuthValidationErrorCode={}));const validationErrorMap={[AuthValidationErrorCode.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[AuthValidationErrorCode.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[AuthValidationErrorCode.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[AuthValidationErrorCode.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[AuthValidationErrorCode.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[AuthValidationErrorCode.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[AuthValidationErrorCode.EmptySignInPassword]:{message:"password is required to signIn"},[AuthValidationErrorCode.EmptySignInUsername]:{message:"username is required to signIn"},[AuthValidationErrorCode.EmptySignUpPassword]:{message:"password is required to signUp"},[AuthValidationErrorCode.EmptySignUpUsername]:{message:"username is required to signUp"},[AuthValidationErrorCode.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[AuthValidationErrorCode.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[AuthValidationErrorCode.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[AuthValidationErrorCode.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[AuthValidationErrorCode.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var AuthErrorStrings;(function(s){s.DEFAULT_MSG="Authentication Error",s.EMPTY_EMAIL="Email cannot be empty",s.EMPTY_PHONE="Phone number cannot be empty",s.EMPTY_USERNAME="Username cannot be empty",s.INVALID_USERNAME="The username should either be a string or one of the sign in types",s.EMPTY_PASSWORD="Password cannot be empty",s.EMPTY_CODE="Confirmation code cannot be empty",s.SIGN_UP_ERROR="Error creating account",s.NO_MFA="No valid MFA method provided",s.INVALID_MFA="Invalid MFA type",s.EMPTY_CHALLENGE="Challenge response cannot be empty",s.NO_USER_SESSION="Failed to get the session because the user is empty",s.NETWORK_ERROR="Network Error",s.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",s.AUTOSIGNIN_ERROR="Please use your credentials to sign in",s.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(AuthErrorStrings||(AuthErrorStrings={}));var AuthErrorCodes;(function(s){s.SignInException="SignInException",s.OAuthSignInError="OAuthSignInException"})(AuthErrorCodes||(AuthErrorCodes={}));function assertValidationError(s,a){const{message:o,recoverySuggestion:c}=validationErrorMap[a];if(!s)throw new AuthError({name:a,message:o,recoverySuggestion:c})}function getRegion(s){const a=s==null?void 0:s.split("_")[0];if(!s||s.indexOf("_")<0||!a||typeof a!="string")throw new AuthError({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return a}function getRegionFromIdentityPoolId(s){if(!s||!s.includes(":"))throw new AuthError({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return s.split(":")[0]}function toAttributeType(s){return Object.entries(s).map(([a,o])=>({Name:a,Value:o}))}function toAuthUserAttribute(s){const a={};return s==null||s.forEach(o=>{o.Name&&(a[o.Name]=o.Value)}),a}function BigInteger(s,a){s!=null&&this.fromString(s,a)}function nbi(){return new BigInteger(null,null)}let dbits;const canary=0xdeadbeefcafe,j_lm=(canary&16777215)===15715070;function am1(s,a,o,c,d,b){for(;--b>=0;){const $=a*this[s++]+o[c]+d;d=Math.floor($/67108864),o[c++]=$&67108863}return d}function am2(s,a,o,c,d,b){const $=a&32767,j=a>>15;for(;--b>=0;){let _e=this[s]&32767;const et=this[s++]>>15,tt=j*_e+et*$;_e=$*_e+((tt&32767)<<15)+o[c]+(d&1073741823),d=(_e>>>30)+(tt>>>15)+j*et+(d>>>30),o[c++]=_e&1073741823}return d}function am3(s,a,o,c,d,b){const $=a&16383,j=a>>14;for(;--b>=0;){let _e=this[s]&16383;const et=this[s++]>>14,tt=j*_e+et*$;_e=$*_e+((tt&16383)<<14)+o[c]+d,d=(_e>>28)+(tt>>14)+j*et,o[c++]=_e&268435455}return d}const inBrowser=typeof navigator<"u";inBrowser&&j_lm&&navigator.appName==="Microsoft Internet Explorer"?(BigInteger.prototype.am=am2,dbits=30):inBrowser&&j_lm&&navigator.appName!=="Netscape"?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28);BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;const BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;const BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;let rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(s){return BI_RM.charAt(s)}function intAt(s,a){var o=BI_RC[s.charCodeAt(a)];return o??-1}function bnpCopyTo(s){for(var a=this.t-1;a>=0;--a)s[a]=this[a];s.t=this.t,s.s=this.s}function bnpFromInt(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0}function nbv(s){var a=nbi();return a.fromInt(s),a}function bnpFromString(s,a){let o;if(a===16)o=4;else if(a===8)o=3;else if(a===2)o=1;else if(a===32)o=5;else if(a===4)o=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let c=s.length,d=!1,b=0;for(;--c>=0;){const $=intAt(s,c);if($<0){s.charAt(c)==="-"&&(d=!0);continue}d=!1,b===0?this[this.t++]=$:b+o>this.DB?(this[this.t-1]|=($&(1<<this.DB-b)-1)<<b,this[this.t++]=$>>this.DB-b):this[this.t-1]|=$<<b,b+=o,b>=this.DB&&(b-=this.DB)}this.clamp(),d&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t}function bnToString(s){if(this.s<0)return"-"+this.negate().toString(s);var a;if(s==16)a=4;else if(s===8)a=3;else if(s===2)a=1;else if(s===32)a=5;else if(s===4)a=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");let o=(1<<a)-1,c,d=!1,b="",$=this.t,j=this.DB-$*this.DB%a;if($-- >0)for(j<this.DB&&(c=this[$]>>j)>0&&(d=!0,b=int2char(c));$>=0;)j<a?(c=(this[$]&(1<<j)-1)<<a-j,c|=this[--$]>>(j+=this.DB-a)):(c=this[$]>>(j-=a)&o,j<=0&&(j+=this.DB,--$)),c>0&&(d=!0),d&&(b+=int2char(c));return d?b:"0"}function bnNegate(){var s=nbi();return BigInteger.ZERO.subTo(this,s),s}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(s){var a=this.s-s.s;if(a!=0)return a;var o=this.t;if(a=o-s.t,a!=0)return this.s<0?-a:a;for(;--o>=0;)if((a=this[o]-s[o])!=0)return a;return 0}function nbits(s){var a=1,o;return(o=s>>>16)!==0&&(s=o,a+=16),(o=s>>8)!==0&&(s=o,a+=8),(o=s>>4)!==0&&(s=o,a+=4),(o=s>>2)!==0&&(s=o,a+=2),(o=s>>1)!==0&&(s=o,a+=1),a}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(s,a){let o;for(o=this.t-1;o>=0;--o)a[o+s]=this[o];for(o=s-1;o>=0;--o)a[o]=0;a.t=this.t+s,a.s=this.s}function bnpDRShiftTo(s,a){for(let o=s;o<this.t;++o)a[o-s]=this[o];a.t=Math.max(this.t-s,0),a.s=this.s}function bnpLShiftTo(s,a){const o=s%this.DB,c=this.DB-o,d=(1<<c)-1;let b=Math.floor(s/this.DB),$=this.s<<o&this.DM,j;for(j=this.t-1;j>=0;--j)a[j+b+1]=this[j]>>c|$,$=(this[j]&d)<<o;for(j=b-1;j>=0;--j)a[j]=0;a[b]=$,a.t=this.t+b+1,a.s=this.s,a.clamp()}function bnpRShiftTo(s,a){a.s=this.s;const o=Math.floor(s/this.DB);if(o>=this.t){a.t=0;return}const c=s%this.DB,d=this.DB-c,b=(1<<c)-1;a[0]=this[o]>>c;for(let $=o+1;$<this.t;++$)a[$-o-1]|=(this[$]&b)<<d,a[$-o]=this[$]>>c;c>0&&(a[this.t-o-1]|=(this.s&b)<<d),a.t=this.t-o,a.clamp()}function bnpSubTo(s,a){let o=0,c=0,d=Math.min(s.t,this.t);for(;o<d;)c+=this[o]-s[o],a[o++]=c&this.DM,c>>=this.DB;if(s.t<this.t){for(c-=s.s;o<this.t;)c+=this[o],a[o++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;o<s.t;)c-=s[o],a[o++]=c&this.DM,c>>=this.DB;c-=s.s}a.s=c<0?-1:0,c<-1?a[o++]=this.DV+c:c>0&&(a[o++]=c),a.t=o,a.clamp()}function bnpMultiplyTo(s,a){const o=this.abs(),c=s.abs();let d=o.t;for(a.t=d+c.t;--d>=0;)a[d]=0;for(d=0;d<c.t;++d)a[d+o.t]=o.am(0,c[d],a,d,0,o.t);a.s=0,a.clamp(),this.s!==s.s&&BigInteger.ZERO.subTo(a,a)}function bnpSquareTo(s){for(var a=this.abs(),o=s.t=2*a.t;--o>=0;)s[o]=0;for(o=0;o<a.t-1;++o){var c=a.am(o,a[o],s,2*o,0,1);(s[o+a.t]+=a.am(o+1,2*a[o],s,2*o+1,c,a.t-o-1))>=a.DV&&(s[o+a.t]-=a.DV,s[o+a.t+1]=1)}s.t>0&&(s[s.t-1]+=a.am(o,a[o],s,2*o,0,1)),s.s=0,s.clamp()}function bnpDivRemTo(s,a,o){var c=s.abs();if(c.t<=0)return;var d=this.abs();if(d.t<c.t){a!=null&&a.fromInt(0),o!=null&&this.copyTo(o);return}o===null&&(o=nbi());var b=nbi(),$=this.s,j=s.s,_e=this.DB-nbits(c[c.t-1]);_e>0?(c.lShiftTo(_e,b),d.lShiftTo(_e,o)):(c.copyTo(b),d.copyTo(o));const et=b.t,tt=b[et-1];if(tt===0)return;const rt=tt*(1<<this.F1)+(et>1?b[et-2]>>this.F2:0),nt=this.FV/rt,it=(1<<this.F1)/rt,at=1<<this.F2;let ct=o.t,st=ct-et,ot=a===null?nbi():a;for(b.dlShiftTo(st,ot),o.compareTo(ot)>=0&&(o[o.t++]=1,o.subTo(ot,o)),BigInteger.ONE.dlShiftTo(et,ot),ot.subTo(b,b);b.t<et;)b[b.t++]=0;for(;--st>=0;){var ht=o[--ct]===tt?this.DM:Math.floor(o[ct]*nt+(o[ct-1]+at)*it);if((o[ct]+=b.am(0,ht,o,st,0,et))<ht)for(b.dlShiftTo(st,ot),o.subTo(ot,o);o[ct]<--ht;)o.subTo(ot,o)}a!==null&&(o.drShiftTo(et,a),$!==j&&BigInteger.ZERO.subTo(a,a)),o.t=et,o.clamp(),_e>0&&o.rShiftTo(_e,o),$<0&&BigInteger.ZERO.subTo(o,o)}function bnMod(s){var a=nbi();return this.abs().divRemTo(s,null,a),this.s<0&&a.compareTo(BigInteger.ZERO)>0&&s.subTo(a,a),a}function bnpInvDigit(){if(this.t<1)return 0;var s=this[0];if(!(s&1))return 0;var a=s&3;return a=a*(2-(s&15)*a)&15,a=a*(2-(s&255)*a)&255,a=a*(2-((s&65535)*a&65535))&65535,a=a*(2-s*a%this.DV)%this.DV,a>0?this.DV-a:-a}function bnEquals(s){return this.compareTo(s)===0}function bnpAddTo(s,a){let o=0,c=0,d=Math.min(s.t,this.t);for(;o<d;)c+=this[o]+s[o],a[o++]=c&this.DM,c>>=this.DB;if(s.t<this.t){for(c+=s.s;o<this.t;)c+=this[o],a[o++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;o<s.t;)c+=s[o],a[o++]=c&this.DM,c>>=this.DB;c+=s.s}a.s=c<0?-1:0,c>0?a[o++]=c:c<-1&&(a[o++]=this.DV+c),a.t=o,a.clamp()}function bnAdd(s){var a=nbi();return this.addTo(s,a),a}function bnSubtract(s){var a=nbi();return this.subTo(s,a),a}function bnMultiply(s){var a=nbi();return this.multiplyTo(s,a),a}function bnDivide(s){var a=nbi();return this.divRemTo(s,a,null),a}function Montgomery(s){this.m=s,this.mp=s.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<s.DB-15)-1,this.mt2=2*s.t}function montConvert(s){var a=nbi();return s.abs().dlShiftTo(this.m.t,a),a.divRemTo(this.m,null,a),s.s<0&&a.compareTo(BigInteger.ZERO)>0&&this.m.subTo(a,a),a}function montRevert(s){var a=nbi();return s.copyTo(a),this.reduce(a),a}function montReduce(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var a=0;a<this.m.t;++a){var o=s[a]&32767,c=o*this.mpl+((o*this.mph+(s[a]>>15)*this.mpl&this.um)<<15)&s.DM;for(o=a+this.m.t,s[o]+=this.m.am(0,c,s,a,0,this.m.t);s[o]>=s.DV;)s[o]-=s.DV,s[++o]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)}function montSqrTo(s,a){s.squareTo(a),this.reduce(a)}function montMulTo(s,a,o){s.multiplyTo(a,o),this.reduce(o)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnModPow(s,a,o){let c=s.bitLength(),d,b=nbv(1),$=new Montgomery(a);if(c<=0)return b;c<18?d=1:c<48?d=3:c<144?d=4:c<768?d=5:d=6;let j=new Array,_e=3,et=d-1,tt=(1<<d)-1;if(j[1]=$.convert(this),d>1){const ot=nbi();for($.sqrTo(j[1],ot);_e<=tt;)j[_e]=nbi(),$.mulTo(ot,j[_e-2],j[_e]),_e+=2}let rt=s.t-1,nt,it=!0,at=nbi(),ct;for(c=nbits(s[rt])-1;rt>=0;){for(c>=et?nt=s[rt]>>c-et&tt:(nt=(s[rt]&(1<<c+1)-1)<<et-c,rt>0&&(nt|=s[rt-1]>>this.DB+c-et)),_e=d;!(nt&1);)nt>>=1,--_e;if((c-=_e)<0&&(c+=this.DB,--rt),it)j[nt].copyTo(b),it=!1;else{for(;_e>1;)$.sqrTo(b,at),$.sqrTo(at,b),_e-=2;_e>0?$.sqrTo(b,at):(ct=b,b=at,at=ct),$.mulTo(at,j[nt],b)}for(;rt>=0&&!(s[rt]&1<<c);)$.sqrTo(b,at),ct=b,b=at,at=ct,--c<0&&(c=this.DB-1,--rt)}var st=$.revert(b);return o(null,st),st}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.modPow=bnModPow;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);const textEncoder={convert(s){return new TextEncoder().encode(s)}},calculateS=async({a:s,g:a,k:o,x:c,B:d,N:b,U:$})=>new Promise((j,_e)=>{a.modPow(c,b,(et,tt)=>{if(et){_e(et);return}d.subtract(o.multiply(tt)).modPow(s.add($.multiply(c)),b,(rt,nt)=>{if(rt){_e(rt);return}j(nt.mod(b))})})}),INIT_N="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",SHORT_TO_HEX={},HEX_TO_SHORT={};for(let s=0;s<256;s++){let a=s.toString(16).toLowerCase();a.length===1&&(a=`0${a}`),SHORT_TO_HEX[s]=a,HEX_TO_SHORT[a]=s}const getBytesFromHex=s=>{if(s.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const a=new Uint8Array(s.length/2);for(let o=0;o<s.length;o+=2){const c=s.slice(o,o+2).toLowerCase();if(c in HEX_TO_SHORT)a[o/2]=HEX_TO_SHORT[c];else throw new Error(`Cannot decode unrecognized sequence ${c} as hexadecimal`)}return a},getHexFromBytes=s=>{let a="";for(let o=0;o<s.byteLength;o++)a+=SHORT_TO_HEX[s[o]];return a},getHashFromData=s=>{const a=new Sha256;a.update(s);const o=a.digestSync(),c=getHexFromBytes(o);return new Array(64-c.length).join("0")+c},getHashFromHex=s=>getHashFromData(getBytesFromHex(s)),HEX_MSB_REGEX=/^[89a-f]/i,getPaddedHex=s=>{if(!(s instanceof BigInteger))throw new Error("Not a BigInteger");const a=s.compareTo(BigInteger.ZERO)<0;let o=s.abs().toString(16);if(o=o.length%2!==0?`0${o}`:o,o=HEX_MSB_REGEX.test(o)?`00${o}`:o,a){const c=o.split("").map(b=>{const $=~parseInt(b,16)&15;return"0123456789ABCDEF".charAt($)}).join("");o=new BigInteger(c,16).add(BigInteger.ONE).toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o},calculateU=({A:s,B:a})=>{const o=new BigInteger(getHashFromHex(getPaddedHex(s)+getPaddedHex(a)),16);if(o.equals(BigInteger.ZERO))throw new Error("U cannot be zero.");return o},getHkdfKey=(s,a,o)=>{const c=new Sha256(a);c.update(s);const d=c.digestSync(),b=new Sha256(d);return b.update(o),b.digestSync().slice(0,16)},getRandomBytes=s=>{const a=new WordArray().random(s).toString();return getBytesFromHex(a)},getRandomString=()=>base64Encoder.convert(getRandomBytes(40));class AuthenticationHelper{constructor({userPoolName:a,a:o,g:c,A:d,N:b}){this.encoder=textEncoder,this.userPoolName=a,this.a=o,this.g=c,this.A=d,this.N=b,this.k=new BigInteger(getHashFromHex(`${getPaddedHex(b)}${getPaddedHex(c)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new AuthError({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new AuthError({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new AuthError({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(a,o){this.randomPassword=getRandomString();const c=`${a}${o}:${this.randomPassword}`,d=getHashFromData(c),b=getHexFromBytes(getRandomBytes(16));return this.saltToHashDevices=getPaddedHex(new BigInteger(b,16)),new Promise(($,j)=>{this.g.modPow(new BigInteger(getHashFromHex(this.saltToHashDevices+d),16),this.N,(_e,et)=>{if(_e){j(_e);return}this.verifierDevices=getPaddedHex(et),$()})})}async getPasswordAuthenticationKey({username:a,password:o,serverBValue:c,salt:d}){if(c.mod(this.N).equals(BigInteger.ZERO))throw new Error("B cannot be zero.");const b=calculateU({A:this.A,B:c}),$=`${this.userPoolName}${a}:${o}`,j=getHashFromData($),_e=new BigInteger(getHashFromHex(getPaddedHex(d)+j),16),et=await calculateS({a:this.a,g:this.g,k:this.k,x:_e,B:c,N:this.N,U:b}),tt=this.encoder.convert("Caldera Derived Key"),rt=this.encoder.convert(String.fromCharCode(1)),nt=new Uint8Array(tt.byteLength+rt.byteLength);return nt.set(tt,0),nt.set(rt,tt.byteLength),getHkdfKey(getBytesFromHex(getPaddedHex(et)),getBytesFromHex(getPaddedHex(b)),nt)}}const calculateA=async({a:s,g:a,N:o})=>new Promise((c,d)=>{a.modPow(s,o,(b,$)=>{if(b){d(b);return}if($.mod(o).equals(BigInteger.ZERO)){d(new Error("Illegal parameter. A mod N cannot be 0."));return}c($)})}),getAuthenticationHelper=async s=>{const a=new BigInteger(INIT_N,16),o=new BigInteger("2",16),c=generateRandomBigInteger(),d=await calculateA({a:c,g:o,N:a});return new AuthenticationHelper({userPoolName:s,a:c,g:o,A:d,N:a})},generateRandomBigInteger=()=>{const s=getHexFromBytes(getRandomBytes(128));return new BigInteger(s,16)},MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEK_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],getNowString=()=>{const s=new Date,a=WEEK_NAMES[s.getUTCDay()],o=MONTH_NAMES[s.getUTCMonth()],c=s.getUTCDate();let d=s.getUTCHours();d<10&&(d=`0${d}`);let b=s.getUTCMinutes();b<10&&(b=`0${b}`);let $=s.getUTCSeconds();$<10&&($=`0${$}`);const j=s.getUTCFullYear();return`${a} ${o} ${c} ${d}:${b}:${$} UTC ${j}`},getSignatureString=({userPoolName:s,username:a,challengeParameters:o,dateNow:c,hkdf:d})=>{const b=textEncoder.convert(s),$=textEncoder.convert(a),j=urlB64ToUint8Array(o.SECRET_BLOCK),_e=textEncoder.convert(c),et=new Uint8Array(b.byteLength+$.byteLength+j.byteLength+_e.byteLength);et.set(b,0),et.set($,b.byteLength),et.set(j,b.byteLength+$.byteLength),et.set(_e,b.byteLength+$.byteLength+j.byteLength);const tt=new Sha256(d);tt.update(et);const rt=tt.digestSync();return base64Encoder.convert(rt)},urlB64ToUint8Array=s=>{const a="=".repeat((4-s.length%4)%4),o=(s+a).replace(/\-/g,"+").replace(/_/g,"/"),c=base64Decoder.convert(o),d=new Uint8Array(c.length);for(let b=0;b<c.length;++b)d[b]=c.charCodeAt(b);return d};var AssociateSoftwareTokenException;(function(s){s.ConcurrentModificationException="ConcurrentModificationException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(AssociateSoftwareTokenException||(AssociateSoftwareTokenException={}));var ChangePasswordException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.InvalidPasswordException="InvalidPasswordException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(ChangePasswordException||(ChangePasswordException={}));var ConfirmDeviceException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidPasswordException="InvalidPasswordException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UsernameExistsException="UsernameExistsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(ConfirmDeviceException||(ConfirmDeviceException={}));var ConfirmForgotPasswordException;(function(s){s.CodeMismatchException="CodeMismatchException",s.ExpiredCodeException="ExpiredCodeException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidPasswordException="InvalidPasswordException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyFailedAttemptsException="TooManyFailedAttemptsException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(ConfirmForgotPasswordException||(ConfirmForgotPasswordException={}));var ConfirmSignUpException;(function(s){s.AliasExistsException="AliasExistsException",s.CodeMismatchException="CodeMismatchException",s.ExpiredCodeException="ExpiredCodeException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyFailedAttemptsException="TooManyFailedAttemptsException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotFoundException="UserNotFoundException"})(ConfirmSignUpException||(ConfirmSignUpException={}));var DeleteUserAttributesException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(DeleteUserAttributesException||(DeleteUserAttributesException={}));var DeleteUserException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(DeleteUserException||(DeleteUserException={}));var ForgetDeviceException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(ForgetDeviceException||(ForgetDeviceException={}));var ForgotPasswordException;(function(s){s.CodeDeliveryFailureException="CodeDeliveryFailureException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotFoundException="UserNotFoundException"})(ForgotPasswordException||(ForgotPasswordException={}));var GetUserException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(GetUserException||(GetUserException={}));var GetIdException;(function(s){s.ExternalServiceException="ExternalServiceException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceConflictException="ResourceConflictException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException"})(GetIdException||(GetIdException={}));var GetCredentialsForIdentityException;(function(s){s.ExternalServiceException="ExternalServiceException",s.InternalErrorException="InternalErrorException",s.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceConflictException="ResourceConflictException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException"})(GetCredentialsForIdentityException||(GetCredentialsForIdentityException={}));var GetUserAttributeVerificationException;(function(s){s.CodeDeliveryFailureException="CodeDeliveryFailureException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(GetUserAttributeVerificationException||(GetUserAttributeVerificationException={}));var GlobalSignOutException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException"})(GlobalSignOutException||(GlobalSignOutException={}));var InitiateAuthException;(function(s){s.PasswordResetRequiredException="PasswordResetRequiredException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(InitiateAuthException||(InitiateAuthException={}));var ResendConfirmationException;(function(s){s.CodeDeliveryFailureException="CodeDeliveryFailureException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotFoundException="UserNotFoundException"})(ResendConfirmationException||(ResendConfirmationException={}));var RespondToAuthChallengeException;(function(s){s.AliasExistsException="AliasExistsException",s.CodeMismatchException="CodeMismatchException",s.ExpiredCodeException="ExpiredCodeException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidPasswordException="InvalidPasswordException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.MFAMethodNotFoundException="MFAMethodNotFoundException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(RespondToAuthChallengeException||(RespondToAuthChallengeException={}));var SetUserMFAPreferenceException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(SetUserMFAPreferenceException||(SetUserMFAPreferenceException={}));var SignUpException;(function(s){s.CodeDeliveryFailureException="CodeDeliveryFailureException",s.InternalErrorException="InternalErrorException",s.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidPasswordException="InvalidPasswordException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.NotAuthorizedException="NotAuthorizedException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UsernameExistsException="UsernameExistsException"})(SignUpException||(SignUpException={}));var UpdateUserAttributesException;(function(s){s.AliasExistsException="AliasExistsException",s.CodeDeliveryFailureException="CodeDeliveryFailureException",s.CodeMismatchException="CodeMismatchException",s.ExpiredCodeException="ExpiredCodeException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",s.InvalidLambdaResponseException="InvalidLambdaResponseException",s.InvalidParameterException="InvalidParameterException",s.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",s.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UnexpectedLambdaException="UnexpectedLambdaException",s.UserLambdaValidationException="UserLambdaValidationException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(UpdateUserAttributesException||(UpdateUserAttributesException={}));var VerifySoftwareTokenException;(function(s){s.CodeMismatchException="CodeMismatchException",s.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(VerifySoftwareTokenException||(VerifySoftwareTokenException={}));var VerifyUserAttributeException;(function(s){s.AliasExistsException="AliasExistsException",s.CodeMismatchException="CodeMismatchException",s.ExpiredCodeException="ExpiredCodeException",s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.LimitExceededException="LimitExceededException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(VerifyUserAttributeException||(VerifyUserAttributeException={}));var UpdateDeviceStatusException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(UpdateDeviceStatusException||(UpdateDeviceStatusException={}));var ListDevicesException;(function(s){s.ForbiddenException="ForbiddenException",s.InternalErrorException="InternalErrorException",s.InvalidParameterException="InvalidParameterException",s.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",s.NotAuthorizedException="NotAuthorizedException",s.PasswordResetRequiredException="PasswordResetRequiredException",s.ResourceNotFoundException="ResourceNotFoundException",s.TooManyRequestsException="TooManyRequestsException",s.UserNotConfirmedException="UserNotConfirmedException",s.UserNotFoundException="UserNotFoundException"})(ListDevicesException||(ListDevicesException={}));const signInReducer=(s,a)=>{switch(a.type){case"SET_SIGN_IN_SESSION":return{...s,signInSession:a.value};case"SET_SIGN_IN_STATE":return{...a.value};case"SET_CHALLENGE_NAME":return{...s,challengeName:a.value};case"SET_USERNAME":return{...s,username:a.value};case"SET_INITIAL_STATE":return defaultState();default:return s}};function defaultState(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const createStore=s=>{let a=s(defaultState(),{type:"SET_INITIAL_STATE"});return{getState:()=>a,dispatch:o=>{a=s(a,o)}}},signInStore=createStore(signInReducer);function setActiveSignInState(s){signInStore.dispatch({type:"SET_SIGN_IN_STATE",value:s})}function cleanActiveSignInState(){signInStore.dispatch({type:"SET_INITIAL_STATE"})}const USER_UNAUTHENTICATED_EXCEPTION="UserUnAuthenticatedException",USER_ALREADY_AUTHENTICATED_EXCEPTION="UserAlreadyAuthenticatedException",DEVICE_METADATA_NOT_FOUND_EXCEPTION="DeviceMetadataNotFoundException",AUTO_SIGN_IN_EXCEPTION="AutoSignInException",INVALID_REDIRECT_EXCEPTION="InvalidRedirectException",invalidRedirectException=new AuthError({name:INVALID_REDIRECT_EXCEPTION,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),INVALID_ORIGIN_EXCEPTION="InvalidOriginException",invalidOriginException=new AuthError({name:INVALID_ORIGIN_EXCEPTION,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),OAUTH_SIGNOUT_EXCEPTION="OAuthSignOutException";function assertAuthTokens(s){if(!s||!s.accessToken)throw new AuthError({name:USER_UNAUTHENTICATED_EXCEPTION,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function assertIdTokenInAuthTokens(s){if(!s||!s.idToken)throw new AuthError({name:USER_UNAUTHENTICATED_EXCEPTION,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function assertAuthTokensWithRefreshToken(s){if(!s||!s.accessToken||!s.refreshToken)throw new AuthError({name:USER_UNAUTHENTICATED_EXCEPTION,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function assertDeviceMetadata(s){if(!s||!s.deviceKey||!s.deviceGroupKey||!s.randomPassword)throw new AuthError({name:DEVICE_METADATA_NOT_FOUND_EXCEPTION,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const OAuthStorageKeys={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"},getCurrentUser$1=async s=>{var j,_e;const a=(j=s.getConfig().Auth)==null?void 0:j.Cognito;assertTokenProviderConfig(a);const o=await s.Auth.getTokens({forceRefresh:!1});assertAuthTokens(o);const{"cognito:username":c,sub:d}=((_e=o.idToken)==null?void 0:_e.payload)??{},b={username:c,userId:d},$=getSignInDetailsFromTokens(o);return $&&(b.signInDetails=$),b};function getSignInDetailsFromTokens(s){return s==null?void 0:s.signInDetails}const getCurrentUser=async()=>getCurrentUser$1(Amplify),getAuthUserAgentValue=(s,a)=>getAmplifyUserAgent({category:Category.Auth,action:s,...a});function getUserContextData({username:s,userPoolId:a,userPoolClientId:o}){if(typeof window>"u")return;const c=window.AmazonCognitoAdvancedSecurityData;if(typeof c>"u")return;const d=c.getData(s,a,o);return d?{EncodedData:d}:{}}const USER_ATTRIBUTES="userAttributes.";async function handleCustomChallenge({challengeResponse:s,clientMetadata:a,session:o,username:c,config:d,tokenOrchestrator:b}){const{userPoolId:$,userPoolClientId:j}=d,_e={USERNAME:c,ANSWER:s},et=await(b==null?void 0:b.getDeviceMetadata(c));et&&et.deviceKey&&(_e.DEVICE_KEY=et.deviceKey);const tt=getUserContextData({username:c,userPoolId:$,userPoolClientId:j}),rt={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:_e,Session:o,ClientMetadata:a,ClientId:j,UserContextData:tt},nt=await respondToAuthChallenge({region:getRegion($),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},rt);return nt.ChallengeName==="DEVICE_SRP_AUTH"?handleDeviceSRPAuth({username:c,config:d,clientMetadata:a,session:nt.Session,tokenOrchestrator:b}):nt}async function handleMFASetupChallenge({challengeResponse:s,username:a,clientMetadata:o,session:c,deviceName:d,config:b}){const{userPoolId:$,userPoolClientId:j}=b,_e={USERNAME:a},{Session:et}=await verifySoftwareToken({region:getRegion($),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},{UserCode:s,Session:c,FriendlyDeviceName:d});signInStore.dispatch({type:"SET_SIGN_IN_SESSION",value:et});const tt={ChallengeName:"MFA_SETUP",ChallengeResponses:_e,Session:et,ClientMetadata:o,ClientId:j};return respondToAuthChallenge({region:getRegion($)},tt)}async function handleSelectMFATypeChallenge({challengeResponse:s,username:a,clientMetadata:o,session:c,config:d}){const{userPoolId:b,userPoolClientId:$}=d;assertValidationError(s==="TOTP"||s==="SMS",AuthValidationErrorCode.IncorrectMFAMethod);const j={USERNAME:a,ANSWER:mapMfaType(s)},_e=getUserContextData({username:a,userPoolId:b,userPoolClientId:$}),et={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:j,Session:c,ClientMetadata:o,ClientId:$,UserContextData:_e};return respondToAuthChallenge({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},et)}async function handleSMSMFAChallenge({challengeResponse:s,clientMetadata:a,session:o,username:c,config:d}){const{userPoolId:b,userPoolClientId:$}=d,j={USERNAME:c,SMS_MFA_CODE:s},_e=getUserContextData({username:c,userPoolId:b,userPoolClientId:$}),et={ChallengeName:"SMS_MFA",ChallengeResponses:j,Session:o,ClientMetadata:a,ClientId:$,UserContextData:_e};return respondToAuthChallenge({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},et)}async function handleSoftwareTokenMFAChallenge({challengeResponse:s,clientMetadata:a,session:o,username:c,config:d}){const{userPoolId:b,userPoolClientId:$}=d,j={USERNAME:c,SOFTWARE_TOKEN_MFA_CODE:s},_e=getUserContextData({username:c,userPoolId:b,userPoolClientId:$}),et={ChallengeName:"SOFTWARE_TOKEN_MFA",ChallengeResponses:j,Session:o,ClientMetadata:a,ClientId:$,UserContextData:_e};return respondToAuthChallenge({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},et)}async function handleCompleteNewPasswordChallenge({challengeResponse:s,clientMetadata:a,session:o,username:c,requiredAttributes:d,config:b}){const{userPoolId:$,userPoolClientId:j}=b,_e={...createAttributes(d),NEW_PASSWORD:s,USERNAME:c},et=getUserContextData({username:c,userPoolId:$,userPoolClientId:j}),tt={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:_e,ClientMetadata:a,Session:o,ClientId:j,UserContextData:et};return respondToAuthChallenge({region:getRegion($),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignIn)},tt)}async function handleUserPasswordAuthFlow(s,a,o,c,d){var it,at;const{userPoolClientId:b,userPoolId:$}=c,j={USERNAME:s,PASSWORD:a},_e=await d.getDeviceMetadata(s);_e&&_e.deviceKey&&(j.DEVICE_KEY=_e.deviceKey);const et=getUserContextData({username:s,userPoolId:$,userPoolClientId:b}),tt={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:j,ClientMetadata:o,ClientId:b,UserContextData:et},rt=await initiateAuth({region:getRegion($),userAgentValue:getAuthUserAgentValue(AuthAction.SignIn)},tt),nt=((it=rt.ChallengeParameters)==null?void 0:it.USERNAME)??((at=rt.ChallengeParameters)==null?void 0:at.USER_ID_FOR_SRP)??s;return setActiveSignInUsername(nt),rt.ChallengeName==="DEVICE_SRP_AUTH"?handleDeviceSRPAuth({username:nt,config:c,clientMetadata:o,session:rt.Session,tokenOrchestrator:d}):rt}async function handleUserSRPAuthFlow(s,a,o,c,d){const{userPoolId:b,userPoolClientId:$}=c,j=(b==null?void 0:b.split("_")[1])||"",_e=await getAuthenticationHelper(j),et={USERNAME:s,SRP_A:_e.A.toString(16)},tt=getUserContextData({username:s,userPoolId:b,userPoolClientId:$}),rt={AuthFlow:"USER_SRP_AUTH",AuthParameters:et,ClientMetadata:o,ClientId:$,UserContextData:tt},nt=await initiateAuth({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.SignIn)},rt),{ChallengeParameters:it,Session:at}=nt,ct=(it==null?void 0:it.USERNAME)??s;return setActiveSignInUsername(ct),retryOnResourceNotFoundException(handlePasswordVerifierChallenge,[a,it,o,at,_e,c,d],ct,d)}async function handleCustomAuthFlowWithoutSRP(s,a,o,c){var nt;const{userPoolClientId:d,userPoolId:b}=o,$={USERNAME:s},j=await c.getDeviceMetadata(s);j&&j.deviceKey&&($.DEVICE_KEY=j.deviceKey);const _e=getUserContextData({username:s,userPoolId:b,userPoolClientId:d}),et={AuthFlow:"CUSTOM_AUTH",AuthParameters:$,ClientMetadata:a,ClientId:d,UserContextData:_e},tt=await initiateAuth({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.SignIn)},et),rt=((nt=tt.ChallengeParameters)==null?void 0:nt.USERNAME)??s;return setActiveSignInUsername(rt),tt.ChallengeName==="DEVICE_SRP_AUTH"?handleDeviceSRPAuth({username:rt,config:o,clientMetadata:a,session:tt.Session,tokenOrchestrator:c}):tt}async function handleCustomSRPAuthFlow(s,a,o,c,d){assertTokenProviderConfig(c);const{userPoolId:b,userPoolClientId:$}=c,j=(b==null?void 0:b.split("_")[1])||"",_e=await getAuthenticationHelper(j),et={USERNAME:s,SRP_A:_e.A.toString(16),CHALLENGE_NAME:"SRP_A"},tt=getUserContextData({username:s,userPoolId:b,userPoolClientId:$}),rt={AuthFlow:"CUSTOM_AUTH",AuthParameters:et,ClientMetadata:o,ClientId:$,UserContextData:tt},{ChallengeParameters:nt,Session:it}=await initiateAuth({region:getRegion(b),userAgentValue:getAuthUserAgentValue(AuthAction.SignIn)},rt),at=(nt==null?void 0:nt.USERNAME)??s;return setActiveSignInUsername(at),retryOnResourceNotFoundException(handlePasswordVerifierChallenge,[a,nt,o,it,_e,c,d],at,d)}async function handleDeviceSRPAuth({username:s,config:a,clientMetadata:o,session:c,tokenOrchestrator:d}){const b=a.userPoolId,$=a.userPoolClientId,j=await(d==null?void 0:d.getDeviceMetadata(s));assertDeviceMetadata(j);const _e=await getAuthenticationHelper(j.deviceGroupKey),et={USERNAME:s,SRP_A:_e.A.toString(16),DEVICE_KEY:j.deviceKey},tt={ChallengeName:"DEVICE_SRP_AUTH",ClientId:$,ChallengeResponses:et,ClientMetadata:o,Session:c},{ChallengeParameters:rt,Session:nt}=await respondToAuthChallenge({region:getRegion(b)},tt);return handleDevicePasswordVerifier(s,rt,o,nt,_e,a,d)}async function handleDevicePasswordVerifier(s,a,o,c,d,{userPoolId:b,userPoolClientId:$},j){const _e=await(j==null?void 0:j.getDeviceMetadata(s));assertDeviceMetadata(_e);const et=new BigInteger(a==null?void 0:a.SRP_B,16),tt=new BigInteger(a==null?void 0:a.SALT,16),rt=_e.deviceKey,nt=_e.deviceGroupKey,it=await d.getPasswordAuthenticationKey({username:_e.deviceKey,password:_e.randomPassword,serverBValue:et,salt:tt}),at=getNowString(),ct={USERNAME:(a==null?void 0:a.USERNAME)??s,PASSWORD_CLAIM_SECRET_BLOCK:a==null?void 0:a.SECRET_BLOCK,TIMESTAMP:at,PASSWORD_CLAIM_SIGNATURE:getSignatureString({username:rt,userPoolName:nt,challengeParameters:a,dateNow:at,hkdf:it}),DEVICE_KEY:rt},st=getUserContextData({username:s,userPoolId:b,userPoolClientId:$}),ot={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:$,ChallengeResponses:ct,Session:c,ClientMetadata:o,UserContextData:st};return respondToAuthChallenge({region:getRegion(b)},ot)}async function handlePasswordVerifierChallenge(s,a,o,c,d,b,$){const{userPoolId:j,userPoolClientId:_e}=b,et=(j==null?void 0:j.split("_")[1])||"",tt=new BigInteger(a==null?void 0:a.SRP_B,16),rt=new BigInteger(a==null?void 0:a.SALT,16),nt=a==null?void 0:a.USER_ID_FOR_SRP;if(!nt)throw new AuthError({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const it=await d.getPasswordAuthenticationKey({username:nt,password:s,serverBValue:tt,salt:rt}),at=getNowString(),ct={USERNAME:nt,PASSWORD_CLAIM_SECRET_BLOCK:a==null?void 0:a.SECRET_BLOCK,TIMESTAMP:at,PASSWORD_CLAIM_SIGNATURE:getSignatureString({username:nt,userPoolName:et,challengeParameters:a,dateNow:at,hkdf:it})},st=await $.getDeviceMetadata(nt);st&&st.deviceKey&&(ct.DEVICE_KEY=st.deviceKey);const ot=getUserContextData({username:nt,userPoolId:j,userPoolClientId:_e}),ht={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:ct,ClientMetadata:o,Session:c,ClientId:_e,UserContextData:ot},dt=await respondToAuthChallenge({region:getRegion(j)},ht);return dt.ChallengeName==="DEVICE_SRP_AUTH"?handleDeviceSRPAuth({username:nt,config:b,clientMetadata:o,session:dt.Session,tokenOrchestrator:$}):dt}async function getSignInResult(s){var d;const{challengeName:a,challengeParameters:o}=s,c=(d=Amplify.getConfig().Auth)==null?void 0:d.Cognito;switch(assertTokenProviderConfig(c),a){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":const{signInSession:b,username:$}=signInStore.getState();if(!isMFATypeEnabled(o,"TOTP"))throw new AuthError({name:AuthErrorCodes.SignInException,message:`Cannot initiate MFA setup from available types: ${getMFATypes(parseMFATypes(o.MFAS_CAN_SETUP))}`});const{Session:j,SecretCode:_e}=await associateSoftwareToken({region:getRegion(c.userPoolId)},{Session:b});return signInStore.dispatch({type:"SET_SIGN_IN_SESSION",value:j}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:getTOTPSetupDetails(_e,$)}};case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:parseAttributes(o.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:getMFATypes(parseMFATypes(o.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new AuthError({name:AuthErrorCodes.SignInException,message:`An error occurred during the sign in process. ${a} challengeName returned by the underlying service was not addressed.`})}function getTOTPSetupDetails(s,a){return{sharedSecret:s,getSetupUri:(o,c)=>{const d=`otpauth://totp/${o}:${c??a}?secret=${s}&issuer=${o}`;return new AmplifyUrl(d)}}}function getSignInResultFromError(s){if(s===InitiateAuthException.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(s===InitiateAuthException.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function parseAttributes(s){return s?JSON.parse(s).map(o=>o.includes(USER_ATTRIBUTES)?o.replace(USER_ATTRIBUTES,""):o):[]}function createAttributes(s){if(!s)return{};const a={};return Object.entries(s).forEach(([o,c])=>{c&&(a[`${USER_ATTRIBUTES}${o}`]=c)}),a}async function handleChallengeName(s,a,o,c,d,b,$,j){const _e=j==null?void 0:j.userAttributes,et=j==null?void 0:j.friendlyDeviceName;switch(a){case"SMS_MFA":return handleSMSMFAChallenge({challengeResponse:c,clientMetadata:$,session:o,username:s,config:d});case"SELECT_MFA_TYPE":return handleSelectMFATypeChallenge({challengeResponse:c,clientMetadata:$,session:o,username:s,config:d});case"MFA_SETUP":return handleMFASetupChallenge({challengeResponse:c,clientMetadata:$,session:o,username:s,deviceName:et,config:d});case"NEW_PASSWORD_REQUIRED":return handleCompleteNewPasswordChallenge({challengeResponse:c,clientMetadata:$,session:o,username:s,requiredAttributes:_e,config:d});case"CUSTOM_CHALLENGE":return retryOnResourceNotFoundException(handleCustomChallenge,[{challengeResponse:c,clientMetadata:$,session:o,username:s,config:d,tokenOrchestrator:b}],s,b);case"SOFTWARE_TOKEN_MFA":return handleSoftwareTokenMFAChallenge({challengeResponse:c,clientMetadata:$,session:o,username:s,config:d})}throw new AuthError({name:AuthErrorCodes.SignInException,message:`An error occurred during the sign in process. 
		${a} challengeName returned by the underlying service was not addressed.`})}function mapMfaType(s){let a="SMS_MFA";return s==="TOTP"&&(a="SOFTWARE_TOKEN_MFA"),a}function getMFAType(s){if(s==="SMS_MFA")return"SMS";if(s==="SOFTWARE_TOKEN_MFA")return"TOTP"}function getMFATypes(s){if(s)return s.map(getMFAType).filter(Boolean)}function parseMFATypes(s){return s?JSON.parse(s):[]}function isMFATypeEnabled(s,a){const{MFAS_CAN_SETUP:o}=s,c=getMFATypes(parseMFATypes(o));return c?c.includes(a):!1}async function assertUserNotAuthenticated(){let s;try{s=await getCurrentUser()}catch{}if(s&&s.userId&&s.username)throw new AuthError({name:USER_ALREADY_AUTHENTICATED_EXCEPTION,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function getNewDeviceMetatada(s,a,o){if(!a)return;const c=s.split("_")[1]||"",d=await getAuthenticationHelper(c),b=a==null?void 0:a.DeviceKey,$=a==null?void 0:a.DeviceGroupKey;try{await d.generateHashDevice($??"",b??"")}catch{return}const j={Salt:base64Encoder.convert(getBytesFromHex(d.getSaltToHashDevices())),PasswordVerifier:base64Encoder.convert(getBytesFromHex(d.getVerifierDevices()))},_e=d.getRandomPassword();try{return await confirmDevice({region:getRegion(s)},{AccessToken:o,DeviceKey:a==null?void 0:a.DeviceKey,DeviceSecretVerifierConfig:j}),{deviceKey:b,deviceGroupKey:$,randomPassword:_e}}catch{return}}async function retryOnResourceNotFoundException(s,a,o,c){try{return await s(...a)}catch(d){if(d instanceof AuthError&&d.name==="ResourceNotFoundException"&&d.message.includes("Device does not exist."))return await c.clearDeviceMetadata(o),await s(...a);throw d}}function setActiveSignInUsername(s){const{dispatch:a}=signInStore;a({type:"SET_USERNAME",value:s})}function getActiveSignInUsername(s){return signInStore.getState().username??s}const refreshAuthTokens=async({tokens:s,authConfig:a,username:o})=>{var nt,it;assertTokenProviderConfig(a==null?void 0:a.Cognito);const c=getRegion(a.Cognito.userPoolId);assertAuthTokensWithRefreshToken(s);const d=s.refreshToken,b={REFRESH_TOKEN:d};(nt=s.deviceMetadata)!=null&&nt.deviceKey&&(b.DEVICE_KEY=s.deviceMetadata.deviceKey);const $=getUserContextData({username:o,userPoolId:a.Cognito.userPoolId,userPoolClientId:a.Cognito.userPoolClientId}),{AuthenticationResult:j}=await initiateAuth({region:c},{ClientId:(it=a==null?void 0:a.Cognito)==null?void 0:it.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:b,UserContextData:$}),_e=decodeJWT((j==null?void 0:j.AccessToken)??""),et=j!=null&&j.IdToken?decodeJWT(j.IdToken):void 0,tt=_e.payload.iat;if(!tt)throw new AuthError({name:"iatNotFoundException",message:"iat not found in access token"});const rt=tt*1e3-new Date().getTime();return{accessToken:_e,idToken:et,clockDrift:rt,refreshToken:d,username:o}},AuthTokenStorageKeys={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var TokenProviderErrorCode;(function(s){s.InvalidAuthTokens="InvalidAuthTokens"})(TokenProviderErrorCode||(TokenProviderErrorCode={}));const tokenValidationErrorMap={[TokenProviderErrorCode.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},assert=createAssertionFunction(tokenValidationErrorMap);class DefaultTokenStore{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new AuthError({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(a){this.keyValueStorage=a}setAuthConfig(a){this.authConfig=a}async loadTokens(){try{const a=await this.getAuthKeys(),o=await this.getKeyValueStorage().getItem(a.accessToken);if(!o)throw new AuthError({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const c=decodeJWT(o),d=await this.getKeyValueStorage().getItem(a.idToken),b=d?decodeJWT(d):void 0,$=await this.getKeyValueStorage().getItem(a.refreshToken)??void 0,j=await this.getKeyValueStorage().getItem(a.clockDrift)??"0",_e=Number.parseInt(j),et=await this.getKeyValueStorage().getItem(a.signInDetails),tt={accessToken:c,idToken:b,refreshToken:$,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:_e,username:await this.getLastAuthUser()};return et&&(tt.signInDetails=JSON.parse(et)),tt}catch{return null}}async storeTokens(a){assert(a!==void 0,TokenProviderErrorCode.InvalidAuthTokens),await this.clearTokens();const o=a.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),o);const c=await this.getAuthKeys();await this.getKeyValueStorage().setItem(c.accessToken,a.accessToken.toString()),a.idToken&&await this.getKeyValueStorage().setItem(c.idToken,a.idToken.toString()),a.refreshToken&&await this.getKeyValueStorage().setItem(c.refreshToken,a.refreshToken),a.deviceMetadata&&(a.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(c.deviceKey,a.deviceMetadata.deviceKey),a.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(c.deviceGroupKey,a.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(c.randomPasswordKey,a.deviceMetadata.randomPassword)),a.signInDetails&&await this.getKeyValueStorage().setItem(c.signInDetails,JSON.stringify(a.signInDetails)),await this.getKeyValueStorage().setItem(c.clockDrift,`${a.clockDrift}`)}async clearTokens(){const a=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(a.accessToken),this.getKeyValueStorage().removeItem(a.idToken),this.getKeyValueStorage().removeItem(a.clockDrift),this.getKeyValueStorage().removeItem(a.refreshToken),this.getKeyValueStorage().removeItem(a.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(a){const o=await this.getAuthKeys(a),c=await this.getKeyValueStorage().getItem(o.deviceKey),d=await this.getKeyValueStorage().getItem(o.deviceGroupKey),b=await this.getKeyValueStorage().getItem(o.randomPasswordKey);return b?{deviceKey:c??void 0,deviceGroupKey:d??void 0,randomPassword:b}:null}async clearDeviceMetadata(a){const o=await this.getAuthKeys(a);await Promise.all([this.getKeyValueStorage().removeItem(o.deviceKey),this.getKeyValueStorage().removeItem(o.deviceGroupKey),this.getKeyValueStorage().removeItem(o.randomPasswordKey)])}async getAuthKeys(a){var c;assertTokenProviderConfig((c=this.authConfig)==null?void 0:c.Cognito);const o=a??await this.getLastAuthUser();return createKeysForAuthStorage$2(this.name,`${this.authConfig.Cognito.userPoolClientId}.${o}`)}getLastAuthUserKey(){var o;assertTokenProviderConfig((o=this.authConfig)==null?void 0:o.Cognito);const a=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${a}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const createKeysForAuthStorage$2=(s,a)=>getAuthStorageKeys(AuthTokenStorageKeys)(`${s}`,a);function getAuthStorageKeys(s){const a=Object.values({...s});return(o,c)=>a.reduce((d,b)=>({...d,[b]:`${o}.${c}.${b}`}),{})}class TokenOrchestrator{constructor(){this.waitForInflightOAuth=async()=>{}}setAuthConfig(a){this.authConfig=a}setTokenRefresher(a){this.tokenRefresher=a}setAuthTokenStore(a){this.tokenStore=a}setWaitForInflightOAuth(a){this.waitForInflightOAuth=a}getTokenStore(){if(!this.tokenStore)throw new AuthError({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new AuthError({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(a){var $,j,_e,et,tt;let o;try{assertTokenProviderConfig(($=this.authConfig)==null?void 0:$.Cognito)}catch{return null}await this.waitForInflightOAuth(),o=await this.getTokenStore().loadTokens();const c=await this.getTokenStore().getLastAuthUser();if(o===null)return null;const d=!!(o!=null&&o.idToken)&&isTokenExpired({expiresAt:(((_e=(j=o.idToken)==null?void 0:j.payload)==null?void 0:_e.exp)??0)*1e3,clockDrift:o.clockDrift??0}),b=isTokenExpired({expiresAt:(((tt=(et=o.accessToken)==null?void 0:et.payload)==null?void 0:tt.exp)??0)*1e3,clockDrift:o.clockDrift??0});return(a!=null&&a.forceRefresh||d||b)&&(o=await this.refreshTokens({tokens:o,username:c}),o===null)?null:{accessToken:o==null?void 0:o.accessToken,idToken:o==null?void 0:o.idToken,signInDetails:o==null?void 0:o.signInDetails}}async refreshTokens({tokens:a,username:o}){try{const c=await this.getTokenRefresher()({tokens:a,authConfig:this.authConfig,username:o});return await this.setTokens({tokens:c}),Hub.dispatch("auth",{event:"tokenRefresh"},"Auth",AMPLIFY_SYMBOL),c}catch(c){return this.handleErrors(c)}}handleErrors(a){if(assertServiceError(a),a.message!=="Network error"&&this.clearTokens(),a.name.startsWith("NotAuthorizedException"))return null;throw Hub.dispatch("auth",{event:"tokenRefresh_failure"},"Auth",AMPLIFY_SYMBOL),a}async setTokens({tokens:a}){return this.getTokenStore().storeTokens(a)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(a){return this.getTokenStore().getDeviceMetadata(a)}clearDeviceMetadata(a){return this.getTokenStore().clearDeviceMetadata(a)}}class CognitoUserPoolsTokenProviderClass{constructor(){this.authTokenStore=new DefaultTokenStore,this.authTokenStore.setKeyValueStorage(defaultStorage),this.tokenOrchestrator=new TokenOrchestrator,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(refreshAuthTokens)}getTokens({forceRefresh:a}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:a})}setKeyValueStorage(a){this.authTokenStore.setKeyValueStorage(a)}setWaitForInflightOAuth(a){this.tokenOrchestrator.setWaitForInflightOAuth(a)}setAuthConfig(a){this.authTokenStore.setAuthConfig(a),this.tokenOrchestrator.setAuthConfig(a)}}const cognitoUserPoolsTokenProvider=new CognitoUserPoolsTokenProviderClass,tokenOrchestrator=cognitoUserPoolsTokenProvider.tokenOrchestrator;async function cacheCognitoTokens(s){if(s.AccessToken){const a=decodeJWT(s.AccessToken),o=(a.payload.iat||0)*1e3,c=new Date().getTime(),d=o>0?o-c:0;let b,$,j;s.RefreshToken&&($=s.RefreshToken),s.IdToken&&(b=decodeJWT(s.IdToken)),s!=null&&s.NewDeviceMetadata&&(j=s.NewDeviceMetadata);const _e={accessToken:a,idToken:b,refreshToken:$,clockDrift:d,deviceMetadata:j,username:s.username};s!=null&&s.signInDetails&&(_e.signInDetails=s.signInDetails),await tokenOrchestrator.setTokens({tokens:_e})}else throw new AmplifyError({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}async function signInWithCustomAuth(s){var j;const a=(j=Amplify.getConfig().Auth)==null?void 0:j.Cognito;assertTokenProviderConfig(a);const{username:o,password:c,options:d}=s,b={loginId:o,authFlowType:"CUSTOM_WITHOUT_SRP"},$=d==null?void 0:d.clientMetadata;assertValidationError(!!o,AuthValidationErrorCode.EmptySignInUsername),assertValidationError(!c,AuthValidationErrorCode.CustomAuthSignInPassword);try{const{ChallengeName:_e,ChallengeParameters:et,AuthenticationResult:tt,Session:rt}=await retryOnResourceNotFoundException(handleCustomAuthFlowWithoutSRP,[o,$,a,tokenOrchestrator],o,tokenOrchestrator),nt=getActiveSignInUsername(o);return setActiveSignInState({signInSession:rt,username:nt,challengeName:_e,signInDetails:b}),tt?(cleanActiveSignInState(),await cacheCognitoTokens({username:nt,...tt,NewDeviceMetadata:await getNewDeviceMetatada(a.userPoolId,tt.NewDeviceMetadata,tt.AccessToken),signInDetails:b}),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):getSignInResult({challengeName:_e,challengeParameters:et})}catch(_e){cleanActiveSignInState(),assertServiceError(_e);const et=getSignInResultFromError(_e.name);if(et)return et;throw _e}}async function signInWithCustomSRPAuth(s){var j;const{username:a,password:o,options:c}=s,d={loginId:a,authFlowType:"CUSTOM_WITH_SRP"},b=(j=Amplify.getConfig().Auth)==null?void 0:j.Cognito;assertTokenProviderConfig(b);const $=c==null?void 0:c.clientMetadata;assertValidationError(!!a,AuthValidationErrorCode.EmptySignInUsername),assertValidationError(!!o,AuthValidationErrorCode.EmptySignInPassword);try{const{ChallengeName:_e,ChallengeParameters:et,AuthenticationResult:tt,Session:rt}=await handleCustomSRPAuthFlow(a,o,$,b,tokenOrchestrator),nt=getActiveSignInUsername(a);return setActiveSignInState({signInSession:rt,username:nt,challengeName:_e,signInDetails:d}),tt?(await cacheCognitoTokens({username:nt,...tt,NewDeviceMetadata:await getNewDeviceMetatada(b.userPoolId,tt.NewDeviceMetadata,tt.AccessToken),signInDetails:d}),cleanActiveSignInState(),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):getSignInResult({challengeName:_e,challengeParameters:et})}catch(_e){cleanActiveSignInState(),assertServiceError(_e);const et=getSignInResultFromError(_e.name);if(et)return et;throw _e}}async function signInWithSRP(s){var $,j;const{username:a,password:o}=s,c=($=Amplify.getConfig().Auth)==null?void 0:$.Cognito,d={loginId:a,authFlowType:"USER_SRP_AUTH"};assertTokenProviderConfig(c);const b=(j=s.options)==null?void 0:j.clientMetadata;assertValidationError(!!a,AuthValidationErrorCode.EmptySignInUsername),assertValidationError(!!o,AuthValidationErrorCode.EmptySignInPassword);try{const{ChallengeName:_e,ChallengeParameters:et,AuthenticationResult:tt,Session:rt}=await handleUserSRPAuthFlow(a,o,b,c,tokenOrchestrator),nt=getActiveSignInUsername(a);return setActiveSignInState({signInSession:rt,username:nt,challengeName:_e,signInDetails:d}),tt?(cleanActiveSignInState(),await cacheCognitoTokens({username:nt,...tt,NewDeviceMetadata:await getNewDeviceMetatada(c.userPoolId,tt.NewDeviceMetadata,tt.AccessToken),signInDetails:d}),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):getSignInResult({challengeName:_e,challengeParameters:et})}catch(_e){cleanActiveSignInState(),assertServiceError(_e);const et=getSignInResultFromError(_e.name);if(et)return et;throw _e}}async function signInWithUserPassword(s){var j;const{username:a,password:o,options:c}=s,d=(j=Amplify.getConfig().Auth)==null?void 0:j.Cognito,b={loginId:a,authFlowType:"USER_PASSWORD_AUTH"};assertTokenProviderConfig(d);const $=c==null?void 0:c.clientMetadata;assertValidationError(!!a,AuthValidationErrorCode.EmptySignInUsername),assertValidationError(!!o,AuthValidationErrorCode.EmptySignInPassword);try{const{ChallengeName:_e,ChallengeParameters:et,AuthenticationResult:tt,Session:rt}=await retryOnResourceNotFoundException(handleUserPasswordAuthFlow,[a,o,$,d,tokenOrchestrator],a,tokenOrchestrator),nt=getActiveSignInUsername(a);return setActiveSignInState({signInSession:rt,username:nt,challengeName:_e,signInDetails:b}),tt?(await cacheCognitoTokens({...tt,username:nt,NewDeviceMetadata:await getNewDeviceMetatada(d.userPoolId,tt.NewDeviceMetadata,tt.AccessToken),signInDetails:b}),cleanActiveSignInState(),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):getSignInResult({challengeName:_e,challengeParameters:et})}catch(_e){cleanActiveSignInState(),assertServiceError(_e);const et=getSignInResultFromError(_e.name);if(et)return et;throw _e}}async function signIn(s){var o;const a=(o=s.options)==null?void 0:o.authFlowType;switch(await assertUserNotAuthenticated(),a){case"USER_SRP_AUTH":return signInWithSRP(s);case"USER_PASSWORD_AUTH":return signInWithUserPassword(s);case"CUSTOM_WITHOUT_SRP":return signInWithCustomAuth(s);case"CUSTOM_WITH_SRP":return signInWithCustomSRPAuth(s);default:return signInWithSRP(s)}}const initialAutoSignIn=async()=>{throw new AuthError({name:AUTO_SIGN_IN_EXCEPTION,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let autoSignIn=initialAutoSignIn;function setAutoSignIn(s){autoSignIn=s}function resetAutoSignIn(){autoSignIn=initialAutoSignIn}const MAX_AUTOSIGNIN_POLLING_MS=3*60*1e3;function handleCodeAutoSignIn(s){const a=HubInternal.listen("auth-internal",async({payload:c})=>{switch(c.event){case"confirmSignUp":{const d=c.data;d!=null&&d.isSignUpComplete&&(HubInternal.dispatch("auth-internal",{event:"autoSignIn"}),setAutoSignIn(autoSignInWithCode(s)),a())}}}),o=setTimeout(()=>{a(),setAutoSignInStarted(!1),clearTimeout(o),resetAutoSignIn()},MAX_AUTOSIGNIN_POLLING_MS)}function debounce(s,a){let o;return function(c){o||s(...c),clearTimeout(o),o=setTimeout(()=>{o=void 0},a)}}function handleAutoSignInWithLink(s,a,o){const c=Date.now(),d=setInterval(async()=>{if(Date.now()-c>MAX_AUTOSIGNIN_POLLING_MS){clearInterval(d),setAutoSignInStarted(!1),o(new AuthError({name:AUTO_SIGN_IN_EXCEPTION,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),resetAutoSignIn();return}else try{const j=await signIn(s);if(j.nextStep.signInStep!=="CONFIRM_SIGN_UP"){a(j),clearInterval(d),setAutoSignInStarted(!1),resetAutoSignIn();return}}catch(j){clearInterval(d),setAutoSignInStarted(!1),o(j),resetAutoSignIn()}},5e3)}const debouncedAutoSignInWithLink=debounce(handleAutoSignInWithLink,300),debouncedAutoSignWithCodeOrUserConfirmed=debounce(handleAutoSignInWithCodeOrUserConfirmed,300);let autoSignInStarted=!1,usernameUsedForAutoSignIn;function setUsernameUsedForAutoSignIn(s){usernameUsedForAutoSignIn=s}function isAutoSignInUserUsingConfirmSignUp(s){return usernameUsedForAutoSignIn===s}function isAutoSignInStarted(){return autoSignInStarted}function setAutoSignInStarted(s){s===!1&&setUsernameUsedForAutoSignIn(void 0),autoSignInStarted=s}function isSignUpComplete(s){return!!s.UserConfirmed}function autoSignInWhenUserIsConfirmedWithLink(s){return async()=>new Promise(async(a,o)=>{debouncedAutoSignInWithLink([s,a,o])})}async function handleAutoSignInWithCodeOrUserConfirmed(s,a,o){try{const c=await signIn(s);a(c),resetAutoSignIn()}catch(c){o(c),resetAutoSignIn()}}function autoSignInWithCode(s){return async()=>new Promise(async(a,o)=>{debouncedAutoSignWithCodeOrUserConfirmed([s,a,o])})}const autoSignInUserConfirmed=autoSignInWithCode;async function signUp(s){var at;const{username:a,password:o,options:c}=s,d=(at=Amplify.getConfig().Auth)==null?void 0:at.Cognito,b=(d==null?void 0:d.signUpVerificationMethod)??"code",{clientMetadata:$,validationData:j,autoSignIn:_e}=s.options??{};assertTokenProviderConfig(d),assertValidationError(!!a,AuthValidationErrorCode.EmptySignUpUsername),assertValidationError(!!o,AuthValidationErrorCode.EmptySignUpPassword);const et=typeof _e!="boolean"?_e:void 0,tt={username:a,options:et};(et==null?void 0:et.authFlowType)!=="CUSTOM_WITHOUT_SRP"&&(tt.password=o),(et||_e===!0)&&(setUsernameUsedForAutoSignIn(a),setAutoSignInStarted(!0));const rt=await signUp$1({region:getRegion(d.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.SignUp)},{Username:a,Password:o,UserAttributes:(c==null?void 0:c.userAttributes)&&toAttributeType(c==null?void 0:c.userAttributes),ClientMetadata:$,ValidationData:j&&toAttributeType(j),ClientId:d.userPoolClientId}),{UserSub:nt,CodeDeliveryDetails:it}=rt;if(isSignUpComplete(rt)&&isAutoSignInStarted())return setAutoSignIn(autoSignInUserConfirmed(tt)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}};if(isSignUpComplete(rt)&&!isAutoSignInStarted())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!isSignUpComplete(rt)&&isAutoSignInStarted()&&b==="code")handleCodeAutoSignIn(tt);else if(!isSignUpComplete(rt)&&isAutoSignInStarted()&&b==="link")return setAutoSignIn(autoSignInWhenUserIsConfirmedWithLink(tt)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:it==null?void 0:it.DeliveryMedium,destination:it==null?void 0:it.Destination,attributeName:it==null?void 0:it.AttributeName}},userId:nt};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:it==null?void 0:it.DeliveryMedium,destination:it==null?void 0:it.Destination,attributeName:it==null?void 0:it.AttributeName}},userId:nt}}async function resetPassword(s){var et,tt;const a=s.username;assertValidationError(!!a,AuthValidationErrorCode.EmptyResetPasswordUsername);const o=(et=Amplify.getConfig().Auth)==null?void 0:et.Cognito;assertTokenProviderConfig(o);const{userPoolClientId:c,userPoolId:d}=o,b=(tt=s.options)==null?void 0:tt.clientMetadata,$=getUserContextData({username:a,userPoolId:d,userPoolClientId:c}),_e=(await forgotPassword({region:getRegion(o.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.ResetPassword)},{Username:a,ClientMetadata:b,ClientId:o.userPoolClientId,UserContextData:$})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:_e==null?void 0:_e.DeliveryMedium,destination:_e==null?void 0:_e.Destination,attributeName:_e==null?void 0:_e.AttributeName}}}}async function confirmResetPassword(s){var et,tt;const a=(et=Amplify.getConfig().Auth)==null?void 0:et.Cognito;assertTokenProviderConfig(a);const{userPoolClientId:o,userPoolId:c}=a,{username:d,newPassword:b}=s;assertValidationError(!!d,AuthValidationErrorCode.EmptyConfirmResetPasswordUsername),assertValidationError(!!b,AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword);const $=s.confirmationCode;assertValidationError(!!$,AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode);const j=(tt=s.options)==null?void 0:tt.clientMetadata,_e=getUserContextData({username:d,userPoolId:c,userPoolClientId:o});await confirmForgotPassword({region:getRegion(a.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmResetPassword)},{Username:d,ConfirmationCode:$,Password:b,ClientMetadata:j,ClientId:a.userPoolClientId,UserContextData:_e})}async function resendSignUpCode(s){var rt,nt;const a=s.username;assertValidationError(!!a,AuthValidationErrorCode.EmptySignUpUsername);const o=(rt=Amplify.getConfig().Auth)==null?void 0:rt.Cognito;assertTokenProviderConfig(o);const{userPoolClientId:c,userPoolId:d}=o,b=(nt=s.options)==null?void 0:nt.clientMetadata,$=getUserContextData({username:a,userPoolId:d,userPoolClientId:c}),{CodeDeliveryDetails:j}=await resendConfirmationCode({region:getRegion(o.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.ResendSignUpCode)},{Username:a,ClientMetadata:b,ClientId:o.userPoolClientId,UserContextData:$}),{DeliveryMedium:_e,AttributeName:et,Destination:tt}={...j};return{destination:tt,deliveryMedium:_e,attributeName:et||void 0}}async function confirmSignUp(s){var et;const{username:a,confirmationCode:o,options:c}=s,d=(et=Amplify.getConfig().Auth)==null?void 0:et.Cognito;assertTokenProviderConfig(d);const{userPoolId:b,userPoolClientId:$}=d,j=c==null?void 0:c.clientMetadata;assertValidationError(!!a,AuthValidationErrorCode.EmptyConfirmSignUpUsername),assertValidationError(!!o,AuthValidationErrorCode.EmptyConfirmSignUpCode);const _e=getUserContextData({username:a,userPoolId:b,userPoolClientId:$});return await confirmSignUp$1({region:getRegion(d.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmSignUp)},{Username:a,ConfirmationCode:o,ClientMetadata:j,ForceAliasCreation:c==null?void 0:c.forceAliasCreation,ClientId:d.userPoolClientId,UserContextData:_e}),new Promise((tt,rt)=>{try{const nt={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!isAutoSignInStarted()||!isAutoSignInUserUsingConfirmSignUp(a))return tt(nt);const it=HubInternal.listen("auth-internal",({payload:at})=>{switch(at.event){case"autoSignIn":tt({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),setAutoSignInStarted(!1),it()}});HubInternal.dispatch("auth-internal",{event:"confirmSignUp",data:nt})}catch(nt){rt(nt)}})}async function confirmSignIn(s){var et;const{challengeResponse:a,options:o}=s,{username:c,challengeName:d,signInSession:b,signInDetails:$}=signInStore.getState(),j=(et=Amplify.getConfig().Auth)==null?void 0:et.Cognito;assertTokenProviderConfig(j);const _e=o==null?void 0:o.clientMetadata;if(assertValidationError(!!a,AuthValidationErrorCode.EmptyChallengeResponse),!c||!d||!b)throw new AuthError({name:AuthErrorCodes.SignInException,message:`
			An error occurred during the sign in process. 
			
			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the page is not refreshed until the sign in process is done."});try{const{Session:tt,ChallengeName:rt,AuthenticationResult:nt,ChallengeParameters:it}=await handleChallengeName(c,d,b,a,j,tokenOrchestrator,_e,o);return setActiveSignInState({signInSession:tt,username:c,challengeName:rt,signInDetails:$}),nt?(cleanActiveSignInState(),await cacheCognitoTokens({username:c,...nt,NewDeviceMetadata:await getNewDeviceMetatada(j.userPoolId,nt.NewDeviceMetadata,nt.AccessToken),signInDetails:$}),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):getSignInResult({challengeName:rt,challengeParameters:it})}catch(tt){assertServiceError(tt);const rt=getSignInResultFromError(tt.name);if(rt)return rt;throw tt}}async function confirmUserAttribute(s){var b;const a=(b=Amplify.getConfig().Auth)==null?void 0:b.Cognito;assertTokenProviderConfig(a);const{confirmationCode:o,userAttributeKey:c}=s;assertValidationError(!!o,AuthValidationErrorCode.EmptyConfirmUserAttributeCode);const{tokens:d}=await fetchAuthSession({forceRefresh:!1});assertAuthTokens(d),await verifyUserAttribute({region:getRegion(a.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.ConfirmUserAttribute)},{AccessToken:d.accessToken.toString(),AttributeName:c,Code:o})}const cognitoHostedUIIdentityProviderMap={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"},V5_HOSTED_UI_KEY="amplify-signin-with-hostedUI",name="CognitoIdentityServiceProvider";class DefaultOAuthStore{constructor(a){this.keyValueStorage=a}async clearOAuthInflightData(){assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(a.inflightOAuth),this.keyValueStorage.removeItem(a.oauthPKCE),this.keyValueStorage.removeItem(a.oauthState)])}async clearOAuthData(){assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(V5_HOSTED_UI_KEY),this.keyValueStorage.removeItem(a.oauthSignIn)}loadOAuthState(){assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(a.oauthState)}storeOAuthState(a){assertTokenProviderConfig(this.cognitoConfig);const o=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(o.oauthState,a)}loadPKCE(){assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(a.oauthPKCE)}storePKCE(a){assertTokenProviderConfig(this.cognitoConfig);const o=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(o.oauthPKCE,a)}setAuthConfig(a){this.cognitoConfig=a}async loadOAuthInFlight(){assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(a.inflightOAuth)==="true"}async storeOAuthInFlight(a){assertTokenProviderConfig(this.cognitoConfig);const o=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(o.inflightOAuth,`${a}`)}async loadOAuthSignIn(){var b;assertTokenProviderConfig(this.cognitoConfig);const a=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId),o=await this.keyValueStorage.getItem(V5_HOSTED_UI_KEY),[c,d]=((b=await this.keyValueStorage.getItem(a.oauthSignIn))==null?void 0:b.split(","))??[];return{isOAuthSignIn:c==="true"||o==="true",preferPrivateSession:d==="true"}}async storeOAuthSignIn(a,o=!1){assertTokenProviderConfig(this.cognitoConfig);const c=createKeysForAuthStorage$1(name,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(c.oauthSignIn,`${a},${o}`)}}const createKeysForAuthStorage$1=(s,a)=>getAuthStorageKeys(OAuthStorageKeys)(s,a);var CognitoHostedUIIdentityProvider;(function(s){s.Cognito="COGNITO",s.Google="Google",s.Facebook="Facebook",s.Amazon="LoginWithAmazon",s.Apple="SignInWithApple"})(CognitoHostedUIIdentityProvider||(CognitoHostedUIIdentityProvider={}));var AuthErrorTypes;(function(s){s.NoConfig="noConfig",s.MissingAuthConfig="missingAuthConfig",s.EmptyUsername="emptyUsername",s.InvalidUsername="invalidUsername",s.EmptyPassword="emptyPassword",s.EmptyCode="emptyCode",s.SignUpError="signUpError",s.NoMFA="noMFA",s.InvalidMFA="invalidMFA",s.EmptyChallengeResponse="emptyChallengeResponse",s.NoUserSession="noUserSession",s.Default="default",s.DeviceConfig="deviceConfig",s.NetworkError="networkError",s.AutoSignInError="autoSignInError",s.OAuthSignInError="oauthSignInError"})(AuthErrorTypes||(AuthErrorTypes={}));var GRAPHQL_AUTH_MODE;(function(s){s.API_KEY="API_KEY",s.AWS_IAM="AWS_IAM",s.OPENID_CONNECT="OPENID_CONNECT",s.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",s.AWS_LAMBDA="AWS_LAMBDA"})(GRAPHQL_AUTH_MODE||(GRAPHQL_AUTH_MODE={}));new ConsoleLogger("AuthError");const authErrorMessages={oauthSignInError:{message:AuthErrorStrings.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:AuthErrorStrings.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:AuthErrorStrings.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:AuthErrorStrings.EMPTY_USERNAME},invalidUsername:{message:AuthErrorStrings.INVALID_USERNAME},emptyPassword:{message:AuthErrorStrings.EMPTY_PASSWORD},emptyCode:{message:AuthErrorStrings.EMPTY_CODE},signUpError:{message:AuthErrorStrings.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:AuthErrorStrings.NO_MFA},invalidMFA:{message:AuthErrorStrings.INVALID_MFA},emptyChallengeResponse:{message:AuthErrorStrings.EMPTY_CHALLENGE},noUserSession:{message:AuthErrorStrings.NO_USER_SESSION},deviceConfig:{message:AuthErrorStrings.DEVICE_CONFIG},networkError:{message:AuthErrorStrings.NETWORK_ERROR},autoSignInError:{message:AuthErrorStrings.AUTOSIGNIN_ERROR},default:{message:AuthErrorStrings.DEFAULT_MSG}},openAuthSession=async s=>{window!=null&&window.location&&(window.location.href=s.replace("http://","https://"))},CODE_VERIFIER_CHARSET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",generateCodeVerifier=s=>{const a=new Uint8Array(s);getCrypto().getRandomValues(a);let o="",c;for(let d of a)o+=CODE_VERIFIER_CHARSET.charAt(d%CODE_VERIFIER_CHARSET.length);return{value:o,method:"S256",toCodeChallenge(){return c||(c=generateCodeChallenge(o),c)}}};function generateCodeChallenge(s){const a=new Sha256;return a.update(s),removePaddingChar(base64Encoder.convert(a.digestSync(),{urlSafe:!0}))}function removePaddingChar(s){return s.replace(/=/g,"")}const generateState=()=>generateRandomString(32);function getRedirectUrl(s){const a=(s==null?void 0:s.find(isSameOriginAndPathName))??(s==null?void 0:s.find(isTheSameDomain)),o=(s==null?void 0:s.find(isHttps))??(s==null?void 0:s.find(isHttp));if(a)return a;throw o?invalidOriginException:invalidRedirectException}const isSameOriginAndPathName=s=>s.startsWith(String(window.location.origin+window.location.pathname)),isTheSameDomain=s=>s.includes(String(window.location.hostname)),isHttp=s=>s.startsWith("http://"),isHttps=s=>s.startsWith("https://");async function signInWithRedirect(s){var c,d,b;const a=(c=Amplify.getConfig().Auth)==null?void 0:c.Cognito;assertTokenProviderConfig(a),assertOAuthConfig(a),store.setAuthConfig(a),await assertUserNotAuthenticated();let o="COGNITO";return typeof(s==null?void 0:s.provider)=="string"?o=cognitoHostedUIIdentityProviderMap[s.provider]:(d=s==null?void 0:s.provider)!=null&&d.custom&&(o=s.provider.custom),oauthSignIn({oauthConfig:a.loginWith.oauth,clientId:a.userPoolClientId,provider:o,customState:s==null?void 0:s.customState,preferPrivateSession:(b=s==null?void 0:s.options)==null?void 0:b.preferPrivateSession})}const store=new DefaultOAuthStore(defaultStorage);async function oauthSignIn({oauthConfig:s,provider:a,clientId:o,customState:c,preferPrivateSession:d}){const{domain:b,redirectSignIn:$,responseType:j,scopes:_e}=s,et=generateState(),tt=c?`${et}-${urlSafeEncode(c)}`:et,{value:rt,method:nt,toCodeChallenge:it}=generateCodeVerifier(128);store.storeOAuthInFlight(!0),store.storeOAuthState(tt),store.storePKCE(rt);const at=Object.entries({redirect_uri:getRedirectUrl(s.redirectSignIn),response_type:j,client_id:o,identity_provider:a,scope:_e.join(" "),state:tt,...j==="code"&&{code_challenge:it(),code_challenge_method:nt}}).map(([dt,ft])=>`${encodeURIComponent(dt)}=${encodeURIComponent(ft)}`).join("&"),ct=`https://${b}/oauth2/authorize?${at}`,{type:st,error:ot,url:ht}=await openAuthSession(ct)??{};st==="success"&&ht&&await handleAuthResponse({currentUrl:ht,clientId:o,domain:b,redirectUri:$[0],responseType:j,userAgentValue:getAuthUserAgentValue(AuthAction.SignInWithRedirect),preferPrivateSession:d}),st==="error"&&handleFailure(String(ot))}async function handleCodeFlow({currentUrl:s,userAgentValue:a,clientId:o,redirectUri:c,domain:d,preferPrivateSession:b}){const $=new AmplifyUrl(s);let j;try{j=await validateStateFromURL($)}catch{invokeAndClearPromise(),await store.clearOAuthInflightData();return}const _e=$.searchParams.get("code");if(!_e){await store.clearOAuthData(),invokeAndClearPromise();return}const et="https://"+d+"/oauth2/token",tt=await store.loadPKCE(),rt={grant_type:"authorization_code",code:_e,client_id:o,redirect_uri:c,...tt?{code_verifier:tt}:{}},nt=Object.entries(rt).map(([ft,mt])=>`${encodeURIComponent(ft)}=${encodeURIComponent(mt)}`).join("&"),{access_token:it,refresh_token:at,id_token:ct,error:st,token_type:ot,expires_in:ht}=await(await fetch(et,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[USER_AGENT_HEADER]:a},body:nt})).json();st&&(invokeAndClearPromise(),handleFailure(st)),await store.clearOAuthInflightData();const dt=(it&&decodeJWT(it).payload.username)??"username";return await cacheCognitoTokens({username:dt,AccessToken:it,IdToken:ct,RefreshToken:at,TokenType:ot,ExpiresIn:ht}),completeFlow({redirectUri:c,state:j,preferPrivateSession:b})}async function handleImplicitFlow({currentUrl:s,redirectUri:a,preferPrivateSession:o}){const c=new AmplifyUrl(s),{id_token:d,access_token:b,state:$,token_type:j,expires_in:_e}=(c.hash??"#").substring(1).split("&").map(tt=>tt.split("=")).reduce((tt,[rt,nt])=>({...tt,[rt]:nt}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0});if(!b){await store.clearOAuthData(),invokeAndClearPromise();return}try{validateState($)}catch{invokeAndClearPromise();return}const et=(b&&decodeJWT(b).payload.username)??"username";return await cacheCognitoTokens({username:et,AccessToken:b,IdToken:d,TokenType:j,ExpiresIn:_e}),completeFlow({redirectUri:a,state:$,preferPrivateSession:o})}async function completeFlow({redirectUri:s,state:a,preferPrivateSession:o}){await store.clearOAuthData(),await store.storeOAuthSignIn(!0,o),isCustomState(a)&&Hub.dispatch("auth",{event:"customOAuthState",data:urlSafeDecode(getCustomState(a))},"Auth",AMPLIFY_SYMBOL),Hub.dispatch("auth",{event:"signInWithRedirect"},"Auth",AMPLIFY_SYMBOL),Hub.dispatch("auth",{event:"signedIn",data:await getCurrentUser()},"Auth",AMPLIFY_SYMBOL),clearHistory(s),invokeAndClearPromise()}async function handleAuthResponse({currentUrl:s,userAgentValue:a,clientId:o,redirectUri:c,responseType:d,domain:b,preferPrivateSession:$}){try{const j=new AmplifyUrl(s),_e=j.searchParams.get("error"),et=j.searchParams.get("error_description");return _e&&handleFailure(et),d==="code"?await handleCodeFlow({currentUrl:s,userAgentValue:a,clientId:o,redirectUri:c,domain:b,preferPrivateSession:$}):await handleImplicitFlow({currentUrl:s,redirectUri:c,preferPrivateSession:$})}catch(j){throw j}}async function validateStateFromURL(s){const a=s.searchParams.get("state");return validateState(a),a}function validateState(s){let a;if(store.loadOAuthState().then(o=>{a=o}),a&&s&&a!==s)throw new AuthError({name:AuthErrorTypes.OAuthSignInError,message:"An error occurred while validating the state",recoverySuggestion:"Try to initiate an OAuth flow from Amplify"})}function handleFailure(s){throw Hub.dispatch("auth",{event:"signInWithRedirect_failure"},"Auth",AMPLIFY_SYMBOL),new AuthError({message:s??"",name:AuthErrorCodes.OAuthSignInError,recoverySuggestion:authErrorMessages.oauthSignInError.log})}async function parseRedirectURL(){var a;const s=(a=Amplify.getConfig().Auth)==null?void 0:a.Cognito;try{assertTokenProviderConfig(s),store.setAuthConfig(s)}catch{return}if(await store.loadOAuthInFlight()){try{assertOAuthConfig(s)}catch{return}try{const o=window.location.href,{loginWith:c,userPoolClientId:d}=s,{domain:b,redirectSignIn:$,responseType:j}=c.oauth;handleAuthResponse({currentUrl:o,clientId:d,domain:b,redirectUri:$[0],responseType:j,userAgentValue:getAuthUserAgentValue(AuthAction.SignInWithRedirect)})}catch{}}}function urlListener(){parseRedirectURL(),Hub.listen("core",s=>{s.payload.event==="configure"&&parseRedirectURL()})}isBrowser$1()&&urlListener();let inflightPromiseResolvers=[];const invokeAndClearPromise=()=>{for(const s of inflightPromiseResolvers)s();inflightPromiseResolvers=[]};isBrowser$1()&&cognitoUserPoolsTokenProvider.setWaitForInflightOAuth(()=>new Promise(async(s,a)=>{await store.loadOAuthInFlight()?inflightPromiseResolvers.push(s):s()}));function clearHistory(s){typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState({},"",s)}function isCustomState(s){return/-/.test(s)}function getCustomState(s){return s.split("-").splice(1).join("-")}const fetchUserAttributes$1=async s=>{var d;const a=(d=s.getConfig().Auth)==null?void 0:d.Cognito;assertTokenProviderConfig(a);const{tokens:o}=await fetchAuthSession$1(s,{forceRefresh:!1});assertAuthTokens(o);const{UserAttributes:c}=await getUser({region:getRegion(a.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.FetchUserAttributes)},{AccessToken:o.accessToken.toString()});return toAuthUserAttribute(c)},fetchUserAttributes=()=>fetchUserAttributes$1(Amplify),completeOAuthSignOut=async s=>{await s.clearOAuthData(),tokenOrchestrator.clearTokens(),await clearCredentials(),Hub.dispatch("auth",{event:"signedOut"},"Auth",AMPLIFY_SYMBOL)},oAuthSignOutRedirect=async(s,a=!1)=>{assertOAuthConfig(s);const{loginWith:o,userPoolClientId:c}=s,{domain:d,redirectSignOut:b}=o.oauth,$=getRedirectUrl(b),j=`https://${d}/logout?${Object.entries({client_id:c,logout_uri:encodeURIComponent($)}).map(([_e,et])=>`${_e}=${et}`).join("&")}`;return openAuthSession(j)},handleOAuthSignOut=async(s,a)=>{const{isOAuthSignIn:o}=await a.loadOAuthSignIn();if(await completeOAuthSignOut(a),o)return oAuthSignOutRedirect(s)},logger$4=new ConsoleLogger("Auth");async function signOut(s){var c;const a=(c=Amplify.getConfig().Auth)==null?void 0:c.Cognito;assertTokenProviderConfig(a),s!=null&&s.global?await globalSignOut(a):await clientSignOut(a);let o;try{assertOAuthConfig(a),o=!0}catch{o=!1}if(o){const d=new DefaultOAuthStore(defaultStorage);d.setAuthConfig(a);const{type:b}=await handleOAuthSignOut(a,d)??{};if(b==="error")throw new AuthError({name:OAUTH_SIGNOUT_EXCEPTION,message:"An error occurred when attempting to log out from OAuth provider."})}else tokenOrchestrator.clearTokens(),await clearCredentials(),Hub.dispatch("auth",{event:"signedOut"},"Auth",AMPLIFY_SYMBOL)}async function clientSignOut(s){try{const a=await tokenOrchestrator.getTokenStore().loadTokens();assertAuthTokensWithRefreshToken(a),isSessionRevocable(a.accessToken)&&await revokeToken({region:getRegion(s.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.SignOut)},{ClientId:s.userPoolClientId,Token:a.refreshToken})}catch{logger$4.debug("Client signOut error caught but will proceed with token removal")}}async function globalSignOut(s){try{const a=await tokenOrchestrator.getTokenStore().loadTokens();assertAuthTokens(a),await globalSignOut$1({region:getRegion(s.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.SignOut)},{AccessToken:a.accessToken.toString()})}catch{logger$4.debug("Global signOut error caught but will proceed with token removal")}}const isSessionRevocable=s=>{var a;return!!((a=s==null?void 0:s.payload)!=null&&a.origin_jti)},sendUserAttributeVerificationCode=async s=>{var tt;const{userAttributeKey:a,options:o}=s,c=(tt=Amplify.getConfig().Auth)==null?void 0:tt.Cognito,d=o==null?void 0:o.clientMetadata;assertTokenProviderConfig(c);const{tokens:b}=await fetchAuthSession({forceRefresh:!1});assertAuthTokens(b);const{CodeDeliveryDetails:$}=await getUserAttributeVerificationCode({region:getRegion(c.userPoolId),userAgentValue:getAuthUserAgentValue(AuthAction.SendUserAttributeVerificationCode)},{AccessToken:b.accessToken.toString(),ClientMetadata:d,AttributeName:a}),{DeliveryMedium:j,AttributeName:_e,Destination:et}={...$};return{destination:et,deliveryMedium:j,attributeName:_e}},IdentityIdStorageKeys={identityId:"identityId"},logger$3=new ConsoleLogger("DefaultIdentityIdStore");class DefaultIdentityIdStore{setAuthConfig(a){assertIdentityPoolIdConfig(a.Cognito),this.authConfig=a,this._authKeys=createKeysForAuthStorage("Cognito",a.Cognito.identityPoolId)}constructor(a){this._authKeys={},this.keyValueStorage=a}async loadIdentityId(){var a;assertIdentityPoolIdConfig((a=this.authConfig)==null?void 0:a.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const o=await this.keyValueStorage.getItem(this._authKeys.identityId);return o?{id:o,type:"guest"}:null}}catch(o){return logger$3.log("Error getting stored IdentityId.",o),null}}async storeIdentityId(a){var o;assertIdentityPoolIdConfig((o=this.authConfig)==null?void 0:o.Cognito),a.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,a.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=a.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const createKeysForAuthStorage=(s,a)=>getAuthStorageKeys(IdentityIdStorageKeys)(`com.amplify.${s}`,a);function formLoginsMap(s){const a=decodeJWT(s).payload.iss,o={};if(!a)throw new AuthError({name:"InvalidIdTokenException",message:"Invalid Idtoken."});let c=a.replace(/(^\w+:|^)\/\//,"");return o[c]=s,o}const logger$2=new ConsoleLogger("CognitoIdentityIdProvider");async function cognitoIdentityIdProvider({tokens:s,authConfig:a,identityIdStore:o}){o.setAuthConfig({Cognito:a});let c=await o.loadIdentityId();if(s){if(c&&c.type==="primary")return c.id;{const d=s.idToken?formLoginsMap(s.idToken.toString()):{},b=await generateIdentityId(d,a);c&&c.id===b&&logger$2.debug(`The guest identity ${c.id} has become the primary identity.`),c={id:b,type:"primary"}}}else{if(c&&c.type==="guest")return c.id;c={id:await generateIdentityId({},a),type:"guest"}}return o.storeIdentityId(c),c.id}async function generateIdentityId(s,a){const o=a==null?void 0:a.identityPoolId,c=getRegionFromIdentityPoolId(o),d=(await getId({region:c},{IdentityPoolId:o,Logins:s})).IdentityId;if(!d)throw new AuthError({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return d}const logger$1=new ConsoleLogger("CognitoCredentialsProvider"),CREDENTIALS_TTL=50*60*1e3;class CognitoAWSCredentialsAndIdentityIdProvider{constructor(a){this._nextCredentialsRefresh=0,this._identityIdStore=a}async clearCredentialsAndIdentityId(){logger$1.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){logger$1.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(a){const o=a.authenticated,c=a.tokens,d=a.authConfig;try{assertIdentityPoolIdConfig(d==null?void 0:d.Cognito)}catch{return}if(!o&&!d.Cognito.allowGuestAccess)return;const b=a.forceRefresh,$=this.hasTokenChanged(c),j=await cognitoIdentityIdProvider({tokens:c,authConfig:d.Cognito,identityIdStore:this._identityIdStore});return(b||$)&&this.clearCredentials(),o?(assertIdTokenInAuthTokens(c),this.credsForOIDCTokens(d.Cognito,c,j)):this.getGuestCredentials(j,d.Cognito)}async getGuestCredentials(a,o){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return logger$1.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const c=getRegionFromIdentityPoolId(o.identityPoolId),d=await getCredentialsForIdentity({region:c},{IdentityId:a});if(d.Credentials&&d.Credentials.AccessKeyId&&d.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+CREDENTIALS_TTL;const b={credentials:{accessKeyId:d.Credentials.AccessKeyId,secretAccessKey:d.Credentials.SecretKey,sessionToken:d.Credentials.SessionToken,expiration:d.Credentials.Expiration},identityId:a},$=d.IdentityId;return $&&(b.identityId=$,this._identityIdStore.storeIdentityId({id:$,type:"guest"})),this._credentialsAndIdentityId={...b,isAuthenticatedCreds:!1},b}else throw new AuthError({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(a,o,c){var j;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return logger$1.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const d=o.idToken?formLoginsMap(o.idToken.toString()):{},b=getRegionFromIdentityPoolId(a.identityPoolId),$=await getCredentialsForIdentity({region:b},{IdentityId:c,Logins:d});if($.Credentials&&$.Credentials.AccessKeyId&&$.Credentials.SecretKey){const _e={credentials:{accessKeyId:$.Credentials.AccessKeyId,secretAccessKey:$.Credentials.SecretKey,sessionToken:$.Credentials.SessionToken,expiration:$.Credentials.Expiration},identityId:c};this._credentialsAndIdentityId={..._e,isAuthenticatedCreds:!0,associatedIdToken:(j=o.idToken)==null?void 0:j.toString()},this._nextCredentialsRefresh=new Date().getTime()+CREDENTIALS_TTL;const et=$.IdentityId;return et&&(_e.identityId=et,this._identityIdStore.storeIdentityId({id:et,type:"primary"})),_e}else throw new AuthError({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(a){var o,c;return!!a&&!!((o=this._credentialsAndIdentityId)!=null&&o.associatedIdToken)&&((c=a.idToken)==null?void 0:c.toString())!==this._credentialsAndIdentityId.associatedIdToken}}function SaveButton(s){const[a,o]=reactExports.useState(!1),c=useQueryClient(),d=useMutation(saveDonut,{onSuccess:async()=>{c.invalidateQueries(["donutList"])}});async function b(){const $=await fetchAuthSession(),j={glaze:s.selectedGlaze.id,base:s.selectedBase.id,gold:s.withGold,token:$.tokens.idToken.toString()};d.mutate(j),o(!0),setTimeout(()=>{o(!1)},2e3)}return d.isError?jsx("div",{className:"mt-3",children:"Whoops! Your donut can't be saved, try refreshing the page!"}):d.isLoading?jsx("button",{className:"mt-3 ml-3 p-3 text-xl bg-[#eeebe1] rounded-full",children:"Saving..."}):jsx(Fragment,{children:a?jsx("button",{className:"mt-8 ml-3 p-3 text-xl bg-[#e5e0cb] hover:bg-[#eeebe1] rounded-full",children:"Success!"}):jsx("button",{className:"mt-8 ml-3 p-3 text-xl px-7 bg-[#e5e0cb] hover:bg-[#eeebe1] rounded-full",onClick:b,children:"Save donut"})})}function Nav(s){const{isAuthenticated:a,updateAuthentication:o}=s;async function c(){try{await signOut(),o(!1)}catch(d){console.log("error signing out: ",d)}}return jsx(Fragment,{children:jsxs("nav",{className:"fixed top-0 mx-auto w-full h-13 flex justify-between items-center bg-[#FFFBF5] z-10",children:[jsxs("div",{className:"flex items-center",children:[jsx(Link,{to:"/",children:jsx("img",{className:"w-14 m-4 animate-spin",src:"/images/brand.png",alt:"nav-brand-donut"})}),jsx(Link,{to:"/",children:jsx("button",{className:"ml-1 text-2xl hover:underline nav",children:"Tiff's Donuts"})})]}),a?jsxs("div",{className:"flex items-center",children:[jsx(Link,{to:"/me",children:jsx("button",{className:"mr-11 text-[#444140]  hover:underline text-xl nav",children:"View your donuts"})}),jsx("button",{className:"mr-11 text-[#f0a122]  hover:underline text-xl nav",onClick:c,children:"Logout"})]}):jsx(Link,{to:"/auth",children:jsx("button",{className:"mr-11 text-[#E96B5E]  hover:underline text-xl nav",children:"Login"})})]})})}const defaultBase={id:1,name:"Original",color:"#e5e0cb"},defaultGlaze={id:2,name:"Strawberry",color:"#f57f8e",price:9};function Interfaces(s){const a=reactExports.useRef(null),o=reactExports.useRef(null),{updateGlaze:c,updateBase:d,updateTexture:b}=s,[$]=useSearchParams(),[j,_e]=reactExports.useState(defaultBase),[et,tt]=reactExports.useState(defaultGlaze),[rt,nt]=reactExports.useState(!1),[it,at]=reactExports.useState(!1),ct=useLoader(TextureLoader,"gold.jpg"),[st,ot]=reactExports.useState();reactExports.useEffect(()=>{ht()},[]);async function ht(){try{await fetchAuthSession(),ot(!0)}catch{ot(!1)}}function dt(St){ot(St)}function ft(St){if(rt)return at(!0);_e(St),d(St.color)}function mt(St){if(rt)return at(!0);tt(St),c(St.color)}function gt(){c("#FFFFFF"),d("#FFFFFF"),b(ct),nt(!0)}function vt(){d(j.color),c(et.color),b(""),nt(!1),at(!1)}reactExports.useEffect(()=>{const St=async()=>{const Ct=$.get("glaze"),wt=$.get("base");if(Ct){const _t=await fetchGlaze(Number(Ct));_t&&mt(_t)}if(wt){const _t=await fetchBase(Number(wt));_t&&ft(_t)}};try{St()}catch{alert("Could not set donut values")}},[]);function yt(St,Ct){var wt;St.preventDefault(),(wt=Ct.current)==null||wt.scrollIntoView({behavior:"smooth",block:"start"})}function Et(){}return jsxs(Fragment,{children:[jsx("div",{ref:a,children:jsx(Nav,{isAuthenticated:st,updateAuthentication:dt})}),jsxs("div",{className:"flex flex-col items-end w-screen ",children:[jsxs("section",{id:"hero",className:"h-screen w-screen mr-10 p-8 max-w-screen-2xl mx-auto flex flex-col justify-center items-end",children:[jsx(DonutForm,{selectedBase:j,selectedGlaze:et,changeBase:ft,changeGlaze:mt}),jsx("div",{className:"block mt-4 ",children:it?jsx("p",{children:"Please remove gold coat first to change glaze and base"}):null}),jsxs("div",{id:"buttons",className:"flex flex-col items-end mr-9",children:[jsx("div",{children:rt?jsx("button",{className:"text-md underline text-[#f0a122b6] hover:bg-[#f3f0503b] px-3 rounded-md",onClick:vt,children:"Remove gold"}):jsx("button",{className:"text-md underline text-[#F0A022] hover:bg-[#f3f0503b] px-3 rounded-md",onClick:gt,children:"Coat with gold!"})}),jsx("div",{children:jsx("button",{className:"mt-8 text-xl p-3 -mr-3 text-white bg-[#E96B5E] hover:bg-[#e1796d] rounded-full ",onClick:St=>yt(St,o),children:"See Donut Details"})})]})]}),jsxs("section",{id:"detail",className:"h-screen w-screen pl-20 max-w-screen-2xl mx-auto flex flex-col justify-center",ref:o,children:[jsx(DonutDetails,{selectedBase:j,selectedGlaze:et,withGold:rt}),jsxs("div",{className:"mt-3",children:[jsx("button",{className:"mt-3 mr-3 p-3 text-xl  text-white bg-[#E96B5E] hover:bg-[#e1796d] rounded-full",onClick:St=>yt(St,a),children:"Make another one"}),st?jsx(SaveButton,{selectedBase:j,selectedGlaze:et,withGold:rt}):jsxs("div",{className:"mt-20",children:["Love your donut?"," ",jsxs(Link,{to:"/auth",children:[jsx("button",{onClick:Et,className:"text-red-500 hover:text-red-400",children:"login"})," "]}),"and save it for later!"]})]})]})]}),jsx(Footer,{})]})}const MotionConfigContext=reactExports.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser=typeof document<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(s,a,o,c){const{visualElement:d}=reactExports.useContext(MotionContext),b=reactExports.useContext(LazyContext),$=reactExports.useContext(PresenceContext),j=reactExports.useContext(MotionConfigContext).reducedMotion,_e=reactExports.useRef();c=c||b.renderer,!_e.current&&c&&(_e.current=c(s,{visualState:a,parent:d,props:o,presenceContext:$,blockInitialAnimation:$?$.initial===!1:!1,reducedMotionConfig:j}));const et=_e.current;reactExports.useInsertionEffect(()=>{et&&et.update(o,$)});const tt=reactExports.useRef(!!window.HandoffAppearAnimations);return useIsomorphicLayoutEffect(()=>{et&&(et.render(),tt.current&&et.animationState&&et.animationState.animateChanges())}),reactExports.useEffect(()=>{et&&(et.updateFeatures(),!tt.current&&et.animationState&&et.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,tt.current=!1)}),et}function isRefObject(s){return typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function useMotionRef(s,a,o){return reactExports.useCallback(c=>{c&&s.mount&&s.mount(c),a&&(c?a.mount(c):a.unmount()),o&&(typeof o=="function"?o(c):isRefObject(o)&&(o.current=c))},[a])}function isVariantLabel(s){return typeof s=="string"||Array.isArray(s)}function isAnimationControls(s){return typeof s=="object"&&typeof s.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(s){return isAnimationControls(s.animate)||variantProps.some(a=>isVariantLabel(s[a]))}function isVariantNode(s){return!!(isControllingVariants(s)||s.variants)}function getCurrentTreeVariants(s,a){if(isControllingVariants(s)){const{initial:o,animate:c}=s;return{initial:o===!1||isVariantLabel(o)?o:void 0,animate:isVariantLabel(c)?c:void 0}}return s.inherit!==!1?a:{}}function useCreateMotionContext(s){const{initial:a,animate:o}=getCurrentTreeVariants(s,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:a,animate:o}),[variantLabelsAsDependency(a),variantLabelsAsDependency(o)])}function variantLabelsAsDependency(s){return Array.isArray(s)?s.join(" "):s}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const s in featureProps)featureDefinitions[s]={isEnabled:a=>featureProps[s].some(o=>!!a[o])};function loadFeatures(s){for(const a in s)featureDefinitions[a]={...featureDefinitions[a],...s[a]}}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:s,createVisualElement:a,useRender:o,useVisualState:c,Component:d}){s&&loadFeatures(s);function b(j,_e){let et;const tt={...reactExports.useContext(MotionConfigContext),...j,layoutId:useLayoutId(j)},{isStatic:rt}=tt,nt=useCreateMotionContext(j),it=c(j,rt);if(!rt&&isBrowser){nt.visualElement=useVisualElement(d,it,tt,a);const at=reactExports.useContext(SwitchLayoutGroupContext),ct=reactExports.useContext(LazyContext).strict;nt.visualElement&&(et=nt.visualElement.loadFeatures(tt,ct,s,at))}return reactExports.createElement(MotionContext.Provider,{value:nt},et&&nt.visualElement?reactExports.createElement(et,{visualElement:nt.visualElement,...tt}):null,o(d,j,useMotionRef(it,nt.visualElement,_e),it,rt,nt.visualElement))}const $=reactExports.forwardRef(b);return $[motionComponentSymbol]=d,$}function useLayoutId({layoutId:s}){const a=reactExports.useContext(LayoutGroupContext).id;return a&&s!==void 0?a+"-"+s:s}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isMotionValue=s=>!!(s&&s.getVelocity),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,clamp=(s,a,o)=>Math.min(Math.max(o,s),a),number={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},alpha={...number,transform:s=>clamp(0,1,s)},scale={...number,default:1},sanitize=s=>Math.round(s*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString$3(s){return typeof s=="string"}const createUnitType=s=>({test:a=>isString$3(a)&&a.endsWith(s)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${s}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:s=>percent.parse(s)/100,transform:s=>percent.transform(s*100)},int={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function isValidMotionProp(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||validMotionProps.has(s)}let shouldForward=s=>!isValidMotionProp(s);function loadExternalIsValidProp(s){s&&(shouldForward=a=>a.startsWith("on")?!isValidMotionProp(a):s(a))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(s,a,o){const c={};for(const d in s)d==="values"&&typeof s.values=="object"||(shouldForward(d)||o===!0&&isValidMotionProp(d)||!a&&!isValidMotionProp(d)||s.draggable&&d.startsWith("onDrag"))&&(c[d]=s[d]);return c}const camelToDash=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function resolveVariantFromProps(s,a,o,c={},d={}){return typeof a=="function"&&(a=a(o!==void 0?o:s.custom,c,d)),typeof a=="string"&&(a=s.variants&&s.variants[a]),typeof a=="function"&&(a=a(o!==void 0?o:s.custom,c,d)),a}function useConstant$1(s){const a=reactExports.useRef(null);return a.current===null&&(a.current=s()),a.current}const isKeyframesTarget=s=>Array.isArray(s),isCustomValue=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),resolveFinalValueInKeyframes=s=>isKeyframesTarget(s)?s[s.length-1]||0:s;function resolveMotionValue(s){const a=isMotionValue(s)?s.get():s;return isCustomValue(a)?a.toValue():a}function makeState({scrapeMotionValuesFromProps:s,createRenderState:a,onMount:o},c,d,b){const $={latestValues:makeLatestValues(c,d,b,s),renderState:a()};return o&&($.mount=j=>o(c,j,$)),$}const makeUseVisualState=s=>(a,o)=>{const c=reactExports.useContext(MotionContext),d=reactExports.useContext(PresenceContext),b=()=>makeState(s,a,c,d);return o?b():useConstant$1(b)};function makeLatestValues(s,a,o,c){const d={},b=c(s,{});for(const nt in b)d[nt]=resolveMotionValue(b[nt]);let{initial:$,animate:j}=s;const _e=isControllingVariants(s),et=isVariantNode(s);a&&et&&!_e&&s.inherit!==!1&&($===void 0&&($=a.initial),j===void 0&&(j=a.animate));let tt=o?o.initial===!1:!1;tt=tt||$===!1;const rt=tt?j:$;return rt&&typeof rt!="boolean"&&!isAnimationControls(rt)&&(Array.isArray(rt)?rt:[rt]).forEach(it=>{const at=resolveVariantFromProps(s,it);if(!at)return;const{transitionEnd:ct,transition:st,...ot}=at;for(const ht in ot){let dt=ot[ht];if(Array.isArray(dt)){const ft=tt?dt.length-1:0;dt=dt[ft]}dt!==null&&(d[ht]=dt)}for(const ht in ct)d[ht]=ct[ht]}),d}const noop$1=s=>s;class Queue{constructor(){this.order=[],this.scheduled=new Set}add(a){if(!this.scheduled.has(a))return this.scheduled.add(a),this.order.push(a),!0}remove(a){const o=this.order.indexOf(a);o!==-1&&(this.order.splice(o,1),this.scheduled.delete(a))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(s){let a=new Queue,o=new Queue,c=0,d=!1,b=!1;const $=new WeakSet,j={schedule:(_e,et=!1,tt=!1)=>{const rt=tt&&d,nt=rt?a:o;return et&&$.add(_e),nt.add(_e)&&rt&&d&&(c=a.order.length),_e},cancel:_e=>{o.remove(_e),$.delete(_e)},process:_e=>{if(d){b=!0;return}if(d=!0,[a,o]=[o,a],o.clear(),c=a.order.length,c)for(let et=0;et<c;et++){const tt=a.order[et];tt(_e),$.has(tt)&&(j.schedule(tt),s())}d=!1,b&&(b=!1,j.process(_e))}};return j}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(s,a){let o=!1,c=!0;const d={delta:0,timestamp:0,isProcessing:!1},b=stepsOrder.reduce((rt,nt)=>(rt[nt]=createRenderStep(()=>o=!0),rt),{}),$=rt=>b[rt].process(d),j=()=>{const rt=performance.now();o=!1,d.delta=c?1e3/60:Math.max(Math.min(rt-d.timestamp,maxElapsed),1),d.timestamp=rt,d.isProcessing=!0,stepsOrder.forEach($),d.isProcessing=!1,o&&a&&(c=!1,s(j))},_e=()=>{o=!0,c=!0,d.isProcessing||s(j)};return{schedule:stepsOrder.reduce((rt,nt)=>{const it=b[nt];return rt[nt]=(at,ct=!1,st=!1)=>(o||_e(),it.schedule(at,ct,st)),rt},{}),cancel:rt=>stepsOrder.forEach(nt=>b[nt].cancel(rt)),state:d,steps:b}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);function addDomEvent(s,a,o,c={passive:!0}){return s.addEventListener(a,o,c),()=>s.removeEventListener(a,o)}const isPrimaryPointer=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function extractEventInfo(s,a="page"){return{point:{x:s[a+"X"],y:s[a+"Y"]}}}const addPointerInfo=s=>a=>isPrimaryPointer(a)&&s(a,extractEventInfo(a));function addPointerEvent(s,a,o,c){return addDomEvent(s,a,addPointerInfo(o),c)}const combineFunctions=(s,a)=>o=>a(s(o)),pipe=(...s)=>s.reduce(combineFunctions);function createLock(s){let a=null;return()=>{const o=()=>{a=null};return a===null?(a=s,o):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(s){let a=!1;if(s==="y")a=globalVerticalLock();else if(s==="x")a=globalHorizontalLock();else{const o=globalHorizontalLock(),c=globalVerticalLock();o&&c?a=()=>{o(),c()}:(o&&o(),c&&c())}return a}function isDragActive(){const s=getGlobalLock(!0);return s?(s(),!1):!0}class Feature{constructor(a){this.isMounted=!1,this.node=a}update(){}}function shallowCompare(s,a){if(!Array.isArray(a))return!1;const o=a.length;if(o!==s.length)return!1;for(let c=0;c<o;c++)if(a[c]!==s[c])return!1;return!0}function getCurrent(s){const a={};return s.values.forEach((o,c)=>a[c]=o.get()),a}function getVelocity(s){const a={};return s.values.forEach((o,c)=>a[c]=o.getVelocity()),a}function resolveVariant(s,a,o){const c=s.getProps();return resolveVariantFromProps(c,a,o!==void 0?o:c.custom,getCurrent(s),getVelocity(s))}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);let warning=noop$1,invariant=noop$1;const secondsToMilliseconds=s=>s*1e3,millisecondsToSeconds=s=>s/1e3,instantAnimationState={current:!1},isBezierDefinition=s=>Array.isArray(s)&&typeof s[0]=="number";function isWaapiSupportedEasing(s){return!!(!s||typeof s=="string"&&supportedWaapiEasing[s]||isBezierDefinition(s)||Array.isArray(s)&&s.every(isWaapiSupportedEasing))}const cubicBezierAsString=([s,a,o,c])=>`cubic-bezier(${s}, ${a}, ${o}, ${c})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(s){if(s)return isBezierDefinition(s)?cubicBezierAsString(s):Array.isArray(s)?s.map(mapEasingToNativeEasing):supportedWaapiEasing[s]}function animateStyle(s,a,o,{delay:c=0,duration:d,repeat:b=0,repeatType:$="loop",ease:j,times:_e}={}){const et={[a]:o};_e&&(et.offset=_e);const tt=mapEasingToNativeEasing(j);return Array.isArray(tt)&&(et.easing=tt),s.animate(et,{delay:c,duration:d,easing:Array.isArray(tt)?"linear":tt,fill:"both",iterations:b+1,direction:$==="reverse"?"alternate":"normal"})}function getFinalKeyframe(s,{repeat:a,repeatType:o="loop"}){const c=a&&o!=="loop"&&a%2===1?0:s.length-1;return s[c]}const calcBezier=(s,a,o)=>(((1-3*o+3*a)*s+(3*o-6*a))*s+3*a)*s,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(s,a,o,c,d){let b,$,j=0;do $=a+(o-a)/2,b=calcBezier($,c,d)-s,b>0?o=$:a=$;while(Math.abs(b)>subdivisionPrecision&&++j<subdivisionMaxIterations);return $}function cubicBezier(s,a,o,c){if(s===a&&o===c)return noop$1;const d=b=>binarySubdivide(b,0,1,s,o);return b=>b===0||b===1?b:calcBezier(d(b),a,c)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=s=>Array.isArray(s)&&typeof s[0]!="number",mirrorEasing=s=>a=>a<=.5?s(2*a)/2:(2-s(2*(1-a)))/2,reverseEasing=s=>a=>1-s(1-a),circIn=s=>1-Math.sin(Math.acos(s)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circOut),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=s=>(s*=2)<1?.5*backIn(s):.5*(2-Math.pow(2,-10*(s-1))),easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=s=>{if(Array.isArray(s)){invariant(s.length===4);const[a,o,c,d]=s;return cubicBezier(a,o,c,d)}else if(typeof s=="string")return easingLookup[s];return s},isColorString=(s,a)=>o=>!!(isString$3(o)&&singleColorRegex.test(o)&&o.startsWith(s)||a&&Object.prototype.hasOwnProperty.call(o,a)),splitColor=(s,a,o)=>c=>{if(!isString$3(c))return c;const[d,b,$,j]=c.match(floatRegex);return{[s]:parseFloat(d),[a]:parseFloat(b),[o]:parseFloat($),alpha:j!==void 0?parseFloat(j):1}},clampRgbUnit=s=>clamp(0,255,s),rgbUnit={...number,transform:s=>Math.round(clampRgbUnit(s))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:s,green:a,blue:o,alpha:c=1})=>"rgba("+rgbUnit.transform(s)+", "+rgbUnit.transform(a)+", "+rgbUnit.transform(o)+", "+sanitize(alpha.transform(c))+")"};function parseHex(s){let a="",o="",c="",d="";return s.length>5?(a=s.substring(1,3),o=s.substring(3,5),c=s.substring(5,7),d=s.substring(7,9)):(a=s.substring(1,2),o=s.substring(2,3),c=s.substring(3,4),d=s.substring(4,5),a+=a,o+=o,c+=c,d+=d),{red:parseInt(a,16),green:parseInt(o,16),blue:parseInt(c,16),alpha:d?parseInt(d,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:s,saturation:a,lightness:o,alpha:c=1})=>"hsla("+Math.round(s)+", "+percent.transform(sanitize(a))+", "+percent.transform(sanitize(o))+", "+sanitize(alpha.transform(c))+")"},color={test:s=>rgba.test(s)||hex.test(s)||hsla.test(s),parse:s=>rgba.test(s)?rgba.parse(s):hsla.test(s)?hsla.parse(s):hex.parse(s),transform:s=>isString$3(s)?s:s.hasOwnProperty("red")?rgba.transform(s):hsla.transform(s)},mix=(s,a,o)=>-o*s+o*a+s;function hueToRgb(s,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+(a-s)*6*o:o<1/2?a:o<2/3?s+(a-s)*(2/3-o)*6:s}function hslaToRgba({hue:s,saturation:a,lightness:o,alpha:c}){s/=360,a/=100,o/=100;let d=0,b=0,$=0;if(!a)d=b=$=o;else{const j=o<.5?o*(1+a):o+a-o*a,_e=2*o-j;d=hueToRgb(_e,j,s+1/3),b=hueToRgb(_e,j,s),$=hueToRgb(_e,j,s-1/3)}return{red:Math.round(d*255),green:Math.round(b*255),blue:Math.round($*255),alpha:c}}const mixLinearColor=(s,a,o)=>{const c=s*s;return Math.sqrt(Math.max(0,o*(a*a-c)+c))},colorTypes=[hex,rgba,hsla],getColorType=s=>colorTypes.find(a=>a.test(s));function asRGBA(s){const a=getColorType(s);let o=a.parse(s);return a===hsla&&(o=hslaToRgba(o)),o}const mixColor=(s,a)=>{const o=asRGBA(s),c=asRGBA(a),d={...o};return b=>(d.red=mixLinearColor(o.red,c.red,b),d.green=mixLinearColor(o.green,c.green,b),d.blue=mixLinearColor(o.blue,c.blue,b),d.alpha=mix(o.alpha,c.alpha,b),rgba.transform(d))};function test(s){var a,o;return isNaN(s)&&isString$3(s)&&(((a=s.match(floatRegex))===null||a===void 0?void 0:a.length)||0)+(((o=s.match(colorRegex))===null||o===void 0?void 0:o.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop$1},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number.parse};function tokenise(s,{regex:a,countKey:o,token:c,parse:d}){const b=s.tokenised.match(a);b&&(s["num"+o]=b.length,s.tokenised=s.tokenised.replace(a,c),s.values.push(...b.map(d)))}function analyseComplexValue(s){const a=s.toString(),o={value:a,tokenised:a,values:[],numVars:0,numColors:0,numNumbers:0};return o.value.includes("var(--")&&tokenise(o,cssVarTokeniser),tokenise(o,colorTokeniser),tokenise(o,numberTokeniser),o}function parseComplexValue(s){return analyseComplexValue(s).values}function createTransformer(s){const{values:a,numColors:o,numVars:c,tokenised:d}=analyseComplexValue(s),b=a.length;return $=>{let j=d;for(let _e=0;_e<b;_e++)_e<c?j=j.replace(cssVarTokeniser.token,$[_e]):_e<c+o?j=j.replace(colorTokeniser.token,color.transform($[_e])):j=j.replace(numberTokeniser.token,sanitize($[_e]));return j}}const convertNumbersToZero=s=>typeof s=="number"?0:s;function getAnimatableNone$1(s){const a=parseComplexValue(s);return createTransformer(s)(a.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(s,a)=>o=>`${o>0?a:s}`;function getMixer(s,a){return typeof s=="number"?o=>mix(s,a,o):color.test(s)?mixColor(s,a):s.startsWith("var(")?mixImmediate(s,a):mixComplex(s,a)}const mixArray=(s,a)=>{const o=[...s],c=o.length,d=s.map((b,$)=>getMixer(b,a[$]));return b=>{for(let $=0;$<c;$++)o[$]=d[$](b);return o}},mixObject=(s,a)=>{const o={...s,...a},c={};for(const d in o)s[d]!==void 0&&a[d]!==void 0&&(c[d]=getMixer(s[d],a[d]));return d=>{for(const b in c)o[b]=c[b](d);return o}},mixComplex=(s,a)=>{const o=complex.createTransformer(a),c=analyseComplexValue(s),d=analyseComplexValue(a);return c.numVars===d.numVars&&c.numColors===d.numColors&&c.numNumbers>=d.numNumbers?pipe(mixArray(c.values,d.values),o):mixImmediate(s,a)},progress=(s,a,o)=>{const c=a-s;return c===0?1:(o-s)/c},mixNumber=(s,a)=>o=>mix(s,a,o);function detectMixerFactory(s){return typeof s=="number"?mixNumber:typeof s=="string"?color.test(s)?mixColor:mixComplex:Array.isArray(s)?mixArray:typeof s=="object"?mixObject:mixNumber}function createMixers(s,a,o){const c=[],d=o||detectMixerFactory(s[0]),b=s.length-1;for(let $=0;$<b;$++){let j=d(s[$],s[$+1]);if(a){const _e=Array.isArray(a)?a[$]||noop$1:a;j=pipe(_e,j)}c.push(j)}return c}function interpolate(s,a,{clamp:o=!0,ease:c,mixer:d}={}){const b=s.length;if(invariant(b===a.length),b===1)return()=>a[0];s[0]>s[b-1]&&(s=[...s].reverse(),a=[...a].reverse());const $=createMixers(a,c,d),j=$.length,_e=et=>{let tt=0;if(j>1)for(;tt<s.length-2&&!(et<s[tt+1]);tt++);const rt=progress(s[tt],s[tt+1],et);return $[tt](rt)};return o?et=>_e(clamp(s[0],s[b-1],et)):_e}function fillOffset(s,a){const o=s[s.length-1];for(let c=1;c<=a;c++){const d=progress(0,a,c);s.push(mix(o,1,d))}}function defaultOffset(s){const a=[0];return fillOffset(a,s.length-1),a}function convertOffsetToTimes(s,a){return s.map(o=>o*a)}function defaultEasing(s,a){return s.map(()=>a||easeInOut).splice(0,s.length-1)}function keyframes({duration:s=300,keyframes:a,times:o,ease:c="easeInOut"}){const d=isEasingArray(c)?c.map(easingDefinitionToFunction):easingDefinitionToFunction(c),b={done:!1,value:a[0]},$=convertOffsetToTimes(o&&o.length===a.length?o:defaultOffset(a),s),j=interpolate($,a,{ease:Array.isArray(d)?d:defaultEasing(a,d)});return{calculatedDuration:s,next:_e=>(b.value=j(_e),b.done=_e>=s,b)}}function velocityPerSecond(s,a){return a?s*(1e3/a):0}const velocitySampleDuration=5;function calcGeneratorVelocity(s,a,o){const c=Math.max(a-velocitySampleDuration,0);return velocityPerSecond(o-s(c),a-c)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:s=800,bounce:a=.25,velocity:o=0,mass:c=1}){let d,b;warning(s<=secondsToMilliseconds(maxDuration$1));let $=1-a;$=clamp(minDamping,maxDamping,$),s=clamp(minDuration,maxDuration$1,millisecondsToSeconds(s)),$<1?(d=et=>{const tt=et*$,rt=tt*s,nt=tt-o,it=calcAngularFreq(et,$),at=Math.exp(-rt);return safeMin-nt/it*at},b=et=>{const rt=et*$*s,nt=rt*o+o,it=Math.pow($,2)*Math.pow(et,2)*s,at=Math.exp(-rt),ct=calcAngularFreq(Math.pow(et,2),$);return(-d(et)+safeMin>0?-1:1)*((nt-it)*at)/ct}):(d=et=>{const tt=Math.exp(-et*s),rt=(et-o)*s+1;return-safeMin+tt*rt},b=et=>{const tt=Math.exp(-et*s),rt=(o-et)*(s*s);return tt*rt});const j=5/s,_e=approximateRoot(d,b,j);if(s=secondsToMilliseconds(s),isNaN(_e))return{stiffness:100,damping:10,duration:s};{const et=Math.pow(_e,2)*c;return{stiffness:et,damping:$*2*Math.sqrt(c*et),duration:s}}}const rootIterations=12;function approximateRoot(s,a,o){let c=o;for(let d=1;d<rootIterations;d++)c=c-s(c)/a(c);return c}function calcAngularFreq(s,a){return s*Math.sqrt(1-a*a)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(s,a){return a.some(o=>s[o]!==void 0)}function getSpringOptions(s){let a={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!isSpringType(s,physicsKeys)&&isSpringType(s,durationKeys)){const o=findSpring(s);a={...a,...o,velocity:0,mass:1},a.isResolvedFromDuration=!0}return a}function spring({keyframes:s,restDelta:a,restSpeed:o,...c}){const d=s[0],b=s[s.length-1],$={done:!1,value:d},{stiffness:j,damping:_e,mass:et,velocity:tt,duration:rt,isResolvedFromDuration:nt}=getSpringOptions(c),it=tt?-millisecondsToSeconds(tt):0,at=_e/(2*Math.sqrt(j*et)),ct=b-d,st=millisecondsToSeconds(Math.sqrt(j/et)),ot=Math.abs(ct)<5;o||(o=ot?.01:2),a||(a=ot?.005:.5);let ht;if(at<1){const dt=calcAngularFreq(st,at);ht=ft=>{const mt=Math.exp(-at*st*ft);return b-mt*((it+at*st*ct)/dt*Math.sin(dt*ft)+ct*Math.cos(dt*ft))}}else if(at===1)ht=dt=>b-Math.exp(-st*dt)*(ct+(it+st*ct)*dt);else{const dt=st*Math.sqrt(at*at-1);ht=ft=>{const mt=Math.exp(-at*st*ft),gt=Math.min(dt*ft,300);return b-mt*((it+at*st*ct)*Math.sinh(gt)+dt*ct*Math.cosh(gt))/dt}}return{calculatedDuration:nt&&rt||null,next:dt=>{const ft=ht(dt);if(nt)$.done=dt>=rt;else{let mt=it;dt!==0&&(at<1?mt=calcGeneratorVelocity(ht,dt,ft):mt=0);const gt=Math.abs(mt)<=o,vt=Math.abs(b-ft)<=a;$.done=gt&&vt}return $.value=$.done?b:ft,$}}}function inertia({keyframes:s,velocity:a=0,power:o=.8,timeConstant:c=325,bounceDamping:d=10,bounceStiffness:b=500,modifyTarget:$,min:j,max:_e,restDelta:et=.5,restSpeed:tt}){const rt=s[0],nt={done:!1,value:rt},it=yt=>j!==void 0&&yt<j||_e!==void 0&&yt>_e,at=yt=>j===void 0?_e:_e===void 0||Math.abs(j-yt)<Math.abs(_e-yt)?j:_e;let ct=o*a;const st=rt+ct,ot=$===void 0?st:$(st);ot!==st&&(ct=ot-rt);const ht=yt=>-ct*Math.exp(-yt/c),dt=yt=>ot+ht(yt),ft=yt=>{const Et=ht(yt),St=dt(yt);nt.done=Math.abs(Et)<=et,nt.value=nt.done?ot:St};let mt,gt;const vt=yt=>{it(nt.value)&&(mt=yt,gt=spring({keyframes:[nt.value,at(nt.value)],velocity:calcGeneratorVelocity(dt,yt,nt.value),damping:d,stiffness:b,restDelta:et,restSpeed:tt}))};return vt(0),{calculatedDuration:null,next:yt=>{let Et=!1;return!gt&&mt===void 0&&(Et=!0,ft(yt),vt(yt)),mt!==void 0&&yt>mt?gt.next(yt-mt):(!Et&&ft(yt),nt)}}}const frameloopDriver=s=>{const a=({timestamp:o})=>s(o);return{start:()=>frame.update(a,!0),stop:()=>cancelFrame(a),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(s){let a=0;const o=50;let c=s.next(a);for(;!c.done&&a<maxGeneratorDuration;)a+=o,c=s.next(a);return a>=maxGeneratorDuration?1/0:a}const types={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay:s=!0,delay:a=0,driver:o=frameloopDriver,keyframes:c,type:d="keyframes",repeat:b=0,repeatDelay:$=0,repeatType:j="loop",onPlay:_e,onStop:et,onComplete:tt,onUpdate:rt,...nt}){let it=1,at=!1,ct,st;const ot=()=>{st=new Promise($t=>{ct=$t})};ot();let ht;const dt=types[d]||keyframes;let ft;dt!==keyframes&&typeof c[0]!="number"&&(ft=interpolate([0,100],c,{clamp:!1}),c=[0,100]);const mt=dt({...nt,keyframes:c});let gt;j==="mirror"&&(gt=dt({...nt,keyframes:[...c].reverse(),velocity:-(nt.velocity||0)}));let vt="idle",yt=null,Et=null,St=null;mt.calculatedDuration===null&&b&&(mt.calculatedDuration=calcGeneratorDuration(mt));const{calculatedDuration:Ct}=mt;let wt=1/0,_t=1/0;Ct!==null&&(wt=Ct+$,_t=wt*(b+1)-$);let Tt=0;const Mt=$t=>{if(Et===null)return;it>0&&(Et=Math.min(Et,$t)),it<0&&(Et=Math.min($t-_t/it,Et)),yt!==null?Tt=yt:Tt=Math.round($t-Et)*it;const Lt=Tt-a*(it>=0?1:-1),Jt=it>=0?Lt<0:Lt>_t;Tt=Math.max(Lt,0),vt==="finished"&&yt===null&&(Tt=_t);let Qt=Tt,or=mt;if(b){const Er=Tt/wt;let Tr=Math.floor(Er),ur=Er%1;!ur&&Er>=1&&(ur=1),ur===1&&Tr--,Tr=Math.min(Tr,b+1);const kt=!!(Tr%2);kt&&(j==="reverse"?(ur=1-ur,$&&(ur-=$/wt)):j==="mirror"&&(or=gt));let Xt=clamp(0,1,ur);Tt>_t&&(Xt=j==="reverse"&&kt?1:0),Qt=Xt*wt}const er=Jt?{done:!1,value:c[0]}:or.next(Qt);ft&&(er.value=ft(er.value));let{done:sr}=er;!Jt&&Ct!==null&&(sr=it>=0?Tt>=_t:Tt<=0);const Ar=yt===null&&(vt==="finished"||vt==="running"&&sr);return rt&&rt(er.value),Ar&&bt(),er},Bt=()=>{ht&&ht.stop(),ht=void 0},Rt=()=>{vt="idle",Bt(),ct(),ot(),Et=St=null},bt=()=>{vt="finished",tt&&tt(),Bt(),ct()},Pt=()=>{if(at)return;ht||(ht=o(Mt));const $t=ht.now();_e&&_e(),yt!==null?Et=$t-yt:(!Et||vt==="finished")&&(Et=$t),vt==="finished"&&ot(),St=Et,yt=null,vt="running",ht.start()};s&&Pt();const Dt={then($t,Lt){return st.then($t,Lt)},get time(){return millisecondsToSeconds(Tt)},set time($t){$t=secondsToMilliseconds($t),Tt=$t,yt!==null||!ht||it===0?yt=$t:Et=ht.now()-$t/it},get duration(){const $t=mt.calculatedDuration===null?calcGeneratorDuration(mt):mt.calculatedDuration;return millisecondsToSeconds($t)},get speed(){return it},set speed($t){$t===it||!ht||(it=$t,Dt.time=millisecondsToSeconds(Tt))},get state(){return vt},play:Pt,pause:()=>{vt="paused",yt=Tt},stop:()=>{at=!0,vt!=="idle"&&(vt="idle",et&&et(),Rt())},cancel:()=>{St!==null&&Mt(St),Rt()},complete:()=>{vt="finished"},sample:$t=>(Et=0,Mt($t))};return Dt}function memo(s){let a;return()=>(a===void 0&&(a=s()),a)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(s,a)=>a.type==="spring"||s==="backgroundColor"||!isWaapiSupportedEasing(a.ease);function createAcceleratedAnimation(s,a,{onUpdate:o,onComplete:c,...d}){if(!(supportsWaapi()&&acceleratedValues.has(a)&&!d.repeatDelay&&d.repeatType!=="mirror"&&d.damping!==0&&d.type!=="inertia"))return!1;let $=!1,j,_e;const et=()=>{_e=new Promise(ht=>{j=ht})};et();let{keyframes:tt,duration:rt=300,ease:nt,times:it}=d;if(requiresPregeneratedKeyframes(a,d)){const ht=animateValue({...d,repeat:0,delay:0});let dt={done:!1,value:tt[0]};const ft=[];let mt=0;for(;!dt.done&&mt<maxDuration;)dt=ht.sample(mt),ft.push(dt.value),mt+=sampleDelta;it=void 0,tt=ft,rt=mt-sampleDelta,nt="linear"}const at=animateStyle(s.owner.current,a,tt,{...d,duration:rt,ease:nt,times:it});d.syncStart&&(at.startTime=frameData.isProcessing?frameData.timestamp:document.timeline?document.timeline.currentTime:performance.now());const ct=()=>at.cancel(),st=()=>{frame.update(ct),j(),et()};return at.onfinish=()=>{s.set(getFinalKeyframe(tt,d)),c&&c(),st()},{then(ht,dt){return _e.then(ht,dt)},attachTimeline(ht){return at.timeline=ht,at.onfinish=null,noop$1},get time(){return millisecondsToSeconds(at.currentTime||0)},set time(ht){at.currentTime=secondsToMilliseconds(ht)},get speed(){return at.playbackRate},set speed(ht){at.playbackRate=ht},get duration(){return millisecondsToSeconds(rt)},play:()=>{$||(at.play(),cancelFrame(ct))},pause:()=>at.pause(),stop:()=>{if($=!0,at.playState==="idle")return;const{currentTime:ht}=at;if(ht){const dt=animateValue({...d,autoplay:!1});s.setWithVelocity(dt.sample(ht-sampleDelta).value,dt.sample(ht).value,sampleDelta)}st()},complete:()=>at.finish(),cancel:st}}function createInstantAnimation({keyframes:s,delay:a,onUpdate:o,onComplete:c}){const d=()=>(o&&o(s[s.length-1]),c&&c(),{time:0,speed:1,duration:0,play:noop$1,pause:noop$1,stop:noop$1,then:b=>(b(),Promise.resolve()),cancel:noop$1,complete:noop$1});return a?animateValue({keyframes:[0,1],duration:0,delay:a,onComplete:d}):d()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(s,{keyframes:a})=>a.length>2?keyframesTransition:transformProps.has(s)?s.startsWith("scale")?criticallyDampedSpring(a[1]):underDampedSpring:ease,isAnimatable=(s,a)=>s==="zIndex"?!1:!!(typeof a=="number"||Array.isArray(a)||typeof a=="string"&&(complex.test(a)||a==="0")&&!a.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(s){const[a,o]=s.slice(0,-1).split("(");if(a==="drop-shadow")return s;const[c]=o.match(floatRegex)||[];if(!c)return s;const d=o.replace(c,"");let b=maxDefaults.has(a)?1:0;return c!==o&&(b*=100),a+"("+b+d+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter$1={...complex,getAnimatableNone:s=>{const a=s.match(functionRegex);return a?a.map(applyDefaultFilter).join(" "):s}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=s=>defaultValueTypes[s];function getAnimatableNone(s,a){let o=getDefaultValueType(s);return o!==filter$1&&(o=complex),o.getAnimatableNone?o.getAnimatableNone(a):void 0}const isZeroValueString=s=>/^0[^.\s]+$/.test(s);function isNone(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||isZeroValueString(s)}function getKeyframes(s,a,o,c){const d=isAnimatable(a,o);let b;Array.isArray(o)?b=[...o]:b=[null,o];const $=c.from!==void 0?c.from:s.get();let j;const _e=[];for(let et=0;et<b.length;et++)b[et]===null&&(b[et]=et===0?$:b[et-1]),isNone(b[et])&&_e.push(et),typeof b[et]=="string"&&b[et]!=="none"&&b[et]!=="0"&&(j=b[et]);if(d&&_e.length&&j)for(let et=0;et<_e.length;et++){const tt=_e[et];b[tt]=getAnimatableNone(a,j)}return b}function isTransitionDefined({when:s,delay:a,delayChildren:o,staggerChildren:c,staggerDirection:d,repeat:b,repeatType:$,repeatDelay:j,from:_e,elapsed:et,...tt}){return!!Object.keys(tt).length}function getValueTransition(s,a){return s[a]||s.default||s}const animateMotionValue=(s,a,o,c={})=>d=>{const b=getValueTransition(c,s)||{},$=b.delay||c.delay||0;let{elapsed:j=0}=c;j=j-secondsToMilliseconds($);const _e=getKeyframes(a,s,o,b),et=_e[0],tt=_e[_e.length-1],rt=isAnimatable(s,et),nt=isAnimatable(s,tt);let it={keyframes:_e,velocity:a.getVelocity(),ease:"easeOut",...b,delay:-j,onUpdate:at=>{a.set(at),b.onUpdate&&b.onUpdate(at)},onComplete:()=>{d(),b.onComplete&&b.onComplete()}};if(isTransitionDefined(b)||(it={...it,...getDefaultTransition(s,it)}),it.duration&&(it.duration=secondsToMilliseconds(it.duration)),it.repeatDelay&&(it.repeatDelay=secondsToMilliseconds(it.repeatDelay)),!rt||!nt||instantAnimationState.current||b.type===!1)return createInstantAnimation(it);if(a.owner&&a.owner.current instanceof HTMLElement&&!a.owner.getProps().onUpdate){const at=createAcceleratedAnimation(a,s,it);if(at)return at}return animateValue(it)};function isWillChangeMotionValue(s){return!!(isMotionValue(s)&&s.add)}const isNumericalString=s=>/^\-?\d*\.?\d+$/.test(s);function addUniqueItem(s,a){s.indexOf(a)===-1&&s.push(a)}function removeItem(s,a){const o=s.indexOf(a);o>-1&&s.splice(o,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(a){return addUniqueItem(this.subscriptions,a),()=>removeItem(this.subscriptions,a)}notify(a,o,c){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](a,o,c);else for(let b=0;b<d;b++){const $=this.subscriptions[b];$&&$(a,o,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat=s=>!isNaN(parseFloat(s));class MotionValue{constructor(a,o={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(c,d=!0)=>{this.prev=this.current,this.current=c;const{delta:b,timestamp:$}=frameData;this.lastUpdated!==$&&(this.timeDelta=b,this.lastUpdated=$,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),d&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp:c})=>{c!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=a,this.canTrackVelocity=isFloat(this.current),this.owner=o.owner}onChange(a){return this.on("change",a)}on(a,o){this.events[a]||(this.events[a]=new SubscriptionManager);const c=this.events[a].add(o);return a==="change"?()=>{c(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,o){this.passiveEffect=a,this.stopPassiveEffect=o}set(a,o=!0){!o||!this.passiveEffect?this.updateAndNotify(a,o):this.passiveEffect(a,this.updateAndNotify)}setWithVelocity(a,o,c){this.set(o),this.prev=a,this.timeDelta=c}jump(a){this.updateAndNotify(a),this.prev=a,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(a){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=a(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(s,a){return new MotionValue(s,a)}const testValueType=s=>a=>a.test(s),auto={test:s=>s==="auto",parse:s=>s},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],valueTypes=[...dimensionValueTypes,color,complex],findValueType=s=>valueTypes.find(testValueType(s));function setMotionValue(s,a,o){s.hasValue(a)?s.getValue(a).set(o):s.addValue(a,motionValue(o))}function setTarget(s,a){const o=resolveVariant(s,a);let{transitionEnd:c={},transition:d={},...b}=o?s.makeTargetAnimatable(o,!1):{};b={...b,...c};for(const $ in b){const j=resolveFinalValueInKeyframes(b[$]);setMotionValue(s,$,j)}}function checkTargetForNewValues(s,a,o){var c,d;const b=Object.keys(a).filter(j=>!s.hasValue(j)),$=b.length;if($)for(let j=0;j<$;j++){const _e=b[j],et=a[_e];let tt=null;Array.isArray(et)&&(tt=et[0]),tt===null&&(tt=(d=(c=o[_e])!==null&&c!==void 0?c:s.readValue(_e))!==null&&d!==void 0?d:a[_e]),tt!=null&&(typeof tt=="string"&&(isNumericalString(tt)||isZeroValueString(tt))?tt=parseFloat(tt):!findValueType(tt)&&complex.test(et)&&(tt=getAnimatableNone(_e,et)),s.addValue(_e,motionValue(tt,{owner:s})),o[_e]===void 0&&(o[_e]=tt),tt!==null&&s.setBaseTarget(_e,tt))}}function shouldBlockAnimation({protectedKeys:s,needsAnimating:a},o){const c=s.hasOwnProperty(o)&&a[o]!==!0;return a[o]=!1,c}function animateTarget(s,a,{delay:o=0,transitionOverride:c,type:d}={}){let{transition:b=s.getDefaultTransition(),transitionEnd:$,...j}=s.makeTargetAnimatable(a);const _e=s.getValue("willChange");c&&(b=c);const et=[],tt=d&&s.animationState&&s.animationState.getState()[d];for(const rt in j){const nt=s.getValue(rt),it=j[rt];if(!nt||it===void 0||tt&&shouldBlockAnimation(tt,rt))continue;const at={delay:o,elapsed:0,...b};if(window.HandoffAppearAnimations&&!nt.hasAnimated){const st=s.getProps()[optimizedAppearDataAttribute];st&&(at.elapsed=window.HandoffAppearAnimations(st,rt,nt,frame),at.syncStart=!0)}nt.start(animateMotionValue(rt,nt,it,s.shouldReduceMotion&&transformProps.has(rt)?{type:!1}:at));const ct=nt.animation;isWillChangeMotionValue(_e)&&(_e.add(rt),ct.then(()=>_e.remove(rt))),et.push(ct)}return $&&Promise.all(et).then(()=>{$&&setTarget(s,$)}),et}function animateVariant(s,a,o={}){const c=resolveVariant(s,a,o.custom);let{transition:d=s.getDefaultTransition()||{}}=c||{};o.transitionOverride&&(d=o.transitionOverride);const b=c?()=>Promise.all(animateTarget(s,c,o)):()=>Promise.resolve(),$=s.variantChildren&&s.variantChildren.size?(_e=0)=>{const{delayChildren:et=0,staggerChildren:tt,staggerDirection:rt}=d;return animateChildren(s,a,et+_e,tt,rt,o)}:()=>Promise.resolve(),{when:j}=d;if(j){const[_e,et]=j==="beforeChildren"?[b,$]:[$,b];return _e().then(()=>et())}else return Promise.all([b(),$(o.delay)])}function animateChildren(s,a,o=0,c=0,d=1,b){const $=[],j=(s.variantChildren.size-1)*c,_e=d===1?(et=0)=>et*c:(et=0)=>j-et*c;return Array.from(s.variantChildren).sort(sortByTreeOrder).forEach((et,tt)=>{et.notify("AnimationStart",a),$.push(animateVariant(et,a,{...b,delay:o+_e(tt)}).then(()=>et.notify("AnimationComplete",a)))}),Promise.all($)}function sortByTreeOrder(s,a){return s.sortNodePosition(a)}function animateVisualElement(s,a,o={}){s.notify("AnimationStart",a);let c;if(Array.isArray(a)){const d=a.map(b=>animateVariant(s,b,o));c=Promise.all(d)}else if(typeof a=="string")c=animateVariant(s,a,o);else{const d=typeof a=="function"?resolveVariant(s,a,o.custom):a;c=Promise.all(animateTarget(s,d,o))}return c.then(()=>s.notify("AnimationComplete",a))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(s){return a=>Promise.all(a.map(({animation:o,options:c})=>animateVisualElement(s,o,c)))}function createAnimationState(s){let a=animateList(s);const o=createState();let c=!0;const d=(_e,et)=>{const tt=resolveVariant(s,et);if(tt){const{transition:rt,transitionEnd:nt,...it}=tt;_e={..._e,...it,...nt}}return _e};function b(_e){a=_e(s)}function $(_e,et){const tt=s.getProps(),rt=s.getVariantContext(!0)||{},nt=[],it=new Set;let at={},ct=1/0;for(let ot=0;ot<numAnimationTypes;ot++){const ht=reversePriorityOrder[ot],dt=o[ht],ft=tt[ht]!==void 0?tt[ht]:rt[ht],mt=isVariantLabel(ft),gt=ht===et?dt.isActive:null;gt===!1&&(ct=ot);let vt=ft===rt[ht]&&ft!==tt[ht]&&mt;if(vt&&c&&s.manuallyAnimateOnMount&&(vt=!1),dt.protectedKeys={...at},!dt.isActive&&gt===null||!ft&&!dt.prevProp||isAnimationControls(ft)||typeof ft=="boolean")continue;const yt=checkVariantsDidChange(dt.prevProp,ft);let Et=yt||ht===et&&dt.isActive&&!vt&&mt||ot>ct&&mt;const St=Array.isArray(ft)?ft:[ft];let Ct=St.reduce(d,{});gt===!1&&(Ct={});const{prevResolvedValues:wt={}}=dt,_t={...wt,...Ct},Tt=Mt=>{Et=!0,it.delete(Mt),dt.needsAnimating[Mt]=!0};for(const Mt in _t){const Bt=Ct[Mt],Rt=wt[Mt];at.hasOwnProperty(Mt)||(Bt!==Rt?isKeyframesTarget(Bt)&&isKeyframesTarget(Rt)?!shallowCompare(Bt,Rt)||yt?Tt(Mt):dt.protectedKeys[Mt]=!0:Bt!==void 0?Tt(Mt):it.add(Mt):Bt!==void 0&&it.has(Mt)?Tt(Mt):dt.protectedKeys[Mt]=!0)}dt.prevProp=ft,dt.prevResolvedValues=Ct,dt.isActive&&(at={...at,...Ct}),c&&s.blockInitialAnimation&&(Et=!1),Et&&!vt&&nt.push(...St.map(Mt=>({animation:Mt,options:{type:ht,..._e}})))}if(it.size){const ot={};it.forEach(ht=>{const dt=s.getBaseTarget(ht);dt!==void 0&&(ot[ht]=dt)}),nt.push({animation:ot})}let st=!!nt.length;return c&&tt.initial===!1&&!s.manuallyAnimateOnMount&&(st=!1),c=!1,st?a(nt):Promise.resolve()}function j(_e,et,tt){var rt;if(o[_e].isActive===et)return Promise.resolve();(rt=s.variantChildren)===null||rt===void 0||rt.forEach(it=>{var at;return(at=it.animationState)===null||at===void 0?void 0:at.setActive(_e,et)}),o[_e].isActive=et;const nt=$(tt,_e);for(const it in o)o[it].protectedKeys={};return nt}return{animateChanges:$,setActive:j,setAnimateFunction:b,getState:()=>o}}function checkVariantsDidChange(s,a){return typeof a=="string"?a!==s:Array.isArray(a)?!shallowCompare(a,s):!1}function createTypeState(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(a){super(a),a.animationState||(a.animationState=createAnimationState(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();this.unmount(),isAnimationControls(a)&&(this.unmount=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:o}=this.node.prevProps||{};a!==o&&this.updateAnimationControlsSubscription()}unmount(){}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:o,custom:c}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===d)return;const b=this.node.animationState.setActive("exit",!a,{custom:c??this.node.getProps().custom});o&&!a&&b.then(()=>o(this.id))}mount(){const{register:a}=this.node.presenceContext||{};a&&(this.unmount=a(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),a=()=>prefersReducedMotion.current=s.matches;s.addListener(a),a()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(s,a,o){const{willChange:c}=a;for(const d in a){const b=a[d],$=o[d];if(isMotionValue(b))s.addValue(d,b),isWillChangeMotionValue(c)&&c.add(d);else if(isMotionValue($))s.addValue(d,motionValue(b,{owner:s})),isWillChangeMotionValue(c)&&c.remove(d);else if($!==b)if(s.hasValue(d)){const j=s.getValue(d);!j.hasAnimated&&j.set(b)}else{const j=s.getStaticValue(d);s.addValue(d,motionValue(j!==void 0?j:b,{owner:s}))}}for(const d in o)a[d]===void 0&&s.removeValue(d);return a}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent:a,props:o,presenceContext:c,reducedMotionConfig:d,visualState:b},$={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:j,renderState:_e}=b;this.latestValues=j,this.baseTarget={...j},this.initialValues=o.initial?{...j}:{},this.renderState=_e,this.parent=a,this.props=o,this.presenceContext=c,this.depth=a?a.depth+1:0,this.reducedMotionConfig=d,this.options=$,this.isControllingVariants=isControllingVariants(o),this.isVariantNode=isVariantNode(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:et,...tt}=this.scrapeMotionValuesFromProps(o,{});for(const rt in tt){const nt=tt[rt];j[rt]!==void 0&&isMotionValue(nt)&&(nt.set(j[rt],!1),isWillChangeMotionValue(et)&&et.add(rt))}}scrapeMotionValuesFromProps(a,o){return{}}mount(a){this.current=a,visualElementStore.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,c)=>this.bindToMotionValue(c,o)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(a=>a()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const a in this.events)this.events[a].clear();for(const a in this.features)this.features[a].unmount();this.current=null}bindToMotionValue(a,o){const c=transformProps.has(a),d=o.on("change",$=>{this.latestValues[a]=$,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),c&&this.projection&&(this.projection.isTransformDirty=!0)}),b=o.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(a,()=>{d(),b()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}loadFeatures({children:a,...o},c,d,b){let $,j;for(let _e=0;_e<numFeatures;_e++){const et=featureNames[_e],{isEnabled:tt,Feature:rt,ProjectionNode:nt,MeasureLayout:it}=featureDefinitions[et];nt&&($=nt),tt(o)&&(!this.features[et]&&rt&&(this.features[et]=new rt(this)),it&&(j=it))}if(!this.projection&&$){this.projection=new $(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_e,layout:et,drag:tt,dragConstraints:rt,layoutScroll:nt,layoutRoot:it}=o;this.projection.setOptions({layoutId:_e,layout:et,alwaysMeasureLayout:!!tt||rt&&isRefObject(rt),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof et=="string"?et:"both",initialPromotionConfig:b,layoutScroll:nt,layoutRoot:it})}return j}updateFeatures(){for(const a in this.features){const o=this.features[a];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,o){this.latestValues[a]=o}makeTargetAnimatable(a,o=!0){return this.makeTargetAnimatableFromInstance(a,this.props,o)}update(a,o){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let c=0;c<propEventHandlers.length;c++){const d=propEventHandlers[c];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const b=a["on"+d];b&&(this.propEventSubscriptions[d]=this.on(d,b))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(a,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(a=!1){if(a)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const c=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(c.initial=this.props.initial),c}const o={};for(let c=0;c<numVariantProps;c++){const d=variantProps[c],b=this.props[d];(isVariantLabel(b)||b===!1)&&(o[d]=b)}return o}addVariantChild(a){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(a),()=>o.variantChildren.delete(a)}addValue(a,o){o!==this.values.get(a)&&(this.removeValue(a),this.bindToMotionValue(a,o)),this.values.set(a,o),this.latestValues[a]=o.get()}removeValue(a){this.values.delete(a);const o=this.valueSubscriptions.get(a);o&&(o(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,o){if(this.props.values&&this.props.values[a])return this.props.values[a];let c=this.values.get(a);return c===void 0&&o!==void 0&&(c=motionValue(o,{owner:this}),this.addValue(a,c)),c}readValue(a){var o;return this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:(o=this.getBaseTargetFromProps(this.props,a))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,a,this.options)}setBaseTarget(a,o){this.baseTarget[a]=o}getBaseTarget(a){var o;const{initial:c}=this.props,d=typeof c=="string"||typeof c=="object"?(o=resolveVariantFromProps(this.props,c))===null||o===void 0?void 0:o[a]:void 0;if(c&&d!==void 0)return d;const b=this.getBaseTargetFromProps(this.props,a);return b!==void 0&&!isMotionValue(b)?b:this.initialValues[a]!==void 0&&d===void 0?void 0:this.baseTarget[a]}on(a,o){return this.events[a]||(this.events[a]=new SubscriptionManager),this.events[a].add(o)}notify(a,...o){this.events[a]&&this.events[a].notify(...o)}}function useHover(s,{whileHover:a,onHoverStart:o,onHoverEnd:c,onPointerOver:d,onPointerOut:b},$){return s||!$||!(a||o||c)?{}:{onPointerOver:_e=>{var et;(et=$.animationState)===null||et===void 0||et.setActive("whileHover",!0),d&&d(_e)},onPointerOut:_e=>{var et;(et=$.animationState)===null||et===void 0||et.setActive("whileHover",!1),b&&b(_e)}}}function useTap(s,{whileTap:a,onTapStart:o,onTap:c,onTapCancel:d,onPointerDown:b},$){const j=c||o||d||a,_e=reactExports.useRef(!1),et=reactExports.useRef(null);if(s||!$||!j)return{};function tt(){var at;(at=et.current)===null||at===void 0||at.call(et),et.current=null}function rt(){var at;return tt(),_e.current=!1,(at=$.animationState)===null||at===void 0||at.setActive("whileTap",!1),!isDragActive()}function nt(at,ct){rt()&&(c==null||c(at,ct))}function it(at,ct){rt()&&(d==null||d(at,ct))}return{onPointerDown:addPointerInfo((at,ct)=>{var st;if(tt(),_e.current)return;_e.current=!0;const ot={passive:!(o||c||d||b)};et.current=pipe(addPointerEvent(window,"pointerup",nt,ot),addPointerEvent(window,"pointercancel",it,ot)),(st=$.animationState)===null||st===void 0||st.setActive("whileTap",!0),b==null||b(at),o==null||o(at,ct)})}}const useRender=(s,a,o,c,d,b)=>{const $=useVisualProps(a);return reactExports.createElement(s,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:o},filterProps(a,!1,!1)),$),{onUpdate:a.onInstanceUpdate}),useHover(d,a,b)),useTap(d,a,b)))};function useVisualProps(s){return reactExports.useMemo(()=>{const a={};for(const o in s){const c=s[o];isMotionValue(c)?a[o]=c.get():Array.isArray(c)&&c.includes(isMotionValue)&&(a[o]=c.map(resolveMotionValue))}return a},[])}const setVector=(s,a)=>o=>(c,d)=>{c[s]===void 0&&(c[s]=new Vector3(a)),c[s].setComponent(o,d)},setEuler=(s,a)=>o=>(c,d)=>{c[s]===void 0&&(c[s]=new Euler(a));const b=c[s];b[o]=d},setColor=s=>(a,o)=>{a[s]===void 0&&(a[s]=new Color(o)),a[s].set(o)},setScale=setVector("scale",1),setPosition=setVector("position",0),setRotation=setEuler("rotation",0),setters={x:setPosition(0),y:setPosition(1),z:setPosition(2),scale:(s,a)=>{s.scale===void 0&&(s.scale=new Vector3(1)),s.scale.set(a,a,a)},scaleX:setScale(0),scaleY:setScale(1),scaleZ:setScale(2),rotateX:setRotation("x"),rotateY:setRotation("y"),rotateZ:setRotation("z"),color:setColor("color"),specular:setColor("specular")};function setThreeValue(s,a,o){setters[a]?setters[a](s,o[a]):(a==="opacity"&&!s.transparent&&(s.transparent=!0),s[a]=o[a])}const readVector=(s,a)=>o=>c=>{const d=c[s];return d?d[o]:a},readPosition=readVector("position",0),readScale=readVector("scale",1),readRotation=readVector("rotation",0),readers={x:readPosition("x"),y:readPosition("y"),z:readPosition("z"),scale:readScale("x"),scaleX:readScale("x"),scaleY:readScale("y"),scaleZ:readScale("z"),rotateX:readRotation("x"),rotateY:readRotation("y"),rotateZ:readRotation("z")};function readAnimatableValue(s){if(s!==void 0)return s instanceof Color?s.getStyle():s}function readThreeValue(s,a){return readers[a]?readers[a](s):readAnimatableValue(s[a])||0}const axes=["x","y","z"],valueMap={"position-x":"x","position-y":"y","position-z":"z","rotation-x":"rotateX","rotation-y":"rotateY","rotation-z":"rotateZ","scale-x":"scaleX","scale-y":"scaleY","scale-z":"scaleZ"},scrapeMotionValuesFromProps=(s,a)=>{const o={};for(const c in s){const d=s[c];if(isMotionValue(d)||isMotionValue(a[c]))o[valueMap[c]||c]=d;else if(Array.isArray(d))for(let b=0;b<d.length;b++){const $=d[b];if(isMotionValue($)||Array.isArray(a[c])&&isMotionValue(a[c][b])){const j=valueMap[c+"-"+axes[b]];o[j]=$}}}return o},createRenderState=()=>({});class ThreeVisualElement extends VisualElement{constructor(){super(...arguments),this.type="three"}readValueFromInstance(a,o){return readThreeValue(a,o)}getBaseTargetFromProps(){}sortInstanceNodePosition(a,o){return a.id-o.id}makeTargetAnimatableFromInstance(a){var{transition:o,transitionEnd:c}=a,d=__rest$2(a,["transition","transitionEnd"]);return checkTargetForNewValues(this,d,{}),Object.assign(Object.assign({},d),{transition:o,transitionEnd:c})}removeValueFromRenderState(){}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(a,o){return scrapeMotionValuesFromProps(a,o)}build(a,o){for(const c in o)a[c]=o[c]}renderInstance(a,o){for(const c in o)setThreeValue(a,c,o)}}const createVisualElement=(s,a)=>new ThreeVisualElement(a,{}),useVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState}),preloadedFeatures=Object.assign({},animations);function custom(s){return createMotionComponent({Component:s,preloadedFeatures,useRender,useVisualState,createVisualElement})}const componentCache=new Map,motion=new Proxy(custom,{get:(s,a)=>(!componentCache.has(a)&&componentCache.set(a,custom(a)),componentCache.get(a))});function DonutModel(s){const{glazeColor:a,baseColor:o,texture:c}=s,d=reactExports.useRef(),{nodes:b,materials:$}=useGLTF("/donut_cat/scene.gltf");return console.log(c),jsx("group",{ref:d,...s,dispose:null,children:jsx("group",{name:"Sketchfab_Scene",children:jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],scale:1.256,children:jsx("group",{name:"root",children:jsx("group",{name:"GLTF_SceneRootNode",rotation:[Math.PI/2,0,0],children:jsxs("group",{name:"donut_2",position:[0,.024,0],rotation:[0,0,0],children:[jsxs("group",{name:"polewka_0",children:[jsx("mesh",{name:"Object_6",geometry:b.Object_6.geometry,material:a,"material-map":c}),jsx("mesh",{name:"Object_7",geometry:b.Object_7.geometry,material:a,"material-map":c})]}),jsxs("group",{name:"twarz_1",position:[-.003,-.005,.082],rotation:[-Math.PI/2,0,0],scale:[-.012,.012,.012],children:[jsx("mesh",{name:"Object_9",geometry:b.Object_9.geometry,material:$["Material.002"]}),jsx("mesh",{name:"Object_10",geometry:b.Object_10.geometry,material:$["Material.005"]})]}),jsx("mesh",{name:"Object_4",geometry:b.Object_4.geometry,material:o,"material-map":c})]})})})})})})}useGLTF.preload("/donut_cat/scene.gltf");function DonutScene(s){const{glazeColor:a,baseColor:o,texture:c}=s,d=reactExports.useRef(),b=1.1;return useFrame(($,j)=>{d.current.rotation.y+=.5*j}),jsx(Fragment,{children:jsxs(motion.mesh,{ref:d,whileHover:{scale:1.2},children:[jsx("ambientLight",{}),jsx("spotLight",{intensity:.5}),jsx(DonutModel,{scale:[b,b,b],glazeColor:a,baseColor:o,texture:c})]})})}const queryClient=new QueryClient;function App(){const{materials:s}=useGLTF("./donut_cat/scene.gltf"),[a,o]=reactExports.useState(s["Material.004"].clone()),[c,d]=reactExports.useState("0px"),[b,$]=reactExports.useState("160px"),[j,_e]=reactExports.useState(s["Material.003"].clone()),et=800,[tt,rt]=reactExports.useState(""),nt=reactExports.useRef();reactExports.useEffect(()=>{const dt=()=>{requestAnimationFrame(()=>{const ft=document.height!==void 0?document.height:document.body.offsetHeight,mt=document.width!==void 0?document.width:document.body.offsetWidth,vt=window.scrollY/ft,yt=mt-et;d(`${yt*vt*.7}px`),$(`${160+30*vt}px`)})};return window.addEventListener("scroll",dt),()=>window.removeEventListener("scroll",dt)},[c,b]);function it(dt){const ft=a.clone();ft.color=new Color(dt),o(ft)}function at(dt){const ft=j.clone();ft.color=new Color(dt),_e(ft)}function ct(dt){rt(dt)}const st=dt=>{nt.current.dispatchEvent(new MouseEvent("pointermove",dt.nativeEvent))},ot=dt=>{nt.current.dispatchEvent(new MouseEvent("pointerdown",dt.nativeEvent))},ht=dt=>{nt.current.dispatchEvent(new MouseEvent("pointerup",dt.nativeEvent))};return jsxs("div",{style:{position:"relative",scrollBehavior:"smooth"},children:[jsxs(Canvas,{ref:nt,shadows:!0,camera:{fov:3.2,near:.1,far:1e3,position:[3,3,5]},style:{position:"fixed",height:"100vh",width:`${et}px`,marginLeft:c,marginTop:b,background:"rgba(0, 0, 200, 0)"},children:[jsx(OrbitControls,{enableZoom:!1,enablePan:!1}),jsx(DonutScene,{glazeColor:a,baseColor:j,texture:tt})]}),jsx("div",{style:{position:"absolute",top:0,left:0},onPointerMove:st,onPointerDown:ot,onPointerUp:ht,children:jsx(QueryClientProvider,{client:queryClient,children:jsx(Interfaces,{updateGlaze:it,updateBase:at,updateTexture:ct})})})]})}function Donuts(s){const{glazeColorCode:a,baseColorCode:o,gold:c}=s,{materials:d}=useGLTF("./donut_cat/scene.gltf"),b=useLoader(TextureLoader,"gold.jpg"),$=d["Material.003"].clone();$.color=new Color(c==0?o:"#FFFFFF");const j=d["Material.003"].clone();j.color=new Color(c==0?a:"#FFFFFF");const _e=reactExports.useRef();return useFrame((et,tt)=>{_e.current.rotation.y+=.5*tt,_e.current.rotation.x+=.5*tt}),jsxs("mesh",{ref:_e,children:[jsx("ambientLight",{}),jsx("spotLight",{intensity:.5}),jsx(DonutModel,{scale:[1.5,1.5,1.5],glazeColor:j,baseColor:$,texture:c==1?b:null})]})}function DonutCard({donut:s}){const a=useQueryClient(),o=useMutation({mutationFn:async({id:d,token:b})=>delDonut(d,b),onSuccess:()=>{a.invalidateQueries(["donutList"])}});async function c(d,b){const j=(await fetchAuthSession()).tokens.idToken.toString();d.preventDefault(),console.log(s.id),o.mutate({id:b,token:j})}return jsxs("div",{className:"flex flex-col items-center bg-white border border-gray-200 rounded-lg shadow md:flex-row md:max-w-xl hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 mb-8",children:[jsx("div",{className:"object-cover w-full h-96 md:h-48 md:w-40 md:rounded-none md:rounded-l-lg",children:jsxs(Canvas,{shadows:!0,camera:{fov:3.2,near:.1,far:1e3,position:[3,3,5]},style:{background:"rgb(249, 249, 249)",borderRadius:"0px 80px 80px 0px"},children:[jsx(OrbitControls,{enableZoom:!1}),jsx(Donuts,{glazeColorCode:s.glazeColor,baseColorCode:s.baseColor,gold:s.gold})]})},s.id),jsxs("div",{className:"flex flex-col justify-between p-4 leading-normal",children:[jsxs("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900",children:[s.baseName," base with ",s.glazeName," topping"]}),s.gold==1?jsx("h4",{className:"mb-2 text-2xl font-bold tracking-tight text-[#a8a83f]",children:"coated with gold"}):null,jsxs("p",{className:"mb-3 font-normal text-gray-700",children:["Price: $",s.price]}),jsx("button",{onClick:d=>c(d,s.id),className:"mt-3 p-3 bg-[#eeebe1] hover:bg-[#e5e0cb] rounded-full",children:"Eat this Donut"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(s,a){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])})(s,a)};function __extends(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function o(){this.constructor=s}extendStatics(s,a),s.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}var __assign$2=function(){return(__assign$2=Object.assign||function(s){for(var a,o=1,c=arguments.length;o<c;o++)for(var d in a=arguments[o])Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d]);return s}).apply(this,arguments)};function __awaiter(s,a,o,c){return new(o||(o=Promise))(function(d,b){function $(et){try{_e(c.next(et))}catch(tt){b(tt)}}function j(et){try{_e(c.throw(et))}catch(tt){b(tt)}}function _e(et){var tt;et.done?d(et.value):(tt=et.value,tt instanceof o?tt:new o(function(rt){rt(tt)})).then($,j)}_e((c=c.apply(s,a||[])).next())})}function __generator(s,a){var o,c,d,b,$={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return b={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function j(_e){return function(et){return function(tt){if(o)throw new TypeError("Generator is already executing.");for(;$;)try{if(o=1,c&&(d=2&tt[0]?c.return:tt[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,tt[1])).done)return d;switch(c=0,d&&(tt=[2&tt[0],d.value]),tt[0]){case 0:case 1:d=tt;break;case 4:return $.label++,{value:tt[1],done:!1};case 5:$.label++,c=tt[1],tt=[0];continue;case 7:tt=$.ops.pop(),$.trys.pop();continue;default:if(d=$.trys,!((d=d.length>0&&d[d.length-1])||tt[0]!==6&&tt[0]!==2)){$=0;continue}if(tt[0]===3&&(!d||tt[1]>d[0]&&tt[1]<d[3])){$.label=tt[1];break}if(tt[0]===6&&$.label<d[1]){$.label=d[1],d=tt;break}if(d&&$.label<d[2]){$.label=d[2],$.ops.push(tt);break}d[2]&&$.ops.pop(),$.trys.pop();continue}tt=a.call(s,$)}catch(rt){tt=[6,rt],c=0}finally{o=d=0}if(5&tt[0])throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}([_e,et])}}}function createCommonjsModule(s,a){return s(a={exports:{}},a.exports),a.exports}var lottie=createCommonjsModule(function(module,exports){typeof navigator<"u"&&function(s,a){module.exports=a()}(0,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(s){_useWebWorker=!!s},getWebWorker=function(){return _useWebWorker},setLocationHref=function(s){locationHref=s},getLocationHref=function(){return locationHref};function createTag(s){return document.createElement(s)}function extendPrototype(s,a){var o,c,d=s.length;for(o=0;o<d;o+=1)for(var b in c=s[o].prototype)Object.prototype.hasOwnProperty.call(c,b)&&(a.prototype[b]=c[b])}function getDescriptor(s,a){return Object.getOwnPropertyDescriptor(s,a)}function createProxyFunction(s){function a(){}return a.prototype=s,a}var audioControllerFactory=function(){function s(a){this.audios=[],this.audioFactory=a,this._volume=1,this._isMuted=!1}return s.prototype={addAudio:function(a){this.audios.push(a)},pause:function(){var a,o=this.audios.length;for(a=0;a<o;a+=1)this.audios[a].pause()},resume:function(){var a,o=this.audios.length;for(a=0;a<o;a+=1)this.audios[a].resume()},setRate:function(a){var o,c=this.audios.length;for(o=0;o<c;o+=1)this.audios[o].setRate(a)},createAudio:function(a){return this.audioFactory?this.audioFactory(a):window.Howl?new window.Howl({src:[a]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(a){this.audioFactory=a},setVolume:function(a){this._volume=a,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var a,o=this.audios.length;for(a=0;a<o;a+=1)this.audios[a].volume(this._volume*(this._isMuted?0:1))}},function(){return new s}}(),createTypedArray=function(){function s(a,o){var c,d=0,b=[];switch(a){case"int16":case"uint8c":c=1;break;default:c=1.1}for(d=0;d<o;d+=1)b.push(c);return b}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(a,o){return a==="float32"?new Float32Array(o):a==="int16"?new Int16Array(o):a==="uint8c"?new Uint8ClampedArray(o):s(a,o)}:s}();function createSizedArray(s){return Array.apply(null,{length:s})}function _typeof$6(s){return(_typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var s,a=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],o=a.length;for(s=0;s<o;s+=1)BMMath[a[s]]=Math[a[s]]})(),BMMath.random=Math.random,BMMath.abs=function(s){if(_typeof$6(s)==="object"&&s.length){var a,o=createSizedArray(s.length),c=s.length;for(a=0;a<c;a+=1)o[a]=Math.abs(s[a]);return o}return Math.abs(s)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(s){s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.display="block",s.style.transformOrigin="0 0",s.style.webkitTransformOrigin="0 0",s.style.backfaceVisibility="visible",s.style.webkitBackfaceVisibility="visible",s.style.transformStyle="preserve-3d",s.style.webkitTransformStyle="preserve-3d",s.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(s,a,o,c){this.type=s,this.currentTime=a,this.totalTime=o,this.direction=c<0?-1:1}function BMCompleteEvent(s,a){this.type=s,this.direction=a<0?-1:1}function BMCompleteLoopEvent(s,a,o,c){this.type=s,this.currentLoop=o,this.totalLoops=a,this.direction=c<0?-1:1}function BMSegmentStartEvent(s,a,o){this.type=s,this.firstFrame=a,this.totalFrames=o}function BMDestroyEvent(s,a){this.type=s,this.target=a}function BMRenderFrameErrorEvent(s,a){this.type="renderFrameError",this.nativeError=s,this.currentTime=a}function BMConfigErrorEvent(s){this.type="configError",this.nativeError=s}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(s,a,o){var c,d,b,$,j,_e,et,tt;switch(_e=o*(1-a),et=o*(1-(j=6*s-($=Math.floor(6*s)))*a),tt=o*(1-(1-j)*a),$%6){case 0:c=o,d=tt,b=_e;break;case 1:c=et,d=o,b=_e;break;case 2:c=_e,d=o,b=tt;break;case 3:c=_e,d=et,b=o;break;case 4:c=tt,d=_e,b=o;break;case 5:c=o,d=_e,b=et}return[c,d,b]}function RGBtoHSV(s,a,o){var c,d=Math.max(s,a,o),b=Math.min(s,a,o),$=d-b,j=d===0?0:$/d,_e=d/255;switch(d){case b:c=0;break;case s:c=a-o+$*(a<o?6:0),c/=6*$;break;case a:c=o-s+2*$,c/=6*$;break;case o:c=s-a+4*$,c/=6*$}return[c,j,_e]}function addSaturationToRGB(s,a){var o=RGBtoHSV(255*s[0],255*s[1],255*s[2]);return o[1]+=a,o[1]>1?o[1]=1:o[1]<=0&&(o[1]=0),HSVtoRGB(o[0],o[1],o[2])}function addBrightnessToRGB(s,a){var o=RGBtoHSV(255*s[0],255*s[1],255*s[2]);return o[2]+=a,o[2]>1?o[2]=1:o[2]<0&&(o[2]=0),HSVtoRGB(o[0],o[1],o[2])}function addHueToRGB(s,a){var o=RGBtoHSV(255*s[0],255*s[1],255*s[2]);return o[0]+=a/360,o[0]>1?o[0]-=1:o[0]<0&&(o[0]+=1),HSVtoRGB(o[0],o[1],o[2])}var rgbToHex=function(){var s,a,o=[];for(s=0;s<256;s+=1)a=s.toString(16),o[s]=a.length===1?"0"+a:a;return function(c,d,b){return c<0&&(c=0),d<0&&(d=0),b<0&&(b=0),"#"+o[c]+o[d]+o[b]}}(),setSubframeEnabled=function(s){subframeEnabled=!!s},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(s){expressionsPlugin=s},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(s){expressionsInterfaces=s},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(s){defaultCurveSegments=s},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(s){idPrefix$1=s};function createNS(s){return document.createElementNS(svgNS,s)}function _typeof$5(s){return(_typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var dataManager=function(){var s,a,o=1,c=[],d={onmessage:function(){},postMessage:function(_e){s({data:_e})}},b={postMessage:function(_e){d.onmessage({data:_e})}};function $(){a||((a=function(_e){if(window.Worker&&window.Blob&&getWebWorker()){var et=new Blob(["var _workerSelf = self; self.onmessage = ",_e.toString()],{type:"text/javascript"}),tt=URL.createObjectURL(et);return new Worker(tt)}return s=_e,d}(function(_e){if(b.dataManager||(b.dataManager=function(){function tt(vt,yt){var Et,St,Ct,wt,_t,Tt,Mt=vt.length;for(St=0;St<Mt;St+=1)if("ks"in(Et=vt[St])&&!Et.completed){if(Et.completed=!0,Et.hasMask){var Bt=Et.masksProperties;for(wt=Bt.length,Ct=0;Ct<wt;Ct+=1)if(Bt[Ct].pt.k.i)it(Bt[Ct].pt.k);else for(Tt=Bt[Ct].pt.k.length,_t=0;_t<Tt;_t+=1)Bt[Ct].pt.k[_t].s&&it(Bt[Ct].pt.k[_t].s[0]),Bt[Ct].pt.k[_t].e&&it(Bt[Ct].pt.k[_t].e[0])}Et.ty===0?(Et.layers=rt(Et.refId,yt),tt(Et.layers,yt)):Et.ty===4?nt(Et.shapes):Et.ty===5&&mt(Et)}}function rt(vt,yt){var Et=function(St,Ct){for(var wt=0,_t=Ct.length;wt<_t;){if(Ct[wt].id===St)return Ct[wt];wt+=1}return null}(vt,yt);return Et?Et.layers.__used?JSON.parse(JSON.stringify(Et.layers)):(Et.layers.__used=!0,Et.layers):null}function nt(vt){var yt,Et,St;for(yt=vt.length-1;yt>=0;yt-=1)if(vt[yt].ty==="sh")if(vt[yt].ks.k.i)it(vt[yt].ks.k);else for(St=vt[yt].ks.k.length,Et=0;Et<St;Et+=1)vt[yt].ks.k[Et].s&&it(vt[yt].ks.k[Et].s[0]),vt[yt].ks.k[Et].e&&it(vt[yt].ks.k[Et].e[0]);else vt[yt].ty==="gr"&&nt(vt[yt].it)}function it(vt){var yt,Et=vt.i.length;for(yt=0;yt<Et;yt+=1)vt.i[yt][0]+=vt.v[yt][0],vt.i[yt][1]+=vt.v[yt][1],vt.o[yt][0]+=vt.v[yt][0],vt.o[yt][1]+=vt.v[yt][1]}function at(vt,yt){var Et=yt?yt.split("."):[100,100,100];return vt[0]>Et[0]||!(Et[0]>vt[0])&&(vt[1]>Et[1]||!(Et[1]>vt[1])&&(vt[2]>Et[2]||!(Et[2]>vt[2])&&null))}var ct,st=function(){var vt=[4,4,14];function yt(Et){var St,Ct,wt,_t=Et.length;for(St=0;St<_t;St+=1)Et[St].ty===5&&(Ct=Et[St],wt=void 0,wt=Ct.t.d,Ct.t.d={k:[{s:wt,t:0}]})}return function(Et){if(at(vt,Et.v)&&(yt(Et.layers),Et.assets)){var St,Ct=Et.assets.length;for(St=0;St<Ct;St+=1)Et.assets[St].layers&&yt(Et.assets[St].layers)}}}(),ot=(ct=[4,7,99],function(vt){if(vt.chars&&!at(ct,vt.v)){var yt,Et=vt.chars.length;for(yt=0;yt<Et;yt+=1){var St=vt.chars[yt];St.data&&St.data.shapes&&(nt(St.data.shapes),St.data.ip=0,St.data.op=99999,St.data.st=0,St.data.sr=1,St.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},vt.chars[yt].t||(St.data.shapes.push({ty:"no"}),St.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),ht=function(){var vt=[5,7,15];function yt(Et){var St,Ct,wt,_t=Et.length;for(St=0;St<_t;St+=1)Et[St].ty===5&&(Ct=Et[St],wt=void 0,typeof(wt=Ct.t.p).a=="number"&&(wt.a={a:0,k:wt.a}),typeof wt.p=="number"&&(wt.p={a:0,k:wt.p}),typeof wt.r=="number"&&(wt.r={a:0,k:wt.r}))}return function(Et){if(at(vt,Et.v)&&(yt(Et.layers),Et.assets)){var St,Ct=Et.assets.length;for(St=0;St<Ct;St+=1)Et.assets[St].layers&&yt(Et.assets[St].layers)}}}(),dt=function(){var vt=[4,1,9];function yt(St){var Ct,wt,_t,Tt=St.length;for(Ct=0;Ct<Tt;Ct+=1)if(St[Ct].ty==="gr")yt(St[Ct].it);else if(St[Ct].ty==="fl"||St[Ct].ty==="st")if(St[Ct].c.k&&St[Ct].c.k[0].i)for(_t=St[Ct].c.k.length,wt=0;wt<_t;wt+=1)St[Ct].c.k[wt].s&&(St[Ct].c.k[wt].s[0]/=255,St[Ct].c.k[wt].s[1]/=255,St[Ct].c.k[wt].s[2]/=255,St[Ct].c.k[wt].s[3]/=255),St[Ct].c.k[wt].e&&(St[Ct].c.k[wt].e[0]/=255,St[Ct].c.k[wt].e[1]/=255,St[Ct].c.k[wt].e[2]/=255,St[Ct].c.k[wt].e[3]/=255);else St[Ct].c.k[0]/=255,St[Ct].c.k[1]/=255,St[Ct].c.k[2]/=255,St[Ct].c.k[3]/=255}function Et(St){var Ct,wt=St.length;for(Ct=0;Ct<wt;Ct+=1)St[Ct].ty===4&&yt(St[Ct].shapes)}return function(St){if(at(vt,St.v)&&(Et(St.layers),St.assets)){var Ct,wt=St.assets.length;for(Ct=0;Ct<wt;Ct+=1)St.assets[Ct].layers&&Et(St.assets[Ct].layers)}}}(),ft=function(){var vt=[4,4,18];function yt(St){var Ct,wt,_t;for(Ct=St.length-1;Ct>=0;Ct-=1)if(St[Ct].ty==="sh")if(St[Ct].ks.k.i)St[Ct].ks.k.c=St[Ct].closed;else for(_t=St[Ct].ks.k.length,wt=0;wt<_t;wt+=1)St[Ct].ks.k[wt].s&&(St[Ct].ks.k[wt].s[0].c=St[Ct].closed),St[Ct].ks.k[wt].e&&(St[Ct].ks.k[wt].e[0].c=St[Ct].closed);else St[Ct].ty==="gr"&&yt(St[Ct].it)}function Et(St){var Ct,wt,_t,Tt,Mt,Bt,Rt=St.length;for(wt=0;wt<Rt;wt+=1){if((Ct=St[wt]).hasMask){var bt=Ct.masksProperties;for(Tt=bt.length,_t=0;_t<Tt;_t+=1)if(bt[_t].pt.k.i)bt[_t].pt.k.c=bt[_t].cl;else for(Bt=bt[_t].pt.k.length,Mt=0;Mt<Bt;Mt+=1)bt[_t].pt.k[Mt].s&&(bt[_t].pt.k[Mt].s[0].c=bt[_t].cl),bt[_t].pt.k[Mt].e&&(bt[_t].pt.k[Mt].e[0].c=bt[_t].cl)}Ct.ty===4&&yt(Ct.shapes)}}return function(St){if(at(vt,St.v)&&(Et(St.layers),St.assets)){var Ct,wt=St.assets.length;for(Ct=0;Ct<wt;Ct+=1)St.assets[Ct].layers&&Et(St.assets[Ct].layers)}}}();function mt(vt){vt.t.a.length===0&&vt.t.p}var gt={completeData:function(vt){vt.__complete||(dt(vt),st(vt),ot(vt),ht(vt),ft(vt),tt(vt.layers,vt.assets),function(yt,Et){if(yt){var St=0,Ct=yt.length;for(St=0;St<Ct;St+=1)yt[St].t===1&&(yt[St].data.layers=rt(yt[St].data.refId,Et),tt(yt[St].data.layers,Et))}}(vt.chars,vt.assets),vt.__complete=!0)}};return gt.checkColors=dt,gt.checkChars=ot,gt.checkPathProperties=ht,gt.checkShapes=ft,gt.completeLayers=tt,gt}()),b.assetLoader||(b.assetLoader=function(){function tt(rt){var nt=rt.getResponseHeader("content-type");return nt&&rt.responseType==="json"&&nt.indexOf("json")!==-1||rt.response&&_typeof$5(rt.response)==="object"?rt.response:rt.response&&typeof rt.response=="string"?JSON.parse(rt.response):rt.responseText?JSON.parse(rt.responseText):null}return{load:function(rt,nt,it,at){var ct,st=new XMLHttpRequest;try{st.responseType="json"}catch{}st.onreadystatechange=function(){if(st.readyState===4)if(st.status===200)ct=tt(st),it(ct);else try{ct=tt(st),it(ct)}catch(ot){at&&at(ot)}};try{st.open(["G","E","T"].join(""),rt,!0)}catch{st.open(["G","E","T"].join(""),nt+"/"+rt,!0)}st.send()}}}()),_e.data.type==="loadAnimation")b.assetLoader.load(_e.data.path,_e.data.fullPath,function(tt){b.dataManager.completeData(tt),b.postMessage({id:_e.data.id,payload:tt,status:"success"})},function(){b.postMessage({id:_e.data.id,status:"error"})});else if(_e.data.type==="complete"){var et=_e.data.animation;b.dataManager.completeData(et),b.postMessage({id:_e.data.id,payload:et,status:"success"})}else _e.data.type==="loadData"&&b.assetLoader.load(_e.data.path,_e.data.fullPath,function(tt){b.postMessage({id:_e.data.id,payload:tt,status:"success"})},function(){b.postMessage({id:_e.data.id,status:"error"})})})).onmessage=function(_e){var et=_e.data,tt=et.id,rt=c[tt];c[tt]=null,et.status==="success"?rt.onComplete(et.payload):rt.onError&&rt.onError()})}function j(_e,et){var tt="processId_"+(o+=1);return c[tt]={onComplete:_e,onError:et},tt}return{loadAnimation:function(_e,et,tt){$();var rt=j(et,tt);a.postMessage({type:"loadAnimation",path:_e,fullPath:window.location.origin+window.location.pathname,id:rt})},loadData:function(_e,et,tt){$();var rt=j(et,tt);a.postMessage({type:"loadData",path:_e,fullPath:window.location.origin+window.location.pathname,id:rt})},completeAnimation:function(_e,et,tt){$();var rt=j(et,tt);a.postMessage({type:"complete",animation:_e,id:rt})}}}(),ImagePreloader=function(){var s=function(){var j=createTag("canvas");j.width=1,j.height=1;var _e=j.getContext("2d");return _e.fillStyle="rgba(0,0,0,0)",_e.fillRect(0,0,1,1),j}();function a(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function o(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function c(j,_e,et){var tt="";if(j.e)tt=j.p;else if(_e){var rt=j.p;rt.indexOf("images/")!==-1&&(rt=rt.split("/")[1]),tt=_e+rt}else tt=et,tt+=j.u?j.u:"",tt+=j.p;return tt}function d(j){var _e=0,et=setInterval((function(){(j.getBBox().width||_e>500)&&(this._imageLoaded(),clearInterval(et)),_e+=1}).bind(this),50)}function b(j){var _e={assetData:j},et=c(j,this.assetsPath,this.path);return dataManager.loadData(et,(function(tt){_e.img=tt,this._footageLoaded()}).bind(this),(function(){_e.img={},this._footageLoaded()}).bind(this)),_e}function $(){this._imageLoaded=a.bind(this),this._footageLoaded=o.bind(this),this.testImageLoaded=d.bind(this),this.createFootageData=b.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return $.prototype={loadAssets:function(j,_e){var et;this.imagesLoadedCb=_e;var tt=j.length;for(et=0;et<tt;et+=1)j[et].layers||(j[et].t&&j[et].t!=="seq"?j[et].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(j[et]))):(this.totalImages+=1,this.images.push(this._createImageData(j[et]))))},setAssetsPath:function(j){this.assetsPath=j||""},setPath:function(j){this.path=j||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(j){for(var _e=0,et=this.images.length;_e<et;){if(this.images[_e].assetData===j)return this.images[_e].img;_e+=1}return null},createImgData:function(j){var _e=c(j,this.assetsPath,this.path),et=createTag("img");et.crossOrigin="anonymous",et.addEventListener("load",this._imageLoaded,!1),et.addEventListener("error",(function(){tt.img=s,this._imageLoaded()}).bind(this),!1),et.src=_e;var tt={img:et,assetData:j};return tt},createImageData:function(j){var _e=c(j,this.assetsPath,this.path),et=createNS("image");isSafari?this.testImageLoaded(et):et.addEventListener("load",this._imageLoaded,!1),et.addEventListener("error",(function(){tt.img=s,this._imageLoaded()}).bind(this),!1),et.setAttributeNS("http://www.w3.org/1999/xlink","href",_e),this._elementHelper.append?this._elementHelper.append(et):this._elementHelper.appendChild(et);var tt={img:et,assetData:j};return tt},imageLoaded:a,footageLoaded:o,setCacheType:function(j,_e){j==="svg"?(this._elementHelper=_e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},$}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(s,a){if(this._cbs[s])for(var o=this._cbs[s],c=0;c<o.length;c+=1)o[c](a)},addEventListener:function(s,a){return this._cbs[s]||(this._cbs[s]=[]),this._cbs[s].push(a),(function(){this.removeEventListener(s,a)}).bind(this)},removeEventListener:function(s,a){if(a){if(this._cbs[s]){for(var o=0,c=this._cbs[s].length;o<c;)this._cbs[s][o]===a&&(this._cbs[s].splice(o,1),o-=1,c-=1),o+=1;this._cbs[s].length||(this._cbs[s]=null)}}else this._cbs[s]=null}};var markerParser=function(){function s(a){for(var o,c=a.split(`\r
`),d={},b=0,$=0;$<c.length;$+=1)(o=c[$].split(":")).length===2&&(d[o[0]]=o[1].trim(),b+=1);if(b===0)throw new Error;return d}return function(a){for(var o=[],c=0;c<a.length;c+=1){var d=a[c],b={time:d.tm,duration:d.dr};try{b.payload=JSON.parse(a[c].cm)}catch{try{b.payload=s(a[c].cm)}catch{b.payload={name:a[c].cm}}}o.push(b)}return o}}(),ProjectInterface=function(){function s(a){this.compositions.push(a)}return function(){function a(o){for(var c=0,d=this.compositions.length;c<d;){if(this.compositions[c].data&&this.compositions[c].data.nm===o)return this.compositions[c].prepareFrame&&this.compositions[c].data.xt&&this.compositions[c].prepareFrame(this.currentFrame),this.compositions[c].compInterface;c+=1}return null}return a.compositions=[],a.currentFrame=0,a.registerComposition=s,a}}(),renderers={},registerRenderer=function(s,a){renderers[s]=a};function getRenderer(s){return renderers[s]}function _typeof$4(s){return(_typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(s){(s.wrapper||s.container)&&(this.wrapper=s.wrapper||s.container);var a="svg";s.animType?a=s.animType:s.renderer&&(a=s.renderer);var o=getRenderer(a);this.renderer=new o(this,s.rendererSettings),this.imagePreloader.setCacheType(a,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=a,s.loop===""||s.loop===null||s.loop===void 0||s.loop===!0?this.loop=!0:s.loop===!1?this.loop=!1:this.loop=parseInt(s.loop,10),this.autoplay=!("autoplay"in s)||s.autoplay,this.name=s.name?s.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(s,"autoloadSegments")||s.autoloadSegments,this.assetsPath=s.assetsPath,this.initialSegment=s.initialSegment,s.audioFactory&&this.audioController.setAudioFactory(s.audioFactory),s.animationData?this.setupAnimation(s.animationData):s.path&&(s.path.lastIndexOf("\\")!==-1?this.path=s.path.substr(0,s.path.lastIndexOf("\\")+1):this.path=s.path.substr(0,s.path.lastIndexOf("/")+1),this.fileName=s.path.substr(s.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(s.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(s){dataManager.completeAnimation(s,this.configAnimation)},AnimationItem.prototype.setData=function(s,a){a&&_typeof$4(a)!=="object"&&(a=JSON.parse(a));var o={wrapper:s,animationData:a},c=s.attributes;o.path=c.getNamedItem("data-animation-path")?c.getNamedItem("data-animation-path").value:c.getNamedItem("data-bm-path")?c.getNamedItem("data-bm-path").value:c.getNamedItem("bm-path")?c.getNamedItem("bm-path").value:"",o.animType=c.getNamedItem("data-anim-type")?c.getNamedItem("data-anim-type").value:c.getNamedItem("data-bm-type")?c.getNamedItem("data-bm-type").value:c.getNamedItem("bm-type")?c.getNamedItem("bm-type").value:c.getNamedItem("data-bm-renderer")?c.getNamedItem("data-bm-renderer").value:c.getNamedItem("bm-renderer")?c.getNamedItem("bm-renderer").value:"canvas";var d=c.getNamedItem("data-anim-loop")?c.getNamedItem("data-anim-loop").value:c.getNamedItem("data-bm-loop")?c.getNamedItem("data-bm-loop").value:c.getNamedItem("bm-loop")?c.getNamedItem("bm-loop").value:"";d==="false"?o.loop=!1:d==="true"?o.loop=!0:d!==""&&(o.loop=parseInt(d,10));var b=c.getNamedItem("data-anim-autoplay")?c.getNamedItem("data-anim-autoplay").value:c.getNamedItem("data-bm-autoplay")?c.getNamedItem("data-bm-autoplay").value:!c.getNamedItem("bm-autoplay")||c.getNamedItem("bm-autoplay").value;o.autoplay=b!=="false",o.name=c.getNamedItem("data-name")?c.getNamedItem("data-name").value:c.getNamedItem("data-bm-name")?c.getNamedItem("data-bm-name").value:c.getNamedItem("bm-name")?c.getNamedItem("bm-name").value:"",(c.getNamedItem("data-anim-prerender")?c.getNamedItem("data-anim-prerender").value:c.getNamedItem("data-bm-prerender")?c.getNamedItem("data-bm-prerender").value:c.getNamedItem("bm-prerender")?c.getNamedItem("bm-prerender").value:"")==="false"&&(o.prerender=!1),this.setParams(o)},AnimationItem.prototype.includeLayers=function(s){s.op>this.animationData.op&&(this.animationData.op=s.op,this.totalFrames=Math.floor(s.op-this.animationData.ip));var a,o,c=this.animationData.layers,d=c.length,b=s.layers,$=b.length;for(o=0;o<$;o+=1)for(a=0;a<d;){if(c[a].id===b[o].id){c[a]=b[o];break}a+=1}if((s.chars||s.fonts)&&(this.renderer.globalData.fontManager.addChars(s.chars),this.renderer.globalData.fontManager.addFonts(s.fonts,this.renderer.globalData.defs)),s.assets)for(d=s.assets.length,a=0;a<d;a+=1)this.animationData.assets.push(s.assets[a]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(s){this.animationData=s;var a=getExpressionsPlugin();a&&a.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var s=this.animationData.segments;if(!s||s.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var a=s.shift();this.timeCompleted=a.time*this.frameRate;var o=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(o,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(s){if(this.renderer)try{this.animationData=s,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(s),s.assets||(s.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(s.assets),this.markers=markerParser(s.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(a){this.triggerConfigError(a)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(s,a){var o=typeof s=="number"?s:void 0,c=typeof a=="number"?a:void 0;this.renderer.updateContainerSize(o,c)},AnimationItem.prototype.setSubframe=function(s){this.isSubframeEnabled=!!s},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(s){this.triggerRenderFrameError(s)}},AnimationItem.prototype.play=function(s){s&&this.name!==s||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(s){s&&this.name!==s||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(s){s&&this.name!==s||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(s){s&&this.name!==s||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(s){for(var a,o=0;o<this.markers.length;o+=1)if((a=this.markers[o]).payload&&a.payload.name===s)return a;return null},AnimationItem.prototype.goToAndStop=function(s,a,o){if(!o||this.name===o){var c=Number(s);if(isNaN(c)){var d=this.getMarkerData(s);d&&this.goToAndStop(d.time,!0)}else a?this.setCurrentRawFrameValue(s):this.setCurrentRawFrameValue(s*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(s,a,o){if(!o||this.name===o){var c=Number(s);if(isNaN(c)){var d=this.getMarkerData(s);d&&(d.duration?this.playSegments([d.time,d.time+d.duration],!0):this.goToAndStop(d.time,!0))}else this.goToAndStop(c,a,o);this.play()}},AnimationItem.prototype.advanceTime=function(s){if(this.isPaused!==!0&&this.isLoaded!==!1){var a=this.currentRawFrame+s*this.frameModifier,o=!1;a>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?a>=this.totalFrames?(this.playCount+=1,this.checkSegments(a%this.totalFrames)||(this.setCurrentRawFrameValue(a%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(a):this.checkSegments(a>this.totalFrames?a%this.totalFrames:0)||(o=!0,a=this.totalFrames-1):a<0?this.checkSegments(a%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(o=!0,a=0):(this.setCurrentRawFrameValue(this.totalFrames+a%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(a),o&&(this.setCurrentRawFrameValue(a),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(s,a){this.playCount=0,s[1]<s[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=s[0]-s[1],this.timeCompleted=this.totalFrames,this.firstFrame=s[1],this.setCurrentRawFrameValue(this.totalFrames-.001-a)):s[1]>s[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=s[1]-s[0],this.timeCompleted=this.totalFrames,this.firstFrame=s[0],this.setCurrentRawFrameValue(.001+a)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(s,a){var o=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<s?o=s:this.currentRawFrame+this.firstFrame>a&&(o=a-s)),this.firstFrame=s,this.totalFrames=a-s,this.timeCompleted=this.totalFrames,o!==-1&&this.goToAndStop(o,!0)},AnimationItem.prototype.playSegments=function(s,a){if(a&&(this.segments.length=0),_typeof$4(s[0])==="object"){var o,c=s.length;for(o=0;o<c;o+=1)this.segments.push(s[o])}else this.segments.push(s);this.segments.length&&a&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(s){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),s&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(s){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),s),!0)},AnimationItem.prototype.destroy=function(s){s&&this.name!==s||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(s){this.currentRawFrame=s,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(s){this.playSpeed=s,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(s){this.playDirection=s<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(s){this.loop=s},AnimationItem.prototype.setVolume=function(s,a){a&&this.name!==a||this.audioController.setVolume(s)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(s){s&&this.name!==s||this.audioController.mute()},AnimationItem.prototype.unmute=function(s){s&&this.name!==s||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(s){var a="";if(s.e)a=s.p;else if(this.assetsPath){var o=s.p;o.indexOf("images/")!==-1&&(o=o.split("/")[1]),a=this.assetsPath+o}else a=this.path,a+=s.u?s.u:"",a+=s.p;return a},AnimationItem.prototype.getAssetData=function(s){for(var a=0,o=this.assets.length;a<o;){if(s===this.assets[a].id)return this.assets[a];a+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(s){return s?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(s,a,o){try{this.renderer.getElementByPath(s).updateDocumentData(a,o)}catch{}},AnimationItem.prototype.trigger=function(s){if(this._cbs&&this._cbs[s])switch(s){case"enterFrame":this.triggerEvent(s,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(s,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(s,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(s,new BMCompleteEvent(s,this.frameMult));break;case"segmentStart":this.triggerEvent(s,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(s,new BMDestroyEvent(s,this));break;default:this.triggerEvent(s)}s==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameMult)),s==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult)),s==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(s,this.frameMult)),s==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames)),s==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(s,this))},AnimationItem.prototype.triggerRenderFrameError=function(s){var a=new BMRenderFrameErrorEvent(s,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)},AnimationItem.prototype.triggerConfigError=function(s){var a=new BMConfigErrorEvent(s,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)};var animationManager=function(){var s={},a=[],o=0,c=0,d=0,b=!0,$=!1;function j(ct){for(var st=0,ot=ct.target;st<c;)a[st].animation===ot&&(a.splice(st,1),st-=1,c-=1,ot.isPaused||tt()),st+=1}function _e(ct,st){if(!ct)return null;for(var ot=0;ot<c;){if(a[ot].elem===ct&&a[ot].elem!==null)return a[ot].animation;ot+=1}var ht=new AnimationItem;return rt(ht,ct),ht.setData(ct,st),ht}function et(){d+=1,at()}function tt(){d-=1}function rt(ct,st){ct.addEventListener("destroy",j),ct.addEventListener("_active",et),ct.addEventListener("_idle",tt),a.push({elem:st,animation:ct}),c+=1}function nt(ct){var st,ot=ct-o;for(st=0;st<c;st+=1)a[st].animation.advanceTime(ot);o=ct,d&&!$?window.requestAnimationFrame(nt):b=!0}function it(ct){o=ct,window.requestAnimationFrame(nt)}function at(){!$&&d&&b&&(window.requestAnimationFrame(it),b=!1)}return s.registerAnimation=_e,s.loadAnimation=function(ct){var st=new AnimationItem;return rt(st,null),st.setParams(ct),st},s.setSpeed=function(ct,st){var ot;for(ot=0;ot<c;ot+=1)a[ot].animation.setSpeed(ct,st)},s.setDirection=function(ct,st){var ot;for(ot=0;ot<c;ot+=1)a[ot].animation.setDirection(ct,st)},s.play=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.play(ct)},s.pause=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.pause(ct)},s.stop=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.stop(ct)},s.togglePause=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.togglePause(ct)},s.searchAnimations=function(ct,st,ot){var ht,dt=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ft=dt.length;for(ht=0;ht<ft;ht+=1)ot&&dt[ht].setAttribute("data-bm-type",ot),_e(dt[ht],ct);if(st&&ft===0){ot||(ot="svg");var mt=document.getElementsByTagName("body")[0];mt.innerText="";var gt=createTag("div");gt.style.width="100%",gt.style.height="100%",gt.setAttribute("data-bm-type",ot),mt.appendChild(gt),_e(gt,ct)}},s.resize=function(){var ct;for(ct=0;ct<c;ct+=1)a[ct].animation.resize()},s.goToAndStop=function(ct,st,ot){var ht;for(ht=0;ht<c;ht+=1)a[ht].animation.goToAndStop(ct,st,ot)},s.destroy=function(ct){var st;for(st=c-1;st>=0;st-=1)a[st].animation.destroy(ct)},s.freeze=function(){$=!0},s.unfreeze=function(){$=!1,at()},s.setVolume=function(ct,st){var ot;for(ot=0;ot<c;ot+=1)a[ot].animation.setVolume(ct,st)},s.mute=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.mute(ct)},s.unmute=function(ct){var st;for(st=0;st<c;st+=1)a[st].animation.unmute(ct)},s.getRegisteredAnimations=function(){var ct,st=a.length,ot=[];for(ct=0;ct<st;ct+=1)ot.push(a[ct].animation);return ot},s}(),BezierFactory=function(){var s={getBezierEasing:function(et,tt,rt,nt,it){var at=it||("bez_"+et+"_"+tt+"_"+rt+"_"+nt).replace(/\./g,"p");if(a[at])return a[at];var ct=new _e([et,tt,rt,nt]);return a[at]=ct,ct}},a={},o=typeof Float32Array=="function";function c(et,tt){return 1-3*tt+3*et}function d(et,tt){return 3*tt-6*et}function b(et){return 3*et}function $(et,tt,rt){return((c(tt,rt)*et+d(tt,rt))*et+b(tt))*et}function j(et,tt,rt){return 3*c(tt,rt)*et*et+2*d(tt,rt)*et+b(tt)}function _e(et){this._p=et,this._mSampleValues=o?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return _e.prototype={get:function(et){var tt=this._p[0],rt=this._p[1],nt=this._p[2],it=this._p[3];return this._precomputed||this._precompute(),tt===rt&&nt===it?et:et===0?0:et===1?1:$(this._getTForX(et),rt,it)},_precompute:function(){var et=this._p[0],tt=this._p[1],rt=this._p[2],nt=this._p[3];this._precomputed=!0,et===tt&&rt===nt||this._calcSampleValues()},_calcSampleValues:function(){for(var et=this._p[0],tt=this._p[2],rt=0;rt<11;++rt)this._mSampleValues[rt]=$(.1*rt,et,tt)},_getTForX:function(et){for(var tt=this._p[0],rt=this._p[2],nt=this._mSampleValues,it=0,at=1;at!==10&&nt[at]<=et;++at)it+=.1;var ct=it+.1*((et-nt[--at])/(nt[at+1]-nt[at])),st=j(ct,tt,rt);return st>=.001?function(ot,ht,dt,ft){for(var mt=0;mt<4;++mt){var gt=j(ht,dt,ft);if(gt===0)return ht;ht-=($(ht,dt,ft)-ot)/gt}return ht}(et,ct,tt,rt):st===0?ct:function(ot,ht,dt,ft,mt){var gt,vt,yt=0;do(gt=$(vt=ht+(dt-ht)/2,ft,mt)-ot)>0?dt=vt:ht=vt;while(Math.abs(gt)>1e-7&&++yt<10);return vt}(et,it,it+.1,tt,rt)}},s}(),pooling={double:function(s){return s.concat(createSizedArray(s.length))}},poolFactory=function(s,a,o){var c=0,d=s,b=createSizedArray(d);return{newElement:function(){return c?b[c-=1]:a()},release:function($){c===d&&(b=pooling.double(b),d*=2),o&&o($),b[c]=$,c+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(s){var a,o=s.lengths.length;for(a=0;a<o;a+=1)bezierLengthPool.release(s.lengths[a]);s.lengths.length=0});function bezFunction(){var s=Math;function a(et,tt,rt,nt,it,at){var ct=et*nt+tt*it+rt*at-it*nt-at*et-rt*tt;return ct>-.001&&ct<.001}var o=function(et,tt,rt,nt){var it,at,ct,st,ot,ht,dt=getDefaultCurveSegments(),ft=0,mt=[],gt=[],vt=bezierLengthPool.newElement();for(ct=rt.length,it=0;it<dt;it+=1){for(ot=it/(dt-1),ht=0,at=0;at<ct;at+=1)st=bmPow(1-ot,3)*et[at]+3*bmPow(1-ot,2)*ot*rt[at]+3*(1-ot)*bmPow(ot,2)*nt[at]+bmPow(ot,3)*tt[at],mt[at]=st,gt[at]!==null&&(ht+=bmPow(mt[at]-gt[at],2)),gt[at]=mt[at];ht&&(ft+=ht=bmSqrt(ht)),vt.percents[it]=ot,vt.lengths[it]=ft}return vt.addedLength=ft,vt};function c(et){this.segmentLength=0,this.points=new Array(et)}function d(et,tt){this.partialLength=et,this.point=tt}var b,$=(b={},function(et,tt,rt,nt){var it=(et[0]+"_"+et[1]+"_"+tt[0]+"_"+tt[1]+"_"+rt[0]+"_"+rt[1]+"_"+nt[0]+"_"+nt[1]).replace(/\./g,"p");if(!b[it]){var at,ct,st,ot,ht,dt,ft,mt=getDefaultCurveSegments(),gt=0,vt=null;et.length===2&&(et[0]!==tt[0]||et[1]!==tt[1])&&a(et[0],et[1],tt[0],tt[1],et[0]+rt[0],et[1]+rt[1])&&a(et[0],et[1],tt[0],tt[1],tt[0]+nt[0],tt[1]+nt[1])&&(mt=2);var yt=new c(mt);for(st=rt.length,at=0;at<mt;at+=1){for(ft=createSizedArray(st),ht=at/(mt-1),dt=0,ct=0;ct<st;ct+=1)ot=bmPow(1-ht,3)*et[ct]+3*bmPow(1-ht,2)*ht*(et[ct]+rt[ct])+3*(1-ht)*bmPow(ht,2)*(tt[ct]+nt[ct])+bmPow(ht,3)*tt[ct],ft[ct]=ot,vt!==null&&(dt+=bmPow(ft[ct]-vt[ct],2));gt+=dt=bmSqrt(dt),yt.points[at]=new d(dt,ft),vt=ft}yt.segmentLength=gt,b[it]=yt}return b[it]});function j(et,tt){var rt=tt.percents,nt=tt.lengths,it=rt.length,at=bmFloor((it-1)*et),ct=et*tt.addedLength,st=0;if(at===it-1||at===0||ct===nt[at])return rt[at];for(var ot=nt[at]>ct?-1:1,ht=!0;ht;)if(nt[at]<=ct&&nt[at+1]>ct?(st=(ct-nt[at])/(nt[at+1]-nt[at]),ht=!1):at+=ot,at<0||at>=it-1){if(at===it-1)return rt[at];ht=!1}return rt[at]+(rt[at+1]-rt[at])*st}var _e=createTypedArray("float32",8);return{getSegmentsLength:function(et){var tt,rt=segmentsLengthPool.newElement(),nt=et.c,it=et.v,at=et.o,ct=et.i,st=et._length,ot=rt.lengths,ht=0;for(tt=0;tt<st-1;tt+=1)ot[tt]=o(it[tt],it[tt+1],at[tt],ct[tt+1]),ht+=ot[tt].addedLength;return nt&&st&&(ot[tt]=o(it[tt],it[0],at[tt],ct[0]),ht+=ot[tt].addedLength),rt.totalLength=ht,rt},getNewSegment:function(et,tt,rt,nt,it,at,ct){it<0?it=0:it>1&&(it=1);var st,ot=j(it,ct),ht=j(at=at>1?1:at,ct),dt=et.length,ft=1-ot,mt=1-ht,gt=ft*ft*ft,vt=ot*ft*ft*3,yt=ot*ot*ft*3,Et=ot*ot*ot,St=ft*ft*mt,Ct=ot*ft*mt+ft*ot*mt+ft*ft*ht,wt=ot*ot*mt+ft*ot*ht+ot*ft*ht,_t=ot*ot*ht,Tt=ft*mt*mt,Mt=ot*mt*mt+ft*ht*mt+ft*mt*ht,Bt=ot*ht*mt+ft*ht*ht+ot*mt*ht,Rt=ot*ht*ht,bt=mt*mt*mt,Pt=ht*mt*mt+mt*ht*mt+mt*mt*ht,Dt=ht*ht*mt+mt*ht*ht+ht*mt*ht,$t=ht*ht*ht;for(st=0;st<dt;st+=1)_e[4*st]=s.round(1e3*(gt*et[st]+vt*rt[st]+yt*nt[st]+Et*tt[st]))/1e3,_e[4*st+1]=s.round(1e3*(St*et[st]+Ct*rt[st]+wt*nt[st]+_t*tt[st]))/1e3,_e[4*st+2]=s.round(1e3*(Tt*et[st]+Mt*rt[st]+Bt*nt[st]+Rt*tt[st]))/1e3,_e[4*st+3]=s.round(1e3*(bt*et[st]+Pt*rt[st]+Dt*nt[st]+$t*tt[st]))/1e3;return _e},getPointInSegment:function(et,tt,rt,nt,it,at){var ct=j(it,at),st=1-ct;return[s.round(1e3*(st*st*st*et[0]+(ct*st*st+st*ct*st+st*st*ct)*rt[0]+(ct*ct*st+st*ct*ct+ct*st*ct)*nt[0]+ct*ct*ct*tt[0]))/1e3,s.round(1e3*(st*st*st*et[1]+(ct*st*st+st*ct*st+st*st*ct)*rt[1]+(ct*ct*st+st*ct*ct+ct*st*ct)*nt[1]+ct*ct*ct*tt[1]))/1e3]},buildBezierData:$,pointOnLine2D:a,pointOnLine3D:function(et,tt,rt,nt,it,at,ct,st,ot){if(rt===0&&at===0&&ot===0)return a(et,tt,nt,it,ct,st);var ht,dt=s.sqrt(s.pow(nt-et,2)+s.pow(it-tt,2)+s.pow(at-rt,2)),ft=s.sqrt(s.pow(ct-et,2)+s.pow(st-tt,2)+s.pow(ot-rt,2)),mt=s.sqrt(s.pow(ct-nt,2)+s.pow(st-it,2)+s.pow(ot-at,2));return(ht=dt>ft?dt>mt?dt-ft-mt:mt-ft-dt:mt>ft?mt-ft-dt:ft-dt-mt)>-1e-4&&ht<1e-4}}}var bez=bezFunction(),PropertyFactory=function(){var s=initialDefaultFrame,a=Math.abs;function o(nt,it){var at,ct=this.offsetTime;this.propType==="multidimensional"&&(at=createTypedArray("float32",this.pv.length));for(var st,ot,ht,dt,ft,mt,gt,vt,yt,Et=it.lastIndex,St=Et,Ct=this.keyframes.length-1,wt=!0;wt;){if(st=this.keyframes[St],ot=this.keyframes[St+1],St===Ct-1&&nt>=ot.t-ct){st.h&&(st=ot),Et=0;break}if(ot.t-ct>nt){Et=St;break}St<Ct-1?St+=1:(Et=0,wt=!1)}ht=this.keyframesMetadata[St]||{};var _t,Tt=ot.t-ct,Mt=st.t-ct;if(st.to){ht.bezierData||(ht.bezierData=bez.buildBezierData(st.s,ot.s||st.e,st.to,st.ti));var Bt=ht.bezierData;if(nt>=Tt||nt<Mt){var Rt=nt>=Tt?Bt.points.length-1:0;for(ft=Bt.points[Rt].point.length,dt=0;dt<ft;dt+=1)at[dt]=Bt.points[Rt].point[dt]}else{ht.__fnct?yt=ht.__fnct:(yt=BezierFactory.getBezierEasing(st.o.x,st.o.y,st.i.x,st.i.y,st.n).get,ht.__fnct=yt),mt=yt((nt-Mt)/(Tt-Mt));var bt,Pt=Bt.segmentLength*mt,Dt=it.lastFrame<nt&&it._lastKeyframeIndex===St?it._lastAddedLength:0;for(vt=it.lastFrame<nt&&it._lastKeyframeIndex===St?it._lastPoint:0,wt=!0,gt=Bt.points.length;wt;){if(Dt+=Bt.points[vt].partialLength,Pt===0||mt===0||vt===Bt.points.length-1){for(ft=Bt.points[vt].point.length,dt=0;dt<ft;dt+=1)at[dt]=Bt.points[vt].point[dt];break}if(Pt>=Dt&&Pt<Dt+Bt.points[vt+1].partialLength){for(bt=(Pt-Dt)/Bt.points[vt+1].partialLength,ft=Bt.points[vt].point.length,dt=0;dt<ft;dt+=1)at[dt]=Bt.points[vt].point[dt]+(Bt.points[vt+1].point[dt]-Bt.points[vt].point[dt])*bt;break}vt<gt-1?vt+=1:wt=!1}it._lastPoint=vt,it._lastAddedLength=Dt-Bt.points[vt].partialLength,it._lastKeyframeIndex=St}}else{var $t,Lt,Jt,Qt,or;if(Ct=st.s.length,_t=ot.s||st.e,this.sh&&st.h!==1)nt>=Tt?(at[0]=_t[0],at[1]=_t[1],at[2]=_t[2]):nt<=Mt?(at[0]=st.s[0],at[1]=st.s[1],at[2]=st.s[2]):function(er,sr){var Ar=sr[0],Er=sr[1],Tr=sr[2],ur=sr[3],kt=Math.atan2(2*Er*ur-2*Ar*Tr,1-2*Er*Er-2*Tr*Tr),Xt=Math.asin(2*Ar*Er+2*Tr*ur),ar=Math.atan2(2*Ar*ur-2*Er*Tr,1-2*Ar*Ar-2*Tr*Tr);er[0]=kt/degToRads,er[1]=Xt/degToRads,er[2]=ar/degToRads}(at,function(er,sr,Ar){var Er,Tr,ur,kt,Xt,ar=[],yr=er[0],mr=er[1],Br=er[2],_r=er[3],br=sr[0],Pr=sr[1],Or=sr[2],Wr=sr[3];return(Tr=yr*br+mr*Pr+Br*Or+_r*Wr)<0&&(Tr=-Tr,br=-br,Pr=-Pr,Or=-Or,Wr=-Wr),1-Tr>1e-6?(Er=Math.acos(Tr),ur=Math.sin(Er),kt=Math.sin((1-Ar)*Er)/ur,Xt=Math.sin(Ar*Er)/ur):(kt=1-Ar,Xt=Ar),ar[0]=kt*yr+Xt*br,ar[1]=kt*mr+Xt*Pr,ar[2]=kt*Br+Xt*Or,ar[3]=kt*_r+Xt*Wr,ar}(c(st.s),c(_t),(nt-Mt)/(Tt-Mt)));else for(St=0;St<Ct;St+=1)st.h!==1&&(nt>=Tt?mt=1:nt<Mt?mt=0:(st.o.x.constructor===Array?(ht.__fnct||(ht.__fnct=[]),ht.__fnct[St]?yt=ht.__fnct[St]:($t=st.o.x[St]===void 0?st.o.x[0]:st.o.x[St],Lt=st.o.y[St]===void 0?st.o.y[0]:st.o.y[St],Jt=st.i.x[St]===void 0?st.i.x[0]:st.i.x[St],Qt=st.i.y[St]===void 0?st.i.y[0]:st.i.y[St],yt=BezierFactory.getBezierEasing($t,Lt,Jt,Qt).get,ht.__fnct[St]=yt)):ht.__fnct?yt=ht.__fnct:($t=st.o.x,Lt=st.o.y,Jt=st.i.x,Qt=st.i.y,yt=BezierFactory.getBezierEasing($t,Lt,Jt,Qt).get,st.keyframeMetadata=yt),mt=yt((nt-Mt)/(Tt-Mt)))),_t=ot.s||st.e,or=st.h===1?st.s[St]:st.s[St]+(_t[St]-st.s[St])*mt,this.propType==="multidimensional"?at[St]=or:at=or}return it.lastIndex=Et,at}function c(nt){var it=nt[0]*degToRads,at=nt[1]*degToRads,ct=nt[2]*degToRads,st=Math.cos(it/2),ot=Math.cos(at/2),ht=Math.cos(ct/2),dt=Math.sin(it/2),ft=Math.sin(at/2),mt=Math.sin(ct/2);return[dt*ft*ht+st*ot*mt,dt*ot*ht+st*ft*mt,st*ft*ht-dt*ot*mt,st*ot*ht-dt*ft*mt]}function d(){var nt=this.comp.renderedFrame-this.offsetTime,it=this.keyframes[0].t-this.offsetTime,at=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(nt===this._caching.lastFrame||this._caching.lastFrame!==s&&(this._caching.lastFrame>=at&&nt>=at||this._caching.lastFrame<it&&nt<it))){this._caching.lastFrame>=nt&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ct=this.interpolateValue(nt,this._caching);this.pv=ct}return this._caching.lastFrame=nt,this.pv}function b(nt){var it;if(this.propType==="unidimensional")it=nt*this.mult,a(this.v-it)>1e-5&&(this.v=it,this._mdf=!0);else for(var at=0,ct=this.v.length;at<ct;)it=nt[at]*this.mult,a(this.v[at]-it)>1e-5&&(this.v[at]=it,this._mdf=!0),at+=1}function $(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var nt;this.lock=!0,this._mdf=this._isFirstFrame;var it=this.effectsSequence.length,at=this.kf?this.pv:this.data.k;for(nt=0;nt<it;nt+=1)at=this.effectsSequence[nt](at);this.setVValue(at),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function j(nt){this.effectsSequence.push(nt),this.container.addDynamicProperty(this)}function _e(nt,it,at,ct){this.propType="unidimensional",this.mult=at||1,this.data=it,this.v=at?it.k*at:it.k,this.pv=it.k,this._mdf=!1,this.elem=nt,this.container=ct,this.comp=nt.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=$,this.setVValue=b,this.addEffect=j}function et(nt,it,at,ct){var st;this.propType="multidimensional",this.mult=at||1,this.data=it,this._mdf=!1,this.elem=nt,this.container=ct,this.comp=nt.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ot=it.k.length;for(this.v=createTypedArray("float32",ot),this.pv=createTypedArray("float32",ot),this.vel=createTypedArray("float32",ot),st=0;st<ot;st+=1)this.v[st]=it.k[st]*this.mult,this.pv[st]=it.k[st];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=$,this.setVValue=b,this.addEffect=j}function tt(nt,it,at,ct){this.propType="unidimensional",this.keyframes=it.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.frameId=-1,this._caching={lastFrame:s,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=it,this.mult=at||1,this.elem=nt,this.container=ct,this.comp=nt.comp,this.v=s,this.pv=s,this._isFirstFrame=!0,this.getValue=$,this.setVValue=b,this.interpolateValue=o,this.effectsSequence=[d.bind(this)],this.addEffect=j}function rt(nt,it,at,ct){var st;this.propType="multidimensional";var ot,ht,dt,ft,mt=it.k.length;for(st=0;st<mt-1;st+=1)it.k[st].to&&it.k[st].s&&it.k[st+1]&&it.k[st+1].s&&(ot=it.k[st].s,ht=it.k[st+1].s,dt=it.k[st].to,ft=it.k[st].ti,(ot.length===2&&(ot[0]!==ht[0]||ot[1]!==ht[1])&&bez.pointOnLine2D(ot[0],ot[1],ht[0],ht[1],ot[0]+dt[0],ot[1]+dt[1])&&bez.pointOnLine2D(ot[0],ot[1],ht[0],ht[1],ht[0]+ft[0],ht[1]+ft[1])||ot.length===3&&(ot[0]!==ht[0]||ot[1]!==ht[1]||ot[2]!==ht[2])&&bez.pointOnLine3D(ot[0],ot[1],ot[2],ht[0],ht[1],ht[2],ot[0]+dt[0],ot[1]+dt[1],ot[2]+dt[2])&&bez.pointOnLine3D(ot[0],ot[1],ot[2],ht[0],ht[1],ht[2],ht[0]+ft[0],ht[1]+ft[1],ht[2]+ft[2]))&&(it.k[st].to=null,it.k[st].ti=null),ot[0]===ht[0]&&ot[1]===ht[1]&&dt[0]===0&&dt[1]===0&&ft[0]===0&&ft[1]===0&&(ot.length===2||ot[2]===ht[2]&&dt[2]===0&&ft[2]===0)&&(it.k[st].to=null,it.k[st].ti=null));this.effectsSequence=[d.bind(this)],this.data=it,this.keyframes=it.k,this.keyframesMetadata=[],this.offsetTime=nt.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=at||1,this.elem=nt,this.container=ct,this.comp=nt.comp,this.getValue=$,this.setVValue=b,this.interpolateValue=o,this.frameId=-1;var gt=it.k[0].s.length;for(this.v=createTypedArray("float32",gt),this.pv=createTypedArray("float32",gt),st=0;st<gt;st+=1)this.v[st]=s,this.pv[st]=s;this._caching={lastFrame:s,lastIndex:0,value:createTypedArray("float32",gt)},this.addEffect=j}return{getProp:function(nt,it,at,ct,st){var ot;if(it.k.length)if(typeof it.k[0]=="number")ot=new et(nt,it,ct,st);else switch(at){case 0:ot=new tt(nt,it,ct,st);break;case 1:ot=new rt(nt,it,ct,st)}else ot=new _e(nt,it,ct,st);return ot.effectsSequence.length&&st.addDynamicProperty(ot),ot}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(s){this.dynamicProperties.indexOf(s)===-1&&(this.dynamicProperties.push(s),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var s;this._mdf=!1;var a=this.dynamicProperties.length;for(s=0;s<a;s+=1)this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(s){this.container=s,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(s,a){this.c=s,this.setLength(a);for(var o=0;o<a;)this.v[o]=pointPool.newElement(),this.o[o]=pointPool.newElement(),this.i[o]=pointPool.newElement(),o+=1},ShapePath.prototype.setLength=function(s){for(;this._maxLength<s;)this.doubleArrayLength();this._length=s},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(s,a,o,c,d){var b;switch(this._length=Math.max(this._length,c+1),this._length>=this._maxLength&&this.doubleArrayLength(),o){case"v":b=this.v;break;case"i":b=this.i;break;case"o":b=this.o;break;default:b=[]}(!b[c]||b[c]&&!d)&&(b[c]=pointPool.newElement()),b[c][0]=s,b[c][1]=a},ShapePath.prototype.setTripleAt=function(s,a,o,c,d,b,$,j){this.setXYAt(s,a,"v",$,j),this.setXYAt(o,c,"o",$,j),this.setXYAt(d,b,"i",$,j)},ShapePath.prototype.reverse=function(){var s=new ShapePath;s.setPathData(this.c,this._length);var a=this.v,o=this.o,c=this.i,d=0;this.c&&(s.setTripleAt(a[0][0],a[0][1],c[0][0],c[0][1],o[0][0],o[0][1],0,!1),d=1);var b,$=this._length-1,j=this._length;for(b=d;b<j;b+=1)s.setTripleAt(a[$][0],a[$][1],c[$][0],c[$][1],o[$][0],o[$][1],b,!1),$-=1;return s},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(s){var a,o=s._length;for(a=0;a<o;a+=1)pointPool.release(s.v[a]),pointPool.release(s.i[a]),pointPool.release(s.o[a]),s.v[a]=null,s.i[a]=null,s.o[a]=null;s._length=0,s.c=!1}),factory.clone=function(s){var a,o=factory.newElement(),c=s._length===void 0?s.v.length:s._length;for(o.setLength(c),o.c=s.c,a=0;a<c;a+=1)o.setTripleAt(s.v[a][0],s.v[a][1],s.o[a][0],s.o[a][1],s.i[a][0],s.i[a][1],a);return o},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(s){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=s,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var s;for(s=0;s<this._length;s+=1)shapePool.release(this.shapes[s]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(s){var a,o=s._length;for(a=0;a<o;a+=1)shapePool.release(s.shapes[a]);s._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=s,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){function s(nt,it,at){var ct,st,ot,ht,dt,ft,mt,gt,vt,yt=at.lastIndex,Et=this.keyframes;if(nt<Et[0].t-this.offsetTime)ct=Et[0].s[0],ot=!0,yt=0;else if(nt>=Et[Et.length-1].t-this.offsetTime)ct=Et[Et.length-1].s?Et[Et.length-1].s[0]:Et[Et.length-2].e[0],ot=!0;else{for(var St,Ct,wt,_t=yt,Tt=Et.length-1,Mt=!0;Mt&&(St=Et[_t],!((Ct=Et[_t+1]).t-this.offsetTime>nt));)_t<Tt-1?_t+=1:Mt=!1;if(wt=this.keyframesMetadata[_t]||{},yt=_t,!(ot=St.h===1)){if(nt>=Ct.t-this.offsetTime)gt=1;else if(nt<St.t-this.offsetTime)gt=0;else{var Bt;wt.__fnct?Bt=wt.__fnct:(Bt=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y).get,wt.__fnct=Bt),gt=Bt((nt-(St.t-this.offsetTime))/(Ct.t-this.offsetTime-(St.t-this.offsetTime)))}st=Ct.s?Ct.s[0]:St.e[0]}ct=St.s[0]}for(ft=it._length,mt=ct.i[0].length,at.lastIndex=yt,ht=0;ht<ft;ht+=1)for(dt=0;dt<mt;dt+=1)vt=ot?ct.i[ht][dt]:ct.i[ht][dt]+(st.i[ht][dt]-ct.i[ht][dt])*gt,it.i[ht][dt]=vt,vt=ot?ct.o[ht][dt]:ct.o[ht][dt]+(st.o[ht][dt]-ct.o[ht][dt])*gt,it.o[ht][dt]=vt,vt=ot?ct.v[ht][dt]:ct.v[ht][dt]+(st.v[ht][dt]-ct.v[ht][dt])*gt,it.v[ht][dt]=vt}function a(){var nt=this.comp.renderedFrame-this.offsetTime,it=this.keyframes[0].t-this.offsetTime,at=this.keyframes[this.keyframes.length-1].t-this.offsetTime,ct=this._caching.lastFrame;return ct!==-999999&&(ct<it&&nt<it||ct>at&&nt>at)||(this._caching.lastIndex=ct<nt?this._caching.lastIndex:0,this.interpolateShape(nt,this.pv,this._caching)),this._caching.lastFrame=nt,this.pv}function o(){this.paths=this.localShapeCollection}function c(nt){(function(it,at){if(it._length!==at._length||it.c!==at.c)return!1;var ct,st=it._length;for(ct=0;ct<st;ct+=1)if(it.v[ct][0]!==at.v[ct][0]||it.v[ct][1]!==at.v[ct][1]||it.o[ct][0]!==at.o[ct][0]||it.o[ct][1]!==at.o[ct][1]||it.i[ct][0]!==at.i[ct][0]||it.i[ct][1]!==at.i[ct][1])return!1;return!0})(this.v,nt)||(this.v=shapePool.clone(nt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function d(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var nt,it;this.lock=!0,this._mdf=!1,nt=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var at=this.effectsSequence.length;for(it=0;it<at;it+=1)nt=this.effectsSequence[it](nt);this.setVValue(nt),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function b(nt,it,at){this.propType="shape",this.comp=nt.comp,this.container=nt,this.elem=nt,this.data=it,this.k=!1,this.kf=!1,this._mdf=!1;var ct=at===3?it.pt.k:it.ks.k;this.v=shapePool.clone(ct),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=o,this.effectsSequence=[]}function $(nt){this.effectsSequence.push(nt),this.container.addDynamicProperty(this)}function j(nt,it,at){this.propType="shape",this.comp=nt.comp,this.elem=nt,this.container=nt,this.offsetTime=nt.data.st,this.keyframes=at===3?it.pt.k:it.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var ct=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,ct),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=o,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[a.bind(this)]}b.prototype.interpolateShape=s,b.prototype.getValue=d,b.prototype.setVValue=c,b.prototype.addEffect=$,j.prototype.getValue=d,j.prototype.interpolateShape=s,j.prototype.setVValue=c,j.prototype.addEffect=$;var _e=function(){var nt=roundCorner;function it(at,ct){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=ct.d,this.elem=at,this.comp=at.comp,this.frameId=-1,this.initDynamicPropertyContainer(at),this.p=PropertyFactory.getProp(at,ct.p,1,0,this),this.s=PropertyFactory.getProp(at,ct.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return it.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var at=this.p.v[0],ct=this.p.v[1],st=this.s.v[0]/2,ot=this.s.v[1]/2,ht=this.d!==3,dt=this.v;dt.v[0][0]=at,dt.v[0][1]=ct-ot,dt.v[1][0]=ht?at+st:at-st,dt.v[1][1]=ct,dt.v[2][0]=at,dt.v[2][1]=ct+ot,dt.v[3][0]=ht?at-st:at+st,dt.v[3][1]=ct,dt.i[0][0]=ht?at-st*nt:at+st*nt,dt.i[0][1]=ct-ot,dt.i[1][0]=ht?at+st:at-st,dt.i[1][1]=ct-ot*nt,dt.i[2][0]=ht?at+st*nt:at-st*nt,dt.i[2][1]=ct+ot,dt.i[3][0]=ht?at-st:at+st,dt.i[3][1]=ct+ot*nt,dt.o[0][0]=ht?at+st*nt:at-st*nt,dt.o[0][1]=ct-ot,dt.o[1][0]=ht?at+st:at-st,dt.o[1][1]=ct+ot*nt,dt.o[2][0]=ht?at-st*nt:at+st*nt,dt.o[2][1]=ct+ot,dt.o[3][0]=ht?at-st:at+st,dt.o[3][1]=ct-ot*nt}},extendPrototype([DynamicPropertyContainer],it),it}(),et=function(){function nt(it,at){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=it,this.comp=it.comp,this.data=at,this.frameId=-1,this.d=at.d,this.initDynamicPropertyContainer(it),at.sy===1?(this.ir=PropertyFactory.getProp(it,at.ir,0,0,this),this.is=PropertyFactory.getProp(it,at.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(it,at.pt,0,0,this),this.p=PropertyFactory.getProp(it,at.p,1,0,this),this.r=PropertyFactory.getProp(it,at.r,0,degToRads,this),this.or=PropertyFactory.getProp(it,at.or,0,0,this),this.os=PropertyFactory.getProp(it,at.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return nt.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var it,at,ct,st,ot=2*Math.floor(this.pt.v),ht=2*Math.PI/ot,dt=!0,ft=this.or.v,mt=this.ir.v,gt=this.os.v,vt=this.is.v,yt=2*Math.PI*ft/(2*ot),Et=2*Math.PI*mt/(2*ot),St=-Math.PI/2;St+=this.r.v;var Ct=this.data.d===3?-1:1;for(this.v._length=0,it=0;it<ot;it+=1){ct=dt?gt:vt,st=dt?yt:Et;var wt=(at=dt?ft:mt)*Math.cos(St),_t=at*Math.sin(St),Tt=wt===0&&_t===0?0:_t/Math.sqrt(wt*wt+_t*_t),Mt=wt===0&&_t===0?0:-wt/Math.sqrt(wt*wt+_t*_t);wt+=+this.p.v[0],_t+=+this.p.v[1],this.v.setTripleAt(wt,_t,wt-Tt*st*ct*Ct,_t-Mt*st*ct*Ct,wt+Tt*st*ct*Ct,_t+Mt*st*ct*Ct,it,!0),dt=!dt,St+=ht*Ct}},convertPolygonToPath:function(){var it,at=Math.floor(this.pt.v),ct=2*Math.PI/at,st=this.or.v,ot=this.os.v,ht=2*Math.PI*st/(4*at),dt=.5*-Math.PI,ft=this.data.d===3?-1:1;for(dt+=this.r.v,this.v._length=0,it=0;it<at;it+=1){var mt=st*Math.cos(dt),gt=st*Math.sin(dt),vt=mt===0&&gt===0?0:gt/Math.sqrt(mt*mt+gt*gt),yt=mt===0&&gt===0?0:-mt/Math.sqrt(mt*mt+gt*gt);mt+=+this.p.v[0],gt+=+this.p.v[1],this.v.setTripleAt(mt,gt,mt-vt*ht*ot*ft,gt-yt*ht*ot*ft,mt+vt*ht*ot*ft,gt+yt*ht*ot*ft,it,!0),dt+=ct*ft}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],nt),nt}(),tt=function(){function nt(it,at){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=it,this.comp=it.comp,this.frameId=-1,this.d=at.d,this.initDynamicPropertyContainer(it),this.p=PropertyFactory.getProp(it,at.p,1,0,this),this.s=PropertyFactory.getProp(it,at.s,1,0,this),this.r=PropertyFactory.getProp(it,at.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return nt.prototype={convertRectToPath:function(){var it=this.p.v[0],at=this.p.v[1],ct=this.s.v[0]/2,st=this.s.v[1]/2,ot=bmMin(ct,st,this.r.v),ht=ot*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(it+ct,at-st+ot,it+ct,at-st+ot,it+ct,at-st+ht,0,!0),this.v.setTripleAt(it+ct,at+st-ot,it+ct,at+st-ht,it+ct,at+st-ot,1,!0),ot!==0?(this.v.setTripleAt(it+ct-ot,at+st,it+ct-ot,at+st,it+ct-ht,at+st,2,!0),this.v.setTripleAt(it-ct+ot,at+st,it-ct+ht,at+st,it-ct+ot,at+st,3,!0),this.v.setTripleAt(it-ct,at+st-ot,it-ct,at+st-ot,it-ct,at+st-ht,4,!0),this.v.setTripleAt(it-ct,at-st+ot,it-ct,at-st+ht,it-ct,at-st+ot,5,!0),this.v.setTripleAt(it-ct+ot,at-st,it-ct+ot,at-st,it-ct+ht,at-st,6,!0),this.v.setTripleAt(it+ct-ot,at-st,it+ct-ht,at-st,it+ct-ot,at-st,7,!0)):(this.v.setTripleAt(it-ct,at+st,it-ct+ht,at+st,it-ct,at+st,2),this.v.setTripleAt(it-ct,at-st,it-ct,at-st+ht,it-ct,at-st,3))):(this.v.setTripleAt(it+ct,at-st+ot,it+ct,at-st+ht,it+ct,at-st+ot,0,!0),ot!==0?(this.v.setTripleAt(it+ct-ot,at-st,it+ct-ot,at-st,it+ct-ht,at-st,1,!0),this.v.setTripleAt(it-ct+ot,at-st,it-ct+ht,at-st,it-ct+ot,at-st,2,!0),this.v.setTripleAt(it-ct,at-st+ot,it-ct,at-st+ot,it-ct,at-st+ht,3,!0),this.v.setTripleAt(it-ct,at+st-ot,it-ct,at+st-ht,it-ct,at+st-ot,4,!0),this.v.setTripleAt(it-ct+ot,at+st,it-ct+ot,at+st,it-ct+ht,at+st,5,!0),this.v.setTripleAt(it+ct-ot,at+st,it+ct-ht,at+st,it+ct-ot,at+st,6,!0),this.v.setTripleAt(it+ct,at+st-ot,it+ct,at+st-ot,it+ct,at+st-ht,7,!0)):(this.v.setTripleAt(it-ct,at-st,it-ct+ht,at-st,it-ct,at-st,1,!0),this.v.setTripleAt(it-ct,at+st,it-ct,at+st-ht,it-ct,at+st,2,!0),this.v.setTripleAt(it+ct,at+st,it+ct-ht,at+st,it+ct,at+st,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:o},extendPrototype([DynamicPropertyContainer],nt),nt}(),rt={getShapeProp:function(nt,it,at){var ct;return at===3||at===4?ct=(at===3?it.pt:it.ks).k.length?new j(nt,it,at):new b(nt,it,at):at===5?ct=new tt(nt,it):at===6?ct=new _e(nt,it):at===7&&(ct=new et(nt,it)),ct.k&&nt.addDynamicProperty(ct),ct},getConstructorFunction:function(){return b},getKeyframedConstructorFunction:function(){return j}};return rt}(),Matrix=function(){var s=Math.cos,a=Math.sin,o=Math.tan,c=Math.round;function d(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function b(Rt){if(Rt===0)return this;var bt=s(Rt),Pt=a(Rt);return this._t(bt,-Pt,0,0,Pt,bt,0,0,0,0,1,0,0,0,0,1)}function $(Rt){if(Rt===0)return this;var bt=s(Rt),Pt=a(Rt);return this._t(1,0,0,0,0,bt,-Pt,0,0,Pt,bt,0,0,0,0,1)}function j(Rt){if(Rt===0)return this;var bt=s(Rt),Pt=a(Rt);return this._t(bt,0,Pt,0,0,1,0,0,-Pt,0,bt,0,0,0,0,1)}function _e(Rt){if(Rt===0)return this;var bt=s(Rt),Pt=a(Rt);return this._t(bt,-Pt,0,0,Pt,bt,0,0,0,0,1,0,0,0,0,1)}function et(Rt,bt){return this._t(1,bt,Rt,1,0,0)}function tt(Rt,bt){return this.shear(o(Rt),o(bt))}function rt(Rt,bt){var Pt=s(bt),Dt=a(bt);return this._t(Pt,Dt,0,0,-Dt,Pt,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,o(Rt),1,0,0,0,0,1,0,0,0,0,1)._t(Pt,-Dt,0,0,Dt,Pt,0,0,0,0,1,0,0,0,0,1)}function nt(Rt,bt,Pt){return Pt||Pt===0||(Pt=1),Rt===1&&bt===1&&Pt===1?this:this._t(Rt,0,0,0,0,bt,0,0,0,0,Pt,0,0,0,0,1)}function it(Rt,bt,Pt,Dt,$t,Lt,Jt,Qt,or,er,sr,Ar,Er,Tr,ur,kt){return this.props[0]=Rt,this.props[1]=bt,this.props[2]=Pt,this.props[3]=Dt,this.props[4]=$t,this.props[5]=Lt,this.props[6]=Jt,this.props[7]=Qt,this.props[8]=or,this.props[9]=er,this.props[10]=sr,this.props[11]=Ar,this.props[12]=Er,this.props[13]=Tr,this.props[14]=ur,this.props[15]=kt,this}function at(Rt,bt,Pt){return Pt=Pt||0,Rt!==0||bt!==0||Pt!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Rt,bt,Pt,1):this}function ct(Rt,bt,Pt,Dt,$t,Lt,Jt,Qt,or,er,sr,Ar,Er,Tr,ur,kt){var Xt=this.props;if(Rt===1&&bt===0&&Pt===0&&Dt===0&&$t===0&&Lt===1&&Jt===0&&Qt===0&&or===0&&er===0&&sr===1&&Ar===0)return Xt[12]=Xt[12]*Rt+Xt[15]*Er,Xt[13]=Xt[13]*Lt+Xt[15]*Tr,Xt[14]=Xt[14]*sr+Xt[15]*ur,Xt[15]*=kt,this._identityCalculated=!1,this;var ar=Xt[0],yr=Xt[1],mr=Xt[2],Br=Xt[3],_r=Xt[4],br=Xt[5],Pr=Xt[6],Or=Xt[7],Wr=Xt[8],Ot=Xt[9],Ft=Xt[10],ir=Xt[11],Sr=Xt[12],xr=Xt[13],Ir=Xt[14],Fr=Xt[15];return Xt[0]=ar*Rt+yr*$t+mr*or+Br*Er,Xt[1]=ar*bt+yr*Lt+mr*er+Br*Tr,Xt[2]=ar*Pt+yr*Jt+mr*sr+Br*ur,Xt[3]=ar*Dt+yr*Qt+mr*Ar+Br*kt,Xt[4]=_r*Rt+br*$t+Pr*or+Or*Er,Xt[5]=_r*bt+br*Lt+Pr*er+Or*Tr,Xt[6]=_r*Pt+br*Jt+Pr*sr+Or*ur,Xt[7]=_r*Dt+br*Qt+Pr*Ar+Or*kt,Xt[8]=Wr*Rt+Ot*$t+Ft*or+ir*Er,Xt[9]=Wr*bt+Ot*Lt+Ft*er+ir*Tr,Xt[10]=Wr*Pt+Ot*Jt+Ft*sr+ir*ur,Xt[11]=Wr*Dt+Ot*Qt+Ft*Ar+ir*kt,Xt[12]=Sr*Rt+xr*$t+Ir*or+Fr*Er,Xt[13]=Sr*bt+xr*Lt+Ir*er+Fr*Tr,Xt[14]=Sr*Pt+xr*Jt+Ir*sr+Fr*ur,Xt[15]=Sr*Dt+xr*Qt+Ir*Ar+Fr*kt,this._identityCalculated=!1,this}function st(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ot(Rt){for(var bt=0;bt<16;){if(Rt.props[bt]!==this.props[bt])return!1;bt+=1}return!0}function ht(Rt){var bt;for(bt=0;bt<16;bt+=1)Rt.props[bt]=this.props[bt];return Rt}function dt(Rt){var bt;for(bt=0;bt<16;bt+=1)this.props[bt]=Rt[bt]}function ft(Rt,bt,Pt){return{x:Rt*this.props[0]+bt*this.props[4]+Pt*this.props[8]+this.props[12],y:Rt*this.props[1]+bt*this.props[5]+Pt*this.props[9]+this.props[13],z:Rt*this.props[2]+bt*this.props[6]+Pt*this.props[10]+this.props[14]}}function mt(Rt,bt,Pt){return Rt*this.props[0]+bt*this.props[4]+Pt*this.props[8]+this.props[12]}function gt(Rt,bt,Pt){return Rt*this.props[1]+bt*this.props[5]+Pt*this.props[9]+this.props[13]}function vt(Rt,bt,Pt){return Rt*this.props[2]+bt*this.props[6]+Pt*this.props[10]+this.props[14]}function yt(){var Rt=this.props[0]*this.props[5]-this.props[1]*this.props[4],bt=this.props[5]/Rt,Pt=-this.props[1]/Rt,Dt=-this.props[4]/Rt,$t=this.props[0]/Rt,Lt=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Rt,Jt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Rt,Qt=new Matrix;return Qt.props[0]=bt,Qt.props[1]=Pt,Qt.props[4]=Dt,Qt.props[5]=$t,Qt.props[12]=Lt,Qt.props[13]=Jt,Qt}function Et(Rt){return this.getInverseMatrix().applyToPointArray(Rt[0],Rt[1],Rt[2]||0)}function St(Rt){var bt,Pt=Rt.length,Dt=[];for(bt=0;bt<Pt;bt+=1)Dt[bt]=Et(Rt[bt]);return Dt}function Ct(Rt,bt,Pt){var Dt=createTypedArray("float32",6);if(this.isIdentity())Dt[0]=Rt[0],Dt[1]=Rt[1],Dt[2]=bt[0],Dt[3]=bt[1],Dt[4]=Pt[0],Dt[5]=Pt[1];else{var $t=this.props[0],Lt=this.props[1],Jt=this.props[4],Qt=this.props[5],or=this.props[12],er=this.props[13];Dt[0]=Rt[0]*$t+Rt[1]*Jt+or,Dt[1]=Rt[0]*Lt+Rt[1]*Qt+er,Dt[2]=bt[0]*$t+bt[1]*Jt+or,Dt[3]=bt[0]*Lt+bt[1]*Qt+er,Dt[4]=Pt[0]*$t+Pt[1]*Jt+or,Dt[5]=Pt[0]*Lt+Pt[1]*Qt+er}return Dt}function wt(Rt,bt,Pt){return this.isIdentity()?[Rt,bt,Pt]:[Rt*this.props[0]+bt*this.props[4]+Pt*this.props[8]+this.props[12],Rt*this.props[1]+bt*this.props[5]+Pt*this.props[9]+this.props[13],Rt*this.props[2]+bt*this.props[6]+Pt*this.props[10]+this.props[14]]}function _t(Rt,bt){if(this.isIdentity())return Rt+","+bt;var Pt=this.props;return Math.round(100*(Rt*Pt[0]+bt*Pt[4]+Pt[12]))/100+","+Math.round(100*(Rt*Pt[1]+bt*Pt[5]+Pt[13]))/100}function Tt(){for(var Rt=0,bt=this.props,Pt="matrix3d(";Rt<16;)Pt+=c(1e4*bt[Rt])/1e4,Pt+=Rt===15?")":",",Rt+=1;return Pt}function Mt(Rt){return Rt<1e-6&&Rt>0||Rt>-1e-6&&Rt<0?c(1e4*Rt)/1e4:Rt}function Bt(){var Rt=this.props;return"matrix("+Mt(Rt[0])+","+Mt(Rt[1])+","+Mt(Rt[4])+","+Mt(Rt[5])+","+Mt(Rt[12])+","+Mt(Rt[13])+")"}return function(){this.reset=d,this.rotate=b,this.rotateX=$,this.rotateY=j,this.rotateZ=_e,this.skew=tt,this.skewFromAxis=rt,this.shear=et,this.scale=nt,this.setTransform=it,this.translate=at,this.transform=ct,this.applyToPoint=ft,this.applyToX=mt,this.applyToY=gt,this.applyToZ=vt,this.applyToPointArray=wt,this.applyToTriplePoints=Ct,this.applyToPointStringified=_t,this.toCSS=Tt,this.to2dCSS=Bt,this.clone=ht,this.cloneFromProps=dt,this.equals=ot,this.inversePoints=St,this.inversePoint=Et,this.getInverseMatrix=yt,this._t=this.transform,this.isIdentity=st,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(s){return(_typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var lottie={};function setLocation(s){setLocationHref(s)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(s){setSubframeEnabled(s)}function setPrefix(s){setIdPrefix(s)}function loadAnimation(s){return animationManager.loadAnimation(s)}function setQuality(s){if(typeof s=="string")switch(s){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(s)&&s>1&&setDefaultCurveSegments(s)}function inBrowser(){return typeof navigator<"u"}function installPlugin(s,a){s==="expressions"&&setExpressionsPlugin(a)}function getFactory(s){switch(s){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(s){for(var a=queryString.split("&"),o=0;o<a.length;o+=1){var c=a[o].split("=");if(decodeURIComponent(c[0])==s)return decodeURIComponent(c[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.2";var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(s){}var ShapeModifiers=function(){var s={},a={};return s.registerModifier=function(o,c){a[o]||(a[o]=c)},s.getModifier=function(o,c,d){return new a[o](c,d)},s}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(s){if(!this.closed){s.sh.container.addDynamicProperty(s.sh);var a={shape:s.sh,data:s,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(a),this.addShapeToModifier(a),this._isAnimated&&s.setAsAnimated()}},ShapeModifier.prototype.init=function(s,a){this.shapes=[],this.elem=s,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,a),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(s,a){this.s=PropertyFactory.getProp(s,a.s,0,.01,this),this.e=PropertyFactory.getProp(s,a.e,0,.01,this),this.o=PropertyFactory.getProp(s,a.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=a.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(s){s.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,a,o,c,d){var b=[];a<=1?b.push({s,e:a}):s>=1?b.push({s:s-1,e:a-1}):(b.push({s,e:1}),b.push({s:0,e:a-1}));var $,j,_e=[],et=b.length;for($=0;$<et;$+=1){var tt,rt;(j=b[$]).e*d<c||j.s*d>c+o||(tt=j.s*d<=c?0:(j.s*d-c)/o,rt=j.e*d>=c+o?1:(j.e*d-c)/o,_e.push([tt,rt]))}return _e.length||_e.push([0,0]),_e},TrimModifier.prototype.releasePathsData=function(s){var a,o=s.length;for(a=0;a<o;a+=1)segmentsLengthPool.release(s[a]);return s.length=0,s},TrimModifier.prototype.processShapes=function(s){var a,o,c,d;if(this._mdf||s){var b=this.o.v%360/360;if(b<0&&(b+=1),(a=this.s.v>1?1+b:this.s.v<0?0+b:this.s.v+b)>(o=this.e.v>1?1+b:this.e.v<0?0+b:this.e.v+b)){var $=a;a=o,o=$}a=1e-4*Math.round(1e4*a),o=1e-4*Math.round(1e4*o),this.sValue=a,this.eValue=o}else a=this.sValue,o=this.eValue;var j,_e,et,tt,rt,nt=this.shapes.length,it=0;if(o===a)for(d=0;d<nt;d+=1)this.shapes[d].localShapeCollection.releaseShapes(),this.shapes[d].shape._mdf=!0,this.shapes[d].shape.paths=this.shapes[d].localShapeCollection,this._mdf&&(this.shapes[d].pathsData.length=0);else if(o===1&&a===0||o===0&&a===1){if(this._mdf)for(d=0;d<nt;d+=1)this.shapes[d].pathsData.length=0,this.shapes[d].shape._mdf=!0}else{var at,ct,st=[];for(d=0;d<nt;d+=1)if((at=this.shapes[d]).shape._mdf||this._mdf||s||this.m===2){if(_e=(c=at.shape.paths)._length,rt=0,!at.shape._mdf&&at.pathsData.length)rt=at.totalShapeLength;else{for(et=this.releasePathsData(at.pathsData),j=0;j<_e;j+=1)tt=bez.getSegmentsLength(c.shapes[j]),et.push(tt),rt+=tt.totalLength;at.totalShapeLength=rt,at.pathsData=et}it+=rt,at.shape._mdf=!0}else at.shape.paths=at.localShapeCollection;var ot,ht=a,dt=o,ft=0;for(d=nt-1;d>=0;d-=1)if((at=this.shapes[d]).shape._mdf){for((ct=at.localShapeCollection).releaseShapes(),this.m===2&&nt>1?(ot=this.calculateShapeEdges(a,o,at.totalShapeLength,ft,it),ft+=at.totalShapeLength):ot=[[ht,dt]],_e=ot.length,j=0;j<_e;j+=1){ht=ot[j][0],dt=ot[j][1],st.length=0,dt<=1?st.push({s:at.totalShapeLength*ht,e:at.totalShapeLength*dt}):ht>=1?st.push({s:at.totalShapeLength*(ht-1),e:at.totalShapeLength*(dt-1)}):(st.push({s:at.totalShapeLength*ht,e:at.totalShapeLength}),st.push({s:0,e:at.totalShapeLength*(dt-1)}));var mt=this.addShapes(at,st[0]);if(st[0].s!==st[0].e){if(st.length>1)if(at.shape.paths.shapes[at.shape.paths._length-1].c){var gt=mt.pop();this.addPaths(mt,ct),mt=this.addShapes(at,st[1],gt)}else this.addPaths(mt,ct),mt=this.addShapes(at,st[1]);this.addPaths(mt,ct)}}at.shape.paths=ct}}},TrimModifier.prototype.addPaths=function(s,a){var o,c=s.length;for(o=0;o<c;o+=1)a.addShape(s[o])},TrimModifier.prototype.addSegment=function(s,a,o,c,d,b,$){d.setXYAt(a[0],a[1],"o",b),d.setXYAt(o[0],o[1],"i",b+1),$&&d.setXYAt(s[0],s[1],"v",b),d.setXYAt(c[0],c[1],"v",b+1)},TrimModifier.prototype.addSegmentFromArray=function(s,a,o,c){a.setXYAt(s[1],s[5],"o",o),a.setXYAt(s[2],s[6],"i",o+1),c&&a.setXYAt(s[0],s[4],"v",o),a.setXYAt(s[3],s[7],"v",o+1)},TrimModifier.prototype.addShapes=function(s,a,o){var c,d,b,$,j,_e,et,tt,rt=s.pathsData,nt=s.shape.paths.shapes,it=s.shape.paths._length,at=0,ct=[],st=!0;for(o?(j=o._length,tt=o._length):(o=shapePool.newElement(),j=0,tt=0),ct.push(o),c=0;c<it;c+=1){for(_e=rt[c].lengths,o.c=nt[c].c,b=nt[c].c?_e.length:_e.length+1,d=1;d<b;d+=1)if(at+($=_e[d-1]).addedLength<a.s)at+=$.addedLength,o.c=!1;else{if(at>a.e){o.c=!1;break}a.s<=at&&a.e>=at+$.addedLength?(this.addSegment(nt[c].v[d-1],nt[c].o[d-1],nt[c].i[d],nt[c].v[d],o,j,st),st=!1):(et=bez.getNewSegment(nt[c].v[d-1],nt[c].v[d],nt[c].o[d-1],nt[c].i[d],(a.s-at)/$.addedLength,(a.e-at)/$.addedLength,_e[d-1]),this.addSegmentFromArray(et,o,j,st),st=!1,o.c=!1),at+=$.addedLength,j+=1}if(nt[c].c&&_e.length){if($=_e[d-1],at<=a.e){var ot=_e[d-1].addedLength;a.s<=at&&a.e>=at+ot?(this.addSegment(nt[c].v[d-1],nt[c].o[d-1],nt[c].i[0],nt[c].v[0],o,j,st),st=!1):(et=bez.getNewSegment(nt[c].v[d-1],nt[c].v[0],nt[c].o[d-1],nt[c].i[0],(a.s-at)/ot,(a.e-at)/ot,_e[d-1]),this.addSegmentFromArray(et,o,j,st),st=!1,o.c=!1)}else o.c=!1;at+=$.addedLength,j+=1}if(o._length&&(o.setXYAt(o.v[tt][0],o.v[tt][1],"i",tt),o.setXYAt(o.v[o._length-1][0],o.v[o._length-1][1],"o",o._length-1)),at>a.e)break;c<it-1&&(o=shapePool.newElement(),st=!0,ct.push(o),j=0)}return ct},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,a.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(s,a){var o=a/100,c=[0,0],d=s._length,b=0;for(b=0;b<d;b+=1)c[0]+=s.v[b][0],c[1]+=s.v[b][1];c[0]/=d,c[1]/=d;var $,j,_e,et,tt,rt,nt=shapePool.newElement();for(nt.c=s.c,b=0;b<d;b+=1)$=s.v[b][0]+(c[0]-s.v[b][0])*o,j=s.v[b][1]+(c[1]-s.v[b][1])*o,_e=s.o[b][0]+(c[0]-s.o[b][0])*-o,et=s.o[b][1]+(c[1]-s.o[b][1])*-o,tt=s.i[b][0]+(c[0]-s.i[b][0])*-o,rt=s.i[b][1]+(c[1]-s.i[b][1])*-o,nt.setTripleAt($,j,_e,et,tt,rt,b);return nt},PuckerAndBloatModifier.prototype.processShapes=function(s){var a,o,c,d,b,$,j=this.shapes.length,_e=this.amount.v;if(_e!==0)for(o=0;o<j;o+=1){if($=(b=this.shapes[o]).localShapeCollection,b.shape._mdf||this._mdf||s)for($.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)$.addShape(this.processPath(a[c],_e));b.shape.paths=b.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var s=[0,0];function a(o,c,d){if(this.elem=o,this.frameId=-1,this.propType="transform",this.data=c,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(d||o),c.p&&c.p.s?(this.px=PropertyFactory.getProp(o,c.p.x,0,0,this),this.py=PropertyFactory.getProp(o,c.p.y,0,0,this),c.p.z&&(this.pz=PropertyFactory.getProp(o,c.p.z,0,0,this))):this.p=PropertyFactory.getProp(o,c.p||{k:[0,0,0]},1,0,this),c.rx){if(this.rx=PropertyFactory.getProp(o,c.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(o,c.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(o,c.rz,0,degToRads,this),c.or.k[0].ti){var b,$=c.or.k.length;for(b=0;b<$;b+=1)c.or.k[b].to=null,c.or.k[b].ti=null}this.or=PropertyFactory.getProp(o,c.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(o,c.r||{k:0},0,degToRads,this);c.sk&&(this.sk=PropertyFactory.getProp(o,c.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(o,c.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(o,c.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(o,c.s||{k:[100,100,100]},1,.01,this),c.o?this.o=PropertyFactory.getProp(o,c.o,0,.01,o):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return a.prototype={applyToMatrix:function(o){var c=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||c,this.a&&o.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&o.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&o.skewFromAxis(-this.sk.v,this.sa.v),this.r?o.rotate(-this.r.v):o.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?o.translate(this.px.v,this.py.v,-this.pz.v):o.translate(this.px.v,this.py.v,0):o.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(o){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||o){var c;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var d,b;if(c=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(d=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/c,0),b=this.p.getValueAtTime(this.p.keyframes[0].t/c,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(d=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/c,0),b=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/c,0)):(d=this.p.pv,b=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/c,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){d=[],b=[];var $=this.px,j=this.py;$._caching.lastFrame+$.offsetTime<=$.keyframes[0].t?(d[0]=$.getValueAtTime(($.keyframes[0].t+.01)/c,0),d[1]=j.getValueAtTime((j.keyframes[0].t+.01)/c,0),b[0]=$.getValueAtTime($.keyframes[0].t/c,0),b[1]=j.getValueAtTime(j.keyframes[0].t/c,0)):$._caching.lastFrame+$.offsetTime>=$.keyframes[$.keyframes.length-1].t?(d[0]=$.getValueAtTime($.keyframes[$.keyframes.length-1].t/c,0),d[1]=j.getValueAtTime(j.keyframes[j.keyframes.length-1].t/c,0),b[0]=$.getValueAtTime(($.keyframes[$.keyframes.length-1].t-.01)/c,0),b[1]=j.getValueAtTime((j.keyframes[j.keyframes.length-1].t-.01)/c,0)):(d=[$.pv,j.pv],b[0]=$.getValueAtTime(($._caching.lastFrame+$.offsetTime-.01)/c,$.offsetTime),b[1]=j.getValueAtTime((j._caching.lastFrame+j.offsetTime-.01)/c,j.offsetTime))}else d=b=s;this.v.rotate(-Math.atan2(d[1]-b[1],d[0]-b[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=function(o){this._addDynamicProperty(o),this.elem.addDynamicProperty(o),this._isDirty=!0},a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(o,c,d){return new a(o,c,d)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(s,a){return 1e5*Math.abs(s-a)<=Math.min(Math.abs(s),Math.abs(a))}function floatZero(s){return Math.abs(s)<=1e-5}function lerp(s,a,o){return s*(1-o)+a*o}function lerpPoint(s,a,o){return[lerp(s[0],a[0],o),lerp(s[1],a[1],o)]}function quadRoots(s,a,o){if(s===0)return[];var c=a*a-4*s*o;if(c<0)return[];var d=-a/(2*s);if(c===0)return[d];var b=Math.sqrt(c)/(2*s);return[d-b,d+b]}function polynomialCoefficients(s,a,o,c){return[3*a-s-3*o+c,3*s-6*a+3*o,-3*s+3*a,s]}function singlePoint(s){return new PolynomialBezier(s,s,s,s,!1)}function PolynomialBezier(s,a,o,c,d){d&&pointEqual(s,a)&&(a=lerpPoint(s,c,1/3)),d&&pointEqual(o,c)&&(o=lerpPoint(s,c,2/3));var b=polynomialCoefficients(s[0],a[0],o[0],c[0]),$=polynomialCoefficients(s[1],a[1],o[1],c[1]);this.a=[b[0],$[0]],this.b=[b[1],$[1]],this.c=[b[2],$[2]],this.d=[b[3],$[3]],this.points=[s,a,o,c]}function extrema(s,a){var o=s.points[0][a],c=s.points[s.points.length-1][a];if(o>c){var d=c;c=o,o=d}for(var b=quadRoots(3*s.a[a],2*s.b[a],s.c[a]),$=0;$<b.length;$+=1)if(b[$]>0&&b[$]<1){var j=s.point(b[$])[a];j<o?o=j:j>c&&(c=j)}return{min:o,max:c}}function intersectData(s,a,o){var c=s.boundingBox();return{cx:c.cx,cy:c.cy,width:c.width,height:c.height,bez:s,t:(a+o)/2,t1:a,t2:o}}function splitData(s){var a=s.bez.split(.5);return[intersectData(a[0],s.t1,s.t),intersectData(a[1],s.t,s.t2)]}function boxIntersect(s,a){return 2*Math.abs(s.cx-a.cx)<s.width+a.width&&2*Math.abs(s.cy-a.cy)<s.height+a.height}function intersectsImpl(s,a,o,c,d,b){if(boxIntersect(s,a))if(o>=b||s.width<=c&&s.height<=c&&a.width<=c&&a.height<=c)d.push([s.t,a.t]);else{var $=splitData(s),j=splitData(a);intersectsImpl($[0],j[0],o+1,c,d,b),intersectsImpl($[0],j[1],o+1,c,d,b),intersectsImpl($[1],j[0],o+1,c,d,b),intersectsImpl($[1],j[1],o+1,c,d,b)}}function crossProduct(s,a){return[s[1]*a[2]-s[2]*a[1],s[2]*a[0]-s[0]*a[2],s[0]*a[1]-s[1]*a[0]]}function lineIntersection(s,a,o,c){var d=[s[0],s[1],1],b=[a[0],a[1],1],$=[o[0],o[1],1],j=[c[0],c[1],1],_e=crossProduct(crossProduct(d,b),crossProduct($,j));return floatZero(_e[2])?null:[_e[0]/_e[2],_e[1]/_e[2]]}function polarOffset(s,a,o){return[s[0]+Math.cos(a)*o,s[1]-Math.sin(a)*o]}function pointDistance(s,a){return Math.hypot(s[0]-a[0],s[1]-a[1])}function pointEqual(s,a){return floatEqual(s[0],a[0])&&floatEqual(s[1],a[1])}function ZigZagModifier(){}function setPoint(s,a,o,c,d,b,$){var j=o-Math.PI/2,_e=o+Math.PI/2,et=a[0]+Math.cos(o)*c*d,tt=a[1]-Math.sin(o)*c*d;s.setTripleAt(et,tt,et+Math.cos(j)*b,tt-Math.sin(j)*b,et+Math.cos(_e)*$,tt-Math.sin(_e)*$,s.length())}function getPerpendicularVector(s,a){var o=[a[0]-s[0],a[1]-s[1]],c=.5*-Math.PI;return[Math.cos(c)*o[0]-Math.sin(c)*o[1],Math.sin(c)*o[0]+Math.cos(c)*o[1]]}function getProjectingAngle(s,a){var o=a===0?s.length()-1:a-1,c=(a+1)%s.length(),d=getPerpendicularVector(s.v[o],s.v[c]);return Math.atan2(0,1)-Math.atan2(d[1],d[0])}function zigZagCorner(s,a,o,c,d,b,$){var j=getProjectingAngle(a,o),_e=a.v[o%a._length],et=a.v[o===0?a._length-1:o-1],tt=a.v[(o+1)%a._length],rt=b===2?Math.sqrt(Math.pow(_e[0]-et[0],2)+Math.pow(_e[1]-et[1],2)):0,nt=b===2?Math.sqrt(Math.pow(_e[0]-tt[0],2)+Math.pow(_e[1]-tt[1],2)):0;setPoint(s,a.v[o%a._length],j,$,c,nt/(2*(d+1)),rt/(2*(d+1)))}function zigZagSegment(s,a,o,c,d,b){for(var $=0;$<c;$+=1){var j=($+1)/(c+1),_e=d===2?Math.sqrt(Math.pow(a.points[3][0]-a.points[0][0],2)+Math.pow(a.points[3][1]-a.points[0][1],2)):0,et=a.normalAngle(j);setPoint(s,a.point(j),et,b,o,_e/(2*(c+1)),_e/(2*(c+1))),b=-b}return b}function linearOffset(s,a,o){var c=Math.atan2(a[0]-s[0],a[1]-s[1]);return[polarOffset(s,c,o),polarOffset(a,c,o)]}function offsetSegment(s,a){var o,c,d,b,$,j,_e;o=(_e=linearOffset(s.points[0],s.points[1],a))[0],c=_e[1],d=(_e=linearOffset(s.points[1],s.points[2],a))[0],b=_e[1],$=(_e=linearOffset(s.points[2],s.points[3],a))[0],j=_e[1];var et=lineIntersection(o,c,d,b);et===null&&(et=c);var tt=lineIntersection($,j,d,b);return tt===null&&(tt=$),new PolynomialBezier(o,et,tt,j)}function joinLines(s,a,o,c,d){var b=a.points[3],$=o.points[0];if(c===3||pointEqual(b,$))return b;if(c===2){var j=-a.tangentAngle(1),_e=-o.tangentAngle(0)+Math.PI,et=lineIntersection(b,polarOffset(b,j+Math.PI/2,100),$,polarOffset($,j+Math.PI/2,100)),tt=et?pointDistance(et,b):pointDistance(b,$)/2,rt=polarOffset(b,j,2*tt*roundCorner);return s.setXYAt(rt[0],rt[1],"o",s.length()-1),rt=polarOffset($,_e,2*tt*roundCorner),s.setTripleAt($[0],$[1],$[0],$[1],rt[0],rt[1],s.length()),$}var nt=lineIntersection(pointEqual(b,a.points[2])?a.points[0]:a.points[2],b,$,pointEqual($,o.points[1])?o.points[3]:o.points[1]);return nt&&pointDistance(nt,b)<d?(s.setTripleAt(nt[0],nt[1],nt[0],nt[1],nt[0],nt[1],s.length()),nt):b}function getIntersection(s,a){var o=s.intersections(a);return o.length&&floatEqual(o[0][0],1)&&o.shift(),o.length?o[0]:null}function pruneSegmentIntersection(s,a){var o=s.slice(),c=a.slice(),d=getIntersection(s[s.length-1],a[0]);return d&&(o[s.length-1]=s[s.length-1].split(d[0])[0],c[0]=a[0].split(d[1])[1]),s.length>1&&a.length>1&&(d=getIntersection(s[0],a[a.length-1]))?[[s[0].split(d[0])[0]],[a[a.length-1].split(d[1])[1]]]:[o,c]}function pruneIntersections(s){for(var a,o=1;o<s.length;o+=1)a=pruneSegmentIntersection(s[o-1],s[o]),s[o-1]=a[0],s[o]=a[1];return s.length>1&&(a=pruneSegmentIntersection(s[s.length-1],s[0]),s[s.length-1]=a[0],s[0]=a[1]),s}function offsetSegmentSplit(s,a){var o,c,d,b,$=s.inflectionPoints();if($.length===0)return[offsetSegment(s,a)];if($.length===1||floatEqual($[1],1))return o=(d=s.split($[0]))[0],c=d[1],[offsetSegment(o,a),offsetSegment(c,a)];o=(d=s.split($[0]))[0];var j=($[1]-$[0])/(1-$[0]);return b=(d=d[1].split(j))[0],c=d[1],[offsetSegment(o,a),offsetSegment(b,a),offsetSegment(c,a)]}function OffsetPathModifier(){}function getFontProperties(s){for(var a=s.fStyle?s.fStyle.split(" "):[],o="normal",c="normal",d=a.length,b=0;b<d;b+=1)switch(a[b].toLowerCase()){case"italic":c="italic";break;case"bold":o="700";break;case"black":o="900";break;case"medium":o="500";break;case"regular":case"normal":o="400";break;case"light":case"thin":o="200"}return{style:c,weight:s.fWeight||o}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(s,a.c,0,null,this),this.o=PropertyFactory.getProp(s,a.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(s,a.tr,this),this.so=PropertyFactory.getProp(s,a.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(s,a.tr.eo,0,.01,this),this.data=a,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(s,a,o,c,d,b){var $=b?-1:1,j=c.s.v[0]+(1-c.s.v[0])*(1-d),_e=c.s.v[1]+(1-c.s.v[1])*(1-d);s.translate(c.p.v[0]*$*d,c.p.v[1]*$*d,c.p.v[2]),a.translate(-c.a.v[0],-c.a.v[1],c.a.v[2]),a.rotate(-c.r.v*$*d),a.translate(c.a.v[0],c.a.v[1],c.a.v[2]),o.translate(-c.a.v[0],-c.a.v[1],c.a.v[2]),o.scale(b?1/j:j,b?1/_e:_e),o.translate(c.a.v[0],c.a.v[1],c.a.v[2])},RepeaterModifier.prototype.init=function(s,a,o,c){for(this.elem=s,this.arr=a,this.pos=o,this.elemsData=c,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,a[o]);o>0;)o-=1,this._elements.unshift(a[o]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(s){var a,o=s.length;for(a=0;a<o;a+=1)s[a]._processed=!1,s[a].ty==="gr"&&this.resetElements(s[a].it)},RepeaterModifier.prototype.cloneElements=function(s){var a=JSON.parse(JSON.stringify(s));return this.resetElements(a),a},RepeaterModifier.prototype.changeGroupRender=function(s,a){var o,c=s.length;for(o=0;o<c;o+=1)s[o]._render=a,s[o].ty==="gr"&&this.changeGroupRender(s[o].it,a)},RepeaterModifier.prototype.processShapes=function(s){var a,o,c,d,b,$=!1;if(this._mdf||s){var j,_e=Math.ceil(this.c.v);if(this._groups.length<_e){for(;this._groups.length<_e;){var et={it:this.cloneElements(this._elements),ty:"gr"};et.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,et),this._groups.splice(0,0,et),this._currentCopies+=1}this.elem.reloadShapes(),$=!0}for(b=0,c=0;c<=this._groups.length-1;c+=1){if(j=b<_e,this._groups[c]._render=j,this.changeGroupRender(this._groups[c].it,j),!j){var tt=this.elemsData[c].it,rt=tt[tt.length-1];rt.transform.op.v!==0?(rt.transform.op._mdf=!0,rt.transform.op.v=0):rt.transform.op._mdf=!1}b+=1}this._currentCopies=_e;var nt=this.o.v,it=nt%1,at=nt>0?Math.floor(nt):Math.ceil(nt),ct=this.pMatrix.props,st=this.rMatrix.props,ot=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ht,dt,ft=0;if(nt>0){for(;ft<at;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ft+=1;it&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,it,!1),ft+=it)}else if(nt<0){for(;ft>at;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ft-=1;it&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-it,!0),ft-=it)}for(c=this.data.m===1?0:this._currentCopies-1,d=this.data.m===1?1:-1,b=this._currentCopies;b;){if(dt=(o=(a=this.elemsData[c].it)[a.length-1].transform.mProps.v.props).length,a[a.length-1].transform.mProps._mdf=!0,a[a.length-1].transform.op._mdf=!0,a[a.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(c/(this._currentCopies-1)),ft!==0){for((c!==0&&d===1||c!==this._currentCopies-1&&d===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(st[0],st[1],st[2],st[3],st[4],st[5],st[6],st[7],st[8],st[9],st[10],st[11],st[12],st[13],st[14],st[15]),this.matrix.transform(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6],ot[7],ot[8],ot[9],ot[10],ot[11],ot[12],ot[13],ot[14],ot[15]),this.matrix.transform(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5],ct[6],ct[7],ct[8],ct[9],ct[10],ct[11],ct[12],ct[13],ct[14],ct[15]),ht=0;ht<dt;ht+=1)o[ht]=this.matrix.props[ht];this.matrix.reset()}else for(this.matrix.reset(),ht=0;ht<dt;ht+=1)o[ht]=this.matrix.props[ht];ft+=1,b-=1,c+=d}}else for(b=this._currentCopies,c=0,d=1;b;)o=(a=this.elemsData[c].it)[a.length-1].transform.mProps.v.props,a[a.length-1].transform.mProps._mdf=!1,a[a.length-1].transform.op._mdf=!1,b-=1,c+=d;return $},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(s,a.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(s,a){var o,c=shapePool.newElement();c.c=s.c;var d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st=s._length,ot=0;for(o=0;o<st;o+=1)d=s.v[o],$=s.o[o],b=s.i[o],d[0]===$[0]&&d[1]===$[1]&&d[0]===b[0]&&d[1]===b[1]?o!==0&&o!==st-1||s.c?(j=o===0?s.v[st-1]:s.v[o-1],et=(_e=Math.sqrt(Math.pow(d[0]-j[0],2)+Math.pow(d[1]-j[1],2)))?Math.min(_e/2,a)/_e:0,tt=at=d[0]+(j[0]-d[0])*et,rt=ct=d[1]-(d[1]-j[1])*et,nt=tt-(tt-d[0])*roundCorner,it=rt-(rt-d[1])*roundCorner,c.setTripleAt(tt,rt,nt,it,at,ct,ot),ot+=1,j=o===st-1?s.v[0]:s.v[o+1],et=(_e=Math.sqrt(Math.pow(d[0]-j[0],2)+Math.pow(d[1]-j[1],2)))?Math.min(_e/2,a)/_e:0,tt=nt=d[0]+(j[0]-d[0])*et,rt=it=d[1]+(j[1]-d[1])*et,at=tt-(tt-d[0])*roundCorner,ct=rt-(rt-d[1])*roundCorner,c.setTripleAt(tt,rt,nt,it,at,ct,ot),ot+=1):(c.setTripleAt(d[0],d[1],$[0],$[1],b[0],b[1],ot),ot+=1):(c.setTripleAt(s.v[o][0],s.v[o][1],s.o[o][0],s.o[o][1],s.i[o][0],s.i[o][1],ot),ot+=1);return c},RoundCornersModifier.prototype.processShapes=function(s){var a,o,c,d,b,$,j=this.shapes.length,_e=this.rd.v;if(_e!==0)for(o=0;o<j;o+=1){if($=(b=this.shapes[o]).localShapeCollection,b.shape._mdf||this._mdf||s)for($.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)$.addShape(this.processPath(a[c],_e));b.shape.paths=b.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(s){return[((this.a[0]*s+this.b[0])*s+this.c[0])*s+this.d[0],((this.a[1]*s+this.b[1])*s+this.c[1])*s+this.d[1]]},PolynomialBezier.prototype.derivative=function(s){return[(3*s*this.a[0]+2*this.b[0])*s+this.c[0],(3*s*this.a[1]+2*this.b[1])*s+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(s){var a=this.derivative(s);return Math.atan2(a[1],a[0])},PolynomialBezier.prototype.normalAngle=function(s){var a=this.derivative(s);return Math.atan2(a[0],a[1])},PolynomialBezier.prototype.inflectionPoints=function(){var s=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(s))return[];var a=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/s,o=a*a-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/s;if(o<0)return[];var c=Math.sqrt(o);return floatZero(c)?c>0&&c<1?[a]:[]:[a-c,a+c].filter(function(d){return d>0&&d<1})},PolynomialBezier.prototype.split=function(s){if(s<=0)return[singlePoint(this.points[0]),this];if(s>=1)return[this,singlePoint(this.points[this.points.length-1])];var a=lerpPoint(this.points[0],this.points[1],s),o=lerpPoint(this.points[1],this.points[2],s),c=lerpPoint(this.points[2],this.points[3],s),d=lerpPoint(a,o,s),b=lerpPoint(o,c,s),$=lerpPoint(d,b,s);return[new PolynomialBezier(this.points[0],a,d,$,!0),new PolynomialBezier($,b,c,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var s=this.bounds();return{left:s.x.min,right:s.x.max,top:s.y.min,bottom:s.y.max,width:s.x.max-s.x.min,height:s.y.max-s.y.min,cx:(s.x.max+s.x.min)/2,cy:(s.y.max+s.y.min)/2}},PolynomialBezier.prototype.intersections=function(s,a,o){a===void 0&&(a=2),o===void 0&&(o=7);var c=[];return intersectsImpl(intersectData(this,0,1),intersectData(s,0,1),0,a,c,o),c},PolynomialBezier.shapeSegment=function(s,a){var o=(a+1)%s.length();return new PolynomialBezier(s.v[a],s.o[a],s.i[o],s.v[o],!0)},PolynomialBezier.shapeSegmentInverted=function(s,a){var o=(a+1)%s.length();return new PolynomialBezier(s.v[o],s.i[o],s.o[a],s.v[a],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(s,a.s,0,null,this),this.frequency=PropertyFactory.getProp(s,a.r,0,null,this),this.pointsType=PropertyFactory.getProp(s,a.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0},ZigZagModifier.prototype.processPath=function(s,a,o,c){var d=s._length,b=shapePool.newElement();if(b.c=s.c,s.c||(d-=1),d===0)return b;var $=-1,j=PolynomialBezier.shapeSegment(s,0);zigZagCorner(b,s,0,a,o,c,$);for(var _e=0;_e<d;_e+=1)$=zigZagSegment(b,j,a,o,c,-$),j=_e!==d-1||s.c?PolynomialBezier.shapeSegment(s,(_e+1)%d):null,zigZagCorner(b,s,_e+1,a,o,c,$);return b},ZigZagModifier.prototype.processShapes=function(s){var a,o,c,d,b,$,j=this.shapes.length,_e=this.amplitude.v,et=Math.max(0,Math.round(this.frequency.v)),tt=this.pointsType.v;if(_e!==0)for(o=0;o<j;o+=1){if($=(b=this.shapes[o]).localShapeCollection,b.shape._mdf||this._mdf||s)for($.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)$.addShape(this.processPath(a[c],_e,et,tt));b.shape.paths=b.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(s,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,a.a,0,null,this),this.miterLimit=PropertyFactory.getProp(s,a.ml,0,null,this),this.lineJoin=a.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(s,a,o,c){var d=shapePool.newElement();d.c=s.c;var b,$,j,_e=s.length();s.c||(_e-=1);var et=[];for(b=0;b<_e;b+=1)j=PolynomialBezier.shapeSegment(s,b),et.push(offsetSegmentSplit(j,a));if(!s.c)for(b=_e-1;b>=0;b-=1)j=PolynomialBezier.shapeSegmentInverted(s,b),et.push(offsetSegmentSplit(j,a));et=pruneIntersections(et);var tt=null,rt=null;for(b=0;b<et.length;b+=1){var nt=et[b];for(rt&&(tt=joinLines(d,rt,nt[0],o,c)),rt=nt[nt.length-1],$=0;$<nt.length;$+=1)j=nt[$],tt&&pointEqual(j.points[0],tt)?d.setXYAt(j.points[1][0],j.points[1][1],"o",d.length()-1):d.setTripleAt(j.points[0][0],j.points[0][1],j.points[1][0],j.points[1][1],j.points[0][0],j.points[0][1],d.length()),d.setTripleAt(j.points[3][0],j.points[3][1],j.points[3][0],j.points[3][1],j.points[2][0],j.points[2][1],d.length()),tt=j.points[3]}return et.length&&joinLines(d,rt,et[0][0],o,c),d},OffsetPathModifier.prototype.processShapes=function(s){var a,o,c,d,b,$,j=this.shapes.length,_e=this.amount.v,et=this.miterLimit.v,tt=this.lineJoin;if(_e!==0)for(o=0;o<j;o+=1){if($=(b=this.shapes[o]).localShapeCollection,b.shape._mdf||this._mdf||s)for($.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)$.addShape(this.processPath(a[c],_e,tt,et));b.shape.paths=b.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var s={w:0,size:0,shapes:[],data:{shapes:[]}},a=[];a=a.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var o=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],c=[65039,8205];function d(j,_e){var et=createTag("span");et.setAttribute("aria-hidden",!0),et.style.fontFamily=_e;var tt=createTag("span");tt.innerText="giItT1WQy@!-/#",et.style.position="absolute",et.style.left="-10000px",et.style.top="-10000px",et.style.fontSize="300px",et.style.fontVariant="normal",et.style.fontStyle="normal",et.style.fontWeight="normal",et.style.letterSpacing="0",et.appendChild(tt),document.body.appendChild(et);var rt=tt.offsetWidth;return tt.style.fontFamily=function(nt){var it,at=nt.split(","),ct=at.length,st=[];for(it=0;it<ct;it+=1)at[it]!=="sans-serif"&&at[it]!=="monospace"&&st.push(at[it]);return st.join(",")}(j)+", "+_e,{node:tt,w:rt,parent:et}}function b(j,_e){var et,tt=document.body&&_e?"svg":"canvas",rt=getFontProperties(j);if(tt==="svg"){var nt=createNS("text");nt.style.fontSize="100px",nt.setAttribute("font-family",j.fFamily),nt.setAttribute("font-style",rt.style),nt.setAttribute("font-weight",rt.weight),nt.textContent="1",j.fClass?(nt.style.fontFamily="inherit",nt.setAttribute("class",j.fClass)):nt.style.fontFamily=j.fFamily,_e.appendChild(nt),et=nt}else{var it=new OffscreenCanvas(500,500).getContext("2d");it.font=rt.style+" "+rt.weight+" 100px "+j.fFamily,et=it}return{measureText:function(at){return tt==="svg"?(et.textContent=at,et.getComputedTextLength()):et.measureText(at).width}}}var $=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return $.isModifier=function(j,_e){var et=j.toString(16)+_e.toString(16);return o.indexOf(et)!==-1},$.isZeroWidthJoiner=function(j,_e){return _e?j===c[0]&&_e===c[1]:j===c[1]},$.isCombinedCharacter=function(j){return a.indexOf(j)!==-1},$.prototype={addChars:function(j){if(j){var _e;this.chars||(this.chars=[]);var et,tt,rt=j.length,nt=this.chars.length;for(_e=0;_e<rt;_e+=1){for(et=0,tt=!1;et<nt;)this.chars[et].style===j[_e].style&&this.chars[et].fFamily===j[_e].fFamily&&this.chars[et].ch===j[_e].ch&&(tt=!0),et+=1;tt||(this.chars.push(j[_e]),nt+=1)}}},addFonts:function(j,_e){if(j){if(this.chars)return this.isLoaded=!0,void(this.fonts=j.list);if(!document.body)return this.isLoaded=!0,j.list.forEach(function(dt){dt.helper=b(dt),dt.cache={}}),void(this.fonts=j.list);var et,tt=j.list,rt=tt.length,nt=rt;for(et=0;et<rt;et+=1){var it,at,ct=!0;if(tt[et].loaded=!1,tt[et].monoCase=d(tt[et].fFamily,"monospace"),tt[et].sansCase=d(tt[et].fFamily,"sans-serif"),tt[et].fPath){if(tt[et].fOrigin==="p"||tt[et].origin===3){if((it=document.querySelectorAll('style[f-forigin="p"][f-family="'+tt[et].fFamily+'"], style[f-origin="3"][f-family="'+tt[et].fFamily+'"]')).length>0&&(ct=!1),ct){var st=createTag("style");st.setAttribute("f-forigin",tt[et].fOrigin),st.setAttribute("f-origin",tt[et].origin),st.setAttribute("f-family",tt[et].fFamily),st.type="text/css",st.innerText="@font-face {font-family: "+tt[et].fFamily+"; font-style: normal; src: url('"+tt[et].fPath+"');}",_e.appendChild(st)}}else if(tt[et].fOrigin==="g"||tt[et].origin===1){for(it=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),at=0;at<it.length;at+=1)it[at].href.indexOf(tt[et].fPath)!==-1&&(ct=!1);if(ct){var ot=createTag("link");ot.setAttribute("f-forigin",tt[et].fOrigin),ot.setAttribute("f-origin",tt[et].origin),ot.type="text/css",ot.rel="stylesheet",ot.href=tt[et].fPath,document.body.appendChild(ot)}}else if(tt[et].fOrigin==="t"||tt[et].origin===2){for(it=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),at=0;at<it.length;at+=1)tt[et].fPath===it[at].src&&(ct=!1);if(ct){var ht=createTag("link");ht.setAttribute("f-forigin",tt[et].fOrigin),ht.setAttribute("f-origin",tt[et].origin),ht.setAttribute("rel","stylesheet"),ht.setAttribute("href",tt[et].fPath),_e.appendChild(ht)}}}else tt[et].loaded=!0,nt-=1;tt[et].helper=b(tt[et],_e),tt[et].cache={},this.fonts.push(tt[et])}nt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(j,_e,et){for(var tt=0,rt=this.chars.length;tt<rt;){if(this.chars[tt].ch===j&&this.chars[tt].style===_e&&this.chars[tt].fFamily===et)return this.chars[tt];tt+=1}return(typeof j=="string"&&j.charCodeAt(0)!==13||!j)&&console&&console.warn&&!this._warned&&(this._warned=!0),s},getFontByName:function(j){for(var _e=0,et=this.fonts.length;_e<et;){if(this.fonts[_e].fName===j)return this.fonts[_e];_e+=1}return this.fonts[0]},measureText:function(j,_e,et){var tt=this.getFontByName(_e),rt=j.charCodeAt(0);if(!tt.cache[rt+1]){var nt=tt.helper;if(j===" "){var it=nt.measureText("|"+j+"|"),at=nt.measureText("||");tt.cache[rt+1]=(it-at)/100}else tt.cache[rt+1]=nt.measureText(j)/100}return tt.cache[rt+1]*et},checkLoadedFonts:function(){var j,_e,et,tt=this.fonts.length,rt=tt;for(j=0;j<tt;j+=1)this.fonts[j].loaded?rt-=1:this.fonts[j].fOrigin==="n"||this.fonts[j].origin===0?this.fonts[j].loaded=!0:(_e=this.fonts[j].monoCase.node,et=this.fonts[j].monoCase.w,_e.offsetWidth!==et?(rt-=1,this.fonts[j].loaded=!0):(_e=this.fonts[j].sansCase.node,et=this.fonts[j].sansCase.w,_e.offsetWidth!==et&&(rt-=1,this.fonts[j].loaded=!0)),this.fonts[j].loaded&&(this.fonts[j].sansCase.parent.parentNode.removeChild(this.fonts[j].sansCase.parent),this.fonts[j].monoCase.parent.parentNode.removeChild(this.fonts[j].monoCase.parent)));rt!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},$}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(s){this.renderableComponents.indexOf(s)===-1&&this.renderableComponents.push(s)},removeRenderableComponent:function(s){this.renderableComponents.indexOf(s)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(s),1)},prepareRenderableFrame:function(s){this.checkLayerLimits(s)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(s){this.data.ip-this.data.st<=s&&this.data.op-this.data.st>s?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var s,a=this.renderableComponents.length;for(s=0;s<a;s+=1)this.renderableComponents[s].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(s){return blendModeEnums[s]||""}),blendModeEnums;function SliderEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,0,0,o)}function AngleEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,0,0,o)}function ColorEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,1,0,o)}function PointEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,1,0,o)}function LayerIndexEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,0,0,o)}function MaskIndexEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,0,0,o)}function CheckboxEffect(s,a,o){this.p=PropertyFactory.getProp(a,s.v,0,0,o)}function NoValueEffect(){this.p={}}function EffectsManager(s,a){var o,c=s.ef||[];this.effectElements=[];var d,b=c.length;for(o=0;o<b;o+=1)d=new GroupEffect(c[o],a),this.effectElements.push(d)}function GroupEffect(s,a){this.init(s,a)}function BaseElement(){}function FrameElement(){}function FootageElement(s,a,o){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(s.refId),this.footageData=a.imageLoader.getAsset(this.assetData),this.initBaseData(s,a,o)}function AudioElement(s,a,o){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(s.refId),this.initBaseData(s,a,o),this._isPlaying=!1,this._canPlay=!1;var c=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(c),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,s.au&&s.au.lv?s.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(s,a,o){this.data=s,this.element=a,this.globalData=o,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var c,d,b=this.globalData.defs,$=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray($),this.solidPath="";var j,_e,et,tt,rt,nt,it=this.masksProperties,at=0,ct=[],st=createElementID(),ot="clipPath",ht="clip-path";for(c=0;c<$;c+=1)if((it[c].mode!=="a"&&it[c].mode!=="n"||it[c].inv||it[c].o.k!==100||it[c].o.x)&&(ot="mask",ht="mask"),it[c].mode!=="s"&&it[c].mode!=="i"||at!==0?et=null:((et=createNS("rect")).setAttribute("fill","#ffffff"),et.setAttribute("width",this.element.comp.data.w||0),et.setAttribute("height",this.element.comp.data.h||0),ct.push(et)),d=createNS("path"),it[c].mode==="n")this.viewData[c]={op:PropertyFactory.getProp(this.element,it[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,it[c],3),elem:d,lastPath:""},b.appendChild(d);else{var dt;if(at+=1,d.setAttribute("fill",it[c].mode==="s"?"#000000":"#ffffff"),d.setAttribute("clip-rule","nonzero"),it[c].x.k!==0?(ot="mask",ht="mask",nt=PropertyFactory.getProp(this.element,it[c].x,0,null,this.element),dt=createElementID(),(tt=createNS("filter")).setAttribute("id",dt),(rt=createNS("feMorphology")).setAttribute("operator","erode"),rt.setAttribute("in","SourceGraphic"),rt.setAttribute("radius","0"),tt.appendChild(rt),b.appendChild(tt),d.setAttribute("stroke",it[c].mode==="s"?"#000000":"#ffffff")):(rt=null,nt=null),this.storedData[c]={elem:d,x:nt,expan:rt,lastPath:"",lastOperator:"",filterId:dt,lastRadius:0},it[c].mode==="i"){_e=ct.length;var ft=createNS("g");for(j=0;j<_e;j+=1)ft.appendChild(ct[j]);var mt=createNS("mask");mt.setAttribute("mask-type","alpha"),mt.setAttribute("id",st+"_"+at),mt.appendChild(d),b.appendChild(mt),ft.setAttribute("mask","url("+getLocationHref()+"#"+st+"_"+at+")"),ct.length=0,ct.push(ft)}else ct.push(d);it[c].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[c]={elem:d,lastPath:"",op:PropertyFactory.getProp(this.element,it[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,it[c],3),invRect:et},this.viewData[c].prop.k||this.drawPath(it[c],this.viewData[c].prop.v,this.viewData[c])}for(this.maskElement=createNS(ot),$=ct.length,c=0;c<$;c+=1)this.maskElement.appendChild(ct[c]);at>0&&(this.maskElement.setAttribute("id",st),this.element.maskedElement.setAttribute(ht,"url("+getLocationHref()+"#"+st+")"),b.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(s,a){var o;this.data=s,this.effectElements=[],this.initDynamicPropertyContainer(a);var c,d=this.data.ef.length,b=this.data.ef;for(o=0;o<d;o+=1){switch(c=null,b[o].ty){case 0:c=new SliderEffect(b[o],a,this);break;case 1:c=new AngleEffect(b[o],a,this);break;case 2:c=new ColorEffect(b[o],a,this);break;case 3:c=new PointEffect(b[o],a,this);break;case 4:case 7:c=new CheckboxEffect(b[o],a,this);break;case 10:c=new LayerIndexEffect(b[o],a,this);break;case 11:c=new MaskIndexEffect(b[o],a,this);break;case 5:c=new EffectsManager(b[o],a);break;default:c=new NoValueEffect(b[o])}c&&this.effectElements.push(c)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var s=0,a=this.data.masksProperties.length;s<a;){if(this.data.masksProperties[s].mode!=="n"&&this.data.masksProperties[s].cl!==!1)return!0;s+=1}return!1},initExpressions:function(){var s=getExpressionInterfaces();if(s){var a=s("layer"),o=s("effects"),c=s("shape"),d=s("text"),b=s("comp");this.layerInterface=a(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var $=o.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface($),this.data.ty===0||this.data.xt?this.compInterface=b(this):this.data.ty===4?(this.layerInterface.shapeInterface=c(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=d(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var s=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=s},initBaseData:function(s,a,o){this.globalData=a,this.comp=o,this.data=s,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(s,a){var o,c=this.dynamicProperties.length;for(o=0;o<c;o+=1)(a||this._isParent&&this.dynamicProperties[o].propType==="transform")&&(this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(s){this.dynamicProperties.indexOf(s)===-1&&this.dynamicProperties.push(s)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var s=getExpressionInterfaces();if(s){var a=s("footage");this.layerInterface=a(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(s){if(this.prepareRenderableFrame(s,!0),this.prepareProperties(s,!0),this.tm._placeholder)this._currentTime=s/this.data.sr;else{var a=this.tm.v;this._currentTime=a}this._volume=this.lv.v[0];var o=this._volume*this._volumeMultiplier;this._previousVolume!==o&&(this._previousVolume=o,this.audio.volume(o))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(s){this.audio.rate(s)},AudioElement.prototype.volume=function(s){this._volumeMultiplier=s,this._previousVolume=s*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(s){var a,o,c=this.layers.length;for(this.completeLayers=!0,a=c-1;a>=0;a-=1)this.elements[a]||(o=this.layers[a]).ip-o.st<=s-this.layers[a].st&&o.op-o.st>s-this.layers[a].st&&this.buildItem(a),this.completeLayers=!!this.elements[a]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(s){switch(s.ty){case 2:return this.createImage(s);case 0:return this.createComp(s);case 1:return this.createSolid(s);case 3:return this.createNull(s);case 4:return this.createShape(s);case 5:return this.createText(s);case 6:return this.createAudio(s);case 13:return this.createCamera(s);case 15:return this.createFootage(s);default:return this.createNull(s)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(s){return new AudioElement(s,this.globalData,this)},BaseRenderer.prototype.createFootage=function(s){return new FootageElement(s,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)this.buildItem(s);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(s){var a;this.completeLayers=!1;var o,c=s.length,d=this.layers.length;for(a=0;a<c;a+=1)for(o=0;o<d;){if(this.layers[o].id===s[a].id){this.layers[o]=s[a];break}o+=1}},BaseRenderer.prototype.setProjectInterface=function(s){this.globalData.projectInterface=s},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(s,a,o){for(var c=this.elements,d=this.layers,b=0,$=d.length;b<$;)d[b].ind==a&&(c[b]&&c[b]!==!0?(o.push(c[b]),c[b].setAsParent(),d[b].parent!==void 0?this.buildElementParenting(s,d[b].parent,o):s.setHierarchy(o)):(this.buildItem(b),this.addPendingElement(s))),b+=1},BaseRenderer.prototype.addPendingElement=function(s){this.pendingElements.push(s)},BaseRenderer.prototype.searchExtraCompositions=function(s){var a,o=s.length;for(a=0;a<o;a+=1)if(s[a].xt){var c=this.createComp(s[a]);c.initExpressions(),this.globalData.projectInterface.registerComposition(c)}},BaseRenderer.prototype.getElementById=function(s){var a,o=this.elements.length;for(a=0;a<o;a+=1)if(this.elements[a].data.ind===s)return this.elements[a];return null},BaseRenderer.prototype.getElementByPath=function(s){var a,o=s.shift();if(typeof o=="number")a=this.elements[o];else{var c,d=this.elements.length;for(c=0;c<d;c+=1)if(this.elements[c].data.nm===o){a=this.elements[c];break}}return s.length===0?a:a.getElementByPath(s)},BaseRenderer.prototype.setupGlobalData=function(s,a){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(s.chars),this.globalData.fontManager.addFonts(s.fonts,a),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=s.fr,this.globalData.nm=s.nm,this.globalData.compSize={w:s.w,h:s.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var s,a=this.finalTransform.mat,o=0,c=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;o<c;){if(this.hierarchy[o].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}o+=1}if(this.finalTransform._matMdf)for(s=this.finalTransform.mProp.v.props,a.cloneFromProps(s),o=0;o<c;o+=1)s=this.hierarchy[o].finalTransform.mProp.v.props,a.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15])}},globalToLocal:function(s){var a=[];a.push(this.finalTransform);for(var o,c=!0,d=this.comp;c;)d.finalTransform?(d.data.hasMask&&a.splice(0,0,d.finalTransform),d=d.comp):c=!1;var b,$=a.length;for(o=0;o<$;o+=1)b=a[o].mat.applyToPointArray(0,0,0),s=[s[0]-b[0],s[1]-b[1],0];return s},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(s){return this.viewData[s].prop},MaskElement.prototype.renderFrame=function(s){var a,o=this.element.finalTransform.mat,c=this.masksProperties.length;for(a=0;a<c;a+=1)if((this.viewData[a].prop._mdf||s)&&this.drawPath(this.masksProperties[a],this.viewData[a].prop.v,this.viewData[a]),(this.viewData[a].op._mdf||s)&&this.viewData[a].elem.setAttribute("fill-opacity",this.viewData[a].op.v),this.masksProperties[a].mode!=="n"&&(this.viewData[a].invRect&&(this.element.finalTransform.mProp._mdf||s)&&this.viewData[a].invRect.setAttribute("transform",o.getInverseMatrix().to2dCSS()),this.storedData[a].x&&(this.storedData[a].x._mdf||s))){var d=this.storedData[a].expan;this.storedData[a].x.v<0?(this.storedData[a].lastOperator!=="erode"&&(this.storedData[a].lastOperator="erode",this.storedData[a].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[a].filterId+")")),d.setAttribute("radius",-this.storedData[a].x.v)):(this.storedData[a].lastOperator!=="dilate"&&(this.storedData[a].lastOperator="dilate",this.storedData[a].elem.setAttribute("filter",null)),this.storedData[a].elem.setAttribute("stroke-width",2*this.storedData[a].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var s="M0,0 ";return s+=" h"+this.globalData.compSize.w,s+=" v"+this.globalData.compSize.h,s+=" h-"+this.globalData.compSize.w,s+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(s,a,o){var c,d,b=" M"+a.v[0][0]+","+a.v[0][1];for(d=a._length,c=1;c<d;c+=1)b+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[c][0]+","+a.i[c][1]+" "+a.v[c][0]+","+a.v[c][1];if(a.c&&d>1&&(b+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[0][0]+","+a.i[0][1]+" "+a.v[0][0]+","+a.v[0][1]),o.lastPath!==b){var $="";o.elem&&(a.c&&($=s.inv?this.solidPath+b:b),o.elem.setAttribute("d",$)),o.lastPath=b}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var s={};return s.createFilter=function(a,o){var c=createNS("filter");return c.setAttribute("id",a),o!==!0&&(c.setAttribute("filterUnits","objectBoundingBox"),c.setAttribute("x","0%"),c.setAttribute("y","0%"),c.setAttribute("width","100%"),c.setAttribute("height","100%")),c},s.createAlphaToLuminanceFilter=function(){var a=createNS("feColorMatrix");return a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),a},s}(),featureSupport=function(){var s={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(s.maskType=!1),/firefox/i.test(navigator.userAgent)&&(s.svgLumaHidden=!1),s}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(s){var a,o,c="SourceGraphic",d=s.data.ef?s.data.ef.length:0,b=createElementID(),$=filtersFactory.createFilter(b,!0),j=0;for(this.filters=[],a=0;a<d;a+=1){o=null;var _e=s.data.ef[a].ty;registeredEffects[_e]&&(o=new registeredEffects[_e].effect($,s.effectsManager.effectElements[a],s,idPrefix+j,c),c=idPrefix+j,registeredEffects[_e].countsAsEffect&&(j+=1)),o&&this.filters.push(o)}j&&(s.globalData.defs.appendChild($),s.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+b+")")),this.filters.length&&s.addRenderableComponent(this)}function registerEffect(s,a,o){registeredEffects[s]={effect:a,countsAsEffect:o}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(s,a,o){this.assetData=a.getAssetData(s.refId),this.initElement(s,a,o),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(s,a){this.elem=s,this.pos=a}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(s){var a,o=this.filters.length;for(a=0;a<o;a+=1)this.filters[a].renderFrame(s)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var s=null;if(this.data.td){this.matteMasks={};var a=createNS("g");a.setAttribute("id",this.layerId),a.appendChild(this.layerElement),s=a,this.globalData.defs.appendChild(a)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),s=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var o=createNS("clipPath"),c=createNS("path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d=createElementID();if(o.setAttribute("id",d),o.appendChild(c),this.globalData.defs.appendChild(o),this.checkMasks()){var b=createNS("g");b.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")"),b.appendChild(this.layerElement),this.transformedElement=b,s?s.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(s){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[s]){var a,o,c,d,b=this.layerId+"_"+s;if(s===1||s===3){var $=createNS("mask");$.setAttribute("id",b),$.setAttribute("mask-type",s===3?"luminance":"alpha"),(c=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),$.appendChild(c),this.globalData.defs.appendChild($),featureSupport.maskType||s!==1||($.setAttribute("mask-type","luminance"),a=createElementID(),o=filtersFactory.createFilter(a),this.globalData.defs.appendChild(o),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(d=createNS("g")).appendChild(c),$.appendChild(d),d.setAttribute("filter","url("+getLocationHref()+"#"+a+")"))}else if(s===2){var j=createNS("mask");j.setAttribute("id",b),j.setAttribute("mask-type","alpha");var _e=createNS("g");j.appendChild(_e),a=createElementID(),o=filtersFactory.createFilter(a);var et=createNS("feComponentTransfer");et.setAttribute("in","SourceGraphic"),o.appendChild(et);var tt=createNS("feFuncA");tt.setAttribute("type","table"),tt.setAttribute("tableValues","1.0 0.0"),et.appendChild(tt),this.globalData.defs.appendChild(o);var rt=createNS("rect");rt.setAttribute("width",this.comp.data.w),rt.setAttribute("height",this.comp.data.h),rt.setAttribute("x","0"),rt.setAttribute("y","0"),rt.setAttribute("fill","#ffffff"),rt.setAttribute("opacity","0"),_e.setAttribute("filter","url("+getLocationHref()+"#"+a+")"),_e.appendChild(rt),(c=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),_e.appendChild(c),featureSupport.maskType||(j.setAttribute("mask-type","luminance"),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),d=createNS("g"),_e.appendChild(rt),d.appendChild(this.layerElement),_e.appendChild(d)),this.globalData.defs.appendChild(j)}this.matteMasks[s]=b}return this.matteMasks[s]},setMatte:function(s){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+s+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(s){this.hierarchy=s},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(s,a,o){this.initFrame(),this.initBaseData(s,a,o),this.initTransform(s,a,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(s){var a,o=this.shapeModifiers.length;for(a=0;a<o;a+=1)this.shapeModifiers[a].addShape(s)},isShapeInAnimatedModifiers:function(s){for(var a=this.shapeModifiers.length;0<a;)if(this.shapeModifiers[0].isAnimatedWithShape(s))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var s,a=this.shapes.length;for(s=0;s<a;s+=1)this.shapes[s].sh.reset();for(s=(a=this.shapeModifiers.length)-1;s>=0&&!this.shapeModifiers[s].processShapes(this._isFirstFrame);s-=1);}},searchProcessedElement:function(s){for(var a=this.processedElements,o=0,c=a.length;o<c;){if(a[o].elem===s)return a[o].pos;o+=1}return 0},addProcessedElement:function(s,a){for(var o=this.processedElements,c=o.length;c;)if(o[c-=1].elem===s)return void(o[c].pos=a);o.push(new ProcessedElement(s,a))},prepareFrame:function(s){this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(s,a,o){this.caches=[],this.styles=[],this.transformers=s,this.lStr="",this.sh=o,this.lvl=a,this._isAnimated=!!o.k;for(var c=0,d=s.length;c<d;){if(s[c].mProps.dynamicProperties.length){this._isAnimated=!0;break}c+=1}}function SVGStyleData(s,a){this.data=s,this.type=s.ty,this.d="",this.lvl=a,this._mdf=!1,this.closed=s.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(s,a,o,c){var d;this.elem=s,this.frameId=-1,this.dataProps=createSizedArray(a.length),this.renderer=o,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",a.length?a.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(c);var b,$=a.length||0;for(d=0;d<$;d+=1)b=PropertyFactory.getProp(s,a[d].v,0,0,this),this.k=b.k||this.k,this.dataProps[d]={n:a[d].n,p:b};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(s,a,o){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.w=PropertyFactory.getProp(s,a.w,0,null,this),this.d=new DashProperty(s,a.d||{},"svg",this),this.c=PropertyFactory.getProp(s,a.c,1,255,this),this.style=o,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(s,a,o){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.c=PropertyFactory.getProp(s,a.c,1,255,this),this.style=o}function SVGNoStyleData(s,a,o){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.style=o}function GradientProperty(s,a,o){this.data=a,this.c=createTypedArray("uint8c",4*a.p);var c=a.k.k[0].s?a.k.k[0].s.length-4*a.p:a.k.k.length-4*a.p;this.o=createTypedArray("float32",c),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=c,this.initDynamicPropertyContainer(o),this.prop=PropertyFactory.getProp(s,a.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(s,a,o){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.initGradientData(s,a,o)}function SVGGradientStrokeStyleData(s,a,o){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(s,a.w,0,null,this),this.d=new DashProperty(s,a.d||{},"svg",this),this.initGradientData(s,a,o),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(s,a,o){this.transform={mProps:s,op:a,container:o},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(s){if((this.elem.globalData.frameId!==this.frameId||s)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||s,this._mdf)){var a=0,o=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),a=0;a<o;a+=1)this.dataProps[a].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[a].p.v:this.dashArray[a]=this.dataProps[a].p.v:this.dashoffset[0]=this.dataProps[a].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(s,a){for(var o=0,c=this.o.length/2;o<c;){if(Math.abs(s[4*o]-s[4*a+2*o])>.01)return!1;o+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var s=0,a=this.data.k.k.length;s<a;){if(!this.comparePoints(this.data.k.k[s].s,this.data.p))return!1;s+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(s){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||s){var a,o,c,d=4*this.data.p;for(a=0;a<d;a+=1)o=a%4==0?100:255,c=Math.round(this.prop.v[a]*o),this.c[a]!==c&&(this.c[a]=c,this._cmdf=!s);if(this.o.length)for(d=this.prop.v.length,a=4*this.data.p;a<d;a+=1)o=a%2==0?100:1,c=a%2==0?Math.round(100*this.prop.v[a]):this.prop.v[a],this.o[a-4*this.data.p]!==c&&(this.o[a-4*this.data.p]=c,this._omdf=!s);this._mdf=!s}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(s,a,o){this.o=PropertyFactory.getProp(s,a.o,0,.01,this),this.s=PropertyFactory.getProp(s,a.s,1,null,this),this.e=PropertyFactory.getProp(s,a.e,1,null,this),this.h=PropertyFactory.getProp(s,a.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(s,a.a||{k:0},0,degToRads,this),this.g=new GradientProperty(s,a.g,this),this.style=o,this.stops=[],this.setGradientData(o.pElem,a),this.setGradientOpacity(a,o),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(s,a){var o=createElementID(),c=createNS(a.t===1?"linearGradient":"radialGradient");c.setAttribute("id",o),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse");var d,b,$,j=[];for($=4*a.g.p,b=0;b<$;b+=4)d=createNS("stop"),c.appendChild(d),j.push(d);s.setAttribute(a.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),this.gf=c,this.cst=j},SVGGradientFillStyleData.prototype.setGradientOpacity=function(s,a){if(this.g._hasOpacity&&!this.g._collapsable){var o,c,d,b=createNS("mask"),$=createNS("path");b.appendChild($);var j=createElementID(),_e=createElementID();b.setAttribute("id",_e);var et=createNS(s.t===1?"linearGradient":"radialGradient");et.setAttribute("id",j),et.setAttribute("spreadMethod","pad"),et.setAttribute("gradientUnits","userSpaceOnUse"),d=s.g.k.k[0].s?s.g.k.k[0].s.length:s.g.k.k.length;var tt=this.stops;for(c=4*s.g.p;c<d;c+=2)(o=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),et.appendChild(o),tt.push(o);$.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+j+")"),s.ty==="gs"&&($.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),$.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),s.lj===1&&$.setAttribute("stroke-miterlimit",s.ml)),this.of=et,this.ms=b,this.ost=tt,this.maskId=_e,a.msElem=$}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(s,a,o,c){if(a===0)return"";var d,b=s.o,$=s.i,j=s.v,_e=" M"+c.applyToPointStringified(j[0][0],j[0][1]);for(d=1;d<a;d+=1)_e+=" C"+c.applyToPointStringified(b[d-1][0],b[d-1][1])+" "+c.applyToPointStringified($[d][0],$[d][1])+" "+c.applyToPointStringified(j[d][0],j[d][1]);return o&&a&&(_e+=" C"+c.applyToPointStringified(b[d-1][0],b[d-1][1])+" "+c.applyToPointStringified($[0][0],$[0][1])+" "+c.applyToPointStringified(j[0][0],j[0][1]),_e+="z"),_e},SVGElementsRenderer=function(){var s=new Matrix,a=new Matrix;function o(et,tt,rt){(rt||tt.transform.op._mdf)&&tt.transform.container.setAttribute("opacity",tt.transform.op.v),(rt||tt.transform.mProps._mdf)&&tt.transform.container.setAttribute("transform",tt.transform.mProps.v.to2dCSS())}function c(){}function d(et,tt,rt){var nt,it,at,ct,st,ot,ht,dt,ft,mt,gt,vt=tt.styles.length,yt=tt.lvl;for(ot=0;ot<vt;ot+=1){if(ct=tt.sh._mdf||rt,tt.styles[ot].lvl<yt){for(dt=a.reset(),mt=yt-tt.styles[ot].lvl,gt=tt.transformers.length-1;!ct&&mt>0;)ct=tt.transformers[gt].mProps._mdf||ct,mt-=1,gt-=1;if(ct)for(mt=yt-tt.styles[ot].lvl,gt=tt.transformers.length-1;mt>0;)ft=tt.transformers[gt].mProps.v.props,dt.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5],ft[6],ft[7],ft[8],ft[9],ft[10],ft[11],ft[12],ft[13],ft[14],ft[15]),mt-=1,gt-=1}else dt=s;if(it=(ht=tt.sh.paths)._length,ct){for(at="",nt=0;nt<it;nt+=1)(st=ht.shapes[nt])&&st._length&&(at+=buildShapeString(st,st._length,st.c,dt));tt.caches[ot]=at}else at=tt.caches[ot];tt.styles[ot].d+=et.hd===!0?"":at,tt.styles[ot]._mdf=ct||tt.styles[ot]._mdf}}function b(et,tt,rt){var nt=tt.style;(tt.c._mdf||rt)&&nt.pElem.setAttribute("fill","rgb("+bmFloor(tt.c.v[0])+","+bmFloor(tt.c.v[1])+","+bmFloor(tt.c.v[2])+")"),(tt.o._mdf||rt)&&nt.pElem.setAttribute("fill-opacity",tt.o.v)}function $(et,tt,rt){j(et,tt,rt),_e(et,tt,rt)}function j(et,tt,rt){var nt,it,at,ct,st,ot=tt.gf,ht=tt.g._hasOpacity,dt=tt.s.v,ft=tt.e.v;if(tt.o._mdf||rt){var mt=et.ty==="gf"?"fill-opacity":"stroke-opacity";tt.style.pElem.setAttribute(mt,tt.o.v)}if(tt.s._mdf||rt){var gt=et.t===1?"x1":"cx",vt=gt==="x1"?"y1":"cy";ot.setAttribute(gt,dt[0]),ot.setAttribute(vt,dt[1]),ht&&!tt.g._collapsable&&(tt.of.setAttribute(gt,dt[0]),tt.of.setAttribute(vt,dt[1]))}if(tt.g._cmdf||rt){nt=tt.cst;var yt=tt.g.c;for(at=nt.length,it=0;it<at;it+=1)(ct=nt[it]).setAttribute("offset",yt[4*it]+"%"),ct.setAttribute("stop-color","rgb("+yt[4*it+1]+","+yt[4*it+2]+","+yt[4*it+3]+")")}if(ht&&(tt.g._omdf||rt)){var Et=tt.g.o;for(at=(nt=tt.g._collapsable?tt.cst:tt.ost).length,it=0;it<at;it+=1)ct=nt[it],tt.g._collapsable||ct.setAttribute("offset",Et[2*it]+"%"),ct.setAttribute("stop-opacity",Et[2*it+1])}if(et.t===1)(tt.e._mdf||rt)&&(ot.setAttribute("x2",ft[0]),ot.setAttribute("y2",ft[1]),ht&&!tt.g._collapsable&&(tt.of.setAttribute("x2",ft[0]),tt.of.setAttribute("y2",ft[1])));else if((tt.s._mdf||tt.e._mdf||rt)&&(st=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),ot.setAttribute("r",st),ht&&!tt.g._collapsable&&tt.of.setAttribute("r",st)),tt.e._mdf||tt.h._mdf||tt.a._mdf||rt){st||(st=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)));var St=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Ct=tt.h.v;Ct>=1?Ct=.99:Ct<=-1&&(Ct=-.99);var wt=st*Ct,_t=Math.cos(St+tt.a.v)*wt+dt[0],Tt=Math.sin(St+tt.a.v)*wt+dt[1];ot.setAttribute("fx",_t),ot.setAttribute("fy",Tt),ht&&!tt.g._collapsable&&(tt.of.setAttribute("fx",_t),tt.of.setAttribute("fy",Tt))}}function _e(et,tt,rt){var nt=tt.style,it=tt.d;it&&(it._mdf||rt)&&it.dashStr&&(nt.pElem.setAttribute("stroke-dasharray",it.dashStr),nt.pElem.setAttribute("stroke-dashoffset",it.dashoffset[0])),tt.c&&(tt.c._mdf||rt)&&nt.pElem.setAttribute("stroke","rgb("+bmFloor(tt.c.v[0])+","+bmFloor(tt.c.v[1])+","+bmFloor(tt.c.v[2])+")"),(tt.o._mdf||rt)&&nt.pElem.setAttribute("stroke-opacity",tt.o.v),(tt.w._mdf||rt)&&(nt.pElem.setAttribute("stroke-width",tt.w.v),nt.msElem&&nt.msElem.setAttribute("stroke-width",tt.w.v))}return{createRenderFunction:function(et){switch(et.ty){case"fl":return b;case"gf":return j;case"gs":return $;case"st":return _e;case"sh":case"el":case"rc":case"sr":return d;case"tr":return o;case"no":return c;default:return null}}}}();function SVGShapeElement(s,a,o){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(s,a,o),this.prevViewData=[]}function LetterProps(s,a,o,c,d,b){this.o=s,this.sw=a,this.sc=o,this.fc=c,this.m=d,this.p=b,this._mdf={o:!0,sw:!!a,sc:!!o,fc:!!c,m:!0,p:!0}}function TextProperty(s,a){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=a,this.elem=s,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var s,a,o,c,d=this.shapes.length,b=this.stylesList.length,$=[],j=!1;for(o=0;o<b;o+=1){for(c=this.stylesList[o],j=!1,$.length=0,s=0;s<d;s+=1)(a=this.shapes[s]).styles.indexOf(c)!==-1&&($.push(a),j=a._isAnimated||j);$.length>1&&j&&this.setShapesAsAnimated($)}},SVGShapeElement.prototype.setShapesAsAnimated=function(s){var a,o=s.length;for(a=0;a<o;a+=1)s[a].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(s,a){var o,c=new SVGStyleData(s,a),d=c.pElem;return s.ty==="st"?o=new SVGStrokeStyleData(this,s,c):s.ty==="fl"?o=new SVGFillStyleData(this,s,c):s.ty==="gf"||s.ty==="gs"?(o=new(s.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,s,c),this.globalData.defs.appendChild(o.gf),o.maskId&&(this.globalData.defs.appendChild(o.ms),this.globalData.defs.appendChild(o.of),d.setAttribute("mask","url("+getLocationHref()+"#"+o.maskId+")"))):s.ty==="no"&&(o=new SVGNoStyleData(this,s,c)),s.ty!=="st"&&s.ty!=="gs"||(d.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),d.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),d.setAttribute("fill-opacity","0"),s.lj===1&&d.setAttribute("stroke-miterlimit",s.ml)),s.r===2&&d.setAttribute("fill-rule","evenodd"),s.ln&&d.setAttribute("id",s.ln),s.cl&&d.setAttribute("class",s.cl),s.bm&&(d.style["mix-blend-mode"]=getBlendMode(s.bm)),this.stylesList.push(c),this.addToAnimatedContents(s,o),o},SVGShapeElement.prototype.createGroupElement=function(s){var a=new ShapeGroupData;return s.ln&&a.gr.setAttribute("id",s.ln),s.cl&&a.gr.setAttribute("class",s.cl),s.bm&&(a.gr.style["mix-blend-mode"]=getBlendMode(s.bm)),a},SVGShapeElement.prototype.createTransformElement=function(s,a){var o=TransformPropertyFactory.getTransformProperty(this,s,this),c=new SVGTransformData(o,o.o,a);return this.addToAnimatedContents(s,c),c},SVGShapeElement.prototype.createShapeElement=function(s,a,o){var c=4;s.ty==="rc"?c=5:s.ty==="el"?c=6:s.ty==="sr"&&(c=7);var d=new SVGShapeData(a,o,ShapePropertyFactory.getShapeProp(this,s,c,this));return this.shapes.push(d),this.addShapeToModifiers(d),this.addToAnimatedContents(s,d),d},SVGShapeElement.prototype.addToAnimatedContents=function(s,a){for(var o=0,c=this.animatedContents.length;o<c;){if(this.animatedContents[o].element===a)return;o+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(s),element:a,data:s})},SVGShapeElement.prototype.setElementStyles=function(s){var a,o=s.styles,c=this.stylesList.length;for(a=0;a<c;a+=1)this.stylesList[a].closed||o.push(this.stylesList[a])},SVGShapeElement.prototype.reloadShapes=function(){var s;this._isFirstFrame=!0;var a=this.itemsData.length;for(s=0;s<a;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),a=this.dynamicProperties.length,s=0;s<a;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(s,a,o,c,d,b,$){var j,_e,et,tt,rt,nt,it=[].concat(b),at=s.length-1,ct=[],st=[];for(j=at;j>=0;j-=1){if((nt=this.searchProcessedElement(s[j]))?a[j]=o[nt-1]:s[j]._render=$,s[j].ty==="fl"||s[j].ty==="st"||s[j].ty==="gf"||s[j].ty==="gs"||s[j].ty==="no")nt?a[j].style.closed=!1:a[j]=this.createStyleElement(s[j],d),s[j]._render&&a[j].style.pElem.parentNode!==c&&c.appendChild(a[j].style.pElem),ct.push(a[j].style);else if(s[j].ty==="gr"){if(nt)for(et=a[j].it.length,_e=0;_e<et;_e+=1)a[j].prevViewData[_e]=a[j].it[_e];else a[j]=this.createGroupElement(s[j]);this.searchShapes(s[j].it,a[j].it,a[j].prevViewData,a[j].gr,d+1,it,$),s[j]._render&&a[j].gr.parentNode!==c&&c.appendChild(a[j].gr)}else s[j].ty==="tr"?(nt||(a[j]=this.createTransformElement(s[j],c)),tt=a[j].transform,it.push(tt)):s[j].ty==="sh"||s[j].ty==="rc"||s[j].ty==="el"||s[j].ty==="sr"?(nt||(a[j]=this.createShapeElement(s[j],it,d)),this.setElementStyles(a[j])):s[j].ty==="tm"||s[j].ty==="rd"||s[j].ty==="ms"||s[j].ty==="pb"||s[j].ty==="zz"||s[j].ty==="op"?(nt?(rt=a[j]).closed=!1:((rt=ShapeModifiers.getModifier(s[j].ty)).init(this,s[j]),a[j]=rt,this.shapeModifiers.push(rt)),st.push(rt)):s[j].ty==="rp"&&(nt?(rt=a[j]).closed=!0:(rt=ShapeModifiers.getModifier(s[j].ty),a[j]=rt,rt.init(this,s,j,a),this.shapeModifiers.push(rt),$=!1),st.push(rt));this.addProcessedElement(s[j],j+1)}for(at=ct.length,j=0;j<at;j+=1)ct[j].closed=!0;for(at=st.length,j=0;j<at;j+=1)st[j].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var s;this.renderModifiers();var a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].reset();for(this.renderShape(),s=0;s<a;s+=1)(this.stylesList[s]._mdf||this._isFirstFrame)&&(this.stylesList[s].msElem&&(this.stylesList[s].msElem.setAttribute("d",this.stylesList[s].d),this.stylesList[s].d="M0 0"+this.stylesList[s].d),this.stylesList[s].pElem.setAttribute("d",this.stylesList[s].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var s,a,o=this.animatedContents.length;for(s=0;s<o;s+=1)a=this.animatedContents[s],(this._isFirstFrame||a.element._isAnimated)&&a.data!==!0&&a.fn(a.data,a.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(s,a,o,c,d,b){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var $=!1;return this.o!==s&&(this.o=s,this._mdf.o=!0,$=!0),this.sw!==a&&(this.sw=a,this._mdf.sw=!0,$=!0),this.sc!==o&&(this.sc=o,this._mdf.sc=!0,$=!0),this.fc!==c&&(this.fc=c,this._mdf.fc=!0,$=!0),this.m!==d&&(this.m=d,this._mdf.m=!0,$=!0),!b.length||this.p[0]===b[0]&&this.p[1]===b[1]&&this.p[4]===b[4]&&this.p[5]===b[5]&&this.p[12]===b[12]&&this.p[13]===b[13]||(this.p=b,this._mdf.p=!0,$=!0),$},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s},TextProperty.prototype.setCurrentData=function(s){s.__complete||this.completeTextData(s),this.currentData=s,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(s){this.effectsSequence.push(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(s){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||s){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var a=this.currentData,o=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var c;this.lock=!0,this._mdf=!1;var d=this.effectsSequence.length,b=s||this.data.d.k[this.keysIndex].s;for(c=0;c<d;c+=1)b=o!==this.keysIndex?this.effectsSequence[c](b,b.t):this.effectsSequence[c](this.currentData,b.t);a!==b&&this.setCurrentData(b),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var s=this.data.d.k,a=this.elem.comp.renderedFrame,o=0,c=s.length;o<=c-1&&!(o===c-1||s[o+1].t>a);)o+=1;return this.keysIndex!==o&&(this.keysIndex=o),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(s){for(var a,o,c=[],d=0,b=s.length,$=!1;d<b;)a=s.charCodeAt(d),FontManager.isCombinedCharacter(a)?c[c.length-1]+=s.charAt(d):a>=55296&&a<=56319?(o=s.charCodeAt(d+1))>=56320&&o<=57343?($||FontManager.isModifier(a,o)?(c[c.length-1]+=s.substr(d,2),$=!1):c.push(s.substr(d,2)),d+=1):c.push(s.charAt(d)):a>56319?(o=s.charCodeAt(d+1),FontManager.isZeroWidthJoiner(a,o)?($=!0,c[c.length-1]+=s.substr(d,2),d+=1):c.push(s.charAt(d))):FontManager.isZeroWidthJoiner(a)?(c[c.length-1]+=s.charAt(d),$=!0):c.push(s.charAt(d)),d+=1;return c},TextProperty.prototype.completeTextData=function(s){s.__complete=!0;var a,o,c,d,b,$,j,_e=this.elem.globalData.fontManager,et=this.data,tt=[],rt=0,nt=et.m.g,it=0,at=0,ct=0,st=[],ot=0,ht=0,dt=_e.getFontByName(s.f),ft=0,mt=getFontProperties(dt);s.fWeight=mt.weight,s.fStyle=mt.style,s.finalSize=s.s,s.finalText=this.buildFinalText(s.t),o=s.finalText.length,s.finalLineHeight=s.lh;var gt,vt=s.tr/1e3*s.finalSize;if(s.sz)for(var yt,Et,St=!0,Ct=s.sz[0],wt=s.sz[1];St;){yt=0,ot=0,o=(Et=this.buildFinalText(s.t)).length,vt=s.tr/1e3*s.finalSize;var _t=-1;for(a=0;a<o;a+=1)gt=Et[a].charCodeAt(0),c=!1,Et[a]===" "?_t=a:gt!==13&&gt!==3||(ot=0,c=!0,yt+=s.finalLineHeight||1.2*s.finalSize),_e.chars?(j=_e.getCharData(Et[a],dt.fStyle,dt.fFamily),ft=c?0:j.w*s.finalSize/100):ft=_e.measureText(Et[a],s.f,s.finalSize),ot+ft>Ct&&Et[a]!==" "?(_t===-1?o+=1:a=_t,yt+=s.finalLineHeight||1.2*s.finalSize,Et.splice(a,_t===a?1:0,"\r"),_t=-1,ot=0):(ot+=ft,ot+=vt);yt+=dt.ascent*s.finalSize/100,this.canResize&&s.finalSize>this.minimumFontSize&&wt<yt?(s.finalSize-=1,s.finalLineHeight=s.finalSize*s.lh/s.s):(s.finalText=Et,o=s.finalText.length,St=!1)}ot=-vt,ft=0;var Tt,Mt=0;for(a=0;a<o;a+=1)if(c=!1,(gt=(Tt=s.finalText[a]).charCodeAt(0))===13||gt===3?(Mt=0,st.push(ot),ht=ot>ht?ot:ht,ot=-2*vt,d="",c=!0,ct+=1):d=Tt,_e.chars?(j=_e.getCharData(Tt,dt.fStyle,_e.getFontByName(s.f).fFamily),ft=c?0:j.w*s.finalSize/100):ft=_e.measureText(d,s.f,s.finalSize),Tt===" "?Mt+=ft+vt:(ot+=ft+vt+Mt,Mt=0),tt.push({l:ft,an:ft,add:it,n:c,anIndexes:[],val:d,line:ct,animatorJustifyOffset:0}),nt==2){if(it+=ft,d===""||d===" "||a===o-1){for(d!==""&&d!==" "||(it-=ft);at<=a;)tt[at].an=it,tt[at].ind=rt,tt[at].extra=ft,at+=1;rt+=1,it=0}}else if(nt==3){if(it+=ft,d===""||a===o-1){for(d===""&&(it-=ft);at<=a;)tt[at].an=it,tt[at].ind=rt,tt[at].extra=ft,at+=1;it=0,rt+=1}}else tt[rt].ind=rt,tt[rt].extra=0,rt+=1;if(s.l=tt,ht=ot>ht?ot:ht,st.push(ot),s.sz)s.boxWidth=s.sz[0],s.justifyOffset=0;else switch(s.boxWidth=ht,s.j){case 1:s.justifyOffset=-s.boxWidth;break;case 2:s.justifyOffset=-s.boxWidth/2;break;default:s.justifyOffset=0}s.lineWidths=st;var Bt,Rt,bt,Pt,Dt=et.a;$=Dt.length;var $t=[];for(b=0;b<$;b+=1){for((Bt=Dt[b]).a.sc&&(s.strokeColorAnim=!0),Bt.a.sw&&(s.strokeWidthAnim=!0),(Bt.a.fc||Bt.a.fh||Bt.a.fs||Bt.a.fb)&&(s.fillColorAnim=!0),Pt=0,bt=Bt.s.b,a=0;a<o;a+=1)(Rt=tt[a]).anIndexes[b]=Pt,(bt==1&&Rt.val!==""||bt==2&&Rt.val!==""&&Rt.val!==" "||bt==3&&(Rt.n||Rt.val==" "||a==o-1)||bt==4&&(Rt.n||a==o-1))&&(Bt.s.rn===1&&$t.push(Pt),Pt+=1);et.a[b].s.totalChars=Pt;var Lt,Jt=-1;if(Bt.s.rn===1)for(a=0;a<o;a+=1)Jt!=(Rt=tt[a]).anIndexes[b]&&(Jt=Rt.anIndexes[b],Lt=$t.splice(Math.floor(Math.random()*$t.length),1)[0]),Rt.anIndexes[b]=Lt}s.yOffset=s.finalLineHeight||1.2*s.finalSize,s.ls=s.ls||0,s.ascent=dt.ascent*s.finalSize/100},TextProperty.prototype.updateDocumentData=function(s,a){a=a===void 0?this.keysIndex:a;var o=this.copyData({},this.data.d.k[a].s);o=this.copyData(o,s),this.data.d.k[a].s=o,this.recalculate(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(s){var a=this.data.d.k[s].s;a.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(a)},TextProperty.prototype.canResizeFont=function(s){this.canResize=s,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(s){this.minimumFontSize=Math.floor(s)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var s=Math.max,a=Math.min,o=Math.floor;function c(d,b){this._currentTextLength=-1,this.k=!1,this.data=b,this.elem=d,this.comp=d.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(d),this.s=PropertyFactory.getProp(d,b.s||{k:0},0,0,this),this.e="e"in b?PropertyFactory.getProp(d,b.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(d,b.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(d,b.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(d,b.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(d,b.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(d,b.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return c.prototype={getMult:function(d){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var b=0,$=0,j=1,_e=1;this.ne.v>0?b=this.ne.v/100:$=-this.ne.v/100,this.xe.v>0?j=1-this.xe.v/100:_e=1+this.xe.v/100;var et=BezierFactory.getBezierEasing(b,$,j,_e).get,tt=0,rt=this.finalS,nt=this.finalE,it=this.data.sh;if(it===2)tt=et(tt=nt===rt?d>=nt?1:0:s(0,a(.5/(nt-rt)+(d-rt)/(nt-rt),1)));else if(it===3)tt=et(tt=nt===rt?d>=nt?0:1:1-s(0,a(.5/(nt-rt)+(d-rt)/(nt-rt),1)));else if(it===4)nt===rt?tt=0:(tt=s(0,a(.5/(nt-rt)+(d-rt)/(nt-rt),1)))<.5?tt*=2:tt=1-2*(tt-.5),tt=et(tt);else if(it===5){if(nt===rt)tt=0;else{var at=nt-rt,ct=-at/2+(d=a(s(0,d+.5-rt),nt-rt)),st=at/2;tt=Math.sqrt(1-ct*ct/(st*st))}tt=et(tt)}else it===6?(nt===rt?tt=0:(d=a(s(0,d+.5-rt),nt-rt),tt=(1+Math.cos(Math.PI+2*Math.PI*d/(nt-rt)))/2),tt=et(tt)):(d>=o(rt)&&(tt=s(0,a(d-rt<0?a(nt,1)-(rt-d):nt-d,1))),tt=et(tt));if(this.sm.v!==100){var ot=.01*this.sm.v;ot===0&&(ot=1e-8);var ht=.5-.5*ot;tt<ht?tt=0:(tt=(tt-ht)/ot)>1&&(tt=1)}return tt*this.a.v},getValue:function(d){this.iterateDynamicProperties(),this._mdf=d||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,d&&this.data.r===2&&(this.e.v=this._currentTextLength);var b=this.data.r===2?1:100/this.data.totalChars,$=this.o.v/b,j=this.s.v/b+$,_e=this.e.v/b+$;if(j>_e){var et=j;j=_e,_e=et}this.finalS=j,this.finalE=_e}},extendPrototype([DynamicPropertyContainer],c),{getTextSelectorProp:function(d,b,$){return new c(d,b)}}}();function TextAnimatorDataProperty(s,a,o){var c={propType:!1},d=PropertyFactory.getProp,b=a.a;this.a={r:b.r?d(s,b.r,0,degToRads,o):c,rx:b.rx?d(s,b.rx,0,degToRads,o):c,ry:b.ry?d(s,b.ry,0,degToRads,o):c,sk:b.sk?d(s,b.sk,0,degToRads,o):c,sa:b.sa?d(s,b.sa,0,degToRads,o):c,s:b.s?d(s,b.s,1,.01,o):c,a:b.a?d(s,b.a,1,0,o):c,o:b.o?d(s,b.o,0,.01,o):c,p:b.p?d(s,b.p,1,0,o):c,sw:b.sw?d(s,b.sw,0,0,o):c,sc:b.sc?d(s,b.sc,1,0,o):c,fc:b.fc?d(s,b.fc,1,0,o):c,fh:b.fh?d(s,b.fh,0,0,o):c,fs:b.fs?d(s,b.fs,0,.01,o):c,fb:b.fb?d(s,b.fb,0,.01,o):c,t:b.t?d(s,b.t,0,0,o):c},this.s=TextSelectorProp.getTextSelectorProp(s,a.s,o),this.s.t=a.s.t}function TextAnimatorProperty(s,a,o){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=s,this._renderType=a,this._elem=o,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(o)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var s,a,o=this._textData.a.length,c=PropertyFactory.getProp;for(s=0;s<o;s+=1)a=this._textData.a[s],this._animatorsData[s]=new TextAnimatorDataProperty(this._elem,a,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:c(this._elem,this._textData.p.a,0,0,this),f:c(this._elem,this._textData.p.f,0,0,this),l:c(this._elem,this._textData.p.l,0,0,this),r:c(this._elem,this._textData.p.r,0,0,this),p:c(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=c(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(s,a){if(this.lettersChangedFlag=a,this._mdf||this._isFirstFrame||a||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st,ot,ht,dt,ft,mt=this._moreOptions.alignment.v,gt=this._animatorsData,vt=this._textData,yt=this.mHelper,Et=this._renderType,St=this.renderedLetters.length,Ct=s.l;if(this._hasMaskedPath){if(ft=this._pathData.m,!this._pathData.n||this._pathData._mdf){var wt,_t=ft.v;for(this._pathData.r.v&&(_t=_t.reverse()),$={tLength:0,segments:[]},b=_t._length-1,ot=0,d=0;d<b;d+=1)wt=bez.buildBezierData(_t.v[d],_t.v[d+1],[_t.o[d][0]-_t.v[d][0],_t.o[d][1]-_t.v[d][1]],[_t.i[d+1][0]-_t.v[d+1][0],_t.i[d+1][1]-_t.v[d+1][1]]),$.tLength+=wt.segmentLength,$.segments.push(wt),ot+=wt.segmentLength;d=b,ft.v.c&&(wt=bez.buildBezierData(_t.v[d],_t.v[0],[_t.o[d][0]-_t.v[d][0],_t.o[d][1]-_t.v[d][1]],[_t.i[0][0]-_t.v[0][0],_t.i[0][1]-_t.v[0][1]]),$.tLength+=wt.segmentLength,$.segments.push(wt),ot+=wt.segmentLength),this._pathData.pi=$}if($=this._pathData.pi,j=this._pathData.f.v,nt=0,rt=1,et=0,tt=!0,ct=$.segments,j<0&&ft.v.c)for($.tLength<Math.abs(j)&&(j=-Math.abs(j)%$.tLength),rt=(at=ct[nt=ct.length-1].points).length-1;j<0;)j+=at[rt].partialLength,(rt-=1)<0&&(rt=(at=ct[nt-=1].points).length-1);it=(at=ct[nt].points)[rt-1],st=(_e=at[rt]).partialLength}b=Ct.length,o=0,c=0;var Tt,Mt,Bt,Rt,bt,Pt=1.2*s.finalSize*.714,Dt=!0;Bt=gt.length;var $t,Lt,Jt,Qt,or,er,sr,Ar,Er,Tr,ur,kt,Xt=-1,ar=j,yr=nt,mr=rt,Br=-1,_r="",br=this.defaultPropsArray;if(s.j===2||s.j===1){var Pr=0,Or=0,Wr=s.j===2?-.5:-1,Ot=0,Ft=!0;for(d=0;d<b;d+=1)if(Ct[d].n){for(Pr&&(Pr+=Or);Ot<d;)Ct[Ot].animatorJustifyOffset=Pr,Ot+=1;Pr=0,Ft=!0}else{for(Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).t.propType&&(Ft&&s.j===2&&(Or+=Tt.t.v*Wr),(bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars)).length?Pr+=Tt.t.v*bt[0]*Wr:Pr+=Tt.t.v*bt*Wr);Ft=!1}for(Pr&&(Pr+=Or);Ot<d;)Ct[Ot].animatorJustifyOffset=Pr,Ot+=1}for(d=0;d<b;d+=1){if(yt.reset(),Qt=1,Ct[d].n)o=0,c+=s.yOffset,c+=Dt?1:0,j=ar,Dt=!1,this._hasMaskedPath&&(rt=mr,it=(at=ct[nt=yr].points)[rt-1],st=(_e=at[rt]).partialLength,et=0),_r="",ur="",Er="",kt="",br=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Br!==Ct[d].line){switch(s.j){case 1:j+=ot-s.lineWidths[Ct[d].line];break;case 2:j+=(ot-s.lineWidths[Ct[d].line])/2}Br=Ct[d].line}Xt!==Ct[d].ind&&(Ct[Xt]&&(j+=Ct[Xt].extra),j+=Ct[d].an/2,Xt=Ct[d].ind),j+=mt[0]*Ct[d].an*.005;var ir=0;for(Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).p.propType&&((bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars)).length?ir+=Tt.p.v[0]*bt[0]:ir+=Tt.p.v[0]*bt),Tt.a.propType&&((bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars)).length?ir+=Tt.a.v[0]*bt[0]:ir+=Tt.a.v[0]*bt);for(tt=!0,this._pathData.a.v&&(j=.5*Ct[0].an+(ot-this._pathData.f.v-.5*Ct[0].an-.5*Ct[Ct.length-1].an)*Xt/(b-1),j+=this._pathData.f.v);tt;)et+st>=j+ir||!at?(ht=(j+ir-et)/_e.partialLength,Lt=it.point[0]+(_e.point[0]-it.point[0])*ht,Jt=it.point[1]+(_e.point[1]-it.point[1])*ht,yt.translate(-mt[0]*Ct[d].an*.005,-mt[1]*Pt*.01),tt=!1):at&&(et+=_e.partialLength,(rt+=1)>=at.length&&(rt=0,ct[nt+=1]?at=ct[nt].points:ft.v.c?(rt=0,at=ct[nt=0].points):(et-=_e.partialLength,at=null)),at&&(it=_e,st=(_e=at[rt]).partialLength));$t=Ct[d].an/2-Ct[d].add,yt.translate(-$t,0,0)}else $t=Ct[d].an/2-Ct[d].add,yt.translate(-$t,0,0),yt.translate(-mt[0]*Ct[d].an*.005,-mt[1]*Pt*.01,0);for(Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).t.propType&&(bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars),o===0&&s.j===0||(this._hasMaskedPath?bt.length?j+=Tt.t.v*bt[0]:j+=Tt.t.v*bt:bt.length?o+=Tt.t.v*bt[0]:o+=Tt.t.v*bt));for(s.strokeWidthAnim&&(er=s.sw||0),s.strokeColorAnim&&(or=s.sc?[s.sc[0],s.sc[1],s.sc[2]]:[0,0,0]),s.fillColorAnim&&s.fc&&(sr=[s.fc[0],s.fc[1],s.fc[2]]),Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).a.propType&&((bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars)).length?yt.translate(-Tt.a.v[0]*bt[0],-Tt.a.v[1]*bt[1],Tt.a.v[2]*bt[2]):yt.translate(-Tt.a.v[0]*bt,-Tt.a.v[1]*bt,Tt.a.v[2]*bt));for(Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).s.propType&&((bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars)).length?yt.scale(1+(Tt.s.v[0]-1)*bt[0],1+(Tt.s.v[1]-1)*bt[1],1):yt.scale(1+(Tt.s.v[0]-1)*bt,1+(Tt.s.v[1]-1)*bt,1));for(Mt=0;Mt<Bt;Mt+=1){if(Tt=gt[Mt].a,bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars),Tt.sk.propType&&(bt.length?yt.skewFromAxis(-Tt.sk.v*bt[0],Tt.sa.v*bt[1]):yt.skewFromAxis(-Tt.sk.v*bt,Tt.sa.v*bt)),Tt.r.propType&&(bt.length?yt.rotateZ(-Tt.r.v*bt[2]):yt.rotateZ(-Tt.r.v*bt)),Tt.ry.propType&&(bt.length?yt.rotateY(Tt.ry.v*bt[1]):yt.rotateY(Tt.ry.v*bt)),Tt.rx.propType&&(bt.length?yt.rotateX(Tt.rx.v*bt[0]):yt.rotateX(Tt.rx.v*bt)),Tt.o.propType&&(bt.length?Qt+=(Tt.o.v*bt[0]-Qt)*bt[0]:Qt+=(Tt.o.v*bt-Qt)*bt),s.strokeWidthAnim&&Tt.sw.propType&&(bt.length?er+=Tt.sw.v*bt[0]:er+=Tt.sw.v*bt),s.strokeColorAnim&&Tt.sc.propType)for(Ar=0;Ar<3;Ar+=1)bt.length?or[Ar]+=(Tt.sc.v[Ar]-or[Ar])*bt[0]:or[Ar]+=(Tt.sc.v[Ar]-or[Ar])*bt;if(s.fillColorAnim&&s.fc){if(Tt.fc.propType)for(Ar=0;Ar<3;Ar+=1)bt.length?sr[Ar]+=(Tt.fc.v[Ar]-sr[Ar])*bt[0]:sr[Ar]+=(Tt.fc.v[Ar]-sr[Ar])*bt;Tt.fh.propType&&(sr=bt.length?addHueToRGB(sr,Tt.fh.v*bt[0]):addHueToRGB(sr,Tt.fh.v*bt)),Tt.fs.propType&&(sr=bt.length?addSaturationToRGB(sr,Tt.fs.v*bt[0]):addSaturationToRGB(sr,Tt.fs.v*bt)),Tt.fb.propType&&(sr=bt.length?addBrightnessToRGB(sr,Tt.fb.v*bt[0]):addBrightnessToRGB(sr,Tt.fb.v*bt))}}for(Mt=0;Mt<Bt;Mt+=1)(Tt=gt[Mt].a).p.propType&&(bt=gt[Mt].s.getMult(Ct[d].anIndexes[Mt],vt.a[Mt].s.totalChars),this._hasMaskedPath?bt.length?yt.translate(0,Tt.p.v[1]*bt[0],-Tt.p.v[2]*bt[1]):yt.translate(0,Tt.p.v[1]*bt,-Tt.p.v[2]*bt):bt.length?yt.translate(Tt.p.v[0]*bt[0],Tt.p.v[1]*bt[1],-Tt.p.v[2]*bt[2]):yt.translate(Tt.p.v[0]*bt,Tt.p.v[1]*bt,-Tt.p.v[2]*bt));if(s.strokeWidthAnim&&(Er=er<0?0:er),s.strokeColorAnim&&(Tr="rgb("+Math.round(255*or[0])+","+Math.round(255*or[1])+","+Math.round(255*or[2])+")"),s.fillColorAnim&&s.fc&&(ur="rgb("+Math.round(255*sr[0])+","+Math.round(255*sr[1])+","+Math.round(255*sr[2])+")"),this._hasMaskedPath){if(yt.translate(0,-s.ls),yt.translate(0,mt[1]*Pt*.01+c,0),this._pathData.p.v){dt=(_e.point[1]-it.point[1])/(_e.point[0]-it.point[0]);var Sr=180*Math.atan(dt)/Math.PI;_e.point[0]<it.point[0]&&(Sr+=180),yt.rotate(-Sr*Math.PI/180)}yt.translate(Lt,Jt,0),j-=mt[0]*Ct[d].an*.005,Ct[d+1]&&Xt!==Ct[d+1].ind&&(j+=Ct[d].an/2,j+=.001*s.tr*s.finalSize)}else{switch(yt.translate(o,c,0),s.ps&&yt.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:yt.translate(Ct[d].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[Ct[d].line]),0,0);break;case 2:yt.translate(Ct[d].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[Ct[d].line])/2,0,0)}yt.translate(0,-s.ls),yt.translate($t,0,0),yt.translate(mt[0]*Ct[d].an*.005,mt[1]*Pt*.01,0),o+=Ct[d].l+.001*s.tr*s.finalSize}Et==="html"?_r=yt.toCSS():Et==="svg"?_r=yt.to2dCSS():br=[yt.props[0],yt.props[1],yt.props[2],yt.props[3],yt.props[4],yt.props[5],yt.props[6],yt.props[7],yt.props[8],yt.props[9],yt.props[10],yt.props[11],yt.props[12],yt.props[13],yt.props[14],yt.props[15]],kt=Qt}St<=d?(Rt=new LetterProps(kt,Er,Tr,ur,_r,br),this.renderedLetters.push(Rt),St+=1,this.lettersChangedFlag=!0):(Rt=this.renderedLetters[d],this.lettersChangedFlag=Rt.update(kt,Er,Tr,ur,_r,br)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(s,a,o){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(s,a,o),this.textProperty=new TextProperty(this,s.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(s.t,this.renderType,this),this.initTransform(s,a,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(s,a){var o,c,d=a.length,b="";for(o=0;o<d;o+=1)a[o].ty==="sh"&&(c=a[o].ks.k,b+=buildShapeString(c,c.i.length,!0,s));return b},ITextElement.prototype.updateDocumentData=function(s,a){this.textProperty.updateDocumentData(s,a)},ITextElement.prototype.canResizeFont=function(s){this.textProperty.canResizeFont(s)},ITextElement.prototype.setMinimumFontSize=function(s){this.textProperty.setMinimumFontSize(s)},ITextElement.prototype.applyTextPropertiesToMatrix=function(s,a,o,c,d){switch(s.ps&&a.translate(s.ps[0],s.ps[1]+s.ascent,0),a.translate(0,-s.ls,0),s.j){case 1:a.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[o]),0,0);break;case 2:a.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[o])/2,0,0)}a.translate(c,d,0)},ITextElement.prototype.buildColor=function(s){return"rgb("+Math.round(255*s[0])+","+Math.round(255*s[1])+","+Math.round(255*s[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(s,a,o){this.textSpans=[],this.renderType="svg",this.initElement(s,a,o)}function ISolidElement(s,a,o){this.initElement(s,a,o)}function NullElement(s,a,o){this.initFrame(),this.initBaseData(s,a,o),this.initFrame(),this.initTransform(s,a,o),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(s,a,o){this.layers=s.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,a,o),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}function SVGRenderer(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var o="";if(a&&a.title){var c=createNS("title"),d=createElementID();c.setAttribute("id",d),c.textContent=a.title,this.svgElement.appendChild(c),o+=d}if(a&&a.description){var b=createNS("desc"),$=createElementID();b.setAttribute("id",$),b.textContent=a.description,this.svgElement.appendChild(b),o+=" "+$}o&&this.svgElement.setAttribute("aria-labelledby",o);var j=createNS("defs");this.svgElement.appendChild(j);var _e=createNS("g");this.svgElement.appendChild(_e),this.layerElement=_e,this.renderConfig={preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",progressiveLoad:a&&a.progressiveLoad||!1,hideOnTransparent:!(a&&a.hideOnTransparent===!1),viewBoxOnly:a&&a.viewBoxOnly||!1,viewBoxSize:a&&a.viewBoxSize||!1,className:a&&a.className||"",id:a&&a.id||"",focusable:a&&a.focusable,filterSize:{width:a&&a.filterSize&&a.filterSize.width||"100%",height:a&&a.filterSize&&a.filterSize.height||"100%",x:a&&a.filterSize&&a.filterSize.x||"0%",y:a&&a.filterSize&&a.filterSize.y||"0%"},width:a&&a.width,height:a&&a.height,runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:j,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var s;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),s=0;s<15;s+=1)this.saved[s]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(s){for(var a=0,o=s.length,c=[],d="";a<o;)s[a]===String.fromCharCode(13)||s[a]===String.fromCharCode(3)?(c.push(d),d=""):d+=s[a],a+=1;return c.push(d),c},SVGTextLottieElement.prototype.buildShapeData=function(s,a){if(s.shapes&&s.shapes.length){var o=s.shapes[0];if(o.it){var c=o.it[o.it.length-1];c.s&&(c.s.k[0]=a,c.s.k[1]=a)}}return s},SVGTextLottieElement.prototype.buildNewText=function(){var s,a;this.addDynamicProperty(this);var o=this.textProperty.currentData;this.renderedLetters=createSizedArray(o?o.l.length:0),o.fc?this.layerElement.setAttribute("fill",this.buildColor(o.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),o.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(o.sc)),this.layerElement.setAttribute("stroke-width",o.sw)),this.layerElement.setAttribute("font-size",o.finalSize);var c=this.globalData.fontManager.getFontByName(o.f);if(c.fClass)this.layerElement.setAttribute("class",c.fClass);else{this.layerElement.setAttribute("font-family",c.fFamily);var d=o.fWeight,b=o.fStyle;this.layerElement.setAttribute("font-style",b),this.layerElement.setAttribute("font-weight",d)}this.layerElement.setAttribute("aria-label",o.t);var $,j=o.l||[],_e=!!this.globalData.fontManager.chars;a=j.length;var et=this.mHelper,tt=this.data.singleShape,rt=0,nt=0,it=!0,at=.001*o.tr*o.finalSize;if(!tt||_e||o.sz){var ct,st=this.textSpans.length;for(s=0;s<a;s+=1){if(this.textSpans[s]||(this.textSpans[s]={span:null,childSpan:null,glyph:null}),!_e||!tt||s===0){if($=st>s?this.textSpans[s].span:createNS(_e?"g":"text"),st<=s){if($.setAttribute("stroke-linecap","butt"),$.setAttribute("stroke-linejoin","round"),$.setAttribute("stroke-miterlimit","4"),this.textSpans[s].span=$,_e){var ot=createNS("g");$.appendChild(ot),this.textSpans[s].childSpan=ot}this.textSpans[s].span=$,this.layerElement.appendChild($)}$.style.display="inherit"}if(et.reset(),tt&&(j[s].n&&(rt=-at,nt+=o.yOffset,nt+=it?1:0,it=!1),this.applyTextPropertiesToMatrix(o,et,j[s].line,rt,nt),rt+=j[s].l||0,rt+=at),_e){var ht;if((ct=this.globalData.fontManager.getCharData(o.finalText[s],c.fStyle,this.globalData.fontManager.getFontByName(o.f).fFamily)).t===1)ht=new SVGCompElement(ct.data,this.globalData,this);else{var dt=emptyShapeData;ct.data&&ct.data.shapes&&(dt=this.buildShapeData(ct.data,o.finalSize)),ht=new SVGShapeElement(dt,this.globalData,this)}if(this.textSpans[s].glyph){var ft=this.textSpans[s].glyph;this.textSpans[s].childSpan.removeChild(ft.layerElement),ft.destroy()}this.textSpans[s].glyph=ht,ht._debug=!0,ht.prepareFrame(0),ht.renderFrame(),this.textSpans[s].childSpan.appendChild(ht.layerElement),ct.t===1&&this.textSpans[s].childSpan.setAttribute("transform","scale("+o.finalSize/100+","+o.finalSize/100+")")}else tt&&$.setAttribute("transform","translate("+et.props[12]+","+et.props[13]+")"),$.textContent=j[s].val,$.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}tt&&$&&$.setAttribute("d","")}else{var mt=this.textContainer,gt="start";switch(o.j){case 1:gt="end";break;case 2:gt="middle";break;default:gt="start"}mt.setAttribute("text-anchor",gt),mt.setAttribute("letter-spacing",at);var vt=this.buildTextContents(o.finalText);for(a=vt.length,nt=o.ps?o.ps[1]+o.ascent:0,s=0;s<a;s+=1)($=this.textSpans[s].span||createNS("tspan")).textContent=vt[s],$.setAttribute("x",0),$.setAttribute("y",nt),$.style.display="inherit",mt.appendChild($),this.textSpans[s]||(this.textSpans[s]={span:null,glyph:null}),this.textSpans[s].span=$,nt+=o.finalLineHeight;this.layerElement.appendChild(mt)}for(;s<this.textSpans.length;)this.textSpans[s].span.style.display="none",s+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var s=this.layerElement.getBBox();this.bbox={top:s.y,left:s.x,width:s.width,height:s.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var s,a,o=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,s=0;s<o;s+=1)(a=this.textSpans[s].glyph)&&(a.prepareFrame(this.comp.renderedFrame-this.data.st),a._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var s,a;this._sizeChanged=!0;var o,c,d,b=this.textAnimator.renderedLetters,$=this.textProperty.currentData.l;for(a=$.length,s=0;s<a;s+=1)$[s].n||(o=b[s],c=this.textSpans[s].span,(d=this.textSpans[s].glyph)&&d.renderFrame(),o._mdf.m&&c.setAttribute("transform",o.m),o._mdf.o&&c.setAttribute("opacity",o.o),o._mdf.sw&&c.setAttribute("stroke-width",o.sw),o._mdf.sc&&c.setAttribute("stroke",o.sc),o._mdf.fc&&c.setAttribute("fill",o.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var s=createNS("rect");s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.layerElement.appendChild(s)},NullElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(s){return new NullElement(s,this.globalData,this)},SVGRendererBase.prototype.createShape=function(s){return new SVGShapeElement(s,this.globalData,this)},SVGRendererBase.prototype.createText=function(s){return new SVGTextLottieElement(s,this.globalData,this)},SVGRendererBase.prototype.createImage=function(s){return new IImageElement(s,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(s){return new ISolidElement(s,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(s){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+s.w+" "+s.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",s.w),this.svgElement.setAttribute("height",s.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var a=this.globalData.defs;this.setupGlobalData(s,a),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=s;var o=createNS("clipPath"),c=createNS("rect");c.setAttribute("width",s.w),c.setAttribute("height",s.h),c.setAttribute("x",0),c.setAttribute("y",0);var d=createElementID();o.setAttribute("id",d),o.appendChild(c),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")"),a.appendChild(o),this.layers=s.layers,this.elements=createSizedArray(s.layers.length)},SVGRendererBase.prototype.destroy=function(){var s;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var a=this.layers?this.layers.length:0;for(s=0;s<a;s+=1)this.elements[s]&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(s){var a=0,o=this.layers.length;for(a=0;a<o;a+=1)if(this.layers[a].ind===s)return a;return-1},SVGRendererBase.prototype.buildItem=function(s){var a=this.elements;if(!a[s]&&this.layers[s].ty!==99){a[s]=!0;var o=this.createItem(this.layers[s]);if(a[s]=o,getExpressionsPlugin()&&(this.layers[s].ty===0&&this.globalData.projectInterface.registerComposition(o),o.initExpressions()),this.appendElementInPos(o,s),this.layers[s].tt){var c="tp"in this.layers[s]?this.findIndexByInd(this.layers[s].tp):s-1;if(c===-1)return;if(this.elements[c]&&this.elements[c]!==!0){var d=a[c].getMatte(this.layers[s].tt);o.setMatte(d)}else this.buildItem(c),this.addPendingElement(o)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();if(s.checkParenting(),s.data.tt)for(var a=0,o=this.elements.length;a<o;){if(this.elements[a]===s){var c="tp"in s.data?this.findIndexByInd(s.data.tp):a-1,d=this.elements[c].getMatte(this.layers[a].tt);s.setMatte(d);break}a+=1}}},SVGRendererBase.prototype.renderFrame=function(s){if(this.renderedFrame!==s&&!this.destroyed){var a;s===null?s=this.renderedFrame:this.renderedFrame=s,this.globalData.frameNum=s,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=s,this.globalData._mdf=!1;var o=this.layers.length;for(this.completeLayers||this.checkLayers(s),a=o-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(s-this.layers[a].st);if(this.globalData._mdf)for(a=0;a<o;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(s,a){var o=s.getBaseElement();if(o){for(var c,d=0;d<a;)this.elements[d]&&this.elements[d]!==!0&&this.elements[d].getBaseElement()&&(c=this.elements[d].getBaseElement()),d+=1;c?this.layerElement.insertBefore(o,c):this.layerElement.appendChild(o)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(s,a,o){this.initFrame(),this.initBaseData(s,a,o),this.initTransform(s,a,o),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&a.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(s){if(this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=s/this.data.sr;else{var a=this.tm.v;a===this.data.op&&(a=this.data.op-1),this.renderedFrame=a}var o,c=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),o=c-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&(this.elements[o].prepareFrame(this.renderedFrame-this.layers[o].st),this.elements[o]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},ICompElement.prototype.setElements=function(s){this.elements=s},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var s,a=this.layers.length;for(s=0;s<a;s+=1)this.elements[s]&&this.elements[s].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)},CVContextData.prototype.duplicate=function(){var s=2*this._length,a=this.savedOp;this.savedOp=createTypedArray("float32",s),this.savedOp.set(a);var o=0;for(o=this._length;o<s;o+=1)this.saved[o]=createTypedArray("float32",16);this._length=s},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var s,a=this.saved[this.cArrPos],o=this.cTr.props;for(s=0;s<16;s+=1)o[s]=a[s];return a},CVContextData.prototype.popOpacity=function(){var s=this.savedOp[this.cArrPos];return this.cO=s,s},CVContextData.prototype.pop=function(){return this.cArrPos-=1,{transform:this.popTransform(),opacity:this.popOpacity()}},CVContextData.prototype.push=function(){var s,a=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var o=this.saved[this.cArrPos];for(s=0;s<16;s+=1)o[s]=a[s];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(s){this.cO=s},ShapeTransformManager.prototype={addTransformSequence:function(s){var a,o=s.length,c="_";for(a=0;a<o;a+=1)c+=s[a].transform.key+"_";var d=this.sequences[c];return d||(d={transforms:[].concat(s),finalTransform:new Matrix,_mdf:!1},this.sequences[c]=d,this.sequenceList.push(d)),d},processSequence:function(s,a){for(var o,c=0,d=s.transforms.length,b=a;c<d&&!a;){if(s.transforms[c].transform.mProps._mdf){b=!0;break}c+=1}if(b)for(s.finalTransform.reset(),c=d-1;c>=0;c-=1)o=s.transforms[c].transform.mProps.v.props,s.finalTransform.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]);s._mdf=b},processSequences:function(s){var a,o=this.sequenceList.length;for(a=0;a<o;a+=1)this.processSequence(this.sequenceList[a],s)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var s="__lottie_element_luma_buffer",a=null,o=null,c=null;function d(){var b,$,j;a||(b=createNS("svg"),$=createNS("filter"),j=createNS("feColorMatrix"),$.setAttribute("id",s),j.setAttribute("type","matrix"),j.setAttribute("color-interpolation-filters","sRGB"),j.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),$.appendChild(j),b.appendChild($),b.setAttribute("id",s+"_svg"),featureSupport.svgLumaHidden&&(b.style.display="none"),c=b,document.body.appendChild(c),a=createTag("canvas"),(o=a.getContext("2d")).filter="url(#"+s+")",o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1))}return{load:d,get:function(b){return a||d(),a.width=b.width,a.height=b.height,o.filter="url(#"+s+")",a}}};function createCanvas(s,a){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(s,a);var o=createTag("canvas");return o.width=s,o.height=a,o}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas};function CVEffects(){}function CVMaskElement(s,a){var o;this.data=s,this.element=a,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var c=this.masksProperties.length,d=!1;for(o=0;o<c;o+=1)this.masksProperties[o].mode!=="n"&&(d=!0),this.viewData[o]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[o],3);this.hasMasks=d,d&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var s,a,o,c,d=this.element.finalTransform.mat,b=this.element.canvasContext,$=this.masksProperties.length;for(b.beginPath(),s=0;s<$;s+=1)if(this.masksProperties[s].mode!=="n"){var j;this.masksProperties[s].inv&&(b.moveTo(0,0),b.lineTo(this.element.globalData.compSize.w,0),b.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),b.lineTo(0,this.element.globalData.compSize.h),b.lineTo(0,0)),c=this.viewData[s].v,a=d.applyToPointArray(c.v[0][0],c.v[0][1],0),b.moveTo(a[0],a[1]);var _e=c._length;for(j=1;j<_e;j+=1)o=d.applyToTriplePoints(c.o[j-1],c.i[j],c.v[j]),b.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);o=d.applyToTriplePoints(c.o[j-1],c.i[0],c.v[0]),b.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}this.element.globalData.renderer.save(!0),b.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(s,a,o,c){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var d,b=4;a.ty==="rc"?b=5:a.ty==="el"?b=6:a.ty==="sr"&&(b=7),this.sh=ShapePropertyFactory.getShapeProp(s,a,b,s);var $,j=o.length;for(d=0;d<j;d+=1)o[d].closed||($={transforms:c.addTransformSequence(o[d].transforms),trNodes:[]},this.styledShapes.push($),o[d].elements.push($))}function CVShapeElement(s,a,o){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(s,a,o)}function CVTextElement(s,a,o){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(s,a,o)}function CVImageElement(s,a,o){this.assetData=a.getAssetData(s.refId),this.img=a.imageLoader.getAsset(this.assetData),this.initElement(s,a,o)}function CVSolidElement(s,a,o){this.initElement(s,a,o)}function CanvasRendererBase(s,a){this.animationItem=s,this.renderConfig={clearCanvas:!a||a.clearCanvas===void 0||a.clearCanvas,context:a&&a.context||null,progressiveLoad:a&&a.progressiveLoad||!1,preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",className:a&&a.className||"",id:a&&a.id||""},this.renderConfig.dpr=a&&a.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=a&&a.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(s,a,o){this.completeLayers=!1,this.layers=s.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(s,a,o),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}function CanvasRenderer(s,a){this.animationItem=s,this.renderConfig={clearCanvas:!a||a.clearCanvas===void 0||a.clearCanvas,context:a&&a.context||null,progressiveLoad:a&&a.progressiveLoad||!1,preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",className:a&&a.className||"",id:a&&a.id||"",runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.renderConfig.dpr=a&&a.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=a&&a.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(s,a,o){this.initElement(s,a,o)}function HShapeElement(s,a,o){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(s,a,o),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(s,a,o){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(s,a,o)}function HCameraElement(s,a,o){this.initFrame(),this.initBaseData(s,a,o),this.initHierarchy();var c=PropertyFactory.getProp;if(this.pe=c(this,s.pe,0,0,this),s.ks.p.s?(this.px=c(this,s.ks.p.x,1,0,this),this.py=c(this,s.ks.p.y,1,0,this),this.pz=c(this,s.ks.p.z,1,0,this)):this.p=c(this,s.ks.p,1,0,this),s.ks.a&&(this.a=c(this,s.ks.a,1,0,this)),s.ks.or.k.length&&s.ks.or.k[0].to){var d,b=s.ks.or.k.length;for(d=0;d<b;d+=1)s.ks.or.k[d].to=null,s.ks.or.k[d].ti=null}this.or=c(this,s.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=c(this,s.ks.rx,0,degToRads,this),this.ry=c(this,s.ks.ry,0,degToRads,this),this.rz=c(this,s.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(s,a,o){this.assetData=a.getAssetData(s.refId),this.initElement(s,a,o)}function HybridRendererBase(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(s,a,o){this.layers=s.layers,this.supports3d=!s.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,a,o),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,a.frameRate,this):{_placeholder:!0}}function HybridRenderer(s,a){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"},runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var s=this.globalData.canvasContext,a=assetLoader.createCanvas(s.canvas.width,s.canvas.height);this.buffers.push(a);var o=assetLoader.createCanvas(s.canvas.width,s.canvas.height);this.buffers.push(o),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects},createContent:function(){},setBlendMode:function(){var s=this.globalData;if(s.blendMode!==this.data.bm){s.blendMode=this.data.bm;var a=getBlendMode(this.data.bm);s.canvasContext.globalCompositeOperation=a}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(s){s.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var s=this.buffers[0].getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var s=this.buffers[1],a=s.getContext("2d");if(this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var o=assetLoader.getLumaCanvas(this.canvasContext.canvas);o.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(o,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(s,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(s){if(!this.hidden&&!this.data.hd&&(this.data.td!==1||s)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var a=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(a),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(a),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(s,a){var o={data:s,type:s.ty,preTransforms:this.transformsManager.addTransformSequence(a),transforms:[],elements:[],closed:s.hd===!0},c={};if(s.ty==="fl"||s.ty==="st"?(c.c=PropertyFactory.getProp(this,s.c,1,255,this),c.c.k||(o.co="rgb("+bmFloor(c.c.v[0])+","+bmFloor(c.c.v[1])+","+bmFloor(c.c.v[2])+")")):s.ty!=="gf"&&s.ty!=="gs"||(c.s=PropertyFactory.getProp(this,s.s,1,null,this),c.e=PropertyFactory.getProp(this,s.e,1,null,this),c.h=PropertyFactory.getProp(this,s.h||{k:0},0,.01,this),c.a=PropertyFactory.getProp(this,s.a||{k:0},0,degToRads,this),c.g=new GradientProperty(this,s.g,this)),c.o=PropertyFactory.getProp(this,s.o,0,.01,this),s.ty==="st"||s.ty==="gs"){if(o.lc=lineCapEnum[s.lc||2],o.lj=lineJoinEnum[s.lj||2],s.lj==1&&(o.ml=s.ml),c.w=PropertyFactory.getProp(this,s.w,0,null,this),c.w.k||(o.wi=c.w.v),s.d){var d=new DashProperty(this,s.d,"canvas",this);c.d=d,c.d.k||(o.da=c.d.dashArray,o.do=c.d.dashoffset[0])}}else o.r=s.r===2?"evenodd":"nonzero";return this.stylesList.push(o),c.style=o,c},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(s){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,s.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,s,this)}}},CVShapeElement.prototype.createShapeElement=function(s){var a=new CVShapeData(this,s,this.stylesList,this.transformsManager);return this.shapes.push(a),this.addShapeToModifiers(a),a},CVShapeElement.prototype.reloadShapes=function(){var s;this._isFirstFrame=!0;var a=this.itemsData.length;for(s=0;s<a;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),a=this.dynamicProperties.length,s=0;s<a;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(s){var a,o=this.stylesList.length;for(a=0;a<o;a+=1)this.stylesList[a].closed||this.stylesList[a].transforms.push(s)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var s,a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.pop()},CVShapeElement.prototype.closeStyles=function(s){var a,o=s.length;for(a=0;a<o;a+=1)s[a].closed=!0},CVShapeElement.prototype.searchShapes=function(s,a,o,c,d){var b,$,j,_e,et,tt,rt=s.length-1,nt=[],it=[],at=[].concat(d);for(b=rt;b>=0;b-=1){if((_e=this.searchProcessedElement(s[b]))?a[b]=o[_e-1]:s[b]._shouldRender=c,s[b].ty==="fl"||s[b].ty==="st"||s[b].ty==="gf"||s[b].ty==="gs")_e?a[b].style.closed=!1:a[b]=this.createStyleElement(s[b],at),nt.push(a[b].style);else if(s[b].ty==="gr"){if(_e)for(j=a[b].it.length,$=0;$<j;$+=1)a[b].prevViewData[$]=a[b].it[$];else a[b]=this.createGroupElement(s[b]);this.searchShapes(s[b].it,a[b].it,a[b].prevViewData,c,at)}else s[b].ty==="tr"?(_e||(tt=this.createTransformElement(s[b]),a[b]=tt),at.push(a[b]),this.addTransformToStyleList(a[b])):s[b].ty==="sh"||s[b].ty==="rc"||s[b].ty==="el"||s[b].ty==="sr"?_e||(a[b]=this.createShapeElement(s[b])):s[b].ty==="tm"||s[b].ty==="rd"||s[b].ty==="pb"||s[b].ty==="zz"||s[b].ty==="op"?(_e?(et=a[b]).closed=!1:((et=ShapeModifiers.getModifier(s[b].ty)).init(this,s[b]),a[b]=et,this.shapeModifiers.push(et)),it.push(et)):s[b].ty==="rp"&&(_e?(et=a[b]).closed=!0:(et=ShapeModifiers.getModifier(s[b].ty),a[b]=et,et.init(this,s,b,a),this.shapeModifiers.push(et),c=!1),it.push(et));this.addProcessedElement(s[b],b+1)}for(this.removeTransformFromStyleList(),this.closeStyles(nt),rt=it.length,b=0;b<rt;b+=1)it[b].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(s,a){(s._opMdf||a.op._mdf||this._isFirstFrame)&&(a.opacity=s.opacity,a.opacity*=a.op.v,a._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var s,a,o,c,d,b,$,j,_e,et=this.stylesList.length,tt=this.globalData.renderer,rt=this.globalData.canvasContext;for(s=0;s<et;s+=1)if(((j=(_e=this.stylesList[s]).type)!=="st"&&j!=="gs"||_e.wi!==0)&&_e.data._shouldRender&&_e.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(tt.save(),b=_e.elements,j==="st"||j==="gs"?(rt.strokeStyle=j==="st"?_e.co:_e.grd,rt.lineWidth=_e.wi,rt.lineCap=_e.lc,rt.lineJoin=_e.lj,rt.miterLimit=_e.ml||0):rt.fillStyle=j==="fl"?_e.co:_e.grd,tt.ctxOpacity(_e.coOp),j!=="st"&&j!=="gs"&&rt.beginPath(),tt.ctxTransform(_e.preTransforms.finalTransform.props),o=b.length,a=0;a<o;a+=1){for(j!=="st"&&j!=="gs"||(rt.beginPath(),_e.da&&(rt.setLineDash(_e.da),rt.lineDashOffset=_e.do)),d=($=b[a].trNodes).length,c=0;c<d;c+=1)$[c].t==="m"?rt.moveTo($[c].p[0],$[c].p[1]):$[c].t==="c"?rt.bezierCurveTo($[c].pts[0],$[c].pts[1],$[c].pts[2],$[c].pts[3],$[c].pts[4],$[c].pts[5]):rt.closePath();j!=="st"&&j!=="gs"||(rt.stroke(),_e.da&&rt.setLineDash(this.dashResetter))}j!=="st"&&j!=="gs"&&rt.fill(_e.r),tt.restore()}},CVShapeElement.prototype.renderShape=function(s,a,o,c){var d,b;for(b=s,d=a.length-1;d>=0;d-=1)a[d].ty==="tr"?(b=o[d].transform,this.renderShapeTransform(s,b)):a[d].ty==="sh"||a[d].ty==="el"||a[d].ty==="rc"||a[d].ty==="sr"?this.renderPath(a[d],o[d]):a[d].ty==="fl"?this.renderFill(a[d],o[d],b):a[d].ty==="st"?this.renderStroke(a[d],o[d],b):a[d].ty==="gf"||a[d].ty==="gs"?this.renderGradientFill(a[d],o[d],b):a[d].ty==="gr"?this.renderShape(b,a[d].it,o[d].it):a[d].ty;c&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(s,a){if(this._isFirstFrame||a._mdf||s.transforms._mdf){var o,c,d,b=s.trNodes,$=a.paths,j=$._length;b.length=0;var _e=s.transforms.finalTransform;for(d=0;d<j;d+=1){var et=$.shapes[d];if(et&&et.v){for(c=et._length,o=1;o<c;o+=1)o===1&&b.push({t:"m",p:_e.applyToPointArray(et.v[0][0],et.v[0][1],0)}),b.push({t:"c",pts:_e.applyToTriplePoints(et.o[o-1],et.i[o],et.v[o])});c===1&&b.push({t:"m",p:_e.applyToPointArray(et.v[0][0],et.v[0][1],0)}),et.c&&c&&(b.push({t:"c",pts:_e.applyToTriplePoints(et.o[o-1],et.i[0],et.v[0])}),b.push({t:"z"}))}}s.trNodes=b}},CVShapeElement.prototype.renderPath=function(s,a){if(s.hd!==!0&&s._shouldRender){var o,c=a.styledShapes.length;for(o=0;o<c;o+=1)this.renderStyledShape(a.styledShapes[o],a.sh)}},CVShapeElement.prototype.renderFill=function(s,a,o){var c=a.style;(a.c._mdf||this._isFirstFrame)&&(c.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||o._opMdf||this._isFirstFrame)&&(c.coOp=a.o.v*o.opacity)},CVShapeElement.prototype.renderGradientFill=function(s,a,o){var c,d=a.style;if(!d.grd||a.g._mdf||a.s._mdf||a.e._mdf||s.t!==1&&(a.h._mdf||a.a._mdf)){var b,$=this.globalData.canvasContext,j=a.s.v,_e=a.e.v;if(s.t===1)c=$.createLinearGradient(j[0],j[1],_e[0],_e[1]);else{var et=Math.sqrt(Math.pow(j[0]-_e[0],2)+Math.pow(j[1]-_e[1],2)),tt=Math.atan2(_e[1]-j[1],_e[0]-j[0]),rt=a.h.v;rt>=1?rt=.99:rt<=-1&&(rt=-.99);var nt=et*rt,it=Math.cos(tt+a.a.v)*nt+j[0],at=Math.sin(tt+a.a.v)*nt+j[1];c=$.createRadialGradient(it,at,0,j[0],j[1],et)}var ct=s.g.p,st=a.g.c,ot=1;for(b=0;b<ct;b+=1)a.g._hasOpacity&&a.g._collapsable&&(ot=a.g.o[2*b+1]),c.addColorStop(st[4*b]/100,"rgba("+st[4*b+1]+","+st[4*b+2]+","+st[4*b+3]+","+ot+")");d.grd=c}d.coOp=a.o.v*o.opacity},CVShapeElement.prototype.renderStroke=function(s,a,o){var c=a.style,d=a.d;d&&(d._mdf||this._isFirstFrame)&&(c.da=d.dashArray,c.do=d.dashoffset[0]),(a.c._mdf||this._isFirstFrame)&&(c.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||o._opMdf||this._isFirstFrame)&&(c.coOp=a.o.v*o.opacity),(a.w._mdf||this._isFirstFrame)&&(c.wi=a.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var a=!1;s.fc?(a=!0,this.values.fill=this.buildColor(s.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=a;var o=!1;s.sc&&(o=!0,this.values.stroke=this.buildColor(s.sc),this.values.sWidth=s.sw);var c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct=this.globalData.fontManager.getFontByName(s.f),st=s.l,ot=this.mHelper;this.stroke=o,this.values.fValue=s.finalSize+"px "+this.globalData.fontManager.getFontByName(s.f).fFamily,d=s.finalText.length;var ht=this.data.singleShape,dt=.001*s.tr*s.finalSize,ft=0,mt=0,gt=!0,vt=0;for(c=0;c<d;c+=1){$=(b=this.globalData.fontManager.getCharData(s.finalText[c],ct.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily))&&b.data||{},ot.reset(),ht&&st[c].n&&(ft=-dt,mt+=s.yOffset,mt+=gt?1:0,gt=!1),rt=(et=$.shapes?$.shapes[0].it:[]).length,ot.scale(s.finalSize/100,s.finalSize/100),ht&&this.applyTextPropertiesToMatrix(s,ot,st[c].line,ft,mt),it=createSizedArray(rt-1);var yt=0;for(tt=0;tt<rt;tt+=1)if(et[tt].ty==="sh"){for(_e=et[tt].ks.k.i.length,nt=et[tt].ks.k,at=[],j=1;j<_e;j+=1)j===1&&at.push(ot.applyToX(nt.v[0][0],nt.v[0][1],0),ot.applyToY(nt.v[0][0],nt.v[0][1],0)),at.push(ot.applyToX(nt.o[j-1][0],nt.o[j-1][1],0),ot.applyToY(nt.o[j-1][0],nt.o[j-1][1],0),ot.applyToX(nt.i[j][0],nt.i[j][1],0),ot.applyToY(nt.i[j][0],nt.i[j][1],0),ot.applyToX(nt.v[j][0],nt.v[j][1],0),ot.applyToY(nt.v[j][0],nt.v[j][1],0));at.push(ot.applyToX(nt.o[j-1][0],nt.o[j-1][1],0),ot.applyToY(nt.o[j-1][0],nt.o[j-1][1],0),ot.applyToX(nt.i[0][0],nt.i[0][1],0),ot.applyToY(nt.i[0][0],nt.i[0][1],0),ot.applyToX(nt.v[0][0],nt.v[0][1],0),ot.applyToY(nt.v[0][0],nt.v[0][1],0)),it[yt]=at,yt+=1}ht&&(ft+=st[c].l,ft+=dt),this.textSpans[vt]?this.textSpans[vt].elem=it:this.textSpans[vt]={elem:it},vt+=1}},CVTextElement.prototype.renderInnerContent=function(){var s,a,o,c,d,b,$=this.canvasContext;$.font=this.values.fValue,$.lineCap="butt",$.lineJoin="miter",$.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var j,_e=this.textAnimator.renderedLetters,et=this.textProperty.currentData.l;a=et.length;var tt,rt,nt=null,it=null,at=null;for(s=0;s<a;s+=1)if(!et[s].n){if((j=_e[s])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(j.p),this.globalData.renderer.ctxOpacity(j.o)),this.fill){for(j&&j.fc?nt!==j.fc&&(nt=j.fc,$.fillStyle=j.fc):nt!==this.values.fill&&(nt=this.values.fill,$.fillStyle=this.values.fill),c=(tt=this.textSpans[s].elem).length,this.globalData.canvasContext.beginPath(),o=0;o<c;o+=1)for(b=(rt=tt[o]).length,this.globalData.canvasContext.moveTo(rt[0],rt[1]),d=2;d<b;d+=6)this.globalData.canvasContext.bezierCurveTo(rt[d],rt[d+1],rt[d+2],rt[d+3],rt[d+4],rt[d+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(j&&j.sw?at!==j.sw&&(at=j.sw,$.lineWidth=j.sw):at!==this.values.sWidth&&(at=this.values.sWidth,$.lineWidth=this.values.sWidth),j&&j.sc?it!==j.sc&&(it=j.sc,$.strokeStyle=j.sc):it!==this.values.stroke&&(it=this.values.stroke,$.strokeStyle=this.values.stroke),c=(tt=this.textSpans[s].elem).length,this.globalData.canvasContext.beginPath(),o=0;o<c;o+=1)for(b=(rt=tt[o]).length,this.globalData.canvasContext.moveTo(rt[0],rt[1]),d=2;d<b;d+=6)this.globalData.canvasContext.bezierCurveTo(rt[d],rt[d+1],rt[d+2],rt[d+3],rt[d+4],rt[d+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}j&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var s=createTag("canvas");s.width=this.assetData.w,s.height=this.assetData.h;var a,o,c=s.getContext("2d"),d=this.img.width,b=this.img.height,$=d/b,j=this.assetData.w/this.assetData.h,_e=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;$>j&&_e==="xMidYMid slice"||$<j&&_e!=="xMidYMid slice"?a=(o=b)*j:o=(a=d)/j,c.drawImage(this.img,(d-a)/2,(b-o)/2,a,o,0,0,this.assetData.w,this.assetData.h),this.img=s}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.fillStyle=this.data.sc,s.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(s){return new CVShapeElement(s,this.globalData,this)},CanvasRendererBase.prototype.createText=function(s){return new CVTextElement(s,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(s){return new CVImageElement(s,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(s){return new CVSolidElement(s,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(s){if(s[0]!==1||s[1]!==0||s[4]!==0||s[5]!==1||s[12]!==0||s[13]!==0)if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(s);var a=this.contextData.getTransform(),o=a.props;this.transformMat.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),a.cloneFromProps(this.transformMat.props);var c=a.props;this.canvasContext.setTransform(c[0],c[1],c[4],c[5],c[12],c[13])}else this.canvasContext.transform(s[0],s[1],s[4],s[5],s[12],s[13])},CanvasRendererBase.prototype.ctxOpacity=function(s){var a=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=s<0?0:s,void(this.globalData.currentGlobalAlpha=a);a*=s<0?0:s,this.contextData.setOpacity(a),this.globalData.currentGlobalAlpha!==a&&(this.canvasContext.globalAlpha=a,this.globalData.currentGlobalAlpha=a)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(s){this.renderConfig.clearCanvas?(s&&this.canvasContext.save(),this.contextData.push()):this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(s){if(this.renderConfig.clearCanvas){s&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var a=this.contextData.pop(),o=a.transform,c=a.opacity;this.canvasContext.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]),this.globalData.currentGlobalAlpha!==c&&(this.canvasContext.globalAlpha=c,this.globalData.currentGlobalAlpha=c)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(s){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var a=this.animationItem.container.style;a.width="100%",a.height="100%";var o="0px 0px 0px";a.transformOrigin=o,a.mozTransformOrigin=o,a.webkitTransformOrigin=o,a["-webkit-transform"]=o,a.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=s,this.layers=s.layers,this.transformCanvas={w:s.w,h:s.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(s,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(s.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(s,a){var o,c,d,b;if(this.reset(),s?(o=s,c=a,this.canvasContext.canvas.width=o,this.canvasContext.canvas.height=c):(this.animationItem.wrapper&&this.animationItem.container?(o=this.animationItem.wrapper.offsetWidth,c=this.animationItem.wrapper.offsetHeight):(o=this.canvasContext.canvas.width,c=this.canvasContext.canvas.height),this.canvasContext.canvas.width=o*this.renderConfig.dpr,this.canvasContext.canvas.height=c*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var $=this.renderConfig.preserveAspectRatio.split(" "),j=$[1]||"meet",_e=$[0]||"xMidYMid",et=_e.substr(0,4),tt=_e.substr(4);d=o/c,(b=this.transformCanvas.w/this.transformCanvas.h)>d&&j==="meet"||b<d&&j==="slice"?(this.transformCanvas.sx=o/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=c/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=c/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=et==="xMid"&&(b<d&&j==="meet"||b>d&&j==="slice")?(o-this.transformCanvas.w*(c/this.transformCanvas.h))/2*this.renderConfig.dpr:et==="xMax"&&(b<d&&j==="meet"||b>d&&j==="slice")?(o-this.transformCanvas.w*(c/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=tt==="YMid"&&(b>d&&j==="meet"||b<d&&j==="slice")?(c-this.transformCanvas.h*(o/this.transformCanvas.w))/2*this.renderConfig.dpr:tt==="YMax"&&(b>d&&j==="meet"||b<d&&j==="slice")?(c-this.transformCanvas.h*(o/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=o/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=c/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var s;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),s=(this.layers?this.layers.length:0)-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(s,a){if((this.renderedFrame!==s||this.renderConfig.clearCanvas!==!0||a)&&!this.destroyed&&s!==-1){var o;this.renderedFrame=s,this.globalData.frameNum=s-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||a,this.globalData.projectInterface.currentFrame=s;var c=this.layers.length;for(this.completeLayers||this.checkLayers(s),o=0;o<c;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].prepareFrame(s-this.layers[o].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),o=c-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(s){var a=this.elements;if(!a[s]&&this.layers[s].ty!==99){var o=this.createItem(this.layers[s],this,this.globalData);a[s]=o,o.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var s,a=this.canvasContext;for(a.beginPath(),a.moveTo(0,0),a.lineTo(this.data.w,0),a.lineTo(this.data.w,this.data.h),a.lineTo(0,this.data.h),a.lineTo(0,0),a.clip(),s=this.layers.length-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},CVCompElement.prototype.destroy=function(){var s;for(s=this.layers.length-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects,this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var s=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var a=this.finalTransform.mat.toCSS();s.transform=a,s.webkitTransform=a}this.finalTransform._opMdf&&(s.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var s;this.data.hasMask?((s=createNS("rect")).setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((s=createTag("div")).style.width=this.data.sw+"px",s.style.height=this.data.sh+"px",s.style.backgroundColor=this.data.sc),this.layerElement.appendChild(s)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var s;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),s=this.svgElement;else{s=createNS("svg");var a=this.comp.data?this.comp.data:this.globalData.compSize;s.setAttribute("width",a.w),s.setAttribute("height",a.h),s.appendChild(this.shapesContainer),this.layerElement.appendChild(s)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=s},HShapeElement.prototype.getTransformedPoint=function(s,a){var o,c=s.length;for(o=0;o<c;o+=1)a=s[o].mProps.v.applyToPointArray(a[0],a[1],0);return a},HShapeElement.prototype.calculateShapeBoundingBox=function(s,a){var o,c,d,b,$,j=s.sh.v,_e=s.transformers,et=j._length;if(!(et<=1)){for(o=0;o<et-1;o+=1)c=this.getTransformedPoint(_e,j.v[o]),d=this.getTransformedPoint(_e,j.o[o]),b=this.getTransformedPoint(_e,j.i[o+1]),$=this.getTransformedPoint(_e,j.v[o+1]),this.checkBounds(c,d,b,$,a);j.c&&(c=this.getTransformedPoint(_e,j.v[o]),d=this.getTransformedPoint(_e,j.o[o]),b=this.getTransformedPoint(_e,j.i[0]),$=this.getTransformedPoint(_e,j.v[0]),this.checkBounds(c,d,b,$,a))}},HShapeElement.prototype.checkBounds=function(s,a,o,c,d){this.getBoundsOfCurve(s,a,o,c);var b=this.shapeBoundingBox;d.x=bmMin(b.left,d.x),d.xMax=bmMax(b.right,d.xMax),d.y=bmMin(b.top,d.y),d.yMax=bmMax(b.bottom,d.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(s,a,o,c){for(var d,b,$,j,_e,et,tt,rt=[[s[0],c[0]],[s[1],c[1]]],nt=0;nt<2;++nt)b=6*s[nt]-12*a[nt]+6*o[nt],d=-3*s[nt]+9*a[nt]-9*o[nt]+3*c[nt],$=3*a[nt]-3*s[nt],b|=0,$|=0,(d|=0)===0&&b===0||(d===0?(j=-$/b)>0&&j<1&&rt[nt].push(this.calculateF(j,s,a,o,c,nt)):(_e=b*b-4*$*d)>=0&&((et=(-b+bmSqrt(_e))/(2*d))>0&&et<1&&rt[nt].push(this.calculateF(et,s,a,o,c,nt)),(tt=(-b-bmSqrt(_e))/(2*d))>0&&tt<1&&rt[nt].push(this.calculateF(tt,s,a,o,c,nt))));this.shapeBoundingBox.left=bmMin.apply(null,rt[0]),this.shapeBoundingBox.top=bmMin.apply(null,rt[1]),this.shapeBoundingBox.right=bmMax.apply(null,rt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,rt[1])},HShapeElement.prototype.calculateF=function(s,a,o,c,d,b){return bmPow(1-s,3)*a[b]+3*bmPow(1-s,2)*s*o[b]+3*(1-s)*bmPow(s,2)*c[b]+bmPow(s,3)*d[b]},HShapeElement.prototype.calculateBoundingBox=function(s,a){var o,c=s.length;for(o=0;o<c;o+=1)s[o]&&s[o].sh?this.calculateShapeBoundingBox(s[o],a):s[o]&&s[o].it?this.calculateBoundingBox(s[o].it,a):s[o]&&s[o].style&&s[o].w&&this.expandStrokeBoundingBox(s[o].w,a)},HShapeElement.prototype.expandStrokeBoundingBox=function(s,a){var o=0;if(s.keyframes){for(var c=0;c<s.keyframes.length;c+=1){var d=s.keyframes[c].s;d>o&&(o=d)}o*=s.mult}else o=s.v*s.mult;a.x-=o,a.xMax+=o,a.y-=o,a.yMax+=o},HShapeElement.prototype.currentBoxContains=function(s){return this.currentBBox.x<=s.x&&this.currentBBox.y<=s.y&&this.currentBBox.width+this.currentBBox.x>=s.x+s.width&&this.currentBBox.height+this.currentBBox.y>=s.y+s.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.tempBoundingBox,a=999999;if(s.x=a,s.xMax=-a,s.y=a,s.yMax=-a,this.calculateBoundingBox(this.itemsData,s),s.width=s.xMax<s.x?0:s.xMax-s.x,s.height=s.yMax<s.y?0:s.yMax-s.y,this.currentBoxContains(s))return;var o=!1;if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.shapeCont.setAttribute("width",s.width),o=!0),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.shapeCont.setAttribute("height",s.height),o=!0),o||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y){this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var c=this.shapeCont.style,d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";c.transform=d,c.webkitTransform=d}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var s=createNS("g");this.maskedElement.appendChild(s),this.innerElem=s}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var a=this.innerElem.style,o=s.fc?this.buildColor(s.fc):"rgba(0,0,0,0)";a.fill=o,a.color=o,s.sc&&(a.stroke=this.buildColor(s.sc),a.strokeWidth=s.sw+"px");var c,d,b=this.globalData.fontManager.getFontByName(s.f);if(!this.globalData.fontManager.chars)if(a.fontSize=s.finalSize+"px",a.lineHeight=s.finalSize+"px",b.fClass)this.innerElem.className=b.fClass;else{a.fontFamily=b.fFamily;var $=s.fWeight,j=s.fStyle;a.fontStyle=j,a.fontWeight=$}var _e,et,tt,rt=s.l;d=rt.length;var nt,it=this.mHelper,at="",ct=0;for(c=0;c<d;c+=1){if(this.globalData.fontManager.chars?(this.textPaths[ct]?_e=this.textPaths[ct]:((_e=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),_e.setAttribute("stroke-linejoin",lineJoinEnum[2]),_e.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[ct]?tt=(et=this.textSpans[ct]).children[0]:((et=createTag("div")).style.lineHeight=0,(tt=createNS("svg")).appendChild(_e),styleDiv(et)))):this.isMasked?_e=this.textPaths[ct]?this.textPaths[ct]:createNS("text"):this.textSpans[ct]?(et=this.textSpans[ct],_e=this.textPaths[ct]):(styleDiv(et=createTag("span")),styleDiv(_e=createTag("span")),et.appendChild(_e)),this.globalData.fontManager.chars){var st,ot=this.globalData.fontManager.getCharData(s.finalText[c],b.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily);if(st=ot?ot.data:null,it.reset(),st&&st.shapes&&st.shapes.length&&(nt=st.shapes[0].it,it.scale(s.finalSize/100,s.finalSize/100),at=this.createPathShape(it,nt),_e.setAttribute("d",at)),this.isMasked)this.innerElem.appendChild(_e);else{if(this.innerElem.appendChild(et),st&&st.shapes){document.body.appendChild(tt);var ht=tt.getBBox();tt.setAttribute("width",ht.width+2),tt.setAttribute("height",ht.height+2),tt.setAttribute("viewBox",ht.x-1+" "+(ht.y-1)+" "+(ht.width+2)+" "+(ht.height+2));var dt=tt.style,ft="translate("+(ht.x-1)+"px,"+(ht.y-1)+"px)";dt.transform=ft,dt.webkitTransform=ft,rt[c].yOffset=ht.y-1}else tt.setAttribute("width",1),tt.setAttribute("height",1);et.appendChild(tt)}}else if(_e.textContent=rt[c].val,_e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(_e);else{this.innerElem.appendChild(et);var mt=_e.style,gt="translate3d(0,"+-s.finalSize/1.2+"px,0)";mt.transform=gt,mt.webkitTransform=gt}this.isMasked?this.textSpans[ct]=_e:this.textSpans[ct]=et,this.textSpans[ct].style.display="block",this.textPaths[ct]=_e,ct+=1}for(;ct<this.textSpans.length;)this.textSpans[ct].style.display="none",ct+=1},HTextElement.prototype.renderInnerContent=function(){var s;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),s=this.svgElement.style;var a="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";s.transform=a,s.webkitTransform=a}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var o,c,d,b,$,j=0,_e=this.textAnimator.renderedLetters,et=this.textProperty.currentData.l;for(c=et.length,o=0;o<c;o+=1)et[o].n?j+=1:(b=this.textSpans[o],$=this.textPaths[o],d=_e[j],j+=1,d._mdf.m&&(this.isMasked?b.setAttribute("transform",d.m):(b.style.webkitTransform=d.m,b.style.transform=d.m)),b.style.opacity=d.o,d.sw&&d._mdf.sw&&$.setAttribute("stroke-width",d.sw),d.sc&&d._mdf.sc&&$.setAttribute("stroke",d.sc),d.fc&&d._mdf.fc&&($.setAttribute("fill",d.fc),$.style.color=d.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var tt=this.innerElem.getBBox();if(this.currentBBox.w!==tt.width&&(this.currentBBox.w=tt.width,this.svgElement.setAttribute("width",tt.width)),this.currentBBox.h!==tt.height&&(this.currentBBox.h=tt.height,this.svgElement.setAttribute("height",tt.height)),this.currentBBox.w!==tt.width+2||this.currentBBox.h!==tt.height+2||this.currentBBox.x!==tt.x-1||this.currentBBox.y!==tt.y-1){this.currentBBox.w=tt.width+2,this.currentBBox.h=tt.height+2,this.currentBBox.x=tt.x-1,this.currentBBox.y=tt.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),s=this.svgElement.style;var rt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=rt,s.webkitTransform=rt}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var s,a,o,c,d=this.comp.threeDElements.length;for(s=0;s<d;s+=1)if((a=this.comp.threeDElements[s]).type==="3d"){o=a.perspectiveElem.style,c=a.container.style;var b=this.pe.v+"px",$="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.perspective=b,o.webkitPerspective=b,c.transformOrigin="0px 0px 0px",c.mozTransformOrigin="0px 0px 0px",c.webkitTransformOrigin="0px 0px 0px",o.transform=$,o.webkitTransform=$}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var s,a,o=this._isFirstFrame;if(this.hierarchy)for(a=this.hierarchy.length,s=0;s<a;s+=1)o=this.hierarchy[s].finalTransform.mProp._mdf||o;if(o||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(s=a=this.hierarchy.length-1;s>=0;s-=1){var c=this.hierarchy[s].finalTransform.mProp;this.mat.translate(-c.p.v[0],-c.p.v[1],c.p.v[2]),this.mat.rotateX(-c.or.v[0]).rotateY(-c.or.v[1]).rotateZ(c.or.v[2]),this.mat.rotateX(-c.rx.v).rotateY(-c.ry.v).rotateZ(c.rz.v),this.mat.scale(1/c.s.v[0],1/c.s.v[1],1/c.s.v[2]),this.mat.translate(c.a.v[0],c.a.v[1],c.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var d;d=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var b=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)),$=[d[0]/b,d[1]/b,d[2]/b],j=Math.sqrt($[2]*$[2]+$[0]*$[0]),_e=Math.atan2($[1],j),et=Math.atan2($[0],-$[2]);this.mat.rotateY(et).rotateX(-_e)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var tt=!this._prevMat.equals(this.mat);if((tt||this.pe._mdf)&&this.comp.threeDElements){var rt,nt,it;for(a=this.comp.threeDElements.length,s=0;s<a;s+=1)if((rt=this.comp.threeDElements[s]).type==="3d"){if(tt){var at=this.mat.toCSS();(it=rt.container.style).transform=at,it.webkitTransform=at}this.pe._mdf&&((nt=rt.perspectiveElem.style).perspective=this.pe.v+"px",nt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData),a=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(a),a.crossOrigin="anonymous",a.src=s,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(s,a){var o=s.getBaseElement();if(o){var c=this.layers[a];if(c.ddd&&this.supports3d)this.addTo3dContainer(o,a);else if(this.threeDElements)this.addTo3dContainer(o,a);else{for(var d,b,$=0;$<a;)this.elements[$]&&this.elements[$]!==!0&&this.elements[$].getBaseElement&&(b=this.elements[$],d=(this.layers[$].ddd?this.getThreeDContainerByPos($):b.getBaseElement())||d),$+=1;d?c.ddd&&this.supports3d||this.layerElement.insertBefore(o,d):c.ddd&&this.supports3d||this.layerElement.appendChild(o)}}},HybridRendererBase.prototype.createShape=function(s){return this.supports3d?new HShapeElement(s,this.globalData,this):new SVGShapeElement(s,this.globalData,this)},HybridRendererBase.prototype.createText=function(s){return this.supports3d?new HTextElement(s,this.globalData,this):new SVGTextLottieElement(s,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(s){return this.camera=new HCameraElement(s,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(s){return this.supports3d?new HImageElement(s,this.globalData,this):new IImageElement(s,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(s){return this.supports3d?new HSolidElement(s,this.globalData,this):new ISolidElement(s,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(s){for(var a=0,o=this.threeDElements.length;a<o;){if(this.threeDElements[a].startPos<=s&&this.threeDElements[a].endPos>=s)return this.threeDElements[a].perspectiveElem;a+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(s,a){var o,c,d=createTag("div");styleDiv(d);var b=createTag("div");if(styleDiv(b),a==="3d"){(o=d.style).width=this.globalData.compSize.w+"px",o.height=this.globalData.compSize.h+"px",o.webkitTransformOrigin="50% 50%",o.mozTransformOrigin="50% 50%",o.transformOrigin="50% 50%";var $="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(c=b.style).transform=$,c.webkitTransform=$}d.appendChild(b);var j={container:b,perspectiveElem:d,startPos:s,endPos:s,type:a};return this.threeDElements.push(j),j},HybridRendererBase.prototype.build3dContainers=function(){var s,a,o=this.layers.length,c="";for(s=0;s<o;s+=1)this.layers[s].ddd&&this.layers[s].ty!==3?(c!=="3d"&&(c="3d",a=this.createThreeDContainer(s,"3d")),a.endPos=Math.max(a.endPos,s)):(c!=="2d"&&(c="2d",a=this.createThreeDContainer(s,"2d")),a.endPos=Math.max(a.endPos,s));for(s=(o=this.threeDElements.length)-1;s>=0;s-=1)this.resizerElem.appendChild(this.threeDElements[s].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(s,a){for(var o=0,c=this.threeDElements.length;o<c;){if(a<=this.threeDElements[o].endPos){for(var d,b=this.threeDElements[o].startPos;b<a;)this.elements[b]&&this.elements[b].getBaseElement&&(d=this.elements[b].getBaseElement()),b+=1;d?this.threeDElements[o].container.insertBefore(s,d):this.threeDElements[o].container.appendChild(s);break}o+=1}},HybridRendererBase.prototype.configAnimation=function(s){var a=createTag("div"),o=this.animationItem.wrapper,c=a.style;c.width=s.w+"px",c.height=s.h+"px",this.resizerElem=a,styleDiv(a),c.transformStyle="flat",c.mozTransformStyle="flat",c.webkitTransformStyle="flat",this.renderConfig.className&&a.setAttribute("class",this.renderConfig.className),o.appendChild(a),c.overflow="hidden";var d=createNS("svg");d.setAttribute("width","1"),d.setAttribute("height","1"),styleDiv(d),this.resizerElem.appendChild(d);var b=createNS("defs");d.appendChild(b),this.data=s,this.setupGlobalData(s,d),this.globalData.defs=b,this.layers=s.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var s;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var a=this.layers?this.layers.length:0;for(s=0;s<a;s+=1)this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var s,a,o,c,d=this.animationItem.wrapper.offsetWidth,b=this.animationItem.wrapper.offsetHeight,$=d/b;this.globalData.compSize.w/this.globalData.compSize.h>$?(s=d/this.globalData.compSize.w,a=d/this.globalData.compSize.w,o=0,c=(b-this.globalData.compSize.h*(d/this.globalData.compSize.w))/2):(s=b/this.globalData.compSize.h,a=b/this.globalData.compSize.h,o=(d-this.globalData.compSize.w*(b/this.globalData.compSize.h))/2,c=0);var j=this.resizerElem.style;j.webkitTransform="matrix3d("+s+",0,0,0,0,"+a+",0,0,0,0,1,0,"+o+","+c+",0,1)",j.transform=j.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var s,a=this.globalData.compSize.w,o=this.globalData.compSize.h,c=this.threeDElements.length;for(s=0;s<c;s+=1){var d=this.threeDElements[s].perspectiveElem.style;d.webkitPerspective=Math.sqrt(Math.pow(a,2)+Math.pow(o,2))+"px",d.perspective=d.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(s){var a,o=s.length,c=createTag("div");for(a=0;a<o;a+=1)if(s[a].xt){var d=this.createComp(s[a],c,this.globalData.comp,null);d.initExpressions(),this.globalData.projectInterface.registerComposition(d)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(s,a){for(var o,c=0;c<a;)this.elements[c]&&this.elements[c].getBaseElement&&(o=this.elements[c].getBaseElement()),c+=1;o?this.layerElement.insertBefore(s,o):this.layerElement.appendChild(s)},HCompElement.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};var CompExpressionInterface=function(s){function a(o){for(var c=0,d=s.layers.length;c<d;){if(s.layers[c].nm===o||s.layers[c].ind===o)return s.elements[c].layerInterface;c+=1}return null}return Object.defineProperty(a,"_name",{value:s.data.nm}),a.layer=a,a.pixelAspect=1,a.height=s.data.h||s.globalData.compSize.h,a.width=s.data.w||s.globalData.compSize.w,a.pixelAspect=1,a.frameDuration=1/s.globalData.frameRate,a.displayStartTime=0,a.numLayers=s.layers.length,a},Expressions=function(){var s={};return s.initExpressions=function(a){var o=0,c=[];a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=function(){o+=1},a.renderer.globalData.popExpression=function(){(o-=1)===0&&function(){var d,b=c.length;for(d=0;d<b;d+=1)c[d].release();c.length=0}()},a.renderer.globalData.registerExpressionProperty=function(d){c.indexOf(d)===-1&&c.push(d)}},s}(),MaskManagerInterface=function(){function s(a,o){this._mask=a,this._data=o}return Object.defineProperty(s.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(s.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(a){var o,c=createSizedArray(a.viewData.length),d=a.viewData.length;for(o=0;o<d;o+=1)c[o]=new s(a.viewData[o],a.masksProperties[o]);return function(b){for(o=0;o<d;){if(a.masksProperties[o].nm===b)return c[o];o+=1}return null}}}(),ExpressionPropertyInterface=function(){var s={pv:0,v:0,mult:1},a={pv:[0,0,0],v:[0,0,0],mult:1};function o(d,b,$){Object.defineProperty(d,"velocity",{get:function(){return b.getVelocityAtTime(b.comp.currentFrame)}}),d.numKeys=b.keyframes?b.keyframes.length:0,d.key=function(j){if(!d.numKeys)return 0;var _e="";_e="s"in b.keyframes[j-1]?b.keyframes[j-1].s:"e"in b.keyframes[j-2]?b.keyframes[j-2].e:b.keyframes[j-2].s;var et=$==="unidimensional"?new Number(_e):Object.assign({},_e);return et.time=b.keyframes[j-1].t/b.elem.comp.globalData.frameRate,et.value=$==="unidimensional"?_e[0]:_e,et},d.valueAtTime=b.getValueAtTime,d.speedAtTime=b.getSpeedAtTime,d.velocityAtTime=b.getVelocityAtTime,d.propertyGroup=b.propertyGroup}function c(){return s}return function(d){return d?d.propType==="unidimensional"?function(b){b&&"pv"in b||(b=s);var $=1/b.mult,j=b.pv*$,_e=new Number(j);return _e.value=j,o(_e,b,"unidimensional"),function(){return b.k&&b.getValue(),j=b.v*$,_e.value!==j&&((_e=new Number(j)).value=j,o(_e,b,"unidimensional")),_e}}(d):function(b){b&&"pv"in b||(b=a);var $=1/b.mult,j=b.data&&b.data.l||b.pv.length,_e=createTypedArray("float32",j),et=createTypedArray("float32",j);return _e.value=et,o(_e,b,"multidimensional"),function(){b.k&&b.getValue();for(var tt=0;tt<j;tt+=1)et[tt]=b.v[tt]*$,_e[tt]=et[tt];return _e}}(d):c}}(),TransformExpressionInterface=function(s){function a($){switch($){case"scale":case"Scale":case"ADBE Scale":case 6:return a.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return a.rotation;case"ADBE Rotate X":return a.xRotation;case"ADBE Rotate Y":return a.yRotation;case"position":case"Position":case"ADBE Position":case 2:return a.position;case"ADBE Position_0":return a.xPosition;case"ADBE Position_1":return a.yPosition;case"ADBE Position_2":return a.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return a.anchorPoint;case"opacity":case"Opacity":case 11:return a.opacity;default:return null}}var o,c,d,b;return Object.defineProperty(a,"rotation",{get:ExpressionPropertyInterface(s.r||s.rz)}),Object.defineProperty(a,"zRotation",{get:ExpressionPropertyInterface(s.rz||s.r)}),Object.defineProperty(a,"xRotation",{get:ExpressionPropertyInterface(s.rx)}),Object.defineProperty(a,"yRotation",{get:ExpressionPropertyInterface(s.ry)}),Object.defineProperty(a,"scale",{get:ExpressionPropertyInterface(s.s)}),s.p?b=ExpressionPropertyInterface(s.p):(o=ExpressionPropertyInterface(s.px),c=ExpressionPropertyInterface(s.py),s.pz&&(d=ExpressionPropertyInterface(s.pz))),Object.defineProperty(a,"position",{get:function(){return s.p?b():[o(),c(),d?d():0]}}),Object.defineProperty(a,"xPosition",{get:ExpressionPropertyInterface(s.px)}),Object.defineProperty(a,"yPosition",{get:ExpressionPropertyInterface(s.py)}),Object.defineProperty(a,"zPosition",{get:ExpressionPropertyInterface(s.pz)}),Object.defineProperty(a,"anchorPoint",{get:ExpressionPropertyInterface(s.a)}),Object.defineProperty(a,"opacity",{get:ExpressionPropertyInterface(s.o)}),Object.defineProperty(a,"skew",{get:ExpressionPropertyInterface(s.sk)}),Object.defineProperty(a,"skewAxis",{get:ExpressionPropertyInterface(s.sa)}),Object.defineProperty(a,"orientation",{get:ExpressionPropertyInterface(s.or)}),a},LayerExpressionInterface=function(){function s(et){var tt=new Matrix;return et!==void 0?this._elem.finalTransform.mProp.getValueAtTime(et).clone(tt):this._elem.finalTransform.mProp.applyToMatrix(tt),tt}function a(et,tt){var rt=this.getMatrix(tt);return rt.props[12]=0,rt.props[13]=0,rt.props[14]=0,this.applyPoint(rt,et)}function o(et,tt){var rt=this.getMatrix(tt);return this.applyPoint(rt,et)}function c(et,tt){var rt=this.getMatrix(tt);return rt.props[12]=0,rt.props[13]=0,rt.props[14]=0,this.invertPoint(rt,et)}function d(et,tt){var rt=this.getMatrix(tt);return this.invertPoint(rt,et)}function b(et,tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var rt,nt=this._elem.hierarchy.length;for(rt=0;rt<nt;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(et)}return et.applyToPointArray(tt[0],tt[1],tt[2]||0)}function $(et,tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var rt,nt=this._elem.hierarchy.length;for(rt=0;rt<nt;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(et)}return et.inversePoint(tt)}function j(et){var tt=new Matrix;if(tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(tt),this._elem.hierarchy&&this._elem.hierarchy.length){var rt,nt=this._elem.hierarchy.length;for(rt=0;rt<nt;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(tt);return tt.inversePoint(et)}return tt.inversePoint(et)}function _e(){return[1,1,1,1]}return function(et){var tt;function rt(it){switch(it){case"ADBE Root Vectors Group":case"Contents":case 2:return rt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return rt.effect;case"ADBE Text Properties":return rt.textInterface;default:return null}}rt.getMatrix=s,rt.invertPoint=$,rt.applyPoint=b,rt.toWorld=o,rt.toWorldVec=a,rt.fromWorld=d,rt.fromWorldVec=c,rt.toComp=o,rt.fromComp=j,rt.sampleImage=_e,rt.sourceRectAtTime=et.sourceRectAtTime.bind(et),rt._elem=et;var nt=getDescriptor(tt=TransformExpressionInterface(et.finalTransform.mProp),"anchorPoint");return Object.defineProperties(rt,{hasParent:{get:function(){return et.hierarchy.length}},parent:{get:function(){return et.hierarchy[0].layerInterface}},rotation:getDescriptor(tt,"rotation"),scale:getDescriptor(tt,"scale"),position:getDescriptor(tt,"position"),opacity:getDescriptor(tt,"opacity"),anchorPoint:nt,anchor_point:nt,transform:{get:function(){return tt}},active:{get:function(){return et.isInRange}}}),rt.startTime=et.data.st,rt.index=et.data.ind,rt.source=et.data.refId,rt.height=et.data.ty===0?et.data.h:100,rt.width=et.data.ty===0?et.data.w:100,rt.inPoint=et.data.ip/et.comp.globalData.frameRate,rt.outPoint=et.data.op/et.comp.globalData.frameRate,rt._name=et.data.nm,rt.registerMaskInterface=function(it){rt.mask=new MaskManagerInterface(it,et)},rt.registerEffectsInterface=function(it){rt.effect=it},rt}}(),propertyGroupFactory=function(s,a){return function(o){return(o=o===void 0?1:o)<=0?s:a(o-1)}},PropertyInterface=function(s,a){var o={_name:s};return function(c){return(c=c===void 0?1:c)<=0?o:a(c-1)}},EffectsExpressionInterface=function(){function s(o,c,d,b){function $(rt){for(var nt=o.ef,it=0,at=nt.length;it<at;){if(rt===nt[it].nm||rt===nt[it].mn||rt===nt[it].ix)return nt[it].ty===5?et[it]:et[it]();it+=1}throw new Error}var j,_e=propertyGroupFactory($,d),et=[],tt=o.ef.length;for(j=0;j<tt;j+=1)o.ef[j].ty===5?et.push(s(o.ef[j],c.effectElements[j],c.effectElements[j].propertyGroup,b)):et.push(a(c.effectElements[j],o.ef[j].ty,b,_e));return o.mn==="ADBE Color Control"&&Object.defineProperty($,"color",{get:function(){return et[0]()}}),Object.defineProperties($,{numProperties:{get:function(){return o.np}},_name:{value:o.nm},propertyGroup:{value:_e}}),$.enabled=o.en!==0,$.active=$.enabled,$}function a(o,c,d,b){var $=ExpressionPropertyInterface(o.p);return o.p.setGroupProperty&&o.p.setGroupProperty(PropertyInterface("",b)),function(){return c===10?d.comp.compInterface(o.p.v):$()}}return{createEffectsInterface:function(o,c){if(o.effectsManager){var d,b=[],$=o.data.ef,j=o.effectsManager.effectElements.length;for(d=0;d<j;d+=1)b.push(s($[d],o.effectsManager.effectElements[d],c,o));var _e=o.data.ef||[],et=function(tt){for(d=0,j=_e.length;d<j;){if(tt===_e[d].nm||tt===_e[d].mn||tt===_e[d].ix)return b[d];d+=1}return null};return Object.defineProperty(et,"numProperties",{get:function(){return _e.length}}),et}return null}}}(),ShapePathInterface=function(s,a,o){var c=a.sh;function d($){return $==="Shape"||$==="shape"||$==="Path"||$==="path"||$==="ADBE Vector Shape"||$===2?d.path:null}var b=propertyGroupFactory(d,o);return c.setGroupProperty(PropertyInterface("Path",b)),Object.defineProperties(d,{path:{get:function(){return c.k&&c.getValue(),c}},shape:{get:function(){return c.k&&c.getValue(),c}},_name:{value:s.nm},ix:{value:s.ix},propertyIndex:{value:s.ix},mn:{value:s.mn},propertyGroup:{value:o}}),d},ShapeExpressionInterface=function(){function s(it,at,ct){var st,ot=[],ht=it?it.length:0;for(st=0;st<ht;st+=1)it[st].ty==="gr"?ot.push(a(it[st],at[st],ct)):it[st].ty==="fl"?ot.push(o(it[st],at[st],ct)):it[st].ty==="st"?ot.push(b(it[st],at[st],ct)):it[st].ty==="tm"?ot.push($(it[st],at[st],ct)):it[st].ty==="tr"||(it[st].ty==="el"?ot.push(_e(it[st],at[st],ct)):it[st].ty==="sr"?ot.push(et(it[st],at[st],ct)):it[st].ty==="sh"?ot.push(ShapePathInterface(it[st],at[st],ct)):it[st].ty==="rc"?ot.push(tt(it[st],at[st],ct)):it[st].ty==="rd"?ot.push(rt(it[st],at[st],ct)):it[st].ty==="rp"?ot.push(nt(it[st],at[st],ct)):it[st].ty==="gf"?ot.push(c(it[st],at[st],ct)):ot.push(d(it[st],at[st])));return ot}function a(it,at,ct){var st=function(dt){switch(dt){case"ADBE Vectors Group":case"Contents":case 2:return st.content;default:return st.transform}};st.propertyGroup=propertyGroupFactory(st,ct);var ot=function(dt,ft,mt){var gt,vt=function(Et){for(var St=0,Ct=gt.length;St<Ct;){if(gt[St]._name===Et||gt[St].mn===Et||gt[St].propertyIndex===Et||gt[St].ix===Et||gt[St].ind===Et)return gt[St];St+=1}return typeof Et=="number"?gt[Et-1]:null};vt.propertyGroup=propertyGroupFactory(vt,mt),gt=s(dt.it,ft.it,vt.propertyGroup),vt.numProperties=gt.length;var yt=j(dt.it[dt.it.length-1],ft.it[ft.it.length-1],vt.propertyGroup);return vt.transform=yt,vt.propertyIndex=dt.cix,vt._name=dt.nm,vt}(it,at,st.propertyGroup),ht=j(it.it[it.it.length-1],at.it[at.it.length-1],st.propertyGroup);return st.content=ot,st.transform=ht,Object.defineProperty(st,"_name",{get:function(){return it.nm}}),st.numProperties=it.np,st.propertyIndex=it.ix,st.nm=it.nm,st.mn=it.mn,st}function o(it,at,ct){function st(ot){return ot==="Color"||ot==="color"?st.color:ot==="Opacity"||ot==="opacity"?st.opacity:null}return Object.defineProperties(st,{color:{get:ExpressionPropertyInterface(at.c)},opacity:{get:ExpressionPropertyInterface(at.o)},_name:{value:it.nm},mn:{value:it.mn}}),at.c.setGroupProperty(PropertyInterface("Color",ct)),at.o.setGroupProperty(PropertyInterface("Opacity",ct)),st}function c(it,at,ct){function st(ot){return ot==="Start Point"||ot==="start point"?st.startPoint:ot==="End Point"||ot==="end point"?st.endPoint:ot==="Opacity"||ot==="opacity"?st.opacity:null}return Object.defineProperties(st,{startPoint:{get:ExpressionPropertyInterface(at.s)},endPoint:{get:ExpressionPropertyInterface(at.e)},opacity:{get:ExpressionPropertyInterface(at.o)},type:{get:function(){return"a"}},_name:{value:it.nm},mn:{value:it.mn}}),at.s.setGroupProperty(PropertyInterface("Start Point",ct)),at.e.setGroupProperty(PropertyInterface("End Point",ct)),at.o.setGroupProperty(PropertyInterface("Opacity",ct)),st}function d(){return function(){return null}}function b(it,at,ct){var st,ot=propertyGroupFactory(gt,ct),ht=propertyGroupFactory(mt,ot);function dt(vt){Object.defineProperty(mt,it.d[vt].nm,{get:ExpressionPropertyInterface(at.d.dataProps[vt].p)})}var ft=it.d?it.d.length:0,mt={};for(st=0;st<ft;st+=1)dt(st),at.d.dataProps[st].p.setGroupProperty(ht);function gt(vt){return vt==="Color"||vt==="color"?gt.color:vt==="Opacity"||vt==="opacity"?gt.opacity:vt==="Stroke Width"||vt==="stroke width"?gt.strokeWidth:null}return Object.defineProperties(gt,{color:{get:ExpressionPropertyInterface(at.c)},opacity:{get:ExpressionPropertyInterface(at.o)},strokeWidth:{get:ExpressionPropertyInterface(at.w)},dash:{get:function(){return mt}},_name:{value:it.nm},mn:{value:it.mn}}),at.c.setGroupProperty(PropertyInterface("Color",ot)),at.o.setGroupProperty(PropertyInterface("Opacity",ot)),at.w.setGroupProperty(PropertyInterface("Stroke Width",ot)),gt}function $(it,at,ct){function st(ht){return ht===it.e.ix||ht==="End"||ht==="end"?st.end:ht===it.s.ix?st.start:ht===it.o.ix?st.offset:null}var ot=propertyGroupFactory(st,ct);return st.propertyIndex=it.ix,at.s.setGroupProperty(PropertyInterface("Start",ot)),at.e.setGroupProperty(PropertyInterface("End",ot)),at.o.setGroupProperty(PropertyInterface("Offset",ot)),st.propertyIndex=it.ix,st.propertyGroup=ct,Object.defineProperties(st,{start:{get:ExpressionPropertyInterface(at.s)},end:{get:ExpressionPropertyInterface(at.e)},offset:{get:ExpressionPropertyInterface(at.o)},_name:{value:it.nm}}),st.mn=it.mn,st}function j(it,at,ct){function st(ht){return it.a.ix===ht||ht==="Anchor Point"?st.anchorPoint:it.o.ix===ht||ht==="Opacity"?st.opacity:it.p.ix===ht||ht==="Position"?st.position:it.r.ix===ht||ht==="Rotation"||ht==="ADBE Vector Rotation"?st.rotation:it.s.ix===ht||ht==="Scale"?st.scale:it.sk&&it.sk.ix===ht||ht==="Skew"?st.skew:it.sa&&it.sa.ix===ht||ht==="Skew Axis"?st.skewAxis:null}var ot=propertyGroupFactory(st,ct);return at.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ot)),at.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ot)),at.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ot)),at.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ot)),at.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ot)),at.transform.mProps.sk&&(at.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ot)),at.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ot))),at.transform.op.setGroupProperty(PropertyInterface("Opacity",ot)),Object.defineProperties(st,{opacity:{get:ExpressionPropertyInterface(at.transform.mProps.o)},position:{get:ExpressionPropertyInterface(at.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(at.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(at.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(at.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(at.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(at.transform.mProps.sa)},_name:{value:it.nm}}),st.ty="tr",st.mn=it.mn,st.propertyGroup=ct,st}function _e(it,at,ct){function st(dt){return it.p.ix===dt?st.position:it.s.ix===dt?st.size:null}var ot=propertyGroupFactory(st,ct);st.propertyIndex=it.ix;var ht=at.sh.ty==="tm"?at.sh.prop:at.sh;return ht.s.setGroupProperty(PropertyInterface("Size",ot)),ht.p.setGroupProperty(PropertyInterface("Position",ot)),Object.defineProperties(st,{size:{get:ExpressionPropertyInterface(ht.s)},position:{get:ExpressionPropertyInterface(ht.p)},_name:{value:it.nm}}),st.mn=it.mn,st}function et(it,at,ct){function st(dt){return it.p.ix===dt?st.position:it.r.ix===dt?st.rotation:it.pt.ix===dt?st.points:it.or.ix===dt||dt==="ADBE Vector Star Outer Radius"?st.outerRadius:it.os.ix===dt?st.outerRoundness:!it.ir||it.ir.ix!==dt&&dt!=="ADBE Vector Star Inner Radius"?it.is&&it.is.ix===dt?st.innerRoundness:null:st.innerRadius}var ot=propertyGroupFactory(st,ct),ht=at.sh.ty==="tm"?at.sh.prop:at.sh;return st.propertyIndex=it.ix,ht.or.setGroupProperty(PropertyInterface("Outer Radius",ot)),ht.os.setGroupProperty(PropertyInterface("Outer Roundness",ot)),ht.pt.setGroupProperty(PropertyInterface("Points",ot)),ht.p.setGroupProperty(PropertyInterface("Position",ot)),ht.r.setGroupProperty(PropertyInterface("Rotation",ot)),it.ir&&(ht.ir.setGroupProperty(PropertyInterface("Inner Radius",ot)),ht.is.setGroupProperty(PropertyInterface("Inner Roundness",ot))),Object.defineProperties(st,{position:{get:ExpressionPropertyInterface(ht.p)},rotation:{get:ExpressionPropertyInterface(ht.r)},points:{get:ExpressionPropertyInterface(ht.pt)},outerRadius:{get:ExpressionPropertyInterface(ht.or)},outerRoundness:{get:ExpressionPropertyInterface(ht.os)},innerRadius:{get:ExpressionPropertyInterface(ht.ir)},innerRoundness:{get:ExpressionPropertyInterface(ht.is)},_name:{value:it.nm}}),st.mn=it.mn,st}function tt(it,at,ct){function st(dt){return it.p.ix===dt?st.position:it.r.ix===dt?st.roundness:it.s.ix===dt||dt==="Size"||dt==="ADBE Vector Rect Size"?st.size:null}var ot=propertyGroupFactory(st,ct),ht=at.sh.ty==="tm"?at.sh.prop:at.sh;return st.propertyIndex=it.ix,ht.p.setGroupProperty(PropertyInterface("Position",ot)),ht.s.setGroupProperty(PropertyInterface("Size",ot)),ht.r.setGroupProperty(PropertyInterface("Rotation",ot)),Object.defineProperties(st,{position:{get:ExpressionPropertyInterface(ht.p)},roundness:{get:ExpressionPropertyInterface(ht.r)},size:{get:ExpressionPropertyInterface(ht.s)},_name:{value:it.nm}}),st.mn=it.mn,st}function rt(it,at,ct){function st(dt){return it.r.ix===dt||dt==="Round Corners 1"?st.radius:null}var ot=propertyGroupFactory(st,ct),ht=at;return st.propertyIndex=it.ix,ht.rd.setGroupProperty(PropertyInterface("Radius",ot)),Object.defineProperties(st,{radius:{get:ExpressionPropertyInterface(ht.rd)},_name:{value:it.nm}}),st.mn=it.mn,st}function nt(it,at,ct){function st(dt){return it.c.ix===dt||dt==="Copies"?st.copies:it.o.ix===dt||dt==="Offset"?st.offset:null}var ot=propertyGroupFactory(st,ct),ht=at;return st.propertyIndex=it.ix,ht.c.setGroupProperty(PropertyInterface("Copies",ot)),ht.o.setGroupProperty(PropertyInterface("Offset",ot)),Object.defineProperties(st,{copies:{get:ExpressionPropertyInterface(ht.c)},offset:{get:ExpressionPropertyInterface(ht.o)},_name:{value:it.nm}}),st.mn=it.mn,st}return function(it,at,ct){var st;function ot(ht){if(typeof ht=="number")return(ht=ht===void 0?1:ht)===0?ct:st[ht-1];for(var dt=0,ft=st.length;dt<ft;){if(st[dt]._name===ht)return st[dt];dt+=1}return null}return ot.propertyGroup=propertyGroupFactory(ot,function(){return ct}),st=s(it,at,ot.propertyGroup),ot.numProperties=st.length,ot._name="Contents",ot}}(),TextExpressionInterface=function(s){var a,o;function c(d){switch(d){case"ADBE Text Document":return c.sourceText;default:return null}}return Object.defineProperty(c,"sourceText",{get:function(){s.textProperty.getValue();var d=s.textProperty.currentData.t;return d!==a&&(a=s.textProperty.currentData.t,(o=new String(d)).value=d||new String(d),Object.defineProperty(o,"style",{get:function(){return{fillColor:s.textProperty.currentData.fc}}})),o}}),c};function _typeof$2(s){return(_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var FootageInterface=(dataInterfaceFactory=function(s){function a(o){return o==="Outline"?a.outlineInterface():null}return a._name="Outline",a.outlineInterface=function(o){var c="",d=o.getFootageData();function b($){if(d[$])return c=$,_typeof$2(d=d[$])==="object"?b:d;var j=$.indexOf(c);if(j!==-1){var _e=parseInt($.substr(j+c.length),10);return _typeof$2(d=d[_e])==="object"?b:d}return""}return function(){return c="",d=o.getFootageData(),b}}(s),a},function(s){function a(o){return o==="Data"?a.dataInterface:null}return a._name="Data",a.dataInterface=dataInterfaceFactory(s),a}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(s){return interfaces[s]||null}function _typeof$1(s){return(_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function seedRandom(s,a){var o=this,c=a.pow(256,6),d=a.pow(2,52),b=2*d;function $(tt){var rt,nt=tt.length,it=this,at=0,ct=it.i=it.j=0,st=it.S=[];for(nt||(tt=[nt++]);at<256;)st[at]=at++;for(at=0;at<256;at++)st[at]=st[ct=255&ct+tt[at%nt]+(rt=st[at])],st[ct]=rt;it.g=function(ot){for(var ht,dt=0,ft=it.i,mt=it.j,gt=it.S;ot--;)ht=gt[ft=255&ft+1],dt=256*dt+gt[255&(gt[ft]=gt[mt=255&mt+ht])+(gt[mt]=ht)];return it.i=ft,it.j=mt,dt}}function j(tt,rt){return rt.i=tt.i,rt.j=tt.j,rt.S=tt.S.slice(),rt}function _e(tt,rt){for(var nt,it=tt+"",at=0;at<it.length;)rt[255&at]=255&(nt^=19*rt[255&at])+it.charCodeAt(at++);return et(rt)}function et(tt){return String.fromCharCode.apply(0,tt)}a.seedrandom=function(tt,rt,nt){var it=[],at=_e(function ot(ht,dt){var ft,mt=[],gt=_typeof$1(ht);if(dt&&gt=="object")for(ft in ht)try{mt.push(ot(ht[ft],dt-1))}catch{}return mt.length?mt:gt=="string"?ht:ht+"\0"}((rt=rt===!0?{entropy:!0}:rt||{}).entropy?[tt,et(s)]:tt===null?function(){try{var ot=new Uint8Array(256);return(o.crypto||o.msCrypto).getRandomValues(ot),et(ot)}catch{var ht=o.navigator,dt=ht&&ht.plugins;return[+new Date,o,dt,o.screen,et(s)]}}():tt,3),it),ct=new $(it),st=function(){for(var ot=ct.g(6),ht=c,dt=0;ot<d;)ot=256*(ot+dt),ht*=256,dt=ct.g(1);for(;ot>=b;)ot/=2,ht/=2,dt>>>=1;return(ot+dt)/ht};return st.int32=function(){return 0|ct.g(4)},st.quick=function(){return ct.g(4)/4294967296},st.double=st,_e(et(ct.S),s),(rt.pass||nt||function(ot,ht,dt,ft){return ft&&(ft.S&&j(ft,ct),ot.state=function(){return j(ct,{})}),dt?(a.random=ot,ht):ot})(st,at,"global"in rt?rt.global:this==a,rt.state)},_e(a.random(),s)}function initialize$2(s){seedRandom([],s)}var propTypes={SHAPE:"shape"};function _typeof(s){return(_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(s){return s.constructor===Array||s.constructor===Float32Array}function isNumerable(s,a){return s==="number"||s==="boolean"||s==="string"||a instanceof Number}function $bm_neg(s){var a=_typeof(s);if(a==="number"||a==="boolean"||s instanceof Number)return-s;if($bm_isInstanceOfArray(s)){var o,c=s.length,d=[];for(o=0;o<c;o+=1)d[o]=-s[o];return d}return s.propType?s.v:-s}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(s,a){var o=_typeof(s),c=_typeof(a);if(o==="string"||c==="string"||isNumerable(o,s)&&isNumerable(c,a))return s+a;if($bm_isInstanceOfArray(s)&&isNumerable(c,a))return(s=s.slice(0))[0]+=a,s;if(isNumerable(o,s)&&$bm_isInstanceOfArray(a))return(a=a.slice(0))[0]=s+a[0],a;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(a)){for(var d=0,b=s.length,$=a.length,j=[];d<b||d<$;)(typeof s[d]=="number"||s[d]instanceof Number)&&(typeof a[d]=="number"||a[d]instanceof Number)?j[d]=s[d]+a[d]:j[d]=a[d]===void 0?s[d]:s[d]||a[d],d+=1;return j}return 0}var add=sum;function sub(s,a){var o=_typeof(s),c=_typeof(a);if(isNumerable(o,s)&&isNumerable(c,a))return o==="string"&&(s=parseInt(s,10)),c==="string"&&(a=parseInt(a,10)),s-a;if($bm_isInstanceOfArray(s)&&isNumerable(c,a))return(s=s.slice(0))[0]-=a,s;if(isNumerable(o,s)&&$bm_isInstanceOfArray(a))return(a=a.slice(0))[0]=s-a[0],a;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(a)){for(var d=0,b=s.length,$=a.length,j=[];d<b||d<$;)(typeof s[d]=="number"||s[d]instanceof Number)&&(typeof a[d]=="number"||a[d]instanceof Number)?j[d]=s[d]-a[d]:j[d]=a[d]===void 0?s[d]:s[d]||a[d],d+=1;return j}return 0}function mul(s,a){var o,c,d,b=_typeof(s),$=_typeof(a);if(isNumerable(b,s)&&isNumerable($,a))return s*a;if($bm_isInstanceOfArray(s)&&isNumerable($,a)){for(d=s.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=s[c]*a;return o}if(isNumerable(b,s)&&$bm_isInstanceOfArray(a)){for(d=a.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=s*a[c];return o}return 0}function div(s,a){var o,c,d,b=_typeof(s),$=_typeof(a);if(isNumerable(b,s)&&isNumerable($,a))return s/a;if($bm_isInstanceOfArray(s)&&isNumerable($,a)){for(d=s.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=s[c]/a;return o}if(isNumerable(b,s)&&$bm_isInstanceOfArray(a)){for(d=a.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=s/a[c];return o}return 0}function mod(s,a){return typeof s=="string"&&(s=parseInt(s,10)),typeof a=="string"&&(a=parseInt(a,10)),s%a}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(s,a,o){if(a>o){var c=o;o=a,a=c}return Math.min(Math.max(s,a),o)}function radiansToDegrees(s){return s/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(s){return s*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(s,a){if(typeof s=="number"||s instanceof Number)return a=a||0,Math.abs(s-a);var o;a||(a=helperLengthArray);var c=Math.min(s.length,a.length),d=0;for(o=0;o<c;o+=1)d+=Math.pow(a[o]-s[o],2);return Math.sqrt(d)}function normalize(s){return div(s,length(s))}function rgbToHsl(s){var a,o,c=s[0],d=s[1],b=s[2],$=Math.max(c,d,b),j=Math.min(c,d,b),_e=($+j)/2;if($===j)a=0,o=0;else{var et=$-j;switch(o=_e>.5?et/(2-$-j):et/($+j),$){case c:a=(d-b)/et+(d<b?6:0);break;case d:a=(b-c)/et+2;break;case b:a=(c-d)/et+4}a/=6}return[a,o,_e,s[3]]}function hue2rgb(s,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+6*(a-s)*o:o<.5?a:o<2/3?s+(a-s)*(2/3-o)*6:s}function hslToRgb(s){var a,o,c,d=s[0],b=s[1],$=s[2];if(b===0)a=$,c=$,o=$;else{var j=$<.5?$*(1+b):$+b-$*b,_e=2*$-j;a=hue2rgb(_e,j,d+1/3),o=hue2rgb(_e,j,d),c=hue2rgb(_e,j,d-1/3)}return[a,o,c,s[3]]}function linear(s,a,o,c,d){if(c!==void 0&&d!==void 0||(c=a,d=o,a=0,o=1),o<a){var b=o;o=a,a=b}if(s<=a)return c;if(s>=o)return d;var $,j=o===a?0:(s-a)/(o-a);if(!c.length)return c+(d-c)*j;var _e=c.length,et=createTypedArray("float32",_e);for($=0;$<_e;$+=1)et[$]=c[$]+(d[$]-c[$])*j;return et}function random(s,a){if(a===void 0&&(s===void 0?(s=0,a=1):(a=s,s=void 0)),a.length){var o,c=a.length;s||(s=createTypedArray("float32",c));var d=createTypedArray("float32",c),b=BMMath.random();for(o=0;o<c;o+=1)d[o]=s[o]+b*(a[o]-s[o]);return d}return s===void 0&&(s=0),s+BMMath.random()*(a-s)}function createPath(s,a,o,c){var d,b=s.length,$=shapePool.newElement();$.setPathData(!!c,b);var j,_e,et=[0,0];for(d=0;d<b;d+=1)j=a&&a[d]?a[d]:et,_e=o&&o[d]?o[d]:et,$.setTripleAt(s[d][0],s[d][1],_e[0]+s[d][0],_e[1]+s[d][1],j[0]+s[d][0],j[1]+s[d][1],d,!0);return $}function initiateExpression(elem,data,property){function noOp(s){return s}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function(s,a){var o,c,d=this.pv.length?this.pv.length:1,b=createTypedArray("float32",d),$=Math.floor(5*time);for(o=0,c=0;o<$;){for(c=0;c<d;c+=1)b[c]+=-a+2*a*BMMath.random();o+=1}var j=5*time,_e=j-Math.floor(j),et=createTypedArray("float32",d);if(d>1){for(c=0;c<d;c+=1)et[c]=this.pv[c]+b[c]+(-a+2*a*BMMath.random())*_e;return et}return this.pv+b[0]+(-a+2*a*BMMath.random())*_e}).bind(this);function loopInDuration(s,a){return loopIn(s,a,!0)}function loopOutDuration(s,a){return loopOut(s,a,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(s,a){var o=[a[0]-s[0],a[1]-s[1],a[2]-s[2]],c=Math.atan2(o[0],Math.sqrt(o[1]*o[1]+o[2]*o[2]))/degToRads;return[-Math.atan2(o[1],o[2])/degToRads,c,0]}function easeOut(s,a,o,c,d){return applyEase(easeOutBez,s,a,o,c,d)}function easeIn(s,a,o,c,d){return applyEase(easeInBez,s,a,o,c,d)}function ease(s,a,o,c,d){return applyEase(easeInOutBez,s,a,o,c,d)}function applyEase(s,a,o,c,d,b){d===void 0?(d=o,b=c):a=(a-o)/(c-o),a>1?a=1:a<0&&(a=0);var $=s(a);if($bm_isInstanceOfArray(d)){var j,_e=d.length,et=createTypedArray("float32",_e);for(j=0;j<_e;j+=1)et[j]=(b[j]-d[j])*$+d[j];return et}return(b-d)*$+d}function nearestKey(s){var a,o,c,d=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(o=-1,(s*=elem.comp.globalData.frameRate)<data.k[0].t)o=1,c=data.k[0].t;else{for(a=0;a<d-1;a+=1){if(s===data.k[a].t){o=a+1,c=data.k[a].t;break}if(s>data.k[a].t&&s<data.k[a+1].t){s-data.k[a].t>data.k[a+1].t-s?(o=a+2,c=data.k[a+1].t):(o=a+1,c=data.k[a].t);break}}o===-1&&(o=a+1,c=data.k[a].t)}else o=0,c=0;var b={};return b.index=o,b.time=c/elem.comp.globalData.frameRate,b}function key(s){var a,o,c;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+s);s-=1,a={time:data.k[s].t/elem.comp.globalData.frameRate,value:[]};var d=Object.prototype.hasOwnProperty.call(data.k[s],"s")?data.k[s].s:data.k[s-1].e;for(c=d.length,o=0;o<c;o+=1)a[o]=d[o],a.value[o]=d[o];return a}function framesToTime(s,a){return a||(a=elem.comp.globalData.frameRate),s/a}function timeToFrames(s,a){return s||s===0||(s=time),a||(a=elem.comp.globalData.frameRate),s*a}function seedRandom(s){BMMath.seedrandom(randSeed+s)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(s,a){return typeof value=="string"?a===void 0?value.substring(s):value.substring(s,a):""}function substr(s,a){return typeof value=="string"?a===void 0?value.substr(s):value.substr(s,a):""}function posterizeTime(s){time=s===0?0:Math.floor(time*s)/s,value=valueAtTime(time)}var index=elem.data.ind;!elem.hierarchy||elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(s){return value=s,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(s,a,o){a.x&&(o.k=!0,o.x=!0,o.initiateExpression=ExpressionManager.initiateExpression,o.effectsSequence.push(o.initiateExpression(s,a,o).bind(o)))},getSpeedAtTime:function(s){var a=this.getValueAtTime(s),o=this.getValueAtTime(s+-.01),c=0;if(a.length){var d;for(d=0;d<a.length;d+=1)c+=Math.pow(o[d]-a[d],2);c=100*Math.sqrt(c)}else c=0;return c},getVelocityAtTime:function(s){if(this.vel!==void 0)return this.vel;var a,o,c=this.getValueAtTime(s),d=this.getValueAtTime(s+-.001);if(c.length)for(a=createTypedArray("float32",c.length),o=0;o<c.length;o+=1)a[o]=(d[o]-c[o])/-.001;else a=(d-c)/-.001;return a},getValueAtTime:function(s){return s*=this.elem.globalData.frameRate,(s-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<s?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(s,this._cachingAtTime),this._cachingAtTime.lastFrame=s),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(s){this.propertyGroup=s}};function addPropertyDecorator(){function s(rt,nt,it){if(!this.k||!this.keyframes)return this.pv;rt=rt?rt.toLowerCase():"";var at,ct,st,ot,ht,dt=this.comp.renderedFrame,ft=this.keyframes,mt=ft[ft.length-1].t;if(dt<=mt)return this.pv;if(it?ct=mt-(at=nt?Math.abs(mt-this.elem.comp.globalData.frameRate*nt):Math.max(0,mt-this.elem.data.ip)):((!nt||nt>ft.length-1)&&(nt=ft.length-1),at=mt-(ct=ft[ft.length-1-nt].t)),rt==="pingpong"){if(Math.floor((dt-ct)/at)%2!=0)return this.getValueAtTime((at-(dt-ct)%at+ct)/this.comp.globalData.frameRate,0)}else{if(rt==="offset"){var gt=this.getValueAtTime(ct/this.comp.globalData.frameRate,0),vt=this.getValueAtTime(mt/this.comp.globalData.frameRate,0),yt=this.getValueAtTime(((dt-ct)%at+ct)/this.comp.globalData.frameRate,0),Et=Math.floor((dt-ct)/at);if(this.pv.length){for(ot=(ht=new Array(gt.length)).length,st=0;st<ot;st+=1)ht[st]=(vt[st]-gt[st])*Et+yt[st];return ht}return(vt-gt)*Et+yt}if(rt==="continue"){var St=this.getValueAtTime(mt/this.comp.globalData.frameRate,0),Ct=this.getValueAtTime((mt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ot=(ht=new Array(St.length)).length,st=0;st<ot;st+=1)ht[st]=St[st]+(St[st]-Ct[st])*((dt-mt)/this.comp.globalData.frameRate)/5e-4;return ht}return St+(dt-mt)/.001*(St-Ct)}}return this.getValueAtTime(((dt-ct)%at+ct)/this.comp.globalData.frameRate,0)}function a(rt,nt,it){if(!this.k)return this.pv;rt=rt?rt.toLowerCase():"";var at,ct,st,ot,ht,dt=this.comp.renderedFrame,ft=this.keyframes,mt=ft[0].t;if(dt>=mt)return this.pv;if(it?ct=mt+(at=nt?Math.abs(this.elem.comp.globalData.frameRate*nt):Math.max(0,this.elem.data.op-mt)):((!nt||nt>ft.length-1)&&(nt=ft.length-1),at=(ct=ft[nt].t)-mt),rt==="pingpong"){if(Math.floor((mt-dt)/at)%2==0)return this.getValueAtTime(((mt-dt)%at+mt)/this.comp.globalData.frameRate,0)}else{if(rt==="offset"){var gt=this.getValueAtTime(mt/this.comp.globalData.frameRate,0),vt=this.getValueAtTime(ct/this.comp.globalData.frameRate,0),yt=this.getValueAtTime((at-(mt-dt)%at+mt)/this.comp.globalData.frameRate,0),Et=Math.floor((mt-dt)/at)+1;if(this.pv.length){for(ot=(ht=new Array(gt.length)).length,st=0;st<ot;st+=1)ht[st]=yt[st]-(vt[st]-gt[st])*Et;return ht}return yt-(vt-gt)*Et}if(rt==="continue"){var St=this.getValueAtTime(mt/this.comp.globalData.frameRate,0),Ct=this.getValueAtTime((mt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ot=(ht=new Array(St.length)).length,st=0;st<ot;st+=1)ht[st]=St[st]+(St[st]-Ct[st])*(mt-dt)/.001;return ht}return St+(St-Ct)*(mt-dt)/.001}}return this.getValueAtTime((at-((mt-dt)%at+mt))/this.comp.globalData.frameRate,0)}function o(rt,nt){if(!this.k)return this.pv;if(rt=.5*(rt||.4),(nt=Math.floor(nt||5))<=1)return this.pv;var it,at,ct=this.comp.renderedFrame/this.comp.globalData.frameRate,st=ct-rt,ot=nt>1?(ct+rt-st)/(nt-1):1,ht=0,dt=0;for(it=this.pv.length?createTypedArray("float32",this.pv.length):0;ht<nt;){if(at=this.getValueAtTime(st+ht*ot),this.pv.length)for(dt=0;dt<this.pv.length;dt+=1)it[dt]+=at[dt];else it+=at;ht+=1}if(this.pv.length)for(dt=0;dt<this.pv.length;dt+=1)it[dt]/=nt;else it/=nt;return it}function c(rt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var nt=this._transformCachingAtTime.v;if(nt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var it=this.a.getValueAtTime(rt);nt.translate(-it[0]*this.a.mult,-it[1]*this.a.mult,it[2]*this.a.mult)}if(this.appliedTransformations<2){var at=this.s.getValueAtTime(rt);nt.scale(at[0]*this.s.mult,at[1]*this.s.mult,at[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var ct=this.sk.getValueAtTime(rt),st=this.sa.getValueAtTime(rt);nt.skewFromAxis(-ct*this.sk.mult,st*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ot=this.r.getValueAtTime(rt);nt.rotate(-ot*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var ht=this.rz.getValueAtTime(rt),dt=this.ry.getValueAtTime(rt),ft=this.rx.getValueAtTime(rt),mt=this.or.getValueAtTime(rt);nt.rotateZ(-ht*this.rz.mult).rotateY(dt*this.ry.mult).rotateX(ft*this.rx.mult).rotateZ(-mt[2]*this.or.mult).rotateY(mt[1]*this.or.mult).rotateX(mt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var gt=this.px.getValueAtTime(rt),vt=this.py.getValueAtTime(rt);if(this.data.p.z){var yt=this.pz.getValueAtTime(rt);nt.translate(gt*this.px.mult,vt*this.py.mult,-yt*this.pz.mult)}else nt.translate(gt*this.px.mult,vt*this.py.mult,0)}else{var Et=this.p.getValueAtTime(rt);nt.translate(Et[0]*this.p.mult,Et[1]*this.p.mult,-Et[2]*this.p.mult)}return nt}function d(){return this.v.clone(new Matrix)}var b=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(rt,nt,it){var at=b(rt,nt,it);return at.dynamicProperties.length?at.getValueAtTime=c.bind(at):at.getValueAtTime=d.bind(at),at.setGroupProperty=expressionHelpers.setGroupProperty,at};var $=PropertyFactory.getProp;PropertyFactory.getProp=function(rt,nt,it,at,ct){var st=$(rt,nt,it,at,ct);st.kf?st.getValueAtTime=expressionHelpers.getValueAtTime.bind(st):st.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(st),st.setGroupProperty=expressionHelpers.setGroupProperty,st.loopOut=s,st.loopIn=a,st.smooth=o,st.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(st),st.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(st),st.numKeys=nt.a===1?nt.k.length:0,st.propertyIndex=nt.ix;var ot=0;return it!==0&&(ot=createTypedArray("float32",nt.a===1?nt.k[0].s.length:nt.k.length)),st._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ot},expressionHelpers.searchExpressions(rt,nt,st),st.k&&ct.addDynamicProperty(st),st};var j=ShapePropertyFactory.getConstructorFunction(),_e=ShapePropertyFactory.getKeyframedConstructorFunction();function et(){}et.prototype={vertices:function(rt,nt){this.k&&this.getValue();var it,at=this.v;nt!==void 0&&(at=this.getValueAtTime(nt,0));var ct=at._length,st=at[rt],ot=at.v,ht=createSizedArray(ct);for(it=0;it<ct;it+=1)ht[it]=rt==="i"||rt==="o"?[st[it][0]-ot[it][0],st[it][1]-ot[it][1]]:[st[it][0],st[it][1]];return ht},points:function(rt){return this.vertices("v",rt)},inTangents:function(rt){return this.vertices("i",rt)},outTangents:function(rt){return this.vertices("o",rt)},isClosed:function(){return this.v.c},pointOnPath:function(rt,nt){var it=this.v;nt!==void 0&&(it=this.getValueAtTime(nt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(it));for(var at,ct=this._segmentsLength,st=ct.lengths,ot=ct.totalLength*rt,ht=0,dt=st.length,ft=0;ht<dt;){if(ft+st[ht].addedLength>ot){var mt=ht,gt=it.c&&ht===dt-1?0:ht+1,vt=(ot-ft)/st[ht].addedLength;at=bez.getPointInSegment(it.v[mt],it.v[gt],it.o[mt],it.i[gt],vt,st[ht]);break}ft+=st[ht].addedLength,ht+=1}return at||(at=it.c?[it.v[0][0],it.v[0][1]]:[it.v[it._length-1][0],it.v[it._length-1][1]]),at},vectorOnPath:function(rt,nt,it){rt==1?rt=this.v.c:rt==0&&(rt=.999);var at=this.pointOnPath(rt,nt),ct=this.pointOnPath(rt+.001,nt),st=ct[0]-at[0],ot=ct[1]-at[1],ht=Math.sqrt(Math.pow(st,2)+Math.pow(ot,2));return ht===0?[0,0]:it==="tangent"?[st/ht,ot/ht]:[-ot/ht,st/ht]},tangentOnPath:function(rt,nt){return this.vectorOnPath(rt,nt,"tangent")},normalOnPath:function(rt,nt){return this.vectorOnPath(rt,nt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([et],j),extendPrototype([et],_e),_e.prototype.getValueAtTime=function(rt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),rt*=this.elem.globalData.frameRate,(rt-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<rt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=rt,this.interpolateShape(rt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},_e.prototype.initiateExpression=ExpressionManager.initiateExpression;var tt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(rt,nt,it,at,ct){var st=tt(rt,nt,it,at,ct);return st.propertyIndex=nt.ix,st.lock=!1,it===3?expressionHelpers.searchExpressions(rt,nt.pt,st):it===4&&expressionHelpers.searchExpressions(rt,nt.ks,st),st.k&&rt.addDynamicProperty(st),st}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(s,a){var o=this.calculateExpression(a);if(s.t!==o){var c={};return this.copyData(c,s),c.t=o.toString(),c.__complete=!1,c}return s},TextProperty.prototype.searchProperty=function(){var s=this.searchKeyframes(),a=this.searchExpressions();return this.kf=s||a,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(s,a){var o,c,d=createNS("feMerge");for(d.setAttribute("result",s),c=0;c<a.length;c+=1)(o=createNS("feMergeNode")).setAttribute("in",a[c]),d.appendChild(o),d.appendChild(o);return d}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(s,a,o,c,d){this.filterManager=a;var b=createNS("feColorMatrix");b.setAttribute("type","matrix"),b.setAttribute("color-interpolation-filters","linearRGB"),b.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=b,b.setAttribute("result",c+"_tint_1"),s.appendChild(b),(b=createNS("feColorMatrix")).setAttribute("type","matrix"),b.setAttribute("color-interpolation-filters","sRGB"),b.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),b.setAttribute("result",c+"_tint_2"),s.appendChild(b),this.matrixFilter=b;var $=this.createMergeNode(c,[d,c+"_tint_1",c+"_tint_2"]);s.appendChild($)}function SVGFillFilter(s,a,o,c){this.filterManager=a;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),d.setAttribute("result",c),s.appendChild(d),this.matrixFilter=d}function SVGStrokeEffect(s,a,o){this.initialized=!1,this.filterManager=a,this.elem=o,this.paths=[]}function SVGTritoneFilter(s,a,o,c){this.filterManager=a;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","linearRGB"),d.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.appendChild(d);var b=createNS("feComponentTransfer");b.setAttribute("color-interpolation-filters","sRGB"),b.setAttribute("result",c),this.matrixFilter=b;var $=createNS("feFuncR");$.setAttribute("type","table"),b.appendChild($),this.feFuncR=$;var j=createNS("feFuncG");j.setAttribute("type","table"),b.appendChild(j),this.feFuncG=j;var _e=createNS("feFuncB");_e.setAttribute("type","table"),b.appendChild(_e),this.feFuncB=_e,s.appendChild(b)}function SVGProLevelsFilter(s,a,o,c){this.filterManager=a;var d=this.filterManager.effectElements,b=createNS("feComponentTransfer");(d[10].p.k||d[10].p.v!==0||d[11].p.k||d[11].p.v!==1||d[12].p.k||d[12].p.v!==1||d[13].p.k||d[13].p.v!==0||d[14].p.k||d[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",b)),(d[17].p.k||d[17].p.v!==0||d[18].p.k||d[18].p.v!==1||d[19].p.k||d[19].p.v!==1||d[20].p.k||d[20].p.v!==0||d[21].p.k||d[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",b)),(d[24].p.k||d[24].p.v!==0||d[25].p.k||d[25].p.v!==1||d[26].p.k||d[26].p.v!==1||d[27].p.k||d[27].p.v!==0||d[28].p.k||d[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",b)),(d[31].p.k||d[31].p.v!==0||d[32].p.k||d[32].p.v!==1||d[33].p.k||d[33].p.v!==1||d[34].p.k||d[34].p.v!==0||d[35].p.k||d[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",b)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(b.setAttribute("color-interpolation-filters","sRGB"),s.appendChild(b)),(d[3].p.k||d[3].p.v!==0||d[4].p.k||d[4].p.v!==1||d[5].p.k||d[5].p.v!==1||d[6].p.k||d[6].p.v!==0||d[7].p.k||d[7].p.v!==1)&&((b=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),b.setAttribute("result",c),s.appendChild(b),this.feFuncRComposed=this.createFeFunc("feFuncR",b),this.feFuncGComposed=this.createFeFunc("feFuncG",b),this.feFuncBComposed=this.createFeFunc("feFuncB",b))}function SVGDropShadowEffect(s,a,o,c,d){var b=a.container.globalData.renderConfig.filterSize,$=a.data.fs||b;s.setAttribute("x",$.x||b.x),s.setAttribute("y",$.y||b.y),s.setAttribute("width",$.width||b.width),s.setAttribute("height",$.height||b.height),this.filterManager=a;var j=createNS("feGaussianBlur");j.setAttribute("in","SourceAlpha"),j.setAttribute("result",c+"_drop_shadow_1"),j.setAttribute("stdDeviation","0"),this.feGaussianBlur=j,s.appendChild(j);var _e=createNS("feOffset");_e.setAttribute("dx","25"),_e.setAttribute("dy","0"),_e.setAttribute("in",c+"_drop_shadow_1"),_e.setAttribute("result",c+"_drop_shadow_2"),this.feOffset=_e,s.appendChild(_e);var et=createNS("feFlood");et.setAttribute("flood-color","#00ff00"),et.setAttribute("flood-opacity","1"),et.setAttribute("result",c+"_drop_shadow_3"),this.feFlood=et,s.appendChild(et);var tt=createNS("feComposite");tt.setAttribute("in",c+"_drop_shadow_3"),tt.setAttribute("in2",c+"_drop_shadow_2"),tt.setAttribute("operator","in"),tt.setAttribute("result",c+"_drop_shadow_4"),s.appendChild(tt);var rt=this.createMergeNode(c,[c+"_drop_shadow_4",d]);s.appendChild(rt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,o=this.filterManager.effectElements[1].p.v,c=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+c+" 0"),this.matrixFilter.setAttribute("values",o[0]-a[0]+" 0 0 0 "+a[0]+" "+(o[1]-a[1])+" 0 0 0 "+a[1]+" "+(o[2]-a[2])+" 0 0 0 "+a[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[2].p.v,o=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+a[0]+" 0 0 0 0 "+a[1]+" 0 0 0 0 "+a[2]+" 0 0 0 "+o+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var s,a,o,c,d=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(c=this.elem.maskManager.masksProperties.length,o=0):c=(o=this.filterManager.effectElements[0].p.v-1)+1,(a=createNS("g")).setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-dashoffset",1);o<c;o+=1)s=createNS("path"),a.appendChild(s),this.paths.push({p:s,m:o});if(this.filterManager.effectElements[10].p.v===3){var b=createNS("mask"),$=createElementID();b.setAttribute("id",$),b.setAttribute("mask-type","alpha"),b.appendChild(a),this.elem.globalData.defs.appendChild(b);var j=createNS("g");for(j.setAttribute("mask","url("+getLocationHref()+"#"+$+")");d[0];)j.appendChild(d[0]);this.elem.layerElement.appendChild(j),this.masker=b,a.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(d=this.elem.layerElement.children||this.elem.layerElement.childNodes;d.length;)this.elem.layerElement.removeChild(d[0]);this.elem.layerElement.appendChild(a),this.elem.layerElement.removeAttribute("mask"),a.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=a},SVGStrokeEffect.prototype.renderFrame=function(s){var a;this.initialized||this.initialize();var o,c,d=this.paths.length;for(a=0;a<d;a+=1)if(this.paths[a].m!==-1&&(o=this.elem.maskManager.viewData[this.paths[a].m],c=this.paths[a].p,(s||this.filterManager._mdf||o.prop._mdf)&&c.setAttribute("d",o.lastPath),s||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||o.prop._mdf)){var b;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var $=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),j=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),_e=c.getTotalLength();b="0 0 0 "+_e*$+" ";var et,tt=_e*(j-$),rt=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,nt=Math.floor(tt/rt);for(et=0;et<nt;et+=1)b+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";b+="0 "+10*_e+" 0 0"}else b="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;c.setAttribute("stroke-dasharray",b)}if((s||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(s||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(s||this.filterManager.effectElements[3].p._mdf)){var it=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*it[0])+","+bmFloor(255*it[1])+","+bmFloor(255*it[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,o=this.filterManager.effectElements[1].p.v,c=this.filterManager.effectElements[2].p.v,d=c[0]+" "+o[0]+" "+a[0],b=c[1]+" "+o[1]+" "+a[1],$=c[2]+" "+o[2]+" "+a[2];this.feFuncR.setAttribute("tableValues",d),this.feFuncG.setAttribute("tableValues",b),this.feFuncB.setAttribute("tableValues",$)}},SVGProLevelsFilter.prototype.createFeFunc=function(s,a){var o=createNS(s);return o.setAttribute("type","table"),a.appendChild(o),o},SVGProLevelsFilter.prototype.getTableValue=function(s,a,o,c,d){for(var b,$,j=0,_e=Math.min(s,a),et=Math.max(s,a),tt=Array.call(null,{length:256}),rt=0,nt=d-c,it=a-s;j<=256;)$=(b=j/256)<=_e?it<0?d:c:b>=et?it<0?c:d:c+nt*Math.pow((b-s)/it,1/o),tt[rt]=$,rt+=1,j+=256/255;return tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a,o=this.filterManager.effectElements;this.feFuncRComposed&&(s||o[3].p._mdf||o[4].p._mdf||o[5].p._mdf||o[6].p._mdf||o[7].p._mdf)&&(a=this.getTableValue(o[3].p.v,o[4].p.v,o[5].p.v,o[6].p.v,o[7].p.v),this.feFuncRComposed.setAttribute("tableValues",a),this.feFuncGComposed.setAttribute("tableValues",a),this.feFuncBComposed.setAttribute("tableValues",a)),this.feFuncR&&(s||o[10].p._mdf||o[11].p._mdf||o[12].p._mdf||o[13].p._mdf||o[14].p._mdf)&&(a=this.getTableValue(o[10].p.v,o[11].p.v,o[12].p.v,o[13].p.v,o[14].p.v),this.feFuncR.setAttribute("tableValues",a)),this.feFuncG&&(s||o[17].p._mdf||o[18].p._mdf||o[19].p._mdf||o[20].p._mdf||o[21].p._mdf)&&(a=this.getTableValue(o[17].p.v,o[18].p.v,o[19].p.v,o[20].p.v,o[21].p.v),this.feFuncG.setAttribute("tableValues",a)),this.feFuncB&&(s||o[24].p._mdf||o[25].p._mdf||o[26].p._mdf||o[27].p._mdf||o[28].p._mdf)&&(a=this.getTableValue(o[24].p.v,o[25].p.v,o[26].p.v,o[27].p.v,o[28].p.v),this.feFuncB.setAttribute("tableValues",a)),this.feFuncA&&(s||o[31].p._mdf||o[32].p._mdf||o[33].p._mdf||o[34].p._mdf||o[35].p._mdf)&&(a=this.getTableValue(o[31].p.v,o[32].p.v,o[33].p.v,o[34].p.v,o[35].p.v),this.feFuncA.setAttribute("tableValues",a))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){if((s||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),s||this.filterManager.effectElements[0].p._mdf){var a=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])))}if((s||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),s||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var o=this.filterManager.effectElements[3].p.v,c=(this.filterManager.effectElements[2].p.v-90)*degToRads,d=o*Math.cos(c),b=o*Math.sin(c);this.feOffset.setAttribute("dx",d),this.feOffset.setAttribute("dy",b)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(s,a,o){this.initialized=!1,this.filterManager=a,this.filterElem=s,this.elem=o,o.matteElement=createNS("g"),o.matteElement.appendChild(o.layerElement),o.matteElement.appendChild(o.transformedElement),o.baseElement=o.matteElement}function SVGGaussianBlurEffect(s,a,o,c){s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),this.filterManager=a;var d=createNS("feGaussianBlur");d.setAttribute("result",c),s.appendChild(d),this.feGaussianBlur=d}return SVGMatte3Effect.prototype.findSymbol=function(s){for(var a=0,o=_svgMatteSymbols.length;a<o;){if(_svgMatteSymbols[a]===s)return _svgMatteSymbols[a];a+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(s,a){var o=s.layerElement.parentNode;if(o){for(var c,d=o.children,b=0,$=d.length;b<$&&d[b]!==s.layerElement;)b+=1;b<=$-2&&(c=d[b+1]);var j=createNS("use");j.setAttribute("href","#"+a),c?o.insertBefore(j,c):o.appendChild(j)}},SVGMatte3Effect.prototype.setElementAsMask=function(s,a){if(!this.findSymbol(a)){var o=createElementID(),c=createNS("mask");c.setAttribute("id",a.layerId),c.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(a);var d=s.globalData.defs;d.appendChild(c);var b=createNS("symbol");b.setAttribute("id",o),this.replaceInParent(a,o),b.appendChild(a.layerElement),d.appendChild(b);var $=createNS("use");$.setAttribute("href","#"+o),c.appendChild($),a.data.hd=!1,a.show()}s.setMatte(a.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var s=this.filterManager.effectElements[0].p.v,a=this.elem.comp.elements,o=0,c=a.length;o<c;)a[o]&&a[o].data.ind===s&&this.setElementAsMask(this.elem,a[o]),o+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var a=.3*this.filterManager.effectElements[0].p.v,o=this.filterManager.effectElements[1].p.v,c=o==3?0:a,d=o==2?0:a;this.feGaussianBlur.setAttribute("stdDeviation",c+" "+d);var b=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",b)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})}),REACT_LOTTIE_PLAYER_VERSION="3.5.3",LOTTIE_WEB_VERSION="^5.10.2",PlayerState,PlayerEvent;function parseSrc(s){if(typeof s=="object")return s;try{return JSON.parse(s)}catch{}try{return new URL(s).toString()}catch{}return s}(function(s){s.Loading="loading",s.Playing="playing",s.Paused="paused",s.Stopped="stopped",s.Frozen="frozen",s.Error="error"})(PlayerState||(PlayerState={})),function(s){s.Load="load",s.InstanceSaved="instanceSaved",s.Error="error",s.Ready="ready",s.Play="play",s.Pause="pause",s.Stop="stop",s.Freeze="freeze",s.Loop="loop",s.Complete="complete",s.Frame="frame"}(PlayerEvent||(PlayerEvent={}));var defaultOptions$1={clearCanvas:!1,hideOnTransparent:!0,progressiveLoad:!0},Player=function(s){function a(o){var c=s.call(this,o)||this;return c.container=null,c.unmounted=!1,c.handleBgChange=function(d){c.setState({background:d})},c.triggerDownload=function(d,b){var $=document.createElement("a");$.href=d,$.download=b,document.body.appendChild($),$.click(),document.body.removeChild($)},c.snapshot=function(d){var b;d===void 0&&(d=!0);var $=c.props.id?c.props.id:"lottie",j=document.getElementById($);if(c.props.renderer==="svg"){if(j){var _e=j.querySelector("svg");if(_e){var et=new XMLSerializer().serializeToString(_e);b="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(et)}}d&&c.triggerDownload(b,"snapshot.svg")}else if(c.props.renderer==="canvas"){if(j){var tt=j.querySelector("canvas");tt&&(b=tt.toDataURL("image/png"))}d&&c.triggerDownload(b,"snapshot.png")}return b},typeof window<"u"&&(window.lottie=lottie),c.state={animationData:null,background:"transparent",containerRef:reactExports.createRef(),debug:!0,instance:null,playerState:PlayerState.Loading,seeker:0},c}return __extends(a,s),a.getDerivedStateFromProps=function(o,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){return o.background!==c.background?[2,{background:o.background}]:[2,null]})})},a.prototype.getVersions=function(){return{lottieWebVersion:LOTTIE_WEB_VERSION,lottiePlayerVersion:REACT_LOTTIE_PLAYER_VERSION}},a.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return this.unmounted?[3,2]:[4,this.createLottie()];case 1:o.sent(),o.label=2;case 2:return[2]}})})},a.prototype.componentWillUnmount=function(){this.unmounted=!0,this.state.instance&&this.state.instance.destroy()},a.prototype.componentDidUpdate=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(c){switch(c.label){case 0:return this.props.src===o.src?[3,2]:(this.state.instance&&this.state.instance.destroy(),[4,this.createLottie()]);case 1:c.sent(),c.label=2;case 2:return[2]}})})},a.prototype.render=function(){var o=this,c=this.props,d=c.children,b=c.loop,$=c.style,j=c.onBackgroundChange,_e=c.className,et=this.state,tt=et.animationData,rt=et.instance,nt=et.playerState,it=et.seeker,at=et.debug,ct=et.background;return reactExports.createElement("div",{className:"lf-player-container"},this.state.playerState===PlayerState.Error?reactExports.createElement("div",{className:"lf-error"},reactExports.createElement("span",{"aria-label":"error-symbol",role:"img"},"")):reactExports.createElement("div",{id:this.props.id?this.props.id:"lottie",ref:function(st){return o.container=st},style:__assign$2({background:ct,margin:"0 auto",outline:"none",overflow:"hidden"},$),className:_e}),reactExports.Children.map(d,function(st){return reactExports.isValidElement(st)?reactExports.cloneElement(st,{animationData:tt,background:ct,debug:at,instance:rt,loop:b,pause:function(){return o.pause()},play:function(){return o.play()},playerState:nt,seeker:it,setBackground:function(ot){o.setState({background:ot}),typeof j=="function"&&j(ot)},setSeeker:function(ot,ht){return o.setSeeker(ot,ht)},stop:function(){return o.stop()},toggleDebug:function(){return o.toggleDebug()},setLoop:function(ot){return o.setLoop(ot)},colorChangedEvent:function(ot){o.handleBgChange(ot)},snapshot:function(){o.snapshot()}}):null}))},a.prototype.toggleDebug=function(){this.setState({debug:!this.state.debug})},a.prototype.createLottie=function(){return __awaiter(this,void 0,void 0,function(){var o,c,d,b,$,j,_e,et,tt,rt,nt,it,at,ct,st=this;return __generator(this,function(ot){switch(ot.label){case 0:if(o=this.props,c=o.autoplay,d=o.direction,b=o.loop,$=o.lottieRef,j=o.renderer,_e=o.speed,et=o.src,tt=o.background,rt=o.rendererSettings,nt=o.hover,it=this.state.instance,!et||!this.container)return[2];ot.label=1;case 1:return ot.trys.push([1,5,,6]),typeof(at=parseSrc(et))!="string"?[3,4]:[4,fetch(at).catch(function(){throw st.setState({playerState:PlayerState.Error}),st.triggerEvent(PlayerEvent.Error),new Error("@LottieFiles/lottie-react: Animation data could not be fetched.")})];case 2:return[4,ot.sent().json().catch(function(){throw st.setState({playerState:PlayerState.Error}),st.triggerEvent(PlayerEvent.Error),new Error("@LottieFiles/lottie-react: Animation data could not be fetched.")})];case 3:at=ot.sent(),ot.label=4;case 4:return it&&it.destroy(),ct=lottie.loadAnimation({rendererSettings:rt||defaultOptions$1,animationData:at,autoplay:c||!1,container:this.container,loop:b||!1,renderer:j}),_e&&ct.setSpeed(_e),this.setState({animationData:at}),this.setState({instance:ct},function(){st.triggerEvent(PlayerEvent.InstanceSaved),typeof $=="function"&&$(ct),c&&st.play()}),ct.addEventListener("enterFrame",function(){st.triggerEvent(PlayerEvent.Frame),st.setState({seeker:Math.floor(ct.currentFrame)})}),ct.addEventListener("DOMLoaded",function(){st.triggerEvent(PlayerEvent.Load)}),ct.addEventListener("data_ready",function(){st.triggerEvent(PlayerEvent.Ready)}),ct.addEventListener("data_failed",function(){st.setState({playerState:PlayerState.Error}),st.triggerEvent(PlayerEvent.Error)}),ct.addEventListener("loopComplete",function(){st.triggerEvent(PlayerEvent.Loop)}),ct.addEventListener("complete",function(){st.triggerEvent(PlayerEvent.Complete),st.setState({playerState:PlayerState.Paused}),st.props.keepLastFrame&&!st.props.loop||st.setSeeker(0)}),this.container&&(this.container.addEventListener("mouseenter",function(){nt&&st.state.playerState!==PlayerState.Playing&&(st.props.keepLastFrame&&st.stop(),st.play())}),this.container.addEventListener("mouseleave",function(){nt&&st.state.playerState===PlayerState.Playing&&st.stop()})),_e&&this.setPlayerSpeed(_e),d&&this.setPlayerDirection(d),tt&&this.setState({background:tt}),[3,6];case 5:return ot.sent(),this.setState({playerState:PlayerState.Error}),this.triggerEvent(PlayerEvent.Error),[3,6];case 6:return[2]}})})},a.prototype.play=function(){var o=this.state.instance;o&&(this.triggerEvent(PlayerEvent.Play),o.play(),this.setState({playerState:PlayerState.Playing}))},a.prototype.pause=function(){var o=this.state.instance;o&&(this.triggerEvent(PlayerEvent.Pause),o.pause(),this.setState({playerState:PlayerState.Paused}))},a.prototype.stop=function(){var o=this.state.instance;o&&(this.triggerEvent(PlayerEvent.Stop),o.stop(),this.setState({playerState:PlayerState.Stopped}))},a.prototype.setPlayerSpeed=function(o){var c=this.state.instance;c&&c.setSpeed(o)},a.prototype.setPlayerDirection=function(o){var c=this.state.instance;c&&c.setDirection(o)},a.prototype.setSeeker=function(o,c){c===void 0&&(c=!1);var d=this.state,b=d.instance,$=d.playerState;b&&(c&&$===PlayerState.Playing?b.goToAndPlay(o,!0):(b.goToAndStop(o,!0),this.triggerEvent(PlayerEvent.Pause),this.setState({playerState:PlayerState.Paused})))},a.prototype.setLoop=function(o){var c=this.state.instance;c&&(c.loop=o,this.setState({instance:c}))},a.prototype.triggerEvent=function(o){var c=this.props.onEvent;c&&c(o)},a.defaultProps={loop:!1},a}(reactExports.Component);function styleInject(s,a){a===void 0&&(a={});var o=a.insertAt;if(s&&typeof document<"u"){var c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",o==="top"&&c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d),d.styleSheet?d.styleSheet.cssText=s:d.appendChild(document.createTextNode(s))}}var css_248z=`.lf-progress {
  -webkit-appearance: none;
  -moz-apperance: none;
  width: 100%;
  /* margin: 0 10px; */
  height: 4px;
  border-radius: 3px;
  cursor: pointer;
}
.lf-progress:focus {
  outline: none;
  border: none;
}
.lf-progress::-moz-range-track {
  cursor: pointer;
  background: none;
  border: none;
  outline: none;
}
.lf-progress::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-moz-range-thumb {
  -moz-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-ms-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.lf-progress::-ms-fill-lower {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-fill-upper {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-thumb {
  border: 0;
  height: 15px;
  width: 15px;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress:focus::-ms-fill-lower {
  background: #ccc;
}
.lf-progress:focus::-ms-fill-upper {
  background: #ccc;
}
.lf-player-container :focus {
  outline: 0;
}
.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  opacity: 1;
  visibility: visible;
  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-player-btn-container {
  display: flex;
  align-items: center;
}
.lf-player-btn {
  cursor: pointer;
  fill: #999;
  width: 14px;
}

.lf-player-btn.active {
  fill: #555;
}

.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  background-color: #ffffff;
  opacity: 1;

  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
  padding: 10px;
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-arrow {
  position: absolute;
  z-index: -1;
  content: '';
  bottom: -9px;
  border-style: solid;
  border-width: 10px 10px 0px 10px;
}

.lf-left-align,
.lf-left-align .lfarrow {
  left: 0;
  right: unset;
}

.lf-right-align,
.lf-right-align .lf-arrow {
  right: 0;
  left: unset;
}

.lf-text-input {
  border: 1px #ccc solid;
  border-radius: 5px;
  padding: 3px;
  width: 60px;
  margin: 0;
}

.lf-color-picker {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 90px;
}

.lf-color-selectors {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.lf-color-component {
  display: flex;
  flex-direction: row;
  font-size: 12px;
  align-items: center;
  justify-content: center;
}

.lf-color-component strong {
  width: 40px;
}

.lf-color-component input[type='range'] {
  margin: 0 0 0 10px;
}

.lf-color-component input[type='number'] {
  width: 50px;
  margin: 0 0 0 10px;
}

.lf-color-preview {
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding-left: 5px;
}

.lf-preview {
  height: 60px;
  width: 60px;
}

.lf-popover-snapshot {
  width: 150px;
}
.lf-popover-snapshot h5 {
  margin: 5px 0 10px 0;
  font-size: 0.75rem;
}
.lf-popover-snapshot a {
  display: block;
  text-decoration: none;
}
.lf-popover-snapshot a:before {
  content: '';
  margin-right: 5px;
}
.lf-popover-snapshot .lf-note {
  display: block;
  margin-top: 10px;
  color: #999;
}
.lf-player-controls > div {
  margin-right: 5px;
  margin-left: 5px;
}
.lf-player-controls > div:first-child {
  margin-left: 0px;
}
.lf-player-controls > div:last-child {
  margin-right: 0px;
}
`;styleInject(css_248z);var ColorPicker=function(s){function a(){var o=s!==null&&s.apply(this,arguments)||this;return o.state={red:0,green:0,blue:0,rgba:null,hex:"#000000",colorComponents:[]},o.handleChange=function(c,d){if(c==="r"){var b="#"+(256|d).toString(16).slice(1)+(256|o.state.green).toString(16).slice(1)+(256|o.state.blue).toString(16).slice(1);o.setState({hex:b})}else c==="g"?(b="#"+(256|o.state.red).toString(16).slice(1)+(256|d).toString(16).slice(1)+(256|o.state.blue).toString(16).slice(1),o.setState({hex:b})):c==="b"&&(b="#"+(256|o.state.red).toString(16).slice(1)+(256|o.state.green).toString(16).slice(1)+(256|d).toString(16).slice(1),o.setState({hex:b}))},o.parseColor=function(c){var d;if(typeof c=="string"){if(c[0]==="#"){var b=c.length===4?[c.slice(1,2),c.slice(2,3),c.slice(3,4)].map(function($){return parseInt(""+$+$,16)}):[c.slice(1,3),c.slice(3,5),c.slice(5,7)].map(function($){return parseInt($,16)});o.setState({colorComponents:b})}else c.startsWith("rgb")&&(b=(d=c.match(/\d+/g))===null||d===void 0?void 0:d.map(function($){return parseInt($)}))!==void 0&&o.setState({colorComponents:b});o.state.colorComponents.length&&(o.setState({red:o.state.colorComponents[0]}),o.setState({green:o.state.colorComponents[1]}),o.setState({blue:o.state.colorComponents[2]}))}},o}return __extends(a,s),a.prototype.componentDidUpdate=function(o,c){return this.props.colorChangedEvent&&this.state.hex!==c.hex&&this.props.colorChangedEvent(this.state.hex),!0},a.prototype.render=function(){var o=this;return reactExports.createElement("div",{className:"lf-color-picker"},reactExports.createElement("div",{className:"lf-color-selectors"},reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Red"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.red,onChange:function(c){o.setState({red:c.target.value}),o.handleChange("r",c.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.red,onChange:function(c){o.setState({red:c.target.value}),o.handleChange("r",c.target.value)}})),reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Green"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.green,onChange:function(c){o.setState({green:c.target.value}),o.handleChange("g",c.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.green,onChange:function(c){o.setState({green:c.target.value}),o.handleChange("g",c.target.value)}})),reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Blue"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.blue,onChange:function(c){o.setState({blue:c.target.value}),o.handleChange("b",c.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.blue,onChange:function(c){o.setState({blue:c.target.value}),o.handleChange("b",c.target.value)}}))),reactExports.createElement("div",{className:"lf-color-preview"},reactExports.createElement("div",{className:"lf-preview",style:{background:"rgb("+this.state.red+", "+this.state.green+", "+this.state.blue+")"}}),reactExports.createElement("div",null,reactExports.createElement("input",{className:"lf-text-input",type:"text",value:this.state.hex,onChange:function(c){o.setState({hex:c.target.value}),o.parseColor(c.target.value)}}))))},a}(reactExports.Component),Popover=function(s){var a=s.children,o=s.icon,c=reactExports.useState(null),d=c[0],b=c[1],$=reactExports.useState(null),j=$[0],_e=$[1],et=reactExports.useState(null),tt=et[0],rt=et[1],nt=reactExports.useState(!1),it=nt[0],at=nt[1];return reactExports.useEffect(function(){if(d&&j){var ct=d.getBoundingClientRect(),st=j.getBoundingClientRect(),ot=ct.left+st.width>window.innerWidth?-1:0;rt(ot)}},[tt,j,d]),reactExports.createElement("div",{className:"lf-popover",onMouseOver:function(){at(!0)},onMouseLeave:function(){at(!1)},ref:function(ct){b(ct)}},reactExports.createElement("div",{className:" lf-player-btn"},o),reactExports.createElement("div",{className:"lf-popover-content",ref:function(ct){_e(ct)},style:{bottom:"22px",right:"0px",zIndex:2,visibility:it?"visible":"hidden"}},a))},Seeker=function(s){function a(o){var c=s.call(this,o)||this;return c.inputRef=reactExports.createRef(),c.handleChange=function(){return function(d){var b=d.target.value,$=Math.floor(b/100*c.props.max);c.props.onChange($)}},c.state={value:0},c}return __extends(a,s),a.prototype.render=function(){var o=this.props.value/this.props.max*100,c={backgroundImage:"-webkit-gradient(linear, left top, right top, color-stop("+o+"%, rgba(15, 204, 206, 0.4)), color-stop("+o+"%, #DAE1E7))"},d={position:"absolute",left:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"},b={position:"absolute",right:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"};return reactExports.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginRight:"5px",marginLeft:"5px",position:"relative"}},reactExports.createElement("input",{ref:this.inputRef,id:"track",className:"lf-progress",name:"progress","aria-label":"progress",type:"range",min:"0",max:"100",step:"0.1",value:o,onInput:this.handleChange(),onChange:this.handleChange(),style:c}),this.props.showLabels&&reactExports.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},reactExports.createElement("div",{style:d},this.props.min),reactExports.createElement("div",{style:b},this.props.max)))},a}(reactExports.Component),ControlButtonStyle={display:"inline-flex",cursor:"pointer"};(function(s){function a(o){var c=s.call(this,o)||this;return c.state={activeFrame:0,mouseDown:!1},c}return __extends(a,s),a.prototype.render=function(){var o=this,c=this.props,d=c.instance,b=c.playerState,$=c.seeker,j=c.setLoop,_e=c.setSeeker,et=c.play,tt=c.pause,rt=c.stop,nt=c.visible,it=c.buttons;if(!d||!nt)return null;var at=!it||it.includes("play"),ct=!it||it.includes("stop"),st=!it||it.includes("repeat"),ot=!it||it.includes("frame"),ht=!it||it.includes("background"),dt=!it||it.includes("snapshot"),ft={width:14,height:14,viewBox:"0 0 24 24"},mt=Math.round(d.currentFrame);return reactExports.createElement("div",{className:"lf-player-controls",style:{display:"flex",justifyContent:"space-between",height:"60px",alignItems:"center",backgroundColor:this.props.transparentTheme?"transparent":this.props.darkTheme?"#3C3C3C":"#ffffff",paddingLeft:"10px",paddingRight:"10px"}},at&&reactExports.createElement("div",{role:"button","aria-label":b===PlayerState.Playing?PlayerEvent.Pause:PlayerEvent.Play,tabIndex:0,onClick:function(){b===PlayerState.Playing?typeof tt=="function"&&tt():typeof et=="function"&&et()},onKeyDown:function(){b===PlayerState.Playing?typeof tt=="function"&&tt():typeof et=="function"&&et()},className:"lf-player-btn",style:ControlButtonStyle},b===PlayerState.Playing?reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"14",y:".5"}),reactExports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"2",y:".5"})):reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("path",{d:"M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"}))),ct&&reactExports.createElement("div",{tabIndex:0,role:"button","aria-label":PlayerEvent.Stop,onClick:function(){return rt&&rt()},onKeyDown:function(){return rt&&rt()},className:b===PlayerState.Stopped?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("path",{d:`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`}))),reactExports.createElement(Seeker,{min:0,step:1,max:d?d.totalFrames:1,value:$||0,onChange:function(gt){_e&&o.setState({activeFrame:gt},function(){_e(gt,!1)})},onChangeEnd:function(gt){_e&&o.setState({activeFrame:gt},function(){_e(gt,!1)})},showLabels:this.props.showLabels,darkTheme:this.props.darkTheme}),ot&&reactExports.createElement("div",{role:"button",className:"lf-player-btn-container"},reactExports.createElement("input",{style:{outline:"none",border:this.props.darkTheme?"1px #505050 solid":"1px #ccc solid",borderRadius:"3px",width:"40px",textAlign:"center",backgroundColor:this.props.darkTheme?"#505050":"#ffffff",color:this.props.darkTheme?"#B9B9B9":"#999",fontSize:"0.7rem",padding:"0",fontFamily:"inherit"},type:"text",value:mt,readOnly:!0})),st&&reactExports.createElement("div",{role:"button","aria-label":PlayerEvent.Loop,tabIndex:0,onClick:function(){d&&j&&j(!d.loop)},onKeyDown:function(){d&&j&&j(!d.loop)},className:d.loop?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("path",{d:`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`,stroke:"#8795A1",strokeWidth:".26"}),reactExports.createElement("path",{d:`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`,fill:"#8795A1",stroke:"#8795A1",strokeWidth:".26"}))),ht&&reactExports.createElement(Popover,{icon:reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("path",{d:`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
            3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
            9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
            01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
            1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`}))},reactExports.createElement("div",{slot:"content",className:"lf-popover popover-background"},reactExports.createElement(ColorPicker,{colorChangedEvent:this.props.colorChangedEvent}))),dt&&reactExports.createElement(Popover,{icon:reactExports.createElement("svg",__assign$2({},ft),reactExports.createElement("path",{clipRule:"evenodd",d:`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
              2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
              .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`,fillRule:"evenodd"}),reactExports.createElement("path",{d:"M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"}),reactExports.createElement("circle",{cx:"7.444",cy:"6.513",r:"2.032"}),reactExports.createElement("path",{d:`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
              01-.803.804H9.562a1.061 1.061 0 100 2.123z`,stroke:"#8795a1",strokeWidth:".215"}))},reactExports.createElement("div",{slot:"content",className:"lf-popover lf-popover-snapshot",onWheel:function(gt){_e&&_e(mt+(gt.deltaY>0?-1:1),!1)}},reactExports.createElement("h5",null,"Frame ",mt),reactExports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download SVG"),reactExports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download PNG"),reactExports.createElement("i",{className:"lf-note"},"Scroll with mousewheel to find exact frame"))))},a})(reactExports.Component);function DonutList(){const{data:s,isLoading:a,isError:o}=useQuery(["donutList"],async()=>{try{const $=await fetchAuthSession();d(!0);const j=$.tokens.idToken.toString();return console.log(`token:${j}`),fetchDonuts({token:j})}catch{d(!1)}}),[c,d]=reactExports.useState();function b($){d($)}return o?jsx("p",{children:"Something went wrong!"}):a?jsx(Player,{src:"/lotti/chocolate-donuts.json",className:"player",loop:!0,autoplay:!0,style:{height:"500px",width:"500px"}}):jsxs(Fragment,{children:[jsx(Nav,{isAuthenticated:c,updateAuthentication:b}),jsx("div",{className:"relative",children:jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsx("h2",{className:"text-5xl font-extrabold leading-snug mt-32 mb-5",children:"Your donuts"}),jsx("div",{className:"max-h-650 overflow-y-auto custom-scrollbar",children:s.length===0?jsx("h3",{className:"mb-2 text-2xl tracking-tight text-gray-900",children:"Nothing here yet!"}):s.map($=>jsx(DonutCard,{donut:$},$.id))})]})})]})}const cognitoCredentialsProvider=new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(defaultStorage)),DefaultAmplify={configure(s,a){let o;if(Object.keys(s).some(c=>c.startsWith("aws_"))?o=parseAWSExports(s):o=s,!o.Auth||a!=null&&a.Auth)return Amplify.configure(o,a);if(!Amplify.libraryOptions.Auth)return cognitoUserPoolsTokenProvider.setAuthConfig(o.Auth),cognitoUserPoolsTokenProvider.setKeyValueStorage(a!=null&&a.ssr?new CookieStorage({sameSite:"lax"}):defaultStorage),Amplify.configure(o,{...a,Auth:{tokenProvider:cognitoUserPoolsTokenProvider,credentialsProvider:cognitoCredentialsProvider}});if(a)return a.ssr!==void 0&&cognitoUserPoolsTokenProvider.setKeyValueStorage(a.ssr?new CookieStorage({sameSite:"lax"}):defaultStorage),Amplify.configure(o,{Auth:Amplify.libraryOptions.Auth,...a});Amplify.configure(o)},getConfig(){return Amplify.getConfig()}};function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$5(s,a){return s===a||s!==s&&a!==a}var eq_1=eq$5,eq$4=eq_1;function assocIndexOf$4(s,a){for(var o=s.length;o--;)if(eq$4(s[o][0],a))return o;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(s){var a=this.__data__,o=assocIndexOf$3(a,s);if(o<0)return!1;var c=a.length-1;return o==c?a.pop():splice.call(a,o,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(s){var a=this.__data__,o=assocIndexOf$2(a,s);return o<0?void 0:a[o][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(s){return assocIndexOf$1(this.__data__,s)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(s,a){var o=this.__data__,c=assocIndexOf(o,s);return c<0?(++this.size,o.push([s,a])):o[c][1]=a,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(s){var a=this.__data__,o=a.delete(s);return this.size=a.size,o}var _stackDelete=stackDelete$1;function stackGet$1(s){return this.__data__.get(s)}var _stackGet=stackGet$1;function stackHas$1(s){return this.__data__.has(s)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$8=freeGlobal||freeSelf||Function("return this")(),_root=root$8,root$7=_root,Symbol$5=root$7.Symbol,_Symbol=Symbol$5,Symbol$4=_Symbol,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty,nativeObjectToString$1=objectProto$e.toString,symToStringTag$1=Symbol$4?Symbol$4.toStringTag:void 0;function getRawTag$1(s){var a=hasOwnProperty$b.call(s,symToStringTag$1),o=s[symToStringTag$1];try{s[symToStringTag$1]=void 0;var c=!0}catch{}var d=nativeObjectToString$1.call(s);return c&&(a?s[symToStringTag$1]=o:delete s[symToStringTag$1]),d}var _getRawTag=getRawTag$1,objectProto$d=Object.prototype,nativeObjectToString=objectProto$d.toString;function objectToString$1(s){return nativeObjectToString.call(s)}var _objectToString=objectToString$1,Symbol$3=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$3?Symbol$3.toStringTag:void 0;function baseGetTag$6(s){return s==null?s===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(s)?getRawTag(s):objectToString(s)}var _baseGetTag=baseGetTag$6;function isObject$b(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var isObject_1=isObject$b,baseGetTag$5=_baseGetTag,isObject$a=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$5(s){if(!isObject$a(s))return!1;var a=baseGetTag$5(s);return a==funcTag$1||a==genTag||a==asyncTag||a==proxyTag}var isFunction_1=isFunction$5,root$6=_root,coreJsData$1=root$6["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var s=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function isMasked$1(s){return!!maskSrcKey&&maskSrcKey in s}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(s){if(s!=null){try{return funcToString$2.call(s)}catch{}try{return s+""}catch{}}return""}var _toSource=toSource$2,isFunction$4=isFunction_1,isMasked=_isMasked,isObject$9=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$c=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(s){if(!isObject$9(s)||isMasked(s))return!1;var a=isFunction$4(s)?reIsNative:reIsHostCtor;return a.test(toSource$1(s))}var _baseIsNative=baseIsNative$1;function getValue$2(s,a){return s==null?void 0:s[a]}var _getValue=getValue$2,baseIsNative=_baseIsNative,getValue$1=_getValue;function getNative$7(s,a){var o=getValue$1(s,a);return baseIsNative(o)?o:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$5=_root,Map$4=getNative$6(root$5,"Map"),_Map=Map$4,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashGet$1(s){var a=this.__data__;if(nativeCreate$2){var o=a[s];return o===HASH_UNDEFINED$2?void 0:o}return hasOwnProperty$9.call(a,s)?a[s]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas$1(s){var a=this.__data__;return nativeCreate$1?a[s]!==void 0:hasOwnProperty$8.call(a,s)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(s,a){var o=this.__data__;return this.size+=this.has(s)?0:1,o[s]=nativeCreate&&a===void 0?HASH_UNDEFINED$1:a,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(s,a){var o=s.__data__;return isKeyable(a)?o[typeof a=="string"?"string":"hash"]:o.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(s){var a=getMapData$3(this,s).delete(s);return this.size-=a?1:0,a}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(s){return getMapData$2(this,s).get(s)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(s){return getMapData$1(this,s).has(s)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(s,a){var o=getMapData(this,s),c=o.size;return o.set(s,a),this.size+=o.size==c?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(s){var a=-1,o=s==null?0:s.length;for(this.clear();++a<o;){var c=s[a];this.set(c[0],c[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$2=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(s,a){var o=this.__data__;if(o instanceof ListCache$1){var c=o.__data__;if(!Map$2||c.length<LARGE_ARRAY_SIZE-1)return c.push([s,a]),this.size=++o.size,this;o=this.__data__=new MapCache$2(c)}return o.set(s,a),this.size=o.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$3(s){var a=this.__data__=new ListCache(s);this.size=a.size}Stack$3.prototype.clear=stackClear;Stack$3.prototype.delete=stackDelete;Stack$3.prototype.get=stackGet;Stack$3.prototype.has=stackHas;Stack$3.prototype.set=stackSet;var _Stack=Stack$3,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(s){return this.__data__.set(s,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(s){return this.__data__.has(s)}var _setCacheHas=setCacheHas$1,MapCache$1=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new MapCache$1;++a<o;)this.add(s[a])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(s,a){for(var o=-1,c=s==null?0:s.length;++o<c;)if(a(s[o],o,s))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(s,a){return s.has(a)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(s,a,o,c,d,b){var $=o&COMPARE_PARTIAL_FLAG$5,j=s.length,_e=a.length;if(j!=_e&&!($&&_e>j))return!1;var et=b.get(s),tt=b.get(a);if(et&&tt)return et==a&&tt==s;var rt=-1,nt=!0,it=o&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(b.set(s,a),b.set(a,s);++rt<j;){var at=s[rt],ct=a[rt];if(c)var st=$?c(ct,at,rt,a,s,b):c(at,ct,rt,s,a,b);if(st!==void 0){if(st)continue;nt=!1;break}if(it){if(!arraySome(a,function(ot,ht){if(!cacheHas(it,ht)&&(at===ot||d(at,ot,o,c,b)))return it.push(ht)})){nt=!1;break}}else if(!(at===ct||d(at,ct,o,c,b))){nt=!1;break}}return b.delete(s),b.delete(a),nt}var _equalArrays=equalArrays$2,root$4=_root,Uint8Array$3=root$4.Uint8Array,_Uint8Array=Uint8Array$3;function mapToArray$1(s){var a=-1,o=Array(s.size);return s.forEach(function(c,d){o[++a]=[d,c]}),o}var _mapToArray=mapToArray$1;function setToArray$1(s){var a=-1,o=Array(s.size);return s.forEach(function(c){o[++a]=c}),o}var _setToArray=setToArray$1,Symbol$2=_Symbol,Uint8Array$2=_Uint8Array,eq$3=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag$1(s,a,o,c,d,b,$){switch(o){case dataViewTag$2:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case arrayBufferTag$1:return!(s.byteLength!=a.byteLength||!b(new Uint8Array$2(s),new Uint8Array$2(a)));case boolTag$1:case dateTag$1:case numberTag$1:return eq$3(+s,+a);case errorTag$1:return s.name==a.name&&s.message==a.message;case regexpTag$1:case stringTag$1:return s==a+"";case mapTag$2:var j=mapToArray;case setTag$2:var _e=c&COMPARE_PARTIAL_FLAG$4;if(j||(j=setToArray),s.size!=a.size&&!_e)return!1;var et=$.get(s);if(et)return et==a;c|=COMPARE_UNORDERED_FLAG$2,$.set(s,a);var tt=equalArrays$1(j(s),j(a),c,d,b,$);return $.delete(s),tt;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(s)==symbolValueOf.call(a)}return!1}var _equalByTag=equalByTag$1;function arrayPush$2(s,a){for(var o=-1,c=a.length,d=s.length;++o<c;)s[d+o]=a[o];return s}var _arrayPush=arrayPush$2,isArray$c=Array.isArray,isArray_1=isArray$c,arrayPush$1=_arrayPush,isArray$b=isArray_1;function baseGetAllKeys$2(s,a,o){var c=a(s);return isArray$b(s)?c:arrayPush$1(c,o(s))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$1(s,a){for(var o=-1,c=s==null?0:s.length,d=0,b=[];++o<c;){var $=s[o];a($,o,s)&&(b[d++]=$)}return b}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$9=Object.prototype,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$2=nativeGetSymbols$1?function(s){return s==null?[]:(s=Object(s),arrayFilter(nativeGetSymbols$1(s),function(a){return propertyIsEnumerable$1.call(s,a)}))}:stubArray$1,_getSymbols=getSymbols$2;function baseTimes$1(s,a){for(var o=-1,c=Array(s);++o<s;)c[o]=a(o);return c}var _baseTimes=baseTimes$1;function isObjectLike$7(s){return s!=null&&typeof s=="object"}var isObjectLike_1=isObjectLike$7,baseGetTag$4=_baseGetTag,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(s){return isObjectLike$6(s)&&baseGetTag$4(s)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$5=isObjectLike_1,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable=objectProto$8.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(s){return isObjectLike$5(s)&&hasOwnProperty$7.call(s,"callee")&&!propertyIsEnumerable.call(s,"callee")},isArguments_1=isArguments$3,isBuffer$3={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$3.exports;(function(s,a){var o=_root,c=stubFalse_1,d=a&&!a.nodeType&&a,b=d&&!0&&s&&!s.nodeType&&s,$=b&&b.exports===d,j=$?o.Buffer:void 0,_e=j?j.isBuffer:void 0,et=_e||c;s.exports=et})(isBuffer$3,isBuffer$3.exports);var isBufferExports=isBuffer$3.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$4(s,a){var o=typeof s;return a=a??MAX_SAFE_INTEGER$1,!!a&&(o=="number"||o!="symbol"&&reIsUint.test(s))&&s>-1&&s%1==0&&s<a}var _isIndex=isIndex$4,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag$3=_baseGetTag,isLength$2=isLength_1,isObjectLike$4=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$3="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(s){return isObjectLike$4(s)&&isLength$2(s.length)&&!!typedArrayTags[baseGetTag$3(s)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(s){return function(a){return s(a)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(s,a){var o=_freeGlobal,c=a&&!a.nodeType&&a,d=c&&!0&&s&&!s.nodeType&&s,b=d&&d.exports===c,$=b&&o.process,j=function(){try{var _e=d&&d.require&&d.require("util").types;return _e||$&&$.binding&&$.binding("util")}catch{}}();s.exports=j})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$2=isArguments_1,isArray$a=isArray_1,isBuffer$2=isBufferExports,isIndex$3=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function arrayLikeKeys$2(s,a){var o=isArray$a(s),c=!o&&isArguments$2(s),d=!o&&!c&&isBuffer$2(s),b=!o&&!c&&!d&&isTypedArray$2(s),$=o||c||d||b,j=$?baseTimes(s.length,String):[],_e=j.length;for(var et in s)(a||hasOwnProperty$6.call(s,et))&&!($&&(et=="length"||d&&(et=="offset"||et=="parent")||b&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||isIndex$3(et,_e)))&&j.push(et);return j}var _arrayLikeKeys=arrayLikeKeys$2,objectProto$6=Object.prototype;function isPrototype$3(s){var a=s&&s.constructor,o=typeof a=="function"&&a.prototype||objectProto$6;return s===o}var _isPrototype=isPrototype$3;function overArg$2(s,a){return function(o){return s(a(o))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$2=_isPrototype,nativeKeys=_nativeKeys,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function baseKeys$1(s){if(!isPrototype$2(s))return nativeKeys(s);var a=[];for(var o in Object(s))hasOwnProperty$5.call(s,o)&&o!="constructor"&&a.push(o);return a}var _baseKeys=baseKeys$1,isFunction$3=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(s){return s!=null&&isLength$1(s.length)&&!isFunction$3(s)}var isArrayLike_1=isArrayLike$4,arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$3=isArrayLike_1;function keys$2(s){return isArrayLike$3(s)?arrayLikeKeys$1(s):baseKeys(s)}var keys_1=keys$2,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$1=_getSymbols,keys$1=keys_1;function getAllKeys$1(s){return baseGetAllKeys$1(s,keys$1,getSymbols$1)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects$1(s,a,o,c,d,b){var $=o&COMPARE_PARTIAL_FLAG$3,j=getAllKeys(s),_e=j.length,et=getAllKeys(a),tt=et.length;if(_e!=tt&&!$)return!1;for(var rt=_e;rt--;){var nt=j[rt];if(!($?nt in a:hasOwnProperty$4.call(a,nt)))return!1}var it=b.get(s),at=b.get(a);if(it&&at)return it==a&&at==s;var ct=!0;b.set(s,a),b.set(a,s);for(var st=$;++rt<_e;){nt=j[rt];var ot=s[nt],ht=a[nt];if(c)var dt=$?c(ht,ot,nt,a,s,b):c(ot,ht,nt,s,a,b);if(!(dt===void 0?ot===ht||d(ot,ht,o,c,b):dt)){ct=!1;break}st||(st=nt=="constructor")}if(ct&&!st){var ft=s.constructor,mt=a.constructor;ft!=mt&&"constructor"in s&&"constructor"in a&&!(typeof ft=="function"&&ft instanceof ft&&typeof mt=="function"&&mt instanceof mt)&&(ct=!1)}return b.delete(s),b.delete(a),ct}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$3=_root,DataView$2=getNative$4(root$3,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$2=_root,Promise$2=getNative$3(root$2,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$1=_root,Set$2=getNative$2(root$1,"Set"),_Set=Set$2,getNative$1=_getNative,root=_root,WeakMap$2=getNative$1(root,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag$2;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(s){var a=baseGetTag$2(s),o=a==objectTag$2?s.constructor:void 0,c=o?toSource(o):"";if(c)switch(c){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return a});var _getTag=getTag$1,Stack$2=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$9=isArray_1,isBuffer$1=isBufferExports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep$1(s,a,o,c,d,b){var $=isArray$9(s),j=isArray$9(a),_e=$?arrayTag:getTag(s),et=j?arrayTag:getTag(a);_e=_e==argsTag?objectTag$1:_e,et=et==argsTag?objectTag$1:et;var tt=_e==objectTag$1,rt=et==objectTag$1,nt=_e==et;if(nt&&isBuffer$1(s)){if(!isBuffer$1(a))return!1;$=!0,tt=!1}if(nt&&!tt)return b||(b=new Stack$2),$||isTypedArray$1(s)?equalArrays(s,a,o,c,d,b):equalByTag(s,a,_e,o,c,d,b);if(!(o&COMPARE_PARTIAL_FLAG$2)){var it=tt&&hasOwnProperty$3.call(s,"__wrapped__"),at=rt&&hasOwnProperty$3.call(a,"__wrapped__");if(it||at){var ct=it?s.value():s,st=at?a.value():a;return b||(b=new Stack$2),d(ct,st,o,c,b)}}return nt?(b||(b=new Stack$2),equalObjects(s,a,o,c,d,b)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$3=isObjectLike_1;function baseIsEqual$2(s,a,o,c,d){return s===a?!0:s==null||a==null||!isObjectLike$3(s)&&!isObjectLike$3(a)?s!==s&&a!==a:baseIsEqualDeep(s,a,o,c,baseIsEqual$2,d)}var _baseIsEqual=baseIsEqual$2,withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var q=typeof Object.is=="function"?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(s,a,o,c,d){var b=t(null);if(b.current===null){var $={hasValue:!1,value:null};b.current=$}else $=b.current;b=v(function(){function _e(it){if(!et){if(et=!0,tt=it,it=c(it),d!==void 0&&$.hasValue){var at=$.value;if(d(at,it))return rt=at}return rt=it}if(at=rt,q(tt,it))return at;var ct=c(it);return d!==void 0&&d(at,ct)?at:(tt=it,rt=ct)}var et=!1,tt,rt,nt=o===void 0?null:o;return[function(){return _e(a())},nt===null?void 0:function(){return _e(nt())}]},[a,o,c,d]);var j=r(s,b[0],b[1]);return u(function(){$.hasValue=!0,$.value=j},[j]),w(j),j};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){return __assign$1=Object.assign||function(a){for(var o,c=1,d=arguments.length;c<d;c++){o=arguments[c];for(var b in o)Object.prototype.hasOwnProperty.call(o,b)&&(a[b]=o[b])}return a},__assign$1.apply(this,arguments)};function __rest$1(s,a){var o={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.indexOf(c)<0&&(o[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(s);d<c.length;d++)a.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(s,c[d])&&(o[c[d]]=s[c[d]]);return o}function __values(s){var a=typeof Symbol=="function"&&Symbol.iterator,o=a&&s[a],c=0;if(o)return o.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(s,a){var o=typeof Symbol=="function"&&s[Symbol.iterator];if(!o)return s;var c=o.call(s),d,b=[],$;try{for(;(a===void 0||a-- >0)&&!(d=c.next()).done;)b.push(d.value)}catch(j){$={error:j}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if($)throw $.error}}return b}function __spreadArray(s,a,o){if(o||arguments.length===2)for(var c=0,d=a.length,b;c<d;c++)(b||!(c in a))&&(b||(b=Array.prototype.slice.call(a,0,c)),b[c]=a[c]);return s.concat(b||Array.prototype.slice.call(a))}var ActionTypes;(function(s){s.Start="xstate.start",s.Stop="xstate.stop",s.Raise="xstate.raise",s.Send="xstate.send",s.Cancel="xstate.cancel",s.NullEvent="",s.Assign="xstate.assign",s.After="xstate.after",s.DoneState="done.state",s.DoneInvoke="done.invoke",s.Log="xstate.log",s.Init="xstate.init",s.Invoke="xstate.invoke",s.ErrorExecution="error.execution",s.ErrorCommunication="error.communication",s.ErrorPlatform="error.platform",s.ErrorCustom="xstate.error",s.Update="xstate.update",s.Pure="xstate.pure",s.Choose="xstate.choose"})(ActionTypes||(ActionTypes={}));var SpecialTargets;(function(s){s.Parent="#_parent",s.Internal="#_internal"})(SpecialTargets||(SpecialTargets={}));var start$1=ActionTypes.Start,stop$2=ActionTypes.Stop,raise$1=ActionTypes.Raise,send$1=ActionTypes.Send,cancel$1=ActionTypes.Cancel,nullEvent=ActionTypes.NullEvent,assign$4=ActionTypes.Assign,after$1=ActionTypes.After,doneState=ActionTypes.DoneState,log$1=ActionTypes.Log,init=ActionTypes.Init,invoke=ActionTypes.Invoke,errorExecution=ActionTypes.ErrorExecution,errorPlatform=ActionTypes.ErrorPlatform,error$1=ActionTypes.ErrorCustom,update=ActionTypes.Update,choose$2=ActionTypes.Choose,pure$1=ActionTypes.Pure;const actionTypes=Object.freeze(Object.defineProperty({__proto__:null,after:after$1,assign:assign$4,cancel:cancel$1,choose:choose$2,doneState,error:error$1,errorExecution,errorPlatform,init,invoke,log:log$1,nullEvent,pure:pure$1,raise:raise$1,send:send$1,start:start$1,stop:stop$2,update},Symbol.toStringTag,{value:"Module"}));var STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY="",_a;function matchesState(s,a,o){o===void 0&&(o=STATE_DELIMITER);var c=toStateValue(s,o),d=toStateValue(a,o);return isString$2(d)?isString$2(c)?d===c:!1:isString$2(c)?c in d:Object.keys(c).every(function(b){return b in d?matchesState(c[b],d[b]):!1})}function getEventType(s){try{return isString$2(s)||typeof s=="number"?"".concat(s):s.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(s,a){try{return isArray$8(s)?s:s.toString().split(a)}catch{throw new Error("'".concat(s,"' is not a valid state path."))}}function isStateLike(s){return typeof s=="object"&&"value"in s&&"context"in s&&"event"in s&&"_event"in s}function toStateValue(s,a){if(isStateLike(s))return s.value;if(isArray$8(s))return pathToStateValue(s);if(typeof s!="string")return s;var o=toStatePath(s,a);return pathToStateValue(o)}function pathToStateValue(s){if(s.length===1)return s[0];for(var a={},o=a,c=0;c<s.length-1;c++)c===s.length-2?o[s[c]]=s[c+1]:(o[s[c]]={},o=o[s[c]]);return a}function mapValues(s,a){for(var o={},c=Object.keys(s),d=0;d<c.length;d++){var b=c[d];o[b]=a(s[b],b,s,d)}return o}function mapFilterValues(s,a,o){var c,d,b={};try{for(var $=__values(Object.keys(s)),j=$.next();!j.done;j=$.next()){var _e=j.value,et=s[_e];o(et)&&(b[_e]=a(et,_e,s))}}catch(tt){c={error:tt}}finally{try{j&&!j.done&&(d=$.return)&&d.call($)}finally{if(c)throw c.error}}return b}var path=function(s){return function(a){var o,c,d=a;try{for(var b=__values(s),$=b.next();!$.done;$=b.next()){var j=$.value;d=d[j]}}catch(_e){o={error:_e}}finally{try{$&&!$.done&&(c=b.return)&&c.call(b)}finally{if(o)throw o.error}}return d}};function nestedPath(s,a){return function(o){var c,d,b=o;try{for(var $=__values(s),j=$.next();!j.done;j=$.next()){var _e=j.value;b=b[a][_e]}}catch(et){c={error:et}}finally{try{j&&!j.done&&(d=$.return)&&d.call($)}finally{if(c)throw c.error}}return b}}function toStatePaths(s){if(!s)return[[]];if(isString$2(s))return[[s]];var a=flatten(Object.keys(s).map(function(o){var c=s[o];return typeof c!="string"&&(!c||!Object.keys(c).length)?[[o]]:toStatePaths(s[o]).map(function(d){return[o].concat(d)})}));return a}function flatten(s){var a;return(a=[]).concat.apply(a,__spreadArray([],__read$1(s),!1))}function toArrayStrict(s){return isArray$8(s)?s:[s]}function toArray(s){return s===void 0?[]:toArrayStrict(s)}function mapContext(s,a,o){var c,d;if(isFunction$2(s))return s(a,o.data);var b={};try{for(var $=__values(Object.keys(s)),j=$.next();!j.done;j=$.next()){var _e=j.value,et=s[_e];isFunction$2(et)?b[_e]=et(a,o.data):b[_e]=et}}catch(tt){c={error:tt}}finally{try{j&&!j.done&&(d=$.return)&&d.call($)}finally{if(c)throw c.error}}return b}function isBuiltInEvent(s){return/^(done|error)\./.test(s)}function isPromiseLike(s){return!!(s instanceof Promise||s!==null&&(isFunction$2(s)||typeof s=="object")&&isFunction$2(s.then))}function isBehavior(s){return s!==null&&typeof s=="object"&&"transition"in s&&typeof s.transition=="function"}function partition(s,a){var o,c,d=__read$1([[],[]],2),b=d[0],$=d[1];try{for(var j=__values(s),_e=j.next();!_e.done;_e=j.next()){var et=_e.value;a(et)?b.push(et):$.push(et)}}catch(tt){o={error:tt}}finally{try{_e&&!_e.done&&(c=j.return)&&c.call(j)}finally{if(o)throw o.error}}return[b,$]}function updateHistoryStates(s,a){return mapValues(s.states,function(o,c){if(o){var d=(isString$2(a)?void 0:a[c])||(o?o.current:void 0);if(d)return{current:d,states:updateHistoryStates(o,d)}}})}function updateHistoryValue(s,a){return{current:a,states:updateHistoryStates(s,a)}}function updateContext(s,a,o,c){var d=s&&o.reduce(function(b,$){var j,_e,et=$.assignment,tt={state:c,action:$,_event:a},rt={};if(isFunction$2(et))rt=et(b,a.data,tt);else try{for(var nt=__values(Object.keys(et)),it=nt.next();!it.done;it=nt.next()){var at=it.value,ct=et[at];rt[at]=isFunction$2(ct)?ct(b,a.data,tt):ct}}catch(st){j={error:st}}finally{try{it&&!it.done&&(_e=nt.return)&&_e.call(nt)}finally{if(j)throw j.error}}return Object.assign({},b,rt)},s);return d}var warn=function(){};function isArray$8(s){return Array.isArray(s)}function isFunction$2(s){return typeof s=="function"}function isString$2(s){return typeof s=="string"}function toGuard(s,a){if(s)return isString$2(s)?{type:DEFAULT_GUARD_TYPE,name:s,predicate:a?a[s]:void 0}:isFunction$2(s)?{type:DEFAULT_GUARD_TYPE,name:s.name,predicate:s}:s}function isObservable(s){try{return"subscribe"in s&&isFunction$2(s.subscribe)}catch{return!1}}var symbolObservable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();_a={},_a[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};function isMachine(s){return!!s&&"__xstatenode"in s}function isActor$1(s){return!!s&&typeof s.send=="function"}var uniqueId=function(){var s=0;return function(){return s++,s.toString(16)}}();function toEventObject(s,a){return isString$2(s)||typeof s=="number"?__assign$1({type:s},a):s}function toSCXMLEvent(s,a){if(!isString$2(s)&&"$$type"in s&&s.$$type==="scxml")return s;var o=toEventObject(s);return __assign$1({name:o.type,data:o,$$type:"scxml",type:"external"},a)}function toTransitionConfigArray(s,a){var o=toArrayStrict(a).map(function(c){return typeof c>"u"||typeof c=="string"||isMachine(c)?{target:c,event:s}:__assign$1(__assign$1({},c),{event:s})});return o}function normalizeTarget(s){if(!(s===void 0||s===TARGETLESS_KEY))return toArray(s)}function evaluateGuard(s,a,o,c,d){var b=s.options.guards,$={state:d,cond:a,_event:c};if(a.type===DEFAULT_GUARD_TYPE)return((b==null?void 0:b[a.name])||a.predicate)(o,c.data,$);var j=b==null?void 0:b[a.type];if(!j)throw new Error("Guard '".concat(a.type,"' is not implemented on machine '").concat(s.id,"'."));return j(o,c.data,$)}function toInvokeSource$1(s){return typeof s=="string"?{type:s}:s}function toObserver(s,a,o){var c=function(){},d=typeof s=="object",b=d?s:null;return{next:((d?s.next:s)||c).bind(b),error:((d?s.error:a)||c).bind(b),complete:((d?s.complete:o)||c).bind(b)}}function createInvokeId(s,a){return"".concat(s,":invocation[").concat(a,"]")}function isRaisableAction(s){return(s.type===raise$1||s.type===send$1&&s.to===SpecialTargets.Internal)&&typeof s.delay!="number"}var initEvent=toSCXMLEvent({type:init});function getActionFunction(s,a){return a&&a[s]||void 0}function toActionObject(s,a){var o;if(isString$2(s)||typeof s=="number"){var c=getActionFunction(s,a);isFunction$2(c)?o={type:s,exec:c}:c?o=c:o={type:s,exec:void 0}}else if(isFunction$2(s))o={type:s.name||s.toString(),exec:s};else{var c=getActionFunction(s.type,a);if(isFunction$2(c))o=__assign$1(__assign$1({},s),{exec:c});else if(c){var d=c.type||s.type;o=__assign$1(__assign$1(__assign$1({},c),s),{type:d})}else o=s}return o}var toActionObjects=function(s,a){if(!s)return[];var o=isArray$8(s)?s:[s];return o.map(function(c){return toActionObject(c,a)})};function toActivityDefinition(s){var a=toActionObject(s);return __assign$1(__assign$1({id:isString$2(s)?s:a.id},a),{type:a.type})}function raise(s,a){return{type:raise$1,event:typeof s=="function"?s:toEventObject(s),delay:a?a.delay:void 0,id:a==null?void 0:a.id}}function resolveRaise(s,a,o,c){var d={_event:o},b=toSCXMLEvent(isFunction$2(s.event)?s.event(a,o.data,d):s.event),$;if(isString$2(s.delay)){var j=c&&c[s.delay];$=isFunction$2(j)?j(a,o.data,d):j}else $=isFunction$2(s.delay)?s.delay(a,o.data,d):s.delay;return __assign$1(__assign$1({},s),{type:raise$1,_event:b,delay:$})}function send(s,a){return{to:a?a.to:void 0,type:send$1,event:isFunction$2(s)?s:toEventObject(s),delay:a?a.delay:void 0,id:a&&a.id!==void 0?a.id:isFunction$2(s)?s.name:getEventType(s)}}function resolveSend(s,a,o,c){var d={_event:o},b=toSCXMLEvent(isFunction$2(s.event)?s.event(a,o.data,d):s.event),$;if(isString$2(s.delay)){var j=c&&c[s.delay];$=isFunction$2(j)?j(a,o.data,d):j}else $=isFunction$2(s.delay)?s.delay(a,o.data,d):s.delay;var _e=isFunction$2(s.to)?s.to(a,o.data,d):s.to;return __assign$1(__assign$1({},s),{to:_e,_event:b,event:b.data,delay:$})}function sendParent(s,a){return send(s,__assign$1(__assign$1({},a),{to:SpecialTargets.Parent}))}function sendTo(s,a,o){return send(a,__assign$1(__assign$1({},o),{to:s}))}function sendUpdate$1(){return sendParent(update)}function respond(s,a){return send(s,__assign$1(__assign$1({},a),{to:function(o,c,d){var b=d._event;return b.origin}}))}var defaultLogExpr=function(s,a){return{context:s,event:a}};function log(s,a){return s===void 0&&(s=defaultLogExpr),{type:log$1,label:a,expr:s}}var resolveLog=function(s,a,o){return __assign$1(__assign$1({},s),{value:isString$2(s.expr)?s.expr:s.expr(a,o.data,{_event:o})})},cancel=function(s){return{type:cancel$1,sendId:s}};function start(s){var a=toActivityDefinition(s);return{type:ActionTypes.Start,activity:a,exec:void 0}}function stop$1(s){var a=isFunction$2(s)?s:toActivityDefinition(s);return{type:ActionTypes.Stop,activity:a,exec:void 0}}function resolveStop(s,a,o){var c=isFunction$2(s.activity)?s.activity(a,o.data):s.activity,d=typeof c=="string"?{id:c}:c,b={type:ActionTypes.Stop,activity:d};return b}var assign$3=function(s){return{type:assign$4,assignment:s}};function isActionObject(s){return typeof s=="object"&&"type"in s}function after(s,a){var o=a?"#".concat(a):"";return"".concat(ActionTypes.After,"(").concat(s,")").concat(o)}function done(s,a){var o="".concat(ActionTypes.DoneState,".").concat(s),c={type:o,data:a};return c.toString=function(){return o},c}function doneInvoke(s,a){var o="".concat(ActionTypes.DoneInvoke,".").concat(s),c={type:o,data:a};return c.toString=function(){return o},c}function error(s,a){var o="".concat(ActionTypes.ErrorPlatform,".").concat(s),c={type:o,data:a};return c.toString=function(){return o},c}function pure(s){return{type:ActionTypes.Pure,get:s}}function forwardTo$1(s,a){return send(function(o,c){return c},__assign$1(__assign$1({},a),{to:s}))}function escalate(s,a){return sendParent(function(o,c,d){return{type:error$1,data:isFunction$2(s)?s(o,c,d):s}},__assign$1(__assign$1({},a),{to:SpecialTargets.Parent}))}function choose$1(s){return{type:ActionTypes.Choose,conds:s}}var pluckAssigns=function(s){var a,o,c=[];try{for(var d=__values(s),b=d.next();!b.done;b=d.next())for(var $=b.value,j=0;j<$.actions.length;){if($.actions[j].type===assign$4){c.push($.actions[j]),$.actions.splice(j,1);continue}j++}}catch(_e){a={error:_e}}finally{try{b&&!b.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}return c};function resolveActions(s,a,o,c,d,b,$){$===void 0&&($=!1);var j=$?[]:pluckAssigns(d),_e=j.length?updateContext(o,c,j,a):o,et=$?[o]:void 0,tt=[];function rt(at,ct){var st;switch(ct.type){case raise$1:{var ot=resolveRaise(ct,_e,c,s.options.delays);return b&&typeof ot.delay=="number"&&b(ot,_e,c),ot}case send$1:var ht=resolveSend(ct,_e,c,s.options.delays);return b&&ht.to!==SpecialTargets.Internal&&(at==="entry"?tt.push(ht):b(ht,_e,c)),ht;case log$1:{var dt=resolveLog(ct,_e,c);return b==null||b(dt,_e,c),dt}case choose$2:{var ft=ct,mt=(st=ft.conds.find(function(Bt){var Rt=toGuard(Bt.cond,s.options.guards);return!Rt||evaluateGuard(s,Rt,_e,c,b?void 0:a)}))===null||st===void 0?void 0:st.actions;if(!mt)return[];var gt=__read$1(resolveActions(s,a,_e,c,[{type:at,actions:toActionObjects(toArray(mt),s.options.actions)}],b,$),2),vt=gt[0],yt=gt[1];return _e=yt,et==null||et.push(_e),vt}case pure$1:{var mt=ct.get(_e,c.data);if(!mt)return[];var Et=__read$1(resolveActions(s,a,_e,c,[{type:at,actions:toActionObjects(toArray(mt),s.options.actions)}],b,$),2),St=Et[0],Ct=Et[1];return _e=Ct,et==null||et.push(_e),St}case stop$2:{var dt=resolveStop(ct,_e,c);return b==null||b(dt,o,c),dt}case assign$4:{_e=updateContext(_e,c,[ct],b?void 0:a),et==null||et.push(_e);break}default:var wt=toActionObject(ct,s.options.actions),_t=wt.exec;if(b)b(wt,_e,c);else if(_t&&et){var Tt=et.length-1,Mt=__assign$1(__assign$1({},wt),{exec:function(Bt){for(var Rt=[],bt=1;bt<arguments.length;bt++)Rt[bt-1]=arguments[bt];_t.apply(void 0,__spreadArray([et[Tt]],__read$1(Rt),!1))}});wt=Mt}return wt}}function nt(at){var ct,st,ot=[];try{for(var ht=__values(at.actions),dt=ht.next();!dt.done;dt=ht.next()){var ft=dt.value,mt=rt(at.type,ft);mt&&(ot=ot.concat(mt))}}catch(gt){ct={error:gt}}finally{try{dt&&!dt.done&&(st=ht.return)&&st.call(ht)}finally{if(ct)throw ct.error}}return tt.forEach(function(gt){b(gt,_e,c)}),tt.length=0,ot}var it=flatten(d.map(nt));return[it,_e]}const actions=Object.freeze(Object.defineProperty({__proto__:null,actionTypes,after,assign:assign$3,cancel,choose:choose$1,done,doneInvoke,error,escalate,forwardTo:forwardTo$1,getActionFunction,initEvent,isActionObject,log,pure,raise,resolveActions,resolveLog,resolveRaise,resolveSend,resolveStop,respond,send,sendParent,sendTo,sendUpdate:sendUpdate$1,start,stop:stop$1,toActionObject,toActionObjects,toActivityDefinition},Symbol.toStringTag,{value:"Module"}));var serviceStack=[],provide=function(s,a){serviceStack.push(s);var o=a(s);return serviceStack.pop(),o},consume=function(s){return s(serviceStack[serviceStack.length-1])};function createNullActor(s){var a;return a={id:s,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:s}}},a[symbolObservable]=function(){return this},a}function createInvocableActor(s,a,o,c){var d,b=toInvokeSource$1(s.src),$=(d=a==null?void 0:a.options.services)===null||d===void 0?void 0:d[b.type],j=s.data?mapContext(s.data,o,c):void 0,_e=$?createDeferredActor($,s.id,j):createNullActor(s.id);return _e.meta=s,_e}function createDeferredActor(s,a,o){var c=createNullActor(a);if(c.deferred=!0,isMachine(s)){var d=c.state=provide(void 0,function(){return(o?s.withContext(o):s).initialState});c.getSnapshot=function(){return d}}return c}function isActor(s){try{return typeof s.send=="function"}catch{return!1}}function isSpawnedActor(s){return isActor(s)&&"id"in s}function toActorRef(s){var a;return __assign$1((a={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},a[symbolObservable]=function(){return this},a),s)}var isLeafNode=function(s){return s.type==="atomic"||s.type==="final"};function getAllChildren(s){return Object.keys(s.states).map(function(a){return s.states[a]})}function getChildren(s){return getAllChildren(s).filter(function(a){return a.type!=="history"})}function getAllStateNodes(s){var a=[s];return isLeafNode(s)?a:a.concat(flatten(getChildren(s).map(getAllStateNodes)))}function getConfiguration(s,a){var o,c,d,b,$,j,_e,et,tt=new Set(s),rt=getAdjList(tt),nt=new Set(a);try{for(var it=__values(nt),at=it.next();!at.done;at=it.next())for(var ct=at.value,st=ct.parent;st&&!nt.has(st);)nt.add(st),st=st.parent}catch(Et){o={error:Et}}finally{try{at&&!at.done&&(c=it.return)&&c.call(it)}finally{if(o)throw o.error}}var ot=getAdjList(nt);try{for(var ht=__values(nt),dt=ht.next();!dt.done;dt=ht.next()){var ct=dt.value;if(ct.type==="compound"&&(!ot.get(ct)||!ot.get(ct).length))rt.get(ct)?rt.get(ct).forEach(function(St){return nt.add(St)}):ct.initialStateNodes.forEach(function(St){return nt.add(St)});else if(ct.type==="parallel")try{for(var ft=($=void 0,__values(getChildren(ct))),mt=ft.next();!mt.done;mt=ft.next()){var gt=mt.value;nt.has(gt)||(nt.add(gt),rt.get(gt)?rt.get(gt).forEach(function(St){return nt.add(St)}):gt.initialStateNodes.forEach(function(St){return nt.add(St)}))}}catch(St){$={error:St}}finally{try{mt&&!mt.done&&(j=ft.return)&&j.call(ft)}finally{if($)throw $.error}}}}catch(Et){d={error:Et}}finally{try{dt&&!dt.done&&(b=ht.return)&&b.call(ht)}finally{if(d)throw d.error}}try{for(var vt=__values(nt),yt=vt.next();!yt.done;yt=vt.next())for(var ct=yt.value,st=ct.parent;st&&!nt.has(st);)nt.add(st),st=st.parent}catch(Et){_e={error:Et}}finally{try{yt&&!yt.done&&(et=vt.return)&&et.call(vt)}finally{if(_e)throw _e.error}}return nt}function getValueFromAdj(s,a){var o=a.get(s);if(!o)return{};if(s.type==="compound"){var c=o[0];if(c){if(isLeafNode(c))return c.key}else return{}}var d={};return o.forEach(function(b){d[b.key]=getValueFromAdj(b,a)}),d}function getAdjList(s){var a,o,c=new Map;try{for(var d=__values(s),b=d.next();!b.done;b=d.next()){var $=b.value;c.has($)||c.set($,[]),$.parent&&(c.has($.parent)||c.set($.parent,[]),c.get($.parent).push($))}}catch(j){a={error:j}}finally{try{b&&!b.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}return c}function getValue(s,a){var o=getConfiguration([s],a);return getValueFromAdj(s,getAdjList(o))}function has$1(s,a){return Array.isArray(s)?s.some(function(o){return o===a}):s instanceof Set?s.has(a):!1}function nextEvents(s){return __spreadArray([],__read$1(new Set(flatten(__spreadArray([],__read$1(s.map(function(a){return a.ownEvents})),!1)))),!1)}function isInFinalState(s,a){return a.type==="compound"?getChildren(a).some(function(o){return o.type==="final"&&has$1(s,o)}):a.type==="parallel"?getChildren(a).every(function(o){return isInFinalState(s,o)}):!1}function getMeta(s){return s===void 0&&(s=[]),s.reduce(function(a,o){return o.meta!==void 0&&(a[o.id]=o.meta),a},{})}function getTagsFromConfiguration(s){return new Set(flatten(s.map(function(a){return a.tags})))}function stateValuesEqual(s,a){if(s===a)return!0;if(s===void 0||a===void 0)return!1;if(isString$2(s)||isString$2(a))return s===a;var o=Object.keys(s),c=Object.keys(a);return o.length===c.length&&o.every(function(d){return stateValuesEqual(s[d],a[d])})}function isStateConfig(s){return typeof s!="object"||s===null?!1:"value"in s&&"_event"in s}function bindActionToState(s,a){var o=s.exec,c=__assign$1(__assign$1({},s),{exec:o!==void 0?function(){return o(a.context,a.event,{action:s,state:a,_event:a._event})}:void 0});return c}var State=function(){function s(a){var o=this,c;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=a.value,this.context=a.context,this._event=a._event,this._sessionid=a._sessionid,this.event=this._event.data,this.historyValue=a.historyValue,this.history=a.history,this.actions=a.actions||[],this.activities=a.activities||EMPTY_ACTIVITY_MAP,this.meta=getMeta(a.configuration),this.events=a.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=a.configuration,this.transitions=a.transitions,this.children=a.children,this.done=!!a.done,this.tags=(c=Array.isArray(a.tags)?new Set(a.tags):a.tags)!==null&&c!==void 0?c:new Set,this.machine=a.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nextEvents(o.configuration)}})}return s.from=function(a,o){if(a instanceof s)return a.context!==o?new s({value:a.value,context:o,_event:a._event,_sessionid:null,historyValue:a.historyValue,history:a.history,actions:[],activities:a.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):a;var c=initEvent;return new s({value:a,context:o,_event:c,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},s.create=function(a){return new s(a)},s.inert=function(a,o){if(a instanceof s){if(!a.actions.length)return a;var c=initEvent;return new s({value:a.value,context:o,_event:c,_sessionid:null,historyValue:a.historyValue,history:a.history,activities:a.activities,configuration:a.configuration,transitions:[],children:{}})}return s.from(a,o)},s.prototype.toStrings=function(a,o){var c=this;if(a===void 0&&(a=this.value),o===void 0&&(o="."),isString$2(a))return[a];var d=Object.keys(a);return d.concat.apply(d,__spreadArray([],__read$1(d.map(function(b){return c.toStrings(a[b],o).map(function($){return b+o+$})})),!1))},s.prototype.toJSON=function(){var a=this;a.configuration,a.transitions;var o=a.tags;a.machine;var c=__rest$1(a,["configuration","transitions","tags","machine"]);return __assign$1(__assign$1({},c),{tags:Array.from(o)})},s.prototype.matches=function(a){return matchesState(a,this.value)},s.prototype.hasTag=function(a){return this.tags.has(a)},s.prototype.can=function(a){var o;warn(!!this.machine);var c=(o=this.machine)===null||o===void 0?void 0:o.getTransitionData(this,a);return!!(c!=null&&c.transitions.length)&&c.transitions.some(function(d){return d.target!==void 0||d.actions.length})},s}(),defaultOptions={deferEvents:!1},Scheduler=function(){function s(a){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign$1(__assign$1({},defaultOptions),a)}return s.prototype.initialize=function(a){if(this.initialized=!0,a){if(!this.options.deferEvents){this.schedule(a);return}this.process(a)}this.flushEvents()},s.prototype.schedule=function(a){if(!this.initialized||this.processingEvent){this.queue.push(a);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(a),this.flushEvents()},s.prototype.clear=function(){this.queue=[]},s.prototype.flushEvents=function(){for(var a=this.queue.shift();a;)this.process(a),a=this.queue.shift()},s.prototype.process=function(a){this.processingEvent=!0;try{a()}catch(o){throw this.clear(),o}finally{this.processingEvent=!1}},s}(),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(s,a){return children.set(s,a),s},get:function(s){return children.get(s)},free:function(s){children.delete(s)}};function getGlobal(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function getDevTools(){var s=getGlobal();if(s&&"__xstate__"in s)return s.__xstate__}function registerService(s){if(getGlobal()){var a=getDevTools();a&&a.register(s)}}function spawnBehavior(s,a){a===void 0&&(a={});var o=s.initialState,c=new Set,d=[],b=!1,$=function(){if(!b){for(b=!0;d.length>0;){var et=d.shift();o=s.transition(o,et,_e),c.forEach(function(tt){return tt.next(o)})}b=!1}},j=toActorRef({id:a.id,send:function(et){d.push(et),$()},getSnapshot:function(){return o},subscribe:function(et,tt,rt){var nt=toObserver(et,tt,rt);return c.add(nt),nt.next(o),{unsubscribe:function(){c.delete(nt)}}}}),_e={parent:a.parent,self:j,id:a.id||"anonymous",observers:c};return o=s.start?s.start(_e):o,j}var DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},InterpreterStatus;(function(s){s[s.NotStarted=0]="NotStarted",s[s.Running=1]="Running",s[s.Stopped=2]="Stopped"})(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function s(a,o){o===void 0&&(o=s.defaultOptions);var c=this;this.machine=a,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(tt,rt){if(isArray$8(tt))return c.batch(tt),c.state;var nt=toSCXMLEvent(toEventObject(tt,rt));if(c.status===InterpreterStatus.Stopped)return c.state;if(c.status!==InterpreterStatus.Running&&!c.options.deferEvents)throw new Error('Event "'.concat(nt.name,'" was sent to uninitialized service "').concat(c.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(nt.data)));return c.scheduler.schedule(function(){c.forward(nt);var it=c._nextState(nt);c.update(it,nt)}),c._state},this.sendTo=function(tt,rt,nt){var it=c.parent&&(rt===SpecialTargets.Parent||c.parent.id===rt),at=it?c.parent:isString$2(rt)?rt===SpecialTargets.Internal?c:c.children.get(rt)||registry.get(rt):isActor$1(rt)?rt:void 0;if(!at){if(!it)throw new Error("Unable to send event to child '".concat(rt,"' from service '").concat(c.id,"'."));return}if("machine"in at){if(c.status!==InterpreterStatus.Stopped||c.parent!==at||c.state.done){var ct=__assign$1(__assign$1({},tt),{name:tt.name===error$1?"".concat(error(c.id)):tt.name,origin:c.sessionId});!nt&&c.machine.config.predictableActionArguments?c._outgoingQueue.push([at,ct]):at.send(ct)}}else!nt&&c.machine.config.predictableActionArguments?c._outgoingQueue.push([at,tt.data]):at.send(tt.data)},this._exec=function(tt,rt,nt,it){it===void 0&&(it=c.machine.options.actions);var at=tt.exec||getActionFunction(tt.type,it),ct=isFunction$2(at)?at:at?at.exec:tt.exec;if(ct)try{return ct(rt,nt.data,c.machine.config.predictableActionArguments?{action:tt,_event:nt}:{action:tt,state:c.state,_event:nt})}catch(Tt){throw c.parent&&c.parent.send({type:"xstate.error",data:Tt}),Tt}switch(tt.type){case raise$1:{var st=tt;c.defer(st);break}case send$1:var ot=tt;if(typeof ot.delay=="number"){c.defer(ot);return}else ot.to?c.sendTo(ot._event,ot.to,nt===initEvent):c.send(ot._event);break;case cancel$1:c.cancel(tt.sendId);break;case start$1:{if(c.status!==InterpreterStatus.Running)return;var ht=tt.activity;if(!c.machine.config.predictableActionArguments&&!c.state.activities[ht.id||ht.type])break;if(ht.type===ActionTypes.Invoke){var dt=toInvokeSource$1(ht.src),ft=c.machine.options.services?c.machine.options.services[dt.type]:void 0,mt=ht.id,gt=ht.data,vt="autoForward"in ht?ht.autoForward:!!ht.forward;if(!ft)return;var yt=gt?mapContext(gt,rt,nt):void 0;if(typeof ft=="string")return;var Et=isFunction$2(ft)?ft(rt,nt.data,{data:yt,src:dt,meta:ht.meta}):ft;if(!Et)return;var St=void 0;isMachine(Et)&&(Et=yt?Et.withContext(yt):Et,St={autoForward:vt}),c.spawn(Et,mt,St)}else c.spawnActivity(ht);break}case stop$2:{c.stopChild(tt.activity.id);break}case log$1:var Ct=tt,wt=Ct.label,_t=Ct.value;wt?c.logger(wt,_t):c.logger(_t);break}};var d=__assign$1(__assign$1({},s.defaultOptions),o),b=d.clock,$=d.logger,j=d.parent,_e=d.id,et=_e!==void 0?_e:a.id;this.id=et,this.logger=$,this.clock=b,this.parent=j,this.options=d,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(s.prototype,"initialState",{get:function(){var a=this;return this._initialState?this._initialState:provide(this,function(){return a._initialState=a.machine.initialState,a._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),s.prototype.execute=function(a,o){var c,d;try{for(var b=__values(a.actions),$=b.next();!$.done;$=b.next()){var j=$.value;this.exec(j,a,o)}}catch(_e){c={error:_e}}finally{try{$&&!$.done&&(d=b.return)&&d.call(b)}finally{if(c)throw c.error}}},s.prototype.update=function(a,o){var c,d,b,$,j,_e,et,tt,rt=this;if(a._sessionid=this.sessionId,this._state=a,(!this.machine.config.predictableActionArguments||o===initEvent)&&this.options.execute)this.execute(this.state);else for(var nt=void 0;nt=this._outgoingQueue.shift();)nt[0].send(nt[1]);if(this.children.forEach(function(Et){rt.state.children[Et.id]=Et}),this.devTools&&this.devTools.send(o.data,a),a.event)try{for(var it=__values(this.eventListeners),at=it.next();!at.done;at=it.next()){var ct=at.value;ct(a.event)}}catch(Et){c={error:Et}}finally{try{at&&!at.done&&(d=it.return)&&d.call(it)}finally{if(c)throw c.error}}try{for(var st=__values(this.listeners),ot=st.next();!ot.done;ot=st.next()){var ct=ot.value;ct(a,a.event)}}catch(Et){b={error:Et}}finally{try{ot&&!ot.done&&($=st.return)&&$.call(st)}finally{if(b)throw b.error}}try{for(var ht=__values(this.contextListeners),dt=ht.next();!dt.done;dt=ht.next()){var ft=dt.value;ft(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(Et){j={error:Et}}finally{try{dt&&!dt.done&&(_e=ht.return)&&_e.call(ht)}finally{if(j)throw j.error}}if(this.state.done){var mt=a.configuration.find(function(Et){return Et.type==="final"&&Et.parent===rt.machine}),gt=mt&&mt.doneData?mapContext(mt.doneData,a.context,o):void 0;this._doneEvent=doneInvoke(this.id,gt);try{for(var vt=__values(this.doneListeners),yt=vt.next();!yt.done;yt=vt.next()){var ct=yt.value;ct(this._doneEvent)}}catch(Et){et={error:Et}}finally{try{yt&&!yt.done&&(tt=vt.return)&&tt.call(vt)}finally{if(et)throw et.error}}this._stop(),this._stopChildren(),registry.free(this.sessionId)}},s.prototype.onTransition=function(a){return this.listeners.add(a),this.status===InterpreterStatus.Running&&a(this.state,this.state.event),this},s.prototype.subscribe=function(a,o,c){var d=this,b=toObserver(a,o,c);this.listeners.add(b.next),this.status!==InterpreterStatus.NotStarted&&b.next(this.state);var $=function(){d.doneListeners.delete($),d.stopListeners.delete($),b.complete()};return this.status===InterpreterStatus.Stopped?b.complete():(this.onDone($),this.onStop($)),{unsubscribe:function(){d.listeners.delete(b.next),d.doneListeners.delete($),d.stopListeners.delete($)}}},s.prototype.onEvent=function(a){return this.eventListeners.add(a),this},s.prototype.onSend=function(a){return this.sendListeners.add(a),this},s.prototype.onChange=function(a){return this.contextListeners.add(a),this},s.prototype.onStop=function(a){return this.stopListeners.add(a),this},s.prototype.onDone=function(a){return this.status===InterpreterStatus.Stopped&&this._doneEvent?a(this._doneEvent):this.doneListeners.add(a),this},s.prototype.off=function(a){return this.listeners.delete(a),this.eventListeners.delete(a),this.sendListeners.delete(a),this.stopListeners.delete(a),this.doneListeners.delete(a),this.contextListeners.delete(a),this},s.prototype.start=function(a){var o=this;if(this.status===InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var c=a===void 0?this.initialState:provide(this,function(){return isStateConfig(a)?o.machine.resolveState(a):o.machine.resolveState(State.from(a,o.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){o.update(c,initEvent)}),this},s.prototype._stopChildren=function(){this.children.forEach(function(a){isFunction$2(a.stop)&&a.stop()}),this.children.clear()},s.prototype._stop=function(){var a,o,c,d,b,$,j,_e,et,tt;try{for(var rt=__values(this.listeners),nt=rt.next();!nt.done;nt=rt.next()){var it=nt.value;this.listeners.delete(it)}}catch(vt){a={error:vt}}finally{try{nt&&!nt.done&&(o=rt.return)&&o.call(rt)}finally{if(a)throw a.error}}try{for(var at=__values(this.stopListeners),ct=at.next();!ct.done;ct=at.next()){var it=ct.value;it(),this.stopListeners.delete(it)}}catch(vt){c={error:vt}}finally{try{ct&&!ct.done&&(d=at.return)&&d.call(at)}finally{if(c)throw c.error}}try{for(var st=__values(this.contextListeners),ot=st.next();!ot.done;ot=st.next()){var it=ot.value;this.contextListeners.delete(it)}}catch(vt){b={error:vt}}finally{try{ot&&!ot.done&&($=st.return)&&$.call(st)}finally{if(b)throw b.error}}try{for(var ht=__values(this.doneListeners),dt=ht.next();!dt.done;dt=ht.next()){var it=dt.value;this.doneListeners.delete(it)}}catch(vt){j={error:vt}}finally{try{dt&&!dt.done&&(_e=ht.return)&&_e.call(ht)}finally{if(j)throw j.error}}if(!this.initialized)return this;this.initialized=!1,this.status=InterpreterStatus.Stopped,this._initialState=void 0;try{for(var ft=__values(Object.keys(this.delayedEventsMap)),mt=ft.next();!mt.done;mt=ft.next()){var gt=mt.value;this.clock.clearTimeout(this.delayedEventsMap[gt])}}catch(vt){et={error:vt}}finally{try{mt&&!mt.done&&(tt=ft.return)&&tt.call(ft)}finally{if(et)throw et.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},s.prototype.stop=function(){var a=this,o=this.scheduler;return this._stop(),o.schedule(function(){var c;if(!(!((c=a._state)===null||c===void 0)&&c.done)){var d=toSCXMLEvent({type:"xstate.stop"}),b=provide(a,function(){var $=flatten(__spreadArray([],__read$1(a.state.configuration),!1).sort(function(rt,nt){return nt.order-rt.order}).map(function(rt){return toActionObjects(rt.onExit,a.machine.options.actions)})),j=__read$1(resolveActions(a.machine,a.state,a.state.context,d,[{type:"exit",actions:$}],a.machine.config.predictableActionArguments?a._exec:void 0,a.machine.config.predictableActionArguments||a.machine.config.preserveActionOrder),2),_e=j[0],et=j[1],tt=new State({value:a.state.value,context:et,_event:d,_sessionid:a.sessionId,historyValue:void 0,history:a.state,actions:_e.filter(function(rt){return!isRaisableAction(rt)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:a.state.done,tags:a.state.tags,machine:a.machine});return tt.changed=!0,tt});a.update(b,d),a._stopChildren(),registry.free(a.sessionId)}}),this},s.prototype.batch=function(a){var o=this;if(!(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents)){if(this.status!==InterpreterStatus.Running)throw new Error("".concat(a.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(a.length){var c=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var d,b,$=o.state,j=!1,_e=[],et=function(it){var at=toSCXMLEvent(it);o.forward(at),$=provide(o,function(){return o.machine.transition($,at,void 0,c||void 0)}),_e.push.apply(_e,__spreadArray([],__read$1(o.machine.config.predictableActionArguments?$.actions:$.actions.map(function(ct){return bindActionToState(ct,$)})),!1)),j=j||!!$.changed};try{for(var tt=__values(a),rt=tt.next();!rt.done;rt=tt.next()){var nt=rt.value;et(nt)}}catch(it){d={error:it}}finally{try{rt&&!rt.done&&(b=tt.return)&&b.call(tt)}finally{if(d)throw d.error}}$.changed=j,$.actions=_e,o.update($,toSCXMLEvent(a[a.length-1]))})}},s.prototype.sender=function(a){return this.send.bind(this,a)},s.prototype._nextState=function(a,o){var c=this;o===void 0&&(o=!!this.machine.config.predictableActionArguments&&this._exec);var d=toSCXMLEvent(a);if(d.name.indexOf(errorPlatform)===0&&!this.state.nextEvents.some(function($){return $.indexOf(errorPlatform)===0}))throw d.data.data;var b=provide(this,function(){return c.machine.transition(c.state,d,void 0,o||void 0)});return b},s.prototype.nextState=function(a){return this._nextState(a,!1)},s.prototype.forward=function(a){var o,c;try{for(var d=__values(this.forwardTo),b=d.next();!b.done;b=d.next()){var $=b.value,j=this.children.get($);if(!j)throw new Error("Unable to forward event '".concat(a,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat($,"'."));j.send(a)}}catch(_e){o={error:_e}}finally{try{b&&!b.done&&(c=d.return)&&c.call(d)}finally{if(o)throw o.error}}},s.prototype.defer=function(a){var o=this,c=this.clock.setTimeout(function(){"to"in a&&a.to?o.sendTo(a._event,a.to,!0):o.send(a._event)},a.delay);a.id&&(this.delayedEventsMap[a.id]=c)},s.prototype.cancel=function(a){this.clock.clearTimeout(this.delayedEventsMap[a]),delete this.delayedEventsMap[a]},s.prototype.exec=function(a,o,c){c===void 0&&(c=this.machine.options.actions),this._exec(a,o.context,o._event,c)},s.prototype.removeChild=function(a){var o;this.children.delete(a),this.forwardTo.delete(a),(o=this.state)===null||o===void 0||delete o.children[a]},s.prototype.stopChild=function(a){var o=this.children.get(a);o&&(this.removeChild(a),isFunction$2(o.stop)&&o.stop())},s.prototype.spawn=function(a,o,c){if(this.status!==InterpreterStatus.Running)return createDeferredActor(a,o);if(isPromiseLike(a))return this.spawnPromise(Promise.resolve(a),o);if(isFunction$2(a))return this.spawnCallback(a,o);if(isSpawnedActor(a))return this.spawnActor(a,o);if(isObservable(a))return this.spawnObservable(a,o);if(isMachine(a))return this.spawnMachine(a,__assign$1(__assign$1({},c),{id:o}));if(isBehavior(a))return this.spawnBehavior(a,o);throw new Error('Unable to spawn entity "'.concat(o,'" of type "').concat(typeof a,'".'))},s.prototype.spawnMachine=function(a,o){var c=this;o===void 0&&(o={});var d=new s(a,__assign$1(__assign$1({},this.options),{parent:this,id:o.id||a.id})),b=__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),o);b.sync&&d.onTransition(function(j){c.send(update,{state:j,id:d.id})});var $=d;return this.children.set(d.id,$),b.autoForward&&this.forwardTo.add(d.id),d.onDone(function(j){c.removeChild(d.id),c.send(toSCXMLEvent(j,{origin:d.id}))}).start(),$},s.prototype.spawnBehavior=function(a,o){var c=spawnBehavior(a,{id:o,parent:this});return this.children.set(o,c),c},s.prototype.spawnPromise=function(a,o){var c,d=this,b=!1,$;a.then(function(_e){b||($=_e,d.removeChild(o),d.send(toSCXMLEvent(doneInvoke(o,_e),{origin:o})))},function(_e){if(!b){d.removeChild(o);var et=error(o,_e);try{d.send(toSCXMLEvent(et,{origin:o}))}catch{d.devTools&&d.devTools.send(et,d.state),d.machine.strict&&d.stop()}}});var j=(c={id:o,send:function(){},subscribe:function(_e,et,tt){var rt=toObserver(_e,et,tt),nt=!1;return a.then(function(it){nt||(rt.next(it),!nt&&rt.complete())},function(it){nt||rt.error(it)}),{unsubscribe:function(){return nt=!0}}},stop:function(){b=!0},toJSON:function(){return{id:o}},getSnapshot:function(){return $}},c[symbolObservable]=function(){return this},c);return this.children.set(o,j),j},s.prototype.spawnCallback=function(a,o){var c,d=this,b=!1,$=new Set,j=new Set,_e,et=function(nt){_e=nt,j.forEach(function(it){return it(nt)}),!b&&d.send(toSCXMLEvent(nt,{origin:o}))},tt;try{tt=a(et,function(nt){$.add(nt)})}catch(nt){this.send(error(o,nt))}if(isPromiseLike(tt))return this.spawnPromise(tt,o);var rt=(c={id:o,send:function(nt){return $.forEach(function(it){return it(nt)})},subscribe:function(nt){var it=toObserver(nt);return j.add(it.next),{unsubscribe:function(){j.delete(it.next)}}},stop:function(){b=!0,isFunction$2(tt)&&tt()},toJSON:function(){return{id:o}},getSnapshot:function(){return _e}},c[symbolObservable]=function(){return this},c);return this.children.set(o,rt),rt},s.prototype.spawnObservable=function(a,o){var c,d=this,b,$=a.subscribe(function(_e){b=_e,d.send(toSCXMLEvent(_e,{origin:o}))},function(_e){d.removeChild(o),d.send(toSCXMLEvent(error(o,_e),{origin:o}))},function(){d.removeChild(o),d.send(toSCXMLEvent(doneInvoke(o),{origin:o}))}),j=(c={id:o,send:function(){},subscribe:function(_e,et,tt){return a.subscribe(_e,et,tt)},stop:function(){return $.unsubscribe()},getSnapshot:function(){return b},toJSON:function(){return{id:o}}},c[symbolObservable]=function(){return this},c);return this.children.set(o,j),j},s.prototype.spawnActor=function(a,o){return this.children.set(o,a),a},s.prototype.spawnActivity=function(a){var o=this.machine.options&&this.machine.options.activities?this.machine.options.activities[a.type]:void 0;if(o){var c=o(this.state.context,a);this.spawnEffect(a.id,c)}},s.prototype.spawnEffect=function(a,o){var c;this.children.set(a,(c={id:a,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:o||void 0,getSnapshot:function(){},toJSON:function(){return{id:a}}},c[symbolObservable]=function(){return this},c))},s.prototype.attachDev=function(){var a=getGlobal();if(this.options.devTools&&a){if(a.__REDUX_DEVTOOLS_EXTENSION__){var o=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=a.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign$1(__assign$1({name:this.id,autoPause:!0,stateSanitizer:function(c){return{value:c.value,context:c.context,actions:c.actions}}},o),{features:__assign$1({jump:!1,skip:!1},o?o.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},s.prototype.toJSON=function(){return{id:this.id}},s.prototype[symbolObservable]=function(){return this},s.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},s.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(a,o){return setTimeout(a,o)},clearTimeout:function(a){return clearTimeout(a)}},logger:console.log.bind(console),devTools:!1},s.interpret=interpret,s}(),resolveSpawnOptions=function(s){return isString$2(s)?__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),{name:s}):__assign$1(__assign$1(__assign$1({},DEFAULT_SPAWN_OPTIONS),{name:uniqueId()}),s)};function spawn(s,a){var o=resolveSpawnOptions(a);return consume(function(c){return c?c.spawn(s,o.name,o):createDeferredActor(s,o.name)})}function interpret(s,a){var o=new Interpreter(s,a);return o}function toInvokeSource(s){if(typeof s=="string"){var a={type:s};return a.toString=function(){return s},a}return s}function toInvokeDefinition(s){return __assign$1(__assign$1({type:invoke},s),{toJSON:function(){s.onDone,s.onError;var a=__rest$1(s,["onDone","onError"]);return __assign$1(__assign$1({},a),{type:invoke,src:toInvokeSource(s.src)})}})}var NULL_EVENT="",STATE_IDENTIFIER="#",WILDCARD="*",EMPTY_OBJECT={},isStateId=function(s){return s[0]===STATE_IDENTIFIER},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function s(a,o,c,d){c===void 0&&(c="context"in a?a.context:void 0);var b=this,$;this.config=a,this._context=c,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(createDefaultOptions(),o),this.parent=d==null?void 0:d.parent,this.key=this.config.key||(d==null?void 0:d.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:STATE_DELIMITER),this.id=this.config.id||__spreadArray([this.machine.key],__read$1(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:($=this.config.schema)!==null&&$!==void 0?$:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mapValues(this.config.states,function(et,tt){var rt,nt=new s(et,{},void 0,{parent:b,key:tt});return Object.assign(b.idMap,__assign$1((rt={},rt[nt.id]=nt,rt),nt.idMap)),nt}):EMPTY_OBJECT;var j=0;function _e(et){var tt,rt;et.order=j++;try{for(var nt=__values(getAllChildren(et)),it=nt.next();!it.done;it=nt.next()){var at=it.value;_e(at)}}catch(ct){tt={error:ct}}finally{try{it&&!it.done&&(rt=nt.return)&&rt.call(nt)}finally{if(tt)throw tt.error}}}_e(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(et){var tt=et.event;return tt===NULL_EVENT}):NULL_EVENT in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=toArray(this.config.entry||this.config.onEntry).map(function(et){return toActionObject(et)}),this.onExit=toArray(this.config.exit||this.config.onExit).map(function(et){return toActionObject(et)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=toArray(this.config.invoke).map(function(et,tt){var rt,nt;if(isMachine(et)){var it=createInvokeId(b.id,tt);return b.machine.options.services=__assign$1((rt={},rt[it]=et,rt),b.machine.options.services),toInvokeDefinition({src:it,id:it})}else if(isString$2(et.src)){var it=et.id||createInvokeId(b.id,tt);return toInvokeDefinition(__assign$1(__assign$1({},et),{id:it,src:et.src}))}else if(isMachine(et.src)||isFunction$2(et.src)){var it=et.id||createInvokeId(b.id,tt);return b.machine.options.services=__assign$1((nt={},nt[it]=et.src,nt),b.machine.options.services),toInvokeDefinition(__assign$1(__assign$1({id:it},et),{src:it}))}else{var at=et.src;return toInvokeDefinition(__assign$1(__assign$1({id:createInvokeId(b.id,tt)},et),{src:at}))}}),this.activities=toArray(this.config.activities).concat(this.invoke).map(function(et){return toActivityDefinition(et)}),this.transition=this.transition.bind(this),this.tags=toArray(this.config.tags)}return s.prototype._init=function(){this.__cache.transitions||getAllStateNodes(this).forEach(function(a){return a.on})},s.prototype.withConfig=function(a,o){var c=this.options,d=c.actions,b=c.activities,$=c.guards,j=c.services,_e=c.delays;return new s(this.config,{actions:__assign$1(__assign$1({},d),a.actions),activities:__assign$1(__assign$1({},b),a.activities),guards:__assign$1(__assign$1({},$),a.guards),services:__assign$1(__assign$1({},j),a.services),delays:__assign$1(__assign$1({},_e),a.delays)},o??this.context)},s.prototype.withContext=function(a){return new s(this.config,this.options,a)},Object.defineProperty(s.prototype,"context",{get:function(){return isFunction$2(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mapValues(this.states,function(a){return a.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return this.definition},Object.defineProperty(s.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var a=this.transitions;return this.__cache.on=a.reduce(function(o,c){return o[c.eventType]=o[c.eventType]||[],o[c.eventType].push(c),o},{})},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),s.prototype.getCandidates=function(a){if(this.__cache.candidates[a])return this.__cache.candidates[a];var o=a===NULL_EVENT,c=this.transitions.filter(function(d){var b=d.eventType===a;return o?b:b||d.eventType===WILDCARD});return this.__cache.candidates[a]=c,c},s.prototype.getDelayedTransitions=function(){var a=this,o=this.config.after;if(!o)return[];var c=function(b,$){var j=isFunction$2(b)?"".concat(a.id,":delay[").concat($,"]"):b,_e=after(j,a.id);return a.onEntry.push(send(_e,{delay:b})),a.onExit.push(cancel(_e)),_e},d=isArray$8(o)?o.map(function(b,$){var j=c(b.delay,$);return __assign$1(__assign$1({},b),{event:j})}):flatten(Object.keys(o).map(function(b,$){var j=o[b],_e=isString$2(j)?{target:j}:j,et=isNaN(+b)?b:+b,tt=c(et,$);return toArray(_e).map(function(rt){return __assign$1(__assign$1({},rt),{event:tt,delay:et})})}));return d.map(function(b){var $=b.delay;return __assign$1(__assign$1({},a.formatTransition(b)),{delay:$})})},s.prototype.getStateNodes=function(a){var o,c=this;if(!a)return[];var d=a instanceof State?a.value:toStateValue(a,this.delimiter);if(isString$2(d)){var b=this.getStateNode(d).initial;return b!==void 0?this.getStateNodes((o={},o[d]=b,o)):[this,this.states[d]]}var $=Object.keys(d),j=[this];return j.push.apply(j,__spreadArray([],__read$1(flatten($.map(function(_e){return c.getStateNode(_e).getStateNodes(d[_e])}))),!1)),j},s.prototype.handles=function(a){var o=getEventType(a);return this.events.includes(o)},s.prototype.resolveState=function(a){var o=a instanceof State?a:State.create(a),c=Array.from(getConfiguration([],this.getStateNodes(o.value)));return new State(__assign$1(__assign$1({},o),{value:this.resolve(o.value),configuration:c,done:isInFinalState(c,this),tags:getTagsFromConfiguration(c),machine:this.machine}))},s.prototype.transitionLeafNode=function(a,o,c){var d=this.getStateNode(a),b=d.next(o,c);return!b||!b.transitions.length?this.next(o,c):b},s.prototype.transitionCompoundNode=function(a,o,c){var d=Object.keys(a),b=this.getStateNode(d[0]),$=b._transition(a[d[0]],o,c);return!$||!$.transitions.length?this.next(o,c):$},s.prototype.transitionParallelNode=function(a,o,c){var d,b,$={};try{for(var j=__values(Object.keys(a)),_e=j.next();!_e.done;_e=j.next()){var et=_e.value,tt=a[et];if(tt){var rt=this.getStateNode(et),nt=rt._transition(tt,o,c);nt&&($[et]=nt)}}}catch(ot){d={error:ot}}finally{try{_e&&!_e.done&&(b=j.return)&&b.call(j)}finally{if(d)throw d.error}}var it=Object.keys($).map(function(ot){return $[ot]}),at=flatten(it.map(function(ot){return ot.transitions})),ct=it.some(function(ot){return ot.transitions.length>0});if(!ct)return this.next(o,c);var st=flatten(Object.keys($).map(function(ot){return $[ot].configuration}));return{transitions:at,exitSet:flatten(it.map(function(ot){return ot.exitSet})),configuration:st,source:o,actions:flatten(Object.keys($).map(function(ot){return $[ot].actions}))}},s.prototype._transition=function(a,o,c){return isString$2(a)?this.transitionLeafNode(a,o,c):Object.keys(a).length===1?this.transitionCompoundNode(a,o,c):this.transitionParallelNode(a,o,c)},s.prototype.getTransitionData=function(a,o){return this._transition(a.value,a,toSCXMLEvent(o))},s.prototype.next=function(a,o){var c,d,b=this,$=o.name,j=[],_e=[],et;try{for(var tt=__values(this.getCandidates($)),rt=tt.next();!rt.done;rt=tt.next()){var nt=rt.value,it=nt.cond,at=nt.in,ct=a.context,st=at?isString$2(at)&&isStateId(at)?a.matches(toStateValue(this.getStateNodeById(at).path,this.delimiter)):matchesState(toStateValue(at,this.delimiter),path(this.path.slice(0,-2))(a.value)):!0,ot=!1;try{ot=!it||evaluateGuard(this.machine,it,ct,o,a)}catch(ft){throw new Error("Unable to evaluate guard '".concat(it.name||it.type,"' in transition for event '").concat($,"' in state node '").concat(this.id,`':
`).concat(ft.message))}if(ot&&st){nt.target!==void 0&&(_e=nt.target),j.push.apply(j,__spreadArray([],__read$1(nt.actions),!1)),et=nt;break}}}catch(ft){c={error:ft}}finally{try{rt&&!rt.done&&(d=tt.return)&&d.call(tt)}finally{if(c)throw c.error}}if(et){if(!_e.length)return{transitions:[et],exitSet:[],configuration:a.value?[this]:[],source:a,actions:j};var ht=flatten(_e.map(function(ft){return b.getRelativeStateNodes(ft,a.historyValue)})),dt=!!et.internal;return{transitions:[et],exitSet:dt?[]:flatten(_e.map(function(ft){return b.getPotentiallyReenteringNodes(ft)})),configuration:ht,source:a,actions:j}}},s.prototype.getPotentiallyReenteringNodes=function(a){if(this.order<a.order)return[this];for(var o=[],c=this,d=a;c&&c!==d;)o.push(c),c=c.parent;return c!==d?[]:(o.push(d),o)},s.prototype.getActions=function(a,o,c,d,b,$,j){var _e,et,tt,rt,nt=this,it=$?getConfiguration([],this.getStateNodes($.value)):[],at=new Set;try{for(var ct=__values(Array.from(a).sort(function(Ct,wt){return Ct.order-wt.order})),st=ct.next();!st.done;st=ct.next()){var ot=st.value;(!has$1(it,ot)||has$1(c.exitSet,ot)||ot.parent&&at.has(ot.parent))&&at.add(ot)}}catch(Ct){_e={error:Ct}}finally{try{st&&!st.done&&(et=ct.return)&&et.call(ct)}finally{if(_e)throw _e.error}}try{for(var ht=__values(it),dt=ht.next();!dt.done;dt=ht.next()){var ot=dt.value;(!has$1(a,ot)||has$1(c.exitSet,ot.parent))&&c.exitSet.push(ot)}}catch(Ct){tt={error:Ct}}finally{try{dt&&!dt.done&&(rt=ht.return)&&rt.call(ht)}finally{if(tt)throw tt.error}}c.exitSet.sort(function(Ct,wt){return wt.order-Ct.order});var ft=Array.from(at).sort(function(Ct,wt){return Ct.order-wt.order}),mt=new Set(c.exitSet),gt=flatten(ft.map(function(Ct){var wt=[];if(Ct.type!=="final")return wt;var _t=Ct.parent;if(!_t.parent)return wt;wt.push(done(Ct.id,Ct.doneData),done(_t.id,Ct.doneData?mapContext(Ct.doneData,d,b):void 0));var Tt=_t.parent;return Tt.type==="parallel"&&getChildren(Tt).every(function(Mt){return isInFinalState(c.configuration,Mt)})&&wt.push(done(Tt.id)),wt})),vt=ft.map(function(Ct){var wt=Ct.onEntry,_t=Ct.activities.map(function(Tt){return start(Tt)});return{type:"entry",actions:toActionObjects(j?__spreadArray(__spreadArray([],__read$1(wt),!1),__read$1(_t),!1):__spreadArray(__spreadArray([],__read$1(_t),!1),__read$1(wt),!1),nt.machine.options.actions)}}).concat({type:"state_done",actions:gt.map(function(Ct){return raise(Ct)})}),yt=Array.from(mt).map(function(Ct){return{type:"exit",actions:toActionObjects(__spreadArray(__spreadArray([],__read$1(Ct.onExit),!1),__read$1(Ct.activities.map(function(wt){return stop$1(wt)})),!1),nt.machine.options.actions)}}),Et=yt.concat({type:"transition",actions:toActionObjects(c.actions,this.machine.options.actions)}).concat(vt);if(o){var St=toActionObjects(flatten(__spreadArray([],__read$1(a),!1).sort(function(Ct,wt){return wt.order-Ct.order}).map(function(Ct){return Ct.onExit})),this.machine.options.actions).filter(function(Ct){return!isRaisableAction(Ct)});return Et.concat({type:"stop",actions:St})}return Et},s.prototype.transition=function(a,o,c,d){a===void 0&&(a=this.initialState);var b=toSCXMLEvent(o),$;if(a instanceof State)$=c===void 0?a:this.resolveState(State.from(a,c));else{var j=isString$2(a)?this.resolve(pathToStateValue(this.getResolvedPath(a))):this.resolve(a),_e=c??this.machine.context;$=this.resolveState(State.from(j,_e))}if(this.strict&&!this.events.includes(b.name)&&!isBuiltInEvent(b.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(b.name,"'"));var et=this._transition($.value,$,b)||{transitions:[],configuration:[],exitSet:[],source:$,actions:[]},tt=getConfiguration([],this.getStateNodes($.value)),rt=et.configuration.length?getConfiguration(tt,et.configuration):tt;return et.configuration=__spreadArray([],__read$1(rt),!1),this.resolveTransition(et,$,$.context,d,b)},s.prototype.resolveRaisedTransition=function(a,o,c,d){var b,$=a.actions;return a=this.transition(a,o,void 0,d),a._event=c,a.event=c.data,(b=a.actions).unshift.apply(b,__spreadArray([],__read$1($),!1)),a},s.prototype.resolveTransition=function(a,o,c,d,b){var $,j,_e,et,tt=this;b===void 0&&(b=initEvent);var rt=a.configuration,nt=!o||a.transitions.length>0,it=nt?a.configuration:o?o.configuration:[],at=isInFinalState(it,this),ct=nt?getValue(this.machine,rt):void 0,st=o?o.historyValue?o.historyValue:a.source?this.machine.historyValue(o.value):void 0:void 0,ot=this.getActions(new Set(it),at,a,c,b,o,d),ht=o?__assign$1({},o.activities):{};try{for(var dt=__values(ot),ft=dt.next();!ft.done;ft=dt.next()){var mt=ft.value;try{for(var gt=(_e=void 0,__values(mt.actions)),vt=gt.next();!vt.done;vt=gt.next()){var yt=vt.value;yt.type===start$1?ht[yt.activity.id||yt.activity.type]=yt:yt.type===stop$2&&(ht[yt.activity.id||yt.activity.type]=!1)}}catch(Qt){_e={error:Qt}}finally{try{vt&&!vt.done&&(et=gt.return)&&et.call(gt)}finally{if(_e)throw _e.error}}}}catch(Qt){$={error:Qt}}finally{try{ft&&!ft.done&&(j=dt.return)&&j.call(dt)}finally{if($)throw $.error}}var Et=__read$1(resolveActions(this,o,c,b,ot,d,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),St=Et[0],Ct=Et[1],wt=__read$1(partition(St,isRaisableAction),2),_t=wt[0],Tt=wt[1],Mt=St.filter(function(Qt){var or;return Qt.type===start$1&&((or=Qt.activity)===null||or===void 0?void 0:or.type)===invoke}),Bt=Mt.reduce(function(Qt,or){return Qt[or.activity.id]=createInvocableActor(or.activity,tt.machine,Ct,b),Qt},o?__assign$1({},o.children):{}),Rt=new State({value:ct||o.value,context:Ct,_event:b,_sessionid:o?o._sessionid:null,historyValue:ct?st?updateHistoryValue(st,ct):void 0:o?o.historyValue:void 0,history:!ct||a.source?o:void 0,actions:ct?Tt:[],activities:ct?ht:o?o.activities:{},events:[],configuration:it,transitions:a.transitions,children:Bt,done:at,tags:getTagsFromConfiguration(it),machine:this}),bt=c!==Ct;Rt.changed=b.name===update||bt;var Pt=Rt.history;Pt&&delete Pt.history;var Dt=!at&&(this._transient||rt.some(function(Qt){return Qt._transient}));if(!nt&&(!Dt||b.name===NULL_EVENT))return Rt;var $t=Rt;if(!at)for(Dt&&($t=this.resolveRaisedTransition($t,{type:nullEvent},b,d));_t.length;){var Lt=_t.shift();$t=this.resolveRaisedTransition($t,Lt._event,b,d)}var Jt=$t.changed||(Pt?!!$t.actions.length||bt||typeof Pt.value!=typeof $t.value||!stateValuesEqual($t.value,Pt.value):void 0);return $t.changed=Jt,$t.history=Pt,$t},s.prototype.getStateNode=function(a){if(isStateId(a))return this.machine.getStateNodeById(a);if(!this.states)throw new Error("Unable to retrieve child state '".concat(a,"' from '").concat(this.id,"'; no child states exist."));var o=this.states[a];if(!o)throw new Error("Child state '".concat(a,"' does not exist on '").concat(this.id,"'"));return o},s.prototype.getStateNodeById=function(a){var o=isStateId(a)?a.slice(STATE_IDENTIFIER.length):a;if(o===this.id)return this;var c=this.machine.idMap[o];if(!c)throw new Error("Child state node '#".concat(o,"' does not exist on machine '").concat(this.id,"'"));return c},s.prototype.getStateNodeByPath=function(a){if(typeof a=="string"&&isStateId(a))try{return this.getStateNodeById(a.slice(1))}catch{}for(var o=toStatePath(a,this.delimiter).slice(),c=this;o.length;){var d=o.shift();if(!d.length)break;c=c.getStateNode(d)}return c},s.prototype.resolve=function(a){var o,c=this;if(!a)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return mapValues(this.initialStateValue,function(b,$){return b?c.getStateNode($).resolve(a[$]||b):EMPTY_OBJECT});case"compound":if(isString$2(a)){var d=this.getStateNode(a);return d.type==="parallel"||d.type==="compound"?(o={},o[a]=d.initialStateValue,o):a}return Object.keys(a).length?mapValues(a,function(b,$){return b?c.getStateNode($).resolve(b):EMPTY_OBJECT}):this.initialStateValue||{};default:return a||EMPTY_OBJECT}},s.prototype.getResolvedPath=function(a){if(isStateId(a)){var o=this.machine.idMap[a.slice(STATE_IDENTIFIER.length)];if(!o)throw new Error("Unable to find state node '".concat(a,"'"));return o.path}return toStatePath(a,this.delimiter)},Object.defineProperty(s.prototype,"initialStateValue",{get:function(){var a;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var o;if(this.type==="parallel")o=mapFilterValues(this.states,function(c){return c.initialStateValue||EMPTY_OBJECT},function(c){return c.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));o=isLeafNode(this.states[this.initial])?this.initial:(a={},a[this.initial]=this.states[this.initial].initialStateValue,a)}else o={};return this.__cache.initialStateValue=o,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),s.prototype.getInitialState=function(a,o){this._init();var c=this.getStateNodes(a);return this.resolveTransition({configuration:c,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,o??this.machine.context,void 0)},Object.defineProperty(s.prototype,"initialState",{get:function(){var a=this.initialStateValue;if(!a)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"target",{get:function(){var a;if(this.type==="history"){var o=this.config;isString$2(o.target)?a=isStateId(o.target)?pathToStateValue(this.machine.getStateNodeById(o.target).path.slice(this.path.length-1)):o.target:a=o.target}return a},enumerable:!1,configurable:!0}),s.prototype.getRelativeStateNodes=function(a,o,c){return c===void 0&&(c=!0),c?a.type==="history"?a.resolveHistory(o):a.initialStateNodes:[a]},Object.defineProperty(s.prototype,"initialStateNodes",{get:function(){var a=this;if(isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var o=toStatePaths(this.initialStateValue);return flatten(o.map(function(c){return a.getFromRelativePath(c)}))},enumerable:!1,configurable:!0}),s.prototype.getFromRelativePath=function(a){if(!a.length)return[this];var o=__read$1(a),c=o[0],d=o.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(c,"' from node with no states"));var b=this.getStateNode(c);if(b.type==="history")return b.resolveHistory();if(!this.states[c])throw new Error("Child state '".concat(c,"' does not exist on '").concat(this.id,"'"));return this.states[c].getFromRelativePath(d)},s.prototype.historyValue=function(a){if(Object.keys(this.states).length)return{current:a||this.initialStateValue,states:mapFilterValues(this.states,function(o,c){if(!a)return o.historyValue();var d=isString$2(a)?void 0:a[c];return o.historyValue(d||o.initialStateValue)},function(o){return!o.history})}},s.prototype.resolveHistory=function(a){var o=this;if(this.type!=="history")return[this];var c=this.parent;if(!a){var d=this.target;return d?flatten(toStatePaths(d).map(function($){return c.getFromRelativePath($)})):c.initialStateNodes}var b=nestedPath(c.path,"states")(a).current;return isString$2(b)?[c.getStateNode(b)]:flatten(toStatePaths(b).map(function($){return o.history==="deep"?c.getFromRelativePath($):[c.states[$[0]]]}))},Object.defineProperty(s.prototype,"stateIds",{get:function(){var a=this,o=flatten(Object.keys(this.states).map(function(c){return a.states[c].stateIds}));return[this.id].concat(o)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"events",{get:function(){var a,o,c,d;if(this.__cache.events)return this.__cache.events;var b=this.states,$=new Set(this.ownEvents);if(b)try{for(var j=__values(Object.keys(b)),_e=j.next();!_e.done;_e=j.next()){var et=_e.value,tt=b[et];if(tt.states)try{for(var rt=(c=void 0,__values(tt.events)),nt=rt.next();!nt.done;nt=rt.next()){var it=nt.value;$.add("".concat(it))}}catch(at){c={error:at}}finally{try{nt&&!nt.done&&(d=rt.return)&&d.call(rt)}finally{if(c)throw c.error}}}}catch(at){a={error:at}}finally{try{_e&&!_e.done&&(o=j.return)&&o.call(j)}finally{if(a)throw a.error}}return this.__cache.events=Array.from($)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ownEvents",{get:function(){var a=new Set(this.transitions.filter(function(o){return!(!o.target&&!o.actions.length&&o.internal)}).map(function(o){return o.eventType}));return Array.from(a)},enumerable:!1,configurable:!0}),s.prototype.resolveTarget=function(a){var o=this;if(a!==void 0)return a.map(function(c){if(!isString$2(c))return c;var d=c[0]===o.delimiter;if(d&&!o.parent)return o.getStateNodeByPath(c.slice(1));var b=d?o.key+c:c;if(o.parent)try{var $=o.parent.getStateNodeByPath(b);return $}catch(j){throw new Error("Invalid transition definition for state node '".concat(o.id,`':
`).concat(j.message))}else return o.getStateNodeByPath(b)})},s.prototype.formatTransition=function(a){var o=this,c=normalizeTarget(a.target),d="internal"in a?a.internal:c?c.some(function(_e){return isString$2(_e)&&_e[0]===o.delimiter}):!0,b=this.machine.options.guards,$=this.resolveTarget(c),j=__assign$1(__assign$1({},a),{actions:toActionObjects(toArray(a.actions)),cond:toGuard(a.cond,b),target:$,source:this,internal:d,eventType:a.event,toJSON:function(){return __assign$1(__assign$1({},j),{target:j.target?j.target.map(function(_e){return"#".concat(_e.id)}):void 0,source:"#".concat(o.id)})}});return j},s.prototype.formatTransitions=function(){var a,o,c=this,d;if(!this.config.on)d=[];else if(Array.isArray(this.config.on))d=this.config.on;else{var b=this.config.on,$=WILDCARD,j=b[$],_e=j===void 0?[]:j,et=__rest$1(b,[typeof $=="symbol"?$:$+""]);d=flatten(Object.keys(et).map(function(ht){var dt=toTransitionConfigArray(ht,et[ht]);return dt}).concat(toTransitionConfigArray(WILDCARD,_e)))}var tt=this.config.always?toTransitionConfigArray("",this.config.always):[],rt=this.config.onDone?toTransitionConfigArray(String(done(this.id)),this.config.onDone):[],nt=flatten(this.invoke.map(function(ht){var dt=[];return ht.onDone&&dt.push.apply(dt,__spreadArray([],__read$1(toTransitionConfigArray(String(doneInvoke(ht.id)),ht.onDone)),!1)),ht.onError&&dt.push.apply(dt,__spreadArray([],__read$1(toTransitionConfigArray(String(error(ht.id)),ht.onError)),!1)),dt})),it=this.after,at=flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],__read$1(rt),!1),__read$1(nt),!1),__read$1(d),!1),__read$1(tt),!1).map(function(ht){return toArray(ht).map(function(dt){return c.formatTransition(dt)})}));try{for(var ct=__values(it),st=ct.next();!st.done;st=ct.next()){var ot=st.value;at.push(ot)}}catch(ht){a={error:ht}}finally{try{st&&!st.done&&(o=ct.return)&&o.call(ct)}finally{if(a)throw a.error}}return at},s}();function createMachine(s,a){return new StateNode(s,a)}var assign$2=assign$3,sendUpdate=sendUpdate$1,forwardTo=forwardTo$1,index=reactExports.useLayoutEffect;function useConstant(s){var a=reactExports.useRef();return a.current||(a.current={v:s()}),a.current.v}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(s){for(var a,o=1,c=arguments.length;o<c;o++){a=arguments[o];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d])}return s},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(s,a){var o={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.indexOf(c)<0&&(o[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(s);d<c.length;d++)a.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(s,c[d])&&(o[c[d]]=s[c[d]]);return o},__read=globalThis&&globalThis.__read||function(s,a){var o=typeof Symbol=="function"&&s[Symbol.iterator];if(!o)return s;var c=o.call(s),d,b=[],$;try{for(;(a===void 0||a-- >0)&&!(d=c.next()).done;)b.push(d.value)}catch(j){$={error:j}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if($)throw $.error}}return b};function useIdleInterpreter(s,a){var o=useConstant(function(){return typeof s=="function"?s():s}),c=a.context,d=a.guards,b=a.actions,$=a.activities,j=a.services,_e=a.delays;a.state;var et=__rest(a,["context","guards","actions","activities","services","delays","state"]),tt=useConstant(function(){var rt={context:c,guards:d,actions:b,activities:$,services:j,delays:_e},nt=o.withConfig(rt,function(){return __assign(__assign({},o.context),c)});return interpret(nt,et)});return index(function(){Object.assign(tt.machine.options.actions,b),Object.assign(tt.machine.options.guards,d),Object.assign(tt.machine.options.activities,$),Object.assign(tt.machine.options.services,j),Object.assign(tt.machine.options.delays,_e)},[b,d,$,j,_e]),tt}function useInterpret(s){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];var c=__read(a,2),d=c[0],b=d===void 0?{}:d,$=c[1],j=useIdleInterpreter(s,b);return reactExports.useEffect(function(){if($){var _e=j.subscribe(toObserver($));return function(){_e.unsubscribe()}}},[$]),reactExports.useEffect(function(){var _e=b.state;return j.start(_e?State.create(_e):void 0),function(){j.stop(),j.status=InterpreterStatus.NotStarted}},[]),j}globalThis&&globalThis.__read;globalThis&&globalThis.__values;function getServiceSnapshot(s){return s.status!==0?s.getSnapshot():s.machine.initialState}function isService(s){return"state"in s&&"machine"in s}function isActorWithState(s){return"state"in s}var defaultCompare=function(s,a){return s===a},defaultGetSnapshot=function(s,a){if(isService(s)){if(s.status===0&&a.current)return a.current;var o=getServiceSnapshot(s);return a.current=s.status===0?o:null,o}return isActorWithState(s)?s.state:void 0};function useSelector(s,a,o,c){o===void 0&&(o=defaultCompare);var d=reactExports.useRef(null),b=reactExports.useCallback(function(_e){var et=s.subscribe(_e).unsubscribe;return et},[s]),$=reactExports.useCallback(function(){return c?c(s):defaultGetSnapshot(s,d)},[s,c]),j=withSelectorExports.useSyncExternalStoreWithSelector(b,$,$,a,o);return j}const getActorState=s=>{var a;return(a=s.context.actorRef)==null?void 0:a.getSnapshot()},getActorContext$1=s=>{var a;return(a=getActorState(s))==null?void 0:a.context},ACCOUNT_SETTINGS_INPUT_BASE={apis:[AuthAction.DeleteUser,AuthAction.UpdatePassword],category:Category.Auth},AUTHENTICATOR_INPUT_BASE={apis:[AuthAction.SignUp,AuthAction.ConfirmSignUp,AuthAction.ResendSignUpCode,AuthAction.SignIn,AuthAction.ConfirmSignIn,AuthAction.FetchUserAttributes,AuthAction.SignOut,AuthAction.ResetPassword,AuthAction.ConfirmResetPassword,AuthAction.SignInWithRedirect],category:Category.Auth},IN_APP_MESSAGING_INPUT_BASE={apis:[InAppMessagingAction.NotifyMessageInteraction],category:Category.InAppMessaging},LOCATION_SEARCH_INPUT_BASE={category:Category.Geo,apis:[GeoAction.SearchByText,GeoAction.SearchForSuggestions,GeoAction.SearchByPlaceId]},MAP_VIEW_INPUT_BASE={category:Category.Geo,apis:[]},STORAGE_MANAGER_INPUT_BASE={apis:[StorageAction.UploadData],category:Category.Storage};function isObject$8(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function isString$1(s){return typeof s=="string"||typeof s=="object"&&Object.prototype.toString.call(s)==="[object String]"}function isMap(s){return isObject$8(s)&&Object.prototype.toString.call(s)==="[object Map]"}function isSet(s){return isObject$8(s)&&Object.prototype.toString.call(s)==="[object Set]"}function isEmpty$1(s){if(s==null)return!0;if(isObject$8(s)&&(isMap(s)||isSet(s)))return!s.size;if(isObject$8(s)&&(isString$1(s)||Array.isArray(s)))return!s.length;for(const a in s)if(has(s,a))return!1;return!0}function isEmptyArray(s){return Array.isArray(s)&&isEmpty$1(s)}function areEmptyArrays(...s){return s.every(isEmptyArray)}function isEmptyObject(s){return isObject$8(s)&&isEmpty$1(s)}function areEmptyObjects(...s){return s.every(isEmptyObject)}function has(s,a){return s!=null&&Object.prototype.hasOwnProperty.call(s,a)}function isFunction$1(s){return typeof s=="function"}const classNameModifier=(s,a)=>a?`${s}--${a}`:"",classNameModifierByFlag=(s,a,o)=>o?`${s}--${a}`:"";function isTypedFunction(s){return isFunction$1(s)}function noop(...s){}const defaultAuthHubHandler=async({payload:s},a,o)=>{const{event:c}=s,{send:d}=a,{onSignIn:b,onSignOut:$}=o??{};switch(c){case"signedIn":{isFunction$1(b)&&b(s);break}case"signInWithRedirect":{d("SIGN_IN_WITH_REDIRECT");break}case"signedOut":case"tokenRefresh_failure":{c==="signedOut"&&isFunction$1($)&&$(),d("SIGN_OUT");break}}},getHubEventHandler=(s,a)=>o=>{a(o,s)},listenToAuthHub=(s,a=defaultAuthHubHandler)=>Hub.listen("auth",getHubEventHandler(s,a),"authenticator-hub-handler"),countryDialCodes=["+1","+7","+20","+27","+30","+31","+32","+33","+34","+36","+39","+40","+41","+43","+44","+45","+46","+47","+48","+49","+51","+52","+53","+54","+55","+56","+57","+58","+60","+61","+62","+63","+64","+65","+66","+81","+82","+84","+86","+90","+91","+92","+93","+94","+95","+98","+212","+213","+216","+218","+220","+221","+222","+223","+224","+225","+226","+227","+228","+229","+230","+231","+232","+233","+234","+235","+236","+237","+238","+239","+240","+241","+242","+243","+244","+245","+246","+248","+249","+250","+251","+252","+253","+254","+255","+256","+257","+258","+260","+261","+262","+263","+264","+265","+266","+267","+268","+269","+290","+291","+297","+298","+299","+345","+350","+351","+352","+353","+354","+355","+356","+357","+358","+359","+370","+371","+372","+373","+374","+375","+376","+377","+378","+379","+380","+381","+382","+385","+386","+387","+389","+420","+421","+423","+500","+501","+502","+503","+504","+505","+506","+507","+508","+509","+537","+590","+591","+593","+594","+595","+596","+597","+598","+599","+670","+672","+673","+674","+675","+676","+677","+678","+679","+680","+681","+682","+683","+685","+686","+687","+688","+689","+690","+691","+692","+850","+852","+853","+855","+856","+872","+880","+886","+960","+961","+962","+963","+964","+965","+966","+967","+968","+970","+971","+972","+973","+974","+975","+976","+977","+992","+993","+994","+995","+996","+998"],defaultFormFieldOptions={birthdate:{label:"Birthdate",placeholder:"Enter your Birthdate",type:"date",autocomplete:"bday",isRequired:!0},confirmation_code:{label:"Confirmation Code",placeholder:"Enter your Confirmation Code",type:"text",autocomplete:"one-time-code",isRequired:!0},confirm_password:{label:"Confirm Password",placeholder:"Please confirm your Password",type:"password",autocomplete:"new-password",isRequired:!0},email:{label:"Email",placeholder:"Enter your Email",type:"email",autocomplete:"username",isRequired:!0},family_name:{label:"Family Name",placeholder:"Enter your Family Name",type:"text",autocomplete:"family-name",isRequired:!0},given_name:{label:"Given Name",placeholder:"Enter your Given Name",type:"text",autocomplete:"given-name",isRequired:!0},middle_name:{label:"Middle Name",placeholder:"Enter your Middle Name",type:"text",autocomplete:"additional-name",isRequired:!0},name:{label:"Name",placeholder:"Enter your Name",type:"text",autocomplete:"name",isRequired:!0},nickname:{label:"Nickname",placeholder:"Enter your Nickname",type:"text",autocomplete:"tel",isRequired:!0},password:{label:"Password",placeholder:"Enter your Password",type:"password",autocomplete:"new-password",isRequired:!0},phone_number:{label:"Phone Number",placeholder:"Enter your Phone Number",type:"tel",autocomplete:"tel",dialCode:"+1",dialCodeList:countryDialCodes,isRequired:!0},preferred_username:{label:"Preferred Username",placeholder:"Enter your Preferred Username",type:"text",isRequired:!0},profile:{label:"Profile",placeholder:"Add your Profile",type:"url",autocomplete:"url",isRequired:!0},website:{label:"Website",placeholder:"Add your Website",type:"url",autocomplete:"url",isRequired:!0},username:{label:"Username",placeholder:"Enter your Username",type:"text",autocomplete:"username",isRequired:!0}},ALLOWED_SPECIAL_CHARACTERS=["^","$","*",".","[","]","{","}","(",")","?",'"',"!","@","#","%","&","/","\\",",",">","<","'",":",";","|","_","~","`","=","+","-"," "],getRoute=(s,a)=>{switch(!0){case s.matches("idle"):return"idle";case s.matches("setup"):return"setup";case s.matches("signOut"):return"signOut";case s.matches("authenticated"):return"authenticated";case(a==null?void 0:a.matches("confirmSignUp")):case(a==null?void 0:a.matches("confirmSignUp.resendConfirmationCode")):return"confirmSignUp";case(a==null?void 0:a.matches("confirmSignIn")):return"confirmSignIn";case(a==null?void 0:a.matches("setupTotp.edit")):case(a==null?void 0:a.matches("setupTotp.submit")):return"setupTotp";case(a==null?void 0:a.matches("signIn")):return"signIn";case(a==null?void 0:a.matches("signUp")):return"signUp";case(a==null?void 0:a.matches("forceChangePassword")):return"forceNewPassword";case(a==null?void 0:a.matches("forgotPassword")):return"forgotPassword";case(a==null?void 0:a.matches("confirmResetPassword")):return"confirmResetPassword";case(a==null?void 0:a.matches("selectUserAttributes")):return"verifyUser";case(a==null?void 0:a.matches("confirmVerifyUserAttribute")):return"confirmVerifyUser";case s.matches("getCurrentUser"):case a.matches("fetchUserAttributes"):return"transition";default:return console.debug("Cannot infer `route` from Authenticator state:",s.value),null}},getSendEventAliases=s=>{const a=o=>c=>s({type:o,data:c});return{initializeMachine:a("INIT"),resendCode:a("RESEND"),signOut:a("SIGN_OUT"),submitForm:a("SUBMIT"),updateForm:a("CHANGE"),updateBlur:a("BLUR"),toFederatedSignIn:a("FEDERATED_SIGN_IN"),toForgotPassword:a("FORGOT_PASSWORD"),toSignIn:a("SIGN_IN"),toSignUp:a("SIGN_UP"),skipVerification:a("SKIP")}},getServiceContextFacade=s=>{var ot,ht;const a=getActorContext$1(s)??{},{challengeName:o,codeDeliveryDetails:c,remoteError:d,validationError:b,totpSecretCode:$=null,unverifiedUserAttributes:j,username:_e}=a,{socialProviders:et=[]}=((ot=s.context)==null?void 0:ot.config)??{},tt=(a==null?void 0:a.user)??((ht=s.context)==null?void 0:ht.user),rt=!!(b&&Object.keys(b).length>0),nt=getActorState(s),it=s.hasTag("pending")||(nt==null?void 0:nt.hasTag("pending")),at=getRoute(s,nt);return{authStatus:(dt=>{switch(dt){case"idle":case"setup":return"configuring";case"authenticated":return"authenticated";default:return"unauthenticated"}})(at),challengeName:o,codeDeliveryDetails:c,error:d,hasValidationErrors:rt,isPending:it,route:at,socialProviders:et,totpSecretCode:$,unverifiedUserAttributes:j,user:tt,username:_e,validationErrors:b}},getServiceFacade=({send:s,state:a})=>{const o=getSendEventAliases(s),c=getServiceContextFacade(a);return{...o,...c}};var FederatedIdentityProviders;(function(s){s.Apple="Apple",s.Amazon="Amazon",s.Facebook="Facebook",s.Google="Google"})(FederatedIdentityProviders||(FederatedIdentityProviders={}));var UnverifiedContactMethodType;(function(s){s.Email="email",s.PhoneNumber="phone_number"})(UnverifiedContactMethodType||(UnverifiedContactMethodType={}));const signUpFieldsWithDefault=["birthdate","email","family_name","given_name","middle_name","name","nickname","phone_number","preferred_username","profile","website"],LoginMechanismArray=["username","email","phone_number"],authFieldsWithDefaults=[...LoginMechanismArray,...signUpFieldsWithDefault,"confirmation_code","password","confirm_password"],isAuthFieldsWithDefaults=s=>authFieldsWithDefaults.includes(s),isAuthFieldWithDefaults=s=>authFieldsWithDefaults.includes(s),isArray$7=s=>Array.isArray(s),getErrors=s=>s?isArray$7(s)?s:[s]:null,censorAllButFirstAndLast=s=>{const a=s.trim().split("");for(let o=0;o<a.length;o++)o>0&&o<a.length-1&&(a[o]="*");return a.join("")},censorPhoneNumber=s=>{if(s.length<4)return s;const a=s.split("");for(let o=0;o<a.length-4;o++)a[o]="*";return a.join("")},hasSpecialChars=s=>ALLOWED_SPECIAL_CHARACTERS.some(a=>s.includes(a)),getTotpCodeURL=(s,a,o)=>encodeURI(`otpauth://totp/${s}:${a}?secret=${o}&issuer=${s}`);function trimValues(s,...a){return Object.entries(s).reduce((o,[c,d])=>({...o,[c]:a.includes(c)?d:d==null?void 0:d.trim()}),{})}const defaultTexts$1={ADD_PROFILE:"Add your Profile",ADD_WEBSITE:"Add your Website",BACK_SIGN_IN:"Back to Sign In",BIRTHDATE:"Birthdate",CHANGE_PASSWORD:"Change Password",CHANGING_PASSWORD:"Changing",CODE:"Code",CODE_ARRIVAL:"It may take a minute to arrive",CODE_EMAILED:"Your code is on the way. To log in, enter the code we emailed to",CODE_SENT:"Your code is on the way. To log in, enter the code we sent you",CODE_TEXTED:"Your code is on the way. To log in, enter the code we texted to",CONFIRM_PASSWORD:"Confirm Password",CONFIRM_PASSWORD_PLACEHOLDER:"Please confirm your Password",CONFIRM_RESET_PASSWORD_HEADING:"Reset your Password",CONFIRM_SIGNUP_HEADING:"Confirm Sign Up",CONFIRM_SMS:"Confirm SMS Code",CONFIRM_TOTP:"Confirm TOTP Code",CONFIRM:"Confirm",CONFIRMATION_CODE:"Confirmation Code",CONFIRMING:"Confirming",CREATE_ACCOUNT:"Create Account",CREATING_ACCOUNT:"Creating Account",EMAIL_ADDRESS:"Email",ENTER_BIRTHDATE:"Enter your Birthdate",ENTER_CODE:"Enter your code",ENTER_CONFIRMATION_CODE:"Enter your Confirmation Code",ENTER_EMAIL:"Enter your Email",ENTER_FAMILY_NAME:"Enter your Family Name",ENTER_GIVEN_NAME:"Enter your Given Name",ENTER_MIDDLE_NAME:"Enter your Middle Name",ENTER_NAME:"Enter your Name",ENTER_NICK_NAME:"Enter your Nickname",ENTER_PASSWORD:"Enter your Password",ENTER_PHONE_NUMBER:"Enter your Phone Number",ENTER_PREFERRED_USERNAME:"Enter your Preferred Username",ENTER_USERNAME:"Enter your username",FAMILY_NAME:"Family Name",GIVEN_NAME:"Given Name",FORGOT_PASSWORD:"Forgot Password?",FORGOT_YOUR_PASSWORD:"Forgot your password?",HIDE_PASSWORD:"Hide password",LOADING:"Loading",LOGIN_NAME:"Username",MIDDLE_NAME:"Middle Name",NAME:"Name",NICKNAME:"Nickname",NEW_PASSWORD:"New password",OR:"or",PASSWORD:"Password",PHONE_NUMBER:"Phone Number",PREFERRED_USERNAME:"Preferred Username",PROFILE:"Profile",RESEND_CODE:"Resend Code",RESET_PASSWORD_HEADING:"Reset your password",RESET_PASSWORD:"Reset Password",SEND_CODE:"Send code",SENDING:"Sending",SETUP_TOTP:"Setup TOTP",SHOW_PASSWORD:"Show password",SIGN_IN_BUTTON:"Sign in",SIGN_IN_TAB:"Sign In",SIGN_IN_WITH_AMAZON:"Sign In with Amazon",SIGN_IN_WITH_APPLE:"Sign In with Apple",SIGN_IN_WITH_FACEBOOK:"Sign In with Facebook",SIGN_IN_WITH_GOOGLE:"Sign In with Google",SIGN_IN:"Sign in to your account",SIGN_UP_BUTTON:"Create a new account",SIGNING_IN_BUTTON:"Signing in",SKIP:"Skip",SUBMIT:"Submit",SUBMITTING:"Submitting",UPPERCASE_COPY:"COPY",VERIFY_CONTACT:"Verify Contact",VERIFY_HEADING:"Account recovery requires verified contact information",VERIFY:"Verify",WE_EMAILED:"We Emailed You",WE_SENT_CODE:"We Sent A Code",WE_TEXTED:"We Texted You",WEBSITE:"Website"},defaultTexts={...defaultTexts$1},DefaultTexts={...defaultTexts};function translate(s){return I18n.get(s)}const getPrimaryAlias=s=>{var c;const a=(c=s==null?void 0:s.context.config)==null?void 0:c.loginMechanisms,[o]=a??["username"];return o},applyTranslation=s=>{const a={...s};for(const[o,c]of Object.entries(s)){const{label:d,placeholder:b}=c;a[o]={...c,label:d?translate(d):void 0,placeholder:b?translate(b):void 0}}return a},sortFormFields=s=>Object.entries(s).sort((a,o)=>{const c=a[1].order||Number.MAX_VALUE,d=o[1].order||Number.MAX_VALUE;return c-d}).filter(a=>a[1]!==void 0),DEFAULT_COUNTRY_CODE="+1",getDefaultFormField=s=>{let a=defaultFormFieldOptions[s];const{type:o}=a;return o==="tel"&&(a={...a,dialCode:DEFAULT_COUNTRY_CODE}),a},getAliasDefaultFormField=s=>{const a=getPrimaryAlias(s);return{...getDefaultFormField(a),autocomplete:"username"}},getConfirmationCodeFormFields=s=>({confirmation_code:{...getDefaultFormField("confirmation_code"),label:"Code *",placeholder:"Code"}}),getSignInFormFields=s=>({username:{...getAliasDefaultFormField(s)},password:{...getDefaultFormField("password"),autocomplete:"current-password"}}),getSignUpFormFields=s=>{const{loginMechanisms:a,signUpAttributes:o}=s.context.config,c=getPrimaryAlias(s),d=Array.from(new Set([...a,"password","confirm_password",...o])),b={};for(const $ of d)if(isAuthFieldWithDefaults($)){const j=$===c?getAliasDefaultFormField(s):getDefaultFormField($);b[$]={...j}}else console.debug(`Authenticator does not have a default implementation for ${$}. Customize SignUp FormFields to add your own.`);return b},getConfirmSignUpFormFields=s=>({confirmation_code:{...getDefaultFormField("confirmation_code"),placeholder:"Enter your code"}}),getForgotPasswordFormFields=s=>{const a=getPrimaryAlias(s),{label:o}=defaultFormFieldOptions[a];return{username:{...getAliasDefaultFormField(s),label:`Enter your ${o.toLowerCase()}`,placeholder:`Enter your ${o.toLowerCase()}`}}},getConfirmResetPasswordFormFields=s=>({...getConfirmationCodeFormFields(),password:{...getDefaultFormField("password"),label:"New Password",placeholder:"New Password"},confirm_password:{...getDefaultFormField("confirm_password"),label:"Confirm Password",placeholder:"Confirm Password"}}),getForceNewPasswordFormFields=s=>{const a=getActorState(s),{missingAttributes:o}=a.context,c=Array.from(new Set(["password","confirm_password",...o??[]])),d={};for(const b of c)isAuthFieldWithDefaults(b)?d[b]={...getDefaultFormField(b)}:console.debug(`Authenticator does not have a default implementation for ${b}. Customize ForceNewPassword FormFields to add your own.`);return d},defaultFormFieldsGetters={signIn:getSignInFormFields,signUp:getSignUpFormFields,confirmSignUp:getConfirmSignUpFormFields,confirmSignIn:getConfirmationCodeFormFields,forceNewPassword:getForceNewPasswordFormFields,forgotPassword:getForgotPasswordFormFields,confirmResetPassword:getConfirmResetPasswordFormFields,confirmVerifyUser:getConfirmationCodeFormFields,setupTotp:getConfirmationCodeFormFields},getDefaultFormFields=(s,a)=>{const o=defaultFormFieldsGetters[s];return o(a)},getCustomFormFields=(s,a)=>{var c,d;const o=(d=(c=getActorContext$1(a))==null?void 0:c.formFields)==null?void 0:d[s];return!o||Object.keys(o).length===0?{}:Object.entries(o).reduce((b,[$,j])=>{if((s==="signIn"||s==="forgotPassword")&&$==="username"){const et={...getAliasDefaultFormField(a),...j};return{...b,[$]:et}}else if(isAuthFieldsWithDefaults($)){const et={...defaultFormFieldOptions[$],...j};return{...b,[$]:et}}else return{...b,[$]:j}},{})},getFormFields=(s,a)=>{const o=getDefaultFormFields(s,a),c=getCustomFormFields(s,a),d={...o,...c};return delete d.QR,applyTranslation(d)},removeOrderKeys=s=>s.map(a=>{const o=a[0],c={...a[1],order:void 0};return[o,c]}),getSortedFormFields=(s,a)=>{const o=getFormFields(s,a);return removeOrderKeys(sortFormFields(o))},getChallengeText$1=s=>{switch(s){case"SMS_MFA":return translate(DefaultTexts.CONFIRM_SMS);case"SOFTWARE_TOKEN_MFA":return translate(DefaultTexts.CONFIRM_TOTP);default:throw new Error(`${translate("Unexpected challengeName encountered in ConfirmSignIn:")} ${s}`)}},getDeliveryMessageText$1=s=>{const{DeliveryMedium:a,Destination:o}=s??{},c=a==="EMAIL",d=a==="SMS",b=translate(DefaultTexts.CODE_ARRIVAL);return c||d?`${translate(c?DefaultTexts.CODE_EMAILED:DefaultTexts.CODE_TEXTED)} ${o}. ${b}.`:`${translate(DefaultTexts.CODE_SENT)}. ${b}.`},getDeliveryMethodText$1=s=>{const{DeliveryMedium:a}=s??{},o=a==="EMAIL";return translate(!o&&a==="SMS"?DefaultTexts.WE_SENT_CODE:o?DefaultTexts.WE_EMAILED:DefaultTexts.WE_TEXTED)},providerNameMap={amazon:"Amazon",apple:"Apple",facebook:"Facebook",google:"Google"},getSignInWithFederationText$1=(s,a)=>translate(`Sign ${s==="signIn"?"In":"Up"} with ${providerNameMap[a]}`),authenticatorTextUtil={getBackToSignInText:()=>translate(DefaultTexts.BACK_SIGN_IN),getChangePasswordText:()=>translate(DefaultTexts.CHANGE_PASSWORD),getChangingText:()=>translate(DefaultTexts.CHANGING_PASSWORD),getConfirmText:()=>translate(DefaultTexts.CONFIRM),getConfirmingText:()=>translate(DefaultTexts.CONFIRMING),getCopyText:()=>translate(DefaultTexts.UPPERCASE_COPY),getHidePasswordText:()=>translate(DefaultTexts.HIDE_PASSWORD),getLoadingText:()=>translate(DefaultTexts.LOADING),getOrText:()=>translate(DefaultTexts.OR),getResendCodeText:()=>translate(DefaultTexts.RESEND_CODE),getSendCodeText:()=>translate(DefaultTexts.SEND_CODE),getSendingText:()=>translate(DefaultTexts.SENDING),getShowPasswordText:()=>translate(DefaultTexts.SHOW_PASSWORD),getSubmitText:()=>translate(DefaultTexts.SUBMIT),getSubmittingText:()=>translate(DefaultTexts.SUBMITTING),getSignInTabText:()=>translate(DefaultTexts.SIGN_IN_TAB),getSignUpTabText:()=>translate(DefaultTexts.CREATE_ACCOUNT),getForgotPasswordText:s=>translate(s?DefaultTexts.FORGOT_PASSWORD:DefaultTexts.FORGOT_YOUR_PASSWORD),getSigningInText:()=>translate(DefaultTexts.SIGNING_IN_BUTTON),getSignInText:()=>translate(DefaultTexts.SIGN_IN_BUTTON),getCreatingAccountText:()=>translate(DefaultTexts.CREATING_ACCOUNT),getCreateAccountText:()=>translate(DefaultTexts.CREATE_ACCOUNT),getDeliveryMessageText:getDeliveryMessageText$1,getDeliveryMethodText:getDeliveryMethodText$1,getChallengeText:getChallengeText$1,getResetYourPasswordText:()=>translate(DefaultTexts.RESET_PASSWORD),getSetupTotpText:()=>translate(DefaultTexts.SETUP_TOTP),getSetupTotpInstructionsText:()=>translate("Copy and paste the secret key below into an authenticator app and then enter the code in the text field below."),getCopiedText:()=>translate("COPIED"),getSignInWithFederationText:getSignInWithFederationText$1,getSkipText:()=>translate(DefaultTexts.SKIP),getVerifyText:()=>translate(DefaultTexts.VERIFY),getVerifyContactText:()=>translate(DefaultTexts.VERIFY_CONTACT),getAccountRecoveryInfoText:()=>translate(DefaultTexts.VERIFY_HEADING),getInvalidEmailText:()=>translate("Please enter a valid email"),getRequiredFieldText:()=>translate("This field is required")};function arrayMap$2(s,a){for(var o=-1,c=s==null?0:s.length,d=Array(c);++o<c;)d[o]=a(s[o],o,s);return d}var _arrayMap=arrayMap$2,Stack$1=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(s,a,o,c){var d=o.length,b=d,$=!c;if(s==null)return!b;for(s=Object(s);d--;){var j=o[d];if($&&j[2]?j[1]!==s[j[0]]:!(j[0]in s))return!1}for(;++d<b;){j=o[d];var _e=j[0],et=s[_e],tt=j[1];if($&&j[2]){if(et===void 0&&!(_e in s))return!1}else{var rt=new Stack$1;if(c)var nt=c(et,tt,_e,s,a,rt);if(!(nt===void 0?baseIsEqual$1(tt,et,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,c,rt):nt))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$7=isObject_1;function isStrictComparable$2(s){return s===s&&!isObject$7(s)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys=keys_1;function getMatchData$1(s){for(var a=keys(s),o=a.length;o--;){var c=a[o],d=s[c];a[o]=[c,d,isStrictComparable$1(d)]}return a}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(s,a){return function(o){return o==null?!1:o[s]===a&&(a!==void 0||s in Object(o))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(s){var a=getMatchData(s);return a.length==1&&a[0][2]?matchesStrictComparable$1(a[0][0],a[0][1]):function(o){return o===s||baseIsMatch(o,s,a)}}var _baseMatches=baseMatches$1,baseGetTag$1=_baseGetTag,isObjectLike$2=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$3(s){return typeof s=="symbol"||isObjectLike$2(s)&&baseGetTag$1(s)==symbolTag}var isSymbol_1=isSymbol$3,isArray$6=isArray_1,isSymbol$2=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(s,a){if(isArray$6(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||isSymbol$2(s)?!0:reIsPlainProp.test(s)||!reIsDeepProp.test(s)||a!=null&&s in Object(a)}var _isKey=isKey$3,MapCache=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$1(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);var o=function(){var c=arguments,d=a?a.apply(this,c):c[0],b=o.cache;if(b.has(d))return b.get(d);var $=s.apply(this,c);return o.cache=b.set(d,$)||b,$};return o.cache=new(memoize$1.Cache||MapCache),o}memoize$1.Cache=MapCache;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(s){var a=memoize(s,function(c){return o.size===MAX_MEMOIZE_SIZE&&o.clear(),c}),o=a.cache;return a}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(rePropName,function(o,c,d,b){a.push(d?b.replace(reEscapeChar,"$1"):c||o)}),a}),_stringToPath=stringToPath$1,Symbol$1=_Symbol,arrayMap$1=_arrayMap,isArray$5=isArray_1,isSymbol$1=isSymbol_1,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$1(s){if(typeof s=="string")return s;if(isArray$5(s))return arrayMap$1(s,baseToString$1)+"";if(isSymbol$1(s))return symbolToString?symbolToString.call(s):"";var a=s+"";return a=="0"&&1/s==-INFINITY$1?"-0":a}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$3(s){return s==null?"":baseToString(s)}var toString_1=toString$3,isArray$4=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString$2=toString_1;function castPath$4(s,a){return isArray$4(s)?s:isKey$2(s,a)?[s]:stringToPath(toString$2(s))}var _castPath=castPath$4,isSymbol=isSymbol_1,INFINITY=1/0;function toKey$5(s){if(typeof s=="string"||isSymbol(s))return s;var a=s+"";return a=="0"&&1/s==-INFINITY?"-0":a}var _toKey=toKey$5,castPath$3=_castPath,toKey$4=_toKey;function baseGet$3(s,a){a=castPath$3(a,s);for(var o=0,c=a.length;s!=null&&o<c;)s=s[toKey$4(a[o++])];return o&&o==c?s:void 0}var _baseGet=baseGet$3,baseGet$2=_baseGet;function get$1(s,a,o){var c=s==null?void 0:baseGet$2(s,a);return c===void 0?o:c}var get_1=get$1;function baseHasIn$1(s,a){return s!=null&&a in Object(s)}var _baseHasIn=baseHasIn$1,castPath$2=_castPath,isArguments$1=isArguments_1,isArray$3=isArray_1,isIndex$2=_isIndex,isLength=isLength_1,toKey$3=_toKey;function hasPath$1(s,a,o){a=castPath$2(a,s);for(var c=-1,d=a.length,b=!1;++c<d;){var $=toKey$3(a[c]);if(!(b=s!=null&&o(s,$)))break;s=s[$]}return b||++c!=d?b:(d=s==null?0:s.length,!!d&&isLength(d)&&isIndex$2($,d)&&(isArray$3(s)||isArguments$1(s)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(s,a){return s!=null&&hasPath(s,a,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$2=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(s,a){return isKey$1(s)&&isStrictComparable(a)?matchesStrictComparable(toKey$2(s),a):function(o){var c=get(o,s);return c===void 0&&c===a?hasIn(o,s):baseIsEqual(a,c,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$3(s){return s}var identity_1=identity$3;function baseProperty$1(s){return function(a){return a==null?void 0:a[s]}}var _baseProperty=baseProperty$1,baseGet$1=_baseGet;function basePropertyDeep$1(s){return function(a){return baseGet$1(a,s)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$1=_toKey;function property$1(s){return isKey(s)?baseProperty(toKey$1(s)):basePropertyDeep(s)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$2=identity_1,isArray$2=isArray_1,property=property_1;function baseIteratee$1(s){return typeof s=="function"?s:s==null?identity$2:typeof s=="object"?isArray$2(s)?baseMatchesProperty(s[0],s[1]):baseMatches(s):property(s)}var _baseIteratee=baseIteratee$1,getNative=_getNative,defineProperty$2=function(){try{var s=getNative(Object,"defineProperty");return s({},"",{}),s}catch{}}(),_defineProperty=defineProperty$2,defineProperty$1=_defineProperty;function baseAssignValue$3(s,a,o){a=="__proto__"&&defineProperty$1?defineProperty$1(s,a,{configurable:!0,enumerable:!0,value:o,writable:!0}):s[a]=o}var _baseAssignValue=baseAssignValue$3,baseAssignValue$2=_baseAssignValue,eq$2=eq_1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function assignValue$2(s,a,o){var c=s[a];(!(hasOwnProperty$2.call(s,a)&&eq$2(c,o))||o===void 0&&!(a in s))&&baseAssignValue$2(s,a,o)}var _assignValue=assignValue$2,assignValue$1=_assignValue,castPath$1=_castPath,isIndex$1=_isIndex,isObject$6=isObject_1,toKey=_toKey;function baseSet$1(s,a,o,c){if(!isObject$6(s))return s;a=castPath$1(a,s);for(var d=-1,b=a.length,$=b-1,j=s;j!=null&&++d<b;){var _e=toKey(a[d]),et=o;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return s;if(d!=$){var tt=j[_e];et=c?c(tt,_e,j):void 0,et===void 0&&(et=isObject$6(tt)?tt:isIndex$1(a[d+1])?[]:{})}assignValue$1(j,_e,et),j=j[_e]}return s}var _baseSet=baseSet$1,baseGet=_baseGet,baseSet=_baseSet,castPath=_castPath;function basePickBy$1(s,a,o){for(var c=-1,d=a.length,b={};++c<d;){var $=a[c],j=baseGet(s,$);o(j,$)&&baseSet(b,castPath($,s),j)}return b}var _basePickBy=basePickBy$1,overArg=_overArg,getPrototype$3=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$3,arrayPush=_arrayPush,getPrototype$2=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$1=nativeGetSymbols?function(s){for(var a=[];s;)arrayPush(a,getSymbols(s)),s=getPrototype$2(s);return a}:stubArray,_getSymbolsIn=getSymbolsIn$1;function nativeKeysIn$1(s){var a=[];if(s!=null)for(var o in Object(s))a.push(o);return a}var _nativeKeysIn=nativeKeysIn$1,isObject$5=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseKeysIn$1(s){if(!isObject$5(s))return nativeKeysIn(s);var a=isPrototype$1(s),o=[];for(var c in s)c=="constructor"&&(a||!hasOwnProperty$1.call(s,c))||o.push(c);return o}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$2=isArrayLike_1;function keysIn$3(s){return isArrayLike$2(s)?arrayLikeKeys(s,!0):baseKeysIn(s)}var keysIn_1=keysIn$3,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$2=keysIn_1;function getAllKeysIn$1(s){return baseGetAllKeys(s,keysIn$2,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$1,arrayMap=_arrayMap,baseIteratee=_baseIteratee,basePickBy=_basePickBy,getAllKeysIn=_getAllKeysIn;function pickBy(s,a){if(s==null)return{};var o=arrayMap(getAllKeysIn(s),function(c){return[c]});return a=baseIteratee(a),basePickBy(s,o,function(c,d){return a(c,d[0])})}var pickBy_1=pickBy;const pickBy$1=getDefaultExportFromCjs(pickBy_1),DEFAULT_AUTO_SIGN_IN=!0,sanitizePhoneNumber=(s,a)=>`${s}${a}`.replace(/[^A-Z0-9+]/gi,""),selectUserAttributes=(s,a)=>{switch(a){case"address":case"birthdate":case"email":case"family_name":case"gender":case"given_name":case"locale":case"middle_name":case"name":case"nickname":case"phone_number":case"picture":case"preferred_username":case"profile":case"updated_at":case"website":case"zoneinfo":return!0;default:return a.startsWith("custom:")}},getUserAttributes=s=>{const{phone_number:a,...o}=pickBy$1(s,selectUserAttributes);if(isString$1(a)){const{country_code:c}=s;return{...o,phone_number:sanitizePhoneNumber(c,a)}}return o},getSignUpInput=(s,a,o)=>{const{password:c,...d}=a,b=getUserAttributes(d),$={autoSignIn:DEFAULT_AUTO_SIGN_IN,userAttributes:{...o==="phone_number"?{...b,phone_number:s}:b}};return{username:s,password:c,options:$}},getUsernameSignUp=({formValues:s,loginMechanisms:a})=>{const o=a[0];if(o==="phone_number"){const{country_code:c,phone_number:d}=s;return sanitizePhoneNumber(c,d)}return s[o]},{assign:assign$1}=actions,clearActorDoneData=assign$1({actorDoneData:void 0}),clearChallengeName=assign$1({challengeName:void 0}),clearMissingAttributes=assign$1({missingAttributes:void 0}),clearError=assign$1({remoteError:void 0}),clearFormValues=assign$1({formValues:{}}),clearTouched=assign$1({touched:{}}),clearUser=assign$1({user:void 0}),clearValidationError=assign$1({validationError:{}}),setTotpSecretCode=assign$1({totpSecretCode:(s,{data:a})=>{var c;const{sharedSecret:o}=((c=a.nextStep)==null?void 0:c.totpSetupDetails)??{};return o}}),setSignInStep=assign$1({step:"SIGN_IN"}),setShouldVerifyUserAttributeStep=assign$1({step:"SHOULD_CONFIRM_USER_ATTRIBUTE"}),setConfirmAttributeCompleteStep=assign$1({step:"CONFIRM_ATTRIBUTE_COMPLETE"}),setChallengeName=assign$1({challengeName:(s,{data:a})=>{const{signInStep:o}=a.nextStep;return o==="CONFIRM_SIGN_IN_WITH_SMS_CODE"?"SMS_MFA":o==="CONFIRM_SIGN_IN_WITH_TOTP_CODE"?"SOFTWARE_TOKEN_MFA":void 0}}),setUsernameForgotPassword=assign$1({username:({formValues:s,loginMechanisms:a})=>{const o=a[0],{username:c,country_code:d}=s;return o==="phone_number"?sanitizePhoneNumber(d,c):c}}),setUsernameSignUp=assign$1({username:getUsernameSignUp}),setUsernameSignIn=assign$1({username:({formValues:s,loginMechanisms:a})=>{const o=a[0],{username:c,country_code:d}=s;return o==="phone_number"?sanitizePhoneNumber(d,c):c}}),setNextSignInStep=assign$1({step:(s,{data:a})=>a.nextStep.signInStep==="DONE"?"SIGN_IN_COMPLETE":a.nextStep.signInStep}),setNextSignUpStep=assign$1({step:(s,{data:a})=>a.nextStep.signUpStep==="DONE"?"SIGN_UP_COMPLETE":a.nextStep.signUpStep}),setNextResetPasswordStep=assign$1({step:(s,{data:a})=>a.nextStep.resetPasswordStep==="DONE"?"RESET_PASSWORD_COMPLETE":a.nextStep.resetPasswordStep}),setMissingAttributes=assign$1({missingAttributes:(s,{data:a})=>{var o;return(o=a.nextStep)==null?void 0:o.missingAttributes}}),setFieldErrors=assign$1({validationError:(s,{data:a})=>a}),setRemoteError=assign$1({remoteError:(s,{data:a})=>a.name==="NoUserPoolError"?"Configuration error (see console)  please contact the administrator":(a==null?void 0:a.message)||a}),setUser=assign$1({user:(s,{data:a})=>a}),resolveCodeDeliveryDetails=s=>({Destination:s.destination,DeliveryMedium:s.deliveryMedium,AttributeName:s.attributName}),setCodeDeliveryDetails=assign$1({codeDeliveryDetails:(s,{data:a})=>{var o;return(o=a==null?void 0:a.nextStep)!=null&&o.codeDeliveryDetails?resolveCodeDeliveryDetails(a.nextStep.codeDeliveryDetails):resolveCodeDeliveryDetails(a)}}),handleInput=assign$1({formValues:(s,{data:a})=>{const{name:o,value:c}=a;return{...s.formValues,[o]:c}}}),handleSubmit=assign$1({formValues:(s,{data:a})=>trimValues({...s.formValues,...a},"password")}),handleBlur=assign$1({touched:(s,{data:a})=>({...s.touched,[a.name]:!0})}),setUnverifiedUserAttributes=assign$1({unverifiedUserAttributes:(s,{data:a})=>{const{email:o,phone_number:c}=a;return{...o&&{email:o},...c&&{phone_number:c}}}}),clearSelectedUserAttribute=assign$1({selectedUserAttribute:void 0}),setSelectedUserAttribute=assign$1({selectedUserAttribute:s=>{var a;return(a=s.formValues)==null?void 0:a.unverifiedAttr}}),setConfirmSignUpSignUpStep=assign$1({step:"CONFIRM_SIGN_UP"}),ACTIONS={clearActorDoneData,clearChallengeName,clearError,clearFormValues,clearMissingAttributes,clearSelectedUserAttribute,clearTouched,clearUser,clearValidationError,handleBlur,handleInput,handleSubmit,setChallengeName,setCodeDeliveryDetails,setFieldErrors,setMissingAttributes,setNextResetPasswordStep,setNextSignInStep,setNextSignUpStep,setRemoteError,setConfirmAttributeCompleteStep,setConfirmSignUpSignUpStep,setShouldVerifyUserAttributeStep,setSelectedUserAttribute,setSignInStep,setTotpSecretCode,setUser,setUnverifiedUserAttributes,setUsernameForgotPassword,setUsernameSignIn,setUsernameSignUp},SIGN_IN_STEP_MFA_CONFIRMATION=["CONFIRM_SIGN_IN_WITH_SMS_CODE","CONFIRM_SIGN_IN_WITH_TOTP_CODE"],shouldConfirmSignInWithNewPassword=(s,{data:a})=>(a==null?void 0:a.nextStep.signInStep)==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",shouldResetPasswordFromSignIn=(s,{data:a})=>{var o;return((o=a==null?void 0:a.nextStep)==null?void 0:o.signInStep)==="RESET_PASSWORD"},shouldConfirmSignUpFromSignIn=(s,{data:a})=>(a==null?void 0:a.nextStep.signInStep)==="CONFIRM_SIGN_UP",shouldAutoSignIn=(s,{data:a})=>(a==null?void 0:a.nextStep.signUpStep)==="COMPLETE_AUTO_SIGN_IN",hasCompletedSignIn=(s,{data:a})=>(a==null?void 0:a.nextStep.signInStep)==="DONE",hasCompletedSignUp=(s,{data:a})=>(a==null?void 0:a.nextStep.signUpStep)==="DONE",hasCompletedResetPassword=(s,{data:a})=>(a==null?void 0:a.nextStep.resetPasswordStep)==="DONE",hasCompletedAttributeConfirmation=(s,{data:a})=>(a==null?void 0:a.step)==="CONFIRM_ATTRIBUTE_COMPLETE",isConfirmUserAttributeStep=(s,{data:a})=>(a==null?void 0:a.step)==="CONFIRM_ATTRIBUTE_WITH_CODE",isShouldConfirmUserAttributeStep=(s,{data:a})=>(a==null?void 0:a.step)==="SHOULD_CONFIRM_USER_ATTRIBUTE",isResetPasswordStep=(s,{data:a})=>(a==null?void 0:a.step)==="RESET_PASSWORD",isConfirmSignUpStep=(s,{data:a})=>(a==null?void 0:a.step)==="CONFIRM_SIGN_UP",shouldConfirmSignIn=({step:s})=>SIGN_IN_STEP_MFA_CONFIRMATION.includes(s),shouldSetupTotp=({step:s})=>s==="CONTINUE_SIGN_IN_WITH_TOTP_SETUP",shouldResetPassword=({step:s})=>s==="RESET_PASSWORD",shouldConfirmResetPassword=({step:s})=>s==="CONFIRM_RESET_PASSWORD_WITH_CODE",shouldConfirmSignUp=({step:s})=>s==="CONFIRM_SIGN_UP",shouldVerifyAttribute=(s,{data:a})=>{const{phone_number_verified:o,email_verified:c}=a;return(c===void 0||c==="false")&&(o===void 0||o==="false")},isUserAlreadyConfirmed=(s,{data:a})=>a.message==="User is already confirmed.",GUARDS={hasCompletedAttributeConfirmation,hasCompletedResetPassword,hasCompletedSignIn,hasCompletedSignUp,isConfirmSignUpStep,isConfirmUserAttributeStep,isResetPasswordStep,isShouldConfirmUserAttributeStep,isUserAlreadyConfirmed,shouldAutoSignIn,shouldConfirmResetPassword,shouldConfirmSignIn,shouldConfirmSignInWithNewPassword,shouldConfirmSignUp,shouldConfirmSignUpFromSignIn,shouldResetPassword,shouldResetPasswordFromSignIn,shouldSetupTotp,shouldVerifyAttribute};var baseAssignValue$1=_baseAssignValue,eq$1=eq_1;function assignMergeValue$2(s,a,o){(o!==void 0&&!eq$1(s[a],o)||o===void 0&&!(a in s))&&baseAssignValue$1(s,a,o)}var _assignMergeValue=assignMergeValue$2;function createBaseFor$1(s){return function(a,o,c){for(var d=-1,b=Object(a),$=c(a),j=$.length;j--;){var _e=$[s?j:++d];if(o(b[_e],_e,b)===!1)break}return a}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,_cloneBuffer={exports:{}};_cloneBuffer.exports;(function(s,a){var o=_root,c=a&&!a.nodeType&&a,d=c&&!0&&s&&!s.nodeType&&s,b=d&&d.exports===c,$=b?o.Buffer:void 0,j=$?$.allocUnsafe:void 0;function _e(et,tt){if(tt)return et.slice();var rt=et.length,nt=j?j(rt):new et.constructor(rt);return et.copy(nt),nt}s.exports=_e})(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$1(s){var a=new s.constructor(s.byteLength);return new Uint8Array$1(a).set(new Uint8Array$1(s)),a}var _cloneArrayBuffer=cloneArrayBuffer$1,cloneArrayBuffer=_cloneArrayBuffer;function cloneTypedArray$1(s,a){var o=a?cloneArrayBuffer(s.buffer):s.buffer;return new s.constructor(o,s.byteOffset,s.length)}var _cloneTypedArray=cloneTypedArray$1;function copyArray$1(s,a){var o=-1,c=s.length;for(a||(a=Array(c));++o<c;)a[o]=s[o];return a}var _copyArray=copyArray$1,isObject$4=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function s(){}return function(a){if(!isObject$4(a))return{};if(objectCreate)return objectCreate(a);s.prototype=a;var o=new s;return s.prototype=void 0,o}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype$1=_getPrototype,isPrototype=_isPrototype;function initCloneObject$1(s){return typeof s.constructor=="function"&&!isPrototype(s)?baseCreate(getPrototype$1(s)):{}}var _initCloneObject=initCloneObject$1,isArrayLike$1=isArrayLike_1,isObjectLike$1=isObjectLike_1;function isArrayLikeObject$1(s){return isObjectLike$1(s)&&isArrayLike$1(s)}var isArrayLikeObject_1=isArrayLikeObject$1,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(s){if(!isObjectLike(s)||baseGetTag(s)!=objectTag)return!1;var a=getPrototype(s);if(a===null)return!0;var o=hasOwnProperty.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&funcToString.call(o)==objectCtorString}var isPlainObject_1=isPlainObject$2;function safeGet$2(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var _safeGet=safeGet$2,assignValue=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$1(s,a,o,c){var d=!o;o||(o={});for(var b=-1,$=a.length;++b<$;){var j=a[b],_e=c?c(o[j],s[j],j,o,s):void 0;_e===void 0&&(_e=s[j]),d?baseAssignValue(o,j,_e):assignValue(o,j,_e)}return o}var _copyObject=copyObject$1,copyObject=_copyObject,keysIn$1=keysIn_1;function toPlainObject$1(s){return copyObject(s,keysIn$1(s))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer=_cloneBufferExports,cloneTypedArray=_cloneTypedArray,copyArray=_copyArray,initCloneObject=_initCloneObject,isArguments=isArguments_1,isArray$1=isArray_1,isArrayLikeObject=isArrayLikeObject_1,isBuffer=isBufferExports,isFunction=isFunction_1,isObject$3=isObject_1,isPlainObject$1=isPlainObject_1,isTypedArray=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(s,a,o,c,d,b,$){var j=safeGet$1(s,o),_e=safeGet$1(a,o),et=$.get(_e);if(et){assignMergeValue$1(s,o,et);return}var tt=b?b(j,_e,o+"",s,a,$):void 0,rt=tt===void 0;if(rt){var nt=isArray$1(_e),it=!nt&&isBuffer(_e),at=!nt&&!it&&isTypedArray(_e);tt=_e,nt||it||at?isArray$1(j)?tt=j:isArrayLikeObject(j)?tt=copyArray(j):it?(rt=!1,tt=cloneBuffer(_e,!0)):at?(rt=!1,tt=cloneTypedArray(_e,!0)):tt=[]:isPlainObject$1(_e)||isArguments(_e)?(tt=j,isArguments(j)?tt=toPlainObject(j):(!isObject$3(j)||isFunction(j))&&(tt=initCloneObject(_e))):rt=!1}rt&&($.set(_e,tt),d(tt,_e,c,b,$),$.delete(_e)),assignMergeValue$1(s,o,tt)}var _baseMergeDeep=baseMergeDeep$1,Stack=_Stack,assignMergeValue=_assignMergeValue,baseFor=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$2=isObject_1,keysIn=keysIn_1,safeGet=_safeGet;function baseMerge$1(s,a,o,c,d){s!==a&&baseFor(a,function(b,$){if(d||(d=new Stack),isObject$2(b))baseMergeDeep(s,a,$,o,baseMerge$1,c,d);else{var j=c?c(safeGet(s,$),b,$+"",s,a,d):void 0;j===void 0&&(j=b),assignMergeValue(s,$,j)}},keysIn)}var _baseMerge=baseMerge$1;function apply$1(s,a,o){switch(o.length){case 0:return s.call(a);case 1:return s.call(a,o[0]);case 2:return s.call(a,o[0],o[1]);case 3:return s.call(a,o[0],o[1],o[2])}return s.apply(a,o)}var _apply=apply$1,apply=_apply,nativeMax=Math.max;function overRest$1(s,a,o){return a=nativeMax(a===void 0?s.length-1:a,0),function(){for(var c=arguments,d=-1,b=nativeMax(c.length-a,0),$=Array(b);++d<b;)$[d]=c[a+d];d=-1;for(var j=Array(a+1);++d<a;)j[d]=c[d];return j[a]=o($),apply(s,this,j)}}var _overRest=overRest$1;function constant$1(s){return function(){return s}}var constant_1=constant$1,constant=constant_1,defineProperty=_defineProperty,identity$1=identity_1,baseSetToString$1=defineProperty?function(s,a){return defineProperty(s,"toString",{configurable:!0,enumerable:!1,value:constant(a),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(s){var a=0,o=0;return function(){var c=nativeNow(),d=HOT_SPAN-(c-o);if(o=c,d>0){if(++a>=HOT_COUNT)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(s,a){return setToString(overRest(s,a,identity),s+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike=isArrayLike_1,isIndex=_isIndex,isObject$1=isObject_1;function isIterateeCall$1(s,a,o){if(!isObject$1(o))return!1;var c=typeof a;return(c=="number"?isArrayLike(o)&&isIndex(a,o.length):c=="string"&&a in o)?eq(o[a],s):!1}var _isIterateeCall=isIterateeCall$1,baseRest=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$1(s){return baseRest(function(a,o){var c=-1,d=o.length,b=d>1?o[d-1]:void 0,$=d>2?o[2]:void 0;for(b=s.length>3&&typeof b=="function"?(d--,b):void 0,$&&isIterateeCall(o[0],o[1],$)&&(b=d<3?void 0:b,d=1),a=Object(a);++c<d;){var j=o[c];j&&s(a,j,c,b)}return a})}var _createAssigner=createAssigner$1,baseMerge=_baseMerge,createAssigner=_createAssigner,merge=createAssigner(function(s,a,o){baseMerge(s,a,o)}),merge_1=merge;const merge$1=getDefaultExportFromCjs(merge_1),runValidators=async(s,a,o,c)=>{const d=await Promise.all(c.map($=>$(s,a,o))),b=merge$1({},...d);return isEmpty$1(b)?Promise.resolve():Promise.reject(b)},DEFAULT_COGNITO_PASSWORD_MIN_LENGTH=8,defaultServices={async getAmplifyConfig(){var j,_e,et,tt;const s=DefaultAmplify.getConfig(),a=(j=s.Auth)==null?void 0:j.Cognito,{loginWith:o,userAttributes:c}=((_e=s.Auth)==null?void 0:_e.Cognito)??{},d=o?Object.entries(o).filter(([rt,nt])=>rt!=="oauth").filter(([rt,nt])=>!!nt).map(rt=>rt[0]==="phone"?"phone_number":rt[0]):void 0,b=c?Object.entries(c).map(([rt,nt])=>Object.keys(nt)[0]):void 0,$=(et=o==null?void 0:o.oauth)!=null&&et.providers?(tt=o.oauth.providers)==null?void 0:tt.map(rt=>rt.toString().toLowerCase()):void 0;return{...a,loginMechanisms:d,signUpAttributes:b,socialProviders:$}},getCurrentUser,handleSignIn:signIn,handleSignUp:signUp,handleConfirmSignIn:confirmSignIn,handleConfirmSignUp:confirmSignUp,handleForgotPasswordSubmit:confirmResetPassword,handleForgotPassword:resetPassword,async validateCustomSignUp(s,a){},async validateFormPassword(s,a,o){const{password:c}=s,{password:d}=a;if(!d||!o)return null;const b=[],$=o.minLength??DEFAULT_COGNITO_PASSWORD_MIN_LENGTH;return c.length<$&&b.push(`Password must have at least ${$} characters`),o.requireLowercase&&!/[a-z]/.test(c)&&b.push("Password must have lower case letters"),o.requireUppercase&&!/[A-Z]/.test(c)&&b.push("Password must have upper case letters"),o.requireNumbers&&!/[0-9]/.test(c)&&b.push("Password must have numbers"),o.requireSpecialCharacters&&!hasSpecialChars(c)&&b.push("Password must have special characters"),b.length!==0?{password:b}:null},async validateConfirmPassword(s,a){const{password:o,confirm_password:c}=s,{confirm_password:d,password:b}=a;if(!o&&!c)return null;if((o||c)&&o!==c&&(d&&b||(o==null?void 0:o.length)>=6&&(c==null?void 0:c.length)>=6))return{confirm_password:"Your passwords must match"}},async validatePreferredUsername(s,a){}};function forgotPasswordActor({services:s}){return createMachine({id:"forgotPasswordActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldResetPassword",target:"confirmResetPassword"},{cond:"shouldConfirmResetPassword",target:"confirmResetPassword"},{target:"forgotPassword"}]},forgotPassword:{initial:"edit",entry:"sendUpdate",exit:["clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},submit:{tags:"pending",entry:["sendUpdate","clearError","setUsernameForgotPassword"],invoke:{src:"handleResetPassword",onDone:{actions:["setCodeDeliveryDetails","setNextResetPasswordStep"],target:"#forgotPasswordActor.confirmResetPassword"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmResetPassword:{type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"},RESEND:"resendCode",CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{target:"pending",actions:"clearValidationError"},onError:{target:"idle",actions:"setFieldErrors"}}},resendCode:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleResetPassword",onDone:{target:"idle"},onError:{actions:"setRemoteError",target:"idle"}}},pending:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleConfirmResetPassword",onDone:[{cond:"hasCompletedResetPassword",actions:"setNextResetPasswordStep",target:"#forgotPasswordActor.resolved"},{actions:"setSignInStep",target:"#forgotPasswordActor.resolved"}],onError:{actions:"setRemoteError",target:"idle"}}}}}}},resolved:{type:"final",data:({step:a})=>({step:a})}}},{actions:{...ACTIONS,sendUpdate:sendUpdate()},guards:GUARDS,services:{handleResetPassword({username:a}){return s.handleForgotPassword({username:a})},handleConfirmResetPassword({formValues:a,username:o}){const{confirmation_code:c,password:d}=a;return s.handleForgotPasswordSubmit({confirmationCode:c,newPassword:d,username:o})},validateFields(a){return runValidators(a.formValues,a.touched,a.passwordSettings,[defaultServices.validateFormPassword,defaultServices.validateConfirmPassword])}}})}const handleSignInResponse={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signInActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:["setMissingAttributes","setNextSignInStep"],target:"#signInActor.forceChangePassword"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resendSignUpCode"},{actions:["setChallengeName","setMissingAttributes","setNextSignInStep","setTotpSecretCode"],target:"#signInActor.init"}],onError:{actions:"setRemoteError",target:"edit"}},handleFetchUserAttributesResponse$1={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signInActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}};function signInActor({services:s}){return createMachine({id:"signInActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignIn",target:"confirmSignIn"},{cond:"shouldSetupTotp",target:"setupTotp"},{cond:({step:a})=>a==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",actions:"setActorDoneData",target:"forceChangePassword"},{target:"signIn"}]},federatedSignIn:{entry:["sendUpdate","clearError"],invoke:{src:"signInWithRedirect",onError:{actions:"setRemoteError"}}},fetchUserAttributes:{invoke:{src:"fetchUserAttributes",...handleFetchUserAttributesResponse$1}},resendSignUpCode:{invoke:{src:"handleResendSignUpCode",onDone:{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"},onError:{actions:"setRemoteError",target:"#signInActor.signIn"}}},resetPassword:{invoke:{src:"resetPassword",onDone:[{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}}},signIn:{initial:"edit",exit:"clearTouched",states:{edit:{entry:"sendUpdate",on:{CHANGE:{actions:"handleInput"},FEDERATED_SIGN_IN:{target:"#signInActor.federatedSignIn"},SUBMIT:{actions:"handleSubmit",target:"submit"}}},submit:{tags:"pending",entry:["clearError","sendUpdate","setUsernameSignIn"],exit:"clearFormValues",invoke:{src:"handleSignIn",...handleSignInResponse}}}},confirmSignIn:{initial:"edit",exit:["clearChallengeName","clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignIn",...handleSignInResponse}}}},forceChangePassword:{entry:"sendUpdate",type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{SIGN_IN:{actions:"setSignInStep",target:"#signInActor.resolved"},CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submit:{initial:"edit",entry:"clearError",states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{actions:"clearValidationError",target:"pending"},onError:{actions:"setFieldErrors",target:"edit"}}},pending:{tags:"pending",entry:["sendUpdate","clearError"],invoke:{src:"handleForceChangePassword",...handleSignInResponse}}}}}},setupTotp:{initial:"edit",exit:["clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["sendUpdate","clearError"],invoke:{src:"confirmSignIn",...handleSignInResponse}}}},resolved:{type:"final",data:a=>({codeDeliveryDetails:a.codeDeliveryDetails,remoteError:a.remoteError,step:a.step,unverifiedUserAttributes:a.unverifiedUserAttributes,username:a.username})}}},{actions:{...ACTIONS,sendUpdate:sendUpdate()},guards:GUARDS,services:{async fetchUserAttributes(){return fetchUserAttributes()},resetPassword({username:a}){return resetPassword({username:a})},handleResendSignUpCode({username:a}){return resendSignUpCode({username:a})},handleSignIn({formValues:a,username:o}){const{password:c}=a;return s.handleSignIn({username:o,password:c})},confirmSignIn({formValues:a}){const{confirmation_code:o}=a;return s.handleConfirmSignIn({challengeResponse:o})},async handleForceChangePassword({formValues:a}){let{password:o,phone_number:c,country_code:d,confirm_password:b,...$}=a,j;return c&&(j=`${d}${c}`.replace(/[^A-Z0-9+]/gi,""),$={...$,phone_number:j}),confirmSignIn({challengeResponse:o,options:{userAttributes:$}})},signInWithRedirect(a,{data:o}){return signInWithRedirect(o)},async validateFields(a){return runValidators(a.formValues,a.touched,a.passwordSettings,[defaultServices.validateFormPassword,defaultServices.validateConfirmPassword])}}})}const handleResetPasswordResponse={onDone:[{actions:"setCodeDeliveryDetails",target:"#signUpActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}},handleAutoSignInResponse={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signUpActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:"setNextSignInStep",target:"#signUpActor.resolved"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resendSignUpCode"},{actions:["setNextSignInStep","setChallengeName","setMissingAttributes","setTotpSecretCode"],target:"#signUpActor.resolved"}],onError:{actions:"setRemoteError",target:"#signUpActor.resolved"}},handleFetchUserAttributesResponse={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signUpActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}};function signUpActor({services:s}){return createMachine({id:"signUpActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignUp",target:"confirmSignUp"},{target:"signUp"}]},autoSignIn:{tags:"pending",invoke:{src:"autoSignIn",...handleAutoSignInResponse}},fetchUserAttributes:{invoke:{src:"fetchUserAttributes",...handleFetchUserAttributesResponse}},resetPassword:{invoke:{src:"resetPassword",...handleResetPasswordResponse}},resendSignUpCode:{tags:"pending",entry:"sendUpdate",exit:"sendUpdate",invoke:{src:"resendSignUpCode",onDone:{actions:["setCodeDeliveryDetails","sendUpdate"],target:"#signUpActor.confirmSignUp"},onError:[{cond:"isUserAlreadyConfirmed",target:"#signUpActor.resolved"},{actions:["setRemoteError","sendUpdate"]}]}},signUp:{type:"parallel",exit:"clearTouched",states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateSignUp",onDone:{actions:"clearValidationError",target:"valid"},onError:{actions:"setFieldErrors",target:"invalid"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:["sendUpdate"],on:{SUBMIT:{actions:"handleSubmit",target:"validate"},FEDERATED_SIGN_IN:"federatedSignIn"}},federatedSignIn:{entry:["sendUpdate","clearError"],invoke:{src:"federatedSignIn",onError:{actions:"setRemoteError"}}},validate:{entry:"sendUpdate",invoke:{src:"validateSignUp",onDone:{target:"signUp",actions:"clearValidationError"},onError:{actions:"setFieldErrors",target:"idle"}}},signUp:{tags:"pending",entry:["setUsernameSignUp","clearError"],exit:"sendUpdate",invoke:{src:"handleSignUp",onDone:[{cond:"hasCompletedSignUp",actions:"setNextSignUpStep",target:"#signUpActor.resolved"},{cond:"shouldAutoSignIn",actions:"setNextSignUpStep",target:"#signUpActor.autoSignIn"},{actions:["setCodeDeliveryDetails","setNextSignUpStep"],target:"#signUpActor.init"}],onError:{actions:["sendUpdate","setRemoteError"],target:"idle"}}}}}}},confirmSignUp:{initial:"edit",entry:"sendUpdate",states:{edit:{on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"},RESEND:"#signUpActor.resendSignUpCode"}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignUp",onDone:[{cond:"shouldAutoSignIn",actions:["setNextSignUpStep","clearFormValues"],target:"#signUpActor.autoSignIn"},{actions:"setNextSignUpStep",target:"#signUpActor.init"}],onError:{actions:["setRemoteError","sendUpdate"],target:"edit"}}}}},resolved:{type:"final",data:a=>({challengeName:a.challengeName,missingAttributes:a.missingAttributes,remoteError:a.remoteError,step:a.step,totpSecretCode:a.totpSecretCode,unverifiedUserAttributes:a.unverifiedUserAttributes})}}},{actions:{...ACTIONS,sendUpdate:sendUpdate()},guards:GUARDS,services:{autoSignIn(){return autoSignIn()},async fetchUserAttributes(){return fetchUserAttributes()},confirmSignUp({formValues:a,username:o}){const{confirmation_code:c}=a,d={username:o,confirmationCode:c};return s.handleConfirmSignUp(d)},resendSignUpCode({username:a}){return resendSignUpCode({username:a})},async federatedSignIn(a,{data:o}){return signInWithRedirect(o)},async handleSignUp(a,o){const{formValues:c,loginMechanisms:d,username:b}=a,$=d[0],j=getSignUpInput(b,c,$);return s.handleSignUp(j)},async validateSignUp(a,o){return runValidators(a.formValues,a.touched,a.passwordSettings,[s.validateFormPassword,s.validateConfirmPassword,s.validatePreferredUsername,s.validateCustomSignUp])}}})}const signOutActor=()=>createMachine({initial:"pending",id:"signOutActor",predictableActionArguments:!0,states:{pending:{tags:"pending",invoke:{src:"signOut",onDone:"resolved",onError:"rejected"}},resolved:{type:"final"},rejected:{type:"final"}}},{services:{signOut:()=>signOut()}});function verifyUserAttributesActor(){return createMachine({id:"verifyUserAttributesActor",initial:"selectUserAttributes",predictableActionArguments:!0,states:{selectUserAttributes:{initial:"edit",exit:["clearError","clearTouched","sendUpdate"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:{target:"#verifyUserAttributesActor.resolved"},CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"sendUserAttributeVerificationCode",onDone:{actions:["setSelectedUserAttribute","setCodeDeliveryDetails"],target:"#verifyUserAttributesActor.confirmVerifyUserAttribute"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmVerifyUserAttribute:{initial:"edit",exit:["clearError","clearFormValues","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:"#verifyUserAttributesActor.resolved",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmVerifyUserAttribute",onDone:{actions:["setConfirmAttributeCompleteStep","clearSelectedUserAttribute"],target:"#verifyUserAttributesActor.resolved"},onError:{actions:"setRemoteError",target:"edit"}}}}},resolved:{type:"final",data:({step:s})=>({step:s})}}},{actions:{...ACTIONS,sendUpdate:sendUpdate()},services:{sendUserAttributeVerificationCode({formValues:{unverifiedAttr:s}}){return sendUserAttributeVerificationCode({userAttributeKey:s})},async confirmVerifyUserAttribute({formValues:{confirmation_code:s},selectedUserAttribute:a}){return confirmUserAttribute({confirmationCode:s,userAttributeKey:a})},async validateFields(s){return runValidators(s.formValues,s.touched,s.passwordSettings,[defaultServices.validateFormPassword,defaultServices.validateConfirmPassword])}}})}const getActorContext=(s,a)=>{var o,c,d,b,$,j;return{...s.actorDoneData,step:((o=s==null?void 0:s.actorDoneData)==null?void 0:o.step)??a,formValues:{},touched:{},validationError:{},formFields:(c=s.config)==null?void 0:c.formFields,loginMechanisms:(d=s.config)==null?void 0:d.loginMechanisms,passwordSettings:(b=s.config)==null?void 0:b.passwordSettings,signUpAttributes:($=s.config)==null?void 0:$.signUpAttributes,socialProviders:(j=s.config)==null?void 0:j.socialProviders}},{choose,stop}=actions,stopActor=s=>stop(s),LEGACY_WAIT_CONFIG={on:{INIT:{actions:["configure"],target:"getConfig"}}},NEXT_WAIT_CONFIG={always:{actions:["configure"],target:"getConfig"}};function createAuthenticatorMachine(s){const{useNextWaitConfig:a,...o}=s??{};return createMachine({id:"authenticator",initial:"idle",context:{user:void 0,config:{},services:defaultServices,actorRef:void 0,hasSetup:!1},predictableActionArguments:!0,states:{idle:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"authenticated"},onError:{target:"setup"}}},setup:{initial:"initConfig",states:{initConfig:a?NEXT_WAIT_CONFIG:LEGACY_WAIT_CONFIG,getConfig:{invoke:{src:"getAmplifyConfig",onDone:{actions:["applyAmplifyConfig","setHasSetup"],target:"goToInitialState"}}},goToInitialState:{always:[{cond:"isInitialStateSignUp",target:"#authenticator.signUpActor"},{cond:"isInitialStateResetPassword",target:"#authenticator.forgotPasswordActor"},{target:"#authenticator.signInActor"}]}}},getCurrentUser:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"#authenticator.authenticated"},onError:{target:"#authenticator.setup"}}},signInActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignInActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:stopActor("signInActor")}},on:{FORGOT_PASSWORD:"forgotPasswordActor",SIGN_IN:"signInActor",SIGN_UP:"signUpActor","done.invoke.signInActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isResetPasswordStep",actions:"setActorDoneData",target:"#authenticator.forgotPasswordActor"},{cond:"isConfirmSignUpStep",actions:"setActorDoneData",target:"#authenticator.signUpActor"}]}},signUpActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignUpActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:stopActor("signUpActor")}},on:{SIGN_IN:"signInActor","done.invoke.signUpActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isConfirmUserAttributeStep",target:"#authenticator.verifyUserAttributesActor"},{actions:"setActorDoneData",target:"#authenticator.signInActor"}]}},forgotPasswordActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnForgotPasswordActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:stopActor("forgotPasswordActor")}},on:{SIGN_IN:"signInActor","done.invoke.forgotPasswordActor":[{target:"#authenticator.signInActor"}]}},verifyUserAttributesActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnVerifyUserAttributesActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:stopActor("verifyUserAttributesActor")}},on:{"done.invoke.verifyUserAttributesActor":[{actions:"setActorDoneData",target:"#authenticator.getCurrentUser"}]}},authenticated:{initial:"idle",states:{idle:{on:{TOKEN_REFRESH:"refreshUser"}},refreshUser:{invoke:{src:"#authenticator.getCurrentUser",onDone:{actions:"setUser",target:"idle"},onError:{target:"#authenticator.signOut"}}}},on:{SIGN_OUT:"signOut"}},signOut:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignOutActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:stopActor("signOutActor")}},on:{"done.invoke.signOutActor":{actions:"clearUser",target:"setup.getConfig"}}}},on:{SIGN_IN_WITH_REDIRECT:{target:"#authenticator.getCurrentUser"},CHANGE:{actions:"forwardToActor"},BLUR:{actions:"forwardToActor"},SUBMIT:{actions:"forwardToActor"},FEDERATED_SIGN_IN:{actions:"forwardToActor"},RESEND:{actions:"forwardToActor"},SIGN_IN:{actions:"forwardToActor"},SKIP:{actions:"forwardToActor"}}},{actions:{...ACTIONS,forwardToActor:choose([{cond:"hasActor",actions:forwardTo(({actorRef:d})=>d)}]),setActorDoneData:assign$2({actorDoneData:(d,b)=>({codeDeliveryDetails:b.data.codeDeliveryDetails,missingAttributes:b.data.missingAttributes,remoteError:b.data.remoteError,username:b.data.username,step:b.data.step,totpSecretCode:b.data.totpSecretCode,unverifiedUserAttributes:b.data.unverifiedUserAttributes})}),applyAmplifyConfig:assign$2({config(d,{data:b}){const{loginMechanisms:$=b.loginMechanisms??[],signUpAttributes:j=b.signUpAttributes??[],socialProviders:_e=b.socialProviders??[],initialState:et,formFields:tt,passwordSettings:rt=b.passwordFormat??{}}=d.config;return $.length===0&&$.push("username"),{formFields:convertFormFields(tt)??{},initialState:et,loginMechanisms:$,passwordSettings:rt,signUpAttributes:j,socialProviders:_e}}}),spawnSignInActor:assign$2({actorRef:(d,b)=>{const{services:$}=d,j=signInActor({services:$}).withContext(getActorContext(d,"SIGN_IN"));return spawn(j,{name:"signInActor"})}}),spawnSignUpActor:assign$2({actorRef:(d,b)=>{const{services:$}=d,j=signUpActor({services:$}).withContext(getActorContext(d,"SIGN_UP"));return spawn(j,{name:"signUpActor"})}}),spawnForgotPasswordActor:assign$2({actorRef:(d,b)=>{const{services:$}=d,j=forgotPasswordActor({services:$}).withContext(getActorContext(d,"FORGOT_PASSWORD"));return spawn(j,{name:"forgotPasswordActor"})}}),spawnVerifyUserAttributesActor:assign$2({actorRef:d=>{const b=verifyUserAttributesActor().withContext(getActorContext(d));return spawn(b,{name:"verifyUserAttributesActor"})}}),spawnSignOutActor:assign$2({actorRef:d=>{const b=signOutActor().withContext({user:d==null?void 0:d.user});return spawn(b,{name:"signOutActor"})}}),configure:assign$2((d,b)=>{const{services:$,...j}=isEmptyObject(o)?b.data:o;return{services:{...defaultServices,...$},config:j}}),setHasSetup:assign$2({hasSetup:!0})},guards:{...GUARDS,hasActor:({actorRef:d})=>!!d,isInitialStateSignUp:({config:d})=>d.initialState==="signUp",isInitialStateResetPassword:({config:d})=>d.initialState==="forgotPassword",shouldSetup:({hasSetup:d})=>!d},services:{getAmplifyConfig:({services:d})=>d.getAmplifyConfig(),handleGetCurrentUser:({services:d})=>d.getCurrentUser()}})}function convertFormFields(s){return s&&Object.keys(s).forEach(a=>{Object.keys(s[a]).forEach(o=>{let c=s[a][o];c.required=c.isRequired})}),s}function lowerCase(s){return s.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(s,a){a===void 0&&(a={});for(var o=a.splitRegexp,c=o===void 0?DEFAULT_SPLIT_REGEXP:o,d=a.stripRegexp,b=d===void 0?DEFAULT_STRIP_REGEXP:d,$=a.transform,j=$===void 0?lowerCase:$,_e=a.delimiter,et=_e===void 0?" ":_e,tt=replace(replace(s,c,"$1\0$2"),b,"\0"),rt=0,nt=tt.length;tt.charAt(rt)==="\0";)rt++;for(;tt.charAt(nt-1)==="\0";)nt--;return tt.slice(rt,nt).split("\0").map(j).join(et)}function replace(s,a,o){return a instanceof RegExp?s.replace(a,o):a.reduce(function(c,d){return c.replace(d,o)},s)}function pascalCaseTransform(s,a){var o=s.charAt(0),c=s.substr(1).toLowerCase();return a>0&&o>="0"&&o<="9"?"_"+o+c:""+o.toUpperCase()+c}function pascalCaseTransformMerge(s){return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()}function pascalCase(s,a){return a===void 0&&(a={}),noCase(s,__assign$3({delimiter:"",transform:pascalCaseTransform},a))}function camelCaseTransform(s,a){return a===0?s.toLowerCase():pascalCaseTransform(s,a)}function camelCaseTransformMerge(s,a){return a===0?s.toLowerCase():pascalCaseTransformMerge(s)}function camelCase(s,a){return a===void 0&&(a={}),pascalCase(s,__assign$3({transform:camelCaseTransform},a))}function upperCaseFirst(s){return s.charAt(0).toUpperCase()+s.substr(1)}function capitalCaseTransform(s){return upperCaseFirst(s.toLowerCase())}function capitalCase(s,a){return a===void 0&&(a={}),noCase(s,__assign$3({delimiter:" ",transform:capitalCaseTransform},a))}function upperCase(s){return s.toUpperCase()}function constantCase(s,a){return a===void 0&&(a={}),noCase(s,__assign$3({delimiter:"_",transform:upperCase},a))}function dotCase(s,a){return a===void 0&&(a={}),noCase(s,__assign$3({delimiter:"."},a))}function headerCase(s,a){return a===void 0&&(a={}),capitalCase(s,__assign$3({delimiter:"-"},a))}function paramCase(s,a){return a===void 0&&(a={}),dotCase(s,__assign$3({delimiter:"-"},a))}function pathCase(s,a){return a===void 0&&(a={}),dotCase(s,__assign$3({delimiter:"/"},a))}function sentenceCaseTransform(s,a){var o=s.toLowerCase();return a===0?upperCaseFirst(o):o}function sentenceCase(s,a){return a===void 0&&(a={}),noCase(s,__assign$3({delimiter:" ",transform:sentenceCaseTransform},a))}function snakeCase(s,a){return a===void 0&&(a={}),dotCase(s,__assign$3({delimiter:"_"},a))}const dist_es2015=Object.freeze(Object.defineProperty({__proto__:null,camelCase,camelCaseTransform,camelCaseTransformMerge,capitalCase,capitalCaseTransform,constantCase,dotCase,headerCase,noCase,paramCase,pascalCase,pascalCaseTransform,pascalCaseTransformMerge,pathCase,sentenceCase,sentenceCaseTransform,snakeCase},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(dist_es2015),ChangeCase=require$$0,reduce=function(s,a,o){return Object.keys(s||{}).reduce((c,d)=>{let b=s[d];return a(c,b,d,s)},o)},forEach=function(s,a){Object.keys(s||{}).forEach(o=>{let c=s[o];a(c,o)})},clone=function(s){return Object.assign(new s.constructor,s)},cloneDeep=function(s){if(s==null||typeof s!="object")return s;if(s instanceof Array)return s.reduce((a,o,c)=>(a[c]=cloneDeep(o),a),[]);if(s instanceof Object)return Object.keys(s||{}).reduce((a,o)=>(a[o]=cloneDeep(s[o]),a),{})},isObject=function(s){const a=typeof s;return s!=null&&(a==="object"||a==="function")},isString=function(s){return typeof s=="string"||s instanceof String},isArray=function(s){return Array.isArray(s)},isEmpty=function(s){return[Object,Array].includes((s||{}).constructor)&&!Object.entries(s||{}).length};function isPlainObject(s){if(typeof s!="object"||s===null||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let a=s;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(s)===a}const filter=function(s,a){if(typeof a!="function")throw"filter is not a function";return typeof s>"u"?[]:s.filter(a)},assign=function(){let s=Array.prototype.slice.call(arguments);return s.unshift({}),Object.assign(...s)},pull=function(s,...a){var o=new Set(a);for(let c=s.length-1;c>=0;c--)o.has(s[c])&&s.splice(c,1)},unique=function(s){return[...new Set(s)]},upperFirst=function(s){return s?s[0].toUpperCase()+s.substr(1):""},matchFn=function(s,a){return isObject(a)?Object.keys(a).every(o=>matchFn(s[o],a[o])):s==a},matches=function(s){let a=cloneDeep(s);return c=>matchFn(c,a)},DEFAULT_OPTIONS={transform:ChangeCase.camelCaseTransformMerge},changeDefaultCaseTransform=function(s,a){return(o,c)=>s(o,Object.assign({},DEFAULT_OPTIONS,a,c))};var es6_={each:forEach,forEach,forIn:forEach,keys:Object.keys,clone,cloneDeep,extend:Object.assign,isString,isArray,isObject,isPlainObject,isEmpty,filter,reduce,assign,upperFirst,camelCase:changeDefaultCaseTransform(ChangeCase.camelCase),snakeCase:ChangeCase.snakeCase,kebabCase:ChangeCase.paramCase,pull,matches,unique},_$1=es6_;function deepExtend(s,a,o){if(s==null)return{};var c,d,b,$,j,_e,et=s[0]||{},tt=1,rt=s.length;for(o=o||[],typeof et!="object"&&(et={});tt<rt;tt++)if((j=s[tt])!=null){for($ in j)if(j.hasOwnProperty($)&&$!=="__proto__"&&(c=et[$],b=j[$],et!==b))if(b&&(_$1.isPlainObject(b)||(d=_$1.isArray(b)))){d?(d=!1,_e=c&&_$1.isArray(c)?c:[]):_e=c&&_$1.isPlainObject(c)?c:{};var nt=o.slice(0);nt.push($),et[$]=deepExtend([_e,b],a,nt)}else b!==void 0&&(c!=null&&typeof a=="function"&&a({target:et,copy:j,path:o,key:$}),et[$]=b)}return et}var deepExtend_1=deepExtend;const deepExtend$1=getDefaultExportFromCjs(deepExtend_1);var _=es6_;function flattenProperties(s,a){a=a||[];for(var o in s)s.hasOwnProperty(o)&&(_.isPlainObject(s[o])&&"value"in s[o]?a.push(s[o]):_.isPlainObject(s[o])&&flattenProperties(s[o],a));return a}var flattenProperties_1=flattenProperties;const flattenProperties$1=getDefaultExportFromCjs(flattenProperties_1),borderWidths={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},colors={red:{10:{value:"hsl(0, 75%, 95%)"},20:{value:"hsl(0, 75%, 85%)"},40:{value:"hsl(0, 75%, 75%)"},60:{value:"hsl(0, 50%, 50%)"},80:{value:"hsl(0, 95%, 30%)"},90:{value:"hsl(0, 100%, 20%)"},100:{value:"hsl(0, 100%, 15%)"}},orange:{10:{value:"hsl(30, 75%, 95%)"},20:{value:"hsl(30, 75%, 85%)"},40:{value:"hsl(30, 75%, 75%)"},60:{value:"hsl(30, 50%, 50%)"},80:{value:"hsl(30, 95%, 30%)"},90:{value:"hsl(30, 100%, 20%)"},100:{value:"hsl(30, 100%, 15%)"}},yellow:{10:{value:"hsl(60, 75%, 95%)"},20:{value:"hsl(60, 75%, 85%)"},40:{value:"hsl(60, 75%, 75%)"},60:{value:"hsl(60, 50%, 50%)"},80:{value:"hsl(60, 95%, 30%)"},90:{value:"hsl(60, 100%, 20%)"},100:{value:"hsl(60, 100%, 15%)"}},green:{10:{value:"hsl(130, 60%, 95%)"},20:{value:"hsl(130, 60%, 90%)"},40:{value:"hsl(130, 44%, 63%)"},60:{value:"hsl(130, 43%, 46%)"},80:{value:"hsl(130, 33%, 37%)"},90:{value:"hsl(130, 27%, 29%)"},100:{value:"hsl(130, 22%, 23%)"}},teal:{10:{value:"hsl(190, 75%, 95%)"},20:{value:"hsl(190, 75%, 85%)"},40:{value:"hsl(190, 70%, 70%)"},60:{value:"hsl(190, 50%, 50%)"},80:{value:"hsl(190, 95%, 30%)"},90:{value:"hsl(190, 100%, 20%)"},100:{value:"hsl(190, 100%, 15%)"}},blue:{10:{value:"hsl(220, 95%, 95%)"},20:{value:"hsl(220, 85%, 85%)"},40:{value:"hsl(220, 70%, 70%)"},60:{value:"hsl(220, 50%, 50%)"},80:{value:"hsl(220, 95%, 30%)"},90:{value:"hsl(220, 100%, 20%)"},100:{value:"hsl(220, 100%, 15%)"}},purple:{10:{value:"hsl(300, 95%, 95%)"},20:{value:"hsl(300, 85%, 85%)"},40:{value:"hsl(300, 70%, 70%)"},60:{value:"hsl(300, 50%, 50%)"},80:{value:"hsl(300, 95%, 30%)"},90:{value:"hsl(300, 100%, 20%)"},100:{value:"hsl(300, 100%, 15%)"}},pink:{10:{value:"hsl(340, 95%, 95%)"},20:{value:"hsl(340, 90%, 85%)"},40:{value:"hsl(340, 70%, 70%)"},60:{value:"hsl(340, 50%, 50%)"},80:{value:"hsl(340, 95%, 30%)"},90:{value:"hsl(340, 100%, 20%)"},100:{value:"hsl(340, 100%, 15%)"}},neutral:{10:{value:"hsl(210, 5%, 98%)"},20:{value:"hsl(210, 5%, 94%)"},40:{value:"hsl(210, 5%, 87%)"},60:{value:"hsl(210, 10%, 58%)"},80:{value:"hsl(210, 10%, 40%)"},90:{value:"hsl(210, 25%, 25%)"},100:{value:"hsl(210, 50%, 10%)"}},primary:{10:{value:"{colors.teal.10.value}"},20:{value:"{colors.teal.20.value}"},40:{value:"{colors.teal.40.value}"},60:{value:"{colors.teal.60.value}"},80:{value:"{colors.teal.80.value}"},90:{value:"{colors.teal.90.value}"},100:{value:"{colors.teal.100.value}"}},secondary:{10:{value:"{colors.purple.10.value}"},20:{value:"{colors.purple.20.value}"},40:{value:"{colors.purple.40.value}"},60:{value:"{colors.purple.60.value}"},80:{value:"{colors.purple.80.value}"},90:{value:"{colors.purple.90.value}"},100:{value:"{colors.purple.100.value}"}},font:{primary:{value:"{colors.neutral.100.value}"},secondary:{value:"{colors.neutral.90.value}"},tertiary:{value:"{colors.neutral.80.value}"},disabled:{value:"{colors.neutral.60.value}"},inverse:{value:"{colors.white.value}"},interactive:{value:"{colors.primary.80.value}"},hover:{value:"{colors.primary.90.value}"},focus:{value:"{colors.primary.100.value}"},active:{value:"{colors.primary.100.value}"},info:{value:"{colors.blue.90.value}"},warning:{value:"{colors.orange.90.value}"},error:{value:"{colors.red.90.value}"},success:{value:"{colors.green.90.value}"}},background:{primary:{value:"{colors.white.value}"},secondary:{value:"{colors.neutral.10.value}"},tertiary:{value:"{colors.neutral.20.value}"},quaternary:{value:"{colors.neutral.60.value}"},disabled:{value:"{colors.background.tertiary.value}"},info:{value:"{colors.blue.10.value}"},warning:{value:"{colors.orange.10.value}"},error:{value:"{colors.red.10.value}"},success:{value:"{colors.green.10.value}"}},border:{primary:{value:"{colors.neutral.60.value}"},secondary:{value:"{colors.neutral.40.value}"},tertiary:{value:"{colors.neutral.20.value}"},disabled:{value:"{colors.border.tertiary.value}"},pressed:{value:"{colors.primary.100.value}"},focus:{value:"{colors.primary.100.value}"},error:{value:"{colors.red.80.value}"},info:{value:"{colors.blue.80.value}"},success:{value:"{colors.green.80.value}"},warning:{value:"{colors.orange.80.value}"}},shadow:{primary:{value:"hsla(210, 50%, 10%, 0.25)"},secondary:{value:"hsla(210, 50%, 10%, 0.15)"},tertiary:{value:"hsla(210, 50%, 10%, 0.05)"}},overlay:{5:{value:"hsla(0, 0%, 0%, 0.05)"},10:{value:"hsla(0, 0%, 0%, 0.1)"},20:{value:"hsla(0, 0%, 0%, 0.2)"},30:{value:"hsla(0, 0%, 0%, 0.3)"},40:{value:"hsla(0, 0%, 0%, 0.4)"},50:{value:"hsla(0, 0%, 0%, 0.5)"},60:{value:"hsla(0, 0%, 0%, 0.6)"},70:{value:"hsla(0, 0%, 0%, 0.7)"},80:{value:"hsla(0, 0%, 0%, 0.8)"},90:{value:"hsla(0, 0%, 0%, 0.9)"}},black:{value:"hsl(0, 0%, 0%)"},white:{value:"hsl(0, 0%, 100%)"},transparent:{value:"transparent"}},alert$1={alignItems:{value:"center"},justifyContent:{value:"space-between"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}}},autocomplete={menu:{width:{value:"100%"},marginBlockStart:{value:"{space.xxxs}"},backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small}"},options:{display:{value:"flex"},flexDirection:{value:"column"},maxHeight:{value:"300px"}},option:{backgroundColor:{value:"{colors.background.primary}"},color:{value:"currentcolor"},cursor:{value:"pointer"},transitionDuration:{value:"{time.short}"},transitionProperty:{value:"background-color, color"},transitionTimingFunction:{value:"ease"},_active:{backgroundColor:{value:"{colors.primary.80}"},color:{value:"{colors.white}"}}},_empty:{display:{value:"flex"}},_loading:{alignItems:{value:"center"},display:{value:"flex"},gap:{value:"{space.xxxs}"}},spaceShared:{paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"}}}},authenticator={maxWidth:{value:"60rem"},modal:{width:{value:"{space.relative.full}"},height:{value:"{space.relative.full}"},backgroundColor:{value:"{colors.overlay.50.value}"},top:{value:"{space.zero}"},left:{value:"{space.zero}"}},container:{widthMax:{value:"30rem"}},router:{borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.medium.value}"}},footer:{paddingBottom:{value:"{space.medium.value}"}},form:{padding:{value:"{space.xl.value}"}},state:{inactive:{backgroundColor:{value:"{colors.background.secondary.value}"}}},orContainer:{color:{value:"{colors.neutral.80.value}"},orLine:{backgroundColor:{value:"{colors.background.primary.value}"}}}},badge={color:{value:"{colors.font.primary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},paddingVertical:{value:"{space.xs.value}"},paddingHorizontal:{value:"{space.small.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderRadius:{value:"{radii.xl.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},paddingVertical:{value:"{space.xxs.value}"},paddingHorizontal:{value:"{space.xs.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"}}},breadcrumbs={flexDirection:{value:"row"},flexWrap:{value:"wrap"},gap:{value:"0"},color:{value:"{colors.font.tertiary}"},item:{flexDirection:{value:"row"},color:{value:"inherit"},fontSize:{value:"inherit"},alignItems:{value:"center"},lineHeight:{value:"1"}},separator:{color:{value:"inherit"},fontSize:{value:"inherit"},paddingInline:{value:"{space.xxs}"}},link:{color:{value:"{components.link.color}"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"},paddingInline:{value:"{space.xs}"},paddingBlock:{value:"{space.xxs}"},current:{color:{value:"inherit"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"}}}},button={fontWeight:{value:"{fontWeights.bold.value}"},transitionDuration:{value:"{components.fieldcontrol.transitionDuration.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},lineHeight:{value:"{components.fieldcontrol.lineHeight.value}"},paddingBlockStart:{value:"{components.fieldcontrol.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.paddingInlineEnd.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},borderWidth:{value:"{components.fieldcontrol.borderWidth.value}"},borderStyle:{value:"{components.fieldcontrol.borderStyle.value}"},borderRadius:{value:"{components.fieldcontrol.borderRadius.value}"},color:{value:"{colors.font.primary.value}"},_hover:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.primary.60.value}"}},_focus:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{color:{value:"{colors.font.active.value}"},backgroundColor:{value:"{colors.primary.20.value}"},borderColor:{value:"{colors.primary.100.value}"}},_loading:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},outlined:{info:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"}},_focus:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.blue.100.value}"}}},_active:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"}},_focus:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.orange.100.value}"}}},_active:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"}},_focus:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.green.100.value}"}}},_active:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"{colors.red.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"{colors.red.60.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"}},_focus:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.red.100.value}"}}},_active:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_hover:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"}},_focus:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.overlay.90.value}"}}},_active:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.neutral.100.value}"}}}},primary:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.font.inverse.value}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.100.value}"},color:{value:"{colors.font.inverse.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.blue.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.100.value}"},color:{value:"{colors.font.inverse.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.orange.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.100.value}"},color:{value:"{colors.font.inverse.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.red.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100.value}"},color:{value:"{colors.font.inverse.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.green.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.100.value}"},color:{value:"{colors.font.inverse.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.70}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.overlay.90.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}}}},menu:{borderWidth:{value:"{space.zero.value}"},backgroundColor:{value:"transparent"},justifyContent:{value:"start"},_hover:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_focus:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_active:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.90.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"}}},link:{backgroundColor:{value:"transparent"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.interactive.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.hover.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.20.value}"},color:{value:"{colors.font.active.value}"}},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.blue.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.orange.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.green.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.red.100.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.neutral.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.80.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.90.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.overlay.90.value}"}}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.overlay.90.value}"}}}},warning:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.red.60}"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.red.60}"},_hover:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.font.error}"}},_focus:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.red.80}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"{colors.red.100}"},backgroundColor:{value:"{colors.red.20}"},color:{value:"{colors.red.100}"}},_disabled:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}}},destructive:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.red.60}"},color:{value:"{colors.font.inverse}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100}"},color:{value:"{colors.font.inverse}"}}},small:{fontSize:{value:"{components.fieldcontrol.small.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.small.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.small.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.small.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.small.paddingInlineEnd.value}"}},large:{fontSize:{value:"{components.fieldcontrol.large.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.large.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.large.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.large.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.large.paddingInlineEnd.value}"}},loaderWrapper:{alignItems:{value:"center"},gap:{value:"{space.xs.value}"}}},card={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"none"},padding:{value:"{space.medium.value}"},outlined:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{components.card.boxShadow.value}"}},elevated:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"{shadows.medium.value}"}}},checkbox={cursor:{value:"pointer"},alignItems:{value:"center"},_disabled:{cursor:{value:"not-allowed"}},button:{position:{value:"relative"},alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},before:{width:{value:"100%"},height:{value:"100%"},borderWidth:{value:"{borderWidths.medium.value}"},borderRadius:{value:"20%"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"}},_focus:{outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},borderColor:{value:"{colors.transparent.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.focus.value}"}}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{borderColor:{value:"{colors.transparent.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.error.value}"}}}}},icon:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"20%"},opacity:{value:"{opacities.0.value}"},transform:{value:"scale(0)"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.short.value}"},transitionTimingFunction:{value:"ease-in-out"},_checked:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},_indeterminate:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}}},label:{_disabled:{color:{value:"{colors.font.disabled.value}"}}}},checkboxfield={alignItems:{value:"flex-start"},alignContent:{value:"center"},flexDirection:{value:"column"},justifyContent:{value:"center"}},collection={pagination:{current:{color:{value:"{components.pagination.current.color}"},backgroundColor:{value:"{components.pagination.current.backgroundColor}"}},button:{color:{value:"{components.pagination.button.color}"},_hover:{backgroundColor:{value:"{components.pagination.button.hover.backgroundColor}"},color:{value:"{components.pagination.button.hover.color}"}},_disabled:{color:{value:"{components.pagination.button.disabled.color}"}}}},search:{input:{color:{value:"{components.searchfield.color}"}},button:{color:{value:"{components.searchfield.button.color}"},_active:{backgroundColor:{value:"{components.searchfield.button._active.backgroundColor}"},borderColor:{value:"{components.searchfield.button._active.borderColor}"},color:{value:"{components.searchfield.button._active.color}"}},_disabled:{backgroundColor:{value:"{components.searchfield.button._disabled.backgroundColor}"},borderColor:{value:"{components.searchfield.button._disabled.borderColor}"},color:{value:"{components.searchfield.button._disabled.color}"}},_focus:{backgroundColor:{value:"{components.searchfield.button._focus.backgroundColor}"},borderColor:{value:"{components.searchfield.button._focus.borderColor}"},color:{value:"{components.searchfield.button._focus.color}"}},_hover:{backgroundColor:{value:"{components.searchfield.button._hover.backgroundColor}"},borderColor:{value:"{components.searchfield.button._hover.borderColor}"},color:{value:"{components.searchfield.button._hover.color}"}}}}},copy={fontSize:{value:"{fontSizes.xs}"},gap:{value:"{space.relative.medium}"},svg:{path:{fill:{value:"{colors.font.primary}"}}},toolTip:{bottom:{value:"{space.large}"},color:{value:"{colors.teal.100}"},fontSize:{value:"{fontSizes.xxs}"}}},dialcodeselect={height:{value:"{space.relative.full.value}"}},divider={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},label:{color:{value:"{colors.font.tertiary.value}"},paddingInline:{value:"{space.medium.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.background.primary.value}"}},small:{borderWidth:{value:"{borderWidths.small.value}"}},large:{borderWidth:{value:"{borderWidths.large.value}"}},opacity:{value:"{opacities.60.value}"}},dropzone={backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.font.primary}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.primary}"}},_disabled:{backgroundColor:{value:"{colors.background.disabled}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.disabled}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.disabled}"}},accepted:{backgroundColor:{value:"{colors.background.success}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.success}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.success}"}},rejected:{backgroundColor:{value:"{colors.background.error}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.error}"}}},accordion={backgroundColor:{value:"{colors.background.primary.value}"},item:{borderColor:{value:"{colors.border.secondary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small.value}"},trigger:{alignItems:{value:"center"},backgroundColor:{value:"{colors.background.primary.value}"},color:{value:"inherit"},gap:{value:"{space.small.value}"},justifyContent:{value:"space-between"},paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},_hover:{color:{value:"inherit"},backgroundColor:{value:"{colors.overlay.5.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0",offsetY:"0",blurRadius:"0",spreadRadius:"2px",color:"{colors.border.focus.value}"}}}},content:{color:{value:"inherit"},paddingInline:{value:"{space.small.value}"},paddingBlockEnd:{value:"{space.small.value}"},paddingBlockStart:{value:"{space.xxxs.value}"}},icon:{color:{value:"{colors.font.tertiary.value}"},transitionDuration:{value:"{time.medium.value}"},transitionTimingFunction:{value:"cubic-bezier(0.87, 0, 0.13, 1)"}}}},field={gap:{value:"{space.xs.value}"},fontSize:{value:"{fontSizes.medium.value}"},flexDirection:{value:"column"},small:{gap:{value:"{space.xxxs.value}"},fontSize:{value:"{fontSizes.small.value}"}},large:{gap:{value:"{space.small.value}"},fontSize:{value:"{fontSizes.large.value}"}},label:{color:{value:"{colors.font.secondary.value}"}}},fieldcontrol={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.small.value}"},color:{value:"{colors.font.primary.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"},fontSize:{value:"{components.field.fontSize.value}"},lineHeight:{value:"{lineHeights.medium.value}"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},small:{fontSize:{value:"{components.field.small.fontSize.value}"},paddingBlockStart:{value:"{space.xxs.value}"},paddingBlockEnd:{value:"{space.xxs.value}"},paddingInlineStart:{value:"{space.small.value}"},paddingInlineEnd:{value:"{space.small.value}"}},large:{fontSize:{value:"{components.field.large.fontSize.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}},quiet:{borderStyle:{value:"none"},borderInlineStart:{value:"none"},borderInlineEnd:{value:"none"},borderBlockStart:{value:"none"},borderRadius:{value:"0"},_focus:{borderBlockEndColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"1px",color:"{colors.border.focus.value}",blurRadius:"0px"}}},_error:{borderBlockEndColor:{value:"{colors.border.error.value}"},_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"1px",color:"{colors.border.error.value}",blurRadius:"0px"}}}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.border.focus.value}"}}},_disabled:{color:{value:"{colors.font.disabled.value}"},cursor:{value:"not-allowed"},borderColor:{value:"{colors.transparent.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},color:{value:"{colors.font.error.value}"},_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"1px",color:"{colors.border.error.value}"}}}}},fieldgroup={gap:{value:"{space.zero.value}"},vertical:{alignItems:{value:"center"}},outer:{alignItems:{value:"center"}}},fieldset={backgroundColor:{value:"transparent"},borderRadius:{value:"{radii.xs.value}"},flexDirection:{value:"column"},gap:{value:"{components.field.gap.value}"},legend:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"{components.field.fontSize.value}"},fontWeight:{value:"{fontWeights.bold.value}"},lineHeight:{value:"{lineHeights.medium.value}"},small:{fontSize:"{components.field.small.fontSize.value}"},large:{fontSize:"{components.field.large.fontSize.value}"}},outlined:{padding:"{space.medium.value}",borderColor:"{colors.neutral.40.value}",borderWidth:"{borderWidths.small.value}",borderStyle:"solid",small:{padding:"{space.small.value}"},large:{padding:"{space.large.value}"}},small:{gap:"{components.field.small.gap.value}"},large:{gap:"{components.field.large.gap.value}"}},fieldmessages={error:{color:{value:"{colors.font.error.value}"},fontSize:{value:"{fontSizes.small.value}"}},description:{color:{value:"{colors.font.secondary.value}"},fontStyle:{value:"italic"},fontSize:{value:"{fontSizes.small.value}"}}},flex={gap:{value:"{space.medium.value}"},justifyContent:{value:"normal"},alignItems:{value:"stretch"},alignContent:{value:"normal"},flexWrap:{value:"nowrap"}},heading={color:{value:"{colors.font.primary.value}"},lineHeight:{value:"{lineHeights.small.value}"},1:{fontSize:{value:"{fontSizes.xxxxl.value}"},fontWeight:{value:"{fontWeights.light.value}"}},2:{fontSize:{value:"{fontSizes.xxxl.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},3:{fontSize:{value:"{fontSizes.xxl.value}"},fontWeight:{value:"{fontWeights.medium.value}"}},4:{fontSize:{value:"{fontSizes.xl.value}"},fontWeight:{value:"{fontWeights.semibold.value}"}},5:{fontSize:{value:"{fontSizes.large.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},6:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},highlightmatch={highlighted:{fontWeight:{value:"{fontWeights.bold}"}}},icon={lineHeight:{value:1},height:{value:"1em"}},input={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},image={maxWidth:{value:"100%"},height:{value:"auto"},objectFit:{value:"initial"},objectPosition:{value:"initial"}},inappmessaging={banner:{height:{value:"150px "},width:{value:"400px "}},button:{backgroundColor:{value:"#e8e8e8"},borderRadius:{value:"5px"},color:{value:"black"}},dialog:{height:{value:"50vh"},minHeight:{value:"400px"},minWidth:{value:"400px"},width:{value:"30vw"}},header:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},link={active:{color:{value:"{colors.font.active.value}"}},color:{value:"{colors.font.interactive.value}"},focus:{color:{value:"{colors.font.focus.value}"}},hover:{color:{value:"{colors.font.hover.value}"}},visited:{color:{value:"{colors.font.interactive.value}"}}},liveness={cameraModule:{backgroundColor:{value:"{colors.black}"}}},loader={width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},fontSize:{value:"{fontSizes.xs.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"},fontSize:{value:"{fontSizes.xxs.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"},fontSize:{value:"{fontSizes.small.value}"}},linear:{width:{value:"100%"},minWidth:{value:"5rem"},fontSize:{value:"{fontSizes.xxs.value}"},strokeWidth:{value:"{fontSizes.xxs.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{strokeWidth:{value:"{fontSizes.xxxs.value}"},fontSize:{value:"{fontSizes.xxxs.value}"}},large:{strokeWidth:{value:"{fontSizes.xs.value}"},fontSize:{value:"{fontSizes.xs.value}"}}},text:{fill:{value:"{colors.font.primary.value}"}}},menu={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.medium.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{shadows.large.value}"},flexDirection:{value:"column"},gap:{value:"{space.zero.value}"},maxWidth:{value:"30rem"},minWidth:{value:"14rem"},small:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"}},large:{width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}},item:{minHeight:{value:"2.5rem"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}}},message={alignItems:{value:"center"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderColor:{value:"transparent"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.xs.value}"},color:{value:"{colors.font.primary.value}"},justifyContent:{value:"flex-start"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},lineHeight:{value:"{lineHeights.small.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},dismiss:{gap:{value:"{space.xxs.value}"}},plain:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}}},outlined:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.primary.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.error.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.success.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.warning.value}"}}},filled:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.secondary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"transparent"}}}},pagination={current:{alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.overlay.40.value}"}},button:{color:{value:"{colors.font.primary.value}"},paddingInlineStart:{value:"{space.xxs.value}"},paddingInlineEnd:{value:"{space.xxs.value}"},transitionProperty:{value:"background-color"},transitionDuration:{value:"{time.medium.value}"},hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},disabled:{color:{value:"{colors.font.disabled.value}"}}},ellipsis:{alignItems:{value:"baseline"},justifyContent:{value:"center"},paddingInlineStart:{value:"{space.xs.value}"},paddingInlineEnd:{value:"{space.xs.value}"}},itemContainer:{marginLeft:{value:"{space.xxxs.value}"},marginRight:{value:"{space.xxxs.value}"}},itemShared:{height:{value:"{fontSizes.xxl.value}"},minWidth:{value:"{fontSizes.xxl.value}"},borderRadius:{value:"{fontSizes.medium.value}"}}},passwordfield={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},phonenumberfield={color:{value:"{components.fieldcontrol.color}"},borderColor:{value:"{components.fieldcontrol.borderColor}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}}},placeholder={borderRadius:{value:"{radii.small.value}"},transitionDuration:{value:"{time.long.value}"},startColor:{value:"{colors.background.secondary.value}"},endColor:{value:"{colors.background.tertiary.value}"},small:{height:{value:"{space.small.value}"}},default:{height:{value:"{space.medium.value}"}},large:{height:{value:"{space.large.value}"}}},radio={alignItems:{value:"center"},justifyContent:{value:"flex-start"},gap:{value:"inherit"},_disabled:{cursor:{value:"not-allowed"}},button:{alignItems:{value:"center"},justifyContent:{value:"center"},width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},boxSizing:{value:"border-box"},borderWidth:{value:"{borderWidths.medium.value}"},borderStyle:{value:"solid"},borderRadius:{value:"50%"},borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.background.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},padding:{value:"{borderWidths.medium.value}"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"}},_checked:{color:{value:"{colors.primary.80.value}"},_disabled:{color:{value:"{colors.background.disabled.value}"}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.primary.value}"}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},radiogroup={radio:{borderWidth:{value:"{components.radio.button.borderWidth}"},borderColor:{value:"{components.radio.button.borderColor}"},backgroundColor:{value:"{components.radio.button.backgroundColor}"},_checked:{color:{value:"{components.radio.button._checked.color}"}},label:{color:{value:"{components.radio.label.color}"}}},legend:{color:{value:"{components.fieldset.legend.color}"},fontWeight:{value:"{fontWeights.normal}"}}},rating={large:{size:{value:"{fontSizes.xxxl.value}"}},default:{size:{value:"{fontSizes.xl.value}"}},small:{size:{value:"{fontSizes.small.value}"}},filled:{color:{value:"{colors.secondary.80.value}"}},empty:{color:{value:"{colors.background.tertiary.value}"}}},searchfield={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},backgroundColor:{value:"{colors.background.primary.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},select={color:{value:"{components.fieldcontrol.color}"},backgroundColor:{value:"{colors.background.primary.value}"},paddingInlineEnd:{value:"{space.xxl.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},wrapper:{flex:{value:"1"},display:{value:"block"},position:{value:"relative"},cursor:{value:"pointer"}},iconWrapper:{alignItems:{value:"center"},position:{value:"absolute"},top:{value:"50%"},right:{value:"{space.medium.value}"},transform:{value:"translateY(-50%)"},pointerEvents:{value:"none"},small:{right:{value:"{space.xs.value}"}},large:{right:{value:"{space.medium.value}"}}},option:{backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"}}},whiteSpace:{value:"nowrap"},minWidth:{value:"6.5rem"},small:{minWidth:{value:"5.5rem"},paddingInlineEnd:{value:"{space.xl.value}"}},large:{minWidth:{value:"7.5rem"},paddingInlineEnd:{value:"{space.xxl.value}"}},expanded:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},option:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"}}}},selectfield={borderColor:{value:"{components.fieldcontrol.borderColor}"},color:{value:"{components.fieldcontrol.color}"},flexDirection:{value:"column"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}},label:{color:{value:"{components.field.label.color}"}}},sliderfield={paddingBlock:{value:"{space.xs.value}"},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"9999px"},height:{value:"0.375rem"},minWidth:{value:"10rem"}},range:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"9999px"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},thumb:{width:{value:"1.25rem"},height:{value:"1.25rem"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.small.value}"},borderRadius:{value:"50%"},borderWidth:{value:"{borderWidths.medium.value}"},borderColor:{value:"{colors.border.primary.value}"},borderStyle:{value:"solid"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"},borderColor:{value:"transparent"},boxShadow:{value:"none"}},_hover:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.focus.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0",offsetY:"0",blurRadius:"0",spreadRadius:"2px",color:"{colors.border.focus.value}"}}}},small:{track:{height:{value:"0.25rem"}},thumb:{width:{value:"1rem"},height:{value:"1rem"}}},large:{track:{height:{value:"0.625rem"}},thumb:{width:{value:"1.5rem"},height:{value:"1.5rem"}}}},stepperfield={borderColor:{value:"{components.fieldcontrol.borderColor}"},flexDirection:{value:"column"},input:{color:{value:"{components.fieldcontrol.color}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},textAlign:{value:"center"}},button:{color:{value:"{components.button.color}"},backgroundColor:{value:"{colors.transparent}"},_active:{color:{value:"{components.button._active.color}"},backgroundColor:{value:"{components.button._active.backgroundColor}"}},_focus:{color:{value:"{components.button._focus.color}"},backgroundColor:{value:"{components.button._focus.backgroundColor}"}},_disabled:{color:{value:"{components.button._disabled.color}"},backgroundColor:{value:"{components.fieldcontrol._disabled.backgroundColor}"}},_hover:{color:{value:"{components.button._hover.color}"},backgroundColor:{value:"{components.button._hover.backgroundColor}"}}}},storagemanager={dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.storagemanager.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.storagemanager.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},switchfield={_disabled:{opacity:{value:"{opacities.60.value}"}},_focused:{shadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.focus.value}"}}},fontSize:{value:"{fontSizes.medium.value}"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}},label:{padding:{value:"{space.xs.value}"}},thumb:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.xxxl.value}"},checked:{transform:{value:"{transforms.slideX.medium.value}"}},transition:{duration:{value:"{time.medium.value}"}},width:{value:"{space.relative.medium.value}"}},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"{radii.xxxl.value}"},checked:{backgroundColor:{value:"{colors.primary.80.value}"}},height:{value:"{space.relative.medium.value}"},padding:{value:"{outlineWidths.medium.value}"},transition:{duration:{value:"{time.short.value}"}},width:{value:"{space.relative.xl.value}"},_error:{backgroundColor:{value:"{colors.background.error.value}"}}}},table={borderCollapse:{value:"collapse"},display:{value:"table"},width:{value:"100%"},head:{display:{value:"table-header-group"},verticalAlign:{value:"middle"}},body:{display:{value:"table-row-group"},verticalAlign:{value:"middle"}},foot:{display:{value:"table-footer-group"},verticalAlign:{value:"middle"}},row:{display:{value:"table-row"},verticalAlign:{value:"middle"},hover:{backgroundColor:{value:"{colors.background.tertiary.value}"}},striped:{backgroundColor:{value:"{colors.background.secondary.value}"}}},header:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},data:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.normal.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},caption:{captionSide:{value:"bottom"},color:{value:"{colors.font.primary.value}"},display:{value:"table-caption"},fontSize:{value:"{fontSizes.medium.value}"},textAlign:{value:"center"},wordBreak:{value:"break-all"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}}}},tabs={backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},gap:{value:"0"},item:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},color:{value:"{colors.font.secondary.value}"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"},textAlign:{value:"center"},transitionDuration:{value:"{time.medium.value}"},_hover:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.hover.value}"}},_focus:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"{borderWidths.medium}",color:"{colors.border.focus.value}"}},color:{value:"{colors.font.focus.value}"}},_active:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.font.interactive.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.interactive.value}"}},_disabled:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.disabled.value}"}}},panel:{backgroundColor:{value:"transparent"},paddingInline:{value:"0"},paddingBlock:{value:"{space.small.value}"}}},text={color:{value:"{colors.font.primary.value}"},primary:{color:{value:"{colors.font.primary.value}"}},secondary:{color:{value:"{colors.font.secondary.value}"}},tertiary:{color:{value:"{colors.font.tertiary.value}"}},error:{color:{value:"{colors.font.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"}},success:{color:{value:"{colors.font.success.value}"}},info:{color:{value:"{colors.font.info.value}"}}},textareafield={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},textfield={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},togglebutton={borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.font.primary.value}"},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.font.primary.value}"}},_active:{backgroundColor:{value:"{colors.transparent.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},borderColor:{value:"{colors.border.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{borderColor:{value:"{colors.border.pressed.value}"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.overlay.20.value}"},_hover:{backgroundColor:{value:"{colors.overlay.30.value}"}}},primary:{backgroundColor:{value:"{colors.transparent.value}"},borderWidth:{value:"{borderWidths.small.value}"},_focus:{borderColor:{value:"{colors.border.focus.value}"},backgroundColor:{value:"{colors.transparent.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"},color:{value:"{colors.font.primary.value}"}},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.primary.80.value}"},borderColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.background.primary.value}"},_focus:{backgroundColor:{value:"{colors.border.focus.value}"},borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.background.primary.value}"}},_hover:{borderColor:{value:"{colors.primary.60.value}"},backgroundColor:{value:"{colors.primary.60.value}"},boxShadow:{value:"{colors.primary.60.value}"},color:{value:"{colors.background.primary.value}"}}}},link:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"},_hover:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"}},_hover:{color:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.transparent.value}"}}}}},togglebuttongroup={alignItems:{value:"center"},alignContent:{value:"center"},justifyContent:{value:"flex-start"}},components={accordion,alert:alert$1,authenticator,autocomplete,badge,breadcrumbs,button,card,checkbox,checkboxfield,collection,copy,countrycodeselect:dialcodeselect,divider,dropzone,field,fieldcontrol,fieldgroup,fieldmessages,fieldset,flex,heading,icon,highlightmatch,image,inappmessaging,input,link,liveness,loader,menu,message,pagination,passwordfield,phonenumberfield,placeholder,radio,radiogroup,rating,searchfield,select,selectfield,sliderfield,stepperfield,storagemanager,switchfield,table,tabs,text,textareafield,textfield,togglebutton,togglebuttongroup},fonts={default:{variable:{value:`'InterVariable', 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont,
        'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans',
        sans-serif`},static:{value:`'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue',
        'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif`}}},fontSizes={xxxs:{value:"0.375rem"},xxs:{value:"0.5rem"},xs:{value:"0.75rem"},small:{value:"0.875rem"},medium:{value:"1rem"},large:{value:"1.25rem"},xl:{value:"1.5rem"},xxl:{value:"2rem"},xxxl:{value:"2.5rem"},xxxxl:{value:"3rem"}},fontWeights={hairline:{value:100},thin:{value:200},light:{value:300},normal:{value:400},medium:{value:500},semibold:{value:600},bold:{value:700},extrabold:{value:800},black:{value:900}},lineHeights={small:{value:"1.25"},medium:{value:"1.5"},large:{value:"2"}},opacities={0:{value:"0"},10:{value:"0.1"},20:{value:"0.2"},30:{value:"0.3"},40:{value:"0.4"},50:{value:"0.5"},60:{value:"0.6"},70:{value:"0.7"},80:{value:"0.8"},90:{value:"0.9"},100:{value:"1"}},outlineOffsets={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},outlineWidths={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},radii={xs:{value:"0.125rem"},small:{value:"0.25rem"},medium:{value:"0.5rem"},large:{value:"1rem"},xl:{value:"2rem"},xxl:{value:"4rem"},xxxl:{value:"8rem"}},shadows={small:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"4px",color:"{colors.shadow.tertiary.value}"}},medium:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"6px",color:"{colors.shadow.secondary.value}"}},large:{value:{offsetX:"0px",offsetY:"4px",blurRadius:"12px",color:"{colors.shadow.primary.value}"}}},space={zero:{value:"0"},xxxs:{value:"0.25rem"},xxs:{value:"0.375rem"},xs:{value:"0.5rem"},small:{value:"0.75rem"},medium:{value:"1rem"},large:{value:"1.5rem"},xl:{value:"2.0rem"},xxl:{value:"3.0rem"},xxxl:{value:"4.5rem"},relative:{xxxs:{value:"0.25em"},xxs:{value:"0.375em"},xs:{value:"0.5em"},small:{value:"0.75em"},medium:{value:"1em"},large:{value:"1.5em"},xl:{value:"2.0em"},xxl:{value:"3.0em"},xxxl:{value:"4.5em"},full:{value:"100%"}}},time={short:{value:"100ms"},medium:{value:"250ms"},long:{value:"500ms"}},transforms={slideX:{small:{value:"translateX(0.5em)"},medium:{value:"translateX(1em)"},large:{value:"translateX(2em)"}}},tokens={components,borderWidths,colors,fonts,fontSizes,fontWeights,lineHeights,opacities,outlineOffsets,outlineWidths,radii,shadows,space,time,transforms};fontSizes.xxs,fontSizes.xs,fontSizes.small,fontSizes.medium,fontSizes.large,fontSizes.xl,fontSizes.xxl,fontSizes.xxxl,space.xxxs,space.xs,space.small,space.medium,space.large,space.xl,space.xxl,space.xxxl;const breakpoints={values:{base:0,small:480,medium:768,large:992,xl:1280,xxl:1536},defaultBreakpoint:"base"},defaultTheme={tokens,breakpoints,name:"default-theme"};function arrayReduce$1(s,a,o,c){var d=-1,b=s==null?0:s.length;for(c&&b&&(o=s[++d]);++d<b;)o=a(o,s[d],d,s);return o}var _arrayReduce=arrayReduce$1;function basePropertyOf$1(s){return function(a){return s==null?void 0:s[a]}}var _basePropertyOf=basePropertyOf$1,basePropertyOf=_basePropertyOf,deburredLetters={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},deburrLetter$1=basePropertyOf(deburredLetters),_deburrLetter=deburrLetter$1,deburrLetter=_deburrLetter,toString$1=toString_1,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr$1(s){return s=toString$1(s),s&&s.replace(reLatin,deburrLetter).replace(reComboMark,"")}var deburr_1=deburr$1,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords$1(s){return s.match(reAsciiWord)||[]}var _asciiWords=asciiWords$1,reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord$1(s){return reHasUnicodeWord.test(s)}var _hasUnicodeWord=hasUnicodeWord$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="[']",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords$1(s){return s.match(reUnicodeWord)||[]}var _unicodeWords=unicodeWords$1,asciiWords=_asciiWords,hasUnicodeWord=_hasUnicodeWord,toString=toString_1,unicodeWords=_unicodeWords;function words$1(s,a,o){return s=toString(s),a=o?void 0:a,a===void 0?hasUnicodeWord(s)?unicodeWords(s):asciiWords(s):s.match(a)||[]}var words_1=words$1,arrayReduce=_arrayReduce,deburr=deburr_1,words=words_1,rsApos="[']",reApos=RegExp(rsApos,"g");function createCompounder$1(s){return function(a){return arrayReduce(words(deburr(a).replace(reApos,"")),s,"")}}var _createCompounder=createCompounder$1,createCompounder=_createCompounder,kebabCase=createCompounder(function(s,a,o){return s+(o?"-":"")+a.toLowerCase()}),kebabCase_1=kebabCase;const kebabCase$1=getDefaultExportFromCjs(kebabCase_1),defaults$1={opening_character:"{",closing_character:"}",separator:"."};var defaults_1=defaults$1;const defaults=defaults_1;function createReferenceRegex(s={}){const a=Object.assign({},defaults,s);return new RegExp("\\"+a.opening_character+"([^"+a.closing_character+"]+)\\"+a.closing_character,"g")}var createReferenceRegex_1=createReferenceRegex;const createRegex=createReferenceRegex_1;function usesReference(s,a={}){const o=a instanceof RegExp?a:createRegex(a);if(typeof s=="string")return o.test(s);if(typeof s=="object"){let c=!1;for(const d in s)if(s.hasOwnProperty(d)){const b=s[d];if(usesReference(b,a)){c=!0;break}}return c}return!1}var usesReference_1=usesReference;const usesReference$1=getDefaultExportFromCjs(usesReference_1),CSS_VARIABLE_PREFIX="amplify",SHADOW_PROPERTIES=["offsetX","offsetY","blurRadius","spreadRadius","color"];function referenceValue(s){if(!s)return"";if(usesReference$1(s)){const a=s.replace(/\{|\}/g,"").replace(".value","").split(".");return`var(--${cssNameTransform({path:a})})`}return s}function cssValue(s){const{value:a}=s;return isString$1(a)?referenceValue(a):isShadowTokenObject(a)?SHADOW_PROPERTIES.map(o=>referenceValue(isShadowTokenObject(s)?s[o]:a[o])).join(" "):a}function cssNameTransform({path:s=[]}){return`${kebabCase$1([CSS_VARIABLE_PREFIX,...s].join(" "))}`}function isDesignToken(s){return isObject$8(s)&&has(s,"value")}function isShadowTokenObject(s){return isObject$8(s)&&has(s,"offsetX")}function setupTokens({tokens:s,path:a=[],setupToken:o}){if(has(s,"value"))return o({token:s,path:a});const c={};for(const d in s)if(has(s,d)){const b=s[d],$=isObject$8(b)?b:{value:b};c[d]=setupTokens({tokens:$,path:a.concat(d),setupToken:o})}return c}const setupToken=({token:s,path:a})=>{const o=`--${cssNameTransform({path:a})}`,{value:c}=s,d=cssValue(s);return{name:o,original:c,path:a,value:d,toString:()=>`var(${o})`}};function createColorPalette({keys:s,value:a}){return s.reduce((o,c)=>({...o,[c]:{value:`{colors.${a}.${c}.value}`}}),{})}function createTheme(s,a=defaultTheme){const o=deepExtend$1([{},a,s]),{primaryColor:c,secondaryColor:d}=o;isString$1(c)&&(o.tokens.colors.primary=createColorPalette({keys:Object.keys(o.tokens.colors[c]),value:c})),isString$1(d)&&(o.tokens.colors.secondary=createColorPalette({keys:Object.keys(o.tokens.colors[d]),value:d}));const b=setupTokens({tokens:o.tokens,setupToken}),{breakpoints:$,name:j}=o;let _e=`[data-amplify-theme="${j}"] {
`+flattenProperties$1(b).map(tt=>`${tt.name}: ${tt.value};`).join(`
`)+`
}
`,et=[];return o.overrides&&(et=o.overrides.map(tt=>{const rt=setupTokens({tokens:tt.tokens,setupToken}),nt=flattenProperties$1(rt).map(it=>`${it.name}: ${it.value};`).join(`
`);if("selector"in tt&&(_e+=`
${tt.selector} {
${nt}
}
`),"mediaQuery"in tt&&(_e+=`
@media (${tt.mediaQuery}) {
  [data-amplify-theme="${j}"] {
    ${nt}
  }
}
`),"breakpoint"in tt){const it=o.breakpoints.values[tt.breakpoint];_e+=`
@media (min-width: ${it}px) {
  [data-amplify-theme="${j}"] {
    ${nt}
  }
}
`}return"colorMode"in tt&&(_e+=`
@media (prefers-color-scheme: ${tt.colorMode}) {
          [data-amplify-theme="${j}"][data-amplify-color-mode="system"] {
            ${nt}
            color-scheme: ${tt.colorMode};
          }
        }
`,_e+=`
[data-amplify-theme="${j}"][data-amplify-color-mode="${tt.colorMode}"] {
          ${nt}
          color-scheme: ${tt.colorMode};
        }
`),{...tt,tokens:rt}})),{tokens:b,breakpoints:$,name:j,cssText:_e,overrides:et}}const ComponentClassName={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"},setUserAgent=({componentName:s,packageName:a,version:o})=>{const c=[`ui-${a}`,o];switch(s){case"Authenticator":{setCustomUserAgent({...AUTHENTICATOR_INPUT_BASE,additionalDetails:[[s],c]});break}case"ChangePassword":case"DeleteUser":{setCustomUserAgent({...ACCOUNT_SETTINGS_INPUT_BASE,additionalDetails:[["AccountSettings"],c]});break}case"InAppMessaging":{setCustomUserAgent({...IN_APP_MESSAGING_INPUT_BASE,additionalDetails:[[s],c]});break}case"LocationSearch":{setCustomUserAgent({...LOCATION_SEARCH_INPUT_BASE,additionalDetails:[[s],c]});break}case"MapView":{setCustomUserAgent({...MAP_VIEW_INPUT_BASE,additionalDetails:[[s],c]});break}case"StorageManager":{setCustomUserAgent({...STORAGE_MANAGER_INPUT_BASE,additionalDetails:[[s],c]});break}}return noop},classNames=(...s)=>{const a=[];for(const o of s)if(o){if(isString$1(o)){a.push(o);continue}if(typeof o=="number"){a.push(o.toString());continue}if(Array.isArray(o)){a.push(classNames(...o));continue}if(isObject$8(o)){if(o.toString!==Object.prototype.toString&&o.toString()!=="[object Object]"){a.push(o.toString());continue}for(const c in o)has(o,c)&&o[c]&&a.push(c)}}return a.join(" ")},AuthenticatorContext=React.createContext(null),createHubHandler=s=>async(a,o)=>{await defaultAuthHubHandler(a,o,s)};function AuthenticatorProvider({children:s}){const[a,o]=React.useState("configuring");React.useEffect(()=>{getCurrentUser().then(()=>{o("authenticated")}).catch(()=>{o("unauthenticated")})},[]);const c=reactExports.useContext(AuthenticatorContext),d=useInterpret(createAuthenticatorMachine),b=reactExports.useMemo(()=>c||{authStatus:a,service:d},[a,c,d]),{service:$}=b;return reactExports.useEffect(()=>listenToAuthHub($,createHubHandler({onSignIn:()=>{o("authenticated")},onSignOut:()=>{o("unauthenticated")}})),[$]),React.createElement(AuthenticatorContext.Provider,{value:b},s)}const USE_AUTHENTICATOR_ERROR="`useAuthenticator` must be used inside an `Authenticator.Provider`.",COMPONENT_ROUTE_KEYS=["confirmResetPassword","confirmSignIn","confirmSignUp","confirmVerifyUser","forceNewPassword","forgotPassword","setupTotp","signIn","signUp","verifyUser"],isComponentRouteKey=s=>COMPONENT_ROUTE_KEYS.some(a=>a===s),defaultComparator=()=>!1;function areSelectorDepsEqual(s,a){return s.length!==a.length?!1:s.every((o,c)=>{const d=a[c];return areEmptyArrays(o,d)||areEmptyObjects(o,d)?!0:o===d})}const getComparator=s=>(a,o)=>{const c=s(a),d=s(o);return areSelectorDepsEqual(c,d)},getQRFields=s=>{var a,o,c;return{...(c=(o=(a=getActorContext$1(s))==null?void 0:a.formFields)==null?void 0:o.setupTotp)==null?void 0:c.QR}},flattenFormFields=s=>s.flatMap(([a,o])=>({name:a,...o})),convertContactMethodsToFields=s=>s&&Object.entries(s).map(([a,o])=>!isString$1(o)||!a?{}:{name:a,label:o,type:"radio",value:o}),getMachineFields=(s,a,o)=>isComponentRouteKey(s)?s==="verifyUser"?convertContactMethodsToFields(o):flattenFormFields(getSortedFormFields(s,a)):[];function useAuthenticator(s){const a=React.useContext(AuthenticatorContext);if(!a)throw new Error(USE_AUTHENTICATOR_ERROR);const{service:o}=a,{send:c}=o,d=reactExports.useCallback(st=>({...getServiceFacade({send:c,state:st})}),[c]),b=s?getComparator(s):defaultComparator,{authStatus:$}=a,j=useSelector(o,d,b),{route:_e,totpSecretCode:et,unverifiedUserAttributes:tt,user:rt,...nt}=j,it=o.getSnapshot(),at=_e==="setupTotp"?getQRFields(it):null,ct=getMachineFields(_e,it,tt);return{...nt,authStatus:$,route:_e,totpSecretCode:et,unverifiedUserAttributes:tt,user:rt,fields:ct,QRFields:at}}const routeSelector=({route:s})=>[s];function useAuthenticatorInitMachine(s){const{route:a,initializeMachine:o}=useAuthenticator(routeSelector),c=React.useRef(!1);React.useEffect(()=>{!c.current&&a==="setup"&&(o(s),c.current=!0)},[o,a,s])}const useDeprecationWarning$1=({shouldWarn:s,message:a})=>{reactExports.useEffect(()=>{s&&console.warn(a)},[s,a])};function useSetUserAgent({componentName:s,packageName:a,version:o}){reactExports.useEffect(()=>setUserAgent({componentName:s,packageName:a,version:o}),[s,a,o])}const ThemeContext=reactExports.createContext({theme:createTheme(),colorMode:void 0}),ComponentPropsToStylePropsMap={alignContent:"alignContent",alignItems:"alignItems",alignSelf:"alignSelf",area:"gridArea",aspectRatio:"aspectRatio",autoColumns:"gridAutoColumns",autoFlow:"gridAutoFlow",autoRows:"gridAutoRows",backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",basis:"flexBasis",border:"border",borderRadius:"borderRadius",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",bottom:"bottom",boxShadow:"boxShadow",color:"color",column:"gridColumn",columnEnd:"gridColumnEnd",columnGap:"columnGap",columnSpan:"gridColumn",columnStart:"gridColumnStart",direction:"flexDirection",display:"display",flex:"flex",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",gap:"gap",grow:"flexGrow",height:"height",justifyContent:"justifyContent",left:"left",letterSpacing:"letterSpacing",lineHeight:"lineHeight",margin:"margin",marginBlock:"marginBlock",marginBlockEnd:"marginBlockEnd",marginBlockStart:"marginBlockStart",marginBottom:"marginBlockEnd",marginInline:"marginInline",marginInlineEnd:"marginInlineEnd",marginInlineStart:"marginInlineStart",marginLeft:"marginInlineStart",marginRight:"marginInlineEnd",marginTop:"marginBlockStart",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",objectFit:"objectFit",objectPosition:"objectPosition",opacity:"opacity",order:"order",overflow:"overflow",padding:"padding",paddingBlock:"paddingBlock",paddingBlockEnd:"paddingBlockEnd",paddingBlockStart:"paddingBlockStart",paddingBottom:"paddingBlockEnd",paddingInline:"paddingInline",paddingInlineEnd:"paddingInlineEnd",paddingInlineStart:"paddingInlineStart",paddingLeft:"paddingInlineStart",paddingRight:"paddingInlineEnd",paddingTop:"paddingBlockStart",position:"position",resize:"resize",right:"right",row:"gridRow",rowEnd:"gridRowEnd",rowGap:"rowGap",rowSpan:"gridRow",rowStart:"gridRowStart",shrink:"flexShrink",templateAreas:"gridTemplateAreas",templateColumns:"gridTemplateColumns",templateRows:"gridTemplateRows",textAlign:"textAlign",textDecoration:"textDecoration",textTransform:"textTransform",top:"top",transform:"transform",transformOrigin:"transformOrigin",width:"width",whiteSpace:"whiteSpace",wrap:"flexWrap"},ComponentText={Alert:{dismissButtonLabel:"Dismiss alert"},Autocomplete:{emptyText:"No options found",loadingText:"Loading options..."},Collection:{searchButtonLabel:"Search",searchNoResultsFound:"No results found"},Fields:{clearButtonLabel:"Clear input"},Message:{dismissLabel:"Dismiss message"},PaginationItem:{currentPageLabel:"Page",nextLabel:"Go to next page",pageLabel:"Go to page",previousLabel:"Go to previous page"},PhoneNumberField:{countryCodeLabel:"Country code"},SearchField:{searchButtonLabel:"Search"},PasswordField:{passwordIsHidden:"Password is hidden",passwordIsShown:"Password is shown",showPassword:"Show password"},StepperField:{increaseButtonLabel:"Increase to",decreaseButtonLabel:"Decrease to"}},stylePropsToThemeKeys={backgroundColor:"colors",borderColor:"colors",borderWidth:"borderWidths",color:"colors",borderRadius:"radii",fontSize:"fontSizes",fontWeight:"fontWeights",fontFamily:"fonts",lineHeight:"lineHeights",opacity:"opacities",boxShadow:"shadows",transform:"transforms",left:"space",right:"space",top:"space",bottom:"space",height:"space",width:"space",letterSpacing:"space",margin:"space",marginBlock:"space",marginBlockEnd:"space",marginBlockStart:"space",marginInline:"space",marginInlineEnd:"space",marginInlineStart:"space",marginLeft:"space",marginRight:"space",marginTop:"space",marginBottom:"space",maxHeight:"space",maxWidth:"space",minHeight:"space",minWidth:"space",padding:"space",paddingBlock:"space",paddingBlockEnd:"space",paddingBlockStart:"space",paddingInline:"space",paddingInlineEnd:"space",paddingInlineStart:"space",paddingLeft:"space",paddingRight:"space",paddingTop:"space",paddingBottom:"space",gap:"space",columnGap:"space",rowGap:"space"},isThemeStylePropKey=s=>s in stylePropsToThemeKeys,isEmptyString=s=>typeof s=="string"&&s.length===0,isNullOrEmptyString=s=>s==null||isEmptyString(s),objectKeys=s=>Object.keys(s),getCSSVariableIfValueIsThemeKey=(s,a,o)=>{if(typeof a!="string")return a;if(a.includes(" "))return a.split(" ").map(c=>getCSSVariableIfValueIsThemeKey(s,c,o)).join(" ");if(isThemeStylePropKey(s)){const c=a.split("."),d=stylePropsToThemeKeys[s];let b=o[d];for(let $=0;$<c.length;$++){if(b){b=b[c[$]];continue}break}return isDesignToken(b)?`var(--${cssNameTransform({path:[stylePropsToThemeKeys[s],...c]})})`:a}return a},getClosestValueByBreakpoint=({breakpoint:s,breakpoints:a,values:o})=>{const c=o[s];if(c!==void 0)return c;const d=objectKeys(a).sort(($,j)=>a[j]-a[$]),b=d.slice(d.indexOf(s));for(const $ of b){const j=o[$];if(j!==void 0)return j}return null},valueObjToBreakpoints=s=>objectKeys(s).reduce((a,o)=>o in defaultTheme.breakpoints.values?{...a,[o]:s[o]}:a,{}),getValueAtCurrentBreakpoint=({breakpoint:s,breakpoints:a,values:o})=>{let c={};const d=objectKeys(a).sort((b,$)=>a[b]-a[$]);return Array.isArray(o)?o.forEach((b,$)=>{c[d[$]]=b}):typeof o=="object"&&(c=valueObjToBreakpoints(o)),getClosestValueByBreakpoint({breakpoint:s,breakpoints:a,values:c})},getMediaQueries=({breakpoints:s})=>{const a=objectKeys(s).sort((o,c)=>s[c]-s[o]);return a.map((o,c)=>{let d="";const b=s[o],$=a[c-1],j=$?s[$]-1:null;return b>=0&&(d=`(min-width: ${b}px)`),j!==null&&(d&&(d+=" and "),d+=`(max-width: ${j}px)`),{breakpoint:o,query:d,maxWidth:j,minWidth:b}})},useIsomorphicEffect=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect,useBreakpoint=({breakpoints:s,defaultBreakpoint:a})=>{const c=typeof window<"u"&&typeof window.matchMedia<"u"?window.matchMedia:null,d=reactExports.useMemo(()=>getMediaQueries({breakpoints:s}),[s]),[b,$]=reactExports.useState(a),j=reactExports.useCallback((_e,et)=>{_e&&$(et)},[$]);return useIsomorphicEffect(()=>{if(!c)return;const _e=d.map(({query:et,breakpoint:tt})=>{const rt=c(et);j(rt.matches,tt);const nt=it=>{it.matches&&$(tt)};return rt.addEventListener("change",nt),()=>rt.removeEventListener("change",nt)});return()=>{_e.forEach(et=>et())}},[s,$,c,d]),reactExports.useDebugValue(b,_e=>_e),b},getThemeFromContext=s=>typeof s>"u"||typeof s.theme>"u"?createTheme():s.theme,useTheme=()=>{const s=reactExports.useContext(ThemeContext);return getThemeFromContext(s)},getStyleValue=({value:s,propKey:a,tokens:o})=>isDesignToken(s)?s.toString():isString$1(s)?isString$1(a)?getCSSVariableIfValueIsThemeKey(a,s,o):s:null,isSpanPrimitiveValue=s=>s==="auto"||typeof s=="number"&&!isNaN(s)||typeof s=="string"&&!isNaN(parseFloat(s)),getGridSpan=s=>s==="auto"?"auto":`span ${s}`,convertGridSpan=s=>isSpanPrimitiveValue(s)?getGridSpan(s):Array.isArray(s)?s.map(a=>getGridSpan(a)):typeof s=="object"&&s!=null?Object.entries(s).reduce((a,[o,c])=>({...a,[o]:getGridSpan(c)}),{}):null,useTransformStyleProps=s=>{const{rowSpan:a,columnSpan:o,row:c,column:d,...b}=s,{rowFromSpanValue:$,columnFromSpanValue:j}=reactExports.useMemo(()=>({rowFromSpanValue:convertGridSpan(a),columnFromSpanValue:convertGridSpan(o)}),[a,o]);return{row:isNullOrEmptyString(c)?$:c,column:isNullOrEmptyString(d)?j:d,...b}},isComponentStyleProp=s=>s in ComponentPropsToStylePropsMap,convertStylePropsToStyleObj=({props:s={},style:a={},breakpoint:o,breakpoints:c,tokens:d})=>{const b={};return Object.keys(s).filter($=>s[$]!==null).forEach($=>{if(isComponentStyleProp($)){const j=s[$];if(!j||isEmptyString(j))return;const _e=ComponentPropsToStylePropsMap[$];let et="";isDesignToken(j)?et=j.toString():typeof j=="string"?et=getCSSVariableIfValueIsThemeKey($,j,d):typeof j=="number"?et=j:typeof j=="object"&&(et=getStyleValue({propKey:$,tokens:d,value:getValueAtCurrentBreakpoint({values:j,breakpoint:o,breakpoints:c})})),a={...a,[_e]:et}}else typeof s[$]<"u"&&(b[$]=s[$])}),{propStyles:a,nonStyleProps:b}},useStyles=(s,a)=>{const{breakpoints:{values:o,defaultBreakpoint:c},tokens:d}=useTheme(),b=useBreakpoint({breakpoints:o,defaultBreakpoint:c}),$=useTransformStyleProps(s);return reactExports.useMemo(()=>convertStylePropsToStyleObj({props:$,style:a,breakpoint:b,breakpoints:o,tokens:d}),[$,a,o,b,d])},primitiveWithForwardRef=s=>reactExports.forwardRef(s),ViewPrimitive=({as:s="div",children:a,testId:o,ariaLabel:c,isDisabled:d,style:b,inert:$,...j},_e)=>{const{propStyles:et,nonStyleProps:tt}=useStyles(j,b);return reactExports.createElement(s,{"aria-label":c,"data-testid":o,disabled:d,ref:_e,inert:$?"":null,style:et,...tt},a)},View=primitiveWithForwardRef(ViewPrimitive);View.displayName="View";const defaultViewBox={minX:0,minY:0,width:24,height:24},IconPrimitive=({className:s,as:a="svg",fill:o="currentColor",pathData:c,viewBox:d=defaultViewBox,children:b,paths:$,...j},_e)=>{const et=d.minX?d.minX:defaultViewBox.minX,tt=d.minY?d.minY:defaultViewBox.minY,rt=d.width?d.width:defaultViewBox.width,nt=d.height?d.height:defaultViewBox.height;let it;return b&&(it=b),$&&(it=$.map((at,ct)=>reactExports.createElement("path",{...at,key:ct}))),c&&(it=reactExports.createElement("path",{d:c,fill:o})),reactExports.createElement(View,{as:a,className:classNames(ComponentClassName.Icon,s),ref:_e,viewBox:`${et} ${tt} ${rt} ${nt}`,...j},it)},Icon=primitiveWithForwardRef(IconPrimitive);Icon.displayName="Icon";const IconsContext=reactExports.createContext({});function useIcons(s){const a=reactExports.useContext(IconsContext);if(s&&a)return a[s]}const IconCheckCircle=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",fill:"currentColor"})))},IconError=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})))},IconInfo=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M11 7H13V9H11V7ZM11 11H13V17H11V11ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"})))},IconWarning=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M1 21H23L12 2L1 21ZM13 18H11V16H13V18ZM13 14H11V10H13V14Z",fill:"currentColor"})))},AlertIcon=({variation:s,ariaHidden:a})=>{const o=useIcons("alert");let c;switch(s){case"info":c=(o==null?void 0:o.info)??reactExports.createElement(IconInfo,{"aria-hidden":a});break;case"error":c=(o==null?void 0:o.error)??reactExports.createElement(IconError,{"aria-hidden":a});break;case"warning":c=(o==null?void 0:o.warning)??reactExports.createElement(IconWarning,{"aria-hidden":a});break;case"success":c=(o==null?void 0:o.success)??reactExports.createElement(IconCheckCircle,{"aria-hidden":a});break}return c?reactExports.createElement("span",{className:ComponentClassName.AlertIcon},c):null};AlertIcon.displayName="AlertIcon";const FieldsetContext=reactExports.createContext({isFieldsetDisabled:!1}),useFieldset=()=>reactExports.useContext(FieldsetContext),FlexPrimitive=({className:s,children:a,...o},c)=>reactExports.createElement(View,{className:classNames(ComponentClassName.Flex,s),ref:c,...o},a),Flex=primitiveWithForwardRef(FlexPrimitive);Flex.displayName="Flex";const LINEAR_EMPTY="linear-empty",LINEAR_FILLED="linear-filled",CIRCULAR_EMPTY="circular-empty",CIRCULAR_FILLED="circular-filled",CIRCULAR_STROKE_WIDTH=8,RADIUS=42,CIRCUMFERENCE=2*RADIUS*Math.PI,LoaderPrimitive=({className:s,filledColor:a,emptyColor:o,size:c,variation:d,isDeterminate:b=!1,isPercentageTextHidden:$=!1,percentage:j=0,..._e},et)=>{j=Math.min(j,100),j=Math.max(j,0);const tt=`${j}%`,rt=classNames(ComponentClassName.Loader,classNameModifier(ComponentClassName.Loader,c),classNameModifier(ComponentClassName.Loader,d),classNameModifierByFlag(ComponentClassName.Loader,"determinate",b),s),nt=reactExports.createElement("g",null,reactExports.createElement("line",{x1:"0",x2:"100%",y1:"50%",y2:"50%",style:{stroke:String(o)},"data-testid":LINEAR_EMPTY}),reactExports.createElement("line",{x1:"0",x2:b?tt:"100%",y1:"50%",y2:"50%",style:{stroke:b&&j===0?"none":a?String(a):void 0},"data-testid":LINEAR_FILLED}),b?reactExports.createElement("text",{"aria-live":"polite",className:classNames(ComponentClassName.LoaderLabel,$?ComponentClassName.VisuallyHidden:null),x:`${-1+j}%`,y:"200%"},tt):null),it=reactExports.createElement("g",null,reactExports.createElement("circle",{cx:"50%",cy:"50%",r:`${RADIUS}%`,strokeWidth:`${CIRCULAR_STROKE_WIDTH}%`,style:{stroke:String(o)},"data-testid":CIRCULAR_EMPTY}),reactExports.createElement("circle",{cx:"50%",cy:"50%",r:`${RADIUS}%`,strokeWidth:`${CIRCULAR_STROKE_WIDTH}%`,style:{stroke:String(a),strokeDasharray:b?`${CIRCUMFERENCE}% ${CIRCUMFERENCE}%`:void 0,strokeDashoffset:b?`${CIRCUMFERENCE-CIRCUMFERENCE*j/100}%`:void 0},"data-testid":CIRCULAR_FILLED}),b?reactExports.createElement("text",{"aria-live":"polite",className:classNames(ComponentClassName.LoaderLabel,$?ComponentClassName.VisuallyHidden:null),x:"130%",y:"80%"},tt):null);return reactExports.createElement(View,{as:"svg",className:rt,ref:et,role:"img",..._e},d==="linear"?nt:it)},Loader=primitiveWithForwardRef(LoaderPrimitive);Loader.displayName="Loader";const supportedVariations=["link","primary",void 0],ButtonPrimitive=({className:s,children:a,colorTheme:o,isFullWidth:c=!1,isDisabled:d,isLoading:b,loadingText:$="",size:j,type:_e="button",variation:et,...tt},rt)=>{const nt=supportedVariations.includes(et)&&o?`${et??"outlined"}--${o}`:void 0,{isFieldsetDisabled:it}=useFieldset(),at=it||(d??b??tt.disabled),ct=classNames(ComponentClassName.Button,ComponentClassName.FieldGroupControl,classNameModifier(ComponentClassName.Button,et),classNameModifier(ComponentClassName.Button,nt),classNameModifier(ComponentClassName.Button,j),classNameModifierByFlag(ComponentClassName.Button,"disabled",at),classNameModifierByFlag(ComponentClassName.Button,"loading",b),classNameModifierByFlag(ComponentClassName.Button,"fullwidth",c),s);return reactExports.createElement(View,{ref:rt,as:"button",className:ct,isDisabled:at,type:_e,...tt},b?reactExports.createElement(Flex,{as:"span",className:ComponentClassName.ButtonLoaderWrapper},reactExports.createElement(Loader,{size:j}),$||null):a)},Button=primitiveWithForwardRef(ButtonPrimitive);Button.displayName="Button";const IconClose=s=>{const{className:a,size:o,...c}=s;return reactExports.createElement(View,{as:"span",width:o??"1em",height:o??"1em",className:classNames(ComponentClassName.Icon,a),...c},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:o?{width:o,height:o}:void 0},reactExports.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})))},TextPrimitive=({as:s="p",className:a,children:o,isTruncated:c,variation:d,...b},$)=>{const j=classNames(ComponentClassName.Text,classNameModifier(ComponentClassName.Text,d),classNameModifierByFlag(ComponentClassName.Text,"truncated",c),a);return reactExports.createElement(View,{as:s,className:j,ref:$,...b},o)},Text=primitiveWithForwardRef(TextPrimitive);Text.displayName="Text";const QA_FIELD_DESCRIPTION="qa-field-description",FieldDescription=({descriptiveText:s,labelHidden:a,...o})=>s?reactExports.createElement(Text,{"data-testid":QA_FIELD_DESCRIPTION,className:classNames(ComponentClassName.FieldDescription,{[ComponentClassName.VisuallyHidden]:a}),...o},s):null;FieldDescription.displayName="FieldDescription";const FieldErrorMessage=({errorMessage:s,hasError:a,...o})=>a&&s?reactExports.createElement(Text,{className:ComponentClassName.FieldErrorMessage,...o},s):null;FieldErrorMessage.displayName="FieldErrorMessage";const LabelPrimitive=({children:s,className:a,visuallyHidden:o,...c},d)=>reactExports.createElement(View,{as:"label",className:classNames(ComponentClassName.Label,a,{[ComponentClassName.VisuallyHidden]:o}),ref:d,...c},s),Label=primitiveWithForwardRef(LabelPrimitive);Label.displayName="Label";const AlertPrimitive=({buttonRef:s,children:a,className:o,dismissButtonLabel:c=ComponentText.Alert.dismissButtonLabel,hasIcon:d=!0,heading:b,isDismissible:$=!1,onDismiss:j,variation:_e,...et},tt)=>{const[rt,nt]=reactExports.useState(!1),it=useIcons("alert"),at=reactExports.useCallback(()=>{nt(!rt),isFunction$1(j)&&j()},[nt,j,rt]);return rt?null:reactExports.createElement(Flex,{className:classNames(ComponentClassName.Alert,o,classNameModifier(ComponentClassName.Alert,_e)),ref:tt,role:"alert",...et},d&&reactExports.createElement(AlertIcon,{variation:_e,ariaHidden:!0}),reactExports.createElement(View,{flex:"1"},b&&reactExports.createElement(View,{className:ComponentClassName.AlertHeading},b),reactExports.createElement(View,{className:ComponentClassName.AlertBody},a)),$&&reactExports.createElement(Button,{ariaLabel:c,variation:"link",className:ComponentClassName.AlertDismiss,onClick:at,ref:s},(it==null?void 0:it.close)??reactExports.createElement(IconClose,{"aria-hidden":"true"})))},Alert=primitiveWithForwardRef(AlertPrimitive);Alert.displayName="Alert";const useLayoutEffect=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},AUTO_GENERATED_ID_PREFIX="amplify-id",useReactId=$2AODx$react["useId".toString()]||(()=>{});let count=0;const useStableId=s=>{const[a,o]=reactExports.useState(useReactId());return useLayoutEffect(()=>{s||o(c=>c??String(count++))},[s]),s??(a?`${AUTO_GENERATED_ID_PREFIX}-${a}`:"")},getTestId=(s,a)=>s&&a?`${s}-${a}`:void 0,FieldGroupPrimitive=({children:s,className:a,innerEndComponent:o,innerStartComponent:c,orientation:d="horizontal",outerEndComponent:b,outerStartComponent:$,variation:j,..._e},et)=>{const tt=c!=null,rt=o!=null,nt=tt?ComponentClassName.FieldGroupHasInnerStart:null,it=rt?ComponentClassName.FieldGroupHasInnerEnd:null,at=classNames(ComponentClassName.FieldGroup,nt,it,classNameModifier(ComponentClassName.FieldGroup,d),a);return reactExports.createElement(Flex,{className:at,ref:et,..._e},$&&reactExports.createElement(View,{className:classNames(ComponentClassName.FieldGroupOuterStart,classNameModifier(ComponentClassName.FieldGroupOuterStart,j))},$),reactExports.createElement(View,{className:classNames(ComponentClassName.FieldGroupFieldWrapper,classNameModifier(ComponentClassName.FieldGroupFieldWrapper,d))},c&&reactExports.createElement(View,{className:ComponentClassName.FieldGroupInnerStart},c),s,o&&reactExports.createElement(View,{className:ComponentClassName.FieldGroupInnerEnd},o)),b&&reactExports.createElement(View,{className:classNames(ComponentClassName.FieldGroupOuterEnd,classNameModifier(ComponentClassName.FieldGroupOuterEnd,j))},b))},FieldGroup=primitiveWithForwardRef(FieldGroupPrimitive);FieldGroup.displayName="FieldGroup";const InputPrimitive=({autoComplete:s,checked:a,className:o,defaultChecked:c,defaultValue:d,id:b,isDisabled:$,isReadOnly:j,isRequired:_e,size:et,type:tt="text",hasError:rt=!1,value:nt,variation:it,...at},ct)=>{const st=classNames(ComponentClassName.Input,ComponentClassName.FieldGroupControl,classNameModifier(ComponentClassName.Input,it),classNameModifierByFlag(ComponentClassName.Input,"error",rt),classNameModifier(ComponentClassName.Input,et),o),{isFieldsetDisabled:ot}=useFieldset();return reactExports.createElement(View,{"aria-invalid":rt,as:"input",autoComplete:s,checked:a,className:st,defaultChecked:c,defaultValue:d,isDisabled:ot||$,id:b,readOnly:j,ref:ct,required:_e,type:tt,value:nt,...at})},Input=primitiveWithForwardRef(InputPrimitive);Input.displayName="Input";const isStyleKey=s=>s in ComponentPropsToStylePropsMap,splitPrimitiveProps=s=>{const a={styleProps:{},rest:{}};return Object.keys(s).forEach(o=>{isStyleKey(o)?a.styleProps={...a.styleProps,[o]:s[o]}:a.rest={...a.rest,[o]:s[o]}}),a},TextFieldPrimitive=(s,a)=>{const{className:o,descriptiveText:c,errorMessage:d,hasError:b=!1,id:$,innerEndComponent:j,innerStartComponent:_e,label:et,labelHidden:tt=!1,outerEndComponent:rt,outerStartComponent:nt,size:it,testId:at,variation:ct,inputStyles:st,...ot}=s,ht=useStableId($),dt=useStableId(),ft=c?dt:void 0,{styleProps:mt,rest:gt}=splitPrimitiveProps(ot);return reactExports.createElement(Flex,{className:classNames(ComponentClassName.Field,classNameModifier(ComponentClassName.Field,it),ComponentClassName.TextField,o),testId:at,...mt},reactExports.createElement(Label,{htmlFor:ht,visuallyHidden:tt},et),reactExports.createElement(FieldDescription,{id:dt,labelHidden:tt,descriptiveText:c}),reactExports.createElement(FieldGroup,{outerStartComponent:nt,outerEndComponent:rt,innerStartComponent:_e,innerEndComponent:j,variation:ct},reactExports.createElement(Input,{"aria-describedby":ft,hasError:b,id:ht,ref:a,size:it,variation:ct,...st,...gt})),reactExports.createElement(FieldErrorMessage,{hasError:b,errorMessage:d}))},TextField=primitiveWithForwardRef(TextFieldPrimitive);TextField.displayName="TextField";const VisuallyHiddenPrimitive=({as:s="span",children:a,className:o,...c},d)=>reactExports.createElement(View,{as:s,className:classNames(ComponentClassName.VisuallyHidden,o),ref:d,...c},a),VisuallyHidden=primitiveWithForwardRef(VisuallyHiddenPrimitive);VisuallyHidden.displayName="VisuallyHidden";const DividerPrimitive=({className:s,orientation:a="horizontal",size:o,label:c,...d},b)=>{const $=classNames(ComponentClassName.Divider,classNameModifier(ComponentClassName.Divider,a),classNameModifier(ComponentClassName.Divider,o),s);return reactExports.createElement(View,{"aria-orientation":a,as:"hr",className:$,"data-label":c,ref:b,...d})},Divider=primitiveWithForwardRef(DividerPrimitive);Divider.displayName="Divider";const IconExpandMore=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M16.59 8.58984L12 13.1698L7.41 8.58984L6 9.99984L12 15.9998L18 9.99984L16.59 8.58984Z",fill:"currentColor"})))},FieldsetPrimitive=({children:s,className:a,isDisabled:o,legend:c,legendHidden:d,size:b,testId:$,variation:j="plain",..._e},et)=>{const{isFieldsetDisabled:tt}=useFieldset(),rt=tt||o,nt=reactExports.useMemo(()=>({isFieldsetDisabled:rt}),[rt]),it=classNames(ComponentClassName.Fieldset,classNameModifier(ComponentClassName.Fieldset,j),classNameModifier(ComponentClassName.Fieldset,b),a),at=classNames(ComponentClassName.FieldsetLegend,classNameModifier(ComponentClassName.FieldsetLegend,b),{[ComponentClassName.VisuallyHidden]:d});return reactExports.createElement(FieldsetContext.Provider,{value:nt},reactExports.createElement(Flex,{as:"fieldset",className:it,ref:et,disabled:rt,testId:$,..._e},reactExports.createElement(VisuallyHidden,{as:"legend"},c),reactExports.createElement(View,{as:"div","aria-hidden":"true",className:at},c),s))},Fieldset=primitiveWithForwardRef(FieldsetPrimitive);Fieldset.displayName="Fieldset";const headingLevels={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"},HeadingPrimitive=({className:s,children:a,isTruncated:o,level:c=6,...d},b)=>reactExports.createElement(View,{as:headingLevels[c],className:classNames(ComponentClassName.Heading,classNameModifier(ComponentClassName.Heading,c),classNameModifierByFlag(ComponentClassName.Heading,"truncated",o),s),ref:b,...d},a),Heading=primitiveWithForwardRef(HeadingPrimitive);Heading.displayName="Heading";const IconVisibilityOff=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M12 6.0002C15.79 6.0002 19.17 8.1302 20.82 11.5002C20.23 12.7202 19.4 13.7702 18.41 14.6202L19.82 16.0302C21.21 14.8002 22.31 13.2602 23 11.5002C21.27 7.1102 17 4.0002 12 4.0002C10.73 4.0002 9.51 4.2002 8.36 4.5702L10.01 6.2202C10.66 6.0902 11.32 6.0002 12 6.0002ZM10.93 7.14019L13 9.2102C13.57 9.4602 14.03 9.9202 14.28 10.4902L16.35 12.5602C16.43 12.2202 16.49 11.8602 16.49 11.4902C16.5 9.0102 14.48 7.0002 12 7.0002C11.63 7.0002 11.28 7.05019 10.93 7.14019ZM2.01 3.8702L4.69 6.5502C3.06 7.8302 1.77 9.5302 1 11.5002C2.73 15.8902 7 19.0002 12 19.0002C13.52 19.0002 14.98 18.7102 16.32 18.1802L19.74 21.6002L21.15 20.1902L3.42 2.4502L2.01 3.8702ZM9.51 11.3702L12.12 13.9802C12.08 13.9902 12.04 14.0002 12 14.0002C10.62 14.0002 9.5 12.8802 9.5 11.5002C9.5 11.4502 9.51 11.4202 9.51 11.3702V11.3702ZM6.11 7.97019L7.86 9.7202C7.63 10.2702 7.5 10.8702 7.5 11.5002C7.5 13.9802 9.52 16.0002 12 16.0002C12.63 16.0002 13.23 15.8702 13.77 15.6402L14.75 16.6202C13.87 16.8602 12.95 17.0002 12 17.0002C8.21 17.0002 4.83 14.8702 3.18 11.5002C3.88 10.0702 4.9 8.89019 6.11 7.97019Z",fill:"currentColor"})))},IconVisibility=s=>{const{className:a,...o}=s;return reactExports.createElement(View,{as:"span",width:"1em",height:"1em",className:classNames(ComponentClassName.Icon,a),...o},reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M12 6C15.79 6 19.17 8.13 20.82 11.5C19.17 14.87 15.79 17 12 17C8.21 17 4.83 14.87 3.18 11.5C4.83 8.13 8.21 6 12 6ZM12 4C7 4 2.73 7.11 1 11.5C2.73 15.89 7 19 12 19C17 19 21.27 15.89 23 11.5C21.27 7.11 17 4 12 4ZM12 9C13.38 9 14.5 10.12 14.5 11.5C14.5 12.88 13.38 14 12 14C10.62 14 9.5 12.88 9.5 11.5C9.5 10.12 10.62 9 12 9ZM12 7C9.52 7 7.5 9.02 7.5 11.5C7.5 13.98 9.52 16 12 16C14.48 16 16.5 13.98 16.5 11.5C16.5 9.02 14.48 7 12 7Z",fill:"currentColor"})))},{passwordIsHidden,passwordIsShown,showPassword}=ComponentText.PasswordField,ShowPasswordButtonPrimitive=({fieldType:s,passwordIsHiddenLabel:a=passwordIsHidden,passwordIsShownLabel:o=passwordIsShown,showPasswordButtonLabel:c=showPassword,size:d,hasError:b,...$},j)=>{const _e=useIcons("passwordField"),et=classNames(ComponentClassName.FieldShowPassword,classNameModifierByFlag(ComponentClassName.FieldShowPassword,"error",b)),tt=s==="password"?(_e==null?void 0:_e.visibility)??reactExports.createElement(IconVisibility,{"aria-hidden":"true"}):(_e==null?void 0:_e.visibilityOff)??reactExports.createElement(IconVisibilityOff,{"aria-hidden":"true"});return reactExports.createElement(Button,{"aria-checked":s!=="password",ariaLabel:c,className:et,ref:j,role:"switch",size:d,...$},reactExports.createElement(VisuallyHidden,{"aria-live":"polite"},s==="password"?a:o),tt)},ShowPasswordButton=primitiveWithForwardRef(ShowPasswordButtonPrimitive);ShowPasswordButton.displayName="ShowPasswordButton";const PasswordFieldPrimitive=({autoComplete:s="current-password",label:a,className:o,hideShowPassword:c=!1,passwordIsHiddenLabel:d,passwordIsShownLabel:b,showPasswordButtonLabel:$,showPasswordButtonRef:j,size:_e,hasError:et,...tt},rt)=>{const[nt,it]=reactExports.useState("password"),at=reactExports.useCallback(()=>{it(nt==="password"?"text":"password")},[it,nt]);return reactExports.createElement(TextField,{autoComplete:s,outerEndComponent:c?null:reactExports.createElement(ShowPasswordButton,{fieldType:nt,onClick:at,passwordIsHiddenLabel:d,passwordIsShownLabel:b,ref:j,size:_e,showPasswordButtonLabel:$,hasError:et}),size:_e,type:nt,label:a,className:classNames(ComponentClassName.PasswordField,o),ref:rt,hasError:et,...tt})},PasswordField=primitiveWithForwardRef(PasswordFieldPrimitive);PasswordField.displayName="PasswordField";const SelectPrimitive=({autoComplete:s,className:a,size:o,variation:c,value:d,defaultValue:b,hasError:$,icon:j,iconColor:_e,children:et,placeholder:tt,isDisabled:rt,isRequired:nt,isMultiple:it=!1,selectSize:at=1,...ct},st)=>{const ot="",ht=d===void 0&&b===void 0&&tt,dt=it||at>1,ft=classNames(ComponentClassName.Select,ComponentClassName.FieldGroupControl,classNameModifier(ComponentClassName.Select,o),classNameModifier(ComponentClassName.Select,c),classNameModifierByFlag(ComponentClassName.Select,"error",$),classNameModifierByFlag(ComponentClassName.Select,"expanded",dt),a),mt=useIcons("select"),{isFieldsetDisabled:gt}=useFieldset();return reactExports.createElement(View,{className:ComponentClassName.SelectWrapper},reactExports.createElement(View,{"aria-invalid":$,as:"select",autoComplete:s,value:d,defaultValue:ht?ot:b,isDisabled:gt||rt,multiple:it,size:at,required:nt,className:ft,ref:st,...ct},tt&&reactExports.createElement("option",{value:""},tt),et),dt?null:reactExports.createElement(Flex,{className:classNames(ComponentClassName.SelectIcon,classNameModifier(ComponentClassName.SelectIcon,o)),color:_e},j??(mt==null?void 0:mt.expand)??reactExports.createElement(IconExpandMore,null)))},Select=primitiveWithForwardRef(SelectPrimitive);Select.displayName="Select";const selectFieldChildren=({children:s,options:a})=>s?(a!=null&&a.length&&console.warn("Amplify UI: <SelectField> component  defaults to rendering children over `options`. When using the `options` prop, omit children."),s):a==null?void 0:a.map((o,c)=>reactExports.createElement("option",{label:o,value:o,key:`${o}-${c}`},o)),SelectFieldPrimitive=(s,a)=>{const{children:o,className:c,descriptiveText:d,errorMessage:b,hasError:$=!1,id:j,label:_e,labelHidden:et=!1,options:tt,size:rt,testId:nt,inputStyles:it,...at}=s,ct=useStableId(j),st=useStableId(),ot=d?st:void 0,{styleProps:ht,rest:dt}=splitPrimitiveProps(at);return reactExports.createElement(Flex,{className:classNames(ComponentClassName.Field,classNameModifier(ComponentClassName.Field,rt),ComponentClassName.SelectField,c),testId:nt,...ht},reactExports.createElement(Label,{htmlFor:ct,visuallyHidden:et},_e),reactExports.createElement(FieldDescription,{id:st,labelHidden:et,descriptiveText:d}),reactExports.createElement(Select,{"aria-describedby":ot,hasError:$,id:ct,ref:a,size:rt,...dt,...it},selectFieldChildren({children:o,options:tt})),reactExports.createElement(FieldErrorMessage,{hasError:$,errorMessage:b}))},SelectField=primitiveWithForwardRef(SelectFieldPrimitive);SelectField.displayName="SelectField";const DialCodeSelectPrimitive=({className:s,dialCodeList:a,isReadOnly:o,...c},d)=>{const b=a??countryDialCodes,$=reactExports.useMemo(()=>b.map(j=>reactExports.createElement("option",{key:j,value:j,disabled:o},j)),[b,o]);return reactExports.createElement(SelectField,{"aria-disabled":o,autoComplete:"tel-country-code",className:classNames(ComponentClassName.CountryCodeSelect,ComponentClassName.DialCodeSelect,s),labelHidden:!0,ref:d,...c},$)},DialCodeSelect=primitiveWithForwardRef(DialCodeSelectPrimitive);DialCodeSelect.displayName="DialCodeSelect";const PhoneNumberFieldPrimitive=({autoComplete:s="tel-national",className:a,defaultDialCode:o,dialCodeLabel:c=ComponentText.PhoneNumberField.countryCodeLabel,dialCodeList:d,dialCodeName:b,dialCodeRef:$,hasError:j,isDisabled:_e,isReadOnly:et,onDialCodeChange:tt,onInput:rt,size:nt,variation:it,...at},ct)=>reactExports.createElement(TextField,{outerStartComponent:reactExports.createElement(DialCodeSelect,{defaultValue:o,dialCodeList:d,className:a,hasError:j,isDisabled:_e,isReadOnly:et,label:c,name:b,onChange:tt,ref:$,size:nt,variation:it}),autoComplete:s,className:classNames(ComponentClassName.PhoneNumberField,a),hasError:j,isDisabled:_e,isReadOnly:et,onInput:rt,ref:ct,size:nt,type:"tel",variation:it,...at}),PhoneNumberField=primitiveWithForwardRef(PhoneNumberFieldPrimitive);PhoneNumberField.displayName="PhoneNumberField";const defaultValue={name:"default"},RadioGroupContext=React.createContext(defaultValue),useRadioGroupContext=()=>reactExports.useContext(RadioGroupContext),RadioPrimitive=({children:s,className:a,id:o,isDisabled:c=!1,testId:d,value:b,labelPosition:$,...j},_e)=>{const{currentValue:et,defaultValue:tt,name:rt,hasError:nt,isGroupDisabled:it=!1,isRequired:at,isReadOnly:ct,onChange:st,size:ot,labelPosition:ht}=useRadioGroupContext(),{isFieldsetDisabled:dt}=useFieldset(),ft=dt||it||c||ct&&tt!==b,mt=et!==void 0?b===et:void 0,gt=tt!==void 0?b===tt:void 0,vt=$||ht;return reactExports.createElement(Flex,{as:"label",className:classNames(ComponentClassName.Radio,classNameModifierByFlag(ComponentClassName.Radio,"disabled",ft),vt?`amplify-label-${vt}`:null,a)},s&&reactExports.createElement(Text,{as:"span",className:classNames(ComponentClassName.RadioLabel,classNameModifierByFlag(ComponentClassName.RadioLabel,"disabled",ft))},s),reactExports.createElement(Input,{checked:mt,className:classNames(ComponentClassName.VisuallyHidden,ComponentClassName.RadioInput),defaultChecked:gt,hasError:nt,id:o,isDisabled:ft,isReadOnly:ct,isRequired:at,onChange:st,ref:_e,type:"radio",name:rt,value:b,...j}),reactExports.createElement(Flex,{"aria-hidden":"true",as:"span",className:classNames(ComponentClassName.RadioButton,classNameModifier(ComponentClassName.RadioButton,ot)),testId:d}))},Radio=primitiveWithForwardRef(RadioPrimitive);Radio.displayName="Radio";const RadioGroupFieldPrimitive=({children:s,className:a,defaultValue:o,descriptiveText:c,errorMessage:d,hasError:b=!1,id:$,isDisabled:j,isRequired:_e,isReadOnly:et,legend:tt,legendHidden:rt=!1,labelPosition:nt,onChange:it,name:at,size:ct,testId:st,value:ot,variation:ht,...dt},ft)=>{const mt=useStableId($),gt=useStableId(),vt=c?gt:void 0,yt=getTestId(st,ComponentClassName.RadioGroup),Et=reactExports.useMemo(()=>({currentValue:ot,defaultValue:o,hasError:b,isRequired:_e,isReadOnly:et,isGroupDisabled:j,onChange:it,size:ct,name:at,labelPosition:nt}),[o,b,j,_e,et,it,ct,at,ot,nt]);return reactExports.createElement(Fieldset,{className:classNames(ComponentClassName.Field,classNameModifier(ComponentClassName.Field,ct),ComponentClassName.RadioGroupField,a),isDisabled:j,legend:tt,legendHidden:rt,ref:ft,role:"radiogroup",size:ct,testId:st,variation:ht,...dt},reactExports.createElement(FieldDescription,{id:gt,labelHidden:rt,descriptiveText:c}),reactExports.createElement(Flex,{"aria-describedby":vt,className:ComponentClassName.RadioGroup,id:mt,testId:yt},reactExports.createElement(RadioGroupContext.Provider,{value:Et},s)),reactExports.createElement(FieldErrorMessage,{hasError:b,errorMessage:d}))},RadioGroupField=primitiveWithForwardRef(RadioGroupFieldPrimitive);RadioGroupField.displayName="RadioGroupField";const TabsContext=reactExports.createContext({activeTab:"",setActiveTab:()=>{}}),TabsItemPrimitive=({className:s,value:a,children:o,onClick:c,as:d="button",role:b="tab",...$},j)=>{const{activeTab:_e,setActiveTab:et}=reactExports.useContext(TabsContext),tt=_e===a,rt=nt=>{isTypedFunction(c)&&(c==null||c(nt)),et(a)};return reactExports.createElement(View,{...$,role:b,as:d,id:`${a}-tab`,"aria-selected":tt,"aria-controls":`${a}-panel`,tabIndex:tt?void 0:-1,className:classNames(ComponentClassName.TabsItem,classNameModifierByFlag(ComponentClassName.TabsItem,"active",_e===a),s),ref:j,onClick:rt},o)},TabsItem=primitiveWithForwardRef(TabsItemPrimitive);TabsItem.displayName="Tabs.Item";const isValidTab=s=>reactExports.isValidElement(s),TabListPrimitive=({className:s,children:a,indicatorPosition:o,spacing:c,role:d="tablist",...b},$)=>{const j=reactExports.useRef(null),{activeTab:_e,setActiveTab:et}=reactExports.useContext(TabsContext);reactExports.useImperativeHandle($,()=>j.current);const tt=reactExports.useMemo(()=>reactExports.Children.toArray(a).map(ct=>{if(ct&&isValidTab(ct))return ct.props.value}).filter(ct=>!!ct),[a]),rt=tt.indexOf(_e),nt=reactExports.useCallback(()=>{var ht;let ct=rt===tt.length-1?0:rt+1;const st=((ht=j.current)==null?void 0:ht.querySelectorAll("button"))??[];for(;st[ct].disabled;)ct===tt.length-1?ct=0:ct++;const ot=tt[ct];if(ot){et(ot);const dt=st[ct];dt==null||dt.focus(),dt==null||dt.click()}},[rt,et,tt]),it=reactExports.useCallback(()=>{var ht;let ct=rt===0?tt.length-1:rt-1;const st=((ht=j.current)==null?void 0:ht.querySelectorAll("button"))??[];for(;st[ct].disabled;)ct===0?ct=tt.length-1:ct--;const ot=tt[ct];if(ot){et(ot);const dt=st[ct];dt==null||dt.focus(),dt==null||dt.click()}},[rt,et,tt]),at=reactExports.useCallback(ct=>{switch(ct.key){case"ArrowLeft":ct.preventDefault(),ct.stopPropagation(),it();break;case"ArrowUp":case"ArrowRight":ct.preventDefault(),ct.stopPropagation(),nt();break}},[it,nt]);return reactExports.createElement(View,{...b,role:d,onKeyDown:at,className:classNames(ComponentClassName.TabsList,o?classNameModifier(ComponentClassName.TabsList,o):null,c?classNameModifier(ComponentClassName.TabsList,c):null,s),ref:j},a)},TabList=primitiveWithForwardRef(TabListPrimitive);TabList.displayName="Tabs.List";const TabPanelPrimitive=({className:s,value:a,children:o,role:c="tabpanel",...d},b)=>{const{activeTab:$,isLazy:j}=reactExports.useContext(TabsContext);return j&&$!==a?null:reactExports.createElement(View,{...d,role:c,id:`${a}-panel`,"aria-labelledby":`${a}-tab`,className:classNames(ComponentClassName.TabsPanel,classNameModifierByFlag(ComponentClassName.TabsPanel,"active",$===a),s),ref:b},o)},TabPanel=primitiveWithForwardRef(TabPanelPrimitive);TabPanel.displayName="Tabs.Panel";const TabsContainerPrimitive=({children:s,defaultValue:a,className:o,value:c,onValueChange:d,isLazy:b,...$},j)=>{const _e=c!==void 0,[et,tt]=reactExports.useState(()=>_e?c:a),rt=_e?c:et??"",nt=reactExports.useCallback(at=>{isFunction$1(d)&&d(at),_e||tt(at)},[d,_e]),it=reactExports.useMemo(()=>({activeTab:rt,isLazy:b,setActiveTab:nt}),[rt,nt,b]);return reactExports.createElement(TabsContext.Provider,{value:it},reactExports.createElement(View,{...$,ref:j,className:classNames(o,ComponentClassName.Tabs)},s))},TabsContainer=primitiveWithForwardRef(TabsContainerPrimitive);TabsContainer.displayName="Tabs.Container";const TabsPrimitive=({items:s,indicatorPosition:a,justifyContent:o,spacing:c,...d},b)=>reactExports.createElement(TabsContainer,{...d,ref:b},reactExports.createElement(TabList,{indicatorPosition:a,justifyContent:o,spacing:c},s==null?void 0:s.map(({value:$,label:j,content:_e,...et})=>reactExports.createElement(TabsItem,{...et,key:$,value:$},j))),s==null?void 0:s.map(({value:$,content:j,isDisabled:_e})=>reactExports.createElement(TabPanel,{key:$,value:$,isDisabled:_e},j))),Tabs=Object.assign(primitiveWithForwardRef(TabsPrimitive),{Item:TabsItem,List:TabList,Panel:TabPanel,Container:TabsContainer});Tabs.displayName="Tabs";const ValidationErrors=({errors:s,id:a,dataAttr:o})=>{if(!((s==null?void 0:s.length)>0))return null;const c=o?{[o]:!0}:{};return React.createElement(View,{...c,id:a},s.map(d=>React.createElement(Text,{key:d,role:"alert",variation:"error"},translate(d))))},VERSION="6.0.3",useDeprecationWarning=({message:s,shouldWarn:a})=>{const o=a&&(typeof process>"u"||process&&!1);useDeprecationWarning$1({message:s,shouldWarn:o})},CustomComponentsContext=reactExports.createContext(null),useCustomComponents=()=>{const s=reactExports.useContext(CustomComponentsContext);if(!s)throw new Error("`useCustomComponents` cannot be used outside of a `CustomComponentsContext.Provider`");return s},getFormDataFromEvent=s=>{const a=new FormData(s.target);return Object.fromEntries(a)};function useFormHandlers(){const{submitForm:s,updateBlur:a,updateForm:o}=useAuthenticator($=>[$.submitForm,$.updateBlur,$.updateForm]),c=reactExports.useCallback(({target:{name:$}})=>{a({name:$})},[a]),d=reactExports.useCallback(({target:{checked:$,name:j,type:_e,value:et}})=>{o({name:j,value:_e==="checkbox"&&!$?void 0:et})},[o]),b=reactExports.useCallback($=>{$.preventDefault(),s(getFormDataFromEvent($))},[s]);return{handleBlur:c,handleChange:d,handleSubmit:b}}const RemoteErrorMessage=()=>{const{error:s}=useAuthenticator(a=>[a.error]);return React.createElement(React.Fragment,null,s?React.createElement(Alert,{variation:"error",isDismissible:!0},translate(s)):null)};function FormField({autocomplete:s,dialCode:a,name:o,type:c,...d}){const{validationErrors:b}=useAuthenticator(({validationErrors:tt})=>[tt]),$=reactExports.useMemo(()=>getErrors(b[o]),[o,b]),j=($==null?void 0:$.length)>0,_e=useStableId(),et=j?_e:void 0;return c==="tel"?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(PhoneNumberField,{...d,name:o,defaultDialCode:a,dialCodeName:"country_code",autoComplete:s,hasError:j,"aria-describedby":et}),reactExports.createElement(ValidationErrors,{dataAttr:"data-amplify-sign-up-errors",errors:$,id:_e})):c==="password"?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(PasswordField,{...d,name:o,autoComplete:s,hasError:j,"aria-describedby":et}),reactExports.createElement(ValidationErrors,{dataAttr:"data-amplify-sign-up-errors",errors:$,id:_e})):reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(TextField,{...d,name:o,autoComplete:s,hasError:j,type:c,"aria-describedby":et}),reactExports.createElement(ValidationErrors,{dataAttr:"data-amplify-sign-up-errors",errors:$,id:_e}))}function FormFields(){const{fields:s}=useAuthenticator(({route:o})=>[o]),a=reactExports.useRef(s.map((o,c)=>reactExports.createElement(FormField,{key:c,...o}))).current;return reactExports.createElement(reactExports.Fragment,null,a)}const hasTabs=s=>s==="signIn"||"signUp";function RouteContainer({children:s,className:a,variation:o="default"}){const{route:c}=useAuthenticator(({route:$})=>[$]),{components:{Header:d,Footer:b}}=useCustomComponents();return React.createElement(View,{className:a,"data-amplify-authenticator":"","data-variation":o},React.createElement(View,{"data-amplify-container":""},React.createElement(d,null),React.createElement(View,{"data-amplify-router":"","data-amplify-router-content":hasTabs(c)?void 0:""},s),React.createElement(b,null)))}const{getDeliveryMessageText,getDeliveryMethodText,getConfirmingText:getConfirmingText$1,getConfirmText:getConfirmText$1,getResendCodeText:getResendCodeText$1}=authenticatorTextUtil;function ConfirmSignUp({className:s,variation:a}){const{isPending:o,resendCode:c,codeDeliveryDetails:d}=useAuthenticator(et=>[et.isPending,et.resendCode,et.codeDeliveryDetails]),{handleChange:b,handleSubmit:$}=useFormHandlers(),{components:{ConfirmSignUp:{Header:j=ConfirmSignUp.Header,Footer:_e=ConfirmSignUp.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-confirmsignup":"",method:"post",onChange:b,onSubmit:$},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement(j,null),React.createElement(Flex,{direction:"column"},React.createElement(Text,{className:"amplify-authenticator__subtitle"},getDeliveryMessageText(d)),React.createElement(FormFields,null),React.createElement(RemoteErrorMessage,null),React.createElement(Button,{variation:"primary",isDisabled:o,type:"submit",loadingText:getConfirmingText$1(),isLoading:o,fontWeight:"normal"},getConfirmText$1()),React.createElement(Button,{onClick:c,type:"button",fontWeight:"normal"},getResendCodeText$1())),React.createElement(_e,null))))}const DefaultHeader=()=>{const{codeDeliveryDetails:s}=useAuthenticator(a=>[a.codeDeliveryDetails]);return React.createElement(Heading,{level:4},getDeliveryMethodText(s))};ConfirmSignUp.Header=DefaultHeader;ConfirmSignUp.Footer=function s(){return null};const{getChangePasswordText,getChangingText,getBackToSignInText:getBackToSignInText$2}=authenticatorTextUtil,ForceNewPassword=({className:s,variation:a})=>{const{isPending:o,toSignIn:c}=useAuthenticator(tt=>[tt.isPending,tt.toSignIn]),{handleBlur:d,handleChange:b,handleSubmit:$}=useFormHandlers(),{components:{ForceNewPassword:{FormFields:j=ForceNewPassword.FormFields,Header:_e=ForceNewPassword.Header,Footer:et=ForceNewPassword.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-forcenewpassword":"",method:"post",onChange:b,onSubmit:$,onBlur:d},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement(_e,null),React.createElement(j,null),React.createElement(RemoteErrorMessage,null),React.createElement(Button,{isDisabled:o,type:"submit",variation:"primary",isLoading:o,loadingText:getChangingText(),fontWeight:"normal"},getChangePasswordText()),React.createElement(Button,{onClick:c,type:"button",fontWeight:"normal",variation:"link",size:"small"},getBackToSignInText$2()),React.createElement(et,null))))};ForceNewPassword.FormFields=function s(){return React.createElement(FormFields,null)};ForceNewPassword.Header=function s(){return React.createElement(Heading,{level:4},getChangePasswordText())};ForceNewPassword.Footer=function s(){return null};var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function s(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};utils$1.getSymbolTotalCodewords=function s(a){return CODEWORDS_COUNT[a]};utils$1.getBCHDigit=function(s){let a=0;for(;s!==0;)a++,s>>>=1;return a};utils$1.setToSJISFunction=function s(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=a};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function s(a){return toSJISFunction(a)};var errorCorrectionLevel={};(function(s){s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2};function a(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+o)}}s.isValid=function(c){return c&&typeof c.bit<"u"&&c.bit>=0&&c.bit<4},s.from=function(c,d){if(s.isValid(c))return c;try{return a(c)}catch{return d}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(s){const a=Math.floor(s/8);return(this.buffer[a]>>>7-s%8&1)===1},put:function(s,a){for(let o=0;o<a;o++)this.putBit((s>>>a-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),s&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}BitMatrix$1.prototype.set=function(s,a,o,c){const d=s*this.size+a;this.data[d]=o,c&&(this.reservedBit[d]=!0)};BitMatrix$1.prototype.get=function(s,a){return this.data[s*this.size+a]};BitMatrix$1.prototype.xor=function(s,a,o){this.data[s*this.size+a]^=o};BitMatrix$1.prototype.isReserved=function(s,a){return this.reservedBit[s*this.size+a]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(s){const a=utils$1.getSymbolSize;s.getRowColCoords=function(c){if(c===1)return[];const d=Math.floor(c/7)+2,b=a(c),$=b===145?26:Math.ceil((b-13)/(2*d-2))*2,j=[b-7];for(let _e=1;_e<d-1;_e++)j[_e]=j[_e-1]-$;return j.push(6),j.reverse()},s.getPositions=function(c){const d=[],b=s.getRowColCoords(c),$=b.length;for(let j=0;j<$;j++)for(let _e=0;_e<$;_e++)j===0&&_e===0||j===0&&_e===$-1||j===$-1&&_e===0||d.push([b[j],b[_e]]);return d}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function s(a){const o=getSymbolSize(a);return[[0,0],[o-FINDER_PATTERN_SIZE,0],[0,o-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};s.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},s.from=function(d){return s.isValid(d)?parseInt(d,10):void 0},s.getPenaltyN1=function(d){const b=d.size;let $=0,j=0,_e=0,et=null,tt=null;for(let rt=0;rt<b;rt++){j=_e=0,et=tt=null;for(let nt=0;nt<b;nt++){let it=d.get(rt,nt);it===et?j++:(j>=5&&($+=a.N1+(j-5)),et=it,j=1),it=d.get(nt,rt),it===tt?_e++:(_e>=5&&($+=a.N1+(_e-5)),tt=it,_e=1)}j>=5&&($+=a.N1+(j-5)),_e>=5&&($+=a.N1+(_e-5))}return $},s.getPenaltyN2=function(d){const b=d.size;let $=0;for(let j=0;j<b-1;j++)for(let _e=0;_e<b-1;_e++){const et=d.get(j,_e)+d.get(j,_e+1)+d.get(j+1,_e)+d.get(j+1,_e+1);(et===4||et===0)&&$++}return $*a.N2},s.getPenaltyN3=function(d){const b=d.size;let $=0,j=0,_e=0;for(let et=0;et<b;et++){j=_e=0;for(let tt=0;tt<b;tt++)j=j<<1&2047|d.get(et,tt),tt>=10&&(j===1488||j===93)&&$++,_e=_e<<1&2047|d.get(tt,et),tt>=10&&(_e===1488||_e===93)&&$++}return $*a.N3},s.getPenaltyN4=function(d){let b=0;const $=d.data.length;for(let _e=0;_e<$;_e++)b+=d.data[_e];return Math.abs(Math.ceil(b*100/$/5)-10)*a.N4};function o(c,d,b){switch(c){case s.Patterns.PATTERN000:return(d+b)%2===0;case s.Patterns.PATTERN001:return d%2===0;case s.Patterns.PATTERN010:return b%3===0;case s.Patterns.PATTERN011:return(d+b)%3===0;case s.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(b/3))%2===0;case s.Patterns.PATTERN101:return d*b%2+d*b%3===0;case s.Patterns.PATTERN110:return(d*b%2+d*b%3)%2===0;case s.Patterns.PATTERN111:return(d*b%3+(d+b)%2)%2===0;default:throw new Error("bad maskPattern:"+c)}}s.applyMask=function(d,b){const $=b.size;for(let j=0;j<$;j++)for(let _e=0;_e<$;_e++)b.isReserved(_e,j)||b.xor(_e,j,o(d,_e,j))},s.getBestMask=function(d,b){const $=Object.keys(s.Patterns).length;let j=0,_e=1/0;for(let et=0;et<$;et++){b(et),s.applyMask(et,d);const tt=s.getPenaltyN1(d)+s.getPenaltyN2(d)+s.getPenaltyN3(d)+s.getPenaltyN4(d);s.applyMask(et,d),tt<_e&&(_e=tt,j=et)}return j}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function s(a,o){switch(o){case ECLevel$1.L:return EC_BLOCKS_TABLE[(a-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(a-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(a-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(a-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function s(a,o){switch(o){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(a-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(a-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(a-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(a-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function s(){let a=1;for(let o=0;o<255;o++)EXP_TABLE[o]=a,LOG_TABLE[a]=o,a<<=1,a&256&&(a^=285);for(let o=255;o<512;o++)EXP_TABLE[o]=EXP_TABLE[o-255]})();galoisField.log=function s(a){if(a<1)throw new Error("log("+a+")");return LOG_TABLE[a]};galoisField.exp=function s(a){return EXP_TABLE[a]};galoisField.mul=function s(a,o){return a===0||o===0?0:EXP_TABLE[LOG_TABLE[a]+LOG_TABLE[o]]};(function(s){const a=galoisField;s.mul=function(c,d){const b=new Uint8Array(c.length+d.length-1);for(let $=0;$<c.length;$++)for(let j=0;j<d.length;j++)b[$+j]^=a.mul(c[$],d[j]);return b},s.mod=function(c,d){let b=new Uint8Array(c);for(;b.length-d.length>=0;){const $=b[0];for(let _e=0;_e<d.length;_e++)b[_e]^=a.mul(d[_e],$);let j=0;for(;j<b.length&&b[j]===0;)j++;b=b.slice(j)}return b},s.generateECPolynomial=function(c){let d=new Uint8Array([1]);for(let b=0;b<c;b++)d=s.mul(d,new Uint8Array([1,a.exp(b)]));return d}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function s(a){this.degree=a,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function s(a){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(a.length+this.degree);o.set(a);const c=Polynomial.mod(o,this.genPoly),d=this.degree-c.length;if(d>0){const b=new Uint8Array(this.degree);return b.set(c,d),b}return c};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function s(a){return!isNaN(a)&&a>=1&&a<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function s(a){return TEST_KANJI.test(a)};regex.testNumeric=function s(a){return TEST_NUMERIC.test(a)};regex.testAlphanumeric=function s(a){return TEST_ALPHANUMERIC.test(a)};(function(s){const a=versionCheck,o=regex;s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(b,$){if(!b.ccBits)throw new Error("Invalid mode: "+b);if(!a.isValid($))throw new Error("Invalid version: "+$);return $>=1&&$<10?b.ccBits[0]:$<27?b.ccBits[1]:b.ccBits[2]},s.getBestModeForData=function(b){return o.testNumeric(b)?s.NUMERIC:o.testAlphanumeric(b)?s.ALPHANUMERIC:o.testKanji(b)?s.KANJI:s.BYTE},s.toString=function(b){if(b&&b.id)return b.id;throw new Error("Invalid mode")},s.isValid=function(b){return b&&b.bit&&b.ccBits};function c(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+d)}}s.from=function(b,$){if(s.isValid(b))return b;try{return c(b)}catch{return $}}})(mode);(function(s){const a=utils$1,o=errorCorrectionCode,c=errorCorrectionLevel,d=mode,b=versionCheck,$=7973,j=a.getBCHDigit($);function _e(nt,it,at){for(let ct=1;ct<=40;ct++)if(it<=s.getCapacity(ct,at,nt))return ct}function et(nt,it){return d.getCharCountIndicator(nt,it)+4}function tt(nt,it){let at=0;return nt.forEach(function(ct){const st=et(ct.mode,it);at+=st+ct.getBitsLength()}),at}function rt(nt,it){for(let at=1;at<=40;at++)if(tt(nt,at)<=s.getCapacity(at,it,d.MIXED))return at}s.from=function(it,at){return b.isValid(it)?parseInt(it,10):at},s.getCapacity=function(it,at,ct){if(!b.isValid(it))throw new Error("Invalid QR Code version");typeof ct>"u"&&(ct=d.BYTE);const st=a.getSymbolTotalCodewords(it),ot=o.getTotalCodewordsCount(it,at),ht=(st-ot)*8;if(ct===d.MIXED)return ht;const dt=ht-et(ct,it);switch(ct){case d.NUMERIC:return Math.floor(dt/10*3);case d.ALPHANUMERIC:return Math.floor(dt/11*2);case d.KANJI:return Math.floor(dt/13);case d.BYTE:default:return Math.floor(dt/8)}},s.getBestVersionForData=function(it,at){let ct;const st=c.from(at,c.M);if(Array.isArray(it)){if(it.length>1)return rt(it,st);if(it.length===0)return 1;ct=it[0]}else ct=it;return _e(ct.mode,ct.getLength(),st)},s.getEncodedBits=function(it){if(!b.isValid(it)||it<7)throw new Error("Invalid QR Code version");let at=it<<12;for(;a.getBCHDigit(at)-j>=0;)at^=$<<a.getBCHDigit(at)-j;return it<<12|at}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function s(a,o){const c=a.bit<<3|o;let d=c<<10;for(;Utils$3.getBCHDigit(d)-G15_BCH>=0;)d^=G15<<Utils$3.getBCHDigit(d)-G15_BCH;return(c<<10|d)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(s){this.mode=Mode$4.NUMERIC,this.data=s.toString()}NumericData.getBitsLength=function s(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};NumericData.prototype.getLength=function s(){return this.data.length};NumericData.prototype.getBitsLength=function s(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function s(a){let o,c,d;for(o=0;o+3<=this.data.length;o+=3)c=this.data.substr(o,3),d=parseInt(c,10),a.put(d,10);const b=this.data.length-o;b>0&&(c=this.data.substr(o),d=parseInt(c,10),a.put(d,b*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(s){this.mode=Mode$3.ALPHANUMERIC,this.data=s}AlphanumericData.getBitsLength=function s(a){return 11*Math.floor(a/2)+6*(a%2)};AlphanumericData.prototype.getLength=function s(){return this.data.length};AlphanumericData.prototype.getBitsLength=function s(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function s(a){let o;for(o=0;o+2<=this.data.length;o+=2){let c=ALPHA_NUM_CHARS.indexOf(this.data[o])*45;c+=ALPHA_NUM_CHARS.indexOf(this.data[o+1]),a.put(c,11)}this.data.length%2&&a.put(ALPHA_NUM_CHARS.indexOf(this.data[o]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function s(a){for(var o=[],c=a.length,d=0;d<c;d++){var b=a.charCodeAt(d);if(b>=55296&&b<=56319&&c>d+1){var $=a.charCodeAt(d+1);$>=56320&&$<=57343&&(b=(b-55296)*1024+$-56320+65536,d+=1)}if(b<128){o.push(b);continue}if(b<2048){o.push(b>>6|192),o.push(b&63|128);continue}if(b<55296||b>=57344&&b<65536){o.push(b>>12|224),o.push(b>>6&63|128),o.push(b&63|128);continue}if(b>=65536&&b<=1114111){o.push(b>>18|240),o.push(b>>12&63|128),o.push(b>>6&63|128),o.push(b&63|128);continue}o.push(239,191,189)}return new Uint8Array(o).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(s){this.mode=Mode$2.BYTE,this.data=new Uint8Array(encodeUtf8(s))}ByteData.getBitsLength=function s(a){return a*8};ByteData.prototype.getLength=function s(){return this.data.length};ByteData.prototype.getBitsLength=function s(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(s){for(let a=0,o=this.data.length;a<o;a++)s.put(this.data[a],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(s){this.mode=Mode$1.KANJI,this.data=s}KanjiData.getBitsLength=function s(a){return a*13};KanjiData.prototype.getLength=function s(){return this.data.length};KanjiData.prototype.getBitsLength=function s(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(s){let a;for(a=0;a<this.data.length;a++){let o=Utils$2.toSJIS(this.data[a]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),s.put(o,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(s){var a={single_source_shortest_paths:function(o,c,d){var b={},$={};$[c]=0;var j=a.PriorityQueue.make();j.push(c,0);for(var _e,et,tt,rt,nt,it,at,ct,st;!j.empty();){_e=j.pop(),et=_e.value,rt=_e.cost,nt=o[et]||{};for(tt in nt)nt.hasOwnProperty(tt)&&(it=nt[tt],at=rt+it,ct=$[tt],st=typeof $[tt]>"u",(st||ct>at)&&($[tt]=at,j.push(tt,at),b[tt]=et))}if(typeof d<"u"&&typeof $[d]>"u"){var ot=["Could not find a path from ",c," to ",d,"."].join("");throw new Error(ot)}return b},extract_shortest_path_from_predecessor_list:function(o,c){for(var d=[],b=c;b;)d.push(b),o[b],b=o[b];return d.reverse(),d},find_path:function(o,c,d){var b=a.single_source_shortest_paths(o,c,d);return a.extract_shortest_path_from_predecessor_list(b,d)},PriorityQueue:{make:function(o){var c=a.PriorityQueue,d={},b;o=o||{};for(b in c)c.hasOwnProperty(b)&&(d[b]=c[b]);return d.queue=[],d.sorter=o.sorter||c.default_sorter,d},default_sorter:function(o,c){return o.cost-c.cost},push:function(o,c){var d={value:o,cost:c};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};s.exports=a})(dijkstra);var dijkstraExports=dijkstra.exports;(function(s){const a=mode,o=numericData,c=alphanumericData,d=byteData,b=kanjiData,$=regex,j=utils$1,_e=dijkstraExports;function et(ot){return unescape(encodeURIComponent(ot)).length}function tt(ot,ht,dt){const ft=[];let mt;for(;(mt=ot.exec(dt))!==null;)ft.push({data:mt[0],index:mt.index,mode:ht,length:mt[0].length});return ft}function rt(ot){const ht=tt($.NUMERIC,a.NUMERIC,ot),dt=tt($.ALPHANUMERIC,a.ALPHANUMERIC,ot);let ft,mt;return j.isKanjiModeEnabled()?(ft=tt($.BYTE,a.BYTE,ot),mt=tt($.KANJI,a.KANJI,ot)):(ft=tt($.BYTE_KANJI,a.BYTE,ot),mt=[]),ht.concat(dt,ft,mt).sort(function(vt,yt){return vt.index-yt.index}).map(function(vt){return{data:vt.data,mode:vt.mode,length:vt.length}})}function nt(ot,ht){switch(ht){case a.NUMERIC:return o.getBitsLength(ot);case a.ALPHANUMERIC:return c.getBitsLength(ot);case a.KANJI:return b.getBitsLength(ot);case a.BYTE:return d.getBitsLength(ot)}}function it(ot){return ot.reduce(function(ht,dt){const ft=ht.length-1>=0?ht[ht.length-1]:null;return ft&&ft.mode===dt.mode?(ht[ht.length-1].data+=dt.data,ht):(ht.push(dt),ht)},[])}function at(ot){const ht=[];for(let dt=0;dt<ot.length;dt++){const ft=ot[dt];switch(ft.mode){case a.NUMERIC:ht.push([ft,{data:ft.data,mode:a.ALPHANUMERIC,length:ft.length},{data:ft.data,mode:a.BYTE,length:ft.length}]);break;case a.ALPHANUMERIC:ht.push([ft,{data:ft.data,mode:a.BYTE,length:ft.length}]);break;case a.KANJI:ht.push([ft,{data:ft.data,mode:a.BYTE,length:et(ft.data)}]);break;case a.BYTE:ht.push([{data:ft.data,mode:a.BYTE,length:et(ft.data)}])}}return ht}function ct(ot,ht){const dt={},ft={start:{}};let mt=["start"];for(let gt=0;gt<ot.length;gt++){const vt=ot[gt],yt=[];for(let Et=0;Et<vt.length;Et++){const St=vt[Et],Ct=""+gt+Et;yt.push(Ct),dt[Ct]={node:St,lastCount:0},ft[Ct]={};for(let wt=0;wt<mt.length;wt++){const _t=mt[wt];dt[_t]&&dt[_t].node.mode===St.mode?(ft[_t][Ct]=nt(dt[_t].lastCount+St.length,St.mode)-nt(dt[_t].lastCount,St.mode),dt[_t].lastCount+=St.length):(dt[_t]&&(dt[_t].lastCount=St.length),ft[_t][Ct]=nt(St.length,St.mode)+4+a.getCharCountIndicator(St.mode,ht))}}mt=yt}for(let gt=0;gt<mt.length;gt++)ft[mt[gt]].end=0;return{map:ft,table:dt}}function st(ot,ht){let dt;const ft=a.getBestModeForData(ot);if(dt=a.from(ht,ft),dt!==a.BYTE&&dt.bit<ft.bit)throw new Error('"'+ot+'" cannot be encoded with mode '+a.toString(dt)+`.
 Suggested mode is: `+a.toString(ft));switch(dt===a.KANJI&&!j.isKanjiModeEnabled()&&(dt=a.BYTE),dt){case a.NUMERIC:return new o(ot);case a.ALPHANUMERIC:return new c(ot);case a.KANJI:return new b(ot);case a.BYTE:return new d(ot)}}s.fromArray=function(ht){return ht.reduce(function(dt,ft){return typeof ft=="string"?dt.push(st(ft,null)):ft.data&&dt.push(st(ft.data,ft.mode)),dt},[])},s.fromString=function(ht,dt){const ft=rt(ht,j.isKanjiModeEnabled()),mt=at(ft),gt=ct(mt,dt),vt=_e.find_path(gt.map,"start","end"),yt=[];for(let Et=1;Et<vt.length-1;Et++)yt.push(gt.table[vt[Et]].node);return s.fromArray(it(yt))},s.rawSplit=function(ht){return s.fromArray(rt(ht,j.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(s,a){const o=s.size,c=FinderPattern.getPositions(a);for(let d=0;d<c.length;d++){const b=c[d][0],$=c[d][1];for(let j=-1;j<=7;j++)if(!(b+j<=-1||o<=b+j))for(let _e=-1;_e<=7;_e++)$+_e<=-1||o<=$+_e||(j>=0&&j<=6&&(_e===0||_e===6)||_e>=0&&_e<=6&&(j===0||j===6)||j>=2&&j<=4&&_e>=2&&_e<=4?s.set(b+j,$+_e,!0,!0):s.set(b+j,$+_e,!1,!0))}}function setupTimingPattern(s){const a=s.size;for(let o=8;o<a-8;o++){const c=o%2===0;s.set(o,6,c,!0),s.set(6,o,c,!0)}}function setupAlignmentPattern(s,a){const o=AlignmentPattern.getPositions(a);for(let c=0;c<o.length;c++){const d=o[c][0],b=o[c][1];for(let $=-2;$<=2;$++)for(let j=-2;j<=2;j++)$===-2||$===2||j===-2||j===2||$===0&&j===0?s.set(d+$,b+j,!0,!0):s.set(d+$,b+j,!1,!0)}}function setupVersionInfo(s,a){const o=s.size,c=Version.getEncodedBits(a);let d,b,$;for(let j=0;j<18;j++)d=Math.floor(j/3),b=j%3+o-8-3,$=(c>>j&1)===1,s.set(d,b,$,!0),s.set(b,d,$,!0)}function setupFormatInfo(s,a,o){const c=s.size,d=FormatInfo.getEncodedBits(a,o);let b,$;for(b=0;b<15;b++)$=(d>>b&1)===1,b<6?s.set(b,8,$,!0):b<8?s.set(b+1,8,$,!0):s.set(c-15+b,8,$,!0),b<8?s.set(8,c-b-1,$,!0):b<9?s.set(8,15-b-1+1,$,!0):s.set(8,15-b-1,$,!0);s.set(c-8,8,1,!0)}function setupData(s,a){const o=s.size;let c=-1,d=o-1,b=7,$=0;for(let j=o-1;j>0;j-=2)for(j===6&&j--;;){for(let _e=0;_e<2;_e++)if(!s.isReserved(d,j-_e)){let et=!1;$<a.length&&(et=(a[$]>>>b&1)===1),s.set(d,j-_e,et),b--,b===-1&&($++,b=7)}if(d+=c,d<0||o<=d){d-=c,c=-c;break}}}function createData(s,a,o){const c=new BitBuffer;o.forEach(function(_e){c.put(_e.mode.bit,4),c.put(_e.getLength(),Mode.getCharCountIndicator(_e.mode,s)),_e.write(c)});const d=Utils$1.getSymbolTotalCodewords(s),b=ECCode.getTotalCodewordsCount(s,a),$=(d-b)*8;for(c.getLengthInBits()+4<=$&&c.put(0,4);c.getLengthInBits()%8!==0;)c.putBit(0);const j=($-c.getLengthInBits())/8;for(let _e=0;_e<j;_e++)c.put(_e%2?17:236,8);return createCodewords(c,s,a)}function createCodewords(s,a,o){const c=Utils$1.getSymbolTotalCodewords(a),d=ECCode.getTotalCodewordsCount(a,o),b=c-d,$=ECCode.getBlocksCount(a,o),j=c%$,_e=$-j,et=Math.floor(c/$),tt=Math.floor(b/$),rt=tt+1,nt=et-tt,it=new ReedSolomonEncoder(nt);let at=0;const ct=new Array($),st=new Array($);let ot=0;const ht=new Uint8Array(s.buffer);for(let vt=0;vt<$;vt++){const yt=vt<_e?tt:rt;ct[vt]=ht.slice(at,at+yt),st[vt]=it.encode(ct[vt]),at+=yt,ot=Math.max(ot,yt)}const dt=new Uint8Array(c);let ft=0,mt,gt;for(mt=0;mt<ot;mt++)for(gt=0;gt<$;gt++)mt<ct[gt].length&&(dt[ft++]=ct[gt][mt]);for(mt=0;mt<nt;mt++)for(gt=0;gt<$;gt++)dt[ft++]=st[gt][mt];return dt}function createSymbol(s,a,o,c){let d;if(Array.isArray(s))d=Segments.fromArray(s);else if(typeof s=="string"){let et=a;if(!et){const tt=Segments.rawSplit(s);et=Version.getBestVersionForData(tt,o)}d=Segments.fromString(s,et||40)}else throw new Error("Invalid data");const b=Version.getBestVersionForData(d,o);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=b;else if(a<b)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+b+`.
`);const $=createData(a,o,d),j=Utils$1.getSymbolSize(a),_e=new BitMatrix(j);return setupFinderPattern(_e,a),setupTimingPattern(_e),setupAlignmentPattern(_e,a),setupFormatInfo(_e,o,0),a>=7&&setupVersionInfo(_e,a),setupData(_e,$),isNaN(c)&&(c=MaskPattern.getBestMask(_e,setupFormatInfo.bind(null,_e,o))),MaskPattern.applyMask(c,_e),setupFormatInfo(_e,o,c),{modules:_e,version:a,errorCorrectionLevel:o,maskPattern:c,segments:d}}qrcode.create=function s(a,o){if(typeof a>"u"||a==="")throw new Error("No input text");let c=ECLevel.M,d,b;return typeof o<"u"&&(c=ECLevel.from(o.errorCorrectionLevel,ECLevel.M),d=Version.from(o.version),b=MaskPattern.from(o.maskPattern),o.toSJISFunc&&Utils$1.setToSJISFunction(o.toSJISFunc)),createSymbol(a,d,c,b)};var canvas={},utils={};(function(s){function a(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let c=o.slice().replace("#","").split("");if(c.length<3||c.length===5||c.length>8)throw new Error("Invalid hex color: "+o);(c.length===3||c.length===4)&&(c=Array.prototype.concat.apply([],c.map(function(b){return[b,b]}))),c.length===6&&c.push("F","F");const d=parseInt(c.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+c.slice(0,6).join("")}}s.getOptions=function(c){c||(c={}),c.color||(c.color={});const d=typeof c.margin>"u"||c.margin===null||c.margin<0?4:c.margin,b=c.width&&c.width>=21?c.width:void 0,$=c.scale||4;return{width:b,scale:b?4:$,margin:d,color:{dark:a(c.color.dark||"#000000ff"),light:a(c.color.light||"#ffffffff")},type:c.type,rendererOpts:c.rendererOpts||{}}},s.getScale=function(c,d){return d.width&&d.width>=c+d.margin*2?d.width/(c+d.margin*2):d.scale},s.getImageWidth=function(c,d){const b=s.getScale(c,d);return Math.floor((c+d.margin*2)*b)},s.qrToImageData=function(c,d,b){const $=d.modules.size,j=d.modules.data,_e=s.getScale($,b),et=Math.floor(($+b.margin*2)*_e),tt=b.margin*_e,rt=[b.color.light,b.color.dark];for(let nt=0;nt<et;nt++)for(let it=0;it<et;it++){let at=(nt*et+it)*4,ct=b.color.light;if(nt>=tt&&it>=tt&&nt<et-tt&&it<et-tt){const st=Math.floor((nt-tt)/_e),ot=Math.floor((it-tt)/_e);ct=rt[j[st*$+ot]?1:0]}c[at++]=ct.r,c[at++]=ct.g,c[at++]=ct.b,c[at]=ct.a}}})(utils);(function(s){const a=utils;function o(d,b,$){d.clearRect(0,0,b.width,b.height),b.style||(b.style={}),b.height=$,b.width=$,b.style.height=$+"px",b.style.width=$+"px"}function c(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}s.render=function(b,$,j){let _e=j,et=$;typeof _e>"u"&&(!$||!$.getContext)&&(_e=$,$=void 0),$||(et=c()),_e=a.getOptions(_e);const tt=a.getImageWidth(b.modules.size,_e),rt=et.getContext("2d"),nt=rt.createImageData(tt,tt);return a.qrToImageData(nt.data,b,_e),o(rt,et,tt),rt.putImageData(nt,0,0),et},s.renderToDataURL=function(b,$,j){let _e=j;typeof _e>"u"&&(!$||!$.getContext)&&(_e=$,$=void 0),_e||(_e={});const et=s.render(b,$,_e),tt=_e.type||"image/png",rt=_e.rendererOpts||{};return et.toDataURL(tt,rt.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(s,a){const o=s.a/255,c=a+'="'+s.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function svgCmd(s,a,o){let c=s+a;return typeof o<"u"&&(c+=" "+o),c}function qrToPath(s,a,o){let c="",d=0,b=!1,$=0;for(let j=0;j<s.length;j++){const _e=Math.floor(j%a),et=Math.floor(j/a);!_e&&!b&&(b=!0),s[j]?($++,j>0&&_e>0&&s[j-1]||(c+=b?svgCmd("M",_e+o,.5+et+o):svgCmd("m",d,0),d=0,b=!1),_e+1<a&&s[j+1]||(c+=svgCmd("h",$),$=0)):d++}return c}svgTag.render=function s(a,o,c){const d=Utils.getOptions(o),b=a.modules.size,$=a.modules.data,j=b+d.margin*2,_e=d.color.light.a?"<path "+getColorAttrib(d.color.light,"fill")+' d="M0 0h'+j+"v"+j+'H0z"/>':"",et="<path "+getColorAttrib(d.color.dark,"stroke")+' d="'+qrToPath($,b,d.margin)+'"/>',tt='viewBox="0 0 '+j+" "+j+'"',nt='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+tt+' shape-rendering="crispEdges">'+_e+et+`</svg>
`;return typeof c=="function"&&c(null,nt),nt};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(s,a,o,c,d){const b=[].slice.call(arguments,1),$=b.length,j=typeof b[$-1]=="function";if(!j&&!canPromise())throw new Error("Callback required as last argument");if(j){if($<2)throw new Error("Too few arguments provided");$===2?(d=o,o=a,a=c=void 0):$===3&&(a.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=o,o=a,a=void 0))}else{if($<1)throw new Error("Too few arguments provided");return $===1?(o=a,a=c=void 0):$===2&&!a.getContext&&(c=o,o=a,a=void 0),new Promise(function(_e,et){try{const tt=QRCode.create(o,c);_e(s(tt,a,c))}catch(tt){et(tt)}})}try{const _e=QRCode.create(o,c);d(null,s(_e,a,c))}catch(_e){d(_e)}}browser.create=QRCode.create;browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser.toString=renderCanvas.bind(null,function(s,a,o){return SvgRenderer.render(s,o)});const{getConfirmText,getConfirmingText,getBackToSignInText:getBackToSignInText$1}=authenticatorTextUtil,ConfirmSignInFooter=()=>{const{isPending:s,toSignIn:a}=useAuthenticator(o=>[o.isPending,o.toSignIn]);return React.createElement(Flex,{direction:"column"},React.createElement(Button,{isDisabled:s,type:"submit",variation:"primary",fontWeight:"normal",isLoading:s,loadingText:getConfirmingText()},getConfirmText()),React.createElement(Button,{onClick:a,type:"button",variation:"link",fontWeight:"normal",size:"small"},getBackToSignInText$1()))},logger=new ConsoleLogger("SetupTotp-logger"),{getSetupTotpText,getCopiedText,getLoadingText}=authenticatorTextUtil,SetupTotp=({className:s,variation:a})=>{const{totpSecretCode:o,isPending:c,username:d,QRFields:b}=useAuthenticator(ft=>[ft.isPending,ft.totpSecretCode,ft.username]),{handleChange:$,handleSubmit:j}=useFormHandlers(),{components:{SetupTotp:{Header:_e=SetupTotp.Header,Footer:et=SetupTotp.Footer}}}=useCustomComponents(),[tt,rt]=reactExports.useState(!0),[nt,it]=reactExports.useState(),[at,ct]=reactExports.useState("COPY"),{totpIssuer:st="AWSCognito",totpUsername:ot=d}=b??{},ht=reactExports.useCallback(async()=>{try{const ft=getTotpCodeURL(st,ot,o),mt=await browser.toDataURL(ft);it(mt)}catch(ft){logger.error(ft)}finally{rt(!1)}},[st,ot,o]);reactExports.useEffect(()=>{nt||ht()},[ht,nt]);const dt=()=>{navigator.clipboard.writeText(o),ct(getCopiedText())};return reactExports.createElement(RouteContainer,{className:s,variation:a},reactExports.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-setup-totp":"",method:"post",onChange:$,onSubmit:j},reactExports.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:c},reactExports.createElement(_e,null),reactExports.createElement(Flex,{direction:"column"},tt?reactExports.createElement("p",null,getLoadingText(),""):reactExports.createElement("img",{"data-amplify-qrcode":!0,src:nt,alt:"qr code",width:"228",height:"228"}),reactExports.createElement(Flex,{"data-amplify-copy":!0},reactExports.createElement("div",null,o),reactExports.createElement(Flex,{"data-amplify-copy-svg":!0,onClick:dt},reactExports.createElement("div",{"data-amplify-copy-tooltip":!0},at),reactExports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},reactExports.createElement("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z"})))),reactExports.createElement(FormFields,null),reactExports.createElement(RemoteErrorMessage,null)),reactExports.createElement(ConfirmSignInFooter,null),reactExports.createElement(et,null))))};SetupTotp.Header=function s(){return reactExports.createElement(Heading,{level:3},getSetupTotpText())};SetupTotp.Footer=function s(){return null};const AppleIcon=()=>React.createElement("svg",{"aria-label":"Apple icon",className:"amplify-icon federated-sign-in-icon",fill:"#000",preserveAspectRatio:"xMidYMid",stroke:"#000",strokeWidth:"0",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"})),GoogleIcon=()=>React.createElement("svg",{"aria-label":"Google icon",className:"amplify-icon federated-sign-in-icon",viewBox:"0 0 256 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},React.createElement("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"}),React.createElement("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"}),React.createElement("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"}),React.createElement("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})),FacebookIcon=()=>React.createElement(Icon,{className:"federated-sign-in-icon",ariaLabel:"Facebook icon",viewBox:{minX:0,minY:0,width:279,height:538},pathData:"M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z",fill:"#1877F2"}),AmazonIcon=()=>React.createElement("svg",{"aria-label":"Amazon icon",className:"amplify-icon federated-sign-in-icon",viewBox:"0 0 243 264",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},React.createElement("path",{d:"M230.826 208.039C227.468 203.683 208.551 205.982 200.056 206.998C197.471 207.321 197.076 205.042 199.407 203.405C214.475 192.665 239.201 195.766 242.082 199.364C244.966 202.982 241.337 228.071 227.173 240.049C225.001 241.888 222.93 240.904 223.898 238.468C227.077 230.431 234.205 212.419 230.826 208.039ZM123.769 264C71.0234 264 39.0764 241.955 14.7853 217.542C9.97339 212.706 3.71799 206.296 0.311513 200.691C-1.09773 198.372 2.59096 195.022 5.04421 196.844C35.239 219.268 79.1012 239.538 122.53 239.538C151.82 239.538 188.046 227.47 217.669 214.868C222.147 212.966 222.147 219.18 221.512 221.061C221.183 222.032 206.515 236.221 186.247 247.047C167.304 257.166 143.397 264 123.769 264Z",fill:"#F2541B"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M142.943 111.185C142.943 124.756 143.268 136.054 136.406 148.123C130.856 157.913 122.027 163.95 112.222 163.95C98.8288 163.95 90.9806 153.772 90.9806 138.693C90.9806 109.036 117.677 103.647 142.943 103.647V111.185ZM178.166 196.081C175.858 198.15 171.635 198.22 169.914 196.894C157.974 187.684 149.89 173.688 149.89 173.688C130.706 193.156 117.127 199 92.2879 199C62.8772 199 40 180.905 40 144.729C40 116.461 55.3552 97.2408 77.2563 87.823C96.2094 79.5256 122.684 78.0173 142.943 75.7517C142.943 75.7517 144.633 53.933 138.699 45.9806C134.098 39.8163 126.272 36.9329 119.089 36.9329C106.127 36.8829 93.61 43.9051 91.1262 57.4188C90.4136 61.2829 87.5533 64.5261 84.54 64.206L51.0823 60.5922C48.5156 60.2951 45.0381 57.6639 45.8636 53.3081C53.644 12.3684 90.7373 0 123.989 0C140.983 0 163.21 4.51651 176.608 17.3349C193.597 33.1648 191.969 54.2755 191.969 77.2722V131.51C191.969 147.835 198.768 154.987 205.151 163.775C207.376 166.953 207.886 170.714 205.04 173.032C197.902 178.999 178.166 196.081 178.166 196.081Z",fill:"#F2541B"})),FederatedSignInButton=s=>{const{icon:a,provider:o,text:c}=s,{toFederatedSignIn:d}=useAuthenticator(),b=j=>{j.preventDefault(),d({provider:o})};let $;return a==="facebook"?$=React.createElement(FacebookIcon,null):a==="google"?$=React.createElement(GoogleIcon,null):a==="amazon"?$=React.createElement(AmazonIcon,null):a==="apple"&&($=React.createElement(AppleIcon,null)),React.createElement(Button,{onClick:b,className:"federated-sign-in-button",fontWeight:"normal",gap:"1rem"},$,React.createElement(Text,{as:"span"},c))},{getSignInWithFederationText,getOrText}=authenticatorTextUtil;function FederatedSignIn(){const{route:s,socialProviders:a}=useAuthenticator(({route:o,socialProviders:c})=>[o,c]);return a.length===0?null:React.createElement(Flex,{direction:"column",padding:"0 0 1rem 0",className:"federated-sign-in-container"},a.map(o=>{switch(o){case"amazon":return React.createElement(FederatedSignInButton,{icon:"amazon",key:o,provider:FederatedIdentityProviders.Amazon,text:getSignInWithFederationText(s,o)});case"apple":return React.createElement(FederatedSignInButton,{icon:"apple",key:o,provider:FederatedIdentityProviders.Apple,text:getSignInWithFederationText(s,o)});case"facebook":return React.createElement(FederatedSignInButton,{icon:"facebook",key:o,provider:FederatedIdentityProviders.Facebook,text:getSignInWithFederationText(s,o)});case"google":return React.createElement(FederatedSignInButton,{icon:"google",key:o,provider:FederatedIdentityProviders.Google,text:getSignInWithFederationText(s,o)});default:console.error(`Authenticator does not support ${o}. Please open an issue: https://github.com/aws-amplify/amplify-ui/issues/choose`)}}),React.createElement(Divider,{size:"small",label:getOrText()}))}const{getSignInText,getSigningInText,getForgotPasswordText}=authenticatorTextUtil;function SignIn(){const{isPending:s}=useAuthenticator(b=>[b.isPending]),{handleChange:a,handleSubmit:o}=useFormHandlers(),{components:{SignIn:{Header:c=SignIn.Header,Footer:d=SignIn.Footer}}}=useCustomComponents();return React.createElement(View,null,React.createElement(c,null),React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-signin":"",method:"post",onSubmit:o,onChange:a},React.createElement(FederatedSignIn,null),React.createElement(Flex,{direction:"column"},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:s},React.createElement(VisuallyHidden,null,React.createElement("legend",null,getSignInText())),React.createElement(FormFields,null)),React.createElement(RemoteErrorMessage,null),React.createElement(Button,{isDisabled:s,isFullWidth:!0,type:"submit",variation:"primary",isLoading:s,loadingText:getSigningInText()},getSignInText()))),React.createElement(d,null))}const DefaultFooter=()=>{const{toForgotPassword:s}=useAuthenticator(a=>[a.toForgotPassword]);return React.createElement(View,{"data-amplify-footer":""},React.createElement(Button,{fontWeight:"normal",onClick:s,size:"small",variation:"link"},getForgotPasswordText()))};SignIn.Footer=DefaultFooter;SignIn.Header=function s(){return null};const{getCreateAccountText,getCreatingAccountText}=authenticatorTextUtil;function SignUp(){const{hasValidationErrors:s,isPending:a}=useAuthenticator(_e=>[_e.hasValidationErrors,_e.isPending]),{handleChange:o,handleBlur:c,handleSubmit:d}=useFormHandlers(),{components:{SignUp:{Header:b=SignUp.Header,FormFields:$=SignUp.FormFields,Footer:j=SignUp.Footer}}}=useCustomComponents();return React.createElement(View,null,React.createElement(b,null),React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-signup":"",method:"post",onChange:o,onSubmit:d,onBlur:c},React.createElement(FederatedSignIn,null),React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:a},React.createElement(Flex,{direction:"column"},React.createElement($,null),React.createElement(RemoteErrorMessage,null)),React.createElement(Button,{isDisabled:s||a,isFullWidth:!0,type:"submit",variation:"primary",isLoading:a,loadingText:getCreatingAccountText()},getCreateAccountText()))),React.createElement(j,null))}SignUp.Header=function s(){return null};SignUp.FormFields=function s(){return React.createElement(FormFields,null)};SignUp.Footer=function s(){return null};const{getSignInTabText,getSignUpTabText}=authenticatorTextUtil,SignInSignUpTabs=({className:s,hideSignUp:a,variation:o})=>{const{route:c,toSignIn:d,toSignUp:b}=useAuthenticator($=>[$.route,$.toSignIn,$.toSignUp]);return React.createElement(RouteContainer,{className:s,variation:o},a?React.createElement(View,{"data-amplify-router-content":""},c==="signIn"&&React.createElement(SignIn,null)):React.createElement(Tabs.Container,{value:c,isLazy:!0,onValueChange:()=>c==="signIn"?b():d()},React.createElement(Tabs.List,{spacing:"equal",indicatorPosition:"top"},React.createElement(Tabs.Item,{value:"signIn"},getSignInTabText()),React.createElement(Tabs.Item,{value:"signUp"},getSignUpTabText())),React.createElement(Tabs.Panel,{value:"signIn","data-amplify-router-content":""},React.createElement(SignIn,null)),React.createElement(Tabs.Panel,{value:"signUp","data-amplify-router-content":""},React.createElement(SignUp,null))))},{getSubmitText,getSubmittingText}=authenticatorTextUtil,TwoButtonSubmitFooter=s=>{const{cancelButtonSendType:a,cancelButtonText:o,submitButtonText:c}=s,{isPending:d,resendCode:b,skipVerification:$,toSignIn:j}=useAuthenticator(rt=>[rt.isPending]),_e=()=>{switch(a){case"SKIP":$();break;case"RESEND":b();break;case"SIGN_IN":j();break;default:return}},et=d?React.createElement(React.Fragment,null,getSubmittingText(),""):React.createElement(React.Fragment,null,getSubmitText()),tt=c??et;return React.createElement(Flex,{direction:"column"},React.createElement(Button,{fontWeight:"normal",variation:"primary",isDisabled:d,type:"submit"},tt),React.createElement(Button,{onClick:_e,type:"button",variation:"link",fontWeight:"normal",size:"small"},o))},{getAccountRecoveryInfoText:getAccountRecoveryInfoText$1,getSkipText:getSkipText$1}=authenticatorTextUtil,ConfirmVerifyUser=({className:s,variation:a})=>{const{isPending:o}=useAuthenticator(j=>[j.isPending]),{handleChange:c,handleSubmit:d}=useFormHandlers(),{components:{ConfirmVerifyUser:{Header:b=ConfirmVerifyUser.Header,Footer:$=ConfirmVerifyUser.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-confirmverifyuser":"",method:"post",onChange:c,onSubmit:d},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement(b,null),React.createElement(Flex,{direction:"column"},React.createElement(FormFields,null)),React.createElement(RemoteErrorMessage,null),React.createElement(TwoButtonSubmitFooter,{cancelButtonText:getSkipText$1(),cancelButtonSendType:"SKIP"}),React.createElement($,null))))};ConfirmVerifyUser.Header=function s(){return React.createElement(Heading,{level:3},getAccountRecoveryInfoText$1())};ConfirmVerifyUser.Footer=function s(){return null};const{getSkipText,getVerifyText,getVerifyContactText,getAccountRecoveryInfoText}=authenticatorTextUtil,censorContactInformation=(s,a)=>{const o=translate(s);let c=a;if(s==="Phone Number")c=censorPhoneNumber(a);else if(s==="Email"){const d=a.split("@");c=`${censorAllButFirstAndLast(d[0])}@${d[1]}`}return`${o}: ${c}`},generateRadioGroup=s=>Object.entries(s).map(([a,o])=>React.createElement(Radio,{name:"unverifiedAttr",value:a,key:a},censorContactInformation(defaultFormFieldOptions[a].label,o))),VerifyUser=({className:s,variation:a})=>{const{components:{VerifyUser:{Header:o=VerifyUser.Header,Footer:c=VerifyUser.Footer}}}=useCustomComponents(),{isPending:d,unverifiedUserAttributes:b}=useAuthenticator(({isPending:tt,unverifiedUserAttributes:rt})=>[tt,rt]),{handleChange:$,handleSubmit:j}=useFormHandlers(),_e=d?React.createElement(React.Fragment,null,"Verifying"):React.createElement(React.Fragment,null,getVerifyText()),et=React.createElement(RadioGroupField,{legend:getVerifyContactText(),name:"verify_context",isDisabled:d,legendHidden:!0},generateRadioGroup(b));return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-verifyuser":"",method:"post",onChange:$,onSubmit:j},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:d},React.createElement(o,null),et,React.createElement(RemoteErrorMessage,null),React.createElement(TwoButtonSubmitFooter,{cancelButtonText:getSkipText(),cancelButtonSendType:"SKIP",submitButtonText:_e}),React.createElement(c,null))))};VerifyUser.Header=function s(){return React.createElement(Heading,{level:3},getAccountRecoveryInfoText())};VerifyUser.Footer=function s(){return null};const{getChallengeText}=authenticatorTextUtil,ConfirmSignIn=({className:s,variation:a})=>{const{isPending:o}=useAuthenticator(j=>[j.isPending]),{handleChange:c,handleSubmit:d}=useFormHandlers(),{components:{ConfirmSignIn:{Header:b=ConfirmSignIn.Header,Footer:$=ConfirmSignIn.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-confirmsignin":"",method:"post",onChange:c,onSubmit:d},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement(b,null),React.createElement(Flex,{direction:"column"},React.createElement(FormFields,null),React.createElement(RemoteErrorMessage,null)),React.createElement(ConfirmSignInFooter,null),React.createElement($,null))))};function Header(){const{challengeName:s}=useAuthenticator(({challengeName:a})=>[a]);return React.createElement(Heading,{level:3},getChallengeText(s))}ConfirmSignIn.Header=Header;ConfirmSignIn.Footer=function s(){return null};const{getResendCodeText,getResetYourPasswordText:getResetYourPasswordText$1}=authenticatorTextUtil,ConfirmResetPassword=({className:s,variation:a})=>{const{isPending:o}=useAuthenticator(_e=>[_e.isPending]),{handleBlur:c,handleChange:d,handleSubmit:b}=useFormHandlers(),{components:{ConfirmResetPassword:{Header:$=ConfirmResetPassword.Header,Footer:j=ConfirmResetPassword.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-confirmresetpassword":"",method:"post",onSubmit:b,onChange:d,onBlur:c},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement($,null),React.createElement(Flex,{direction:"column"},React.createElement(FormFields,null)),React.createElement(RemoteErrorMessage,null),React.createElement(TwoButtonSubmitFooter,{cancelButtonSendType:"RESEND",cancelButtonText:getResendCodeText()}),React.createElement(j,null))))};ConfirmResetPassword.Header=function s(){const a=getResetYourPasswordText$1();return React.createElement(Heading,{level:3},a)};ConfirmResetPassword.Footer=function s(){return null};const{getBackToSignInText,getSendingText,getSendCodeText,getResetYourPasswordText}=authenticatorTextUtil,ForgotPassword=({className:s,variation:a})=>{const{isPending:o}=useAuthenticator(j=>[j.isPending]),{handleChange:c,handleSubmit:d}=useFormHandlers(),{components:{ForgotPassword:{Header:b=ForgotPassword.Header,Footer:$=ForgotPassword.Footer}}}=useCustomComponents();return React.createElement(RouteContainer,{className:s,variation:a},React.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-forgotpassword":"",method:"post",onChange:c,onSubmit:d},React.createElement(Flex,{as:"fieldset",direction:"column",isDisabled:o},React.createElement(b,null),React.createElement(Flex,{direction:"column"},React.createElement(FormFields,null)),React.createElement(RemoteErrorMessage,null),React.createElement(TwoButtonSubmitFooter,{cancelButtonText:getBackToSignInText(),cancelButtonSendType:"SIGN_IN",submitButtonText:o?React.createElement(React.Fragment,null,getSendingText(),""):React.createElement(React.Fragment,null,getSendCodeText())}),React.createElement($,null))))};ForgotPassword.Header=function s(){return React.createElement(Heading,{level:3},getResetYourPasswordText())};ForgotPassword.Footer=function s(){return null};const isSignInOrSignUpRoute=s=>s==="signIn"||s==="signUp";function RenderNothing(){return null}const getRouteComponent=s=>{switch(s){case"authenticated":case"idle":case"setup":case"transition":return RenderNothing;case"confirmSignUp":return ConfirmSignUp;case"confirmSignIn":return ConfirmSignIn;case"setupTotp":return SetupTotp;case"signIn":case"signUp":return SignInSignUpTabs;case"forceNewPassword":return ForceNewPassword;case"forgotPassword":return ForgotPassword;case"confirmResetPassword":return ConfirmResetPassword;case"verifyUser":return VerifyUser;case"confirmVerifyUser":return ConfirmVerifyUser;default:return console.warn(`Unhandled Authenticator route - please open an issue: ${s}`),RenderNothing}};function Router({className:s,hideSignUp:a,variation:o}){const{route:c}=useAuthenticator(({route:b})=>[b]),d=reactExports.useMemo(()=>getRouteComponent(c),[c]);return React.createElement(d,{className:s,hideSignUp:isSignInOrSignUpRoute(c)?a:void 0,variation:o})}const defaultComponents={Header:()=>null,SignIn:{Header:SignIn.Header,Footer:SignIn.Footer},SignUp:{Header:SignUp.Header,FormFields:SignUp.FormFields,Footer:SignUp.Footer},ConfirmSignUp:{Header:ConfirmSignUp.Header,Footer:ConfirmSignUp.Footer},SetupTotp:{Header:SetupTotp.Header,Footer:SetupTotp.Footer},ConfirmResetPassword:{Header:ConfirmResetPassword.Header,Footer:ConfirmResetPassword.Footer},ConfirmSignIn:{Header:ConfirmSignIn.Header,Footer:ConfirmSignIn.Footer},VerifyUser:{Header:VerifyUser.Header,Footer:VerifyUser.Footer},ConfirmVerifyUser:{Header:ConfirmVerifyUser.Header,Footer:ConfirmVerifyUser.Footer},ForceNewPassword:{Header:ForceNewPassword.Header,Footer:ForceNewPassword.Footer,FormFields:ForceNewPassword.FormFields},ForgotPassword:{Header:ForgotPassword.Header,Footer:ForgotPassword.Footer},Footer:()=>null};function AuthenticatorInternal({children:s,className:a,components:o,formFields:c,hideSignUp:d,initialState:b,loginMechanisms:$,passwordSettings:j,signUpAttributes:_e,services:et,socialProviders:tt,variation:rt}){useDeprecationWarning({message:"The `passwordSettings` prop has been deprecated and will be removed in a future major version of Amplify UI.",shouldWarn:!1});const{route:nt,signOut:it,user:at}=useAuthenticator(({route:ot,signOut:ht,user:dt})=>[ot,ht,dt]);useAuthenticatorInitMachine({initialState:b,loginMechanisms:$,passwordSettings:j,services:et,signUpAttributes:_e,socialProviders:tt,formFields:c});const ct=reactExports.useMemo(()=>({components:{...defaultComponents,...o}}),[o]);return nt==="authenticated"||nt==="signOut"?s?reactExports.createElement(reactExports.Fragment,null,isFunction$1(s)?s({signOut:it,user:at}):s):null:reactExports.createElement(CustomComponentsContext.Provider,{value:ct},reactExports.createElement(Router,{className:a,hideSignUp:d,variation:rt}))}function Authenticator(s){return useSetUserAgent({componentName:"Authenticator",packageName:"react",version:VERSION}),reactExports.createElement(AuthenticatorProvider,null,reactExports.createElement(AuthenticatorInternal,{...s}))}Authenticator.Provider=AuthenticatorProvider;Authenticator.ForgotPassword=ForgotPassword;Authenticator.SetupTotp=SetupTotp;Authenticator.SignIn=SignIn;Authenticator.SignUp=SignUp;Authenticator.ForceNewPassword=ForceNewPassword;function withAuthenticator(s,a={}){const{variation:o="modal"}=a;return function(d){return React.createElement(Authenticator,{variation:o,...a},b=>React.createElement(s,{...d,...b}))}}const styles="",aws_project_region="ap-southeast-2",aws_cognito_identity_pool_id="ap-southeast-2:767e310c-45d0-445a-98c0-553014cfd8ee",aws_cognito_region="ap-southeast-2",aws_user_pools_id="ap-southeast-2_4bgERYGFZ",aws_user_pools_web_client_id="367b7l2k2ho1kbop9eaavnd9b",oauth={},aws_cognito_username_attributes=["EMAIL"],aws_cognito_social_providers=[],aws_cognito_signup_attributes=["EMAIL"],aws_cognito_mfa_configuration="OFF",aws_cognito_mfa_types=["SMS"],aws_cognito_password_protection_settings={passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms=["EMAIL"],config={aws_project_region,aws_cognito_identity_pool_id,aws_cognito_region,aws_user_pools_id,aws_user_pools_web_client_id,oauth,aws_cognito_username_attributes,aws_cognito_social_providers,aws_cognito_signup_attributes,aws_cognito_mfa_configuration,aws_cognito_mfa_types,aws_cognito_password_protection_settings,aws_cognito_verification_mechanisms};DefaultAmplify.configure(config);function Auth({user:s}){return reactExports.useEffect(()=>{s&&(window.location.href="/")},[s]),jsx(Fragment,{})}const Authentication=withAuthenticator(Auth),routes=createRoutesFromChildren(jsxs(Route,{path:"/",element:jsx(App$1,{}),children:[jsx(Route,{index:!0,element:jsx(App,{})}),jsx(Route,{path:"/auth",element:jsx(Authentication,{})}),jsx(Route,{path:"/me",element:jsx(DonutList,{})})]})),router=createBrowserRouter(routes);client$1.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(RouterProvider,{router})}))});export default h0();
